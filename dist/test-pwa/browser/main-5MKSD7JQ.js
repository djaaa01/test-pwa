var BI=Object.create;var ha=Object.defineProperty,zI=Object.defineProperties,HI=Object.getOwnPropertyDescriptor,UI=Object.getOwnPropertyDescriptors,VI=Object.getOwnPropertyNames,rf=Object.getOwnPropertySymbols,WI=Object.getPrototypeOf,sf=Object.prototype.hasOwnProperty,GI=Object.prototype.propertyIsEnumerable;var of=(e,t,n)=>t in e?ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cn=(e,t)=>{for(var n in t||={})sf.call(t,n)&&of(e,n,t[n]);if(rf)for(var n of rf(t))GI.call(t,n)&&of(e,n,t[n]);return e},si=(e,t)=>zI(e,UI(t));var af=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var YI=(e,t,n,f)=>{if(t&&typeof t=="object"||typeof t=="function")for(let S of VI(t))!sf.call(e,S)&&S!==n&&ha(e,S,{get:()=>t[S],enumerable:!(f=HI(t,S))||f.enumerable});return e};var XI=(e,t,n)=>(n=e!=null?BI(WI(e)):{},YI(t||!e||!e.__esModule?ha(n,"default",{value:e,enumerable:!0}):n,e));var ga=(e,t,n)=>new Promise((f,S)=>{var v=u=>{try{l(n.next(u))}catch(_){S(_)}},x=u=>{try{l(n.throw(u))}catch(_){S(_)}},l=u=>u.done?f(u.value):Promise.resolve(u.value).then(v,x);l((n=n.apply(e,t)).next())});var Lc=af((Ks,Pc)=>{"use strict";(function(t,n){typeof Ks=="object"&&typeof Pc=="object"?Pc.exports=n():typeof define=="function"&&define.amd?define([],n):typeof Ks=="object"?Ks.colorPicker=n():(t.tui=t.tui||{},t.tui.colorPicker=n())})(window,function(){return function(e){var t={};function n(f){if(t[f])return t[f].exports;var S=t[f]={i:f,l:!1,exports:{}};return e[f].call(S.exports,S,S.exports,n),S.l=!0,S.exports}return n.m=e,n.c=t,n.d=function(f,S,v){n.o(f,S)||Object.defineProperty(f,S,{enumerable:!0,get:v})},n.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},n.t=function(f,S){if(S&1&&(f=n(f)),S&8||S&4&&typeof f=="object"&&f&&f.__esModule)return f;var v=Object.create(null);if(n.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:f}),S&2&&typeof f!="string")for(var x in f)n.d(v,x,(function(l){return f[l]}).bind(null,x));return v},n.n=function(f){var S=f&&f.__esModule?function(){return f.default}:function(){return f};return n.d(S,"a",S),S},n.o=function(f,S){return Object.prototype.hasOwnProperty.call(f,S)},n.p="dist",n(n.s=33)}([function(e,t,n){"use strict";function f(S,v){var x=Object.prototype.hasOwnProperty,l,u,_,N;for(_=1,N=arguments.length;_<N;_+=1){l=arguments[_];for(u in l)x.call(l,u)&&(S[u]=l[u])}return S}e.exports=f},function(e,t,n){"use strict";function f(S){return S instanceof Array}e.exports=f},function(e,t,n){"use strict";var f=n(1),S=n(6),v=n(7);function x(l,u,_){f(l)?S(l,u,_):v(l,u,_)}e.exports=x},function(e,t,n){"use strict";function f(S){return S===void 0}e.exports=f},function(e,t,n){"use strict";var f=n(22),S=n(2),v=n(6),x=n(7),l=n(37),u=0,_={getLength:function(N){var k=0;return x(N,function(){k+=1}),k},map:function(N,k,j){var R=[];return S(N,function(){R.push(k.apply(j||null,arguments))}),R},filter:function(N,k,j){var R=[];return v(N,function(C){k.apply(j||null,arguments)&&R.push(C)}),R},generateId:function(){return u+=1,u},isOldBrowser:function(){return f.msie&&f.version<9}(),sendHostName:function(){l("color-picker","UA-129987462-1")}};e.exports=_},function(e,t,n){"use strict";var f=n(1);function S(v,x,l){var u,_;if(l=l||0,!f(x))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(x,v,l);for(_=x.length,u=l;l>=0&&u<_;u+=1)if(x[u]===v)return u;return-1}e.exports=S},function(e,t,n){"use strict";function f(S,v,x){var l=0,u=S.length;for(x=x||null;l<u&&v.call(x,S[l],l,S)!==!1;l+=1);}e.exports=f},function(e,t,n){"use strict";function f(S,v,x){var l;x=x||null;for(l in S)if(S.hasOwnProperty(l)&&v.call(x,S[l],l,S)===!1)break}e.exports=f},function(e,t,n){"use strict";var f=n(39),S=n(13),v=n(41),x=n(3),l=n(9),u=n(19),_=n(4);function N(k,j){var R=_.generateId();k=k||{},x(j)&&(j=l.appendHTMLElement("div")),f(j,"tui-view-"+R),this.id=R,this.container=j,this.childs=new u(function(C){return C.id}),this.parent=null}N.prototype.addChild=function(k,j){j&&j.call(k,this),k.parent=this,this.childs.add(k)},N.prototype.removeChild=function(k,j){var R=v(k)?this.childs.items[k]:k;j&&j.call(R,this),this.childs.remove(R.id)},N.prototype.render=function(){this.childs.each(function(k){k.render()})},N.prototype.recursive=function(k,j){S(k)&&(j||k(this),this.childs.each(function(R){R.recursive(k)}))},N.prototype.resize=function(){for(var k=Array.prototype.slice.call(arguments),j=this.parent;j;)S(j._onResize)&&j._onResize.apply(j,k),j=j.parent},N.prototype._beforeDestroy=function(){},N.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},N.prototype.destroy=function(k){this.childs&&(this.childs.each(function(j){j.destroy(!0),j._destroy()}),this.childs.clear()),!k&&this._destroy()},N.prototype.getViewBound=function(){var k=this.container.getBoundingClientRect();return{x:k.left,y:k.top,width:k.right-k.left,height:k.bottom-k.top}},e.exports=N},function(e,t,n){"use strict";var f={appendHTMLElement:function(S,v,x){var l=document.createElement(S);return l.className=x||"",v?v.appendChild(l):document.body.appendChild(l),l}};e.exports=f},function(e,t,n){"use strict";var f=n(0),S=n(20),v=n(11),x=n(21),l=n(1),u=n(13),_=n(2),N=/\s+/g;function k(){this.events=null,this.contexts=null}k.mixin=function(j){f(j.prototype,k.prototype)},k.prototype._getHandlerItem=function(j,R){var C={handler:j};return R&&(C.context=R),C},k.prototype._safeEvent=function(j){var R=this.events,C;return R||(R=this.events={}),j&&(C=R[j],C||(C=[],R[j]=C),R=C),R},k.prototype._safeContext=function(){var j=this.contexts;return j||(j=this.contexts=[]),j},k.prototype._indexOfContext=function(j){for(var R=this._safeContext(),C=0;R[C];){if(j===R[C][0])return C;C+=1}return-1},k.prototype._memorizeContext=function(j){var R,C;S(j)&&(R=this._safeContext(),C=this._indexOfContext(j),C>-1?R[C][1]+=1:R.push([j,1]))},k.prototype._forgetContext=function(j){var R,C;S(j)&&(R=this._safeContext(),C=this._indexOfContext(j),C>-1&&(R[C][1]-=1,R[C][1]<=0&&R.splice(C,1)))},k.prototype._bindEvent=function(j,R,C){var s=this._safeEvent(j);this._memorizeContext(C),s.push(this._getHandlerItem(R,C))},k.prototype.on=function(j,R,C){var s=this;v(j)?(j=j.split(N),_(j,function(y){s._bindEvent(y,R,C)})):x(j)&&(C=R,_(j,function(y,m){s.on(m,y,C)}))},k.prototype.once=function(j,R,C){var s=this;if(x(j)){C=R,_(j,function(m,i){s.once(i,m,C)});return}function y(){R.apply(C,arguments),s.off(j,y,C)}this.on(j,y,C)},k.prototype._spliceMatches=function(j,R){var C=0,s;if(l(j))for(s=j.length;C<s;C+=1)R(j[C])===!0&&(j.splice(C,1),s-=1,C-=1)},k.prototype._matchHandler=function(j){var R=this;return function(C){var s=j===C.handler;return s&&R._forgetContext(C.context),s}},k.prototype._matchContext=function(j){var R=this;return function(C){var s=j===C.context;return s&&R._forgetContext(C.context),s}},k.prototype._matchHandlerAndContext=function(j,R){var C=this;return function(s){var y=j===s.handler,m=R===s.context,i=y&&m;return i&&C._forgetContext(s.context),i}},k.prototype._offByEventName=function(j,R){var C=this,s=u(R),y=C._matchHandler(R);j=j.split(N),_(j,function(m){var i=C._safeEvent(m);s?C._spliceMatches(i,y):(_(i,function(c){C._forgetContext(c.context)}),C.events[m]=[])})},k.prototype._offByHandler=function(j){var R=this,C=this._matchHandler(j);_(this._safeEvent(),function(s){R._spliceMatches(s,C)})},k.prototype._offByObject=function(j,R){var C=this,s;this._indexOfContext(j)<0?_(j,function(y,m){C.off(m,y)}):v(R)?(s=this._matchContext(j),C._spliceMatches(this._safeEvent(R),s)):u(R)?(s=this._matchHandlerAndContext(R,j),_(this._safeEvent(),function(y){C._spliceMatches(y,s)})):(s=this._matchContext(j),_(this._safeEvent(),function(y){C._spliceMatches(y,s)}))},k.prototype.off=function(j,R){v(j)?this._offByEventName(j,R):arguments.length?u(j)?this._offByHandler(j):x(j)&&this._offByObject(j,R):(this.events={},this.contexts=[])},k.prototype.fire=function(j){this.invoke.apply(this,arguments)},k.prototype.invoke=function(j){var R,C,s,y;if(!this.hasListener(j))return!0;for(R=this._safeEvent(j),C=Array.prototype.slice.call(arguments,1),s=0;R[s];){if(y=R[s],y.handler.apply(y.context,C)===!1)return!1;s+=1}return!0},k.prototype.hasListener=function(j){return this.getListenerLength(j)>0},k.prototype.getListenerLength=function(j){var R=this._safeEvent(j);return R.length},e.exports=k},function(e,t,n){"use strict";function f(S){return typeof S=="string"||S instanceof String}e.exports=f},function(e,t,n){"use strict";var f=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,S={leadingZero:function(v,x){var l="",u=0;if((v+"").length>x)return v+"";for(;u<x-1;u+=1)l+="0";return(l+v).slice(x*-1)},isValidRGB:function(v){return f.test(v)},hexToRGB:function(v){var x,l,u;return S.isValidRGB(v)?(v=v.substring(1),x=parseInt(v.substr(0,2),16),l=parseInt(v.substr(2,2),16),u=parseInt(v.substr(4,2),16),[x,l,u]):!1},rgbToHEX:function(v,x,l){var u="#"+S.leadingZero(v.toString(16),2)+S.leadingZero(x.toString(16),2)+S.leadingZero(l.toString(16),2);return S.isValidRGB(u)?u:!1},rgbToHSV:function(v,x,l){var u,_,N,k,j,R;if(v/=255,x/=255,l/=255,u=Math.max(v,x,l),_=Math.min(v,x,l),j=u,R=u-_,k=u===0?0:R/u,u===_)N=0;else{switch(u){case v:N=(x-l)/R+(x<l?6:0);break;case x:N=(l-v)/R+2;break;case l:N=(v-x)/R+4;break}N/=6}return[Math.round(N*360),Math.round(k*100),Math.round(j*100)]},hsvToRGB:function(v,x,l){var u,_,N,k,j,R,C,s;if(v=Math.max(0,Math.min(360,v)),x=Math.max(0,Math.min(100,x)),l=Math.max(0,Math.min(100,l)),x/=100,l/=100,x===0)return u=_=N=l,[Math.round(u*255),Math.round(_*255),Math.round(N*255)];switch(v/=60,k=Math.floor(v),j=v-k,R=l*(1-x),C=l*(1-x*j),s=l*(1-x*(1-j)),k){case 0:u=l,_=s,N=R;break;case 1:u=C,_=l,N=R;break;case 2:u=R,_=l,N=s;break;case 3:u=R,_=C,N=l;break;case 4:u=s,_=R,N=l;break;default:u=l,_=R,N=C;break}return[Math.round(u*255),Math.round(_*255),Math.round(N*255)]}};e.exports=S},function(e,t,n){"use strict";function f(S){return S instanceof Function}e.exports=f},function(e,t,n){"use strict";var f=n(11),S=n(2),v=n(26);function x(_,N,k,j){if(f(N)){S(N.split(/\s+/g),function(R){l(_,R,k,j)});return}S(N,function(R,C){l(_,C,R,k)})}function l(_,N,k,j){function R(C){k.call(j||_,C||window.event)}"addEventListener"in _?_.addEventListener(N,R):"attachEvent"in _&&_.attachEvent("on"+N,R),u(_,N,k,R)}function u(_,N,k,j){var R=v(_,N),C=!1;S(R,function(s){return s.handler===k?(C=!0,!1):!0}),C||R.push({handler:k,wrappedHandler:j})}e.exports=x},function(e,t,n){"use strict";function f(S){if(S.preventDefault){S.preventDefault();return}S.returnValue=!1}e.exports=f},function(e,t,n){"use strict";function f(S){return S.replace(/([A-Z])/g,function(v){return"-"+v.toLowerCase()})}e.exports=f},function(e,t,n){"use strict";var f=n(11),S=n(2),v=n(26);function x(_,N,k){if(f(N)){S(N.split(/\s+/g),function(j){l(_,j,k)});return}S(N,function(j,R){l(_,R,j)})}function l(_,N,k){var j=v(_,N),R;k?(S(j,function(C,s){return k===C.handler?(u(_,N,C.wrappedHandler),R=s,!1):!0}),j.splice(R,1)):(S(j,function(C){u(_,N,C.wrappedHandler)}),j.splice(0,j.length))}function u(_,N,k){"removeEventListener"in _?_.removeEventListener(N,k):"detachEvent"in _&&_.detachEvent("on"+N,k)}e.exports=x},function(e,t,n){"use strict";var f=n(50);function S(v,x){var l=f(x.prototype);l.constructor=v,v.prototype=l}e.exports=S},function(e,t,n){"use strict";var f=n(6),S=n(7),v=n(0),x=n(1),l=n(20),u=n(13),_=n(21),N=n(4),k=Array.prototype.slice;function j(R){this.items={},this.length=0,u(R)&&(this.getItemID=R)}j.and=function(R){var C;return R=k.call(arguments),C=R.length,function(s){for(var y=0;y<C;y+=1)if(!R[y].call(null,s))return!1;return!0}},j.or=function(R){var C;return R=k.call(arguments),C=R.length,function(s){for(var y=1,m=R[0].call(null,s);y<C;y+=1)m=m||R[y].call(null,s);return m}},j.merge=function(R){var C={},s=new j(R.getItemID);return f(arguments,function(y){v(C,y.items)}),s.items=C,s.length=N.getLength(s.items),s},j.prototype.getItemID=function(R){return R._id+""},j.prototype.add=function(R){var C,s;if(arguments.length>1){f(k.call(arguments),function(y){this.add(y)},this);return}C=this.getItemID(R),s=this.items,s[C]||(this.length+=1),s[C]=R},j.prototype.remove=function(R){var C=[],s,y;return this.length?arguments.length>1?(C=N.map(k.call(arguments),function(m){return this.remove(m)},this),C):(s=this.items,_(R)&&(R=this.getItemID(R)),s[R]?(this.length-=1,y=s[R],delete s[R],y):C):C},j.prototype.clear=function(){this.items={},this.length=0},j.prototype.has=function(R){var C,s;return this.length?(C=u(R),s=!1,C?this.each(function(y){return R(y)===!0?(s=!0,!1):!0}):(R=_(R)?this.getItemID(R):R,s=l(this.items[R])),s):!1},j.prototype.doWhenHas=function(R,C,s){var y=this.items[R];l(y)&&C.call(s||this,y)},j.prototype.find=function(R){var C=new j;return this.hasOwnProperty("getItemID")&&(C.getItemID=this.getItemID),this.each(function(s){R(s)===!0&&C.add(s)}),C},j.prototype.groupBy=function(R,C){var s={},y=u(R),m=this.getItemID,i,c;if(x(R)){if(f(R,function(o){s[o+""]=new j(m)}),!C)return s;R=C,y=!0}return this.each(function(o){y?c=R(o):(c=o[R],u(c)&&(c=c.apply(o))),i=s[c],i||(i=s[c]=new j(m)),i.add(o)}),s},j.prototype.single=function(){var R;return this.each(function(C){return R=C,!1},this),R},j.prototype.sort=function(R){var C=[];return this.each(function(s){C.push(s)}),u(R)&&(C=C.sort(R)),C},j.prototype.each=function(R,C){S(this.items,R,C||this)},j.prototype.toArray=function(){return this.length?N.map(this.items,function(R){return R}):[]},e.exports=j},function(e,t,n){"use strict";var f=n(3),S=n(36);function v(x){return!f(x)&&!S(x)}e.exports=v},function(e,t,n){"use strict";function f(S){return S===Object(S)}e.exports=f},function(e,t,n){"use strict";var f={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};typeof window<"u"&&window.navigator&&S();function S(){var v=window.navigator,x=v.appName.replace(/\s/g,"_"),l=v.userAgent,u=/MSIE\s([0-9]+[.0-9]*)/,_=/Trident.*rv:11\./,N=/Edge\/(\d+)\./,k={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},j,R,C={Microsoft_Internet_Explorer:function(){var y=l.match(u);y?(f.msie=!0,f.version=parseFloat(y[1])):f.others=!0},Netscape:function(){var y=!1;if(_.exec(l))f.msie=!0,f.version=11,y=!0;else if(N.exec(l))f.edge=!0,f.version=l.match(N)[1],y=!0;else for(j in k)if(k.hasOwnProperty(j)&&(R=l.match(k[j]),R&&R.length>1)){f[j]=y=!0,f.version=parseFloat(R[1]||0);break}y||(f.others=!0)}},s=C[x];s&&C[x]()}e.exports=f},function(e,t,n){"use strict";var f=n(3);function S(v){return!v||!v.className?"":f(v.className.baseVal)?v.className:v.className.baseVal}e.exports=S},function(e,t,n){"use strict";(function(f){var S=n(10),v=n(42),x=n(44),l=n(47),u=n(28),_=n(17),N=n(14),k=n(15),j=n(0);function R(C,s){N(s,"mousedown",this._onMouseDown,this),this.options=j({distance:10},C),this.container=s,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}R.prototype.destroy=function(){_(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},R.prototype._toggleDragEvent=function(C){var s=this.container;C?(v(s),N(window,"dragstart",k),N(f.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(x(s),_(window,"dragstart",k),_(f.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},R.prototype._getEventData=function(C){return{target:u(C),originEvent:C}},R.prototype._onMouseDown=function(C){l(C)===0&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(C),this._toggleDragEvent(!0))},R.prototype._onMouseMove=function(C){var s=this.options.distance;if(k(C),this._isMoved=!0,this._distance<s){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData))){this._toggleDragEvent(!1);return}this.fire("drag",this._getEventData(C))},R.prototype._onMouseUp=function(C){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(C));return}this.fire("click",this._getEventData(C))},S.mixin(R),e.exports=R}).call(this,n(25))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}e.exports=n},function(e,t,n){"use strict";var f="_feEventKey";function S(v,x){var l=v[f],u;return l||(l=v[f]={}),u=l[x],u||(u=l[x]=[]),u}e.exports=S},function(e,t,n){"use strict";function f(S){var v=document.documentElement.style,x,l;for(x=0,l=S.length;x<l;x+=1)if(S[x]in v)return S[x];return!1}e.exports=f},function(e,t,n){"use strict";function f(S){return S.target||S.srcElement}e.exports=f},function(e,t,n){"use strict";var f=n(10),S=n(28),v=n(17),x=n(14),l=n(30),u=n(0),_=n(18),N=n(9),k=n(12),j=n(8),R=n(51);function C(s,y){this.options=u({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},s),y=N.appendHTMLElement("div",y,this.options.cssPrefix+"palette-container"),j.call(this,s,y)}_(C,j),C.prototype._onClick=function(s){var y=this.options,m=S(s),i={};if(l(m,y.cssPrefix+"palette-button")){i.color=m.value,this.fire("_selectColor",i);return}l(m,y.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},C.prototype._onChange=function(s){var y=this.options,m=S(s),i={};l(m,y.cssPrefix+"palette-hex")&&(i.color=m.value,this.fire("_selectColor",i))},C.prototype._beforeDestroy=function(){this._toggleEvent(!1)},C.prototype._toggleEvent=function(s){var y=this.options,m=this.container,i=s?x:v,c;i(m,"click",this._onClick,this),c=m.querySelector("."+y.cssPrefix+"palette-hex",m),c&&i(c,"change",this._onChange,this)},C.prototype.render=function(s){var y=this.options,m="";this._toggleEvent(!1),m=R({cssPrefix:y.cssPrefix,preset:y.preset,detailTxt:y.detailTxt,color:s,isValidRGB:k.isValidRGB,getItemClass:function(i){return i?"":" "+y.cssPrefix+"color-transparent"},isSelected:function(i){return i===s?" "+y.cssPrefix+"selected":""}}),this.container.innerHTML=m,this._toggleEvent(!0)},f.mixin(C),e.exports=C},function(e,t,n){"use strict";var f=n(5),S=n(23);function v(x,l){var u;return x.classList?x.classList.contains(l):(u=S(x).split(/\s+/),f(l,u)>-1)}e.exports=v},function(e,t,n){"use strict";var f=n(10),S=n(53),v=n(54),x=n(30),l=n(0),u=n(18),_=n(9),N=n(32),k=n(12),j=n(8),R=n(24),C=n(57),s=-7,y=112,m=-3,i=115,c=359.99;function o(h,b){b=_.appendHTMLElement("div",b,h.cssPrefix+"slider-container"),b.style.display="none",j.call(this,h,b),this.options=l({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},h),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new R({distance:0},b),this.colorSliderPosLimitRange=[s,y],this.huebarPosLimitRange=[m,i],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}u(o,j),o.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},o.prototype.toggle=function(h){this.container.style.display=h?"block":"none"},o.prototype.isVisible=function(){return this.container.style.display==="block"},o.prototype.render=function(h){var b=this.container,d=this.options,D=C.layout,E,w;k.isValidRGB(h)&&(D=D.replace(/{{slider}}/,C.slider),D=D.replace(/{{huebar}}/,C.huebar),D=D.replace(/{{cssPrefix}}/g,d.cssPrefix),D=D.replace(/{{id}}/g,d.id),this.container.innerHTML=D,this.sliderSvgElement=b.querySelector("."+d.cssPrefix+"svg-slider"),this.huebarSvgElement=b.querySelector("."+d.cssPrefix+"svg-huebar"),this.sliderHandleElement=b.querySelector("."+d.cssPrefix+"slider-handle"),this.huebarHandleElement=b.querySelector("."+d.cssPrefix+"huebar-handle"),this.baseColorElement=b.querySelector("."+d.cssPrefix+"slider-basecolor"),E=k.hexToRGB(h),w=k.rgbToHSV.apply(null,E),this.moveHue(w[0],!0),this.moveSaturationAndValue(w[1],w[2],!0))},o.prototype._setColorSliderPosMax=function(){var h=this.sliderSvgElement.getClientRects()[0];h&&(this.colorSliderPosLimitRange[1]=h.height-10)},o.prototype._moveColorSliderHandle=function(h,b,d){var D=this.sliderHandleElement,E;b=Math.max(this.colorSliderPosLimitRange[0],b),b=Math.min(this.colorSliderPosLimitRange[1],b),h=Math.max(this.colorSliderPosLimitRange[0],h),h=Math.min(this.colorSliderPosLimitRange[1],h),N.setTranslateXY(D,h,b),E=b>50?"white":"black",N.setStrokeColor(D,E),d||this.fire("_selectColor",{color:k.rgbToHEX.apply(null,this.getRGB())})},o.prototype.moveSaturationAndValue=function(h,b,d){var D,E,w,O;h=h||0,b=b||0,D=Math.abs(this.colorSliderPosLimitRange[0]),E=this.colorSliderPosLimitRange[1],w=h*E/100-D,O=E-b*E/100-D,this._moveColorSliderHandle(w,O,d)},o.prototype._moveColorSliderByPosition=function(h,b){var d=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(h+d,b+d)},o.prototype.getSaturationAndValue=function(){var h=Math.abs(this.colorSliderPosLimitRange[0]),b=h+this.colorSliderPosLimitRange[1],d=N.getTranslateXY(this.sliderHandleElement),D,E;return D=(d[1]+h)/b*100,E=100-(d[0]+h)/b*100,[D,E]},o.prototype._setHueBarPosMax=function(){var h=this.huebarSvgElement.getClientRects()[0];h&&(this.huebarPosLimitRange[1]=h.height-7)},o.prototype._moveHueHandle=function(h,b){var d=this.huebarHandleElement,D=this.baseColorElement,E,w;h=Math.max(this.huebarPosLimitRange[0],h),h=Math.min(this.huebarPosLimitRange[1],h),N.setTranslateY(d,h),E=k.hsvToRGB(this.getHue(),100,100),w=k.rgbToHEX.apply(null,E),N.setGradientColorStop(D,w),b||this.fire("_selectColor",{color:k.rgbToHEX.apply(null,this.getRGB())})},o.prototype.moveHue=function(h,b){var d=0,D,E;D=Math.abs(this.huebarPosLimitRange[0]),E=D+this.huebarPosLimitRange[1],h=h||0,d=E*h/c-D,this._moveHueHandle(d,b)},o.prototype._moveHueByPosition=function(h){var b=this.huebarPosLimitRange[0];this._moveHueHandle(h+b)},o.prototype.getHue=function(){var h=this.huebarHandleElement,b=N.getTranslateXY(h),d,D;return d=Math.abs(this.huebarPosLimitRange[0]),D=d+this.huebarPosLimitRange[1],(b[0]+d)*c/D},o.prototype.getHSV=function(){var h=this.getSaturationAndValue(),b=this.getHue();return[b].concat(h)},o.prototype.getRGB=function(){return k.hsvToRGB.apply(null,this.getHSV())},o.prototype._prepareColorSliderForMouseEvent=function(h){var b=this.options,d=v(h.target,"."+b.cssPrefix+"slider-part"),D;return D=this._dragDataCache={isColorSlider:x(d,b.cssPrefix+"slider-left"),parentElement:d},D},o.prototype._onClick=function(h){var b=this._prepareColorSliderForMouseEvent(h),d=S(h.originEvent,b.parentElement);b.isColorSlider?this._moveColorSliderByPosition(d[0],d[1]):this._moveHueByPosition(d[1]),this._dragDataCache=null},o.prototype._onDragStart=function(h){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(h)},o.prototype._onDrag=function(h){var b=this._dragDataCache,d=S(h.originEvent,b.parentElement);b.isColorSlider?this._moveColorSliderByPosition(d[0],d[1]):this._moveHueByPosition(d[1])},o.prototype._onDragEnd=function(){this._dragDataCache=null},f.mixin(o),e.exports=o},function(e,t,n){"use strict";var f=n(4).isOldBrowser,S=/[\.\-0-9]+/g,v=-6,x={getTranslateXY:function(l){var u;return f?(u=l.style,[parseFloat(u.top),parseFloat(u.left)]):(u=l.getAttribute("transform"),u?(u=u.match(S),[parseFloat(u[1]),parseFloat(u[0])]):[0,0])},setTranslateXY:function(l,u,_){f?(l.style.left=u+"px",l.style.top=_+"px"):l.setAttribute("transform","translate("+u+","+_+")")},setTranslateY:function(l,u){f?l.style.top=u+"px":l.setAttribute("transform","translate("+v+","+u+")")},setStrokeColor:function(l,u){f?l.strokecolor=u:l.setAttribute("stroke",u)},setGradientColorStop:function(l,u){f?l.color=u:l.setAttribute("stop-color",u)}};e.exports=x},function(e,t,n){n(34),e.exports=n(35)},function(e,t,n){},function(e,t,n){"use strict";var f=n(19),S=n(8),v=n(24),x=n(48),l=n(29),u=n(31),_=n(12),N=n(32),k={Collection:f,View:S,Drag:v,create:x,Palette:l,Slider:u,colorutil:_,svgvml:N};e.exports=k},function(e,t,n){"use strict";function f(S){return S===null}e.exports=f},function(e,t,n){"use strict";var f=n(3),S=n(38),v=7*24*60*60*1e3;function x(u){var _=new Date().getTime();return _-u>v}function l(u,_){var N="https://www.google-analytics.com/collect",k=location.hostname,j="event",R="use",C="TOAST UI "+u+" for "+k+": Statistics",s=window.localStorage.getItem(C);!f(window.tui)&&window.tui.usageStatistics===!1||s&&!x(s)||(window.localStorage.setItem(C,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&S(N,{v:1,t:j,tid:_,cid:k,dp:k,dh:u,el:u,ec:R})},1e3))}e.exports=l},function(e,t,n){"use strict";var f=n(7);function S(v,x){var l=document.createElement("img"),u="";return f(x,function(_,N){u+="&"+N+"="+_}),u=u.substring(1),l.src=v+"?"+u,l.style.display="none",document.body.appendChild(l),document.body.removeChild(l),l}e.exports=S},function(e,t,n){"use strict";var f=n(2),S=n(5),v=n(23),x=n(40);function l(u){var _=Array.prototype.slice.call(arguments,1),N=u.classList,k=[],j;if(N){f(_,function(R){u.classList.add(R)});return}j=v(u),j&&(_=[].concat(j.split(/\s+/),_)),f(_,function(R){S(R,k)<0&&k.push(R)}),x(u,k)}e.exports=l},function(e,t,n){"use strict";var f=n(1),S=n(3);function v(x,l){if(l=f(l)?l.join(" "):l,l=l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),S(x.className.baseVal)){x.className=l;return}x.className.baseVal=l}e.exports=v},function(e,t,n){"use strict";function f(S){return typeof S=="number"||S instanceof Number}e.exports=f},function(e,t,n){"use strict";var f=n(14),S=n(15),v=n(43),x=n(27),l="onselectstart"in document,u="prevUserSelect",_=x(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function N(k){k||(k=document),l?f(k,"selectstart",S):(k=k===document?document.documentElement:k,v(k,u,k.style[_]),k.style[_]="none")}e.exports=N},function(e,t,n){"use strict";var f=n(16);function S(v,x,l){if(v.dataset){v.dataset[x]=l;return}v.setAttribute("data-"+f(x),l)}e.exports=S},function(e,t,n){"use strict";var f=n(17),S=n(15),v=n(45),x=n(46),l=n(27),u="onselectstart"in document,_="prevUserSelect",N=l(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function k(j){j||(j=document),u?f(j,"selectstart",S):(j=j===document?document.documentElement:j,j.style[N]=v(j,_)||"auto",x(j,_))}e.exports=k},function(e,t,n){"use strict";var f=n(16);function S(v,x){return v.dataset?v.dataset[x]:v.getAttribute("data-"+f(x))}e.exports=S},function(e,t,n){"use strict";var f=n(16);function S(v,x){if(v.dataset){delete v.dataset[x];return}v.removeAttribute("data-"+f(x))}e.exports=S},function(e,t,n){"use strict";var f=n(22),S=n(5),v=["0","1","3","5","7"],x=["2","6"],l=["4"];function u(N){return f.msie&&f.version<=8?_(N):N.button}function _(N){var k=String(N.button);return S(k,v)>-1?0:S(k,x)>-1?2:S(k,l)>-1?1:null}e.exports=u},function(e,t,n){"use strict";var f=n(10),S=n(0),v=n(4),x=n(12),l=n(49),u=n(29),_=n(31),N=0;function k(){return N+=1,N}function j(R){var C;if(!(this instanceof j))return new j(R);if(R=this.options=S({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:k(),usageStatistics:!0},R),!R.container)throw new Error("ColorPicker(): need container option.");C=this.layout=new l(R,R.container),this.palette=new u(R,C.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new _(R,C.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),C.addChild(this.palette),C.addChild(this.slider),this.render(R.color),R.usageStatistics&&v.sendHostName()}j.prototype._onSelectColorInPalette=function(R){var C=R.color,s=this.options;if(!x.isValidRGB(C)&&C!==""){this.render();return}this.fire("selectColor",{color:C,origin:"palette"}),s.color!==C&&(s.color=C,this.render(C))},j.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},j.prototype._onSelectColorInSlider=function(R){var C=R.color,s=this.options;this.fire("selectColor",{color:C,origin:"slider"}),s.color!==C&&(s.color=C,this.palette.render(C))},j.prototype.setColor=function(R){if(!x.isValidRGB(R))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=R,this.render(R)},j.prototype.getColor=function(){return this.options.color},j.prototype.toggle=function(R){this.layout.container.style.display=R?"block":"none"},j.prototype.render=function(R){this.layout.render(R||this.options.color)},j.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},f.mixin(j),e.exports=j},function(e,t,n){"use strict";var f=n(0),S=n(18),v=n(9),x=n(8);function l(u,_){this.options=f({cssPrefix:"tui-colorpicker-"},u),_=v.appendHTMLElement("div",_,this.options.cssPrefix+"container"),x.call(this,u,_),this.render()}S(l,x),l.prototype.render=function(u){this.recursive(function(_){_.render(u)},!0)},e.exports=l},function(e,t,n){"use strict";function f(S){function v(){}return v.prototype=S,new v}e.exports=f},function(e,t,n){"use strict";var f=n(52);e.exports=function(S){var v=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),x=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",v,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join(`
`);return f(x,S)}},function(e,t,n){"use strict";var f=n(5),S=n(2),v=n(1),x=n(11),l=n(0),u=/{{\s?|\s?}}/g,_=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,N=/\[\s?|\s?\]/,k=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,j=/\./,R=/^["']\w+["']$/,C=/"|'/g,s=/^-?\d+\.?\d*$/,y=2,m={if:b,each:d,with:D},i="a".split(/a/).length===3,c=function(){return i?function(H,Y){return H.split(Y)}:function(H,Y){var se=[],ne=0,be,K;for(Y.global||(Y=new RegExp(Y,"g")),be=Y.exec(H);be!==null;)K=be.index,se.push(H.slice(ne,K)),ne=K+be[0].length,be=Y.exec(H);return se.push(H.slice(ne)),se}}();function o(H,Y){var se,ne=Y[H];return H==="true"?ne=!0:H==="false"?ne=!1:R.test(H)?ne=H.replace(C,""):_.test(H)?(se=H.split(N),ne=o(se[0],Y)[o(se[1],Y)]):k.test(H)?(se=H.split(j),ne=o(se[0],Y)[se[1]]):s.test(H)&&(ne=parseFloat(H)),ne}function h(H,Y){var se=[H],ne=[],be=0,K=0;return S(Y,function(Ce,W){Ce.indexOf("if")===0?be+=1:Ce==="/if"?be-=1:!be&&(Ce.indexOf("elseif")===0||Ce==="else")&&(se.push(Ce==="else"?["true"]:Ce.split(" ").slice(1)),ne.push(Y.slice(K,W)),K=W+1)}),ne.push(Y.slice(K)),{exps:se,sourcesInsideIf:ne}}function b(H,Y,se){var ne=h(H,Y),be=!1,K="";return S(ne.exps,function(Ce,W){return be=O(Ce,se),be&&(K=B(ne.sourcesInsideIf[W],se)),!be}),K}function d(H,Y,se){var ne=O(H,se),be=v(ne)?"@index":"@key",K={},Ce="";return S(ne,function(W,Be){K[be]=Be,K["@this"]=W,l(se,K),Ce+=B(Y.slice(),se)}),Ce}function D(H,Y,se){var ne=f("as",H),be=H[ne+1],K=O(H.slice(0,ne),se),Ce={};return Ce[be]=K,B(Y,l(se,Ce))||""}function E(H,Y,se){var ne=H.splice(Y+1,se-Y);return ne.pop(),ne}function w(H,Y,se){for(var ne=m[H],be=1,K=0,Ce,W=K+y,Be=Y[W];be&&x(Be);)Be.indexOf(H)===0?be+=1:Be.indexOf("/"+H)===0&&(be-=1,Ce=W),W+=y,Be=Y[W];if(be)throw Error(H+" needs {{/"+H+"}} expression.");return Y[K]=ne(Y[K].split(" ").slice(1),E(Y,K,Ce),se),Y}function O(H,Y){var se=o(H[0],Y);return se instanceof Function?F(se,H.slice(1),Y):se}function F(H,Y,se){var ne=[];return S(Y,function(be){ne.push(o(be,se))}),H.apply(null,ne)}function B(H,Y){for(var se=1,ne=H[se],be,K,Ce;x(ne);)be=ne.split(" "),K=be[0],m[K]?(Ce=w(K,H.splice(se,H.length-se),Y),H=H.concat(Ce)):H[se]=O(be,Y),se+=y,ne=H[se];return H.join("")}function V(H,Y){return B(c(H,u),Y)}e.exports=V},function(e,t,n){"use strict";var f=n(1);function S(v,x){var l=f(v),u=l?v[0]:v.clientX,_=l?v[1]:v.clientY,N;return x?(N=x.getBoundingClientRect(),[u-N.left-x.clientLeft,_-N.top-x.clientTop]):[u,_]}e.exports=S},function(e,t,n){"use strict";var f=n(55);function S(v,x){var l=v.parentNode;if(f(v,x))return v;for(;l&&l!==document;){if(f(l,x))return l;l=l.parentNode}return null}e.exports=S},function(e,t,n){"use strict";var f=n(5),S=n(56),v=Element.prototype,x=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.msMatchesSelector||function(u){var _=this.document||this.ownerDocument;return f(this,S(_.querySelectorAll(u)))>-1};function l(u,_){return x.call(u,_)}e.exports=l},function(e,t,n){"use strict";var f=n(6);function S(v){var x;try{x=Array.prototype.slice.call(v)}catch{x=[],f(v,function(u){x.push(u)})}return x}e.exports=S},function(e,t,n){"use strict";(function(f){var S=n(4).isOldBrowser,v=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join(`
`),x=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join(`
`),l=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join(`
`),u=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join(`
`),_=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join(`
`);S&&f.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),e.exports={layout:v,slider:S?l:x,huebar:S?_:u}}).call(this,n(25))}])})});var up=af((qs,Rc)=>{"use strict";(function(t,n){typeof qs=="object"&&typeof Rc=="object"?Rc.exports=n(Lc()):typeof define=="function"&&define.amd?define(["tui-color-picker"],n):typeof qs=="object"?qs.tui=n(Lc()):(t.tui=t.tui||{},t.tui.ImageEditor=n(t.tui.colorPicker))})(self,function(e){return function(){var t={2777:function(v,x,l){var u=u||{version:"4.6.0"};if(x.fabric=u,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?u.document=document:u.document=document.implementation.createHTMLDocument(""),u.window=window;else{var _=l(4960),N=new _.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;u.document=N.document,u.jsdomImplForWrapper=l(6759).implForWrapper,u.nodeCanvas=l(6272).Canvas,u.window=N,DOMParser=u.window.DOMParser}u.isTouchSupported="ontouchstart"in u.window||"ontouchstart"in u.document||u.window&&u.window.navigator&&u.window.navigator.maxTouchPoints>0,u.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",u.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],u.DPI=96,u.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",u.commaWsp="(?:\\s+,?\\s*|,\\s*)",u.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,u.reNonWord=/[ \n\.,;!\?\-]/,u.fontPaths={},u.iMatrix=[1,0,0,1,0,0],u.svgNS="http://www.w3.org/2000/svg",u.perfLimitSizeTotal=2097152,u.maxCacheSideLimit=4096,u.minCacheSideLimit=256,u.charWidthsCache={},u.textureSize=2048,u.disableStyleCopyPaste=!1,u.enableGLFiltering=!0,u.devicePixelRatio=u.window.devicePixelRatio||u.window.webkitDevicePixelRatio||u.window.mozDevicePixelRatio||1,u.browserShadowBlurConstant=1,u.arcToSegmentsCache={},u.boundsOfCurveCache={},u.cachesBoundsOfCurve=!0,u.forceGLPutImageData=!1,u.initFilterBackend=function(){if(u.enableGLFiltering&&u.isWebglSupported&&u.isWebglSupported(u.textureSize))return console.log("max texture size: "+u.maxTextureSize),new u.WebglFilterBackend({tileSize:u.textureSize});if(u.Canvas2dFilterBackend)return new u.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=u),function(){function C(o,h){if(this.__eventListeners[o]){var b=this.__eventListeners[o];h?b[b.indexOf(h)]=!1:u.util.array.fill(b,!1)}}function s(o,h){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var b in o)this.on(b,o[b]);else this.__eventListeners[o]||(this.__eventListeners[o]=[]),this.__eventListeners[o].push(h);return this}function y(o,h){var b=(function(){h.apply(this,arguments),this.off(o,b)}).bind(this);this.on(o,b)}function m(o,h){if(arguments.length===1)for(var b in o)y.call(this,b,o[b]);else y.call(this,o,h);return this}function i(o,h){if(!this.__eventListeners)return this;if(arguments.length===0)for(o in this.__eventListeners)C.call(this,o);else if(arguments.length===1&&typeof arguments[0]=="object")for(var b in o)C.call(this,b,o[b]);else C.call(this,o,h);return this}function c(o,h){if(!this.__eventListeners)return this;var b=this.__eventListeners[o];if(!b)return this;for(var d=0,D=b.length;d<D;d++)b[d]&&b[d].call(this,h||{});return this.__eventListeners[o]=b.filter(function(E){return E!==!1}),this}u.Observable={fire:c,on:s,once:m,off:i}}(),u.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var C=0,s=arguments.length;C<s;C++)this._onObjectAdded(arguments[C]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(C,s,y){var m=this._objects;return y?m[s]=C:m.splice(s,0,C),this._onObjectAdded&&this._onObjectAdded(C),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var C=this._objects,s,y=!1,m=0,i=arguments.length;m<i;m++)s=C.indexOf(arguments[m]),s!==-1&&(y=!0,C.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[m]));return this.renderOnAddRemove&&y&&this.requestRenderAll(),this},forEachObject:function(C,s){for(var y=this.getObjects(),m=0,i=y.length;m<i;m++)C.call(s,y[m],m,y);return this},getObjects:function(C){return typeof C>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===C})},item:function(C){return this._objects[C]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(C,s){return this._objects.indexOf(C)>-1?!0:s?this._objects.some(function(y){return typeof y.contains=="function"&&y.contains(C,!0)}):!1},complexity:function(){return this._objects.reduce(function(C,s){return C+=s.complexity?s.complexity():0,C},0)}},u.CommonMethods={_setOptions:function(C){for(var s in C)this.set(s,C[s])},_initGradient:function(C,s){C&&C.colorStops&&!(C instanceof u.Gradient)&&this.set(s,new u.Gradient(C))},_initPattern:function(C,s,y){C&&C.source&&!(C instanceof u.Pattern)?this.set(s,new u.Pattern(C,y)):y&&y()},_setObject:function(C){for(var s in C)this._set(s,C[s])},set:function(C,s){return typeof C=="object"?this._setObject(C):this._set(C,s),this},_set:function(C,s){this[C]=s},toggle:function(C){var s=this.get(C);return typeof s=="boolean"&&this.set(C,!s),this},get:function(C){return this[C]}},function(C){var s=Math.sqrt,y=Math.atan2,m=Math.pow,i=Math.PI/180,c=Math.PI/2;u.util={cos:function(o){if(o===0)return 1;o<0&&(o=-o);var h=o/c;switch(h){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},sin:function(o){if(o===0)return 0;var h=o/c,b=1;switch(o<0&&(b=-1),h){case 1:return b;case 2:return 0;case 3:return-b}return Math.sin(o)},removeFromArray:function(o,h){var b=o.indexOf(h);return b!==-1&&o.splice(b,1),o},getRandomInt:function(o,h){return Math.floor(Math.random()*(h-o+1))+o},degreesToRadians:function(o){return o*i},radiansToDegrees:function(o){return o/i},rotatePoint:function(o,h,b){var d=new u.Point(o.x-h.x,o.y-h.y),D=u.util.rotateVector(d,b);return new u.Point(D.x,D.y).addEquals(h)},rotateVector:function(o,h){var b=u.util.sin(h),d=u.util.cos(h),D=o.x*d-o.y*b,E=o.x*b+o.y*d;return{x:D,y:E}},transformPoint:function(o,h,b){return b?new u.Point(h[0]*o.x+h[2]*o.y,h[1]*o.x+h[3]*o.y):new u.Point(h[0]*o.x+h[2]*o.y+h[4],h[1]*o.x+h[3]*o.y+h[5])},makeBoundingBoxFromPoints:function(o,h){if(h)for(var b=0;b<o.length;b++)o[b]=u.util.transformPoint(o[b],h);var d=[o[0].x,o[1].x,o[2].x,o[3].x],D=u.util.array.min(d),E=u.util.array.max(d),w=E-D,O=[o[0].y,o[1].y,o[2].y,o[3].y],F=u.util.array.min(O),B=u.util.array.max(O),V=B-F;return{left:D,top:F,width:w,height:V}},invertTransform:function(o){var h=1/(o[0]*o[3]-o[1]*o[2]),b=[h*o[3],-h*o[1],-h*o[2],h*o[0]],d=u.util.transformPoint({x:o[4],y:o[5]},b,!0);return b[4]=-d.x,b[5]=-d.y,b},toFixed:function(o,h){return parseFloat(Number(o).toFixed(h))},parseUnit:function(o,h){var b=/\D{0,2}$/.exec(o),d=parseFloat(o);switch(h||(h=u.Text.DEFAULT_SVG_FONT_SIZE),b[0]){case"mm":return d*u.DPI/25.4;case"cm":return d*u.DPI/2.54;case"in":return d*u.DPI;case"pt":return d*u.DPI/72;case"pc":return d*u.DPI/72*12;case"em":return d*h;default:return d}},falseFunction:function(){return!1},getKlass:function(o,h){return o=u.util.string.camelize(o.charAt(0).toUpperCase()+o.slice(1)),u.util.resolveNamespace(h)[o]},getSvgAttributes:function(o){var h=["instantiated_by_use","style","id","class"];switch(o){case"linearGradient":h=h.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":h=h.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":h=h.concat(["offset","stop-color","stop-opacity"]);break}return h},resolveNamespace:function(o){if(!o)return u;var h=o.split("."),b=h.length,d,D=C||u.window;for(d=0;d<b;++d)D=D[h[d]];return D},loadImage:function(o,h,b,d){if(!o){h&&h.call(b,o);return}var D=u.util.createImage(),E=function(){h&&h.call(b,D,!1),D=D.onload=D.onerror=null};D.onload=E,D.onerror=function(){u.log("Error loading "+D.src),h&&h.call(b,null,!0),D=D.onload=D.onerror=null},o.indexOf("data")!==0&&d!==void 0&&d!==null&&(D.crossOrigin=d),o.substring(0,14)==="data:image/svg"&&(D.onload=null,u.util.loadImageInDom(D,E)),D.src=o},loadImageInDom:function(o,h){var b=u.document.createElement("div");b.style.width=b.style.height="1px",b.style.left=b.style.top="-100%",b.style.position="absolute",b.appendChild(o),u.document.querySelector("body").appendChild(b),o.onload=function(){h(),b.parentNode.removeChild(b),b=null}},enlivenObjects:function(o,h,b,d){o=o||[];var D=[],E=0,w=o.length;function O(){++E===w&&h&&h(D.filter(function(F){return F}))}if(!w){h&&h(D);return}o.forEach(function(F,B){if(!F||!F.type){O();return}var V=u.util.getKlass(F.type,b);V.fromObject(F,function(H,Y){Y||(D[B]=H),d&&d(F,H,Y),O()})})},enlivenPatterns:function(o,h){o=o||[];function b(){++D===E&&h&&h(d)}var d=[],D=0,E=o.length;if(!E){h&&h(d);return}o.forEach(function(w,O){w&&w.source?new u.Pattern(w,function(F){d[O]=F,b()}):(d[O]=w,b())})},groupSVGElements:function(o,h,b){var d;return o&&o.length===1?o[0]:(h&&(h.width&&h.height?h.centerPoint={x:h.width/2,y:h.height/2}:(delete h.width,delete h.height)),d=new u.Group(o,h),typeof b<"u"&&(d.sourcePath=b),d)},populateWithProperties:function(o,h,b){if(b&&Object.prototype.toString.call(b)==="[object Array]")for(var d=0,D=b.length;d<D;d++)b[d]in o&&(h[b[d]]=o[b[d]])},drawDashedLine:function(o,h,b,d,D,E){var w=d-h,O=D-b,F=s(w*w+O*O),B=y(O,w),V=E.length,H=0,Y=!0;for(o.save(),o.translate(h,b),o.moveTo(0,0),o.rotate(B),h=0;F>h;)h+=E[H++%V],h>F&&(h=F),o[Y?"lineTo":"moveTo"](h,0),Y=!Y;o.restore()},createCanvasElement:function(){return u.document.createElement("canvas")},copyCanvasElement:function(o){var h=u.util.createCanvasElement();return h.width=o.width,h.height=o.height,h.getContext("2d").drawImage(o,0,0),h},toDataURL:function(o,h,b){return o.toDataURL("image/"+h,b)},createImage:function(){return u.document.createElement("img")},multiplyTransformMatrices:function(o,h,b){return[o[0]*h[0]+o[2]*h[1],o[1]*h[0]+o[3]*h[1],o[0]*h[2]+o[2]*h[3],o[1]*h[2]+o[3]*h[3],b?0:o[0]*h[4]+o[2]*h[5]+o[4],b?0:o[1]*h[4]+o[3]*h[5]+o[5]]},qrDecompose:function(o){var h=y(o[1],o[0]),b=m(o[0],2)+m(o[1],2),d=s(b),D=(o[0]*o[3]-o[2]*o[1])/d,E=y(o[0]*o[2]+o[1]*o[3],b);return{angle:h/i,scaleX:d,scaleY:D,skewX:E/i,skewY:0,translateX:o[4],translateY:o[5]}},calcRotateMatrix:function(o){if(!o.angle)return u.iMatrix.concat();var h=u.util.degreesToRadians(o.angle),b=u.util.cos(h),d=u.util.sin(h);return[b,d,-d,b,0,0]},calcDimensionsMatrix:function(o){var h=typeof o.scaleX>"u"?1:o.scaleX,b=typeof o.scaleY>"u"?1:o.scaleY,d=[o.flipX?-h:h,0,0,o.flipY?-b:b,0,0],D=u.util.multiplyTransformMatrices,E=u.util.degreesToRadians;return o.skewX&&(d=D(d,[1,0,Math.tan(E(o.skewX)),1],!0)),o.skewY&&(d=D(d,[1,Math.tan(E(o.skewY)),0,1],!0)),d},composeMatrix:function(o){var h=[1,0,0,1,o.translateX||0,o.translateY||0],b=u.util.multiplyTransformMatrices;return o.angle&&(h=b(h,u.util.calcRotateMatrix(o))),(o.scaleX!==1||o.scaleY!==1||o.skewX||o.skewY||o.flipX||o.flipY)&&(h=b(h,u.util.calcDimensionsMatrix(o))),h},resetObjectTransform:function(o){o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},saveObjectTransform:function(o){return{scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}},isTransparent:function(o,h,b,d){d>0&&(h>d?h-=d:h=0,b>d?b-=d:b=0);var D=!0,E,w,O=o.getImageData(h,b,d*2||1,d*2||1),F=O.data.length;for(E=3;E<F&&(w=O.data[E],D=w<=0,D!==!1);E+=4);return O=null,D},parsePreserveAspectRatioAttribute:function(o){var h="meet",b="Mid",d="Mid",D=o.split(" "),E;return D&&D.length&&(h=D.pop(),h!=="meet"&&h!=="slice"?(E=h,h="meet"):D.length&&(E=D.pop())),b=E!=="none"?E.slice(1,4):"none",d=E!=="none"?E.slice(5,8):"none",{meetOrSlice:h,alignX:b,alignY:d}},clearFabricFontCache:function(o){o=(o||"").toLowerCase(),o?u.charWidthsCache[o]&&delete u.charWidthsCache[o]:u.charWidthsCache={}},limitDimsByArea:function(o,h){var b=Math.sqrt(h*o),d=Math.floor(h/b);return{x:Math.floor(b),y:d}},capValue:function(o,h,b){return Math.max(o,Math.min(h,b))},findScaleToFit:function(o,h){return Math.min(h.width/o.width,h.height/o.height)},findScaleToCover:function(o,h){return Math.max(h.width/o.width,h.height/o.height)},matrixToSVG:function(o){return"matrix("+o.map(function(h){return u.util.toFixed(h,u.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(o,h){var b=u.util.invertTransform(h),d=u.util.multiplyTransformMatrices(b,o.calcOwnMatrix());u.util.applyTransformToObject(o,d)},addTransformToObject:function(o,h){u.util.applyTransformToObject(o,u.util.multiplyTransformMatrices(h,o.calcOwnMatrix()))},applyTransformToObject:function(o,h){var b=u.util.qrDecompose(h),d=new u.Point(b.translateX,b.translateY);o.flipX=!1,o.flipY=!1,o.set("scaleX",b.scaleX),o.set("scaleY",b.scaleY),o.skewX=b.skewX,o.skewY=b.skewY,o.angle=b.angle,o.setPositionByOrigin(d,"center","center")},sizeAfterTransform:function(o,h,b){var d=o/2,D=h/2,E=[{x:-d,y:-D},{x:d,y:-D},{x:-d,y:D},{x:d,y:D}],w=u.util.calcDimensionsMatrix(b),O=u.util.makeBoundingBoxFromPoints(E,w);return{x:O.width,y:O.height}}}}(x),function(){var C=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},y={m:"l",M:"L"};function m(q,Z,fe,G,X,J,Q,ve,he,Se,xe){var De=u.util.cos(q),ae=u.util.sin(q),ee=u.util.cos(Z),ie=u.util.sin(Z),ce=fe*X*ee-G*J*ie+Q,de=G*X*ee+fe*J*ie+ve,me=Se+he*(-fe*X*ae-G*J*De),Ne=xe+he*(-G*X*ae+fe*J*De),Ve=ce+he*(fe*X*ie+G*J*ee),He=de+he*(G*X*ie-fe*J*ee);return["C",me,Ne,Ve,He,ce,de]}function i(q,Z,fe,G,X,J,Q){var ve=Math.PI,he=Q*ve/180,Se=u.util.sin(he),xe=u.util.cos(he),De=0,ae=0;fe=Math.abs(fe),G=Math.abs(G);var ee=-xe*q*.5-Se*Z*.5,ie=-xe*Z*.5+Se*q*.5,ce=fe*fe,de=G*G,me=ie*ie,Ne=ee*ee,Ve=ce*de-ce*me-de*Ne,He=0;if(Ve<0){var ye=Math.sqrt(1-Ve/(ce*de));fe*=ye,G*=ye}else He=(X===J?-1:1)*Math.sqrt(Ve/(ce*me+de*Ne));var We=He*fe*ie/G,Xe=-He*G*ee/fe,qe=xe*We-Se*Xe+q*.5,Et=Se*We+xe*Xe+Z*.5,ut=c(1,0,(ee-We)/fe,(ie-Xe)/G),pt=c((ee-We)/fe,(ie-Xe)/G,(-ee-We)/fe,(-ie-Xe)/G);J===0&&pt>0?pt-=2*ve:J===1&&pt<0&&(pt+=2*ve);for(var rt=Math.ceil(Math.abs(pt/ve*2)),vt=[],Nt=pt/rt,Ut=8/3*Math.sin(Nt/4)*Math.sin(Nt/4)/Math.sin(Nt/2),we=ut+Nt,Ae=0;Ae<rt;Ae++)vt[Ae]=m(ut,we,xe,Se,fe,G,qe,Et,Ut,De,ae),De=vt[Ae][5],ae=vt[Ae][6],ut=we,we+=Nt;return vt}function c(q,Z,fe,G){var X=Math.atan2(Z,q),J=Math.atan2(G,fe);return J>=X?J-X:2*Math.PI-(X-J)}function o(q,Z,fe,G,X,J,Q,ve){var he;if(u.cachesBoundsOfCurve&&(he=C.call(arguments),u.boundsOfCurveCache[he]))return u.boundsOfCurveCache[he];var Se=Math.sqrt,xe=Math.min,De=Math.max,ae=Math.abs,ee=[],ie=[[],[]],ce,de,me,Ne,Ve,He,ye,We;de=6*q-12*fe+6*X,ce=-3*q+9*fe-9*X+3*Q,me=3*fe-3*q;for(var Xe=0;Xe<2;++Xe){if(Xe>0&&(de=6*Z-12*G+6*J,ce=-3*Z+9*G-9*J+3*ve,me=3*G-3*Z),ae(ce)<1e-12){if(ae(de)<1e-12)continue;Ne=-me/de,0<Ne&&Ne<1&&ee.push(Ne);continue}ye=de*de-4*me*ce,!(ye<0)&&(We=Se(ye),Ve=(-de+We)/(2*ce),0<Ve&&Ve<1&&ee.push(Ve),He=(-de-We)/(2*ce),0<He&&He<1&&ee.push(He))}for(var qe,Et,ut=ee.length,pt=ut,rt;ut--;)Ne=ee[ut],rt=1-Ne,qe=rt*rt*rt*q+3*rt*rt*Ne*fe+3*rt*Ne*Ne*X+Ne*Ne*Ne*Q,ie[0][ut]=qe,Et=rt*rt*rt*Z+3*rt*rt*Ne*G+3*rt*Ne*Ne*J+Ne*Ne*Ne*ve,ie[1][ut]=Et;ie[0][pt]=q,ie[1][pt]=Z,ie[0][pt+1]=Q,ie[1][pt+1]=ve;var vt=[{x:xe.apply(null,ie[0]),y:xe.apply(null,ie[1])},{x:De.apply(null,ie[0]),y:De.apply(null,ie[1])}];return u.cachesBoundsOfCurve&&(u.boundsOfCurveCache[he]=vt),vt}function h(q,Z,fe){for(var G=fe[1],X=fe[2],J=fe[3],Q=fe[4],ve=fe[5],he=fe[6],Se=fe[7],xe=i(he-q,Se-Z,G,X,Q,ve,J),De=0,ae=xe.length;De<ae;De++)xe[De][1]+=q,xe[De][2]+=Z,xe[De][3]+=q,xe[De][4]+=Z,xe[De][5]+=q,xe[De][6]+=Z;return xe}function b(q){var Z=0,fe=0,G=q.length,X=0,J=0,Q,ve,he,Se=[],xe,De,ae;for(ve=0;ve<G;++ve){switch(he=!1,Q=q[ve].slice(0),Q[0]){case"l":Q[0]="L",Q[1]+=Z,Q[2]+=fe;case"L":Z=Q[1],fe=Q[2];break;case"h":Q[1]+=Z;case"H":Q[0]="L",Q[2]=fe,Z=Q[1];break;case"v":Q[1]+=fe;case"V":Q[0]="L",fe=Q[1],Q[1]=Z,Q[2]=fe;break;case"m":Q[0]="M",Q[1]+=Z,Q[2]+=fe;case"M":Z=Q[1],fe=Q[2],X=Q[1],J=Q[2];break;case"c":Q[0]="C",Q[1]+=Z,Q[2]+=fe,Q[3]+=Z,Q[4]+=fe,Q[5]+=Z,Q[6]+=fe;case"C":De=Q[3],ae=Q[4],Z=Q[5],fe=Q[6];break;case"s":Q[0]="S",Q[1]+=Z,Q[2]+=fe,Q[3]+=Z,Q[4]+=fe;case"S":xe==="C"?(De=2*Z-De,ae=2*fe-ae):(De=Z,ae=fe),Z=Q[3],fe=Q[4],Q[0]="C",Q[5]=Q[3],Q[6]=Q[4],Q[3]=Q[1],Q[4]=Q[2],Q[1]=De,Q[2]=ae,De=Q[3],ae=Q[4];break;case"q":Q[0]="Q",Q[1]+=Z,Q[2]+=fe,Q[3]+=Z,Q[4]+=fe;case"Q":De=Q[1],ae=Q[2],Z=Q[3],fe=Q[4];break;case"t":Q[0]="T",Q[1]+=Z,Q[2]+=fe;case"T":xe==="Q"?(De=2*Z-De,ae=2*fe-ae):(De=Z,ae=fe),Q[0]="Q",Z=Q[1],fe=Q[2],Q[1]=De,Q[2]=ae,Q[3]=Z,Q[4]=fe;break;case"a":Q[0]="A",Q[6]+=Z,Q[7]+=fe;case"A":he=!0,Se=Se.concat(h(Z,fe,Q)),Z=Q[6],fe=Q[7];break;case"z":case"Z":Z=X,fe=J;break;default:}he||Se.push(Q),xe=Q[0]}return Se}function d(q,Z,fe,G){return Math.sqrt((fe-q)*(fe-q)+(G-Z)*(G-Z))}function D(q){return q*q*q}function E(q){return 3*q*q*(1-q)}function w(q){return 3*q*(1-q)*(1-q)}function O(q){return(1-q)*(1-q)*(1-q)}function F(q,Z,fe,G,X,J,Q,ve){return function(he){var Se=D(he),xe=E(he),De=w(he),ae=O(he);return{x:Q*Se+X*xe+fe*De+q*ae,y:ve*Se+J*xe+G*De+Z*ae}}}function B(q,Z,fe,G,X,J,Q,ve){return function(he){var Se=1-he,xe=3*Se*Se*(fe-q)+6*Se*he*(X-fe)+3*he*he*(Q-X),De=3*Se*Se*(G-Z)+6*Se*he*(J-G)+3*he*he*(ve-J);return Math.atan2(De,xe)}}function V(q){return q*q}function H(q){return 2*q*(1-q)}function Y(q){return(1-q)*(1-q)}function se(q,Z,fe,G,X,J){return function(Q){var ve=V(Q),he=H(Q),Se=Y(Q);return{x:X*ve+fe*he+q*Se,y:J*ve+G*he+Z*Se}}}function ne(q,Z,fe,G,X,J){return function(Q){var ve=1-Q,he=2*ve*(fe-q)+2*Q*(X-fe),Se=2*ve*(G-Z)+2*Q*(J-G);return Math.atan2(Se,he)}}function be(q,Z,fe){var G={x:Z,y:fe},X,J=0,Q;for(Q=1;Q<=100;Q+=1)X=q(Q/100),J+=d(G.x,G.y,X.x,X.y),G=X;return J}function K(q,Z){for(var fe=0,G=0,X=q.iterator,J={x:q.x,y:q.y},Q,ve,he=.01,Se=q.angleFinder,xe;G<Z&&fe<=1&&he>1e-4;)Q=X(fe),xe=fe,ve=d(J.x,J.y,Q.x,Q.y),ve+G>Z?(he/=2,fe-=he):(J=Q,fe+=he,G+=ve);return Q.angle=Se(xe),Q}function Ce(q){for(var Z=0,fe=q.length,G,X=0,J=0,Q=0,ve=0,he=[],Se,xe,De,ae=0;ae<fe;ae++){switch(G=q[ae],xe={x:X,y:J,command:G[0]},G[0]){case"M":xe.length=0,Q=X=G[1],ve=J=G[2];break;case"L":xe.length=d(X,J,G[1],G[2]),X=G[1],J=G[2];break;case"C":Se=F(X,J,G[1],G[2],G[3],G[4],G[5],G[6]),De=B(X,J,G[1],G[2],G[3],G[4],G[5],G[6]),xe.iterator=Se,xe.angleFinder=De,xe.length=be(Se,X,J),X=G[5],J=G[6];break;case"Q":Se=se(X,J,G[1],G[2],G[3],G[4]),De=ne(X,J,G[1],G[2],G[3],G[4]),xe.iterator=Se,xe.angleFinder=De,xe.length=be(Se,X,J),X=G[3],J=G[4];break;case"Z":case"z":xe.destX=Q,xe.destY=ve,xe.length=d(X,J,Q,ve),X=Q,J=ve;break}Z+=xe.length,he.push(xe)}return he.push({length:Z,x:X,y:J}),he}function W(q,Z,fe){fe||(fe=Ce(q));for(var G=0;Z-fe[G].length>0&&G<fe.length-2;)Z-=fe[G].length,G++;var X=fe[G],J=Z/X.length,Q=X.command,ve=q[G],he;switch(Q){case"M":return{x:X.x,y:X.y,angle:0};case"Z":case"z":return he=new u.Point(X.x,X.y).lerp(new u.Point(X.destX,X.destY),J),he.angle=Math.atan2(X.destY-X.y,X.destX-X.x),he;case"L":return he=new u.Point(X.x,X.y).lerp(new u.Point(ve[1],ve[2]),J),he.angle=Math.atan2(ve[2]-X.y,ve[1]-X.x),he;case"C":return K(X,Z);case"Q":return K(X,Z)}}function Be(q){var Z=[],fe=[],G,X,J=u.rePathCommand,Q="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",ve="("+Q+")"+u.commaWsp,he="([01])"+u.commaWsp+"?",Se=ve+"?"+ve+"?"+ve+he+he+ve+"?("+Q+")",xe=new RegExp(Se,"g"),De,ae,ee;if(!q||!q.match)return Z;ee=q.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ie=0,ce,de=ee.length;ie<de;ie++){G=ee[ie],ae=G.slice(1).trim(),fe.length=0;var me=G.charAt(0);if(ce=[me],me.toLowerCase()==="a")for(var Ne;Ne=xe.exec(ae);)for(var Ve=1;Ve<Ne.length;Ve++)fe.push(Ne[Ve]);else for(;De=J.exec(ae);)fe.push(De[0]);for(var Ve=0,He=fe.length;Ve<He;Ve++)X=parseFloat(fe[Ve]),isNaN(X)||ce.push(X);var ye=s[me.toLowerCase()],We=y[me]||me;if(ce.length-1>ye)for(var Xe=1,qe=ce.length;Xe<qe;Xe+=ye)Z.push([me].concat(ce.slice(Xe,Xe+ye))),me=We;else Z.push(ce)}return Z}function Ie(q,Z){var fe=[],G,X=new u.Point(q[0].x,q[0].y),J=new u.Point(q[1].x,q[1].y),Q=q.length,ve=1,he=0,Se=Q>2;for(Z=Z||0,Se&&(ve=q[2].x<J.x?-1:q[2].x===J.x?0:1,he=q[2].y<J.y?-1:q[2].y===J.y?0:1),fe.push(["M",X.x-ve*Z,X.y-he*Z]),G=1;G<Q;G++){if(!X.eq(J)){var xe=X.midPointFrom(J);fe.push(["Q",X.x,X.y,xe.x,xe.y])}X=q[G],G+1<q.length&&(J=q[G+1])}return Se&&(ve=X.x>q[G-2].x?1:X.x===q[G-2].x?0:-1,he=X.y>q[G-2].y?1:X.y===q[G-2].y?0:-1),fe.push(["L",X.x+ve*Z,X.y+he*Z]),fe}function ze(q,Z,fe){return fe&&(Z=u.util.multiplyTransformMatrices(Z,[1,0,0,1,-fe.x,-fe.y])),q.map(function(G){for(var X=G.slice(0),J={},Q=1;Q<G.length-1;Q+=2)J.x=G[Q],J.y=G[Q+1],J=u.util.transformPoint(J,Z),X[Q]=J.x,X[Q+1]=J.y;return X})}function te(q,Z,fe,G,X,J,Q,ve,he){for(var Se=0,xe=0,De,ae=[],ee=i(ve-q,he-Z,fe,G,J,Q,X),ie=0,ce=ee.length;ie<ce;ie++)De=o(Se,xe,ee[ie][1],ee[ie][2],ee[ie][3],ee[ie][4],ee[ie][5],ee[ie][6]),ae.push({x:De[0].x+q,y:De[0].y+Z}),ae.push({x:De[1].x+q,y:De[1].y+Z}),Se=ee[ie][5],xe=ee[ie][6];return ae}function le(q,Z,fe,G){G=G.slice(0).unshift("X");var X=h(Z,fe,G);X.forEach(function(J){q.bezierCurveTo.apply(q,J.slice(1))})}u.util.joinPath=function(q){return q.map(function(Z){return Z.join(" ")}).join(" ")},u.util.parsePath=Be,u.util.makePathSimpler=b,u.util.getSmoothPathFromPoints=Ie,u.util.getPathSegmentsInfo=Ce,u.util.getBoundsOfCurve=o,u.util.getPointOnPath=W,u.util.transformPath=ze,u.util.fromArcToBeizers=h,u.util.getBoundsOfArc=te,u.util.drawArc=le}(),function(){var C=Array.prototype.slice;function s(o,h){for(var b=C.call(arguments,2),d=[],D=0,E=o.length;D<E;D++)d[D]=b.length?o[D][h].apply(o[D],b):o[D][h].call(o[D]);return d}function y(o,h){return c(o,h,function(b,d){return b>=d})}function m(o,h){return c(o,h,function(b,d){return b<d})}function i(o,h){for(var b=o.length;b--;)o[b]=h;return o}function c(o,h,b){if(!(!o||o.length===0)){var d=o.length-1,D=h?o[d][h]:o[d];if(h)for(;d--;)b(o[d][h],D)&&(D=o[d][h]);else for(;d--;)b(o[d],D)&&(D=o[d]);return D}}u.util.array={fill:i,invoke:s,min:m,max:y}}(),function(){function C(y,m,i){if(i)if(!u.isLikelyNode&&m instanceof Element)y=m;else if(m instanceof Array){y=[];for(var c=0,o=m.length;c<o;c++)y[c]=C({},m[c],i)}else if(m&&typeof m=="object")for(var h in m)h==="canvas"||h==="group"?y[h]=null:m.hasOwnProperty(h)&&(y[h]=C({},m[h],i));else y=m;else for(var h in m)y[h]=m[h];return y}function s(y,m){return C({},y,m)}u.util.object={extend:C,clone:s},u.util.object.extend(u.util,u.Observable)}(),function(){function C(c){return c.replace(/-+(.)?/g,function(o,h){return h?h.toUpperCase():""})}function s(c,o){return c.charAt(0).toUpperCase()+(o?c.slice(1):c.slice(1).toLowerCase())}function y(c){return c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(c){var o=0,h,b=[];for(o=0,h;o<c.length;o++)(h=i(c,o))!==!1&&b.push(h);return b}function i(c,o){var h=c.charCodeAt(o);if(isNaN(h))return"";if(h<55296||h>57343)return c.charAt(o);if(55296<=h&&h<=56319){if(c.length<=o+1)throw"High surrogate without following low surrogate";var b=c.charCodeAt(o+1);if(56320>b||b>57343)throw"High surrogate without following low surrogate";return c.charAt(o)+c.charAt(o+1)}if(o===0)throw"Low surrogate without preceding high surrogate";var d=c.charCodeAt(o-1);if(55296>d||d>56319)throw"Low surrogate without preceding high surrogate";return!1}u.util.string={camelize:C,capitalize:s,escapeXml:y,graphemeSplit:m}}(),function(){var C=Array.prototype.slice,s=function(){},y=function(){for(var h in{toString:1})if(h==="toString")return!1;return!0}(),m=function(h,b,d){for(var D in b)D in h.prototype&&typeof h.prototype[D]=="function"&&(b[D]+"").indexOf("callSuper")>-1?h.prototype[D]=function(E){return function(){var w=this.constructor.superclass;this.constructor.superclass=d;var O=b[E].apply(this,arguments);if(this.constructor.superclass=w,E!=="initialize")return O}}(D):h.prototype[D]=b[D],y&&(b.toString!==Object.prototype.toString&&(h.prototype.toString=b.toString),b.valueOf!==Object.prototype.valueOf&&(h.prototype.valueOf=b.valueOf))};function i(){}function c(h){for(var b=null,d=this;d.constructor.superclass;){var D=d.constructor.superclass.prototype[h];if(d[h]!==D){b=D;break}d=d.constructor.superclass.prototype}return b?arguments.length>1?b.apply(this,C.call(arguments,1)):b.call(this):console.log("tried to callSuper "+h+", method not found in prototype chain",this)}function o(){var h=null,b=C.call(arguments,0);typeof b[0]=="function"&&(h=b.shift());function d(){this.initialize.apply(this,arguments)}d.superclass=h,d.subclasses=[],h&&(i.prototype=h.prototype,d.prototype=new i,h.subclasses.push(d));for(var D=0,E=b.length;D<E;D++)m(d,b[D],h);return d.prototype.initialize||(d.prototype.initialize=s),d.prototype.constructor=d,d.prototype.callSuper=c,d}u.util.createClass=o}(),function(){var C=!!u.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];u.util.addListener=function(m,i,c,o){m&&m.addEventListener(i,c,C?!1:o)},u.util.removeListener=function(m,i,c,o){m&&m.removeEventListener(i,c,C?!1:o)};function y(m){var i=m.changedTouches;return i&&i[0]?i[0]:m}u.util.getPointer=function(m){var i=m.target,c=u.util.getScrollLeftTop(i),o=y(m);return{x:o.clientX+c.left,y:o.clientY+c.top}},u.util.isTouchEvent=function(m){return s.indexOf(m.type)>-1||m.pointerType==="touch"}}(),function(){function C(o,h){var b=o.style;if(!b)return o;if(typeof h=="string")return o.style.cssText+=";"+h,h.indexOf("opacity")>-1?c(o,h.match(/opacity:\s*(\d?\.?\d*)/)[1]):o;for(var d in h)if(d==="opacity")c(o,h[d]);else{var D=d==="float"||d==="cssFloat"?typeof b.styleFloat>"u"?"cssFloat":"styleFloat":d;b[D]=h[d]}return o}var s=u.document.createElement("div"),y=typeof s.style.opacity=="string",m=typeof s.style.filter=="string",i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,c=function(o){return o};y?c=function(o,h){return o.style.opacity=h,o}:m&&(c=function(o,h){var b=o.style;return o.currentStyle&&!o.currentStyle.hasLayout&&(b.zoom=1),i.test(b.filter)?(h=h>=.9999?"":"alpha(opacity="+h*100+")",b.filter=b.filter.replace(i,h)):b.filter+=" alpha(opacity="+h*100+")",o}),u.util.setStyle=C}(),function(){var C=Array.prototype.slice;function s(O){return typeof O=="string"?u.document.getElementById(O):O}var y,m=function(O){return C.call(O,0)};try{y=m(u.document.childNodes)instanceof Array}catch{}y||(m=function(O){for(var F=new Array(O.length),B=O.length;B--;)F[B]=O[B];return F});function i(O,F){var B=u.document.createElement(O);for(var V in F)V==="class"?B.className=F[V]:V==="for"?B.htmlFor=F[V]:B.setAttribute(V,F[V]);return B}function c(O,F){O&&(" "+O.className+" ").indexOf(" "+F+" ")===-1&&(O.className+=(O.className?" ":"")+F)}function o(O,F,B){return typeof F=="string"&&(F=i(F,B)),O.parentNode&&O.parentNode.replaceChild(F,O),F.appendChild(O),F}function h(O){for(var F=0,B=0,V=u.document.documentElement,H=u.document.body||{scrollLeft:0,scrollTop:0};O&&(O.parentNode||O.host)&&(O=O.parentNode||O.host,O===u.document?(F=H.scrollLeft||V.scrollLeft||0,B=H.scrollTop||V.scrollTop||0):(F+=O.scrollLeft||0,B+=O.scrollTop||0),!(O.nodeType===1&&O.style.position==="fixed")););return{left:F,top:B}}function b(O){var F,B=O&&O.ownerDocument,V={left:0,top:0},H={left:0,top:0},Y,se={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!B)return H;for(var ne in se)H[se[ne]]+=parseInt(d(O,ne),10)||0;return F=B.documentElement,typeof O.getBoundingClientRect<"u"&&(V=O.getBoundingClientRect()),Y=h(O),{left:V.left+Y.left-(F.clientLeft||0)+H.left,top:V.top+Y.top-(F.clientTop||0)+H.top}}var d;u.document.defaultView&&u.document.defaultView.getComputedStyle?d=function(O,F){var B=u.document.defaultView.getComputedStyle(O,null);return B?B[F]:void 0}:d=function(O,F){var B=O.style[F];return!B&&O.currentStyle&&(B=O.currentStyle[F]),B},function(){var O=u.document.documentElement.style,F="userSelect"in O?"userSelect":"MozUserSelect"in O?"MozUserSelect":"WebkitUserSelect"in O?"WebkitUserSelect":"KhtmlUserSelect"in O?"KhtmlUserSelect":"";function B(H){return typeof H.onselectstart<"u"&&(H.onselectstart=u.util.falseFunction),F?H.style[F]="none":typeof H.unselectable=="string"&&(H.unselectable="on"),H}function V(H){return typeof H.onselectstart<"u"&&(H.onselectstart=null),F?H.style[F]="":typeof H.unselectable=="string"&&(H.unselectable=""),H}u.util.makeElementUnselectable=B,u.util.makeElementSelectable=V}();function D(O){var F=u.jsdomImplForWrapper(O);return F._canvas||F._image}function E(O){if(u.isLikelyNode){var F=u.jsdomImplForWrapper(O);F&&(F._image=null,F._canvas=null,F._currentSrc=null,F._attributes=null,F._classList=null)}}function w(O,F){O.imageSmoothingEnabled=O.imageSmoothingEnabled||O.webkitImageSmoothingEnabled||O.mozImageSmoothingEnabled||O.msImageSmoothingEnabled||O.oImageSmoothingEnabled,O.imageSmoothingEnabled=F}u.util.setImageSmoothing=w,u.util.getById=s,u.util.toArray=m,u.util.addClass=c,u.util.makeElement=i,u.util.wrapElement=o,u.util.getScrollLeftTop=h,u.util.getElementOffset=b,u.util.getNodeCanvas=D,u.util.cleanUpJsdomNode=E}(),function(){function C(m,i){return m+(/\?/.test(m)?"&":"?")+i}function s(){}function y(m,i){i||(i={});var c=i.method?i.method.toUpperCase():"GET",o=i.onComplete||function(){},h=new u.window.XMLHttpRequest,b=i.body||i.parameters;return h.onreadystatechange=function(){h.readyState===4&&(o(h),h.onreadystatechange=s)},c==="GET"&&(b=null,typeof i.parameters=="string"&&(m=C(m,i.parameters))),h.open(c,m,!0),(c==="POST"||c==="PUT")&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(b),h}u.util.request=y}(),u.log=console.log,u.warn=console.warn,function(){function C(){return!1}function s(h,b,d,D){return-d*Math.cos(h/D*(Math.PI/2))+d+b}function y(h){var b=!1;return c(function(d){h||(h={});var D=d||+new Date,E=h.duration||500,w=D+E,O,F=h.onChange||C,B=h.abort||C,V=h.onComplete||C,H=h.easing||s,Y="startValue"in h?h.startValue:0,se="endValue"in h?h.endValue:100,ne=h.byValue||se-Y;h.onStart&&h.onStart(),function be(K){O=K||+new Date;var Ce=O>w?E:O-D,W=Ce/E,Be=H(Ce,Y,ne,E),Ie=Math.abs((Be-Y)/ne);if(!b){if(B(Be,Ie,W)){V(se,1,1);return}if(O>w){F(se,1,1),V(se,1,1);return}else F(Be,Ie,W),c(be)}}(D)}),function(){b=!0}}var m=u.window.requestAnimationFrame||u.window.webkitRequestAnimationFrame||u.window.mozRequestAnimationFrame||u.window.oRequestAnimationFrame||u.window.msRequestAnimationFrame||function(h){return u.window.setTimeout(h,1e3/60)},i=u.window.cancelAnimationFrame||u.window.clearTimeout;function c(){return m.apply(u.window,arguments)}function o(){return i.apply(u.window,arguments)}u.util.animate=y,u.util.requestAnimFrame=c,u.util.cancelAnimFrame=o}(),function(){function C(y,m,i){var c="rgba("+parseInt(y[0]+i*(m[0]-y[0]),10)+","+parseInt(y[1]+i*(m[1]-y[1]),10)+","+parseInt(y[2]+i*(m[2]-y[2]),10);return c+=","+(y&&m?parseFloat(y[3]+i*(m[3]-y[3])):1),c+=")",c}function s(y,m,i,c){var o=new u.Color(y).getSource(),h=new u.Color(m).getSource(),b=c.onComplete,d=c.onChange;return c=c||{},u.util.animate(u.util.object.extend(c,{duration:i||500,startValue:o,endValue:h,byValue:h,easing:function(D,E,w,O){var F=c.colorEasing?c.colorEasing(D,O):1-Math.cos(D/O*(Math.PI/2));return C(E,w,F)},onComplete:function(D,E,w){if(b)return b(C(h,h,0),E,w)},onChange:function(D,E,w){if(d){if(Array.isArray(D))return d(C(D,D,0),E,w);d(D,E,w)}}}))}u.util.animateColor=s}(),function(){function C(te,le,q,Z){return te<Math.abs(le)?(te=le,Z=q/4):le===0&&te===0?Z=q/(2*Math.PI)*Math.asin(1):Z=q/(2*Math.PI)*Math.asin(le/te),{a:te,c:le,p:q,s:Z}}function s(te,le,q){return te.a*Math.pow(2,10*(le-=1))*Math.sin((le*q-te.s)*(2*Math.PI)/te.p)}function y(te,le,q,Z){return q*((te=te/Z-1)*te*te+1)+le}function m(te,le,q,Z){return te/=Z/2,te<1?q/2*te*te*te+le:q/2*((te-=2)*te*te+2)+le}function i(te,le,q,Z){return q*(te/=Z)*te*te*te+le}function c(te,le,q,Z){return-q*((te=te/Z-1)*te*te*te-1)+le}function o(te,le,q,Z){return te/=Z/2,te<1?q/2*te*te*te*te+le:-q/2*((te-=2)*te*te*te-2)+le}function h(te,le,q,Z){return q*(te/=Z)*te*te*te*te+le}function b(te,le,q,Z){return q*((te=te/Z-1)*te*te*te*te+1)+le}function d(te,le,q,Z){return te/=Z/2,te<1?q/2*te*te*te*te*te+le:q/2*((te-=2)*te*te*te*te+2)+le}function D(te,le,q,Z){return-q*Math.cos(te/Z*(Math.PI/2))+q+le}function E(te,le,q,Z){return q*Math.sin(te/Z*(Math.PI/2))+le}function w(te,le,q,Z){return-q/2*(Math.cos(Math.PI*te/Z)-1)+le}function O(te,le,q,Z){return te===0?le:q*Math.pow(2,10*(te/Z-1))+le}function F(te,le,q,Z){return te===Z?le+q:q*(-Math.pow(2,-10*te/Z)+1)+le}function B(te,le,q,Z){return te===0?le:te===Z?le+q:(te/=Z/2,te<1?q/2*Math.pow(2,10*(te-1))+le:q/2*(-Math.pow(2,-10*--te)+2)+le)}function V(te,le,q,Z){return-q*(Math.sqrt(1-(te/=Z)*te)-1)+le}function H(te,le,q,Z){return q*Math.sqrt(1-(te=te/Z-1)*te)+le}function Y(te,le,q,Z){return te/=Z/2,te<1?-q/2*(Math.sqrt(1-te*te)-1)+le:q/2*(Math.sqrt(1-(te-=2)*te)+1)+le}function se(te,le,q,Z){var fe=1.70158,G=0,X=q;if(te===0)return le;if(te/=Z,te===1)return le+q;G||(G=Z*.3);var J=C(X,q,G,fe);return-s(J,te,Z)+le}function ne(te,le,q,Z){var fe=1.70158,G=0,X=q;if(te===0)return le;if(te/=Z,te===1)return le+q;G||(G=Z*.3);var J=C(X,q,G,fe);return J.a*Math.pow(2,-10*te)*Math.sin((te*Z-J.s)*(2*Math.PI)/J.p)+J.c+le}function be(te,le,q,Z){var fe=1.70158,G=0,X=q;if(te===0)return le;if(te/=Z/2,te===2)return le+q;G||(G=Z*.44999999999999996);var J=C(X,q,G,fe);return te<1?-.5*s(J,te,Z)+le:J.a*Math.pow(2,-10*(te-=1))*Math.sin((te*Z-J.s)*(2*Math.PI)/J.p)*.5+J.c+le}function K(te,le,q,Z,fe){return fe===void 0&&(fe=1.70158),q*(te/=Z)*te*((fe+1)*te-fe)+le}function Ce(te,le,q,Z,fe){return fe===void 0&&(fe=1.70158),q*((te=te/Z-1)*te*((fe+1)*te+fe)+1)+le}function W(te,le,q,Z,fe){return fe===void 0&&(fe=1.70158),te/=Z/2,te<1?q/2*(te*te*(((fe*=1.525)+1)*te-fe))+le:q/2*((te-=2)*te*(((fe*=1.525)+1)*te+fe)+2)+le}function Be(te,le,q,Z){return q-Ie(Z-te,0,q,Z)+le}function Ie(te,le,q,Z){return(te/=Z)<.36363636363636365?q*(7.5625*te*te)+le:te<.7272727272727273?q*(7.5625*(te-=.5454545454545454)*te+.75)+le:te<.9090909090909091?q*(7.5625*(te-=.8181818181818182)*te+.9375)+le:q*(7.5625*(te-=.9545454545454546)*te+.984375)+le}function ze(te,le,q,Z){return te<Z/2?Be(te*2,0,q,Z)*.5+le:Ie(te*2-Z,0,q,Z)*.5+q*.5+le}u.util.ease={easeInQuad:function(te,le,q,Z){return q*(te/=Z)*te+le},easeOutQuad:function(te,le,q,Z){return-q*(te/=Z)*(te-2)+le},easeInOutQuad:function(te,le,q,Z){return te/=Z/2,te<1?q/2*te*te+le:-q/2*(--te*(te-2)-1)+le},easeInCubic:function(te,le,q,Z){return q*(te/=Z)*te*te+le},easeOutCubic:y,easeInOutCubic:m,easeInQuart:i,easeOutQuart:c,easeInOutQuart:o,easeInQuint:h,easeOutQuint:b,easeInOutQuint:d,easeInSine:D,easeOutSine:E,easeInOutSine:w,easeInExpo:O,easeOutExpo:F,easeInOutExpo:B,easeInCirc:V,easeOutCirc:H,easeInOutCirc:Y,easeInElastic:se,easeOutElastic:ne,easeInOutElastic:be,easeInBack:K,easeOutBack:Ce,easeInOutBack:W,easeInBounce:Be,easeOutBounce:Ie,easeInOutBounce:ze}}(),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.extend,m=s.util.object.clone,i=s.util.toFixed,c=s.util.parseUnit,o=s.util.multiplyTransformMatrices,h=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],b=["symbol","image","marker","pattern","view","svg"],d=["pattern","defs","symbol","metadata","clipPath","mask","desc"],D=["symbol","g","a","svg","clipPath","defs"],E={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},w={stroke:"strokeOpacity",fill:"fillOpacity"},O="font-size",F="clip-path";s.svgValidTagNamesRegEx=H(h),s.svgViewBoxElementsRegEx=H(b),s.svgInvalidAncestorsRegEx=H(d),s.svgValidParentsRegEx=H(D),s.cssRules={},s.gradientDefs={},s.clipPaths={};function B(G){return G in E?E[G]:G}function V(G,X,J,Q){var ve=Object.prototype.toString.call(X)==="[object Array]",he;if((G==="fill"||G==="stroke")&&X==="none")X="";else{if(G==="strokeUniform")return X==="non-scaling-stroke";if(G==="strokeDashArray")X==="none"?X=null:X=X.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(G==="transformMatrix")J&&J.transformMatrix?X=o(J.transformMatrix,s.parseTransformAttribute(X)):X=s.parseTransformAttribute(X);else if(G==="visible")X=X!=="none"&&X!=="hidden",J&&J.visible===!1&&(X=!1);else if(G==="opacity")X=parseFloat(X),J&&typeof J.opacity<"u"&&(X*=J.opacity);else if(G==="textAnchor")X=X==="start"?"left":X==="end"?"right":"center";else if(G==="charSpacing")he=c(X,Q)/Q*1e3;else if(G==="paintFirst"){var Se=X.indexOf("fill"),xe=X.indexOf("stroke"),X="fill";(Se>-1&&xe>-1&&xe<Se||Se===-1&&xe>-1)&&(X="stroke")}else{if(G==="href"||G==="xlink:href"||G==="font")return X;if(G==="imageSmoothing")return X==="optimizeQuality";he=ve?X.map(c):c(X,Q)}}return!ve&&isNaN(he)?X:he}function H(G){return new RegExp("^("+G.join("|")+")\\b","i")}function Y(G){for(var X in w)if(!(typeof G[w[X]]>"u"||G[X]==="")){if(typeof G[X]>"u"){if(!s.Object.prototype[X])continue;G[X]=s.Object.prototype[X]}if(G[X].indexOf("url(")!==0){var J=new s.Color(G[X]);G[X]=J.setAlpha(i(J.getAlpha()*G[w[X]],2)).toRgba()}}return G}function se(G,X){var J,Q=[],ve,he,Se;for(he=0,Se=X.length;he<Se;he++)J=X[he],ve=G.getElementsByTagName(J),Q=Q.concat(Array.prototype.slice.call(ve));return Q}s.parseTransformAttribute=function(){function G(ye,We){var Xe=s.util.cos(We[0]),qe=s.util.sin(We[0]),Et=0,ut=0;We.length===3&&(Et=We[1],ut=We[2]),ye[0]=Xe,ye[1]=qe,ye[2]=-qe,ye[3]=Xe,ye[4]=Et-(Xe*Et-qe*ut),ye[5]=ut-(qe*Et+Xe*ut)}function X(ye,We){var Xe=We[0],qe=We.length===2?We[1]:We[0];ye[0]=Xe,ye[3]=qe}function J(ye,We,Xe){ye[Xe]=Math.tan(s.util.degreesToRadians(We[0]))}function Q(ye,We){ye[4]=We[0],We.length===2&&(ye[5]=We[1])}var ve=s.iMatrix,he=s.reNum,Se=s.commaWsp,xe="(?:(skewX)\\s*\\(\\s*("+he+")\\s*\\))",De="(?:(skewY)\\s*\\(\\s*("+he+")\\s*\\))",ae="(?:(rotate)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+")"+Se+"("+he+"))?\\s*\\))",ee="(?:(scale)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+"))?\\s*\\))",ie="(?:(translate)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+"))?\\s*\\))",ce="(?:(matrix)\\s*\\(\\s*("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")\\s*\\))",de="(?:"+ce+"|"+ie+"|"+ee+"|"+ae+"|"+xe+"|"+De+")",me="(?:"+de+"(?:"+Se+"*"+de+")*)",Ne="^\\s*(?:"+me+"?)\\s*$",Ve=new RegExp(Ne),He=new RegExp(de,"g");return function(ye){var We=ve.concat(),Xe=[];if(!ye||ye&&!Ve.test(ye))return We;ye.replace(He,function(Et){var ut=new RegExp(de).exec(Et).filter(function(vt){return!!vt}),pt=ut[1],rt=ut.slice(2).map(parseFloat);switch(pt){case"translate":Q(We,rt);break;case"rotate":rt[0]=s.util.degreesToRadians(rt[0]),G(We,rt);break;case"scale":X(We,rt);break;case"skewX":J(We,rt,2);break;case"skewY":J(We,rt,1);break;case"matrix":We=rt;break}Xe.push(We.concat()),We=ve.concat()});for(var qe=Xe[0];Xe.length>1;)Xe.shift(),qe=s.util.multiplyTransformMatrices(qe,Xe[0]);return qe}}();function ne(G,X){var J,Q;G.replace(/;\s*$/,"").split(";").forEach(function(ve){var he=ve.split(":");J=he[0].trim().toLowerCase(),Q=he[1].trim(),X[J]=Q})}function be(G,X){var J,Q;for(var ve in G)typeof G[ve]>"u"||(J=ve.toLowerCase(),Q=G[ve],X[J]=Q)}function K(G,X){var J={};for(var Q in s.cssRules[X])if(Ce(G,Q.split(" ")))for(var ve in s.cssRules[X][Q])J[ve]=s.cssRules[X][Q][ve];return J}function Ce(G,X){var J,Q=!0;return J=Be(G,X.pop()),J&&X.length&&(Q=W(G,X)),J&&Q&&X.length===0}function W(G,X){for(var J,Q=!0;G.parentNode&&G.parentNode.nodeType===1&&X.length;)Q&&(J=X.pop()),G=G.parentNode,Q=Be(G,J);return X.length===0}function Be(G,X){var J=G.nodeName,Q=G.getAttribute("class"),ve=G.getAttribute("id"),he,Se;if(he=new RegExp("^"+J,"i"),X=X.replace(he,""),ve&&X.length&&(he=new RegExp("#"+ve+"(?![a-zA-Z\\-]+)","i"),X=X.replace(he,"")),Q&&X.length)for(Q=Q.split(" "),Se=Q.length;Se--;)he=new RegExp("\\."+Q[Se]+"(?![a-zA-Z\\-]+)","i"),X=X.replace(he,"");return X.length===0}function Ie(G,X){var J;if(G.getElementById&&(J=G.getElementById(X)),J)return J;var Q,ve,he,Se=G.getElementsByTagName("*");for(ve=0,he=Se.length;ve<he;ve++)if(Q=Se[ve],X===Q.getAttribute("id"))return Q}function ze(G){for(var X=se(G,["use","svg:use"]),J=0;X.length&&J<X.length;){var Q=X[J],ve=Q.getAttribute("xlink:href")||Q.getAttribute("href");if(ve===null)return;var he=ve.substr(1),Se=Q.getAttribute("x")||0,xe=Q.getAttribute("y")||0,De=Ie(G,he).cloneNode(!0),ae=(De.getAttribute("transform")||"")+" translate("+Se+", "+xe+")",ee,ie=X.length,ce,de,me,Ne,Ve=s.svgNS;if(le(De),/^svg$/i.test(De.nodeName)){var He=De.ownerDocument.createElementNS(Ve,"g");for(de=0,me=De.attributes,Ne=me.length;de<Ne;de++)ce=me.item(de),He.setAttributeNS(Ve,ce.nodeName,ce.nodeValue);for(;De.firstChild;)He.appendChild(De.firstChild);De=He}for(de=0,me=Q.attributes,Ne=me.length;de<Ne;de++)ce=me.item(de),!(ce.nodeName==="x"||ce.nodeName==="y"||ce.nodeName==="xlink:href"||ce.nodeName==="href")&&(ce.nodeName==="transform"?ae=ce.nodeValue+" "+ae:De.setAttribute(ce.nodeName,ce.nodeValue));De.setAttribute("transform",ae),De.setAttribute("instantiated_by_use","1"),De.removeAttribute("id"),ee=Q.parentNode,ee.replaceChild(De,Q),X.length===ie&&J++}}var te=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function le(G){if(!s.svgViewBoxElementsRegEx.test(G.nodeName))return{};var X=G.getAttribute("viewBox"),J=1,Q=1,ve=0,he=0,Se,xe,De,ae,ee=G.getAttribute("width"),ie=G.getAttribute("height"),ce=G.getAttribute("x")||0,de=G.getAttribute("y")||0,me=G.getAttribute("preserveAspectRatio")||"",Ne=!X||!(X=X.match(te)),Ve=!ee||!ie||ee==="100%"||ie==="100%",He=Ne&&Ve,ye={},We="",Xe=0,qe=0;if(ye.width=0,ye.height=0,ye.toBeParsed=He,Ne&&(ce||de)&&G.parentNode&&G.parentNode.nodeName!=="#document"&&(We=" translate("+c(ce)+" "+c(de)+") ",De=(G.getAttribute("transform")||"")+We,G.setAttribute("transform",De),G.removeAttribute("x"),G.removeAttribute("y")),He)return ye;if(Ne)return ye.width=c(ee),ye.height=c(ie),ye;if(ve=-parseFloat(X[1]),he=-parseFloat(X[2]),Se=parseFloat(X[3]),xe=parseFloat(X[4]),ye.minX=ve,ye.minY=he,ye.viewBoxWidth=Se,ye.viewBoxHeight=xe,Ve?(ye.width=Se,ye.height=xe):(ye.width=c(ee),ye.height=c(ie),J=ye.width/Se,Q=ye.height/xe),me=s.util.parsePreserveAspectRatioAttribute(me),me.alignX!=="none"&&(me.meetOrSlice==="meet"&&(Q=J=J>Q?Q:J),me.meetOrSlice==="slice"&&(Q=J=J>Q?J:Q),Xe=ye.width-Se*J,qe=ye.height-xe*J,me.alignX==="Mid"&&(Xe/=2),me.alignY==="Mid"&&(qe/=2),me.alignX==="Min"&&(Xe=0),me.alignY==="Min"&&(qe=0)),J===1&&Q===1&&ve===0&&he===0&&ce===0&&de===0)return ye;if((ce||de)&&G.parentNode.nodeName!=="#document"&&(We=" translate("+c(ce)+" "+c(de)+") "),De=We+" matrix("+J+" 0 0 "+Q+" "+(ve*J+Xe)+" "+(he*Q+qe)+") ",G.nodeName==="svg"){for(ae=G.ownerDocument.createElementNS(s.svgNS,"g");G.firstChild;)ae.appendChild(G.firstChild);G.appendChild(ae)}else ae=G,ae.removeAttribute("x"),ae.removeAttribute("y"),De=ae.getAttribute("transform")+De;return ae.setAttribute("transform",De),ye}function q(G,X){for(;G&&(G=G.parentNode);)if(G.nodeName&&X.test(G.nodeName.replace("svg:",""))&&!G.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(G,X,J,Q){if(G){ze(G);var ve=s.Object.__uid++,he,Se,xe=le(G),De=s.util.toArray(G.getElementsByTagName("*"));if(xe.crossOrigin=Q&&Q.crossOrigin,xe.svgUid=ve,De.length===0&&s.isLikelyNode){De=G.selectNodes('//*[name(.)!="svg"]');var ae=[];for(he=0,Se=De.length;he<Se;he++)ae[he]=De[he];De=ae}var ee=De.filter(function(ce){return le(ce),s.svgValidTagNamesRegEx.test(ce.nodeName.replace("svg:",""))&&!q(ce,s.svgInvalidAncestorsRegEx)});if(!ee||ee&&!ee.length){X&&X([],{});return}var ie={};De.filter(function(ce){return ce.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ce){var de=ce.getAttribute("id");ie[de]=s.util.toArray(ce.getElementsByTagName("*")).filter(function(me){return s.svgValidTagNamesRegEx.test(me.nodeName.replace("svg:",""))})}),s.gradientDefs[ve]=s.getGradientDefs(G),s.cssRules[ve]=s.getCSSRules(G),s.clipPaths[ve]=ie,s.parseElements(ee,function(ce,de){X&&(X(ce,xe,de,De),delete s.gradientDefs[ve],delete s.cssRules[ve],delete s.clipPaths[ve])},m(xe),J,Q)}};function Z(G,X){var J=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Q="xlink:href",ve=X.getAttribute(Q).substr(1),he=Ie(G,ve);if(he&&he.getAttribute(Q)&&Z(G,he),J.forEach(function(xe){he&&!X.hasAttribute(xe)&&he.hasAttribute(xe)&&X.setAttribute(xe,he.getAttribute(xe))}),!X.children.length)for(var Se=he.cloneNode(!0);Se.firstChild;)X.appendChild(Se.firstChild);X.removeAttribute(Q)}var fe=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");y(s,{parseFontDeclaration:function(G,X){var J=G.match(fe);if(J){var Q=J[1],ve=J[3],he=J[4],Se=J[5],xe=J[6];Q&&(X.fontStyle=Q),ve&&(X.fontWeight=isNaN(parseFloat(ve))?ve:parseFloat(ve)),he&&(X.fontSize=c(he)),xe&&(X.fontFamily=xe),Se&&(X.lineHeight=Se==="normal"?1:Se)}},getGradientDefs:function(G){var X=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],J=se(G,X),Q,ve=0,he={};for(ve=J.length;ve--;)Q=J[ve],Q.getAttribute("xlink:href")&&Z(G,Q),he[Q.getAttribute("id")]=Q;return he},parseAttributes:function(G,X,J){if(G){var Q,ve={},he,Se;typeof J>"u"&&(J=G.getAttribute("svgUid")),G.parentNode&&s.svgValidParentsRegEx.test(G.parentNode.nodeName)&&(ve=s.parseAttributes(G.parentNode,X,J));var xe=X.reduce(function(me,Ne){return Q=G.getAttribute(Ne),Q&&(me[Ne]=Q),me},{}),De=y(K(G,J),s.parseStyleAttribute(G));xe=y(xe,De),De[F]&&G.setAttribute(F,De[F]),he=Se=ve.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,xe[O]&&(xe[O]=he=c(xe[O],Se));var ae,ee,ie={};for(var ce in xe)ae=B(ce),ee=V(ae,xe[ce],ve,he),ie[ae]=ee;ie&&ie.font&&s.parseFontDeclaration(ie.font,ie);var de=y(ve,ie);return s.svgValidParentsRegEx.test(G.nodeName)?de:Y(de)}},parseElements:function(G,X,J,Q,ve){new s.ElementsParser(G,X,J,Q,ve).parse()},parseStyleAttribute:function(G){var X={},J=G.getAttribute("style");return J&&(typeof J=="string"?ne(J,X):be(J,X)),X},parsePointsAttribute:function(G){if(!G)return null;G=G.replace(/,/g," ").trim(),G=G.split(/\s+/);var X=[],J,Q;for(J=0,Q=G.length;J<Q;J+=2)X.push({x:parseFloat(G[J]),y:parseFloat(G[J+1])});return X},getCSSRules:function(G){var X=G.getElementsByTagName("style"),J,Q,ve={},he;for(J=0,Q=X.length;J<Q;J++){var Se=X[J].textContent;Se=Se.replace(/\/\*[\s\S]*?\*\//g,""),Se.trim()!==""&&(he=Se.match(/[^{]*\{[\s\S]*?\}/g),he=he.map(function(xe){return xe.trim()}),he.forEach(function(xe){var De=xe.match(/([\s\S]*?)\s*\{([^}]*)\}/),ae={},ee=De[2].trim(),ie=ee.replace(/;$/,"").split(/\s*;\s*/);for(J=0,Q=ie.length;J<Q;J++){var ce=ie[J].split(/\s*:\s*/),de=ce[0],me=ce[1];ae[de]=me}xe=De[1],xe.split(",").forEach(function(Ne){Ne=Ne.replace(/^svg/i,"").trim(),Ne!==""&&(ve[Ne]?s.util.object.extend(ve[Ne],ae):ve[Ne]=s.util.object.clone(ae))})}))}return ve},loadSVGFromURL:function(G,X,J,Q){G=G.replace(/^\n\s*/,"").trim(),new s.util.request(G,{method:"get",onComplete:ve});function ve(he){var Se=he.responseXML;if(!Se||!Se.documentElement)return X&&X(null),!1;s.parseSVGDocument(Se.documentElement,function(xe,De,ae,ee){X&&X(xe,De,ae,ee)},J,Q)}},loadSVGFromString:function(G,X,J,Q){var ve=new s.window.DOMParser,he=ve.parseFromString(G.trim(),"text/xml");s.parseSVGDocument(he.documentElement,function(Se,xe,De,ae){X(Se,xe,De,ae)},J,Q)}})}(x),u.ElementsParser=function(C,s,y,m,i,c){this.elements=C,this.callback=s,this.options=y,this.reviver=m,this.svgUid=y&&y.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=c},function(C){C.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},C.createObjects=function(){var s=this;this.elements.forEach(function(y,m){y.setAttribute("svgUid",s.svgUid),s.createObject(y,m)})},C.findTag=function(s){return u[u.util.string.capitalize(s.tagName.replace("svg:",""))]},C.createObject=function(s,y){var m=this.findTag(s);if(m&&m.fromElement)try{m.fromElement(s,this.createCallback(y,s),this.options)}catch(i){u.log(i)}else this.checkIfDone()},C.createCallback=function(s,y){var m=this;return function(i){var c;m.resolveGradient(i,y,"fill"),m.resolveGradient(i,y,"stroke"),i instanceof u.Image&&i._originalElement&&(c=i.parsePreserveAspectRatioAttribute(y)),i._removeTransformMatrix(c),m.resolveClipPath(i,y),m.reviver&&m.reviver(y,i),m.instances[s]=i,m.checkIfDone()}},C.extractPropertyDefinition=function(s,y,m){var i=s[y],c=this.regexUrl;if(c.test(i)){c.lastIndex=0;var o=c.exec(i)[1];return c.lastIndex=0,u[m][this.svgUid][o]}},C.resolveGradient=function(s,y,m){var i=this.extractPropertyDefinition(s,m,"gradientDefs");if(i){var c=y.getAttribute(m+"-opacity"),o=u.Gradient.fromElement(i,s,c,this.options);s.set(m,o)}},C.createClipPathCallback=function(s,y){return function(m){m._removeTransformMatrix(),m.fillRule=m.clipRule,y.push(m)}},C.resolveClipPath=function(s,y){var m=this.extractPropertyDefinition(s,"clipPath","clipPaths"),i,c,o,h,b,d;if(m){h=[],o=u.util.invertTransform(s.calcTransformMatrix());for(var D=m[0].parentNode,E=y;E.parentNode&&E.getAttribute("clip-path")!==s.clipPath;)E=E.parentNode;E.parentNode.appendChild(D);for(var w=0;w<m.length;w++)i=m[w],c=this.findTag(i),c.fromElement(i,this.createClipPathCallback(s,h),this.options);h.length===1?m=h[0]:m=new u.Group(h),b=u.util.multiplyTransformMatrices(o,m.calcTransformMatrix()),m.clipPath&&this.resolveClipPath(m,E);var d=u.util.qrDecompose(b);m.flipX=!1,m.flipY=!1,m.set("scaleX",d.scaleX),m.set("scaleY",d.scaleY),m.angle=d.angle,m.skewX=d.skewX,m.skewY=0,m.setPositionByOrigin({x:d.translateX,y:d.translateY},"center","center"),s.clipPath=m}else delete s.clipPath},C.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(u.ElementsParser.prototype),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=y;function y(m,i){this.x=m,this.y=i}y.prototype={type:"point",constructor:y,add:function(m){return new y(this.x+m.x,this.y+m.y)},addEquals:function(m){return this.x+=m.x,this.y+=m.y,this},scalarAdd:function(m){return new y(this.x+m,this.y+m)},scalarAddEquals:function(m){return this.x+=m,this.y+=m,this},subtract:function(m){return new y(this.x-m.x,this.y-m.y)},subtractEquals:function(m){return this.x-=m.x,this.y-=m.y,this},scalarSubtract:function(m){return new y(this.x-m,this.y-m)},scalarSubtractEquals:function(m){return this.x-=m,this.y-=m,this},multiply:function(m){return new y(this.x*m,this.y*m)},multiplyEquals:function(m){return this.x*=m,this.y*=m,this},divide:function(m){return new y(this.x/m,this.y/m)},divideEquals:function(m){return this.x/=m,this.y/=m,this},eq:function(m){return this.x===m.x&&this.y===m.y},lt:function(m){return this.x<m.x&&this.y<m.y},lte:function(m){return this.x<=m.x&&this.y<=m.y},gt:function(m){return this.x>m.x&&this.y>m.y},gte:function(m){return this.x>=m.x&&this.y>=m.y},lerp:function(m,i){return typeof i>"u"&&(i=.5),i=Math.max(Math.min(1,i),0),new y(this.x+(m.x-this.x)*i,this.y+(m.y-this.y)*i)},distanceFrom:function(m){var i=this.x-m.x,c=this.y-m.y;return Math.sqrt(i*i+c*c)},midPointFrom:function(m){return this.lerp(m)},min:function(m){return new y(Math.min(this.x,m.x),Math.min(this.y,m.y))},max:function(m){return new y(Math.max(this.x,m.x),Math.max(this.y,m.y))},toString:function(){return this.x+","+this.y},setXY:function(m,i){return this.x=m,this.y=i,this},setX:function(m){return this.x=m,this},setY:function(m){return this.y=m,this},setFromPoint:function(m){return this.x=m.x,this.y=m.y,this},swap:function(m){var i=this.x,c=this.y;this.x=m.x,this.y=m.y,m.x=i,m.y=c},clone:function(){return new y(this.x,this.y)}}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function y(m){this.status=m,this.points=[]}s.Intersection=y,s.Intersection.prototype={constructor:y,appendPoint:function(m){return this.points.push(m),this},appendPoints:function(m){return this.points=this.points.concat(m),this}},s.Intersection.intersectLineLine=function(m,i,c,o){var h,b=(o.x-c.x)*(m.y-c.y)-(o.y-c.y)*(m.x-c.x),d=(i.x-m.x)*(m.y-c.y)-(i.y-m.y)*(m.x-c.x),D=(o.y-c.y)*(i.x-m.x)-(o.x-c.x)*(i.y-m.y);if(D!==0){var E=b/D,w=d/D;0<=E&&E<=1&&0<=w&&w<=1?(h=new y("Intersection"),h.appendPoint(new s.Point(m.x+E*(i.x-m.x),m.y+E*(i.y-m.y)))):h=new y}else b===0||d===0?h=new y("Coincident"):h=new y("Parallel");return h},s.Intersection.intersectLinePolygon=function(m,i,c){var o=new y,h=c.length,b,d,D,E;for(E=0;E<h;E++)b=c[E],d=c[(E+1)%h],D=y.intersectLineLine(m,i,b,d),o.appendPoints(D.points);return o.points.length>0&&(o.status="Intersection"),o},s.Intersection.intersectPolygonPolygon=function(m,i){var c=new y,o=m.length,h;for(h=0;h<o;h++){var b=m[h],d=m[(h+1)%o],D=y.intersectLinePolygon(b,d,i);c.appendPoints(D.points)}return c.points.length>0&&(c.status="Intersection"),c},s.Intersection.intersectPolygonRectangle=function(m,i,c){var o=i.min(c),h=i.max(c),b=new s.Point(h.x,o.y),d=new s.Point(o.x,h.y),D=y.intersectLinePolygon(o,b,m),E=y.intersectLinePolygon(b,h,m),w=y.intersectLinePolygon(h,d,m),O=y.intersectLinePolygon(d,o,m),F=new y;return F.appendPoints(D.points),F.appendPoints(E.points),F.appendPoints(w.points),F.appendPoints(O.points),F.points.length>0&&(F.status="Intersection"),F}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function y(i){i?this._tryParsingColor(i):this.setSource([0,0,0,1])}s.Color=y,s.Color.prototype={_tryParsingColor:function(i){var c;i in y.colorNameMap&&(i=y.colorNameMap[i]),i==="transparent"&&(c=[255,255,255,0]),c||(c=y.sourceFromHex(i)),c||(c=y.sourceFromRgb(i)),c||(c=y.sourceFromHsl(i)),c||(c=[0,0,0,1]),c&&this.setSource(c)},_rgbToHsl:function(i,c,o){i/=255,c/=255,o/=255;var h,b,d,D=s.util.array.max([i,c,o]),E=s.util.array.min([i,c,o]);if(d=(D+E)/2,D===E)h=b=0;else{var w=D-E;switch(b=d>.5?w/(2-D-E):w/(D+E),D){case i:h=(c-o)/w+(c<o?6:0);break;case c:h=(o-i)/w+2;break;case o:h=(i-c)/w+4;break}h/=6}return[Math.round(h*360),Math.round(b*100),Math.round(d*100)]},getSource:function(){return this._source},setSource:function(i){this._source=i},toRgb:function(){var i=this.getSource();return"rgb("+i[0]+","+i[1]+","+i[2]+")"},toRgba:function(){var i=this.getSource();return"rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")"},toHsl:function(){var i=this.getSource(),c=this._rgbToHsl(i[0],i[1],i[2]);return"hsl("+c[0]+","+c[1]+"%,"+c[2]+"%)"},toHsla:function(){var i=this.getSource(),c=this._rgbToHsl(i[0],i[1],i[2]);return"hsla("+c[0]+","+c[1]+"%,"+c[2]+"%,"+i[3]+")"},toHex:function(){var i=this.getSource(),c,o,h;return c=i[0].toString(16),c=c.length===1?"0"+c:c,o=i[1].toString(16),o=o.length===1?"0"+o:o,h=i[2].toString(16),h=h.length===1?"0"+h:h,c.toUpperCase()+o.toUpperCase()+h.toUpperCase()},toHexa:function(){var i=this.getSource(),c;return c=Math.round(i[3]*255),c=c.toString(16),c=c.length===1?"0"+c:c,this.toHex()+c.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(i){var c=this.getSource();return c[3]=i,this.setSource(c),this},toGrayscale:function(){var i=this.getSource(),c=parseInt((i[0]*.3+i[1]*.59+i[2]*.11).toFixed(0),10),o=i[3];return this.setSource([c,c,c,o]),this},toBlackWhite:function(i){var c=this.getSource(),o=(c[0]*.3+c[1]*.59+c[2]*.11).toFixed(0),h=c[3];return i=i||127,o=Number(o)<Number(i)?0:255,this.setSource([o,o,o,h]),this},overlayWith:function(i){i instanceof y||(i=new y(i));var c=[],o=this.getAlpha(),h=.5,b=this.getSource(),d=i.getSource(),D;for(D=0;D<3;D++)c.push(Math.round(b[D]*(1-h)+d[D]*h));return c[3]=o,this.setSource(c),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function m(i,c,o){return o<0&&(o+=1),o>1&&(o-=1),o<.16666666666666666?i+(c-i)*6*o:o<.5?c:o<.6666666666666666?i+(c-i)*(.6666666666666666-o)*6:i}s.Color.fromRgb=function(i){return y.fromSource(y.sourceFromRgb(i))},s.Color.sourceFromRgb=function(i){var c=i.match(y.reRGBa);if(c){var o=parseInt(c[1],10)/(/%$/.test(c[1])?100:1)*(/%$/.test(c[1])?255:1),h=parseInt(c[2],10)/(/%$/.test(c[2])?100:1)*(/%$/.test(c[2])?255:1),b=parseInt(c[3],10)/(/%$/.test(c[3])?100:1)*(/%$/.test(c[3])?255:1);return[parseInt(o,10),parseInt(h,10),parseInt(b,10),c[4]?parseFloat(c[4]):1]}},s.Color.fromRgba=y.fromRgb,s.Color.fromHsl=function(i){return y.fromSource(y.sourceFromHsl(i))},s.Color.sourceFromHsl=function(i){var c=i.match(y.reHSLa);if(c){var o=(parseFloat(c[1])%360+360)%360/360,h=parseFloat(c[2])/(/%$/.test(c[2])?100:1),b=parseFloat(c[3])/(/%$/.test(c[3])?100:1),d,D,E;if(h===0)d=D=E=b;else{var w=b<=.5?b*(h+1):b+h-b*h,O=b*2-w;d=m(O,w,o+.3333333333333333),D=m(O,w,o),E=m(O,w,o-.3333333333333333)}return[Math.round(d*255),Math.round(D*255),Math.round(E*255),c[4]?parseFloat(c[4]):1]}},s.Color.fromHsla=y.fromHsl,s.Color.fromHex=function(i){return y.fromSource(y.sourceFromHex(i))},s.Color.sourceFromHex=function(i){if(i.match(y.reHex)){var c=i.slice(i.indexOf("#")+1),o=c.length===3||c.length===4,h=c.length===8||c.length===4,b=o?c.charAt(0)+c.charAt(0):c.substring(0,2),d=o?c.charAt(1)+c.charAt(1):c.substring(2,4),D=o?c.charAt(2)+c.charAt(2):c.substring(4,6),E=h?o?c.charAt(3)+c.charAt(3):c.substring(6,8):"FF";return[parseInt(b,16),parseInt(d,16),parseInt(D,16),parseFloat((parseInt(E,16)/255).toFixed(2))]}},s.Color.fromSource=function(i){var c=new y;return c.setSource(i),c}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=["e","se","s","sw","w","nw","n","ne","e"],m=["ns","nesw","ew","nwse"],i={},c="left",o="top",h="right",b="bottom",d="center",D={top:b,bottom:o,left:h,right:c,center:d},E=s.util.radiansToDegrees,w=Math.sign||function(ae){return(ae>0)-(ae<0)||+ae};function O(ae,ee){var ie=ae.angle+E(Math.atan2(ee.y,ee.x))+360;return Math.round(ie%360/45)}function F(ae,ee){var ie=ee.transform.target,ce=ie.canvas,de=s.util.object.clone(ee);de.target=ie,ce&&ce.fire("object:"+ae,de),ie.fire(ae,ee)}function B(ae,ee){var ie=ee.canvas,ce=ie.uniScaleKey,de=ae[ce];return ie.uniformScaling&&!de||!ie.uniformScaling&&de}function V(ae){return ae.originX===d&&ae.originY===d}function H(ae,ee,ie){var ce=ae.lockScalingX,de=ae.lockScalingY;return!!(ce&&de||!ee&&(ce||de)&&ie||ce&&ee==="x"||de&&ee==="y")}function Y(ae,ee,ie){var ce="not-allowed",de=B(ae,ie),me="";if(ee.x!==0&&ee.y===0?me="x":ee.x===0&&ee.y!==0&&(me="y"),H(ie,me,de))return ce;var Ne=O(ie,ee);return y[Ne]+"-resize"}function se(ae,ee,ie){var ce="not-allowed";if(ee.x!==0&&ie.lockSkewingY||ee.y!==0&&ie.lockSkewingX)return ce;var de=O(ie,ee)%4;return m[de]+"-resize"}function ne(ae,ee,ie){return ae[ie.canvas.altActionKey]?i.skewCursorStyleHandler(ae,ee,ie):i.scaleCursorStyleHandler(ae,ee,ie)}function be(ae,ee,ie){var ce=ae[ie.canvas.altActionKey];if(ee.x===0)return ce?"skewX":"scaleY";if(ee.y===0)return ce?"skewY":"scaleX"}function K(ae,ee,ie){return ie.lockRotation?"not-allowed":ee.cursorStyle}function Ce(ae,ee,ie,ce){return{e:ae,transform:ee,pointer:{x:ie,y:ce}}}function W(ae){return function(ee,ie,ce,de){var me=ie.target,Ne=me.getCenterPoint(),Ve=me.translateToOriginPoint(Ne,ie.originX,ie.originY),He=ae(ee,ie,ce,de);return me.setPositionByOrigin(Ve,ie.originX,ie.originY),He}}function Be(ae,ee){return function(ie,ce,de,me){var Ne=ee(ie,ce,de,me);return Ne&&F(ae,Ce(ie,ce,de,me)),Ne}}function Ie(ae,ee,ie,ce,de){var me=ae.target,Ne=me.controls[ae.corner],Ve=me.canvas.getZoom(),He=me.padding/Ve,ye=me.toLocalPoint(new s.Point(ce,de),ee,ie);return ye.x>=He&&(ye.x-=He),ye.x<=-He&&(ye.x+=He),ye.y>=He&&(ye.y-=He),ye.y<=He&&(ye.y+=He),ye.x-=Ne.offsetX,ye.y-=Ne.offsetY,ye}function ze(ae){return ae.flipX!==ae.flipY}function te(ae,ee,ie,ce,de){if(ae[ee]!==0){var me=ae._getTransformedDimensions()[ce],Ne=de/me*ae[ie];ae.set(ie,Ne)}}function le(ae,ee,ie,ce){var de=ee.target,me=de._getTransformedDimensions(0,de.skewY),Ne=Ie(ee,ee.originX,ee.originY,ie,ce),Ve=Math.abs(Ne.x*2)-me.x,He=de.skewX,ye;Ve<2?ye=0:(ye=E(Math.atan2(Ve/de.scaleX,me.y/de.scaleY)),ee.originX===c&&ee.originY===b&&(ye=-ye),ee.originX===h&&ee.originY===o&&(ye=-ye),ze(de)&&(ye=-ye));var We=He!==ye;if(We){var Xe=de._getTransformedDimensions().y;de.set("skewX",ye),te(de,"skewY","scaleY","y",Xe)}return We}function q(ae,ee,ie,ce){var de=ee.target,me=de._getTransformedDimensions(de.skewX,0),Ne=Ie(ee,ee.originX,ee.originY,ie,ce),Ve=Math.abs(Ne.y*2)-me.y,He=de.skewY,ye;Ve<2?ye=0:(ye=E(Math.atan2(Ve/de.scaleY,me.x/de.scaleX)),ee.originX===c&&ee.originY===b&&(ye=-ye),ee.originX===h&&ee.originY===o&&(ye=-ye),ze(de)&&(ye=-ye));var We=He!==ye;if(We){var Xe=de._getTransformedDimensions().x;de.set("skewY",ye),te(de,"skewX","scaleX","x",Xe)}return We}function Z(ae,ee,ie,ce){var de=ee.target,me=de.skewX,Ne,Ve=ee.originY;if(de.lockSkewingX)return!1;if(me===0){var He=Ie(ee,d,d,ie,ce);He.x>0?Ne=c:Ne=h}else me>0&&(Ne=Ve===o?c:h),me<0&&(Ne=Ve===o?h:c),ze(de)&&(Ne=Ne===c?h:c);ee.originX=Ne;var ye=Be("skewing",W(le));return ye(ae,ee,ie,ce)}function fe(ae,ee,ie,ce){var de=ee.target,me=de.skewY,Ne,Ve=ee.originX;if(de.lockSkewingY)return!1;if(me===0){var He=Ie(ee,d,d,ie,ce);He.y>0?Ne=o:Ne=b}else me>0&&(Ne=Ve===c?o:b),me<0&&(Ne=Ve===c?b:o),ze(de)&&(Ne=Ne===o?b:o);ee.originY=Ne;var ye=Be("skewing",W(q));return ye(ae,ee,ie,ce)}function G(ae,ee,ie,ce){var de=ee,me=de.target,Ne=me.translateToOriginPoint(me.getCenterPoint(),de.originX,de.originY);if(me.lockRotation)return!1;var Ve=Math.atan2(de.ey-Ne.y,de.ex-Ne.x),He=Math.atan2(ce-Ne.y,ie-Ne.x),ye=E(He-Ve+de.theta),We=!0;if(me.snapAngle>0){var Xe=me.snapAngle,qe=me.snapThreshold||Xe,Et=Math.ceil(ye/Xe)*Xe,ut=Math.floor(ye/Xe)*Xe;Math.abs(ye-ut)<qe?ye=ut:Math.abs(ye-Et)<qe&&(ye=Et)}return ye<0&&(ye=360+ye),ye%=360,We=me.angle!==ye,me.angle=ye,We}function X(ae,ee,ie,ce,de){de=de||{};var me=ee.target,Ne=me.lockScalingX,Ve=me.lockScalingY,He=de.by,ye,We,Xe,qe,Et=B(ae,me),ut=H(me,He,Et),pt,rt,vt=ee.gestureScale;if(ut)return!1;if(vt)We=ee.scaleX*vt,Xe=ee.scaleY*vt;else{if(ye=Ie(ee,ee.originX,ee.originY,ie,ce),pt=He!=="y"?w(ye.x):1,rt=He!=="x"?w(ye.y):1,ee.signX||(ee.signX=pt),ee.signY||(ee.signY=rt),me.lockScalingFlip&&(ee.signX!==pt||ee.signY!==rt))return!1;if(qe=me._getTransformedDimensions(),Et&&!He){var Nt=Math.abs(ye.x)+Math.abs(ye.y),Ut=ee.original,we=Math.abs(qe.x*Ut.scaleX/me.scaleX)+Math.abs(qe.y*Ut.scaleY/me.scaleY),Ae=Nt/we;We=Ut.scaleX*Ae,Xe=Ut.scaleY*Ae}else We=Math.abs(ye.x*me.scaleX/qe.x),Xe=Math.abs(ye.y*me.scaleY/qe.y);V(ee)&&(We*=2,Xe*=2),ee.signX!==pt&&He!=="y"&&(ee.originX=D[ee.originX],We*=-1,ee.signX=pt),ee.signY!==rt&&He!=="x"&&(ee.originY=D[ee.originY],Xe*=-1,ee.signY=rt)}var Fe=me.scaleX,Ue=me.scaleY;return He?(He==="x"&&me.set("scaleX",We),He==="y"&&me.set("scaleY",Xe)):(!Ne&&me.set("scaleX",We),!Ve&&me.set("scaleY",Xe)),Fe!==me.scaleX||Ue!==me.scaleY}function J(ae,ee,ie,ce){return X(ae,ee,ie,ce)}function Q(ae,ee,ie,ce){return X(ae,ee,ie,ce,{by:"x"})}function ve(ae,ee,ie,ce){return X(ae,ee,ie,ce,{by:"y"})}function he(ae,ee,ie,ce){return ae[ee.target.canvas.altActionKey]?i.skewHandlerX(ae,ee,ie,ce):i.scalingY(ae,ee,ie,ce)}function Se(ae,ee,ie,ce){return ae[ee.target.canvas.altActionKey]?i.skewHandlerY(ae,ee,ie,ce):i.scalingX(ae,ee,ie,ce)}function xe(ae,ee,ie,ce){var de=ee.target,me=Ie(ee,ee.originX,ee.originY,ie,ce),Ne=de.strokeWidth/(de.strokeUniform?de.scaleX:1),Ve=V(ee)?2:1,He=de.width,ye=Math.abs(me.x*Ve/de.scaleX)-Ne;return de.set("width",Math.max(ye,0)),He!==ye}function De(ae,ee,ie,ce){var de=ee.target,me=ie-ee.offsetX,Ne=ce-ee.offsetY,Ve=!de.get("lockMovementX")&&de.left!==me,He=!de.get("lockMovementY")&&de.top!==Ne;return Ve&&de.set("left",me),He&&de.set("top",Ne),(Ve||He)&&F("moving",Ce(ae,ee,ie,ce)),Ve||He}i.scaleCursorStyleHandler=Y,i.skewCursorStyleHandler=se,i.scaleSkewCursorStyleHandler=ne,i.rotationWithSnapping=Be("rotating",W(G)),i.scalingEqually=Be("scaling",W(J)),i.scalingX=Be("scaling",W(Q)),i.scalingY=Be("scaling",W(ve)),i.scalingYOrSkewingX=he,i.scalingXOrSkewingY=Se,i.changeWidth=Be("resizing",W(xe)),i.skewHandlerX=Z,i.skewHandlerY=fe,i.dragHandler=De,i.scaleOrSkewActionName=be,i.rotationStyleHandler=K,i.fireEvent=F,i.wrapWithFixedAnchor=W,i.wrapWithFireEvent=Be,i.getLocalPoint=Ie,s.controlsUtils=i}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.degreesToRadians,m=s.controlsUtils;function i(o,h,b,d,D){d=d||{};var E=this.sizeX||d.cornerSize||D.cornerSize,w=this.sizeY||d.cornerSize||D.cornerSize,O=typeof d.transparentCorners<"u"?d.transparentCorners:D.transparentCorners,F=O?"stroke":"fill",B=!O&&(d.cornerStrokeColor||D.cornerStrokeColor),V=h,H=b,Y;o.save(),o.fillStyle=d.cornerColor||D.cornerColor,o.strokeStyle=d.cornerStrokeColor||D.cornerStrokeColor,E>w?(Y=E,o.scale(1,w/E),H=b*E/w):w>E?(Y=w,o.scale(E/w,1),V=h*w/E):Y=E,o.lineWidth=1,o.beginPath(),o.arc(V,H,Y/2,0,2*Math.PI,!1),o[F](),B&&o.stroke(),o.restore()}function c(o,h,b,d,D){d=d||{};var E=this.sizeX||d.cornerSize||D.cornerSize,w=this.sizeY||d.cornerSize||D.cornerSize,O=typeof d.transparentCorners<"u"?d.transparentCorners:D.transparentCorners,F=O?"stroke":"fill",B=!O&&(d.cornerStrokeColor||D.cornerStrokeColor),V=E/2,H=w/2;o.save(),o.fillStyle=d.cornerColor||D.cornerColor,o.strokeStyle=d.cornerStrokeColor||D.cornerStrokeColor,o.lineWidth=1,o.translate(h,b),o.rotate(y(D.angle)),o[F+"Rect"](-V,-H,E,w),B&&o.strokeRect(-V,-H,E,w),o.restore()}m.renderCircleControl=i,m.renderSquareControl=c}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});function y(m){for(var i in m)this[i]=m[i]}s.Control=y,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(m,i){return i.cursorStyle},getActionName:function(m,i){return i.actionName},getVisibility:function(m,i){var c=m._controlsVisibility;return c&&typeof c[i]<"u"?c[i]:this.visible},setVisibility:function(m){this.visible=m},positionHandler:function(m,i){var c=s.util.transformPoint({x:this.x*m.x+this.offsetX,y:this.y*m.y+this.offsetY},i);return c},calcCornerCoords:function(m,i,c,o,h){var b,d,D,E,w=h?this.touchSizeX:this.sizeX,O=h?this.touchSizeY:this.sizeY;if(w&&O&&w!==O){var F=Math.atan2(O,w),B=Math.sqrt(w*w+O*O)/2,V=F-s.util.degreesToRadians(m),H=Math.PI/2-F-s.util.degreesToRadians(m);b=B*s.util.cos(V),d=B*s.util.sin(V),D=B*s.util.cos(H),E=B*s.util.sin(H)}else{var Y=w&&O?w:i;B=Y*.7071067812;var V=s.util.degreesToRadians(45-m);b=D=B*s.util.cos(V),d=E=B*s.util.sin(V)}return{tl:{x:c-E,y:o-D},tr:{x:c+b,y:o-d},bl:{x:c-b,y:o+d},br:{x:c+E,y:o+D}}},render:function(m,i,c,o,h){switch(o=o||{},o.cornerStyle||h.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,m,i,c,o,h);break;default:s.controlsUtils.renderSquareControl.call(this,m,i,c,o,h)}}}}(x),function(){function C(c,o){var h=c.getAttribute("style"),b=c.getAttribute("offset")||0,d,D,E,w;if(b=parseFloat(b)/(/%$/.test(b)?100:1),b=b<0?0:b>1?1:b,h){var O=h.split(/\s*;\s*/);for(O[O.length-1]===""&&O.pop(),w=O.length;w--;){var F=O[w].split(/\s*:\s*/),B=F[0].trim(),V=F[1].trim();B==="stop-color"?d=V:B==="stop-opacity"&&(E=V)}}return d||(d=c.getAttribute("stop-color")||"rgb(0,0,0)"),E||(E=c.getAttribute("stop-opacity")),d=new u.Color(d),D=d.getAlpha(),E=isNaN(parseFloat(E))?1:parseFloat(E),E*=D*o,{offset:b,color:d.toRgb(),opacity:E}}function s(c){return{x1:c.getAttribute("x1")||0,y1:c.getAttribute("y1")||0,x2:c.getAttribute("x2")||"100%",y2:c.getAttribute("y2")||0}}function y(c){return{x1:c.getAttribute("fx")||c.getAttribute("cx")||"50%",y1:c.getAttribute("fy")||c.getAttribute("cy")||"50%",r1:0,x2:c.getAttribute("cx")||"50%",y2:c.getAttribute("cy")||"50%",r2:c.getAttribute("r")||"50%"}}var m=u.util.object.clone;u.Gradient=u.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(c){c||(c={}),c.coords||(c.coords={});var o,h=this;Object.keys(c).forEach(function(b){h[b]=c[b]}),this.id?this.id+="_"+u.Object.__uid++:this.id=u.Object.__uid++,o={x1:c.coords.x1||0,y1:c.coords.y1||0,x2:c.coords.x2||0,y2:c.coords.y2||0},this.type==="radial"&&(o.r1=c.coords.r1||0,o.r2=c.coords.r2||0),this.coords=o,this.colorStops=c.colorStops.slice()},addColorStop:function(c){for(var o in c){var h=new u.Color(c[o]);this.colorStops.push({offset:parseFloat(o),color:h.toRgb(),opacity:h.getAlpha()})}return this},toObject:function(c){var o={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return u.util.populateWithProperties(this,o,c),o},toSVG:function(c,D){var h=m(this.coords,!0),b,d,D=D||{},E,w,O=m(this.colorStops,!0),F=h.r1>h.r2,B=this.gradientTransform?this.gradientTransform.concat():u.iMatrix.concat(),V=-this.offsetX,H=-this.offsetY,Y=!!D.additionalTransform,se=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(O.sort(function(W,Be){return W.offset-Be.offset}),se==="objectBoundingBox"?(V/=c.width,H/=c.height):(V+=c.width/2,H+=c.height/2),c.type==="path"&&this.gradientUnits!=="percentage"&&(V-=c.pathOffset.x,H-=c.pathOffset.y),B[4]-=V,B[5]-=H,w='id="SVGID_'+this.id+'" gradientUnits="'+se+'"',w+=' gradientTransform="'+(Y?D.additionalTransform+" ":"")+u.util.matrixToSVG(B)+'" ',this.type==="linear"?E=["<linearGradient ",w,' x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,`">
`]:this.type==="radial"&&(E=["<radialGradient ",w,' cx="',F?h.x1:h.x2,'" cy="',F?h.y1:h.y2,'" r="',F?h.r1:h.r2,'" fx="',F?h.x2:h.x1,'" fy="',F?h.y2:h.y1,`">
`]),this.type==="radial"){if(F)for(O=O.concat(),O.reverse(),b=0,d=O.length;b<d;b++)O[b].offset=1-O[b].offset;var ne=Math.min(h.r1,h.r2);if(ne>0){var be=Math.max(h.r1,h.r2),K=ne/be;for(b=0,d=O.length;b<d;b++)O[b].offset+=K*(1-O[b].offset)}}for(b=0,d=O.length;b<d;b++){var Ce=O[b];E.push("<stop ",'offset="',Ce.offset*100+"%",'" style="stop-color:',Ce.color,typeof Ce.opacity<"u"?";stop-opacity: "+Ce.opacity:";",`"/>
`)}return E.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),E.join("")},toLive:function(c){var o,h=u.util.object.clone(this.coords),b,d;if(this.type){for(this.type==="linear"?o=c.createLinearGradient(h.x1,h.y1,h.x2,h.y2):this.type==="radial"&&(o=c.createRadialGradient(h.x1,h.y1,h.r1,h.x2,h.y2,h.r2)),b=0,d=this.colorStops.length;b<d;b++){var D=this.colorStops[b].color,E=this.colorStops[b].opacity,w=this.colorStops[b].offset;typeof E<"u"&&(D=new u.Color(D).setAlpha(E).toRgba()),o.addColorStop(w,D)}return o}}}),u.util.object.extend(u.Gradient,{fromElement:function(c,o,h,b){var d=parseFloat(h)/(/%$/.test(h)?100:1);d=d<0?0:d>1?1:d,isNaN(d)&&(d=1);var D=c.getElementsByTagName("stop"),E,w=c.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",O=c.getAttribute("gradientTransform")||"",F=[],B,V,H=0,Y=0,se;for(c.nodeName==="linearGradient"||c.nodeName==="LINEARGRADIENT"?(E="linear",B=s(c)):(E="radial",B=y(c)),V=D.length;V--;)F.push(C(D[V],d));se=u.parseTransformAttribute(O),i(o,B,b,w),w==="pixels"&&(H=-o.left,Y=-o.top);var ne=new u.Gradient({id:c.getAttribute("id"),type:E,coords:B,colorStops:F,gradientUnits:w,gradientTransform:se,offsetX:H,offsetY:Y});return ne}});function i(c,o,h,b){var d,D;Object.keys(o).forEach(function(E){d=o[E],d==="Infinity"?D=1:d==="-Infinity"?D=0:(D=parseFloat(o[E],10),typeof d=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(d)&&(D*=.01,b==="pixels"&&((E==="x1"||E==="x2"||E==="r2")&&(D*=h.viewBoxWidth||h.width),(E==="y1"||E==="y2")&&(D*=h.viewBoxHeight||h.height)))),o[E]=D})}}(),function(){"use strict";var C=u.util.toFixed;u.Pattern=u.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,y){if(s||(s={}),this.id=u.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){y&&y(this);return}else{var m=this;this.source=u.util.createImage(),u.util.loadImage(s.source,function(i,c){m.source=i,y&&y(m,c)},null,this.crossOrigin)}},toObject:function(s){var y=u.Object.NUM_FRACTION_DIGITS,m,i;return typeof this.source.src=="string"?m=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(m=this.source.toDataURL()),i={type:"pattern",source:m,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:C(this.offsetX,y),offsetY:C(this.offsetY,y),patternTransform:this.patternTransform?this.patternTransform.concat():null},u.util.populateWithProperties(this,i,s),i},toSVG:function(s){var y=typeof this.source=="function"?this.source():this.source,m=y.width/s.width,i=y.height/s.height,c=this.offsetX/s.width,o=this.offsetY/s.height,h="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(i=1,o&&(i+=Math.abs(o))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(m=1,c&&(m+=Math.abs(c))),y.src?h=y.src:y.toDataURL&&(h=y.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+c+'" y="'+o+'" width="'+m+'" height="'+i+`">
<image x="0" y="0" width="`+y.width+'" height="'+y.height+'" xlink:href="'+h+`"></image>
</pattern>
`},setOptions:function(s){for(var y in s)this[y]=s[y]},toLive:function(s){var y=this.source;return!y||typeof y.src<"u"&&(!y.complete||y.naturalWidth===0||y.naturalHeight===0)?"":s.createPattern(y,this.repeat)}})}(),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(m){typeof m=="string"&&(m=this._parseShadow(m));for(var i in m)this[i]=m[i];this.id=s.Object.__uid++},_parseShadow:function(m){var i=m.trim(),c=s.Shadow.reOffsetsAndBlur.exec(i)||[],o=i.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:o.trim(),offsetX:parseFloat(c[1],10)||0,offsetY:parseFloat(c[2],10)||0,blur:parseFloat(c[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(m){var i=40,c=40,o=s.Object.NUM_FRACTION_DIGITS,h=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-m.angle)),b=20,d=new s.Color(this.color);return m.width&&m.height&&(i=y((Math.abs(h.x)+this.blur)/m.width,o)*100+b,c=y((Math.abs(h.y)+this.blur)/m.height,o)*100+b),m.flipX&&(h.x*=-1),m.flipY&&(h.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+c+'%" height="'+(100+2*c)+'%" x="-'+i+'%" width="'+(100+2*i)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+y(this.blur?this.blur/2:0,o)+`"></feGaussianBlur>
	<feOffset dx="`+y(h.x,o)+'" dy="'+y(h.y,o)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+d.toRgb()+'" flood-opacity="'+d.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var m={},i=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(c){this[c]!==i[c]&&(m[c]=this[c])},this),m}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(x),function(){"use strict";if(u.StaticCanvas){u.warn("fabric.StaticCanvas is already defined.");return}var C=u.util.object.extend,s=u.util.getElementOffset,y=u.util.removeFromArray,m=u.util.toFixed,i=u.util.transformPoint,c=u.util.invertTransform,o=u.util.getNodeCanvas,h=u.util.createCanvasElement,b=new Error("Could not initialize `canvas` element");u.StaticCanvas=u.util.createClass(u.CommonMethods,{initialize:function(d,D){D||(D={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(d,D)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:u.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(d,D){var E=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(d),this._initOptions(D),this.interactive||this._initRetinaScaling(),D.overlayImage&&this.setOverlayImage(D.overlayImage,E),D.backgroundImage&&this.setBackgroundImage(D.backgroundImage,E),D.backgroundColor&&this.setBackgroundColor(D.backgroundColor,E),D.overlayColor&&this.setOverlayColor(D.overlayColor,E),this.calcOffset()},_isRetinaScaling:function(){return u.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?u.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var d=u.devicePixelRatio;this.__initRetinaScaling(d,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(d,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(d,D,E){D.setAttribute("width",this.width*d),D.setAttribute("height",this.height*d),E.scale(d,d)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(d,D,E){return this.__setBgOverlayImage("overlayImage",d,D,E)},setBackgroundImage:function(d,D,E){return this.__setBgOverlayImage("backgroundImage",d,D,E)},setOverlayColor:function(d,D){return this.__setBgOverlayColor("overlayColor",d,D)},setBackgroundColor:function(d,D){return this.__setBgOverlayColor("backgroundColor",d,D)},__setBgOverlayImage:function(d,D,E,w){return typeof D=="string"?u.util.loadImage(D,function(O,F){if(O){var B=new u.Image(O,w);this[d]=B,B.canvas=this}E&&E(O,F)},this,w&&w.crossOrigin):(w&&D.setOptions(w),this[d]=D,D&&(D.canvas=this),E&&E(D,!1)),this},__setBgOverlayColor:function(d,D,E){return this[d]=D,this._initGradient(D,d),this._initPattern(D,d,E),this},_createCanvasElement:function(){var d=h();if(!d||(d.style||(d.style={}),typeof d.getContext>"u"))throw b;return d},_initOptions:function(d){var D=this.lowerCanvasEl;this._setOptions(d),this.width=this.width||parseInt(D.width,10)||0,this.height=this.height||parseInt(D.height,10)||0,this.lowerCanvasEl.style&&(D.width=this.width,D.height=this.height,D.style.width=this.width+"px",D.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(d){d&&d.getContext?this.lowerCanvasEl=d:this.lowerCanvasEl=u.util.getById(d)||this._createCanvasElement(),u.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(d,D){return this.setDimensions({width:d},D)},setHeight:function(d,D){return this.setDimensions({height:d},D)},setDimensions:function(d,D){var E;D=D||{};for(var w in d)E=d[w],D.cssOnly||(this._setBackstoreDimension(w,d[w]),E+="px",this.hasLostContext=!0),D.backstoreOnly||this._setCssDimension(w,E);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),D.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(d,D){return this.lowerCanvasEl[d]=D,this.upperCanvasEl&&(this.upperCanvasEl[d]=D),this.cacheCanvasEl&&(this.cacheCanvasEl[d]=D),this[d]=D,this},_setCssDimension:function(d,D){return this.lowerCanvasEl.style[d]=D,this.upperCanvasEl&&(this.upperCanvasEl.style[d]=D),this.wrapperEl&&(this.wrapperEl.style[d]=D),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(d){var D=this._activeObject,E=this.backgroundImage,w=this.overlayImage,O,F,B;for(this.viewportTransform=d,F=0,B=this._objects.length;F<B;F++)O=this._objects[F],O.group||O.setCoords(!0);return D&&D.setCoords(),E&&E.setCoords(!0),w&&w.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(d,D){var E=d,w=this.viewportTransform.slice(0);d=i(d,c(this.viewportTransform)),w[0]=D,w[3]=D;var O=i(d,w);return w[4]+=E.x-O.x,w[5]+=E.y-O.y,this.setViewportTransform(w)},setZoom:function(d){return this.zoomToPoint(new u.Point(0,0),d),this},absolutePan:function(d){var D=this.viewportTransform.slice(0);return D[4]=-d.x,D[5]=-d.y,this.setViewportTransform(D)},relativePan:function(d){return this.absolutePan(new u.Point(-d.x-this.viewportTransform[4],-d.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(d){this.stateful&&d.setupState(),d._set("canvas",this),d.setCoords(),this.fire("object:added",{target:d}),d.fire("added")},_onObjectRemoved:function(d){this.fire("object:removed",{target:d}),d.fire("removed"),delete d.canvas},clearContext:function(d){return d.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var d=this.contextContainer;return this.renderCanvas(d,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=u.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var d={},D=this.width,E=this.height,w=c(this.viewportTransform);return d.tl=i({x:0,y:0},w),d.br=i({x:D,y:E},w),d.tr=new u.Point(d.br.x,d.tl.y),d.bl=new u.Point(d.tl.x,d.br.y),this.vptCoords=d,d},cancelRequestedRender:function(){this.isRendering&&(u.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(d,D){var E=this.viewportTransform,w=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(d),u.util.setImageSmoothing(d,this.imageSmoothingEnabled),this.fire("before:render",{ctx:d}),this._renderBackground(d),d.save(),d.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._renderObjects(d,D),d.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(d),w&&(w.canvas=this,w.shouldCache(),w._transformDone=!0,w.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(d)),this._renderOverlay(d),this.controlsAboveOverlay&&this.interactive&&this.drawControls(d),this.fire("after:render",{ctx:d})},drawClipPathOnCanvas:function(d){var D=this.viewportTransform,E=this.clipPath;d.save(),d.transform(D[0],D[1],D[2],D[3],D[4],D[5]),d.globalCompositeOperation="destination-in",E.transform(d),d.scale(1/E.zoomX,1/E.zoomY),d.drawImage(E._cacheCanvas,-E.cacheTranslationX,-E.cacheTranslationY),d.restore()},_renderObjects:function(d,D){var E,w;for(E=0,w=D.length;E<w;++E)D[E]&&D[E].render(d)},_renderBackgroundOrOverlay:function(d,D){var E=this[D+"Color"],w=this[D+"Image"],O=this.viewportTransform,F=this[D+"Vpt"];if(!(!E&&!w)){if(E){d.save(),d.beginPath(),d.moveTo(0,0),d.lineTo(this.width,0),d.lineTo(this.width,this.height),d.lineTo(0,this.height),d.closePath(),d.fillStyle=E.toLive?E.toLive(d,this):E,F&&d.transform(O[0],O[1],O[2],O[3],O[4],O[5]),d.transform(1,0,0,1,E.offsetX||0,E.offsetY||0);var B=E.gradientTransform||E.patternTransform;B&&d.transform(B[0],B[1],B[2],B[3],B[4],B[5]),d.fill(),d.restore()}w&&(d.save(),F&&d.transform(O[0],O[1],O[2],O[3],O[4],O[5]),w.render(d),d.restore())}},_renderBackground:function(d){this._renderBackgroundOrOverlay(d,"background")},_renderOverlay:function(d){this._renderBackgroundOrOverlay(d,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(d){return this._centerObject(d,new u.Point(this.getCenter().left,d.getCenterPoint().y))},centerObjectV:function(d){return this._centerObject(d,new u.Point(d.getCenterPoint().x,this.getCenter().top))},centerObject:function(d){var D=this.getCenter();return this._centerObject(d,new u.Point(D.left,D.top))},viewportCenterObject:function(d){var D=this.getVpCenter();return this._centerObject(d,D)},viewportCenterObjectH:function(d){var D=this.getVpCenter();return this._centerObject(d,new u.Point(D.x,d.getCenterPoint().y)),this},viewportCenterObjectV:function(d){var D=this.getVpCenter();return this._centerObject(d,new u.Point(d.getCenterPoint().x,D.y))},getVpCenter:function(){var d=this.getCenter(),D=c(this.viewportTransform);return i({x:d.left,y:d.top},D)},_centerObject:function(d,D){return d.setPositionByOrigin(D,"center","center"),d.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(d){return this.toDatalessObject(d)},toObject:function(d){return this._toObjectMethod("toObject",d)},toDatalessObject:function(d){return this._toObjectMethod("toDatalessObject",d)},_toObjectMethod:function(d,D){var E=this.clipPath,w={version:u.version,objects:this._toObjects(d,D)};return E&&!E.excludeFromExport&&(w.clipPath=this._toObject(this.clipPath,d,D)),C(w,this.__serializeBgOverlay(d,D)),u.util.populateWithProperties(this,w,D),w},_toObjects:function(d,D){return this._objects.filter(function(E){return!E.excludeFromExport}).map(function(E){return this._toObject(E,d,D)},this)},_toObject:function(d,D,E){var w;this.includeDefaultValues||(w=d.includeDefaultValues,d.includeDefaultValues=!1);var O=d[D](E);return this.includeDefaultValues||(d.includeDefaultValues=w),O},__serializeBgOverlay:function(d,D){var E={},w=this.backgroundImage,O=this.overlayImage,F=this.backgroundColor,B=this.overlayColor;return F&&F.toObject?F.excludeFromExport||(E.background=F.toObject(D)):F&&(E.background=F),B&&B.toObject?B.excludeFromExport||(E.overlay=B.toObject(D)):B&&(E.overlay=B),w&&!w.excludeFromExport&&(E.backgroundImage=this._toObject(w,d,D)),O&&!O.excludeFromExport&&(E.overlayImage=this._toObject(O,d,D)),E},svgViewportTransformation:!0,toSVG:function(d,D){d||(d={}),d.reviver=D;var E=[];return this._setSVGPreamble(E,d),this._setSVGHeader(E,d),this.clipPath&&E.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(E,"background"),this._setSVGBgOverlayImage(E,"backgroundImage",D),this._setSVGObjects(E,D),this.clipPath&&E.push(`</g>
`),this._setSVGBgOverlayColor(E,"overlay"),this._setSVGBgOverlayImage(E,"overlayImage",D),E.push("</svg>"),E.join("")},_setSVGPreamble:function(d,D){D.suppressPreamble||d.push('<?xml version="1.0" encoding="',D.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(d,D){var E=D.width||this.width,w=D.height||this.height,O,F='viewBox="0 0 '+this.width+" "+this.height+'" ',B=u.Object.NUM_FRACTION_DIGITS;D.viewBox?F='viewBox="'+D.viewBox.x+" "+D.viewBox.y+" "+D.viewBox.width+" "+D.viewBox.height+'" ':this.svgViewportTransformation&&(O=this.viewportTransform,F='viewBox="'+m(-O[4]/O[0],B)+" "+m(-O[5]/O[3],B)+" "+m(this.width/O[0],B)+" "+m(this.height/O[3],B)+'" '),d.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',E,'" ','height="',w,'" ',F,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",u.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(D),`</defs>
`)},createSVGClipPathMarkup:function(d){var D=this.clipPath;return D?(D.clipPathId="CLIPPATH_"+u.Object.__uid++,'<clipPath id="'+D.clipPathId+`" >
`+this.clipPath.toClipPathSVG(d.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var d=this,D=["background","overlay"].map(function(E){var w=d[E+"Color"];if(w&&w.toLive){var O=d[E+"Vpt"],F=d.viewportTransform,B={width:d.width/(O?F[0]:1),height:d.height/(O?F[3]:1)};return w.toSVG(B,{additionalTransform:O?u.util.matrixToSVG(F):""})}});return D.join("")},createSVGFontFacesMarkup:function(){var d="",D={},E,w,O,F,B,V,H,Y,se,ne=u.fontPaths,be=[];for(this._objects.forEach(function Ce(W){be.push(W),W._objects&&W._objects.forEach(Ce)}),Y=0,se=be.length;Y<se;Y++)if(E=be[Y],w=E.fontFamily,!(E.type.indexOf("text")===-1||D[w]||!ne[w])&&(D[w]=!0,!!E.styles)){O=E.styles;for(B in O){F=O[B];for(H in F)V=F[H],w=V.fontFamily,!D[w]&&ne[w]&&(D[w]=!0)}}for(var K in D)d+=[`		@font-face {
`,"			font-family: '",K,`';
`,"			src: url('",ne[K],`');
`,`		}
`].join("");return d&&(d=['	<style type="text/css">',`<![CDATA[
`,d,"]]>",`</style>
`].join("")),d},_setSVGObjects:function(d,D){var E,w,O,F=this._objects;for(w=0,O=F.length;w<O;w++)E=F[w],!E.excludeFromExport&&this._setSVGObject(d,E,D)},_setSVGObject:function(d,D,E){d.push(D.toSVG(E))},_setSVGBgOverlayImage:function(d,D,E){this[D]&&!this[D].excludeFromExport&&this[D].toSVG&&d.push(this[D].toSVG(E))},_setSVGBgOverlayColor:function(d,D){var E=this[D+"Color"],w=this.viewportTransform,O=this.width,F=this.height;if(E)if(E.toLive){var B=E.repeat,V=u.util.invertTransform(w),H=this[D+"Vpt"],Y=H?u.util.matrixToSVG(V):"";d.push('<rect transform="'+Y+" translate(",O/2,",",F/2,')"',' x="',E.offsetX-O/2,'" y="',E.offsetY-F/2,'" ','width="',B==="repeat-y"||B==="no-repeat"?E.source.width:O,'" height="',B==="repeat-x"||B==="no-repeat"?E.source.height:F,'" fill="url(#SVGID_'+E.id+')"',`></rect>
`)}else d.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',E,'"',`></rect>
`)},sendToBack:function(d){if(!d)return this;var D=this._activeObject,E,w,O;if(d===D&&d.type==="activeSelection")for(O=D._objects,E=O.length;E--;)w=O[E],y(this._objects,w),this._objects.unshift(w);else y(this._objects,d),this._objects.unshift(d);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(d){if(!d)return this;var D=this._activeObject,E,w,O;if(d===D&&d.type==="activeSelection")for(O=D._objects,E=0;E<O.length;E++)w=O[E],y(this._objects,w),this._objects.push(w);else y(this._objects,d),this._objects.push(d);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(d,D){if(!d)return this;var E=this._activeObject,w,O,F,B,V,H=0;if(d===E&&d.type==="activeSelection")for(V=E._objects,w=0;w<V.length;w++)O=V[w],F=this._objects.indexOf(O),F>0+H&&(B=F-1,y(this._objects,O),this._objects.splice(B,0,O)),H++;else F=this._objects.indexOf(d),F!==0&&(B=this._findNewLowerIndex(d,F,D),y(this._objects,d),this._objects.splice(B,0,d));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(d,D,E){var w,O;if(E)for(w=D,O=D-1;O>=0;--O){var F=d.intersectsWithObject(this._objects[O])||d.isContainedWithinObject(this._objects[O])||this._objects[O].isContainedWithinObject(d);if(F){w=O;break}}else w=D-1;return w},bringForward:function(d,D){if(!d)return this;var E=this._activeObject,w,O,F,B,V,H=0;if(d===E&&d.type==="activeSelection")for(V=E._objects,w=V.length;w--;)O=V[w],F=this._objects.indexOf(O),F<this._objects.length-1-H&&(B=F+1,y(this._objects,O),this._objects.splice(B,0,O)),H++;else F=this._objects.indexOf(d),F!==this._objects.length-1&&(B=this._findNewUpperIndex(d,F,D),y(this._objects,d),this._objects.splice(B,0,d));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(d,D,E){var w,O,F;if(E)for(w=D,O=D+1,F=this._objects.length;O<F;++O){var B=d.intersectsWithObject(this._objects[O])||d.isContainedWithinObject(this._objects[O])||this._objects[O].isContainedWithinObject(d);if(B){w=O;break}}else w=D+1;return w},moveTo:function(d,D){return y(this._objects,d),this._objects.splice(D,0,d),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(u.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(d){d.dispose&&d.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),u.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),C(u.StaticCanvas.prototype,u.Observable),C(u.StaticCanvas.prototype,u.Collection),C(u.StaticCanvas.prototype,u.DataURLExporter),C(u.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(d){var D=h();if(!D||!D.getContext)return null;var E=D.getContext("2d");if(!E)return null;switch(d){case"setLineDash":return typeof E.setLineDash<"u";default:return null}}}),u.StaticCanvas.prototype.toJSON=u.StaticCanvas.prototype.toObject,u.isLikelyNode&&(u.StaticCanvas.prototype.createPNGStream=function(){var d=o(this.lowerCanvasEl);return d&&d.createPNGStream()},u.StaticCanvas.prototype.createJPEGStream=function(d){var D=o(this.lowerCanvasEl);return D&&D.createJPEGStream(d)})}(),u.BaseBrush=u.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var C=this.canvas.contextTop;C.strokeStyle=this.color,C.lineWidth=this.width,C.lineCap=this.strokeLineCap,C.miterLimit=this.strokeMiterLimit,C.lineJoin=this.strokeLineJoin,C.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(C){var s=this.canvas.viewportTransform;C.save(),C.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var C=this.canvas,s=this.shadow,y=C.contextTop,m=C.getZoom();C&&C._isRetinaScaling()&&(m*=u.devicePixelRatio),y.shadowColor=s.color,y.shadowBlur=s.blur*m,y.shadowOffsetX=s.offsetX*m,y.shadowOffsetY=s.offsetY*m}},needsFullRender:function(){var C=new u.Color(this.color);return C.getAlpha()<1||!!this.shadow},_resetShadow:function(){var C=this.canvas.contextTop;C.shadowColor="",C.shadowBlur=C.shadowOffsetX=C.shadowOffsetY=0},_isOutSideCanvas:function(C){return C.x<0||C.x>this.canvas.getWidth()||C.y<0||C.y>this.canvas.getHeight()}}),function(){u.PencilBrush=u.util.createClass(u.BaseBrush,{decimate:.4,initialize:function(C){this.canvas=C,this._points=[]},_drawSegment:function(C,s,y){var m=s.midPointFrom(y);return C.quadraticCurveTo(s.x,s.y,m.x,m.y),m},onMouseDown:function(C,s){this.canvas._isMainEvent(s.e)&&(this._prepareForDrawing(C),this._captureDrawingPath(C),this._render())},onMouseMove:function(C,s){if(this.canvas._isMainEvent(s.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(C))&&this._captureDrawingPath(C)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var y=this._points,m=y.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,y[m-2],y[m-1],!0),i.stroke(),i.restore()}},onMouseUp:function(C){return this.canvas._isMainEvent(C.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(C){var s=new u.Point(C.x,C.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(C){return this._points.length>1&&C.eq(this._points[this._points.length-1])?!1:(this._points.push(C),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(C){var s=new u.Point(C.x,C.y);return this._addPoint(s)},_render:function(){var C=this.canvas.contextTop,s,y,m=this._points[0],i=this._points[1];if(this._saveAndTransform(C),C.beginPath(),this._points.length===2&&m.x===i.x&&m.y===i.y){var c=this.width/1e3;m=new u.Point(m.x,m.y),i=new u.Point(i.x,i.y),m.x-=c,i.x+=c}for(C.moveTo(m.x,m.y),s=1,y=this._points.length;s<y;s++)this._drawSegment(C,m,i),m=this._points[s],i=this._points[s+1];C.lineTo(m.x,m.y),C.stroke(),C.restore()},convertPointsToSVGPath:function(C){var s=this.width/1e3;return u.util.getSmoothPathFromPoints(C,s)},_isEmptySVGPath:function(C){var s=u.util.joinPath(C);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(C){var s=new u.Path(C,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new u.Shadow(this.shadow)),s},decimatePoints:function(C,s){if(C.length<=2)return C;var y=this.canvas.getZoom(),m=Math.pow(s/y,2),i,c=C.length-1,o=C[0],h=[o],b;for(i=1;i<c-1;i++)b=Math.pow(o.x-C[i].x,2)+Math.pow(o.y-C[i].y,2),b>=m&&(o=C[i],h.push(o));return h.push(C[c]),h},_finalizeAndAddPath:function(){var C=this.canvas.contextTop;C.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var y=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:y}),this.canvas.add(y),this.canvas.requestRenderAll(),y.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:y})}})}(),u.CircleBrush=u.util.createClass(u.BaseBrush,{width:10,initialize:function(C){this.canvas=C,this.points=[]},drawDot:function(C){var s=this.addPoint(C),y=this.canvas.contextTop;this._saveAndTransform(y),this.dot(y,s),y.restore()},dot:function(C,s){C.fillStyle=s.fill,C.beginPath(),C.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),C.closePath(),C.fill()},onMouseDown:function(C){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(C)},_render:function(){var C=this.canvas.contextTop,s,y,m=this.points;for(this._saveAndTransform(C),s=0,y=m.length;s<y;s++)this.dot(C,m[s]);C.restore()},onMouseMove:function(C){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(C)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(C),this._render()):this.drawDot(C))},onMouseUp:function(){var C=this.canvas.renderOnAddRemove,s,y;this.canvas.renderOnAddRemove=!1;var m=[];for(s=0,y=this.points.length;s<y;s++){var i=this.points[s],c=new u.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(c.shadow=new u.Shadow(this.shadow)),m.push(c)}var o=new u.Group(m);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=C,this.canvas.requestRenderAll()},addPoint:function(C){var s=new u.Point(C.x,C.y),y=u.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,m=new u.Color(this.color).setAlpha(u.util.getRandomInt(0,100)/100).toRgba();return s.radius=y,s.fill=m,this.points.push(s),s}}),u.SprayBrush=u.util.createClass(u.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(C){this.canvas=C,this.sprayChunks=[]},onMouseDown:function(C){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(C),this.render(this.sprayChunkPoints)},onMouseMove:function(C){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(C)||(this.addSprayChunk(C),this.render(this.sprayChunkPoints))},onMouseUp:function(){var C=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],y=0,m=this.sprayChunks.length;y<m;y++)for(var i=this.sprayChunks[y],c=0,o=i.length;c<o;c++){var h=new u.Rect({width:i[c].width,height:i[c].width,left:i[c].x+1,top:i[c].y+1,originX:"center",originY:"center",fill:this.color});s.push(h)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var b=new u.Group(s);this.shadow&&b.set("shadow",new u.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:b}),this.canvas.add(b),this.canvas.fire("path:created",{path:b}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=C,this.canvas.requestRenderAll()},_getOptimizedRects:function(C){var s={},y,m,i;for(m=0,i=C.length;m<i;m++)y=C[m].left+""+C[m].top,s[y]||(s[y]=C[m]);var c=[];for(y in s)c.push(s[y]);return c},render:function(C){var s=this.canvas.contextTop,y,m;for(s.fillStyle=this.color,this._saveAndTransform(s),y=0,m=C.length;y<m;y++){var i=C[y];typeof i.opacity<"u"&&(s.globalAlpha=i.opacity),s.fillRect(i.x,i.y,i.width,i.width)}s.restore()},_render:function(){var C=this.canvas.contextTop,s,y;for(C.fillStyle=this.color,this._saveAndTransform(C),s=0,y=this.sprayChunks.length;s<y;s++)this.render(this.sprayChunks[s]);C.restore()},addSprayChunk:function(C){this.sprayChunkPoints=[];var s,y,m,i=this.width/2,c;for(c=0;c<this.density;c++){s=u.util.getRandomInt(C.x-i,C.x+i),y=u.util.getRandomInt(C.y-i,C.y+i),this.dotWidthVariance?m=u.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):m=this.dotWidth;var o=new u.Point(s,y);o.width=m,this.randomOpacity&&(o.opacity=u.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),u.PatternBrush=u.util.createClass(u.PencilBrush,{getPatternSrc:function(){var C=20,s=5,y=u.util.createCanvasElement(),m=y.getContext("2d");return y.width=y.height=C+s,m.fillStyle=this.color,m.beginPath(),m.arc(C/2,C/2,C/2,0,Math.PI*2,!1),m.closePath(),m.fill(),y},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(C){var s=this.callSuper("createPath",C),y=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new u.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-y.x,offsetY:-y.y}),s}}),function(){var C=u.util.getPointer,s=u.util.degreesToRadians,y=u.util.isTouchEvent;u.Canvas=u.util.createClass(u.StaticCanvas,{initialize:function(i,c){c||(c={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(i,c),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=u.PencilBrush&&new u.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var i=this.getActiveObjects(),c,o,h;if(i.length>0&&!this.preserveObjectStacking){o=[],h=[];for(var b=0,d=this._objects.length;b<d;b++)c=this._objects[b],i.indexOf(c)===-1?o.push(c):h.push(c);i.length>1&&(this._activeObject._objects=h),o.push.apply(o,h)}else o=this._objects;return o},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var i=this.contextContainer;return this.renderCanvas(i,this._chooseObjectsToRender()),this},renderTopLayer:function(i){i.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(i),this.contextTopDirty=!0),i.restore()},renderTop:function(){var i=this.contextTop;return this.clearContext(i),this.renderTopLayer(i),this.fire("after:render"),this},_normalizePointer:function(i,c){var o=i.calcTransformMatrix(),h=u.util.invertTransform(o),b=this.restorePointerVpt(c);return u.util.transformPoint(b,h)},isTargetTransparent:function(i,c,o){if(i.shouldCache()&&i._cacheCanvas&&i!==this._activeObject){var h=this._normalizePointer(i,{x:c,y:o}),b=Math.max(i.cacheTranslationX+h.x*i.zoomX,0),d=Math.max(i.cacheTranslationY+h.y*i.zoomY,0),O=u.util.isTransparent(i._cacheContext,Math.round(b),Math.round(d),this.targetFindTolerance);return O}var D=this.contextCache,E=i.selectionBackgroundColor,w=this.viewportTransform;i.selectionBackgroundColor="",this.clearContext(D),D.save(),D.transform(w[0],w[1],w[2],w[3],w[4],w[5]),i.render(D),D.restore(),i.selectionBackgroundColor=E;var O=u.util.isTransparent(D,c,o,this.targetFindTolerance);return O},_isSelectionKeyPressed:function(i){var c=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?c=!!this.selectionKey.find(function(o){return i[o]===!0}):c=i[this.selectionKey],c},_shouldClearSelection:function(i,c){var o=this.getActiveObjects(),h=this._activeObject;return!c||c&&h&&o.length>1&&o.indexOf(c)===-1&&h!==c&&!this._isSelectionKeyPressed(i)||c&&!c.evented||c&&!c.selectable&&h&&h!==c},_shouldCenterTransform:function(i,c,o){if(i){var h;return c==="scale"||c==="scaleX"||c==="scaleY"||c==="resizing"?h=this.centeredScaling||i.centeredScaling:c==="rotate"&&(h=this.centeredRotation||i.centeredRotation),h?!o:o}},_getOriginFromCorner:function(i,c){var o={x:i.originX,y:i.originY};return c==="ml"||c==="tl"||c==="bl"?o.x="right":(c==="mr"||c==="tr"||c==="br")&&(o.x="left"),c==="tl"||c==="mt"||c==="tr"?o.y="bottom":(c==="bl"||c==="mb"||c==="br")&&(o.y="top"),o},_getActionFromCorner:function(i,c,o,h){if(!c||!i)return"drag";var b=h.controls[c];return b.getActionName(o,b,h)},_setupCurrentTransform:function(i,c,o){if(c){var h=this.getPointer(i),b=c.__corner,d=c.controls[b],D=o&&b?d.getActionHandler(i,c,d):u.controlsUtils.dragHandler,E=this._getActionFromCorner(o,b,i,c),w=this._getOriginFromCorner(c,b),O=i[this.centeredKey],F={target:c,action:E,actionHandler:D,corner:b,scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,offsetX:h.x-c.left,offsetY:h.y-c.top,originX:w.x,originY:w.y,ex:h.x,ey:h.y,lastX:h.x,lastY:h.y,theta:s(c.angle),width:c.width*c.scaleX,shiftKey:i.shiftKey,altKey:O,original:u.util.saveObjectTransform(c)};this._shouldCenterTransform(c,E,O)&&(F.originX="center",F.originY="center"),F.original.originX=w.x,F.original.originY=w.y,this._currentTransform=F,this._beforeTransform(i)}},setCursor:function(i){this.upperCanvasEl.style.cursor=i},_drawSelection:function(i){var c=this._groupSelector,o=new u.Point(c.ex,c.ey),h=u.util.transformPoint(o,this.viewportTransform),b=new u.Point(c.ex+c.left,c.ey+c.top),d=u.util.transformPoint(b,this.viewportTransform),D=Math.min(h.x,d.x),E=Math.min(h.y,d.y),w=Math.max(h.x,d.x),O=Math.max(h.y,d.y),F=this.selectionLineWidth/2;this.selectionColor&&(i.fillStyle=this.selectionColor,i.fillRect(D,E,w-D,O-E)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(i.lineWidth=this.selectionLineWidth,i.strokeStyle=this.selectionBorderColor,D+=F,E+=F,w-=F,O-=F,u.Object.prototype._setLineDash.call(this,i,this.selectionDashArray),i.strokeRect(D,E,w-D,O-E))},findTarget:function(i,c){if(!this.skipTargetFind){var o=!0,h=this.getPointer(i,o),b=this._activeObject,d=this.getActiveObjects(),D,E,w=y(i),O=d.length>1&&!c||d.length===1;if(this.targets=[],O&&b._findTargetCorner(h,w)||d.length>1&&!c&&b===this._searchPossibleTargets([b],h))return b;if(d.length===1&&b===this._searchPossibleTargets([b],h))if(this.preserveObjectStacking)D=b,E=this.targets,this.targets=[];else return b;var F=this._searchPossibleTargets(this._objects,h);return i[this.altSelectionKey]&&F&&D&&F!==D&&(F=D,this.targets=E),F}},_checkTarget:function(i,c,o){if(c&&c.visible&&c.evented&&c.containsPoint(i))if((this.perPixelTargetFind||c.perPixelTargetFind)&&!c.isEditing){var h=this.isTargetTransparent(c,o.x,o.y);if(!h)return!0}else return!0},_searchPossibleTargets:function(i,c){for(var o,h=i.length,b;h--;){var d=i[h],D=d.group?this._normalizePointer(d.group,c):c;if(this._checkTarget(D,d,c)){o=i[h],o.subTargetCheck&&o instanceof u.Group&&(b=this._searchPossibleTargets(o._objects,c),b&&this.targets.push(b));break}}return o},restorePointerVpt:function(i){return u.util.transformPoint(i,u.util.invertTransform(this.viewportTransform))},getPointer:function(i,c){if(this._absolutePointer&&!c)return this._absolutePointer;if(this._pointer&&c)return this._pointer;var o=C(i),h=this.upperCanvasEl,b=h.getBoundingClientRect(),d=b.width||0,D=b.height||0,E;(!d||!D)&&("top"in b&&"bottom"in b&&(D=Math.abs(b.top-b.bottom)),"right"in b&&"left"in b&&(d=Math.abs(b.right-b.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,c||(o=this.restorePointerVpt(o));var w=this.getRetinaScaling();return w!==1&&(o.x/=w,o.y/=w),d===0||D===0?E={width:1,height:1}:E={width:h.width/d,height:h.height/D},{x:o.x*E.width,y:o.y*E.height}},_createUpperCanvas:function(){var i=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),c=this.lowerCanvasEl,o=this.upperCanvasEl;o?o.className="":(o=this._createCanvasElement(),this.upperCanvasEl=o),u.util.addClass(o,"upper-canvas "+i),this.wrapperEl.appendChild(o),this._copyCanvasStyle(c,o),this._applyCanvasStyle(o),this.contextTop=o.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=u.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),u.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),u.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(i){var c=this.width||i.width,o=this.height||i.height;u.util.setStyle(i,{position:"absolute",width:c+"px",height:o+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),i.width=c,i.height=o,u.util.makeElementUnselectable(i)},_copyCanvasStyle:function(i,c){c.style.cssText=i.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var i=this._activeObject;return i?i.type==="activeSelection"&&i._objects?i._objects.slice(0):[i]:[]},_onObjectRemoved:function(i){i===this._activeObject&&(this.fire("before:selection:cleared",{target:i}),this._discardActiveObject(),this.fire("selection:cleared",{target:i}),i.fire("deselected")),i===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",i)},_fireSelectionEvents:function(i,c){var o=!1,h=this.getActiveObjects(),b=[],d=[];i.forEach(function(D){h.indexOf(D)===-1&&(o=!0,D.fire("deselected",{e:c,target:D}),d.push(D))}),h.forEach(function(D){i.indexOf(D)===-1&&(o=!0,D.fire("selected",{e:c,target:D}),b.push(D))}),i.length>0&&h.length>0?o&&this.fire("selection:updated",{e:c,selected:b,deselected:d,updated:b[0]||d[0],target:this._activeObject}):h.length>0?this.fire("selection:created",{e:c,selected:b,target:this._activeObject}):i.length>0&&this.fire("selection:cleared",{e:c,deselected:d})},setActiveObject:function(i,c){var o=this.getActiveObjects();return this._setActiveObject(i,c),this._fireSelectionEvents(o,c),this},_setActiveObject:function(i,c){return this._activeObject===i||!this._discardActiveObject(c,i)||i.onSelect({e:c})?!1:(this._activeObject=i,!0)},_discardActiveObject:function(i,c){var o=this._activeObject;if(o){if(o.onDeselect({e:i,object:c}))return!1;this._activeObject=null}return!0},discardActiveObject:function(i){var c=this.getActiveObjects(),o=this.getActiveObject();return c.length&&this.fire("before:selection:cleared",{target:o,e:i}),this._discardActiveObject(i),this._fireSelectionEvents(c,i),this},dispose:function(){var i=this.wrapperEl;return this.removeListeners(),i.removeChild(this.upperCanvasEl),i.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(c){u.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this)),i.parentNode&&i.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,u.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(i){var c=this._activeObject;c&&c._renderControls(i)},_toObject:function(i,c,o){var h=this._realizeGroupTransformOnObject(i),b=this.callSuper("_toObject",i,c,o);return this._unwindGroupTransformOnObject(i,h),b},_realizeGroupTransformOnObject:function(i){if(i.group&&i.group.type==="activeSelection"&&this._activeObject===i.group){var c=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],o={};return c.forEach(function(h){o[h]=i[h]}),u.util.addTransformToObject(i,this._activeObject.calcOwnMatrix()),o}else return null},_unwindGroupTransformOnObject:function(i,c){c&&i.set(c)},_setSVGObject:function(i,c,o){var h=this._realizeGroupTransformOnObject(c);this.callSuper("_setSVGObject",i,c,o),this._unwindGroupTransformOnObject(c,h)},setViewportTransform:function(i){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),u.StaticCanvas.prototype.setViewportTransform.call(this,i)}});for(var m in u.StaticCanvas)m!=="prototype"&&(u.Canvas[m]=u.StaticCanvas[m])}(),function(){var C=u.util.addListener,s=u.util.removeListener,y=3,m=2,i=1,c={passive:!1};function o(h,b){return h.button&&h.button===b-1}u.util.object.extend(u.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(C,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(h,b){var d=this.upperCanvasEl,D=this._getEventPrefix();h(u.window,"resize",this._onResize),h(d,D+"down",this._onMouseDown),h(d,D+"move",this._onMouseMove,c),h(d,D+"out",this._onMouseOut),h(d,D+"enter",this._onMouseEnter),h(d,"wheel",this._onMouseWheel),h(d,"contextmenu",this._onContextMenu),h(d,"dblclick",this._onDoubleClick),h(d,"dragover",this._onDragOver),h(d,"dragenter",this._onDragEnter),h(d,"dragleave",this._onDragLeave),h(d,"drop",this._onDrop),this.enablePointerEvents||h(d,"touchstart",this._onTouchStart,c),typeof eventjs<"u"&&b in eventjs&&(eventjs[b](d,"gesture",this._onGesture),eventjs[b](d,"drag",this._onDrag),eventjs[b](d,"orientation",this._onOrientationChange),eventjs[b](d,"shake",this._onShake),eventjs[b](d,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var h=this._getEventPrefix();s(u.document,h+"up",this._onMouseUp),s(u.document,"touchend",this._onTouchEnd,c),s(u.document,h+"move",this._onMouseMove,c),s(u.document,"touchmove",this._onMouseMove,c)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(h,b){this.__onTransformGesture&&this.__onTransformGesture(h,b)},_onDrag:function(h,b){this.__onDrag&&this.__onDrag(h,b)},_onMouseWheel:function(h){this.__onMouseWheel(h)},_onMouseOut:function(h){var b=this._hoveredTarget;this.fire("mouse:out",{target:b,e:h}),this._hoveredTarget=null,b&&b.fire("mouseout",{e:h});var d=this;this._hoveredTargets.forEach(function(D){d.fire("mouse:out",{target:b,e:h}),D&&b.fire("mouseout",{e:h})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(D){D.isEditing&&D.hiddenTextarea.focus()})},_onMouseEnter:function(h){!this._currentTransform&&!this.findTarget(h)&&(this.fire("mouse:over",{target:null,e:h}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(h,b){this.__onOrientationChange&&this.__onOrientationChange(h,b)},_onShake:function(h,b){this.__onShake&&this.__onShake(h,b)},_onLongPress:function(h,b){this.__onLongPress&&this.__onLongPress(h,b)},_onDragOver:function(h){h.preventDefault();var b=this._simpleEventHandler("dragover",h);this._fireEnterLeaveEvents(b,h)},_onContextMenu:function(h){return this.stopContextMenu&&(h.stopPropagation(),h.preventDefault()),!1},_onDoubleClick:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"dblclick"),this._resetTransformEventData(h)},getPointerId:function(h){var b=h.changedTouches;return b?b[0]&&b[0].identifier:this.enablePointerEvents?h.pointerId:-1},_isMainEvent:function(h){return h.isPrimary===!0?!0:h.isPrimary===!1?!1:h.type==="touchend"&&h.touches.length===0?!0:h.changedTouches?h.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(h){h.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(h)),this.__onMouseDown(h),this._resetTransformEventData();var b=this.upperCanvasEl,d=this._getEventPrefix();C(u.document,"touchend",this._onTouchEnd,c),C(u.document,"touchmove",this._onMouseMove,c),s(b,d+"down",this._onMouseDown)},_onMouseDown:function(h){this.__onMouseDown(h),this._resetTransformEventData();var b=this.upperCanvasEl,d=this._getEventPrefix();s(b,d+"move",this._onMouseMove,c),C(u.document,d+"up",this._onMouseUp),C(u.document,d+"move",this._onMouseMove,c)},_onTouchEnd:function(h){if(!(h.touches.length>0)){this.__onMouseUp(h),this._resetTransformEventData(),this.mainTouchId=null;var b=this._getEventPrefix();s(u.document,"touchend",this._onTouchEnd,c),s(u.document,"touchmove",this._onMouseMove,c);var d=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){C(d.upperCanvasEl,b+"down",d._onMouseDown),d._willAddMouseDown=0},400)}},_onMouseUp:function(h){this.__onMouseUp(h),this._resetTransformEventData();var b=this.upperCanvasEl,d=this._getEventPrefix();this._isMainEvent(h)&&(s(u.document,d+"up",this._onMouseUp),s(u.document,d+"move",this._onMouseMove,c),C(b,d+"move",this._onMouseMove,c))},_onMouseMove:function(h){!this.allowTouchScrolling&&h.preventDefault&&h.preventDefault(),this.__onMouseMove(h)},_onResize:function(){this.calcOffset()},_shouldRender:function(h){var b=this._activeObject;return!!b!=!!h||b&&h&&b!==h?!0:(b&&b.isEditing,!1)},__onMouseUp:function(h){var b,d=this._currentTransform,D=this._groupSelector,E=!1,w=!D||D.left===0&&D.top===0;if(this._cacheTransformEventData(h),b=this._target,this._handleEvent(h,"up:before"),o(h,y)){this.fireRightClick&&this._handleEvent(h,"up",y,w);return}if(o(h,m)){this.fireMiddleClick&&this._handleEvent(h,"up",m,w),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(h);return}if(this._isMainEvent(h)){if(d&&(this._finalizeCurrentTransform(h),E=d.actionPerformed),!w){var O=b===this._activeObject;this._maybeGroupObjects(h),E||(E=this._shouldRender(b)||!O&&b===this._activeObject)}if(b){if(b.selectable&&b!==this._activeObject&&b.activeOn==="up")this.setActiveObject(b,h),E=!0;else{var F=b._findTargetCorner(this.getPointer(h,!0),u.util.isTouchEvent(h)),B=b.controls[F],V=B&&B.getMouseUpHandler(h,b,B);if(V){var H=this.getPointer(h);V(h,d,H.x,H.y)}}b.isMoving=!1}this._setCursorFromEvent(h,b),this._handleEvent(h,"up",i,w),this._groupSelector=null,this._currentTransform=null,b&&(b.__corner=0),E?this.requestRenderAll():w||this.renderTop()}},_simpleEventHandler:function(h,b){var d=this.findTarget(b),D=this.targets,E={e:b,target:d,subTargets:D};if(this.fire(h,E),d&&d.fire(h,E),!D)return d;for(var w=0;w<D.length;w++)D[w].fire(h,E);return d},_handleEvent:function(h,b,d,D){var E=this._target,w=this.targets||[],O={e:h,target:E,subTargets:w,button:d||i,isClick:D||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};b==="up"&&(O.currentTarget=this.findTarget(h),O.currentSubTargets=this.targets),this.fire("mouse:"+b,O),E&&E.fire("mouse"+b,O);for(var F=0;F<w.length;F++)w[F].fire("mouse"+b,O)},_finalizeCurrentTransform:function(h){var b=this._currentTransform,d=b.target,D,E={e:h,target:d,transform:b,action:b.action};d._scaling&&(d._scaling=!1),d.setCoords(),(b.actionPerformed||this.stateful&&d.hasStateChanged())&&(b.actionPerformed&&(D=this._addEventOptions(E,b),this._fire(D,E)),this._fire("modified",E))},_addEventOptions:function(h,b){var d,D;switch(b.action){case"scaleX":d="scaled",D="x";break;case"scaleY":d="scaled",D="y";break;case"skewX":d="skewed",D="x";break;case"skewY":d="skewed",D="y";break;case"scale":d="scaled",D="equally";break;case"rotate":d="rotated";break;case"drag":d="moved";break}return h.by=D,d},_onMouseDownInDrawingMode:function(h){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(h).requestRenderAll();var b=this.getPointer(h);this.freeDrawingBrush.onMouseDown(b,{e:h,pointer:b}),this._handleEvent(h,"down")},_onMouseMoveInDrawingMode:function(h){if(this._isCurrentlyDrawing){var b=this.getPointer(h);this.freeDrawingBrush.onMouseMove(b,{e:h,pointer:b})}this.setCursor(this.freeDrawingCursor),this._handleEvent(h,"move")},_onMouseUpInDrawingMode:function(h){var b=this.getPointer(h);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:h,pointer:b}),this._handleEvent(h,"up")},__onMouseDown:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"down:before");var b=this._target;if(o(h,y)){this.fireRightClick&&this._handleEvent(h,"down",y);return}if(o(h,m)){this.fireMiddleClick&&this._handleEvent(h,"down",m);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(h);return}if(this._isMainEvent(h)&&!this._currentTransform){var d=this._pointer;this._previousPointer=d;var D=this._shouldRender(b),E=this._shouldGroup(h,b);if(this._shouldClearSelection(h,b)?this.discardActiveObject(h):E&&(this._handleGrouping(h,b),b=this._activeObject),this.selection&&(!b||!b.selectable&&!b.isEditing&&b!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),b){var w=b===this._activeObject;b.selectable&&b.activeOn==="down"&&this.setActiveObject(b,h);var O=b._findTargetCorner(this.getPointer(h,!0),u.util.isTouchEvent(h));if(b.__corner=O,b===this._activeObject&&(O||!E)){this._setupCurrentTransform(h,b,w);var F=b.controls[O],d=this.getPointer(h),B=F&&F.getMouseDownHandler(h,b,F);B&&B(h,this._currentTransform,d.x,d.y)}}this._handleEvent(h,"down"),(D||E)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(h){this._resetTransformEventData(),this._pointer=this.getPointer(h,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(h)||null},_beforeTransform:function(h){var b=this._currentTransform;this.stateful&&b.target.saveState(),this.fire("before:transform",{e:h,transform:b})},__onMouseMove:function(h){this._handleEvent(h,"move:before"),this._cacheTransformEventData(h);var b,d;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(h);return}if(this._isMainEvent(h)){var D=this._groupSelector;D?(d=this._absolutePointer,D.left=d.x-D.ex,D.top=d.y-D.ey,this.renderTop()):this._currentTransform?this._transformObject(h):(b=this.findTarget(h)||null,this._setCursorFromEvent(h,b),this._fireOverOutEvents(b,h)),this._handleEvent(h,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(h,b){var d=this._hoveredTarget,D=this._hoveredTargets,E=this.targets,w=Math.max(D.length,E.length);this.fireSyntheticInOutEvents(h,b,{oldTarget:d,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var O=0;O<w;O++)this.fireSyntheticInOutEvents(E[O],b,{oldTarget:D[O],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=h,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(h,b){var d=this._draggedoverTarget,D=this._hoveredTargets,E=this.targets,w=Math.max(D.length,E.length);this.fireSyntheticInOutEvents(h,b,{oldTarget:d,evtOut:"dragleave",evtIn:"dragenter"});for(var O=0;O<w;O++)this.fireSyntheticInOutEvents(E[O],b,{oldTarget:D[O],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=h},fireSyntheticInOutEvents:function(h,b,d){var D,E,w=d.oldTarget,O,F,B=w!==h,V=d.canvasEvtIn,H=d.canvasEvtOut;B&&(D={e:b,target:h,previousTarget:w},E={e:b,target:w,nextTarget:h}),F=h&&B,O=w&&B,O&&(H&&this.fire(H,E),w.fire(d.evtOut,E)),F&&(V&&this.fire(V,D),h.fire(d.evtIn,D))},__onMouseWheel:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"wheel"),this._resetTransformEventData()},_transformObject:function(h){var b=this.getPointer(h),d=this._currentTransform;d.reset=!1,d.shiftKey=h.shiftKey,d.altKey=h[this.centeredKey],this._performTransformAction(h,d,b),d.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(h,b,d){var D=d.x,E=d.y,w=b.action,O=!1,F=b.actionHandler;F&&(O=F(h,b,D,E)),w==="drag"&&O&&(b.target.isMoving=!0,this.setCursor(b.target.moveCursor||this.moveCursor)),b.actionPerformed=b.actionPerformed||O},_fire:u.controlsUtils.fireEvent,_setCursorFromEvent:function(h,b){if(!b)return this.setCursor(this.defaultCursor),!1;var d=b.hoverCursor||this.hoverCursor,D=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,E=(!D||!D.contains(b))&&b._findTargetCorner(this.getPointer(h,!0));E?this.setCursor(this.getCornerCursor(E,b,h)):(b.subTargetCheck&&this.targets.concat().reverse().map(function(w){d=w.hoverCursor||d}),this.setCursor(d))},getCornerCursor:function(h,b,d){var D=b.controls[h];return D.cursorStyleHandler(d,D,b)}})}(),function(){var C=Math.min,s=Math.max;u.util.object.extend(u.Canvas.prototype,{_shouldGroup:function(y,m){var i=this._activeObject;return i&&this._isSelectionKeyPressed(y)&&m&&m.selectable&&this.selection&&(i!==m||i.type==="activeSelection")&&!m.onSelect({e:y})},_handleGrouping:function(y,m){var i=this._activeObject;i.__corner||m===i&&(m=this.findTarget(y,!0),!m||!m.selectable)||(i&&i.type==="activeSelection"?this._updateActiveSelection(m,y):this._createActiveSelection(m,y))},_updateActiveSelection:function(y,m){var i=this._activeObject,c=i._objects.slice(0);i.contains(y)?(i.removeWithUpdate(y),this._hoveredTarget=y,this._hoveredTargets=this.targets.concat(),i.size()===1&&this._setActiveObject(i.item(0),m)):(i.addWithUpdate(y),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(c,m)},_createActiveSelection:function(y,m){var i=this.getActiveObjects(),c=this._createGroup(y);this._hoveredTarget=c,this._setActiveObject(c,m),this._fireSelectionEvents(i,m)},_createGroup:function(y){var m=this._objects,i=m.indexOf(this._activeObject)<m.indexOf(y),c=i?[this._activeObject,y]:[y,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new u.ActiveSelection(c,{canvas:this})},_groupSelectedObjects:function(y){var m=this._collectObjects(y),i;m.length===1?this.setActiveObject(m[0],y):m.length>1&&(i=new u.ActiveSelection(m.reverse(),{canvas:this}),this.setActiveObject(i,y))},_collectObjects:function(y){for(var m=[],i,c=this._groupSelector.ex,o=this._groupSelector.ey,h=c+this._groupSelector.left,b=o+this._groupSelector.top,d=new u.Point(C(c,h),C(o,b)),D=new u.Point(s(c,h),s(o,b)),E=!this.selectionFullyContained,w=c===h&&o===b,O=this._objects.length;O--&&(i=this._objects[O],!(!(!i||!i.selectable||!i.visible)&&(E&&i.intersectsWithRect(d,D,!0)||i.isContainedWithinRect(d,D,!0)||E&&i.containsPoint(d,null,!0)||E&&i.containsPoint(D,null,!0))&&(m.push(i),w))););return m.length>1&&(m=m.filter(function(F){return!F.onSelect({e:y})})),m},_maybeGroupObjects:function(y){this.selection&&this._groupSelector&&this._groupSelectedObjects(y),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){u.util.object.extend(u.StaticCanvas.prototype,{toDataURL:function(C){C||(C={});var s=C.format||"png",y=C.quality||1,m=(C.multiplier||1)*(C.enableRetinaScaling?this.getRetinaScaling():1),i=this.toCanvasElement(m,C);return u.util.toDataURL(i,s,y)},toCanvasElement:function(C,s){C=C||1,s=s||{};var y=(s.width||this.width)*C,m=(s.height||this.height)*C,i=this.getZoom(),c=this.width,o=this.height,h=i*C,b=this.viewportTransform,d=(b[4]-(s.left||0))*C,D=(b[5]-(s.top||0))*C,E=this.interactive,w=[h,0,0,h,d,D],O=this.enableRetinaScaling,F=u.util.createCanvasElement(),B=this.contextTop;return F.width=y,F.height=m,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=w,this.width=y,this.height=m,this.calcViewportBoundaries(),this.renderCanvas(F.getContext("2d"),this._objects),this.viewportTransform=b,this.width=c,this.height=o,this.calcViewportBoundaries(),this.interactive=E,this.enableRetinaScaling=O,this.contextTop=B,F}})}(),u.util.object.extend(u.StaticCanvas.prototype,{loadFromJSON:function(C,s,y){if(C){var m=typeof C=="string"?JSON.parse(C):u.util.object.clone(C),i=this,c=m.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete m.clipPath,this._enlivenObjects(m.objects,function(h){i.clear(),i._setBgOverlay(m,function(){c?i._enlivenObjects([c],function(b){i.clipPath=b[0],i.__setupCanvas.call(i,m,h,o,s)}):i.__setupCanvas.call(i,m,h,o,s)})},y),this}},__setupCanvas:function(C,s,y,m){var i=this;s.forEach(function(c,o){i.insertAt(c,o)}),this.renderOnAddRemove=y,delete C.objects,delete C.backgroundImage,delete C.overlayImage,delete C.background,delete C.overlay,this._setOptions(C),this.renderAll(),m&&m()},_setBgOverlay:function(C,s){var y={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!C.backgroundImage&&!C.overlayImage&&!C.background&&!C.overlay){s&&s();return}var m=function(){y.backgroundImage&&y.overlayImage&&y.backgroundColor&&y.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",C.backgroundImage,y,m),this.__setBgOverlay("overlayImage",C.overlayImage,y,m),this.__setBgOverlay("backgroundColor",C.background,y,m),this.__setBgOverlay("overlayColor",C.overlay,y,m)},__setBgOverlay:function(C,s,y,m){var i=this;if(!s){y[C]=!0,m&&m();return}C==="backgroundImage"||C==="overlayImage"?u.util.enlivenObjects([s],function(c){i[C]=c[0],y[C]=!0,m&&m()}):this["set"+u.util.string.capitalize(C,!0)](s,function(){y[C]=!0,m&&m()})},_enlivenObjects:function(C,s,y){if(!C||C.length===0){s&&s([]);return}u.util.enlivenObjects(C,function(m){s&&s(m)},null,y)},_toDataURL:function(C,s){this.clone(function(y){s(y.toDataURL(C))})},_toDataURLWithMultiplier:function(C,s,y){this.clone(function(m){y(m.toDataURLWithMultiplier(C,s))})},clone:function(C,s){var y=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(m){m.loadFromJSON(y,function(){C&&C(m)})})},cloneWithoutData:function(C){var s=u.util.createCanvasElement();s.width=this.width,s.height=this.height;var y=new u.Canvas(s);this.backgroundImage?(y.setBackgroundImage(this.backgroundImage.src,function(){y.renderAll(),C&&C(y)}),y.backgroundImageOpacity=this.backgroundImageOpacity,y.backgroundImageStretch=this.backgroundImageStretch):C&&C(y)}}),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.extend,m=s.util.object.clone,i=s.util.toFixed,c=s.util.string.capitalize,o=s.util.degreesToRadians,h=!s.isLikelyNode,b=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:h,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(d){d&&this.setOptions(d)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(d){var D=s.perfLimitSizeTotal,E=d.width,w=d.height,O=s.maxCacheSideLimit,F=s.minCacheSideLimit;if(E<=O&&w<=O&&E*w<=D)return E<F&&(d.width=F),w<F&&(d.height=F),d;var B=E/w,V=s.util.limitDimsByArea(B,D),H=s.util.capValue,Y=H(F,V.x,O),se=H(F,V.y,O);return E>Y&&(d.zoomX/=E/Y,d.width=Y,d.capped=!0),w>se&&(d.zoomY/=w/se,d.height=se,d.capped=!0),d},_getCacheCanvasDimensions:function(){var d=this.getTotalObjectScaling(),D=this._getTransformedDimensions(0,0),E=D.x*d.scaleX/this.scaleX,w=D.y*d.scaleY/this.scaleY;return{width:E+b,height:w+b,zoomX:d.scaleX,zoomY:d.scaleY,x:E,y:w}},_updateCacheCanvas:function(){var d=this.canvas;if(this.noScaleCache&&d&&d._currentTransform){var D=d._currentTransform.target,E=d._currentTransform.action;if(this===D&&E.slice&&E.slice(0,5)==="scale")return!1}var w=this._cacheCanvas,O=this._limitCacheSize(this._getCacheCanvasDimensions()),F=s.minCacheSideLimit,B=O.width,V=O.height,H,Y,se=O.zoomX,ne=O.zoomY,be=B!==this.cacheWidth||V!==this.cacheHeight,K=this.zoomX!==se||this.zoomY!==ne,Ce=be||K,W=0,Be=0,Ie=!1;if(be){var ze=this._cacheCanvas.width,te=this._cacheCanvas.height,le=B>ze||V>te,q=(B<ze*.9||V<te*.9)&&ze>F&&te>F;Ie=le||q,le&&!O.capped&&(B>F||V>F)&&(W=B*.1,Be=V*.1)}return this instanceof s.Text&&this.path&&(Ce=!0,Ie=!0,W+=this.getHeightOfLine(0)*this.zoomX,Be+=this.getHeightOfLine(0)*this.zoomY),Ce?(Ie?(w.width=Math.ceil(B+W),w.height=Math.ceil(V+Be)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,w.width,w.height)),H=O.x/2,Y=O.y/2,this.cacheTranslationX=Math.round(w.width/2-H)+H,this.cacheTranslationY=Math.round(w.height/2-Y)+Y,this.cacheWidth=B,this.cacheHeight=V,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(se,ne),this.zoomX=se,this.zoomY=ne,!0):!1},setOptions:function(d){this._setOptions(d),this._initGradient(d.fill,"fill"),this._initGradient(d.stroke,"stroke"),this._initPattern(d.fill,"fill"),this._initPattern(d.stroke,"stroke")},transform:function(d){var D=this.group&&!this.group._transformDone||this.group&&this.canvas&&d===this.canvas.contextTop,E=this.calcTransformMatrix(!D);d.transform(E[0],E[1],E[2],E[3],E[4],E[5])},toObject:function(d){var D=s.Object.NUM_FRACTION_DIGITS,E={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:i(this.left,D),top:i(this.top,D),width:i(this.width,D),height:i(this.height,D),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,D),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,D),scaleX:i(this.scaleX,D),scaleY:i(this.scaleY,D),angle:i(this.angle,D),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,D),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,D),skewY:i(this.skewY,D)};return this.clipPath&&!this.clipPath.excludeFromExport&&(E.clipPath=this.clipPath.toObject(d),E.clipPath.inverted=this.clipPath.inverted,E.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,E,d),this.includeDefaultValues||(E=this._removeDefaultValues(E)),E},toDatalessObject:function(d){return this.toObject(d)},_removeDefaultValues:function(d){var D=s.util.getKlass(d.type).prototype,E=D.stateProperties;return E.forEach(function(w){if(!(w==="left"||w==="top")){d[w]===D[w]&&delete d[w];var O=Object.prototype.toString.call(d[w])==="[object Array]"&&Object.prototype.toString.call(D[w])==="[object Array]";O&&d[w].length===0&&D[w].length===0&&delete d[w]}}),d},toString:function(){return"#<fabric."+c(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var d=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(d.scaleX),scaleY:Math.abs(d.scaleY)}},getTotalObjectScaling:function(){var d=this.getObjectScaling(),D=d.scaleX,E=d.scaleY;if(this.canvas){var w=this.canvas.getZoom(),O=this.canvas.getRetinaScaling();D*=w*O,E*=w*O}return{scaleX:D,scaleY:E}},getObjectOpacity:function(){var d=this.opacity;return this.group&&(d*=this.group.getObjectOpacity()),d},_set:function(d,D){var E=d==="scaleX"||d==="scaleY",w=this[d]!==D,O=!1;return E&&(D=this._constrainScale(D)),d==="scaleX"&&D<0?(this.flipX=!this.flipX,D*=-1):d==="scaleY"&&D<0?(this.flipY=!this.flipY,D*=-1):d==="shadow"&&D&&!(D instanceof s.Shadow)?D=new s.Shadow(D):d==="dirty"&&this.group&&this.group.set("dirty",D),this[d]=D,w&&(O=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(d)>-1?(this.dirty=!0,O&&this.group.set("dirty",!0)):O&&this.stateProperties.indexOf(d)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(d){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(d.save(),this._setupCompositeOperation(d),this.drawSelectionBackground(d),this.transform(d),this._setOpacity(d),this._setShadow(d,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(d)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(d),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),d.restore())},renderCache:function(d){d=d||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,d.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(d){var D=this.clipPath;if(d.save(),D.inverted?d.globalCompositeOperation="destination-out":d.globalCompositeOperation="destination-in",D.absolutePositioned){var E=s.util.invertTransform(this.calcTransformMatrix());d.transform(E[0],E[1],E[2],E[3],E[4],E[5])}D.transform(d),d.scale(1/D.zoomX,1/D.zoomY),d.drawImage(D._cacheCanvas,-D.cacheTranslationX,-D.cacheTranslationY),d.restore()},drawObject:function(d,D){var E=this.fill,w=this.stroke;D?(this.fill="black",this.stroke="",this._setClippingProperties(d)):this._renderBackground(d),this._render(d),this._drawClipPath(d),this.fill=E,this.stroke=w},_drawClipPath:function(d){var D=this.clipPath;D&&(D.canvas=this.canvas,D.shouldCache(),D._transformDone=!0,D.renderCache({forClipping:!0}),this.drawClipPathOnCache(d))},drawCacheOnCanvas:function(d){d.scale(1/this.zoomX,1/this.zoomY),d.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(d){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!d&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!d){var D=this.cacheWidth/this.zoomX,E=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-D/2,-E/2,D,E)}return!0}return!1},_renderBackground:function(d){if(this.backgroundColor){var D=this._getNonTransformedDimensions();d.fillStyle=this.backgroundColor,d.fillRect(-D.x/2,-D.y/2,D.x,D.y),this._removeShadow(d)}},_setOpacity:function(d){this.group&&!this.group._transformDone?d.globalAlpha=this.getObjectOpacity():d.globalAlpha*=this.opacity},_setStrokeStyles:function(d,D){var E=D.stroke;E&&(d.lineWidth=D.strokeWidth,d.lineCap=D.strokeLineCap,d.lineDashOffset=D.strokeDashOffset,d.lineJoin=D.strokeLineJoin,d.miterLimit=D.strokeMiterLimit,E.toLive?E.gradientUnits==="percentage"||E.gradientTransform||E.patternTransform?this._applyPatternForTransformedGradient(d,E):(d.strokeStyle=E.toLive(d,this),this._applyPatternGradientTransform(d,E)):d.strokeStyle=D.stroke)},_setFillStyles:function(d,D){var E=D.fill;E&&(E.toLive?(d.fillStyle=E.toLive(d,this),this._applyPatternGradientTransform(d,D.fill)):d.fillStyle=E)},_setClippingProperties:function(d){d.globalAlpha=1,d.strokeStyle="transparent",d.fillStyle="#000000"},_setLineDash:function(d,D){!D||D.length===0||(1&D.length&&D.push.apply(D,D),d.setLineDash(D))},_renderControls:function(d,D){var E=this.getViewportTransform(),w=this.calcTransformMatrix(),O,F,B;D=D||{},F=typeof D.hasBorders<"u"?D.hasBorders:this.hasBorders,B=typeof D.hasControls<"u"?D.hasControls:this.hasControls,w=s.util.multiplyTransformMatrices(E,w),O=s.util.qrDecompose(w),d.save(),d.translate(O.translateX,O.translateY),d.lineWidth=1*this.borderScaleFactor,this.group||(d.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),d.rotate(o(O.angle)),D.forActiveSelection||this.group?F&&this.drawBordersInGroup(d,O,D):F&&this.drawBorders(d,D),B&&this.drawControls(d,D),d.restore()},_setShadow:function(d){if(this.shadow){var D=this.shadow,E=this.canvas,w,O=E&&E.viewportTransform[0]||1,F=E&&E.viewportTransform[3]||1;D.nonScaling?w={scaleX:1,scaleY:1}:w=this.getObjectScaling(),E&&E._isRetinaScaling()&&(O*=s.devicePixelRatio,F*=s.devicePixelRatio),d.shadowColor=D.color,d.shadowBlur=D.blur*s.browserShadowBlurConstant*(O+F)*(w.scaleX+w.scaleY)/4,d.shadowOffsetX=D.offsetX*O*w.scaleX,d.shadowOffsetY=D.offsetY*F*w.scaleY}},_removeShadow:function(d){this.shadow&&(d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0)},_applyPatternGradientTransform:function(d,D){if(!D||!D.toLive)return{offsetX:0,offsetY:0};var E=D.gradientTransform||D.patternTransform,w=-this.width/2+D.offsetX||0,O=-this.height/2+D.offsetY||0;return D.gradientUnits==="percentage"?d.transform(this.width,0,0,this.height,w,O):d.transform(1,0,0,1,w,O),E&&d.transform(E[0],E[1],E[2],E[3],E[4],E[5]),{offsetX:w,offsetY:O}},_renderPaintInOrder:function(d){this.paintFirst==="stroke"?(this._renderStroke(d),this._renderFill(d)):(this._renderFill(d),this._renderStroke(d))},_render:function(){},_renderFill:function(d){this.fill&&(d.save(),this._setFillStyles(d,this),this.fillRule==="evenodd"?d.fill("evenodd"):d.fill(),d.restore())},_renderStroke:function(d){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(d),d.save(),this.strokeUniform&&this.group){var D=this.getObjectScaling();d.scale(1/D.scaleX,1/D.scaleY)}else this.strokeUniform&&d.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(d,this.strokeDashArray),this._setStrokeStyles(d,this),d.stroke(),d.restore()}},_applyPatternForTransformedGradient:function(d,D){var E=this._limitCacheSize(this._getCacheCanvasDimensions()),w=s.util.createCanvasElement(),O,F=this.canvas.getRetinaScaling(),B=E.x/this.scaleX/F,V=E.y/this.scaleY/F;w.width=B,w.height=V,O=w.getContext("2d"),O.beginPath(),O.moveTo(0,0),O.lineTo(B,0),O.lineTo(B,V),O.lineTo(0,V),O.closePath(),O.translate(B/2,V/2),O.scale(E.zoomX/this.scaleX/F,E.zoomY/this.scaleY/F),this._applyPatternGradientTransform(O,D),O.fillStyle=D.toLive(d),O.fill(),d.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),d.scale(F*this.scaleX/E.zoomX,F*this.scaleY/E.zoomY),d.strokeStyle=O.createPattern(w,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var d=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",d.scaleX),this.set("scaleY",d.scaleY),this.angle=d.angle,this.skewX=d.skewX,this.skewY=0}},_removeTransformMatrix:function(d){var D=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),D=s.util.transformPoint(D,this.transformMatrix)),this.transformMatrix=null,d&&(this.scaleX*=d.scaleX,this.scaleY*=d.scaleY,this.cropX=d.cropX,this.cropY=d.cropY,D.x+=d.offsetLeft,D.y+=d.offsetTop,this.width=d.width,this.height=d.height),this.setPositionByOrigin(D,"center","center")},clone:function(d,D){var E=this.toObject(D);this.constructor.fromObject?this.constructor.fromObject(E,d):s.Object._fromObject("Object",E,d)},cloneAsImage:function(d,D){var E=this.toCanvasElement(D);return d&&d(new s.Image(E)),this},toCanvasElement:function(d){d||(d={});var D=s.util,E=D.saveObjectTransform(this),w=this.group,O=this.shadow,F=Math.abs,B=(d.multiplier||1)*(d.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,d.withoutTransform&&D.resetObjectTransform(this),d.withoutShadow&&(this.shadow=null);var V=s.util.createCanvasElement(),H=this.getBoundingRect(!0,!0),Y=this.shadow,se,ne={x:0,y:0},be,K,Ce;Y&&(be=Y.blur,Y.nonScaling?se={scaleX:1,scaleY:1}:se=this.getObjectScaling(),ne.x=2*Math.round(F(Y.offsetX)+be)*F(se.scaleX),ne.y=2*Math.round(F(Y.offsetY)+be)*F(se.scaleY)),K=H.width+ne.x,Ce=H.height+ne.y,V.width=Math.ceil(K),V.height=Math.ceil(Ce);var W=new s.StaticCanvas(V,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});d.format==="jpeg"&&(W.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(W.width/2,W.height/2),"center","center");var Be=this.canvas;W.add(this);var Ie=W.toCanvasElement(B||1,d);return this.shadow=O,this.set("canvas",Be),w&&(this.group=w),this.set(E).setCoords(),W._objects=[],W.dispose(),W=null,Ie},toDataURL:function(d){return d||(d={}),s.util.toDataURL(this.toCanvasElement(d),d.format||"png",d.quality||1)},isType:function(d){return this.type===d},complexity:function(){return 1},toJSON:function(d){return this.toObject(d)},rotate:function(d){var D=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return D&&this._setOriginToCenter(),this.set("angle",d),D&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(d,D){D=D||this.canvas.getPointer(d);var E=new s.Point(D.x,D.y),w=this._getLeftTopCoords();return this.angle&&(E=s.util.rotatePoint(E,w,o(-this.angle))),{x:E.x-w.x,y:E.y-w.y}},_setupCompositeOperation:function(d){this.globalCompositeOperation&&(d.globalCompositeOperation=this.globalCompositeOperation)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),y(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object._fromObject=function(d,D,E,w){var O=s[d];D=m(D,!0),s.util.enlivenPatterns([D.fill,D.stroke],function(F){typeof F[0]<"u"&&(D.fill=F[0]),typeof F[1]<"u"&&(D.stroke=F[1]),s.util.enlivenObjects([D.clipPath],function(B){D.clipPath=B[0];var V=w?new O(D[w],D):new O(D);E&&E(V)})})},s.Object.__uid=0)}(x),function(){var C=u.util.degreesToRadians,s={left:-.5,center:0,right:.5},y={top:-.5,center:0,bottom:.5};u.util.object.extend(u.Object.prototype,{translateToGivenOrigin:function(m,i,c,o,h){var b=m.x,d=m.y,D,E,w;return typeof i=="string"?i=s[i]:i-=.5,typeof o=="string"?o=s[o]:o-=.5,D=o-i,typeof c=="string"?c=y[c]:c-=.5,typeof h=="string"?h=y[h]:h-=.5,E=h-c,(D||E)&&(w=this._getTransformedDimensions(),b=m.x+D*w.x,d=m.y+E*w.y),new u.Point(b,d)},translateToCenterPoint:function(m,i,c){var o=this.translateToGivenOrigin(m,i,c,"center","center");return this.angle?u.util.rotatePoint(o,m,C(this.angle)):o},translateToOriginPoint:function(m,i,c){var o=this.translateToGivenOrigin(m,"center","center",i,c);return this.angle?u.util.rotatePoint(o,m,C(this.angle)):o},getCenterPoint:function(){var m=new u.Point(this.left,this.top);return this.translateToCenterPoint(m,this.originX,this.originY)},getPointByOrigin:function(m,i){var c=this.getCenterPoint();return this.translateToOriginPoint(c,m,i)},toLocalPoint:function(m,i,c){var o=this.getCenterPoint(),h,b;return typeof i<"u"&&typeof c<"u"?h=this.translateToGivenOrigin(o,"center","center",i,c):h=new u.Point(this.left,this.top),b=new u.Point(m.x,m.y),this.angle&&(b=u.util.rotatePoint(b,o,-C(this.angle))),b.subtractEquals(h)},setPositionByOrigin:function(m,i,c){var o=this.translateToCenterPoint(m,i,c),h=this.translateToOriginPoint(o,this.originX,this.originY);this.set("left",h.x),this.set("top",h.y)},adjustPosition:function(m){var i=C(this.angle),c=this.getScaledWidth(),o=u.util.cos(i)*c,h=u.util.sin(i)*c,b,d;typeof this.originX=="string"?b=s[this.originX]:b=this.originX-.5,typeof m=="string"?d=s[m]:d=m-.5,this.left+=o*(d-b),this.top+=h*(d-b),this.setCoords(),this.originX=m},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var m=this.getCenterPoint();this.originX="center",this.originY="center",this.left=m.x,this.top=m.y},_resetOrigin:function(){var m=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=m.x,this.top=m.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function C(c){return[new u.Point(c.tl.x,c.tl.y),new u.Point(c.tr.x,c.tr.y),new u.Point(c.br.x,c.br.y),new u.Point(c.bl.x,c.bl.y)]}var s=u.util,y=s.degreesToRadians,m=s.multiplyTransformMatrices,i=s.transformPoint;s.object.extend(u.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(c,o){return o?c?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),c?this.aCoords:this.lineCoords)},getCoords:function(c,o){return C(this._getCoords(c,o))},intersectsWithRect:function(c,o,h,b){var d=this.getCoords(h,b),D=u.Intersection.intersectPolygonRectangle(d,c,o);return D.status==="Intersection"},intersectsWithObject:function(c,o,h){var b=u.Intersection.intersectPolygonPolygon(this.getCoords(o,h),c.getCoords(o,h));return b.status==="Intersection"||c.isContainedWithinObject(this,o,h)||this.isContainedWithinObject(c,o,h)},isContainedWithinObject:function(c,o,h){for(var b=this.getCoords(o,h),d=o?c.aCoords:c.lineCoords,D=0,E=c._getImageLines(d);D<4;D++)if(!c.containsPoint(b[D],E))return!1;return!0},isContainedWithinRect:function(c,o,h,b){var d=this.getBoundingRect(h,b);return d.left>=c.x&&d.left+d.width<=o.x&&d.top>=c.y&&d.top+d.height<=o.y},containsPoint:function(c,D,h,b){var d=this._getCoords(h,b),D=D||this._getImageLines(d),E=this._findCrossPoints(c,D);return E!==0&&E%2===1},isOnScreen:function(c){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br,b=this.getCoords(!0,c);return b.some(function(d){return d.x<=h.x&&d.x>=o.x&&d.y<=h.y&&d.y>=o.y})||this.intersectsWithRect(o,h,!0,c)?!0:this._containsCenterOfCanvas(o,h,c)},_containsCenterOfCanvas:function(c,o,h){var b={x:(c.x+o.x)/2,y:(c.y+o.y)/2};return!!this.containsPoint(b,null,!0,h)},isPartiallyOnScreen:function(c){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;if(this.intersectsWithRect(o,h,!0,c))return!0;var b=this.getCoords(!0,c).every(function(d){return(d.x>=h.x||d.x<=o.x)&&(d.y>=h.y||d.y<=o.y)});return b&&this._containsCenterOfCanvas(o,h,c)},_getImageLines:function(c){var o={topline:{o:c.tl,d:c.tr},rightline:{o:c.tr,d:c.br},bottomline:{o:c.br,d:c.bl},leftline:{o:c.bl,d:c.tl}};return o},_findCrossPoints:function(c,o){var h,b,d,D,E,w=0,O;for(var F in o)if(O=o[F],!(O.o.y<c.y&&O.d.y<c.y)&&!(O.o.y>=c.y&&O.d.y>=c.y)&&(O.o.x===O.d.x&&O.o.x>=c.x?E=O.o.x:(h=0,b=(O.d.y-O.o.y)/(O.d.x-O.o.x),d=c.y-h*c.x,D=O.o.y-b*O.o.x,E=-(d-D)/(h-b)),E>=c.x&&(w+=1),w===2))break;return w},getBoundingRect:function(c,o){var h=this.getCoords(c,o);return s.makeBoundingBoxFromPoints(h)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(c){return Math.abs(c)<this.minScaleLimit?c<0?-this.minScaleLimit:this.minScaleLimit:c===0?1e-4:c},scale:function(c){return this._set("scaleX",c),this._set("scaleY",c),this.setCoords()},scaleToWidth:function(c,o){var h=this.getBoundingRect(o).width/this.getScaledWidth();return this.scale(c/this.width/h)},scaleToHeight:function(c,o){var h=this.getBoundingRect(o).height/this.getScaledHeight();return this.scale(c/this.height/h)},calcCoords:function(c){return c?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var c=this.getViewportTransform(),o=this.padding,h=y(this.angle),b=s.cos(h),d=s.sin(h),D=b*o,E=d*o,w=D+E,O=D-E,F=this.calcACoords(),B={tl:i(F.tl,c),tr:i(F.tr,c),bl:i(F.bl,c),br:i(F.br,c)};return o&&(B.tl.x-=O,B.tl.y-=w,B.tr.x+=w,B.tr.y-=O,B.bl.x-=w,B.bl.y+=O,B.br.x+=O,B.br.y+=w),B},calcOCoords:function(){var c=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),h=this.getViewportTransform(),b=m(h,o),d=m(b,c),d=m(d,[1/h[0],0,0,1/h[3],0,0]),D=this._calculateCurrentDimensions(),E={};return this.forEachControl(function(w,O,F){E[O]=w.positionHandler(D,d,F)}),E},calcACoords:function(){var c=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),h=m(o,c),b=this._getTransformedDimensions(),d=b.x/2,D=b.y/2;return{tl:i({x:-d,y:-D},h),tr:i({x:d,y:-D},h),bl:i({x:-d,y:D},h),br:i({x:d,y:D},h)}},setCoords:function(c){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),c?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var c=this.getCenterPoint();return[1,0,0,1,c.x,c.y]},transformMatrixKey:function(c){var o="_",h="";return!c&&this.group&&(h=this.group.transformMatrixKey(c)+o),h+this.top+o+this.left+o+this.scaleX+o+this.scaleY+o+this.skewX+o+this.skewY+o+this.angle+o+this.originX+o+this.originY+o+this.width+o+this.height+o+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(c){var o=this.calcOwnMatrix();if(c||!this.group)return o;var h=this.transformMatrixKey(c),b=this.matrixCache||(this.matrixCache={});return b.key===h?b.value:(this.group&&(o=m(this.group.calcTransformMatrix(!1),o)),b.key=h,b.value=o,o)},calcOwnMatrix:function(){var c=this.transformMatrixKey(!0),o=this.ownMatrixCache||(this.ownMatrixCache={});if(o.key===c)return o.value;var h=this._calcTranslateMatrix(),b={angle:this.angle,translateX:h[4],translateY:h[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return o.key=c,o.value=s.composeMatrix(b),o.value},_calcDimensionsTransformMatrix:function(c,o,h){return s.calcDimensionsMatrix({skewX:c,skewY:o,scaleX:this.scaleX*(h&&this.flipX?-1:1),scaleY:this.scaleY*(h&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var c=this.strokeWidth,o=this.width+c,h=this.height+c;return{x:o,y:h}},_getTransformedDimensions:function(c,o){typeof c>"u"&&(c=this.skewX),typeof o>"u"&&(o=this.skewY);var h,b,d,D=c===0&&o===0;if(this.strokeUniform?(b=this.width,d=this.height):(h=this._getNonTransformedDimensions(),b=h.x,d=h.y),D)return this._finalizeDimensions(b*this.scaleX,d*this.scaleY);var E=s.sizeAfterTransform(b,d,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:c,skewY:o});return this._finalizeDimensions(E.x,E.y)},_finalizeDimensions:function(c,o){return this.strokeUniform?{x:c+this.strokeWidth,y:o+this.strokeWidth}:{x:c,y:o}},_calculateCurrentDimensions:function(){var c=this.getViewportTransform(),o=this._getTransformedDimensions(),h=i(o,c,!0);return h.scalarAdd(2*this.padding)}})}(),u.util.object.extend(u.Object.prototype,{sendToBack:function(){return this.group?u.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?u.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(C){return this.group?u.StaticCanvas.prototype.sendBackwards.call(this.group,this,C):this.canvas&&this.canvas.sendBackwards(this,C),this},bringForward:function(C){return this.group?u.StaticCanvas.prototype.bringForward.call(this.group,this,C):this.canvas&&this.canvas.bringForward(this,C),this},moveTo:function(C){return this.group&&this.group.type!=="activeSelection"?u.StaticCanvas.prototype.moveTo.call(this.group,this,C):this.canvas&&this.canvas.moveTo(this,C),this}}),function(){function C(y,m){if(m){if(m.toLive)return y+": url(#SVGID_"+m.id+"); ";var i=new u.Color(m),c=y+": "+i.toRgb()+"; ",o=i.getAlpha();return o!==1&&(c+=y+"-opacity: "+o.toString()+"; "),c}else return y+": none; "}var s=u.util.toFixed;u.util.object.extend(u.Object.prototype,{getSvgStyles:function(y){var m=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",c=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",b=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",D=typeof this.opacity<"u"?this.opacity:"1",E=this.visible?"":" visibility: hidden;",w=y?"":this.getSvgFilter(),O=C("fill",this.fill),F=C("stroke",this.stroke);return[F,"stroke-width: ",i,"; ","stroke-dasharray: ",c,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",b,"; ","stroke-miterlimit: ",d,"; ",O,"fill-rule: ",m,"; ","opacity: ",D,";",w,E].join("")},getSvgSpanStyles:function(y,m){var i="; ",o=y.fontFamily?"font-family: "+(y.fontFamily.indexOf("'")===-1&&y.fontFamily.indexOf('"')===-1?"'"+y.fontFamily+"'":y.fontFamily)+i:"",c=y.strokeWidth?"stroke-width: "+y.strokeWidth+i:"",o=o,h=y.fontSize?"font-size: "+y.fontSize+"px"+i:"",b=y.fontStyle?"font-style: "+y.fontStyle+i:"",d=y.fontWeight?"font-weight: "+y.fontWeight+i:"",D=y.fill?C("fill",y.fill):"",E=y.stroke?C("stroke",y.stroke):"",w=this.getSvgTextDecoration(y),O=y.deltaY?"baseline-shift: "+-y.deltaY+"; ":"";return w&&(w="text-decoration: "+w+i),[E,c,o,h,b,d,w,D,O,m?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(y){return["overline","underline","line-through"].filter(function(m){return y[m.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(y,m){var i=y?this.calcTransformMatrix():this.calcOwnMatrix(),c='transform="'+u.util.matrixToSVG(i);return c+(m||"")+'" '},_setSVGBg:function(y){if(this.backgroundColor){var m=u.Object.NUM_FRACTION_DIGITS;y.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,m),'" y="',s(-this.height/2,m),'" width="',s(this.width,m),'" height="',s(this.height,m),`"></rect>
`)}},toSVG:function(y){return this._createBaseSVGMarkup(this._toSVG(y),{reviver:y})},toClipPathSVG:function(y){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(y),{reviver:y})},_createBaseClipPathSVGMarkup:function(y,m){m=m||{};var i=m.reviver,c=m.additionalTransform||"",o=[this.getSvgTransform(!0,c),this.getSvgCommons()].join(""),h=y.indexOf("COMMON_PARTS");return y[h]=o,i?i(y.join("")):y.join("")},_createBaseSVGMarkup:function(y,m){m=m||{};var i=m.noStyle,c=m.reviver,o=i?"":'style="'+this.getSvgStyles()+'" ',h=m.withShadow?'style="'+this.getSvgFilter()+'" ':"",b=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",D=b&&b.absolutePositioned,E=this.stroke,w=this.fill,O=this.shadow,F,B=[],V,H=y.indexOf("COMMON_PARTS"),Y=m.additionalTransform;return b&&(b.clipPathId="CLIPPATH_"+u.Object.__uid++,V='<clipPath id="'+b.clipPathId+`" >
`+b.toClipPathSVG(c)+`</clipPath>
`),D&&B.push("<g ",h,this.getSvgCommons(),` >
`),B.push("<g ",this.getSvgTransform(!1),D?"":h+this.getSvgCommons(),` >
`),F=[o,d,i?"":this.addPaintOrder()," ",Y?'transform="'+Y+'" ':""].join(""),y[H]=F,w&&w.toLive&&B.push(w.toSVG(this)),E&&E.toLive&&B.push(E.toSVG(this)),O&&B.push(O.toSVG(this)),b&&B.push(V),B.push(y.join("")),B.push(`</g>
`),D&&B.push(`</g>
`),c?c(B.join("")):B.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var C=u.util.object.extend,s="stateProperties";function y(i,c,o){var h={},b=!0;o.forEach(function(d){h[d]=i[d]}),C(i[c],h,b)}function m(i,c,o){if(i===c)return!0;if(Array.isArray(i)){if(!Array.isArray(c)||i.length!==c.length)return!1;for(var h=0,b=i.length;h<b;h++)if(!m(i[h],c[h]))return!1;return!0}else if(i&&typeof i=="object"){var d=Object.keys(i),D;if(!c||typeof c!="object"||!o&&d.length!==Object.keys(c).length)return!1;for(var h=0,b=d.length;h<b;h++)if(D=d[h],!(D==="canvas"||D==="group")&&!m(i[D],c[D]))return!1;return!0}}u.util.object.extend(u.Object.prototype,{hasStateChanged:function(i){i=i||s;var c="_"+i;return Object.keys(this[c]).length<this[i].length?!0:!m(this[c],this,!0)},saveState:function(i){var c=i&&i.propertySet||s,o="_"+c;return this[o]?(y(this,o,this[c]),i&&i.stateProperties&&y(this,o,i.stateProperties),this):this.setupState(i)},setupState:function(i){i=i||{};var c=i.propertySet||s;return i.propertySet=c,this["_"+c]={},this.saveState(i),this}})}(),function(){var C=u.util.degreesToRadians;u.util.object.extend(u.Object.prototype,{_findTargetCorner:function(s,y){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var m=s.x,i=s.y,c,o,h=Object.keys(this.oCoords),b=h.length-1,d;for(this.__corner=0;b>=0;b--)if(d=h[b],!!this.isControlVisible(d)&&(o=this._getImageLines(y?this.oCoords[d].touchCorner:this.oCoords[d].corner),c=this._findCrossPoints({x:m,y:i},o),c!==0&&c%2===1))return this.__corner=d,d;return!1},forEachControl:function(s){for(var y in this.controls)s(this.controls[y],y,this)},_setCornerCoords:function(){var s=this.oCoords;for(var y in s){var m=this.controls[y];s[y].corner=m.calcCornerCoords(this.angle,this.cornerSize,s[y].x,s[y].y,!1),s[y].touchCorner=m.calcCornerCoords(this.angle,this.touchCornerSize,s[y].x,s[y].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var y=this.getCenterPoint(),m=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return s.translate(y.x,y.y),s.scale(1/i[0],1/i[3]),s.rotate(C(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-m.x/2,-m.y/2,m.x,m.y),s.restore(),this},drawBorders:function(s,y){y=y||{};var m=this._calculateCurrentDimensions(),i=this.borderScaleFactor,c=m.x+i,o=m.y+i,h=typeof y.hasControls<"u"?y.hasControls:this.hasControls,b=!1;return s.save(),s.strokeStyle=y.borderColor||this.borderColor,this._setLineDash(s,y.borderDashArray||this.borderDashArray),s.strokeRect(-c/2,-o/2,c,o),h&&(s.beginPath(),this.forEachControl(function(d,D,E){d.withConnection&&d.getVisibility(E,D)&&(b=!0,s.moveTo(d.x*c,d.y*o),s.lineTo(d.x*c+d.offsetX,d.y*o+d.offsetY))}),b&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,y,m){m=m||{};var i=u.util.sizeAfterTransform(this.width,this.height,y),c=this.strokeWidth,o=this.strokeUniform,h=this.borderScaleFactor,b=i.x+c*(o?this.canvas.getZoom():y.scaleX)+h,d=i.y+c*(o?this.canvas.getZoom():y.scaleY)+h;return s.save(),this._setLineDash(s,m.borderDashArray||this.borderDashArray),s.strokeStyle=m.borderColor||this.borderColor,s.strokeRect(-b/2,-d/2,b,d),s.restore(),this},drawControls:function(s,y){y=y||{},s.save();var m=this.canvas.getRetinaScaling(),i,c;return s.setTransform(m,0,0,m,0,0),s.strokeStyle=s.fillStyle=y.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=y.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,y.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl(function(o,h,b){c=b.oCoords[h],o.getVisibility(b,h)&&(i&&(c=u.util.transformPoint(c,i)),o.render(s,c.x,c.y,y,b))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,y){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=y,this},setControlsVisibility:function(s){s||(s={});for(var y in s)this.setControlVisible(y,s[y]);return this},onDeselect:function(){},onSelect:function(){}})}(),u.util.object.extend(u.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(C,s){s=s||{};var y=function(){},m=s.onComplete||y,i=s.onChange||y,c=this;return u.util.animate({startValue:C.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(o){C.set("left",o),c.requestRenderAll(),i()},onComplete:function(){C.setCoords(),m()}}),this},fxCenterObjectV:function(C,s){s=s||{};var y=function(){},m=s.onComplete||y,i=s.onChange||y,c=this;return u.util.animate({startValue:C.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(o){C.set("top",o),c.requestRenderAll(),i()},onComplete:function(){C.setCoords(),m()}}),this},fxRemove:function(C,s){s=s||{};var y=function(){},m=s.onComplete||y,i=s.onChange||y,c=this;return u.util.animate({startValue:C.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(o){C.set("opacity",o),c.requestRenderAll(),i()},onComplete:function(){c.remove(C),m()}}),this}}),u.util.object.extend(u.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var C=[],s,y;for(s in arguments[0])C.push(s);for(var m=0,i=C.length;m<i;m++)s=C[m],y=m!==i-1,this._animate(s,arguments[0][s],arguments[1],y)}else this._animate.apply(this,arguments);return this},_animate:function(C,s,y,m){var i=this,c;s=s.toString(),y?y=u.util.object.clone(y):y={},~C.indexOf(".")&&(c=C.split("."));var o=i.colorProperties.indexOf(C)>-1||c&&i.colorProperties.indexOf(c[1])>-1,h=c?this.get(c[0])[c[1]]:this.get(C);"from"in y||(y.from=h),o||(~s.indexOf("=")?s=h+parseFloat(s.replace("=","")):s=parseFloat(s));var b={startValue:y.from,endValue:s,byValue:y.by,easing:y.easing,duration:y.duration,abort:y.abort&&function(d,D,E){return y.abort.call(i,d,D,E)},onChange:function(d,D,E){c?i[c[0]][c[1]]=d:i.set(C,d),!m&&y.onChange&&y.onChange(d,D,E)},onComplete:function(d,D,E){m||(i.setCoords(),y.onComplete&&y.onComplete(d,D,E))}};return o?u.util.animateColor(b.startValue,b.endValue,b.duration,b):u.util.animate(b)}}),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.extend,m=s.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(o,h){o||(o=[0,0,0,0]),this.callSuper("initialize",h),this.set("x1",o[0]),this.set("y1",o[1]),this.set("x2",o[2]),this.set("y2",o[3]),this._setWidthHeight(h)},_setWidthHeight:function(o){o||(o={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in o?o.left:this._getLeftToOriginX(),this.top="top"in o?o.top:this._getTopToOriginY()},_set:function(o,h){return this.callSuper("_set",o,h),typeof i[o]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:c({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:c({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(o){o.beginPath();var h=this.calcLinePoints();o.moveTo(h.x1,h.y1),o.lineTo(h.x2,h.y2),o.lineWidth=this.strokeWidth;var b=o.strokeStyle;o.strokeStyle=this.stroke||o.fillStyle,this.stroke&&this._renderStroke(o),o.strokeStyle=b},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(o){return y(this.callSuper("toObject",o),this.calcLinePoints())},_getNonTransformedDimensions:function(){var o=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(o.y-=this.strokeWidth),this.height===0&&(o.x-=this.strokeWidth)),o},calcLinePoints:function(){var o=this.x1<=this.x2?-1:1,h=this.y1<=this.y2?-1:1,b=o*this.width*.5,d=h*this.height*.5,D=o*this.width*-.5,E=h*this.height*-.5;return{x1:b,x2:D,y1:d,y2:E}},_toSVG:function(){var o=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(o,h,b){b=b||{};var d=s.parseAttributes(o,s.Line.ATTRIBUTE_NAMES),D=[d.x1||0,d.y1||0,d.x2||0,d.y2||0];h(new s.Line(D,y(d,b)))},s.Line.fromObject=function(o,h){function b(D){delete D.points,h&&h(D)}var d=m(o,!0);d.points=[o.x1,o.y1,o.x2,o.y2],s.Object._fromObject("Line",d,b,"points")};function c(o,h){var b=o.origin,d=o.axis1,D=o.axis2,E=o.dimension,w=h.nearest,O=h.center,F=h.farthest;return function(){switch(this.get(b)){case w:return Math.min(this.get(d),this.get(D));case O:return Math.min(this.get(d),this.get(D))+.5*this.get(E);case F:return Math.max(this.get(d),this.get(D))}}}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=Math.PI;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:y*2,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(i,c){return this.callSuper("_set",i,c),i==="radius"&&this.setRadius(c),this},toObject:function(i){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(i))},_toSVG:function(){var i,c=0,o=0,h=(this.endAngle-this.startAngle)%(2*y);if(h===0)i=["<circle ","COMMON_PARTS",'cx="'+c+'" cy="'+o+'" ','r="',this.radius,`" />
`];else{var b=s.util.cos(this.startAngle)*this.radius,d=s.util.sin(this.startAngle)*this.radius,D=s.util.cos(this.endAngle)*this.radius,E=s.util.sin(this.endAngle)*this.radius,w=h>y?"1":"0";i=['<path d="M '+b+" "+d," A "+this.radius+" "+this.radius," 0 ",+w+" 1"," "+D+" "+E,'" ',"COMMON_PARTS",` />
`]}return i},_render:function(i){i.beginPath(),i.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(i)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(i){return this.radius=i,this.set("width",i*2).set("height",i*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(i,c){var o=s.parseAttributes(i,s.Circle.ATTRIBUTE_NAMES);if(!m(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,c(new s.Circle(o))};function m(i){return"radius"in i&&i.radius>=0}s.Circle.fromObject=function(i,c){s.Object._fromObject("Circle",i,c)}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(y){var m=this.width/2,i=this.height/2;y.beginPath(),y.moveTo(-m,i),y.lineTo(0,-i),y.lineTo(m,i),y.closePath(),this._renderPaintInOrder(y)},_toSVG:function(){var y=this.width/2,m=this.height/2,i=[-y+" "+m,"0 "+-m,y+" "+m].join(",");return["<polygon ","COMMON_PARTS",'points="',i,'" />']}}),s.Triangle.fromObject=function(y,m){return s.Object._fromObject("Triangle",y,m)}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(m){this.callSuper("initialize",m),this.set("rx",m&&m.rx||0),this.set("ry",m&&m.ry||0)},_set:function(m,i){switch(this.callSuper("_set",m,i),m){case"rx":this.rx=i,this.set("width",i*2);break;case"ry":this.ry=i,this.set("height",i*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(m){return this.callSuper("toObject",["rx","ry"].concat(m))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(m){m.beginPath(),m.save(),m.transform(1,0,0,this.ry/this.rx,0,0),m.arc(0,0,this.rx,0,y,!1),m.restore(),this._renderPaintInOrder(m)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(m,i){var c=s.parseAttributes(m,s.Ellipse.ATTRIBUTE_NAMES);c.left=(c.left||0)-c.rx,c.top=(c.top||0)-c.ry,i(new s.Ellipse(c))},s.Ellipse.fromObject=function(m,i){s.Object._fromObject("Ellipse",m,i)}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(m){this.callSuper("initialize",m),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(m){var i=this.rx?Math.min(this.rx,this.width/2):0,c=this.ry?Math.min(this.ry,this.height/2):0,o=this.width,h=this.height,b=-this.width/2,d=-this.height/2,D=i!==0||c!==0,E=1-.5522847498;m.beginPath(),m.moveTo(b+i,d),m.lineTo(b+o-i,d),D&&m.bezierCurveTo(b+o-E*i,d,b+o,d+E*c,b+o,d+c),m.lineTo(b+o,d+h-c),D&&m.bezierCurveTo(b+o,d+h-E*c,b+o-E*i,d+h,b+o-i,d+h),m.lineTo(b+i,d+h),D&&m.bezierCurveTo(b+E*i,d+h,b,d+h-E*c,b,d+h-c),m.lineTo(b,d+c),D&&m.bezierCurveTo(b,d+E*c,b+E*i,d,b+i,d),m.closePath(),this._renderPaintInOrder(m)},toObject:function(m){return this.callSuper("toObject",["rx","ry"].concat(m))},_toSVG:function(){var m=-this.width/2,i=-this.height/2;return["<rect ","COMMON_PARTS",'x="',m,'" y="',i,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(m,i,c){if(!m)return i(null);c=c||{};var o=s.parseAttributes(m,s.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var h=new s.Rect(y(c?s.util.object.clone(c):{},o));h.visible=h.visible&&h.width>0&&h.height>0,i(h)},s.Rect.fromObject=function(m,i){return s.Object._fromObject("Rect",m,i)}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.extend,m=s.util.array.min,i=s.util.array.max,c=s.util.toFixed;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(o,h){h=h||{},this.points=o||[],this.callSuper("initialize",h),this._setPositionDimensions(h)},_setPositionDimensions:function(o){var h=this._calcDimensions(o),b;this.width=h.width,this.height=h.height,o.fromSVG||(b=this.translateToGivenOrigin({x:h.left-this.strokeWidth/2,y:h.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof o.left>"u"&&(this.left=o.fromSVG?h.left:b.x),typeof o.top>"u"&&(this.top=o.fromSVG?h.top:b.y),this.pathOffset={x:h.left+this.width/2,y:h.top+this.height/2}},_calcDimensions:function(){var o=this.points,h=m(o,"x")||0,b=m(o,"y")||0,d=i(o,"x")||0,D=i(o,"y")||0,E=d-h,w=D-b;return{left:h,top:b,width:E,height:w}},toObject:function(o){return y(this.callSuper("toObject",o),{points:this.points.concat()})},_toSVG:function(){for(var o=[],h=this.pathOffset.x,b=this.pathOffset.y,d=s.Object.NUM_FRACTION_DIGITS,D=0,E=this.points.length;D<E;D++)o.push(c(this.points[D].x-h,d),",",c(this.points[D].y-b,d)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',o.join(""),`" />
`]},commonRender:function(o){var h,b=this.points.length,d=this.pathOffset.x,D=this.pathOffset.y;if(!b||isNaN(this.points[b-1].y))return!1;o.beginPath(),o.moveTo(this.points[0].x-d,this.points[0].y-D);for(var E=0;E<b;E++)h=this.points[E],o.lineTo(h.x-d,h.y-D);return!0},_render:function(o){this.commonRender(o)&&this._renderPaintInOrder(o)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(o){return function(h,b,d){if(!h)return b(null);d||(d={});var D=s.parsePointsAttribute(h.getAttribute("points")),E=s.parseAttributes(h,s[o].ATTRIBUTE_NAMES);E.fromSVG=!0,b(new s[o](D,y(E,d)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(o,h){return s.Object._fromObject("Polyline",o,h,"points")}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_render:function(y){this.commonRender(y)&&(y.closePath(),this._renderPaintInOrder(y))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(y,m){s.Object._fromObject("Polygon",y,m,"points")}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.array.min,m=s.util.array.max,i=s.util.object.extend,c=Object.prototype.toString,o=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(h,b){b=b||{},this.callSuper("initialize",b),h||(h=[]);var d=c.call(h)==="[object Array]";this.path=s.util.makePathSimpler(d?h:s.util.parsePath(h)),this.path&&s.Polyline.prototype._setPositionDimensions.call(this,b)},_renderPathCommands:function(h){var b,d=0,D=0,E=0,w=0,O=0,F=0,B=-this.pathOffset.x,V=-this.pathOffset.y;h.beginPath();for(var H=0,Y=this.path.length;H<Y;++H)switch(b=this.path[H],b[0]){case"L":E=b[1],w=b[2],h.lineTo(E+B,w+V);break;case"M":E=b[1],w=b[2],d=E,D=w,h.moveTo(E+B,w+V);break;case"C":E=b[5],w=b[6],O=b[3],F=b[4],h.bezierCurveTo(b[1]+B,b[2]+V,O+B,F+V,E+B,w+V);break;case"Q":h.quadraticCurveTo(b[1]+B,b[2]+V,b[3]+B,b[4]+V),E=b[3],w=b[4],O=b[1],F=b[2];break;case"z":case"Z":E=d,w=D,h.closePath();break}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return i(this.callSuper("toObject",h),{path:this.path.map(function(b){return b.slice()})})},toDatalessObject:function(h){var b=this.toObject(["sourcePath"].concat(h));return b.sourcePath&&delete b.path,b},_toSVG:function(){var h=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',h,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var h=s.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,h)+", "+o(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var b=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:b})},toSVG:function(h){var b=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:b})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var h=[],b=[],d,D=0,E=0,w=0,O=0,F,B=0,V=this.path.length;B<V;++B){switch(d=this.path[B],d[0]){case"L":w=d[1],O=d[2],F=[];break;case"M":w=d[1],O=d[2],D=w,E=O,F=[];break;case"C":F=s.util.getBoundsOfCurve(w,O,d[1],d[2],d[3],d[4],d[5],d[6]),w=d[5],O=d[6];break;case"Q":F=s.util.getBoundsOfCurve(w,O,d[1],d[2],d[1],d[2],d[3],d[4]),w=d[3],O=d[4];break;case"z":case"Z":w=D,O=E;break}F.forEach(function(Ce){h.push(Ce.x),b.push(Ce.y)}),h.push(w),b.push(O)}var H=y(h)||0,Y=y(b)||0,se=m(h)||0,ne=m(b)||0,be=se-H,K=ne-Y;return{left:H,top:Y,width:be,height:K}}}),s.Path.fromObject=function(h,b){if(typeof h.sourcePath=="string"){var d=h.sourcePath;s.loadSVGFromURL(d,function(D){var E=D[0];E.setOptions(h),b&&b(E)})}else s.Object._fromObject("Path",h,b,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(h,b,d){var D=s.parseAttributes(h,s.Path.ATTRIBUTE_NAMES);D.fromSVG=!0,b(new s.Path(D.d,i(D,d)))}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.array.min,m=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(i,c,o){c=c||{},this._objects=[],o&&this.callSuper("initialize",c),this._objects=i||[];for(var h=this._objects.length;h--;)this._objects[h].group=this;if(o)this._updateObjectsACoords();else{var b=c&&c.centerPoint;c.originX!==void 0&&(this.originX=c.originX),c.originY!==void 0&&(this.originY=c.originY),b||this._calcBounds(),this._updateObjectsCoords(b),delete c.centerPoint,this.callSuper("initialize",c)}this.setCoords()},_updateObjectsACoords:function(){for(var i=!0,c=this._objects.length;c--;)this._objects[c].setCoords(i)},_updateObjectsCoords:function(c){for(var c=c||this.getCenterPoint(),o=this._objects.length;o--;)this._updateObjectCoords(this._objects[o],c)},_updateObjectCoords:function(i,c){var o=i.left,h=i.top,b=!0;i.set({left:o-c.x,top:h-c.y}),i.group=this,i.setCoords(b)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(i){var c=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),i&&(c&&s.util.removeTransformFromObject(i,this.group.calcTransformMatrix()),this._objects.push(i),i.group=this,i._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,c?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(i){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(i),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(i){this.dirty=!0,i.group=this,i._set("canvas",this.canvas)},_onObjectRemoved:function(i){this.dirty=!0,delete i.group},_set:function(i,c){var o=this._objects.length;if(this.useSetOnGroup)for(;o--;)this._objects[o].setOnGroup(i,c);if(i==="canvas")for(;o--;)this._objects[o]._set(i,c);s.Object.prototype._set.call(this,i,c)},toObject:function(i){var c=this.includeDefaultValues,o=this._objects.filter(function(b){return!b.excludeFromExport}).map(function(b){var d=b.includeDefaultValues;b.includeDefaultValues=c;var D=b.toObject(i);return b.includeDefaultValues=d,D}),h=s.Object.prototype.toObject.call(this,i);return h.objects=o,h},toDatalessObject:function(i){var c,o=this.sourcePath;if(o)c=o;else{var h=this.includeDefaultValues;c=this._objects.map(function(d){var D=d.includeDefaultValues;d.includeDefaultValues=h;var E=d.toDatalessObject(i);return d.includeDefaultValues=D,E})}var b=s.Object.prototype.toDatalessObject.call(this,i);return b.objects=c,b},render:function(i){this._transformDone=!0,this.callSuper("render",i),this._transformDone=!1},shouldCache:function(){var i=s.Object.prototype.shouldCache.call(this);if(i){for(var c=0,o=this._objects.length;c<o;c++)if(this._objects[c].willDrawShadow())return this.ownCaching=!1,!1}return i},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var i=0,c=this._objects.length;i<c;i++)if(this._objects[i].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(i){for(var c=0,o=this._objects.length;c<o;c++)this._objects[c].render(i);this._drawClipPath(i)},isCacheDirty:function(i){if(this.callSuper("isCacheDirty",i))return!0;if(!this.statefullCache)return!1;for(var c=0,o=this._objects.length;c<o;c++)if(this._objects[c].isCacheDirty(!0)){if(this._cacheCanvas){var h=this.cacheWidth/this.zoomX,b=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-b/2,h,b)}return!0}return!1},_restoreObjectsState:function(){var i=this.calcOwnMatrix();return this._objects.forEach(function(c){s.util.addTransformToObject(c,i),delete c.group,c.setCoords()}),this},realizeTransform:function(i,c){return s.util.addTransformToObject(i,c),i},destroy:function(){return this._objects.forEach(function(i){i.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var i=this._objects,c=this.canvas;this._objects=[];var o=this.toObject();delete o.objects;var h=new s.ActiveSelection([]);return h.set(o),h.type="activeSelection",c.remove(this),i.forEach(function(b){b.group=h,b.dirty=!0,c.add(b)}),h.canvas=c,h._objects=i,c._activeObject=h,h.setCoords(),h}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var i=!0;return this.forEachObject(function(c){c.setCoords(i)}),this},_calcBounds:function(i){for(var c=[],o=[],h,b,d,D=["tr","br","bl","tl"],E=0,w=this._objects.length,O,F=D.length;E<w;++E){for(h=this._objects[E],d=h.calcACoords(),O=0;O<F;O++)b=D[O],c.push(d[b].x),o.push(d[b].y);h.aCoords=d}this._getBounds(c,o,i)},_getBounds:function(i,c,o){var h=new s.Point(y(i),y(c)),b=new s.Point(m(i),m(c)),d=h.y||0,D=h.x||0,E=b.x-h.x||0,w=b.y-h.y||0;this.width=E,this.height=w,o||this.setPositionByOrigin({x:D,y:d},"left","top")},_toSVG:function(i){for(var c=["<g ","COMMON_PARTS",` >
`],o=0,h=this._objects.length;o<h;o++)c.push("		",this._objects[o].toSVG(i));return c.push(`</g>
`),c},getSvgStyles:function(){var i=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",c=this.visible?"":" visibility: hidden;";return[i,this.getSvgFilter(),c].join("")},toClipPathSVG:function(i){for(var c=[],o=0,h=this._objects.length;o<h;o++)c.push("	",this._objects[o].toClipPathSVG(i));return this._createBaseClipPathSVGMarkup(c,{reviver:i})}}),s.Group.fromObject=function(i,c){var o=i.objects,h=s.util.object.clone(i,!0);if(delete h.objects,typeof o=="string"){s.loadSVGFromURL(o,function(b){var d=s.util.groupSVGElements(b,i,o);d.set(h),c&&c(d)});return}s.util.enlivenObjects(o,function(b){s.util.enlivenObjects([i.clipPath],function(d){var D=s.util.object.clone(i,!0);D.clipPath=d[0],delete D.objects,c&&c(new s.Group(b,D,!0))})})})}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(y,m){m=m||{},this._objects=y||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;m.originX&&(this.originX=m.originX),m.originY&&(this.originY=m.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,m),this.setCoords()},toGroup:function(){var y=this._objects.concat();this._objects=[];var m=s.Object.prototype.toObject.call(this),i=new s.Group([]);if(delete m.type,i.set(m),y.forEach(function(o){o.canvas.remove(o),o.group=i}),i._objects=y,!this.canvas)return i;var c=this.canvas;return c.add(i),c._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(y,m,i){y.save(),y.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",y,m),i=i||{},typeof i.hasControls>"u"&&(i.hasControls=!1),i.forActiveSelection=!0;for(var c=0,o=this._objects.length;c<o;c++)this._objects[c]._renderControls(y,i);y.restore()}}),s.ActiveSelection.fromObject=function(y,m){s.util.enlivenObjects(y.objects,function(i){delete y.objects,m&&m(new s.ActiveSelection(i,y,!0))})})}(x),function(C){"use strict";var s=u.util.object.extend;if(C.fabric||(C.fabric={}),C.fabric.Image){u.warn("fabric.Image is already defined.");return}u.Image=u.util.createClass(u.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:u.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:u.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(y,m){m||(m={}),this.filters=[],this.cacheKey="texture"+u.Object.__uid++,this.callSuper("initialize",m),this._initElement(y,m)},getElement:function(){return this._element||{}},setElement:function(y,m){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=y,this._originalElement=y,this._initConfig(m),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(y){var m=u.filterBackend;m&&m.evictCachesForKey&&m.evictCachesForKey(y)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(y){u.util.cleanUpJsdomNode(this[y]),this[y]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var y=this.getElement();return{width:y.naturalWidth||y.width,height:y.naturalHeight||y.height}},_stroke:function(y){if(!(!this.stroke||this.strokeWidth===0)){var m=this.width/2,i=this.height/2;y.beginPath(),y.moveTo(-m,-i),y.lineTo(m,-i),y.lineTo(m,i),y.lineTo(-m,i),y.lineTo(-m,-i),y.closePath()}},toObject:function(y){var m=[];this.filters.forEach(function(c){c&&m.push(c.toObject())});var i=s(this.callSuper("toObject",["cropX","cropY"].concat(y)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:m});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var y=[],m=[],i,c=this._element,o=-this.width/2,h=-this.height/2,b="",d="";if(!c)return[];if(this.hasCrop()){var D=u.Object.__uid++;y.push('<clipPath id="imageCrop_'+D+`">
`,'	<rect x="'+o+'" y="'+h+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),b=' clip-path="url(#imageCrop_'+D+')" '}if(this.imageSmoothing||(d='" image-rendering="optimizeSpeed'),m.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',h-this.cropY,'" width="',c.width||c.naturalWidth,'" height="',c.height||c.height,d,'"',b,`></image>
`),this.stroke||this.strokeDashArray){var E=this.fill;this.fill=null,i=["	<rect ",'x="',o,'" y="',h,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=E}return this.paintFirst!=="fill"?y=y.concat(i,m):y=y.concat(m,i),y},getSrc:function(y){var m=y?this._element:this._originalElement;return m?m.toDataURL?m.toDataURL():this.srcFromAttribute?m.getAttribute("src"):m.src:this.src||""},setSrc:function(y,m,i){return u.util.loadImage(y,function(c,o){this.setElement(c,i),this._setWidthHeight(),m&&m(this,o)},this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var y=this.resizeFilter,m=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),c=i.scaleX,o=i.scaleY,h=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!y||c>m&&o>m){this._element=h,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=c,this._lastScaleY=o;return}u.filterBackend||(u.filterBackend=u.initFilterBackend());var b=u.util.createCanvasElement(),d=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,D=h.width,E=h.height;b.width=D,b.height=E,this._element=b,this._lastScaleX=y.scaleX=c,this._lastScaleY=y.scaleY=o,u.filterBackend.applyFilters([y],h,D,E,this._element,d),this._filterScalingX=b.width/this._originalElement.width,this._filterScalingY=b.height/this._originalElement.height},applyFilters:function(y){if(y=y||this.filters||[],y=y.filter(function(h){return h&&!h.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),y.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var m=this._originalElement,i=m.naturalWidth||m.width,c=m.naturalHeight||m.height;if(this._element===this._originalElement){var o=u.util.createCanvasElement();o.width=i,o.height=c,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,c),this._lastScaleX=1,this._lastScaleY=1;return u.filterBackend||(u.filterBackend=u.initFilterBackend()),u.filterBackend.applyFilters(y,this._originalElement,i,c,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(y){u.util.setImageSmoothing(y,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(y),this._renderPaintInOrder(y)},drawCacheOnCanvas:function(y){u.util.setImageSmoothing(y,this.imageSmoothing),u.Object.prototype.drawCacheOnCanvas.call(this,y)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(y){var m=this._element;if(m){var i=this._filterScalingX,c=this._filterScalingY,o=this.width,h=this.height,b=Math.min,d=Math.max,D=d(this.cropX,0),E=d(this.cropY,0),w=m.naturalWidth||m.width,O=m.naturalHeight||m.height,F=D*i,B=E*c,V=b(o*i,w-F),H=b(h*c,O-B),Y=-o/2,se=-h/2,ne=b(o,w/i-D),be=b(h,O/c-E);m&&y.drawImage(m,F,B,V,H,Y,se,ne,be)}},_needsResize:function(){var y=this.getTotalObjectScaling();return y.scaleX!==this._lastScaleX||y.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(y,m){this.setElement(u.util.getById(y),m),u.util.addClass(this.getElement(),u.Image.CSS_CANVAS)},_initConfig:function(y){y||(y={}),this.setOptions(y),this._setWidthHeight(y)},_initFilters:function(y,m){y&&y.length?u.util.enlivenObjects(y,function(i){m&&m(i)},"fabric.Image.filters"):m&&m()},_setWidthHeight:function(y){y||(y={});var m=this.getElement();this.width=y.width||m.naturalWidth||m.width||0,this.height=y.height||m.naturalHeight||m.height||0},parsePreserveAspectRatioAttribute:function(){var y=u.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),m=this._element.width,i=this._element.height,c=1,o=1,h=0,b=0,d=0,D=0,E,w=this.width,O=this.height,F={width:w,height:O};return y&&(y.alignX!=="none"||y.alignY!=="none")?(y.meetOrSlice==="meet"&&(c=o=u.util.findScaleToFit(this._element,F),E=(w-m*c)/2,y.alignX==="Min"&&(h=-E),y.alignX==="Max"&&(h=E),E=(O-i*o)/2,y.alignY==="Min"&&(b=-E),y.alignY==="Max"&&(b=E)),y.meetOrSlice==="slice"&&(c=o=u.util.findScaleToCover(this._element,F),E=m-w/c,y.alignX==="Mid"&&(d=E/2),y.alignX==="Max"&&(d=E),E=i-O/o,y.alignY==="Mid"&&(D=E/2),y.alignY==="Max"&&(D=E),m=w/c,i=O/o)):(c=w/m,o=O/i),{width:m,height:i,scaleX:c,scaleY:o,offsetLeft:h,offsetTop:b,cropX:d,cropY:D}}}),u.Image.CSS_CANVAS="canvas-img",u.Image.prototype.getSvgSrc=u.Image.prototype.getSrc,u.Image.fromObject=function(y,m){var i=u.util.object.clone(y);u.util.loadImage(i.src,function(c,o){if(o){m&&m(null,!0);return}u.Image.prototype._initFilters.call(i,i.filters,function(h){i.filters=h||[],u.Image.prototype._initFilters.call(i,[i.resizeFilter],function(b){i.resizeFilter=b[0],u.util.enlivenObjects([i.clipPath],function(d){i.clipPath=d[0];var D=new u.Image(c,i);m(D,!1)})})})},null,i.crossOrigin)},u.Image.fromURL=function(y,m,i){u.util.loadImage(y,function(c,o){m&&m(new u.Image(c,i),o)},null,i&&i.crossOrigin)},u.Image.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),u.Image.fromElement=function(y,m,i){var c=u.parseAttributes(y,u.Image.ATTRIBUTE_NAMES);u.Image.fromURL(c["xlink:href"],m,s(i?u.util.object.clone(i):{},c))}}(x),u.util.object.extend(u.Object.prototype,{_getAngleValueForStraighten:function(){var C=this.angle%360;return C>0?Math.round((C-1)/90)*90:Math.round(C/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(C){C=C||{};var s=function(){},y=C.onComplete||s,m=C.onChange||s,i=this;return u.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(c){i.rotate(c),m()},onComplete:function(){i.setCoords(),y()}}),this}}),u.util.object.extend(u.StaticCanvas.prototype,{straightenObject:function(C){return C.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(C){return C.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function C(y,m){var i="precision "+m+` float;
void main(){}`,c=y.createShader(y.FRAGMENT_SHADER);return y.shaderSource(c,i),y.compileShader(c),!!y.getShaderParameter(c,y.COMPILE_STATUS)}u.isWebglSupported=function(y){if(u.isLikelyNode)return!1;y=y||u.WebglFilterBackend.prototype.tileSize;var m=document.createElement("canvas"),i=m.getContext("webgl")||m.getContext("experimental-webgl"),c=!1;if(i){u.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),c=u.maxTextureSize>=y;for(var o=["highp","mediump","lowp"],h=0;h<3;h++)if(C(i,o[h])){u.webGlPrecision=o[h];break}}return this.isSupported=c,c},u.WebglFilterBackend=s;function s(y){y&&y.tileSize&&(this.tileSize=y.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(y,m){this.dispose(),this.createWebGLCanvas(y,m),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(y,m)},chooseFastestCopyGLTo2DMethod:function(y,m){var i=typeof window.performance<"u",c;try{new ImageData(1,1),c=!0}catch{c=!1}var o=typeof ArrayBuffer<"u",h=typeof Uint8ClampedArray<"u";if(i&&c&&o&&h){var b=u.util.createCanvasElement(),d=new ArrayBuffer(y*m*4);if(u.forceGLPutImageData){this.imageBuffer=d,this.copyGLTo2D=R;return}var D={imageBuffer:d,destinationWidth:y,destinationHeight:m,targetCanvas:b},E,w,O;b.width=y,b.height=m,E=window.performance.now(),j.call(D,this.gl,D),w=window.performance.now()-E,E=window.performance.now(),R.call(D,this.gl,D),O=window.performance.now()-E,w>O?(this.imageBuffer=d,this.copyGLTo2D=R):this.copyGLTo2D=j}},createWebGLCanvas:function(y,m){var i=u.util.createCanvasElement();i.width=y,i.height=m;var c={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=i.getContext("webgl",c);o||(o=i.getContext("experimental-webgl",c)),o&&(o.clearColor(0,0,0,0),this.canvas=i,this.gl=o)},applyFilters:function(y,m,i,c,o,h){var b=this.gl,d;h&&(d=this.getCachedTexture(h,m));var D={originalWidth:m.width||m.originalWidth,originalHeight:m.height||m.originalHeight,sourceWidth:i,sourceHeight:c,destinationWidth:i,destinationHeight:c,context:b,sourceTexture:this.createTexture(b,i,c,!d&&m),targetTexture:this.createTexture(b,i,c),originalTexture:d||this.createTexture(b,i,c,!d&&m),passes:y.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},E=b.createFramebuffer();return b.bindFramebuffer(b.FRAMEBUFFER,E),y.forEach(function(w){w&&w.applyTo(D)}),k(D),this.copyGLTo2D(b,D),b.bindTexture(b.TEXTURE_2D,null),b.deleteTexture(D.sourceTexture),b.deleteTexture(D.targetTexture),b.deleteFramebuffer(E),o.getContext("2d").setTransform(1,0,0,1,0,0),D},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(y,m,i,c){var o=y.createTexture();return y.bindTexture(y.TEXTURE_2D,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),c?y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,c):y.texImage2D(y.TEXTURE_2D,0,y.RGBA,m,i,0,y.RGBA,y.UNSIGNED_BYTE,null),o},getCachedTexture:function(y,m){if(this.textureCache[y])return this.textureCache[y];var i=this.createTexture(this.gl,m.width,m.height,m);return this.textureCache[y]=i,i},evictCachesForKey:function(y){this.textureCache[y]&&(this.gl.deleteTexture(this.textureCache[y]),delete this.textureCache[y])},copyGLTo2D:j,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var y=this.gl,m={renderer:"",vendor:""};if(!y)return m;var i=y.getExtension("WEBGL_debug_renderer_info");if(i){var c=y.getParameter(i.UNMASKED_RENDERER_WEBGL),o=y.getParameter(i.UNMASKED_VENDOR_WEBGL);c&&(m.renderer=c.toLowerCase()),o&&(m.vendor=o.toLowerCase())}return this.gpuInfo=m,m}}}();function k(C){var s=C.targetCanvas,y=s.width,m=s.height,i=C.destinationWidth,c=C.destinationHeight;(y!==i||m!==c)&&(s.width=i,s.height=c)}function j(C,s){var y=C.canvas,m=s.targetCanvas,i=m.getContext("2d");i.translate(0,m.height),i.scale(1,-1);var c=y.height-m.height;i.drawImage(y,0,c,m.width,m.height,0,0,m.width,m.height)}function R(C,s){var y=s.targetCanvas,m=y.getContext("2d"),i=s.destinationWidth,c=s.destinationHeight,o=i*c*4,h=new Uint8Array(this.imageBuffer,0,o),b=new Uint8ClampedArray(this.imageBuffer,0,o);C.readPixels(0,0,i,c,C.RGBA,C.UNSIGNED_BYTE,h);var d=new ImageData(b,i,c);m.putImageData(d,0,0)}(function(){"use strict";var C=function(){};u.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:C,dispose:C,clearWebGLCaches:C,resources:{},applyFilters:function(y,m,i,c,o){var h=o.getContext("2d");h.drawImage(m,0,0,i,c);var b=h.getImageData(0,0,i,c),d=h.getImageData(0,0,i,c),D={sourceWidth:i,sourceHeight:c,imageData:b,originalEl:m,originalImageData:d,canvasEl:o,ctx:h,filterBackend:this};return y.forEach(function(E){E.applyTo(D)}),(D.imageData.width!==i||D.imageData.height!==c)&&(o.width=D.imageData.width,o.height=D.imageData.height),h.putImageData(D.imageData,0,0),D}}})(),u.Image=u.Image||{},u.Image.filters=u.Image.filters||{},u.Image.filters.BaseFilter=u.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(C){C&&this.setOptions(C)},setOptions:function(C){for(var s in C)this[s]=C[s]},createProgram:function(C,s,y){s=s||this.fragmentSource,y=y||this.vertexSource,u.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+u.webGlPrecision+" float"));var m=C.createShader(C.VERTEX_SHADER);if(C.shaderSource(m,y),C.compileShader(m),!C.getShaderParameter(m,C.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+C.getShaderInfoLog(m));var i=C.createShader(C.FRAGMENT_SHADER);if(C.shaderSource(i,s),C.compileShader(i),!C.getShaderParameter(i,C.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+C.getShaderInfoLog(i));var c=C.createProgram();if(C.attachShader(c,m),C.attachShader(c,i),C.linkProgram(c),!C.getProgramParameter(c,C.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+C.getProgramInfoLog(c));var o=this.getAttributeLocations(C,c),h=this.getUniformLocations(C,c)||{};return h.uStepW=C.getUniformLocation(c,"uStepW"),h.uStepH=C.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:o,uniformLocations:h}},getAttributeLocations:function(C,s){return{aPosition:C.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(C,s,y){var m=s.aPosition,i=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,i),C.enableVertexAttribArray(m),C.vertexAttribPointer(m,2,C.FLOAT,!1,0,0),C.bufferData(C.ARRAY_BUFFER,y,C.STATIC_DRAW)},_setupFrameBuffer:function(C){var s=C.context,y,m;C.passes>1?(y=C.destinationWidth,m=C.destinationHeight,(C.sourceWidth!==y||C.sourceHeight!==m)&&(s.deleteTexture(C.targetTexture),C.targetTexture=C.filterBackend.createTexture(s,y,m)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,C.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(C){C.passes--,C.pass++;var s=C.targetTexture;C.targetTexture=C.sourceTexture,C.sourceTexture=s},isNeutralState:function(){var C=this.mainParameter,s=u.Image.filters[this.type].prototype;if(C)if(Array.isArray(s[C])){for(var y=s[C].length;y--;)if(this[C][y]!==s[C][y])return!1;return!0}else return s[C]===this[C];else return!1},applyTo:function(C){C.webgl?(this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C)):this.applyTo2d(C)},retrieveShader:function(C){return C.programCache.hasOwnProperty(this.type)||(C.programCache[this.type]=this.createProgram(C.context)),C.programCache[this.type]},applyToWebGL:function(C){var s=C.context,y=this.retrieveShader(C);C.pass===0&&C.originalTexture?s.bindTexture(s.TEXTURE_2D,C.originalTexture):s.bindTexture(s.TEXTURE_2D,C.sourceTexture),s.useProgram(y.program),this.sendAttributeData(s,y.attributeLocations,C.aPosition),s.uniform1f(y.uniformLocations.uStepW,1/C.sourceWidth),s.uniform1f(y.uniformLocations.uStepH,1/C.sourceHeight),this.sendUniformData(s,y.uniformLocations),s.viewport(0,0,C.destinationWidth,C.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(C,s,y){C.activeTexture(y),C.bindTexture(C.TEXTURE_2D,s),C.activeTexture(C.TEXTURE0)},unbindAdditionalTexture:function(C,s){C.activeTexture(s),C.bindTexture(C.TEXTURE_2D,null),C.activeTexture(C.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(C){this[this.mainParameter]=C},sendUniformData:function(){},createHelpLayer:function(C){if(!C.helpLayer){var s=document.createElement("canvas");s.width=C.sourceWidth,s.height=C.sourceHeight,C.helpLayer=s}},toObject:function(){var C={type:this.type},s=this.mainParameter;return s&&(C[s]=this[s]),C},toJSON:function(){return this.toObject()}}),u.Image.filters.BaseFilter.fromObject=function(C,s){var y=new u.Image.filters[C.type](C);return s&&s(y),y},function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.ColorMatrix=m(y.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(i){this.callSuper("initialize",i),this.matrix=this.matrix.slice(0)},applyTo2d:function(i){var c=i.imageData,o=c.data,h=o.length,b=this.matrix,d,D,E,w,O,F=this.colorsOnly;for(O=0;O<h;O+=4)d=o[O],D=o[O+1],E=o[O+2],F?(o[O]=d*b[0]+D*b[1]+E*b[2]+b[4]*255,o[O+1]=d*b[5]+D*b[6]+E*b[7]+b[9]*255,o[O+2]=d*b[10]+D*b[11]+E*b[12]+b[14]*255):(w=o[O+3],o[O]=d*b[0]+D*b[1]+E*b[2]+w*b[3]+b[4]*255,o[O+1]=d*b[5]+D*b[6]+E*b[7]+w*b[8]+b[9]*255,o[O+2]=d*b[10]+D*b[11]+E*b[12]+w*b[13]+b[14]*255,o[O+3]=d*b[15]+D*b[16]+E*b[17]+w*b[18]+b[19]*255)},getUniformLocations:function(i,c){return{uColorMatrix:i.getUniformLocation(c,"uColorMatrix"),uConstants:i.getUniformLocation(c,"uConstants")}},sendUniformData:function(i,c){var o=this.matrix,h=[o[0],o[1],o[2],o[3],o[5],o[6],o[7],o[8],o[10],o[11],o[12],o[13],o[15],o[16],o[17],o[18]],b=[o[4],o[9],o[14],o[19]];i.uniformMatrix4fv(c.uColorMatrix,!1,h),i.uniform4fv(c.uConstants,b)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Brightness=m(y.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(i){if(this.brightness!==0){var c=i.imageData,o=c.data,h,b=o.length,d=Math.round(this.brightness*255);for(h=0;h<b;h+=4)o[h]=o[h]+d,o[h+1]=o[h+1]+d,o[h+2]=o[h+2]+d}},getUniformLocations:function(i,c){return{uBrightness:i.getUniformLocation(c,"uBrightness")}},sendUniformData:function(i,c){i.uniform1f(c.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.extend,m=s.Image.filters,i=s.util.createClass;m.Convolute=i(m.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(c){var o=Math.sqrt(this.matrix.length),h=this.type+"_"+o+"_"+(this.opaque?1:0),b=this.fragmentSource[h];return c.programCache.hasOwnProperty(h)||(c.programCache[h]=this.createProgram(c.context,b)),c.programCache[h]},applyTo2d:function(c){var o=c.imageData,h=o.data,b=this.matrix,d=Math.round(Math.sqrt(b.length)),D=Math.floor(d/2),E=o.width,w=o.height,O=c.ctx.createImageData(E,w),F=O.data,B=this.opaque?1:0,V,H,Y,se,ne,be,K,Ce,W,Be,Ie,ze,te;for(Ie=0;Ie<w;Ie++)for(Be=0;Be<E;Be++){for(ne=(Ie*E+Be)*4,V=0,H=0,Y=0,se=0,te=0;te<d;te++)for(ze=0;ze<d;ze++)K=Ie+te-D,be=Be+ze-D,!(K<0||K>=w||be<0||be>=E)&&(Ce=(K*E+be)*4,W=b[te*d+ze],V+=h[Ce]*W,H+=h[Ce+1]*W,Y+=h[Ce+2]*W,B||(se+=h[Ce+3]*W));F[ne]=V,F[ne+1]=H,F[ne+2]=Y,B?F[ne+3]=h[ne+3]:F[ne+3]=se}c.imageData=O},getUniformLocations:function(c,o){return{uMatrix:c.getUniformLocation(o,"uMatrix"),uOpaque:c.getUniformLocation(o,"uOpaque"),uHalfSize:c.getUniformLocation(o,"uHalfSize"),uSize:c.getUniformLocation(o,"uSize")}},sendUniformData:function(c,o){c.uniform1fv(o.uMatrix,this.matrix)},toObject:function(){return y(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Grayscale=m(y.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(i){var c=i.imageData,o=c.data,h,b=o.length,d,D=this.mode;for(h=0;h<b;h+=4)D==="average"?d=(o[h]+o[h+1]+o[h+2])/3:D==="lightness"?d=(Math.min(o[h],o[h+1],o[h+2])+Math.max(o[h],o[h+1],o[h+2]))/2:D==="luminosity"&&(d=.21*o[h]+.72*o[h+1]+.07*o[h+2]),o[h]=d,o[h+1]=d,o[h+2]=d},retrieveShader:function(i){var c=this.type+"_"+this.mode;if(!i.programCache.hasOwnProperty(c)){var o=this.fragmentSource[this.mode];i.programCache[c]=this.createProgram(i.context,o)}return i.programCache[c]},getUniformLocations:function(i,c){return{uMode:i.getUniformLocation(c,"uMode")}},sendUniformData:function(i,c){var o=1;i.uniform1i(c.uMode,o)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Invert=m(y.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(i){var c=i.imageData,o=c.data,h,b=o.length;for(h=0;h<b;h+=4)o[h]=255-o[h],o[h+1]=255-o[h+1],o[h+2]=255-o[h+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(i,c){return{uInvert:i.getUniformLocation(c,"uInvert")}},sendUniformData:function(i,c){i.uniform1i(c.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.extend,m=s.Image.filters,i=s.util.createClass;m.Noise=i(m.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(c){if(this.noise!==0){var o=c.imageData,h=o.data,b,d=h.length,D=this.noise,E;for(b=0,d=h.length;b<d;b+=4)E=(.5-Math.random())*D,h[b]+=E,h[b+1]+=E,h[b+2]+=E}},getUniformLocations:function(c,o){return{uNoise:c.getUniformLocation(o,"uNoise"),uSeed:c.getUniformLocation(o,"uSeed")}},sendUniformData:function(c,o){c.uniform1f(o.uNoise,this.noise/255),c.uniform1f(o.uSeed,Math.random())},toObject:function(){return y(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Pixelate=m(y.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(i){var c=i.imageData,o=c.data,h=c.height,b=c.width,d,D,E,w,O,F,B,V,H,Y,se;for(D=0;D<h;D+=this.blocksize)for(E=0;E<b;E+=this.blocksize)for(d=D*4*b+E*4,w=o[d],O=o[d+1],F=o[d+2],B=o[d+3],Y=Math.min(D+this.blocksize,h),se=Math.min(E+this.blocksize,b),V=D;V<Y;V++)for(H=E;H<se;H++)d=V*4*b+H*4,o[d]=w,o[d+1]=O,o[d+2]=F,o[d+3]=B},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(i,c){return{uBlocksize:i.getUniformLocation(c,"uBlocksize"),uStepW:i.getUniformLocation(c,"uStepW"),uStepH:i.getUniformLocation(c,"uStepH")}},sendUniformData:function(i,c){i.uniform1f(c.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.extend,m=s.Image.filters,i=s.util.createClass;m.RemoveColor=i(m.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(c){var o=c.imageData,h=o.data,b,d=this.distance*255,D,E,w,O=new s.Color(this.color).getSource(),F=[O[0]-d,O[1]-d,O[2]-d],B=[O[0]+d,O[1]+d,O[2]+d];for(b=0;b<h.length;b+=4)D=h[b],E=h[b+1],w=h[b+2],D>F[0]&&E>F[1]&&w>F[2]&&D<B[0]&&E<B[1]&&w<B[2]&&(h[b+3]=0)},getUniformLocations:function(c,o){return{uLow:c.getUniformLocation(o,"uLow"),uHigh:c.getUniformLocation(o,"uHigh")}},sendUniformData:function(c,o){var h=new s.Color(this.color).getSource(),b=parseFloat(this.distance),d=[0+h[0]/255-b,0+h[1]/255-b,0+h[2]/255-b,1],D=[h[0]/255+b,h[1]/255+b,h[2]/255+b,1];c.uniform4fv(o.uLow,d),c.uniform4fv(o.uHigh,D)},toObject:function(){return y(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var c in i)y[c]=m(y.ColorMatrix,{type:c,matrix:i[c],mainParameter:!1,colorsOnly:!0}),s.Image.filters[c].fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric,y=s.Image.filters,m=s.util.createClass;y.BlendColor=m(y.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(i){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[i]+`}
}`},retrieveShader:function(i){var c=this.type+"_"+this.mode,o;return i.programCache.hasOwnProperty(c)||(o=this.buildSource(this.mode),i.programCache[c]=this.createProgram(i.context,o)),i.programCache[c]},applyTo2d:function(i){var c=i.imageData,o=c.data,h=o.length,b,d,D,E,w,O,F,B=1-this.alpha;F=new s.Color(this.color).getSource(),b=F[0]*this.alpha,d=F[1]*this.alpha,D=F[2]*this.alpha;for(var V=0;V<h;V+=4)switch(E=o[V],w=o[V+1],O=o[V+2],this.mode){case"multiply":o[V]=E*b/255,o[V+1]=w*d/255,o[V+2]=O*D/255;break;case"screen":o[V]=255-(255-E)*(255-b)/255,o[V+1]=255-(255-w)*(255-d)/255,o[V+2]=255-(255-O)*(255-D)/255;break;case"add":o[V]=E+b,o[V+1]=w+d,o[V+2]=O+D;break;case"diff":case"difference":o[V]=Math.abs(E-b),o[V+1]=Math.abs(w-d),o[V+2]=Math.abs(O-D);break;case"subtract":o[V]=E-b,o[V+1]=w-d,o[V+2]=O-D;break;case"darken":o[V]=Math.min(E,b),o[V+1]=Math.min(w,d),o[V+2]=Math.min(O,D);break;case"lighten":o[V]=Math.max(E,b),o[V+1]=Math.max(w,d),o[V+2]=Math.max(O,D);break;case"overlay":o[V]=b<128?2*E*b/255:255-2*(255-E)*(255-b)/255,o[V+1]=d<128?2*w*d/255:255-2*(255-w)*(255-d)/255,o[V+2]=D<128?2*O*D/255:255-2*(255-O)*(255-D)/255;break;case"exclusion":o[V]=b+E-2*b*E/255,o[V+1]=d+w-2*d*w/255,o[V+2]=D+O-2*D*O/255;break;case"tint":o[V]=b+E*B,o[V+1]=d+w*B,o[V+2]=D+O*B}},getUniformLocations:function(i,c){return{uColor:i.getUniformLocation(c,"uColor")}},sendUniformData:function(i,c){var o=new s.Color(this.color).getSource();o[0]=this.alpha*o[0]/255,o[1]=this.alpha*o[1]/255,o[2]=this.alpha*o[2]/255,o[3]=this.alpha,i.uniform4fv(c.uColor,o)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric,y=s.Image.filters,m=s.util.createClass;y.BlendImage=m(y.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(i){var c=this.type+"_"+this.mode,o=this.fragmentSource[this.mode];return i.programCache.hasOwnProperty(c)||(i.programCache[c]=this.createProgram(i.context,o)),i.programCache[c]},applyToWebGL:function(i){var c=i.context,o=this.createTexture(i.filterBackend,this.image);this.bindAdditionalTexture(c,o,c.TEXTURE1),this.callSuper("applyToWebGL",i),this.unbindAdditionalTexture(c,c.TEXTURE1)},createTexture:function(i,c){return i.getCachedTexture(c.cacheKey,c._element)},calculateMatrix:function(){var i=this.image,c=i._element.width,o=i._element.height;return[1/i.scaleX,0,0,0,1/i.scaleY,0,-i.left/c,-i.top/o,1]},applyTo2d:function(i){var c=i.imageData,o=i.filterBackend.resources,h=c.data,b=h.length,d=c.width,D=c.height,E,w,O,F,B,V,H,Y,se,ne,be=this.image,K;o.blendImage||(o.blendImage=s.util.createCanvasElement()),se=o.blendImage,ne=se.getContext("2d"),se.width!==d||se.height!==D?(se.width=d,se.height=D):ne.clearRect(0,0,d,D),ne.setTransform(be.scaleX,0,0,be.scaleY,be.left,be.top),ne.drawImage(be._element,0,0,d,D),K=ne.getImageData(0,0,d,D).data;for(var Ce=0;Ce<b;Ce+=4)switch(B=h[Ce],V=h[Ce+1],H=h[Ce+2],Y=h[Ce+3],E=K[Ce],w=K[Ce+1],O=K[Ce+2],F=K[Ce+3],this.mode){case"multiply":h[Ce]=B*E/255,h[Ce+1]=V*w/255,h[Ce+2]=H*O/255,h[Ce+3]=Y*F/255;break;case"mask":h[Ce+3]=F;break}},getUniformLocations:function(i,c){return{uTransformMatrix:i.getUniformLocation(c,"uTransformMatrix"),uImage:i.getUniformLocation(c,"uImage")}},sendUniformData:function(i,c){var o=this.calculateMatrix();i.uniform1i(c.uImage,1),i.uniformMatrix3fv(c.uTransformMatrix,!1,o)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(i,c){s.Image.fromObject(i.image,function(o){var h=s.util.object.clone(i);h.image=o,c(new s.Image.filters.BlendImage(h))})}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=Math.pow,m=Math.floor,i=Math.sqrt,c=Math.abs,o=Math.round,h=Math.sin,b=Math.ceil,d=s.Image.filters,D=s.util.createClass;d.Resize=D(d.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(E,w){return{uDelta:E.getUniformLocation(w,"uDelta"),uTaps:E.getUniformLocation(w,"uTaps")}},sendUniformData:function(E,w){E.uniform2fv(w.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),E.uniform1fv(w.uTaps,this.taps)},retrieveShader:function(E){var w=this.getFilterWindow(),O=this.type+"_"+w;if(!E.programCache.hasOwnProperty(O)){var F=this.generateShader(w);E.programCache[O]=this.createProgram(E.context,F)}return E.programCache[O]},getFilterWindow:function(){var E=this.tempScale;return Math.ceil(this.lanczosLobes/E)},getTaps:function(){for(var E=this.lanczosCreate(this.lanczosLobes),w=this.tempScale,O=this.getFilterWindow(),F=new Array(O),B=1;B<=O;B++)F[B-1]=E(B*w);return F},generateShader:function(F){for(var w=new Array(F),O=this.fragmentSourceTOP,F,B=1;B<=F;B++)w[B-1]=B+".0 * uDelta";return O+="uniform float uTaps["+F+`];
`,O+=`void main() {
`,O+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,O+=`  float sum = 1.0;
`,w.forEach(function(V,H){O+="  color += texture2D(uTexture, vTexCoord + "+V+") * uTaps["+H+`];
`,O+="  color += texture2D(uTexture, vTexCoord - "+V+") * uTaps["+H+`];
`,O+="  sum += 2.0 * uTaps["+H+`];
`}),O+=`  gl_FragColor = color / sum;
`,O+="}",O},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(E){E.webgl?(E.passes++,this.width=E.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=E.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),E.destinationWidth=this.dW,this._setupFrameBuffer(E),this.applyToWebGL(E),this._swapTextures(E),E.sourceWidth=E.destinationWidth,this.height=E.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),E.destinationHeight=this.dH,this._setupFrameBuffer(E),this.applyToWebGL(E),this._swapTextures(E),E.sourceHeight=E.destinationHeight):this.applyTo2d(E)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(E){return function(w){if(w>=E||w<=-E)return 0;if(w<11920929e-14&&w>-11920929e-14)return 1;w*=Math.PI;var O=w/E;return h(w)/w*h(O)/O}},applyTo2d:function(E){var w=E.imageData,O=this.scaleX,F=this.scaleY;this.rcpScaleX=1/O,this.rcpScaleY=1/F;var B=w.width,V=w.height,H=o(B*O),Y=o(V*F),se;this.resizeType==="sliceHack"?se=this.sliceByTwo(E,B,V,H,Y):this.resizeType==="hermite"?se=this.hermiteFastResize(E,B,V,H,Y):this.resizeType==="bilinear"?se=this.bilinearFiltering(E,B,V,H,Y):this.resizeType==="lanczos"&&(se=this.lanczosResize(E,B,V,H,Y)),E.imageData=se},sliceByTwo:function(E,w,O,F,B){var V=E.imageData,H=.5,Y=!1,se=!1,ne=w*H,be=O*H,K=s.filterBackend.resources,Ce,W,Be=0,Ie=0,ze=w,te=0;for(K.sliceByTwo||(K.sliceByTwo=document.createElement("canvas")),Ce=K.sliceByTwo,(Ce.width<w*1.5||Ce.height<O)&&(Ce.width=w*1.5,Ce.height=O),W=Ce.getContext("2d"),W.clearRect(0,0,w*1.5,O),W.putImageData(V,0,0),F=m(F),B=m(B);!Y||!se;)w=ne,O=be,F<m(ne*H)?ne=m(ne*H):(ne=F,Y=!0),B<m(be*H)?be=m(be*H):(be=B,se=!0),W.drawImage(Ce,Be,Ie,w,O,ze,te,ne,be),Be=ze,Ie=te,te+=be;return W.getImageData(Be,Ie,F,B)},lanczosResize:function(E,w,O,F,B){function V(q){var Z,fe,G,X,J,Q,ve,he,Se,xe,De;for(te.x=(q+.5)*be,le.x=m(te.x),Z=0;Z<B;Z++){for(te.y=(Z+.5)*K,le.y=m(te.y),J=0,Q=0,ve=0,he=0,Se=0,fe=le.x-Be;fe<=le.x+Be;fe++)if(!(fe<0||fe>=w)){xe=m(1e3*c(fe-te.x)),ze[xe]||(ze[xe]={});for(var ae=le.y-Ie;ae<=le.y+Ie;ae++)ae<0||ae>=O||(De=m(1e3*c(ae-te.y)),ze[xe][De]||(ze[xe][De]=ne(i(y(xe*Ce,2)+y(De*W,2))/1e3)),G=ze[xe][De],G>0&&(X=(ae*w+fe)*4,J+=G,Q+=G*H[X],ve+=G*H[X+1],he+=G*H[X+2],Se+=G*H[X+3]))}X=(Z*F+q)*4,se[X]=Q/J,se[X+1]=ve/J,se[X+2]=he/J,se[X+3]=Se/J}return++q<F?V(q):Y}var H=E.imageData.data,Y=E.ctx.createImageData(F,B),se=Y.data,ne=this.lanczosCreate(this.lanczosLobes),be=this.rcpScaleX,K=this.rcpScaleY,Ce=2/this.rcpScaleX,W=2/this.rcpScaleY,Be=b(be*this.lanczosLobes/2),Ie=b(K*this.lanczosLobes/2),ze={},te={},le={};return V(0)},bilinearFiltering:function(E,w,O,F,B){var V,H,Y,se,ne,be,K,Ce,W,Be,Ie,ze,te=0,le,q=this.rcpScaleX,Z=this.rcpScaleY,fe=4*(w-1),G=E.imageData,X=G.data,J=E.ctx.createImageData(F,B),Q=J.data;for(K=0;K<B;K++)for(Ce=0;Ce<F;Ce++)for(ne=m(q*Ce),be=m(Z*K),W=q*Ce-ne,Be=Z*K-be,le=4*(be*w+ne),Ie=0;Ie<4;Ie++)V=X[le+Ie],H=X[le+4+Ie],Y=X[le+fe+Ie],se=X[le+fe+4+Ie],ze=V*(1-W)*(1-Be)+H*W*(1-Be)+Y*Be*(1-W)+se*W*Be,Q[te++]=ze;return J},hermiteFastResize:function(E,w,O,F,B){for(var V=this.rcpScaleX,H=this.rcpScaleY,Y=b(V/2),se=b(H/2),ne=E.imageData,be=ne.data,K=E.ctx.createImageData(F,B),Ce=K.data,W=0;W<B;W++)for(var Be=0;Be<F;Be++){for(var Ie=(Be+W*F)*4,ze=0,te=0,le=0,q=0,Z=0,fe=0,G=0,X=(W+.5)*H,J=m(W*H);J<(W+1)*H;J++)for(var Q=c(X-(J+.5))/se,ve=(Be+.5)*V,he=Q*Q,Se=m(Be*V);Se<(Be+1)*V;Se++){var xe=c(ve-(Se+.5))/Y,De=i(he+xe*xe);De>1&&De<-1||(ze=2*De*De*De-3*De*De+1,ze>0&&(xe=4*(Se+J*w),G+=ze*be[xe+3],le+=ze,be[xe+3]<255&&(ze=ze*be[xe+3]/250),q+=ze*be[xe],Z+=ze*be[xe+1],fe+=ze*be[xe+2],te+=ze))}Ce[Ie]=q/te,Ce[Ie+1]=Z/te,Ce[Ie+2]=fe/te,Ce[Ie+3]=G/le}return K},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Contrast=m(y.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(i){if(this.contrast!==0){var c=i.imageData,o,b,h=c.data,b=h.length,d=Math.floor(this.contrast*255),D=259*(d+255)/(255*(259-d));for(o=0;o<b;o+=4)h[o]=D*(h[o]-128)+128,h[o+1]=D*(h[o+1]-128)+128,h[o+2]=D*(h[o+2]-128)+128}},getUniformLocations:function(i,c){return{uContrast:i.getUniformLocation(c,"uContrast")}},sendUniformData:function(i,c){i.uniform1f(c.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Saturation=m(y.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(i){if(this.saturation!==0){var c=i.imageData,o=c.data,h=o.length,b=-this.saturation,d,D;for(d=0;d<h;d+=4)D=Math.max(o[d],o[d+1],o[d+2]),o[d]+=D!==o[d]?(D-o[d])*b:0,o[d+1]+=D!==o[d+1]?(D-o[d+1])*b:0,o[d+2]+=D!==o[d+2]?(D-o[d+2])*b:0}},getUniformLocations:function(i,c){return{uSaturation:i.getUniformLocation(c,"uSaturation")}},sendUniformData:function(i,c){i.uniform1f(c.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Vibrance=m(y.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(i){if(this.vibrance!==0){var c=i.imageData,o=c.data,h=o.length,b=-this.vibrance,d,D,E,w;for(d=0;d<h;d+=4)D=Math.max(o[d],o[d+1],o[d+2]),E=(o[d]+o[d+1]+o[d+2])/3,w=Math.abs(D-E)*2/255*b,o[d]+=D!==o[d]?(D-o[d])*w:0,o[d+1]+=D!==o[d+1]?(D-o[d+1])*w:0,o[d+2]+=D!==o[d+2]?(D-o[d+2])*w:0}},getUniformLocations:function(i,c){return{uVibrance:i.getUniformLocation(c,"uVibrance")}},sendUniformData:function(i,c){i.uniform1f(c.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Blur=m(y.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(i){i.webgl?(this.aspectRatio=i.sourceWidth/i.sourceHeight,i.passes++,this._setupFrameBuffer(i),this.horizontal=!0,this.applyToWebGL(i),this._swapTextures(i),this._setupFrameBuffer(i),this.horizontal=!1,this.applyToWebGL(i),this._swapTextures(i)):this.applyTo2d(i)},applyTo2d:function(i){i.imageData=this.simpleBlur(i)},simpleBlur:function(i){var c=i.filterBackend.resources,o,h,b=i.imageData.width,d=i.imageData.height;c.blurLayer1||(c.blurLayer1=s.util.createCanvasElement(),c.blurLayer2=s.util.createCanvasElement()),o=c.blurLayer1,h=c.blurLayer2,(o.width!==b||o.height!==d)&&(h.width=o.width=b,h.height=o.height=d);var D=o.getContext("2d"),E=h.getContext("2d"),w=15,O,F,B,V,H=this.blur*.06*.5;for(D.putImageData(i.imageData,0,0),E.clearRect(0,0,b,d),V=-w;V<=w;V++)O=(Math.random()-.5)/4,F=V/w,B=H*F*b+O,E.globalAlpha=1-Math.abs(F),E.drawImage(o,B,O),D.drawImage(h,0,0),E.globalAlpha=1,E.clearRect(0,0,h.width,h.height);for(V=-w;V<=w;V++)O=(Math.random()-.5)/4,F=V/w,B=H*F*d+O,E.globalAlpha=1-Math.abs(F),E.drawImage(o,O,B),D.drawImage(h,0,0),E.globalAlpha=1,E.clearRect(0,0,h.width,h.height);i.ctx.drawImage(o,0,0);var Y=i.ctx.getImageData(0,0,o.width,o.height);return D.globalAlpha=1,D.clearRect(0,0,o.width,o.height),Y},getUniformLocations:function(i,c){return{delta:i.getUniformLocation(c,"uDelta")}},sendUniformData:function(i,c){var o=this.chooseRightDelta();i.uniform2fv(c.delta,o)},chooseRightDelta:function(){var i=1,c=[0,0],o;return this.horizontal?this.aspectRatio>1&&(i=1/this.aspectRatio):this.aspectRatio<1&&(i=this.aspectRatio),o=i*this.blur*.12,this.horizontal?c[0]=o:c[1]=o,c}}),y.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Gamma=m(y.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(i){this.gamma=[1,1,1],y.BaseFilter.prototype.initialize.call(this,i)},applyTo2d:function(i){var c=i.imageData,o=c.data,h=this.gamma,b=o.length,d=1/h[0],D=1/h[1],E=1/h[2],w;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),w=0,b=256;w<b;w++)this.rVals[w]=Math.pow(w/255,d)*255,this.gVals[w]=Math.pow(w/255,D)*255,this.bVals[w]=Math.pow(w/255,E)*255;for(w=0,b=o.length;w<b;w+=4)o[w]=this.rVals[o[w]],o[w+1]=this.gVals[o[w+1]],o[w+2]=this.bVals[o[w+2]]},getUniformLocations:function(i,c){return{uGamma:i.getUniformLocation(c,"uGamma")}},sendUniformData:function(i,c){i.uniform3fv(c.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.Composed=m(y.BaseFilter,{type:"Composed",subFilters:[],initialize:function(i){this.callSuper("initialize",i),this.subFilters=this.subFilters.slice(0)},applyTo:function(i){i.passes+=this.subFilters.length-1,this.subFilters.forEach(function(c){c.applyTo(i)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(i){return i.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(i){return!i.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(i,c){var o=i.subFilters||[],h=o.map(function(d){return new s.Image.filters[d.type](d)}),b=new s.Image.filters.Composed({subFilters:h});return c&&c(b),b}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.Image.filters,m=s.util.createClass;y.HueRotation=m(y.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var i=this.rotation*Math.PI,c=s.util.cos(i),o=s.util.sin(i),h=1/3,b=Math.sqrt(h)*o,d=1-c;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=c+d/3,this.matrix[1]=h*d-b,this.matrix[2]=h*d+b,this.matrix[5]=h*d+b,this.matrix[6]=c+h*d,this.matrix[7]=h*d-b,this.matrix[10]=h*d-b,this.matrix[11]=h*d+b,this.matrix[12]=c+h*d},isNeutralState:function(i){return this.calculateMatrix(),y.BaseFilter.prototype.isNeutralState.call(this,i)},applyTo:function(i){this.calculateMatrix(),y.BaseFilter.prototype.applyTo.call(this,i)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),y=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var m="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(m),cacheProperties:s.Object.prototype.cacheProperties.concat(m),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(i,c){this.styles=c?c.styles||{}:{},this.text=i,this.__skipDimension=!0,this.callSuper("initialize",c),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var i=this.path;i&&(i.segmentsInfo=s.util.getPathSegmentsInfo(i.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var i=this._splitTextIntoLines(this.text);return this.textLines=i.lines,this._textLines=i.graphemeLines,this._unwrappedTextLines=i._unwrappedLines,this._text=i.graphemeText,i},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var i,c,o,h,b,d,D,E=0,w=this._textLines.length;E<w;E++)if(!(this.textAlign!=="justify"&&(E===w-1||this.isEndOfWrapping(E)))&&(h=0,b=this._textLines[E],c=this.getLineWidth(E),c<this.width&&(D=this.textLines[E].match(this._reSpacesAndTabs)))){o=D.length,i=(this.width-c)/o;for(var O=0,F=b.length;O<=F;O++)d=this.__charBounds[E][O],this._reSpaceAndTab.test(b[O])?(d.width+=i,d.kernedWidth+=i,d.left+=h,h+=i):d.left+=h}},isEndOfWrapping:function(i){return i===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var i=this.callSuper("_getCacheCanvasDimensions"),c=this.fontSize;return i.width+=c*i.zoomX,i.height+=c*i.zoomY,i},_render:function(i){var c=this.path;c&&!c.isNotVisible()&&c._render(i),this._setTextStyles(i),this._renderTextLinesBackground(i),this._renderTextDecoration(i,"underline"),this._renderText(i),this._renderTextDecoration(i,"overline"),this._renderTextDecoration(i,"linethrough")},_renderText:function(i){this.paintFirst==="stroke"?(this._renderTextStroke(i),this._renderTextFill(i)):(this._renderTextFill(i),this._renderTextStroke(i))},_setTextStyles:function(i,c,o){i.textBaseline="alphabetic",i.font=this._getFontDeclaration(c,o)},calcTextWidth:function(){for(var i=this.getLineWidth(0),c=1,o=this._textLines.length;c<o;c++){var h=this.getLineWidth(c);h>i&&(i=h)}return i},_renderTextLine:function(i,c,o,h,b,d){this._renderChars(i,c,o,h,b,d)},_renderTextLinesBackground:function(i){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var c,o,h=i.fillStyle,b,d,D=this._getLeftOffset(),E=this._getTopOffset(),w=0,O=0,F,B,V=this.path,H,Y=0,se=this._textLines.length;Y<se;Y++){if(c=this.getHeightOfLine(Y),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Y)){E+=c;continue}b=this._textLines[Y],o=this._getLineLeftOffset(Y),O=0,w=0,d=this.getValueOfPropertyAt(Y,0,"textBackgroundColor");for(var ne=0,be=b.length;ne<be;ne++)F=this.__charBounds[Y][ne],B=this.getValueOfPropertyAt(Y,ne,"textBackgroundColor"),V?(i.save(),i.translate(F.renderLeft,F.renderTop),i.rotate(F.angle),i.fillStyle=B,B&&i.fillRect(-F.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),F.width,c/this.lineHeight),i.restore()):B!==d?(H=D+o+w,this.direction==="rtl"&&(H=this.width-H-O),i.fillStyle=d,d&&i.fillRect(H,E,O,c/this.lineHeight),w=F.left,O=F.width,d=B):O+=F.kernedWidth;B&&!V&&(H=D+o+w,this.direction==="rtl"&&(H=this.width-H-O),i.fillStyle=B,i.fillRect(H,E,O,c/this.lineHeight)),E+=c}i.fillStyle=h,this._removeShadow(i)}},getFontCache:function(i){var c=i.fontFamily.toLowerCase();s.charWidthsCache[c]||(s.charWidthsCache[c]={});var o=s.charWidthsCache[c],h=i.fontStyle.toLowerCase()+"_"+(i.fontWeight+"").toLowerCase();return o[h]||(o[h]={}),o[h]},_measureChar:function(i,c,o,h){var b=this.getFontCache(c),d=this._getFontDeclaration(c),D=this._getFontDeclaration(h),E=o+i,w=d===D,O,F,B,V=c.fontSize/this.CACHE_FONT_SIZE,H;if(o&&b[o]!==void 0&&(B=b[o]),b[i]!==void 0&&(H=O=b[i]),w&&b[E]!==void 0&&(F=b[E],H=F-B),O===void 0||B===void 0||F===void 0){var Y=this.getMeasuringContext();this._setTextStyles(Y,c,!0)}return O===void 0&&(H=O=Y.measureText(i).width,b[i]=O),B===void 0&&w&&o&&(B=Y.measureText(o).width,b[o]=B),w&&F===void 0&&(F=Y.measureText(E).width,b[E]=F,H=F-B),{width:O*V,kernedWidth:H*V}},getHeightOfChar:function(i,c){return this.getValueOfPropertyAt(i,c,"fontSize")},measureLine:function(i){var c=this._measureLine(i);return this.charSpacing!==0&&(c.width-=this._getWidthOfCharSpacing()),c.width<0&&(c.width=0),c},_measureLine:function(i){var c=0,o,h,b=this._textLines[i],d,D,E=0,w=new Array(b.length),O=0,F,B,V=this.path,H=this.pathSide==="right";for(this.__charBounds[i]=w,o=0;o<b.length;o++)h=b[o],D=this._getGraphemeBox(h,i,o,d),w[o]=D,c+=D.kernedWidth,d=h;if(w[o]={left:D?D.left+D.width:0,width:0,kernedWidth:0,height:this.fontSize},V){switch(B=V.segmentsInfo[V.segmentsInfo.length-1].length,F=s.util.getPointOnPath(V.path,0,V.segmentsInfo),F.x+=V.pathOffset.x,F.y+=V.pathOffset.y,this.textAlign){case"left":O=H?B-c:0;break;case"center":O=(B-c)/2;break;case"right":O=H?0:B-c;break}for(O+=this.pathStartOffset*(H?-1:1),o=H?b.length-1:0;H?o>=0:o<b.length;H?o--:o++)D=w[o],O>B?O%=B:O<0&&(O+=B),this._setGraphemeOnPath(O,D,F),O+=D.kernedWidth}return{width:c,numOfSpaces:E}},_setGraphemeOnPath:function(i,c,o){var h=i+c.kernedWidth/2,b=this.path,d=s.util.getPointOnPath(b.path,h,b.segmentsInfo);c.renderLeft=d.x-o.x,c.renderTop=d.y-o.y,c.angle=d.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(i,c,o,h,b){var d=this.getCompleteStyleDeclaration(c,o),D=h?this.getCompleteStyleDeclaration(c,o-1):{},E=this._measureChar(i,d,h,D),w=E.kernedWidth,O=E.width,F;this.charSpacing!==0&&(F=this._getWidthOfCharSpacing(),O+=F,w+=F);var B={width:O,left:0,height:d.fontSize,kernedWidth:w,deltaY:d.deltaY};if(o>0&&!b){var V=this.__charBounds[c][o-1];B.left=V.left+V.width+E.kernedWidth-E.width}return B},getHeightOfLine:function(i){if(this.__lineHeights[i])return this.__lineHeights[i];for(var c=this._textLines[i],o=this.getHeightOfChar(i,0),h=1,b=c.length;h<b;h++)o=Math.max(this.getHeightOfChar(i,h),o);return this.__lineHeights[i]=o*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var i,c=0,o=0,h=this._textLines.length;o<h;o++)i=this.getHeightOfLine(o),c+=o===h-1?i/this.lineHeight:i;return c},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(i,c){i.save();for(var o=0,h=this._getLeftOffset(),b=this._getTopOffset(),d=0,D=this._textLines.length;d<D;d++){var E=this.getHeightOfLine(d),w=E/this.lineHeight,O=this._getLineLeftOffset(d);this._renderTextLine(c,i,this._textLines[d],h+O,b+o+w,d),o+=E}i.restore()},_renderTextFill:function(i){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(i,"fillText")},_renderTextStroke:function(i){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(i),i.save(),this._setLineDash(i,this.strokeDashArray),i.beginPath(),this._renderTextCommon(i,"strokeText"),i.closePath(),i.restore())},_renderChars:function(i,c,o,h,b,d){var D=this.getHeightOfLine(d),E=this.textAlign.indexOf("justify")!==-1,w,O,F="",B,V=0,H,Y=this.path,se=!E&&this.charSpacing===0&&this.isEmptyStyles(d)&&!Y,ne=this.direction==="ltr",be=this.direction==="ltr"?1:-1,K;if(c.save(),b-=D*this._fontSizeFraction/this.lineHeight,se){c.canvas.setAttribute("dir",ne?"ltr":"rtl"),c.direction=ne?"ltr":"rtl",c.textAlign=ne?"left":"right",this._renderChar(i,c,d,0,o.join(""),h,b,D),c.restore();return}for(var Ce=0,W=o.length-1;Ce<=W;Ce++)H=Ce===W||this.charSpacing||Y,F+=o[Ce],B=this.__charBounds[d][Ce],V===0?(h+=be*(B.kernedWidth-B.width),V+=B.width):V+=B.kernedWidth,E&&!H&&this._reSpaceAndTab.test(o[Ce])&&(H=!0),H||(w=w||this.getCompleteStyleDeclaration(d,Ce),O=this.getCompleteStyleDeclaration(d,Ce+1),H=this._hasStyleChanged(w,O)),H&&(Y?(c.save(),c.translate(B.renderLeft,B.renderTop),c.rotate(B.angle),this._renderChar(i,c,d,Ce,F,-V/2,0,D),c.restore()):(K=h,c.canvas.setAttribute("dir",ne?"ltr":"rtl"),c.direction=ne?"ltr":"rtl",c.textAlign=ne?"left":"right",this._renderChar(i,c,d,Ce,F,K,b,D)),F="",w=O,h+=be*V,V=0);c.restore()},_applyPatternGradientTransformText:function(i){var c=s.util.createCanvasElement(),o,h=this.width+this.strokeWidth,b=this.height+this.strokeWidth;return c.width=h,c.height=b,o=c.getContext("2d"),o.beginPath(),o.moveTo(0,0),o.lineTo(h,0),o.lineTo(h,b),o.lineTo(0,b),o.closePath(),o.translate(h/2,b/2),o.fillStyle=i.toLive(o),this._applyPatternGradientTransform(o,i),o.fill(),o.createPattern(c,"no-repeat")},handleFiller:function(i,c,o){var h,b;return o.toLive?o.gradientUnits==="percentage"||o.gradientTransform||o.patternTransform?(h=-this.width/2,b=-this.height/2,i.translate(h,b),i[c]=this._applyPatternGradientTransformText(o),{offsetX:h,offsetY:b}):(i[c]=o.toLive(i,this),this._applyPatternGradientTransform(i,o)):(i[c]=o,{offsetX:0,offsetY:0})},_setStrokeStyles:function(i,c){return i.lineWidth=c.strokeWidth,i.lineCap=this.strokeLineCap,i.lineDashOffset=this.strokeDashOffset,i.lineJoin=this.strokeLineJoin,i.miterLimit=this.strokeMiterLimit,this.handleFiller(i,"strokeStyle",c.stroke)},_setFillStyles:function(i,c){return this.handleFiller(i,"fillStyle",c.fill)},_renderChar:function(i,c,o,h,b,d,D){var E=this._getStyleDeclaration(o,h),w=this.getCompleteStyleDeclaration(o,h),O=i==="fillText"&&w.fill,F=i==="strokeText"&&w.stroke&&w.strokeWidth,B,V;!F&&!O||(c.save(),O&&(B=this._setFillStyles(c,w)),F&&(V=this._setStrokeStyles(c,w)),c.font=this._getFontDeclaration(w),E&&E.textBackgroundColor&&this._removeShadow(c),E&&E.deltaY&&(D+=E.deltaY),O&&c.fillText(b,d-B.offsetX,D-B.offsetY),F&&c.strokeText(b,d-V.offsetX,D-V.offsetY),c.restore())},setSuperscript:function(i,c){return this._setScript(i,c,this.superscript)},setSubscript:function(i,c){return this._setScript(i,c,this.subscript)},_setScript:function(i,c,o){var h=this.get2DCursorLocation(i,!0),b=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize"),d=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"deltaY"),D={fontSize:b*o.size,deltaY:d+b*o.baseline};return this.setSelectionStyles(D,i,c),this},_hasStyleChanged:function(i,c){return i.fill!==c.fill||i.stroke!==c.stroke||i.strokeWidth!==c.strokeWidth||i.fontSize!==c.fontSize||i.fontFamily!==c.fontFamily||i.fontWeight!==c.fontWeight||i.fontStyle!==c.fontStyle||i.deltaY!==c.deltaY},_hasStyleChangedForSvg:function(i,c){return this._hasStyleChanged(i,c)||i.overline!==c.overline||i.underline!==c.underline||i.linethrough!==c.linethrough},_getLineLeftOffset:function(i){var c=this.getLineWidth(i),o=this.width-c,h=this.textAlign,b=this.direction,D,d=0,D=this.isEndOfWrapping(i);return h==="justify"||h==="justify-center"&&!D||h==="justify-right"&&!D||h==="justify-left"&&!D?0:(h==="center"&&(d=o/2),h==="right"&&(d=o),h==="justify-center"&&(d=o/2),h==="justify-right"&&(d=o),b==="rtl"&&(d-=o),d)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var i=this._forceClearCache;return i||(i=this.hasStateChanged("_dimensionAffectingProps")),i&&(this.dirty=!0,this._forceClearCache=!1),i},getLineWidth:function(i){if(this.__lineWidths[i])return this.__lineWidths[i];var c,o=this._textLines[i],h;return o===""?c=0:(h=this.measureLine(i),c=h.width),this.__lineWidths[i]=c,c},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(i,c,o){var h=this._getStyleDeclaration(i,c);return h&&typeof h[o]<"u"?h[o]:this[o]},_renderTextDecoration:function(i,c){if(!(!this[c]&&!this.styleHas(c))){for(var o,h,b,d,D,E,w,O,F=this._getLeftOffset(),B=this._getTopOffset(),V,H,Y,se,ne,be,K,Ce,W=this.path,Be=this._getWidthOfCharSpacing(),Ie=this.offsets[c],ze=0,te=this._textLines.length;ze<te;ze++){if(o=this.getHeightOfLine(ze),!this[c]&&!this.styleHas(c,ze)){B+=o;continue}w=this._textLines[ze],be=o/this.lineHeight,d=this._getLineLeftOffset(ze),H=0,Y=0,O=this.getValueOfPropertyAt(ze,0,c),Ce=this.getValueOfPropertyAt(ze,0,"fill"),V=B+be*(1-this._fontSizeFraction),h=this.getHeightOfChar(ze,0),D=this.getValueOfPropertyAt(ze,0,"deltaY");for(var le=0,q=w.length;le<q;le++)if(se=this.__charBounds[ze][le],ne=this.getValueOfPropertyAt(ze,le,c),K=this.getValueOfPropertyAt(ze,le,"fill"),b=this.getHeightOfChar(ze,le),E=this.getValueOfPropertyAt(ze,le,"deltaY"),W&&ne&&K)i.save(),i.fillStyle=Ce,i.translate(se.renderLeft,se.renderTop),i.rotate(se.angle),i.fillRect(-se.kernedWidth/2,Ie*b+E,se.kernedWidth,this.fontSize/15),i.restore();else if((ne!==O||K!==Ce||b!==h||E!==D)&&Y>0){var Z=F+d+H;this.direction==="rtl"&&(Z=this.width-Z-Y),O&&Ce&&(i.fillStyle=Ce,i.fillRect(Z,V+Ie*h+D,Y,this.fontSize/15)),H=se.left,Y=se.width,O=ne,Ce=K,h=b,D=E}else Y+=se.kernedWidth;var Z=F+d+H;this.direction==="rtl"&&(Z=this.width-Z-Y),i.fillStyle=K,ne&&K&&i.fillRect(Z,V+Ie*h+D,Y-Be,this.fontSize/15),B+=o}this._removeShadow(i)}},_getFontDeclaration:function(i,c){var o=i||this,h=this.fontFamily,b=s.Text.genericFonts.indexOf(h.toLowerCase())>-1,d=h===void 0||h.indexOf("'")>-1||h.indexOf(",")>-1||h.indexOf('"')>-1||b?o.fontFamily:'"'+o.fontFamily+'"';return[s.isLikelyNode?o.fontWeight:o.fontStyle,s.isLikelyNode?o.fontStyle:o.fontWeight,c?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",d].join(" ")},render:function(i){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",i)))},_splitTextIntoLines:function(i){for(var c=i.split(this._reNewline),o=new Array(c.length),h=[`
`],b=[],d=0;d<c.length;d++)o[d]=s.util.string.graphemeSplit(c[d]),b=b.concat(o[d],h);return b.pop(),{_unwrappedLines:o,lines:c,graphemeText:b,graphemeLines:o}},toObject:function(i){var c=m.concat(i),o=this.callSuper("toObject",c);return o.styles=y(this.styles,!0),o.path&&(o.path=this.path.toObject()),o},set:function(i,c){this.callSuper("set",i,c);var o=!1,h=!1;if(typeof i=="object")for(var b in i)b==="path"&&this.setPathInfo(),o=o||this._dimensionAffectingProps.indexOf(b)!==-1,h=h||b==="path";else o=this._dimensionAffectingProps.indexOf(i)!==-1,h=i==="path";return h&&this.setPathInfo(),o&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(i,c,o){if(!i)return c(null);var h=s.parseAttributes(i,s.Text.ATTRIBUTE_NAMES),b=h.textAnchor||"left";if(o=s.util.object.extend(o?y(o):{},h),o.top=o.top||0,o.left=o.left||0,h.textDecoration){var d=h.textDecoration;d.indexOf("underline")!==-1&&(o.underline=!0),d.indexOf("overline")!==-1&&(o.overline=!0),d.indexOf("line-through")!==-1&&(o.linethrough=!0),delete o.textDecoration}"dx"in h&&(o.left+=h.dx),"dy"in h&&(o.top+=h.dy),"fontSize"in o||(o.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var D="";"textContent"in i?D=i.textContent:"firstChild"in i&&i.firstChild!==null&&"data"in i.firstChild&&i.firstChild.data!==null&&(D=i.firstChild.data),D=D.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var E=o.strokeWidth;o.strokeWidth=0;var w=new s.Text(D,o),O=w.getScaledHeight()/w.height,F=(w.height+w.strokeWidth)*w.lineHeight-w.height,B=F*O,V=w.getScaledHeight()+B,H=0;b==="center"&&(H=w.getScaledWidth()/2),b==="right"&&(H=w.getScaledWidth()),w.set({left:w.left-H,top:w.top-(V-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:typeof E<"u"?E:1}),c(w)},s.Text.fromObject=function(i,c){var o=y(i),h=i.path;return delete o.path,s.Object._fromObject("Text",o,function(b){h?s.Object._fromObject("Path",h,function(d){b.set("path",d),c(b)},"path"):c(b)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(x),function(){u.util.object.extend(u.Text.prototype,{isEmptyStyles:function(C){if(!this.styles||typeof C<"u"&&!this.styles[C])return!0;var s=typeof C>"u"?this.styles:{line:this.styles[C]};for(var y in s)for(var m in s[y])for(var i in s[y][m])return!1;return!0},styleHas:function(C,s){if(!this.styles||!C||C===""||typeof s<"u"&&!this.styles[s])return!1;var y=typeof s>"u"?this.styles:{0:this.styles[s]};for(var m in y)for(var i in y[m])if(typeof y[m][i][C]<"u")return!0;return!1},cleanStyle:function(C){if(!this.styles||!C||C==="")return!1;var s=this.styles,y=0,m,i,c=!0,o=0,h;for(var b in s){m=0;for(var d in s[b]){var h=s[b][d],D=h.hasOwnProperty(C);y++,D?(i?h[C]!==i&&(c=!1):i=h[C],h[C]===this[C]&&delete h[C]):c=!1,Object.keys(h).length!==0?m++:delete s[b][d]}m===0&&delete s[b]}for(var E=0;E<this._textLines.length;E++)o+=this._textLines[E].length;c&&y===o&&(this[C]=i,this.removeStyle(C))},removeStyle:function(C){if(!(!this.styles||!C||C==="")){var s=this.styles,y,m,i;for(m in s){y=s[m];for(i in y)delete y[i][C],Object.keys(y[i]).length===0&&delete y[i];Object.keys(y).length===0&&delete s[m]}}},_extendStyles:function(C,s){var y=this.get2DCursorLocation(C);this._getLineStyle(y.lineIndex)||this._setLineStyle(y.lineIndex),this._getStyleDeclaration(y.lineIndex,y.charIndex)||this._setStyleDeclaration(y.lineIndex,y.charIndex,{}),u.util.object.extend(this._getStyleDeclaration(y.lineIndex,y.charIndex),s)},get2DCursorLocation:function(C,s){typeof C>"u"&&(C=this.selectionStart);for(var y=s?this._unwrappedTextLines:this._textLines,m=y.length,i=0;i<m;i++){if(C<=y[i].length)return{lineIndex:i,charIndex:C};C-=y[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:y[i-1].length<C?y[i-1].length:C}},getSelectionStyles:function(C,s,y){typeof C>"u"&&(C=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||C);for(var m=[],i=C;i<s;i++)m.push(this.getStyleAtPosition(i,y));return m},getStyleAtPosition:function(C,s){var y=this.get2DCursorLocation(C),m=s?this.getCompleteStyleDeclaration(y.lineIndex,y.charIndex):this._getStyleDeclaration(y.lineIndex,y.charIndex);return m||{}},setSelectionStyles:function(C,s,y){typeof s>"u"&&(s=this.selectionStart||0),typeof y>"u"&&(y=this.selectionEnd||s);for(var m=s;m<y;m++)this._extendStyles(m,C);return this._forceClearCache=!0,this},_getStyleDeclaration:function(C,s){var y=this.styles&&this.styles[C];return y?y[s]:null},getCompleteStyleDeclaration:function(C,s){for(var y=this._getStyleDeclaration(C,s)||{},m={},i,c=0;c<this._styleProperties.length;c++)i=this._styleProperties[c],m[i]=typeof y[i]>"u"?this[i]:y[i];return m},_setStyleDeclaration:function(C,s,y){this.styles[C][s]=y},_deleteStyleDeclaration:function(C,s){delete this.styles[C][s]},_getLineStyle:function(C){return!!this.styles[C]},_setLineStyle:function(C){this.styles[C]={}},_deleteLineStyle:function(C){delete this.styles[C]}})}(),function(){function C(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}u.IText=u.util.createClass(u.Text,u.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,y){this.callSuper("initialize",s,y),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,y){this[s]!==y&&(this._fireSelectionChanged(),this[s]=y),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var y=this.canvas.contextTop,m=this.canvas.viewportTransform;y.save(),y.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this.transform(y),this._clearTextArea(y),s||y.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),y=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,y):this.renderSelection(s,y),y.restore()}},_clearTextArea:function(s){var y=this.width+4,m=this.height+4;s.clearRect(-y/2,-m/2,y,m)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var y=this._getLeftOffset(),m=this._getTopOffset(),i=this._getCursorBoundariesOffsets(s);return{left:y,top:m,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var y,m,i,c=0,o=0,h,b=this.get2DCursorLocation(s);i=b.charIndex,m=b.lineIndex;for(var d=0;d<m;d++)c+=this.getHeightOfLine(d);y=this._getLineLeftOffset(m);var D=this.__charBounds[m][i];return D&&(o=D.left),this.charSpacing!==0&&i===this._textLines[m].length&&(o-=this._getWidthOfCharSpacing()),h={top:c,left:y+(o>0?o:0)},this.direction==="rtl"&&(h.left*=-1),this.cursorOffsetCache=h,this.cursorOffsetCache},renderCursor:function(s,y){var m=this.get2DCursorLocation(),i=m.lineIndex,c=m.charIndex>0?m.charIndex-1:0,o=this.getValueOfPropertyAt(i,c,"fontSize"),h=this.scaleX*this.canvas.getZoom(),b=this.cursorWidth/h,d=s.topOffset,D=this.getValueOfPropertyAt(i,c,"deltaY");d+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,y),y.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,c,"fill"),y.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,y.fillRect(s.left+s.leftOffset-b/2,d+s.top+D,b,o)},renderSelection:function(s,y){for(var m=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,c=this.textAlign.indexOf("justify")!==-1,o=this.get2DCursorLocation(m),h=this.get2DCursorLocation(i),b=o.lineIndex,d=h.lineIndex,D=o.charIndex<0?0:o.charIndex,E=h.charIndex<0?0:h.charIndex,w=b;w<=d;w++){var O=this._getLineLeftOffset(w)||0,F=this.getHeightOfLine(w),B=0,V=0,H=0;if(w===b&&(V=this.__charBounds[b][D].left),w>=b&&w<d)H=c&&!this.isEndOfWrapping(w)?this.width:this.getLineWidth(w)||5;else if(w===d)if(E===0)H=this.__charBounds[d][E].left;else{var Y=this._getWidthOfCharSpacing();H=this.__charBounds[d][E-1].left+this.__charBounds[d][E-1].width-Y}B=F,(this.lineHeight<1||w===d&&this.lineHeight>1)&&(F/=this.lineHeight);var se=s.left+O+V,ne=H-V,be=F,K=0;this.inCompositionMode?(y.fillStyle=this.compositionColor||"black",be=1,K=F):y.fillStyle=this.selectionColor,this.direction==="rtl"&&(se=this.width-se-ne),y.fillRect(se,s.top+s.topOffset+K,ne,be),s.topOffset+=B}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),y=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c:y}}}),u.IText.fromObject=function(s,y){if(C(s),s.styles)for(var m in s.styles)for(var i in s.styles[m])C(s.styles[m][i]);u.Object._fromObject("IText",s,y,"text")}}(),function(){var C=u.util.object.clone;u.util.object.extend(u.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var y=s.canvas;y&&(y._hasITextHandlers||(y._hasITextHandlers=!0,s._initCanvasHandlers(y)),y._iTextInstances=y._iTextInstances||[],y._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var y=s.canvas;y&&(y._iTextInstances=y._iTextInstances||[],u.util.removeFromArray(y._iTextInstances,s),y._iTextInstances.length===0&&(y._hasITextHandlers=!1,s._removeCanvasHandlers(y)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(y){y.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,y,m,i){var c;return c={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",y,{duration:m,onComplete:function(){c.isAborted||s[i]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return c.isAborted}}),c},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var y=this,m=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){y._tick()},m)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,y=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&y&&y.clearContext(y.contextTop||y.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var y=0,m=s-1;if(this._reSpace.test(this._text[m]))for(;this._reSpace.test(this._text[m]);)y++,m--;for(;/\S/.test(this._text[m])&&m>-1;)y++,m--;return s-y},findWordBoundaryRight:function(s){var y=0,m=s;if(this._reSpace.test(this._text[m]))for(;this._reSpace.test(this._text[m]);)y++,m++;for(;/\S/.test(this._text[m])&&m<this._text.length;)y++,m++;return s+y},findLineBoundaryLeft:function(s){for(var y=0,m=s-1;!/\n/.test(this._text[m])&&m>-1;)y++,m--;return s-y},findLineBoundaryRight:function(s){for(var y=0,m=s;!/\n/.test(this._text[m])&&m<this._text.length;)y++,m++;return s+y},searchWordBoundary:function(s,y){for(var m=this._text,i=this._reSpace.test(m[s])?s-1:s,c=m[i],o=u.reNonWord;!o.test(c)&&i>0&&i<m.length;)i+=y,c=m[i];return o.test(c)&&(i+=y===1?0:1),i},selectWord:function(s){s=s||this.selectionStart;var y=this.searchWordBoundary(s,-1),m=this.searchWordBoundary(s,1);this.selectionStart=y,this.selectionEnd=m,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var y=this.findLineBoundaryLeft(s),m=this.findLineBoundaryRight(s);return this.selectionStart=y,this.selectionEnd=m,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(y){y.selected=!1,y.isEditing&&y.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){var y=this.getSelectionStartFromPointer(s.e),m=this.selectionStart,i=this.selectionEnd;(y!==this.__selectionStartOnMouseDown||m===i)&&(m===y||i===y)||(y>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=y):(this.selectionStart=y,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==m||this.selectionEnd!==i)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,y,m){var i=m.slice(0,s),c=u.util.string.graphemeSplit(i).length;if(s===y)return{selectionStart:c,selectionEnd:c};var o=m.slice(s,y),h=u.util.string.graphemeSplit(o).length;return{selectionStart:c,selectionEnd:c+h}},fromGraphemeToStringSelection:function(s,y,m){var i=m.slice(0,s),c=i.join("").length;if(s===y)return{selectionStart:c,selectionEnd:c};var o=m.slice(s,y),h=o.join("").length;return{selectionStart:c,selectionEnd:c+h}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,y=this._getCursorBoundaries(s),m=this.get2DCursorLocation(s),i=m.lineIndex,c=m.charIndex,o=this.getValueOfPropertyAt(i,c,"fontSize")*this.lineHeight,h=y.leftOffset,b=this.calcTransformMatrix(),d={x:y.left+h,y:y.top+y.topOffset+o},D=this.canvas.getRetinaScaling(),E=this.canvas.upperCanvasEl,w=E.width/D,O=E.height/D,F=w-o,B=O-o,V=E.clientWidth/w,H=E.clientHeight/O;return d=u.util.transformPoint(d,b),d=u.util.transformPoint(d,this.canvas.viewportTransform),d.x*=V,d.y*=H,d.x<0&&(d.x=0),d.x>F&&(d.x=F),d.y<0&&(d.y=0),d.y>B&&(d.y=B),d.x+=this.canvas._offset.left,d.y+=this.canvas._offset.top,{left:d.x+"px",top:d.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,y=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,y&&(y.blur&&y.blur(),y.parentNode&&y.parentNode.removeChild(y)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,y){var m=this.get2DCursorLocation(s,!0),i=this.get2DCursorLocation(y,!0),c=m.lineIndex,o=m.charIndex,h=i.lineIndex,b=i.charIndex,d,D;if(c!==h){if(this.styles[c])for(d=o;d<this._unwrappedTextLines[c].length;d++)delete this.styles[c][d];if(this.styles[h])for(d=b;d<this._unwrappedTextLines[h].length;d++)D=this.styles[h][d],D&&(this.styles[c]||(this.styles[c]={}),this.styles[c][o+d-b]=D);for(d=c+1;d<=h;d++)delete this.styles[d];this.shiftLineStyles(h,c-h)}else if(this.styles[c]){D=this.styles[c];var E=b-o,w,O;for(d=o;d<b;d++)delete D[d];for(O in this.styles[c])w=parseInt(O,10),w>=b&&(D[w-E]=D[O],delete D[O])}},shiftLineStyles:function(s,y){var m=C(this.styles);for(var i in this.styles){var c=parseInt(i,10);c>s&&(this.styles[c+y]=m[c],m[c-y]||delete this.styles[c])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,y,m,i){var c,o={},h=!1,b=this._unwrappedTextLines[s].length===y;m||(m=1),this.shiftLineStyles(s,m),this.styles[s]&&(c=this.styles[s][y===0?y:y-1]);for(var d in this.styles[s]){var D=parseInt(d,10);D>=y&&(h=!0,o[D-y]=this.styles[s][d],b&&y===0||delete this.styles[s][d])}var E=!1;for(h&&!b&&(this.styles[s+m]=o,E=!0),E&&m--;m>0;)i&&i[m-1]?this.styles[s+m]={0:C(i[m-1])}:c?this.styles[s+m]={0:C(c)}:delete this.styles[s+m],m--;this._forceClearCache=!0},insertCharStyleObject:function(s,y,m,i){this.styles||(this.styles={});var c=this.styles[s],o=c?C(c):{};m||(m=1);for(var h in o){var b=parseInt(h,10);b>=y&&(c[b+m]=o[b],o[b-m]||delete c[b])}if(this._forceClearCache=!0,i){for(;m--;)Object.keys(i[m]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][y+m]=C(i[m]));return}if(c)for(var d=c[y?y-1:1];d&&m--;)this.styles[s][y+m]=C(d)},insertNewStyleBlock:function(s,y,m){for(var i=this.get2DCursorLocation(y,!0),c=[0],o=0,h=0;h<s.length;h++)s[h]===`
`?(o++,c[o]=0):c[o]++;c[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,c[0],m),m=m&&m.slice(c[0]+1)),o&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+c[0],o);for(var h=1;h<o;h++)c[h]>0?this.insertCharStyleObject(i.lineIndex+h,0,c[h],m):m&&(this.styles[i.lineIndex+h][0]=m[0]),m=m&&m.slice(c[h]+1);c[h]>0&&this.insertCharStyleObject(i.lineIndex+h,0,c[h],m)},setSelectionStartEndWithShift:function(s,y,m){m<=s?(y===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=m):m>s&&m<y?this._selectionDirection==="right"?this.selectionEnd=m:this.selectionStart=m:(y===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=y),this.selectionEnd=m)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),u.util.object.extend(u.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(C){if(this.canvas){this.__newClickTime=+new Date;var s=C.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",C),this._stopEvent(C.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(C){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===C.x&&this.__lastPointer.y===C.y},_stopEvent:function(C){C.preventDefault&&C.preventDefault(),C.stopPropagation&&C.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(C){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(C.e))},tripleClickHandler:function(C){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(C.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(C){!this.canvas||!this.editable||C.e.button&&C.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(C.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(C){!this.canvas||!this.editable||C.e.button&&C.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(C){if(this.__isMousedown=!1,!(!this.editable||this.group||C.transform&&C.transform.actionPerformed||C.e.button&&C.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(C.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(C){var s=this.getSelectionStartFromPointer(C),y=this.selectionStart,m=this.selectionEnd;C.shiftKey?this.setSelectionStartEndWithShift(y,m,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(C){for(var s=this.getLocalPointer(C),y=0,m=0,i=0,c=0,o=0,h,b,d=0,D=this._textLines.length;d<D&&i<=s.y;d++)i+=this.getHeightOfLine(d)*this.scaleY,o=d,d>0&&(c+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));h=this._getLineLeftOffset(o),m=h*this.scaleX,b=this._textLines[o],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+m);for(var E=0,w=b.length;E<w&&(y=m,m+=this.__charBounds[o][E].kernedWidth*this.scaleX,m<=s.x);E++)c++;return this._getNewSelectionStartFromOffset(s,y,m,c,w)},_getNewSelectionStartFromOffset:function(C,s,y,m,i){var c=C.x-s,o=y-C.x,h=o>c||o<0?0:1,b=m+h;return this.flipX&&(b=i-b),b>this._text.length&&(b=this._text.length),b}}),u.util.object.extend(u.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=u.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var C=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+C.top+"; left: "+C.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+C.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):u.document.body.appendChild(this.hiddenTextarea),u.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),u.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),u.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),u.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),u.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),u.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),u.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),u.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),u.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(u.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(C){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(C.keyCode in s)this[s[C.keyCode]](C);else if(C.keyCode in this.ctrlKeysMapDown&&(C.ctrlKey||C.metaKey))this[this.ctrlKeysMapDown[C.keyCode]](C);else return;C.stopImmediatePropagation(),C.preventDefault(),C.keyCode>=33&&C.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(C){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(C.keyCode in this.ctrlKeysMapUp&&(C.ctrlKey||C.metaKey))this[this.ctrlKeysMapUp[C.keyCode]](C);else return;C.stopImmediatePropagation(),C.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(C){var s=this.fromPaste;if(this.fromPaste=!1,C&&C.stopPropagation(),!!this.isEditing){var y=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,m=this._text.length,i=y.length,c,o,h=i-m,b=this.selectionStart,d=this.selectionEnd,D=b!==d,E,w,O;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var F=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),B=b>F.selectionStart;D?(c=this._text.slice(b,d),h+=d-b):i<m&&(B?c=this._text.slice(d+h,d):c=this._text.slice(b,b-h)),o=y.slice(F.selectionEnd-h,F.selectionEnd),c&&c.length&&(o.length&&(E=this.getSelectionStyles(b,b+1,!1),E=o.map(function(){return E[0]})),D?(w=b,O=d):B?(w=d-c.length,O=d):(w=d,O=d+c.length),this.removeStyleFromTo(w,O)),o.length&&(s&&o.join("")===u.copiedText&&!u.disableStyleCopyPaste&&(E=u.copiedTextStyle),this.insertNewStyleBlock(o,b,E)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(C){this.compositionStart=C.target.selectionStart,this.compositionEnd=C.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(u.copiedText=this.getSelectedText(),u.disableStyleCopyPaste?u.copiedTextStyle=null:u.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(C){return C&&C.clipboardData||u.window.clipboardData},_getWidthBeforeCursor:function(C,s){var y=this._getLineLeftOffset(C),m;return s>0&&(m=this.__charBounds[C][s-1],y+=m.left+m.width),y},getDownCursorOffset:function(C,s){var y=this._getSelectionForOffset(C,s),m=this.get2DCursorLocation(y),i=m.lineIndex;if(i===this._textLines.length-1||C.metaKey||C.keyCode===34)return this._text.length-y;var c=m.charIndex,o=this._getWidthBeforeCursor(i,c),h=this._getIndexOnLine(i+1,o),b=this._textLines[i].slice(c);return b.length+h+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(C,s){return C.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(C,s){var y=this._getSelectionForOffset(C,s),m=this.get2DCursorLocation(y),i=m.lineIndex;if(i===0||C.metaKey||C.keyCode===33)return-y;var c=m.charIndex,o=this._getWidthBeforeCursor(i,c),h=this._getIndexOnLine(i-1,o),b=this._textLines[i].slice(0,c),d=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+h-b.length+(1-d)},_getIndexOnLine:function(C,s){for(var y=this._textLines[C],m=this._getLineLeftOffset(C),i=m,c=0,o,h,b=0,d=y.length;b<d;b++)if(o=this.__charBounds[C][b].width,i+=o,i>s){h=!0;var D=i-o,E=i,w=Math.abs(D-s),O=Math.abs(E-s);c=O<w?b:b-1;break}return h||(c=y.length-1),c},moveCursorDown:function(C){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",C)},moveCursorUp:function(C){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",C)},_moveCursorUpOrDown:function(C,s){var y="get"+C+"CursorOffset",m=this[y](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(m):this.moveCursorWithoutShift(m),m!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(C){var s=this._selectionDirection==="left"?this.selectionStart+C:this.selectionEnd+C;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),C!==0},moveCursorWithoutShift:function(C){return C<0?(this.selectionStart+=C,this.selectionEnd=this.selectionStart):(this.selectionEnd+=C,this.selectionStart=this.selectionEnd),C!==0},moveCursorLeft:function(C){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",C)},_move:function(C,s,y){var m;if(C.altKey)m=this["findWordBoundary"+y](this[s]);else if(C.metaKey||C.keyCode===35||C.keyCode===36)m=this["findLineBoundary"+y](this[s]);else return this[s]+=y==="Left"?-1:1,!0;if(typeof m!==void 0&&this[s]!==m)return this[s]=m,!0},_moveLeft:function(C,s){return this._move(C,s,"Left")},_moveRight:function(C,s){return this._move(C,s,"Right")},moveCursorLeftWithoutShift:function(C){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(C,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(C){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(C,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(C,"selectionStart")},moveCursorRight:function(C){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",C)},_moveCursorLeftOrRight:function(C,s){var y="moveCursor"+C+"With";this._currentCursorOpacity=1,s.shiftKey?y+="Shift":y+="outShift",this[y](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(C){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(C,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(C,"selectionEnd")},moveCursorRightWithoutShift:function(C){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(C,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(C,s){typeof s>"u"&&(s=C+1),this.removeStyleFromTo(C,s),this._text.splice(C,s-C),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(C,s,y,m){typeof m>"u"&&(m=y),m>y&&this.removeStyleFromTo(y,m);var i=u.util.string.graphemeSplit(C);this.insertNewStyleBlock(i,y,s),this._text=[].concat(this._text.slice(0,y),i,this._text.slice(m)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var C=u.util.toFixed,s=/  +/g;u.util.object.extend(u.Text.prototype,{_toSVG:function(){var y=this._getSVGLeftTopOffsets(),m=this._getSVGTextAndBg(y.textTop,y.textLeft);return this._wrapSVGTextAndBg(m)},toSVG:function(y){return this._createBaseSVGMarkup(this._toSVG(),{reviver:y,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(y){var m=!0,i=this.getSvgTextDecoration(this);return[y.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",i?'text-decoration="'+i+'" ':"",'style="',this.getSvgStyles(m),'"',this.addPaintOrder()," >",y.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(y,m){var i=[],c=[],o=y,h;this._setSVGBg(c);for(var b=0,d=this._textLines.length;b<d;b++)h=this._getLineLeftOffset(b),(this.textBackgroundColor||this.styleHas("textBackgroundColor",b))&&this._setSVGTextLineBg(c,b,m+h,o),this._setSVGTextLineText(i,b,m+h,o),o+=this.getHeightOfLine(b);return{textSpans:i,textBgRects:c}},_createTextCharSpan:function(y,m,i,c){var o=y!==y.trim()||y.match(s),h=this.getSvgSpanStyles(m,o),b=h?'style="'+h+'"':"",d=m.deltaY,D="",E=u.Object.NUM_FRACTION_DIGITS;return d&&(D=' dy="'+C(d,E)+'" '),['<tspan x="',C(i,E),'" y="',C(c,E),'" ',D,b,">",u.util.string.escapeXml(y),"</tspan>"].join("")},_setSVGTextLineText:function(y,m,i,c){var o=this.getHeightOfLine(m),h=this.textAlign.indexOf("justify")!==-1,b,d,D="",E,w,O=0,F=this._textLines[m],B;c+=o*(1-this._fontSizeFraction)/this.lineHeight;for(var V=0,H=F.length-1;V<=H;V++)B=V===H||this.charSpacing,D+=F[V],E=this.__charBounds[m][V],O===0?(i+=E.kernedWidth-E.width,O+=E.width):O+=E.kernedWidth,h&&!B&&this._reSpaceAndTab.test(F[V])&&(B=!0),B||(b=b||this.getCompleteStyleDeclaration(m,V),d=this.getCompleteStyleDeclaration(m,V+1),B=this._hasStyleChangedForSvg(b,d)),B&&(w=this._getStyleDeclaration(m,V)||{},y.push(this._createTextCharSpan(D,w,i,c)),D="",b=d,i+=O,O=0)},_pushTextBgRect:function(y,m,i,c,o,h){var b=u.Object.NUM_FRACTION_DIGITS;y.push("		<rect ",this._getFillAttributes(m),' x="',C(i,b),'" y="',C(c,b),'" width="',C(o,b),'" height="',C(h,b),`"></rect>
`)},_setSVGTextLineBg:function(y,m,i,c){for(var o=this._textLines[m],h=this.getHeightOfLine(m)/this.lineHeight,b=0,d=0,D,E,w=this.getValueOfPropertyAt(m,0,"textBackgroundColor"),O=0,F=o.length;O<F;O++)D=this.__charBounds[m][O],E=this.getValueOfPropertyAt(m,O,"textBackgroundColor"),E!==w?(w&&this._pushTextBgRect(y,w,i+d,c,b,h),d=D.left,b=D.width,w=E):b+=D.kernedWidth;E&&this._pushTextBgRect(y,E,i+d,c,b,h)},_getFillAttributes:function(y){var m=y&&typeof y=="string"?new u.Color(y):"";return!m||!m.getSource()||m.getAlpha()===1?'fill="'+y+'"':'opacity="'+m.getAlpha()+'" fill="'+m.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(y){for(var m=0,i=0,c=0;c<y;c++)m+=this.getHeightOfLine(c);return i=this.getHeightOfLine(c),{lineTop:m,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(y){var m=u.Object.prototype.getSvgStyles.call(this,y);return m+" white-space: pre;"}})}(),function(C){"use strict";var s=C.fabric||(C.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(y){for(var m=0,i=0,c=0,o={},h=0;h<y.graphemeLines.length;h++)y.graphemeText[c]===`
`&&h>0?(i=0,c++,m++):!this.splitByGrapheme&&this._reSpaceAndTab.test(y.graphemeText[c])&&h>0&&(i++,c++),o[h]={line:m,offset:i},c+=y.graphemeLines[h].length,i+=y.graphemeLines[h].length;return o},styleHas:function(y,m){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[m];i&&(m=i.line)}return s.Text.prototype.styleHas.call(this,y,m)},isEmptyStyles:function(y){if(!this.styles)return!0;var m=0,i=y+1,c,o,h=!1,b=this._styleMap[y],d=this._styleMap[y+1];b&&(y=b.line,m=b.offset),d&&(i=d.line,h=i===y,c=d.offset),o=typeof y>"u"?this.styles:{line:this.styles[y]};for(var D in o)for(var E in o[D])if(E>=m&&(!h||E<c))for(var w in o[D][E])return!1;return!0},_getStyleDeclaration:function(y,m){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[y];if(!i)return null;y=i.line,m=i.offset+m}return this.callSuper("_getStyleDeclaration",y,m)},_setStyleDeclaration:function(y,m,i){var c=this._styleMap[y];y=c.line,m=c.offset+m,this.styles[y][m]=i},_deleteStyleDeclaration:function(y,m){var i=this._styleMap[y];y=i.line,m=i.offset+m,delete this.styles[y][m]},_getLineStyle:function(y){var m=this._styleMap[y];return!!this.styles[m.line]},_setLineStyle:function(y){var m=this._styleMap[y];this.styles[m.line]={}},_wrapText:function(y,m){var i=[],c;for(this.isWrapping=!0,c=0;c<y.length;c++)i=i.concat(this._wrapLine(y[c],c,m));return this.isWrapping=!1,i},_measureWord:function(y,m,i){var c=0,o,h=!0;i=i||0;for(var b=0,d=y.length;b<d;b++){var D=this._getGraphemeBox(y[b],m,b+i,o,h);c+=D.kernedWidth,o=y[b]}return c},_wrapLine:function(y,m,i,se){var o=0,h=this.splitByGrapheme,b=[],d=[],D=h?s.util.string.graphemeSplit(y):y.split(this._wordJoiners),E="",w=0,O=h?"":" ",F=0,B=0,V=0,H=!0,Y=this._getWidthOfCharSpacing(),se=se||0;D.length===0&&D.push([]),i-=se;for(var ne=0;ne<D.length;ne++)E=h?D[ne]:s.util.string.graphemeSplit(D[ne]),F=this._measureWord(E,m,w),w+=E.length,o+=B+F-Y,o>i&&!H?(b.push(d),d=[],o=F,H=!0):o+=Y,!H&&!h&&d.push(O),d=d.concat(E),B=h?0:this._measureWord([O],m,w),w++,H=!1,F>V&&(V=F);return ne&&b.push(d),V+se>this.dynamicMinWidth&&(this.dynamicMinWidth=V-Y+se),b},isEndOfWrapping:function(y){return!this._styleMap[y+1]||this._styleMap[y+1].line!==this._styleMap[y].line},missingNewlineOffset:function(y){return this.splitByGrapheme?this.isEndOfWrapping(y)?1:0:1},_splitTextIntoLines:function(y){for(var m=s.Text.prototype._splitTextIntoLines.call(this,y),i=this._wrapText(m.lines,this.width),c=new Array(i.length),o=0;o<i.length;o++)c[o]=i[o].join("");return m.lines=c,m.graphemeLines=i,m},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var y={};for(var m in this._styleMap)this._textLines[m]&&(y[this._styleMap[m].line]=1);for(var m in this.styles)y[m]||delete this.styles[m]},toObject:function(y){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(y))}}),s.Textbox.fromObject=function(y,m){return s.Object._fromObject("Textbox",y,m,"text")}}(x),function(){var C=u.controlsUtils,s=C.scaleSkewCursorStyleHandler,y=C.scaleCursorStyleHandler,m=C.scalingEqually,i=C.scalingYOrSkewingX,c=C.scalingXOrSkewingY,o=C.scaleOrSkewActionName,h=u.Object.prototype.controls;if(h.ml=new u.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:c,getActionName:o}),h.mr=new u.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:c,getActionName:o}),h.mb=new u.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:i,getActionName:o}),h.mt=new u.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:i,getActionName:o}),h.tl=new u.Control({x:-.5,y:-.5,cursorStyleHandler:y,actionHandler:m}),h.tr=new u.Control({x:.5,y:-.5,cursorStyleHandler:y,actionHandler:m}),h.bl=new u.Control({x:-.5,y:.5,cursorStyleHandler:y,actionHandler:m}),h.br=new u.Control({x:.5,y:.5,cursorStyleHandler:y,actionHandler:m}),h.mtr=new u.Control({x:0,y:-.5,actionHandler:C.rotationWithSnapping,cursorStyleHandler:C.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),u.Textbox){var b=u.Textbox.prototype.controls={};b.mtr=h.mtr,b.tr=h.tr,b.br=h.br,b.tl=h.tl,b.bl=h.bl,b.mt=h.mt,b.mb=h.mb,b.mr=new u.Control({x:.5,y:0,actionHandler:C.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),b.ml=new u.Control({x:-.5,y:0,actionHandler:C.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()},3053:function(v,x,l){"use strict";var u=l(602);function _(N,k,j){var R,C;if(j=j||0,!u(k))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(k,N,j);for(C=k.length,R=j;j>=0&&R<C;R+=1)if(k[R]===N)return R;return-1}v.exports=_},8592:function(v,x,l){"use strict";var u=l(602),_=l(6092),N=l(5573);function k(j,R,C){u(j)?_(j,R,C):N(j,R,C)}v.exports=k},6092:function(v){"use strict";function x(l,u,_){var N=0,k=l.length;for(_=_||null;N<k&&u.call(_,l[N],N,l)!==!1;N+=1);}v.exports=x},5573:function(v){"use strict";function x(l,u,_){var N;_=_||null;for(N in l)if(l.hasOwnProperty(N)&&u.call(_,l[N],N,l)===!1)break}v.exports=x},9052:function(v,x,l){"use strict";var u=l(961),_=l(9886),N=l(2560),k=l(5393),j=l(602),R=l(5183),C=l(8592),s=/\s+/g;function y(){this.events=null,this.contexts=null}y.mixin=function(m){u(m.prototype,y.prototype)},y.prototype._getHandlerItem=function(m,i){var c={handler:m};return i&&(c.context=i),c},y.prototype._safeEvent=function(m){var i=this.events,c;return i||(i=this.events={}),m&&(c=i[m],c||(c=[],i[m]=c),i=c),i},y.prototype._safeContext=function(){var m=this.contexts;return m||(m=this.contexts=[]),m},y.prototype._indexOfContext=function(m){for(var i=this._safeContext(),c=0;i[c];){if(m===i[c][0])return c;c+=1}return-1},y.prototype._memorizeContext=function(m){var i,c;_(m)&&(i=this._safeContext(),c=this._indexOfContext(m),c>-1?i[c][1]+=1:i.push([m,1]))},y.prototype._forgetContext=function(m){var i,c;_(m)&&(i=this._safeContext(),c=this._indexOfContext(m),c>-1&&(i[c][1]-=1,i[c][1]<=0&&i.splice(c,1)))},y.prototype._bindEvent=function(m,i,c){var o=this._safeEvent(m);this._memorizeContext(c),o.push(this._getHandlerItem(i,c))},y.prototype.on=function(m,i,c){var o=this;N(m)?(m=m.split(s),C(m,function(h){o._bindEvent(h,i,c)})):k(m)&&(c=i,C(m,function(h,b){o.on(b,h,c)}))},y.prototype.once=function(m,i,c){var o=this;if(k(m)){c=i,C(m,function(b,d){o.once(d,b,c)});return}function h(){i.apply(c,arguments),o.off(m,h,c)}this.on(m,h,c)},y.prototype._spliceMatches=function(m,i){var c=0,o;if(j(m))for(o=m.length;c<o;c+=1)i(m[c])===!0&&(m.splice(c,1),o-=1,c-=1)},y.prototype._matchHandler=function(m){var i=this;return function(c){var o=m===c.handler;return o&&i._forgetContext(c.context),o}},y.prototype._matchContext=function(m){var i=this;return function(c){var o=m===c.context;return o&&i._forgetContext(c.context),o}},y.prototype._matchHandlerAndContext=function(m,i){var c=this;return function(o){var h=m===o.handler,b=i===o.context,d=h&&b;return d&&c._forgetContext(o.context),d}},y.prototype._offByEventName=function(m,i){var c=this,o=R(i),h=c._matchHandler(i);m=m.split(s),C(m,function(b){var d=c._safeEvent(b);o?c._spliceMatches(d,h):(C(d,function(D){c._forgetContext(D.context)}),c.events[b]=[])})},y.prototype._offByHandler=function(m){var i=this,c=this._matchHandler(m);C(this._safeEvent(),function(o){i._spliceMatches(o,c)})},y.prototype._offByObject=function(m,i){var c=this,o;this._indexOfContext(m)<0?C(m,function(h,b){c.off(b,h)}):N(i)?(o=this._matchContext(m),c._spliceMatches(this._safeEvent(i),o)):R(i)?(o=this._matchHandlerAndContext(i,m),C(this._safeEvent(),function(h){c._spliceMatches(h,o)})):(o=this._matchContext(m),C(this._safeEvent(),function(h){c._spliceMatches(h,o)}))},y.prototype.off=function(m,i){N(m)?this._offByEventName(m,i):arguments.length?R(m)?this._offByHandler(m):k(m)&&this._offByObject(m,i):(this.events={},this.contexts=[])},y.prototype.fire=function(m){this.invoke.apply(this,arguments)},y.prototype.invoke=function(m){var i,c,o,h;if(!this.hasListener(m))return!0;for(i=this._safeEvent(m),c=Array.prototype.slice.call(arguments,1),o=0;i[o];){if(h=i[o],h.handler.apply(h.context,c)===!1)return!1;o+=1}return!0},y.prototype.hasListener=function(m){return this.getListenerLength(m)>0},y.prototype.getListenerLength=function(m){var i=this._safeEvent(m);return i.length},v.exports=y},961:function(v){"use strict";function x(l,u){var _=Object.prototype.hasOwnProperty,N,k,j,R;for(j=1,R=arguments.length;j<R;j+=1){N=arguments[j];for(k in N)_.call(N,k)&&(l[k]=N[k])}return l}v.exports=x},1610:function(v,x,l){"use strict";var u=l(5695),_=l(3778);function N(k,j){for(var R=arguments,C=R[0],s=1,y=R.length;s<y;s+=1){if(u(C)||_(C))return;C=C[R[s]]}return C}v.exports=N},4564:function(v,x,l){"use strict";var u=l(5573);function _(N,k){var j=document.createElement("img"),R="";return u(k,function(C,s){R+="&"+s+"="+C}),R=R.substring(1),j.src=N+"?"+R,j.style.display="none",document.body.appendChild(j),document.body.removeChild(j),j}v.exports=_},4729:function(v,x,l){"use strict";var u=l(5695),_=l(4564),N=7*24*60*60*1e3;function k(R){var C=new Date().getTime();return C-R>N}function j(R,C){var s="https://www.google-analytics.com/collect",y=location.hostname,m="event",i="use",c="TOAST UI "+R+" for "+y+": Statistics",o=window.localStorage.getItem(c);!u(window.tui)&&window.tui.usageStatistics===!1||o&&!k(o)||(window.localStorage.setItem(c,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&_(s,{v:1,t:m,tid:C,cid:y,dp:y,dh:R,el:R,ec:i})},1e3))}v.exports=j},602:function(v){"use strict";function x(l){return l instanceof Array}v.exports=x},9886:function(v,x,l){"use strict";var u=l(5695),_=l(3778);function N(k){return!u(k)&&!_(k)}v.exports=N},5183:function(v){"use strict";function x(l){return l instanceof Function}v.exports=x},3778:function(v){"use strict";function x(l){return l===null}v.exports=x},5393:function(v){"use strict";function x(l){return l===Object(l)}v.exports=x},2560:function(v){"use strict";function x(l){return typeof l=="string"||l instanceof String}v.exports=x},5695:function(v){"use strict";function x(l){return l===void 0}v.exports=x},4426:function(v,x,l){v.exports=l(4486)},9406:function(v,x,l){v.exports=l(4877)},789:function(v,x,l){v.exports=l(7178)},381:function(v,x,l){v.exports=l(5603)},7636:function(v,x,l){v.exports=l(1206)},1899:function(v,x,l){v.exports=l(6174)},899:function(v,x,l){v.exports=l(57)},8005:function(v,x,l){v.exports=l(4741)},6562:function(v,x,l){v.exports=l(8368)},9131:function(v,x,l){v.exports=l(3739)},4383:function(v,x,l){v.exports=l(172)},6065:function(v,x,l){v.exports=l(4963)},1734:function(v,x,l){v.exports=l(7820)},2461:function(v,x,l){v.exports=l(5636)},5214:function(v,x,l){v.exports=l(5059)},6397:function(v,x,l){v.exports=l(3969)},8189:function(v,x,l){v.exports=l(6618)},9146:function(v,x,l){v.exports=l(5279)},4496:function(v,x,l){v.exports=l(9562)},3972:function(v,x,l){v.exports=l(652)},7172:function(v,x,l){v.exports=l(2813)},1845:function(v,x,l){v.exports=l(8664)},662:function(v,x,l){v.exports=l(1457)},711:function(v,x,l){v.exports=l(2937)},6623:function(v,x,l){v.exports=l(9297)},7077:function(v,x,l){v.exports=l(8026)},9856:function(v,x,l){v.exports=l(2044)},4230:function(v,x,l){v.exports=l(2214)},184:function(v,x,l){v.exports=l(9256)},3742:function(v,x,l){v.exports=l(5659)},1801:function(v){var x={rect:1,circle:2,triangle:1},l={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function u(s){var y=s.originX,m=s.originY,i=y.substring(0,1)+m.substring(0,1);s.startPoint=s.origins[i]}function _(s,y,m){var i=s.x,c=s.y,o=y.x,h=y.y,b=m*Math.PI/180,d=(o-i)*Math.cos(b)-(h-c)*Math.sin(b)+i,D=(o-i)*Math.sin(b)+(h-c)*Math.cos(b)+c;return{originX:i>d?"right":"left",originY:c>D?"bottom":"top"}}function N(s){return s.originX==="center"&&s.originY==="center"}function k(s,y){var m=y.getPointByOrigin("center","center"),i=-y.angle,c=_(m,s,i),o=c.originX,h=c.originY,b=y.getPointByOrigin(o,h),d=y.left-(m.x-b.x),D=y.top-(m.y-b.y);y.set({originX:o,originY:h,left:d,top:D}),y.setCoords()}function j(s,y){var m=y.startPoint,i=-y.angle,c=_(m,s,i),o=c.originX,h=c.originY;y.setPositionByOrigin(m,o,h),y.setCoords()}function R(s){var y=s.type,m=s.scaleX,i=s.scaleY,c=l[y],o=s[c.w]*m,h=s[c.h]*i;if(s.isRegular){var b=Math.max(m,i);o=s[c.w]*b,h=s[c.h]*b}var d={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};d[c.w]=o,d[c.h]=h,s.set(d)}function C(s,y){var m=y.type,i=y.strokeWidth,c=y.startPoint,o=x[m],h=l[m],b=y.type==="triangle",d={},D=Math.abs(c.x-s.x)/o,E=Math.abs(c.y-s.y)/o;D>i&&(D-=i/o),E>i&&(E-=i/o),y.isRegular&&(D=E=Math.max(D,E),b&&(E=Math.sqrt(3)/2*D)),d[h.w]=D,d[h.h]=E,y.set(d)}v.exports={setOrigins:function(y){var m=y.getPointByOrigin("left","top"),i=y.getPointByOrigin("right","top"),c=y.getPointByOrigin("right","bottom"),o=y.getPointByOrigin("left","bottom");y.origins={lt:m,rt:i,rb:c,lb:o}},resize:function(y,m,i){N(y)&&(k(m,y),u(y)),i?R(y,m):C(m,y),j(m,y)},adjustOriginToCenter:function(y){var m=y.getPointByOrigin("center","center"),i=y.originX,c=y.originY,o=y.getPointByOrigin(i,c),h=y.left+(m.x-o.x),b=y.top+(m.y-o.y);y.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:h,top:b}),y.setCoords()}}},2221:function(v,x,l){l(5454),l(9173);var u=l(7545);v.exports=u.Array.from},5078:function(v,x,l){l(8118);var u=l(7545);v.exports=u.Array.isArray},6135:function(v,x,l){l(9106);var u=l(5607);v.exports=u("Array").concat},9510:function(v,x,l){l(1710);var u=l(5607);v.exports=u("Array").fill},3971:function(v,x,l){l(3436);var u=l(5607);v.exports=u("Array").filter},98:function(v,x,l){l(9823);var u=l(5607);v.exports=u("Array").forEach},2089:function(v,x,l){l(2276);var u=l(5607);v.exports=u("Array").indexOf},6209:function(v,x,l){l(3838);var u=l(5607);v.exports=u("Array").map},2671:function(v,x,l){l(5818);var u=l(5607);v.exports=u("Array").slice},1375:function(v,x,l){l(2178);var u=l(5607);v.exports=u("Array").splice},3528:function(v,x,l){l(665);var u=l(5607);v.exports=u("Function").bind},5739:function(v,x,l){l(8939),l(5454);var u=l(8703);v.exports=u},278:function(v,x,l){var u=l(3528),_=Function.prototype;v.exports=function(N){var k=N.bind;return N===_||N instanceof Function&&k===_.bind?u:k}},1484:function(v,x,l){var u=l(6135),_=Array.prototype;v.exports=function(N){var k=N.concat;return N===_||N instanceof Array&&k===_.concat?u:k}},7731:function(v,x,l){var u=l(9510),_=Array.prototype;v.exports=function(N){var k=N.fill;return N===_||N instanceof Array&&k===_.fill?u:k}},3669:function(v,x,l){var u=l(3971),_=Array.prototype;v.exports=function(N){var k=N.filter;return N===_||N instanceof Array&&k===_.filter?u:k}},2604:function(v,x,l){var u=l(2089),_=Array.prototype;v.exports=function(N){var k=N.indexOf;return N===_||N instanceof Array&&k===_.indexOf?u:k}},263:function(v,x,l){var u=l(6209),_=Array.prototype;v.exports=function(N){var k=N.map;return N===_||N instanceof Array&&k===_.map?u:k}},7663:function(v,x,l){var u=l(2671),_=Array.prototype;v.exports=function(N){var k=N.slice;return N===_||N instanceof Array&&k===_.slice?u:k}},5063:function(v,x,l){var u=l(1375),_=Array.prototype;v.exports=function(N){var k=N.splice;return N===_||N instanceof Array&&k===_.splice?u:k}},6813:function(v,x,l){var u=l(3842),_=String.prototype;v.exports=function(N){var k=N.trim;return typeof N=="string"||N===_||N instanceof String&&k===_.trim?u:k}},6285:function(v,x,l){l(2666);var u=l(7545);v.exports=u.Number.parseInt},3213:function(v,x,l){l(3113);var u=l(7545),_=u.Object;v.exports=function(k,j){return _.create(k,j)}},3512:function(v,x,l){l(297);var u=l(7545),_=u.Object,N=v.exports=function(j,R,C){return _.defineProperty(j,R,C)};_.defineProperty.sham&&(N.sham=!0)},8168:function(v,x,l){l(9234);var u=l(7545);v.exports=u.Object.getPrototypeOf},8651:function(v,x,l){l(2647);var u=l(7545);v.exports=u.Object.keys},3083:function(v,x,l){l(3222);var u=l(7545);v.exports=u.Object.setPrototypeOf},2987:function(v,x,l){l(4859);var u=l(7545);v.exports=u.parseFloat},2239:function(v,x,l){l(5706);var u=l(7545);v.exports=u.parseInt},3154:function(v,x,l){l(4242),l(8939),l(6663),l(9021),l(7884),l(8885),l(1868),l(5454);var u=l(7545);v.exports=u.Promise},6577:function(v,x,l){l(5397);var u=l(7545);v.exports=u.Reflect.construct},3842:function(v,x,l){l(957);var u=l(5607);v.exports=u("String").trim},5008:function(v,x,l){l(9106),l(6663),l(6187),l(9781),l(492),l(6681),l(9594),l(3665),l(9017),l(1250),l(9786),l(503),l(6565),l(9322),l(3610),l(6886),l(3514),l(8671),l(8556),l(1367);var u=l(7545);v.exports=u.Symbol},994:function(v,x,l){l(8939),l(6663),l(5454),l(3665);var u=l(9207);v.exports=u.f("iterator")},2813:function(v,x,l){var u=l(3822);v.exports=u},8664:function(v,x,l){var u=l(1434);v.exports=u},1457:function(v,x,l){var u=l(7710);v.exports=u},2937:function(v,x,l){var u=l(4741);v.exports=u},9297:function(v,x,l){var u=l(4963);v.exports=u},8026:function(v,x,l){var u=l(7820);v.exports=u},2044:function(v,x,l){var u=l(8980);v.exports=u},2214:function(v,x,l){var u=l(6672);v.exports=u},9256:function(v,x,l){var u=l(2285);l(177),l(9031),l(6658),l(1875),l(8658),l(4592),l(6680),v.exports=u},5659:function(v,x,l){var u=l(8535);v.exports=u},6235:function(v,x,l){var u=l(6447),_=l(9288);v.exports=function(N){if(u(N))return N;throw TypeError(_(N)+" is not a function")}},1404:function(v,x,l){var u=l(2091),_=l(9288);v.exports=function(N){if(u(N))return N;throw TypeError(_(N)+" is not a constructor")}},7757:function(v,x,l){var u=l(6447);v.exports=function(_){if(typeof _=="object"||u(_))return _;throw TypeError("Can't set "+String(_)+" as a prototype")}},7423:function(v){v.exports=function(){}},6961:function(v){v.exports=function(x,l,u){if(x instanceof l)return x;throw TypeError("Incorrect "+(u?u+" ":"")+"invocation")}},1138:function(v,x,l){var u=l(5744);v.exports=function(_){if(u(_))return _;throw TypeError(String(_)+" is not an object")}},2724:function(v,x,l){"use strict";var u=l(1795),_=l(7739),N=l(4104);v.exports=function(j){for(var R=u(this),C=N(R),s=arguments.length,y=_(s>1?arguments[1]:void 0,C),m=s>2?arguments[2]:void 0,i=m===void 0?C:_(m,C);i>y;)R[y++]=j;return R}},7397:function(v,x,l){"use strict";var u=l(454).forEach,_=l(424),N=_("forEach");v.exports=N?[].forEach:function(j){return u(this,j,arguments.length>1?arguments[1]:void 0)}},841:function(v,x,l){"use strict";var u=l(8043),_=l(1795),N=l(1635),k=l(6109),j=l(2091),R=l(4104),C=l(9361),s=l(1669),y=l(8703);v.exports=function(i){var c=_(i),o=j(this),h=arguments.length,b=h>1?arguments[1]:void 0,d=b!==void 0;d&&(b=u(b,h>2?arguments[2]:void 0,2));var D=y(c),E=0,w,O,F,B,V,H;if(D&&!(this==Array&&k(D)))for(B=s(c,D),V=B.next,O=o?new this:[];!(F=V.call(B)).done;E++)H=d?N(B,b,[F.value,E],!0):F.value,C(O,E,H);else for(w=R(c),O=o?new this(w):Array(w);w>E;E++)H=d?b(c[E],E):c[E],C(O,E,H);return O.length=E,O}},8180:function(v,x,l){var u=l(101),_=l(7739),N=l(4104),k=function(j){return function(R,C,s){var y=u(R),m=N(y),i=_(s,m),c;if(j&&C!=C){for(;m>i;)if(c=y[i++],c!=c)return!0}else for(;m>i;i++)if((j||i in y)&&y[i]===C)return j||i||0;return!j&&-1}};v.exports={includes:k(!0),indexOf:k(!1)}},454:function(v,x,l){var u=l(8043),_=l(2202),N=l(1795),k=l(4104),j=l(1321),R=[].push,C=function(s){var y=s==1,m=s==2,i=s==3,c=s==4,o=s==6,h=s==7,b=s==5||o;return function(d,D,E,w){for(var O=N(d),F=_(O),B=u(D,E,3),V=k(F),H=0,Y=w||j,se=y?Y(d,V):m||h?Y(d,0):void 0,ne,be;V>H;H++)if((b||H in F)&&(ne=F[H],be=B(ne,H,O),s))if(y)se[H]=be;else if(be)switch(s){case 3:return!0;case 5:return ne;case 6:return H;case 2:R.call(se,ne)}else switch(s){case 4:return!1;case 7:R.call(se,ne)}return o?-1:i||c?c:se}};v.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6),filterReject:C(7)}},242:function(v,x,l){var u=l(6192),_=l(8182),N=l(4218),k=_("species");v.exports=function(j){return N>=51||!u(function(){var R=[],C=R.constructor={};return C[k]=function(){return{foo:1}},R[j](Boolean).foo!==1})}},424:function(v,x,l){"use strict";var u=l(6192);v.exports=function(_,N){var k=[][_];return!!k&&u(function(){k.call(null,N||function(){throw 1},1)})}},3712:function(v,x,l){var u=l(4770),_=l(2091),N=l(5744),k=l(8182),j=k("species");v.exports=function(R){var C;return u(R)&&(C=R.constructor,_(C)&&(C===Array||u(C.prototype))?C=void 0:N(C)&&(C=C[j],C===null&&(C=void 0))),C===void 0?Array:C}},1321:function(v,x,l){var u=l(3712);v.exports=function(_,N){return new(u(_))(N===0?0:N)}},1635:function(v,x,l){var u=l(1138),_=l(6639);v.exports=function(N,k,j,R){try{return R?k(u(j)[0],j[1]):k(j)}catch(C){_(N,"throw",C)}}},9770:function(v,x,l){var u=l(8182),_=u("iterator"),N=!1;try{var k=0,j={next:function(){return{done:!!k++}},return:function(){N=!0}};j[_]=function(){return this},Array.from(j,function(){throw 2})}catch{}v.exports=function(R,C){if(!C&&!N)return!1;var s=!1;try{var y={};y[_]=function(){return{next:function(){return{done:s=!0}}}},R(y)}catch{}return s}},9272:function(v){var x={}.toString;v.exports=function(l){return x.call(l).slice(8,-1)}},4696:function(v,x,l){var u=l(3471),_=l(6447),N=l(9272),k=l(8182),j=k("toStringTag"),R=N(function(){return arguments}())=="Arguments",C=function(s,y){try{return s[y]}catch{}};v.exports=u?N:function(s){var y,m,i;return s===void 0?"Undefined":s===null?"Null":typeof(m=C(y=Object(s),j))=="string"?m:R?N(y):(i=N(y))=="Object"&&_(y.callee)?"Arguments":i}},4635:function(v,x,l){var u=l(6192);v.exports=!u(function(){function _(){}return _.prototype.constructor=null,Object.getPrototypeOf(new _)!==_.prototype})},5148:function(v,x,l){"use strict";var u=l(4413).IteratorPrototype,_=l(2853),N=l(774),k=l(1284),j=l(7771),R=function(){return this};v.exports=function(C,s,y){var m=s+" Iterator";return C.prototype=_(u,{next:N(1,y)}),k(C,m,!1,!0),j[m]=R,C}},8711:function(v,x,l){var u=l(69),_=l(2760),N=l(774);v.exports=u?function(k,j,R){return _.f(k,j,N(1,R))}:function(k,j,R){return k[j]=R,k}},774:function(v){v.exports=function(x,l){return{enumerable:!(x&1),configurable:!(x&2),writable:!(x&4),value:l}}},9361:function(v,x,l){"use strict";var u=l(77),_=l(2760),N=l(774);v.exports=function(k,j,R){var C=u(j);C in k?_.f(k,C,N(0,R)):k[C]=R}},7218:function(v,x,l){"use strict";var u=l(3085),_=l(5546),N=l(2282),k=l(6447),j=l(5148),R=l(9341),C=l(4469),s=l(1284),y=l(8711),m=l(9482),i=l(8182),c=l(7771),o=l(4413),h=N.PROPER,b=N.CONFIGURABLE,d=o.IteratorPrototype,D=o.BUGGY_SAFARI_ITERATORS,E=i("iterator"),w="keys",O="values",F="entries",B=function(){return this};v.exports=function(V,H,Y,se,ne,be,K){j(Y,H,se);var Ce=function(G){if(G===ne&&te)return te;if(!D&&G in Ie)return Ie[G];switch(G){case w:return function(){return new Y(this,G)};case O:return function(){return new Y(this,G)};case F:return function(){return new Y(this,G)}}return function(){return new Y(this)}},W=H+" Iterator",Be=!1,Ie=V.prototype,ze=Ie[E]||Ie["@@iterator"]||ne&&Ie[ne],te=!D&&ze||Ce(ne),le=H=="Array"&&Ie.entries||ze,q,Z,fe;if(le&&(q=R(le.call(new V)),q!==Object.prototype&&q.next&&(!_&&R(q)!==d&&(C?C(q,d):k(q[E])||m(q,E,B)),s(q,W,!0,!0),_&&(c[W]=B))),h&&ne==O&&ze&&ze.name!==O&&(!_&&b?y(Ie,"name",O):(Be=!0,te=function(){return ze.call(this)})),ne)if(Z={values:Ce(O),keys:be?te:Ce(w),entries:Ce(F)},K)for(fe in Z)(D||Be||!(fe in Ie))&&m(Ie,fe,Z[fe]);else u({target:H,proto:!0,forced:D||Be},Z);return(!_||K)&&Ie[E]!==te&&m(Ie,E,te,{name:ne}),c[H]=te,Z}},1488:function(v,x,l){var u=l(7545),_=l(4500),N=l(9207),k=l(2760).f;v.exports=function(j){var R=u.Symbol||(u.Symbol={});_(R,j)||k(R,j,{value:N.f(j)})}},69:function(v,x,l){var u=l(6192);v.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(v,x,l){var u=l(8576),_=l(5744),N=u.document,k=_(N)&&_(N.createElement);v.exports=function(j){return k?N.createElement(j):{}}},7365:function(v){v.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(v){v.exports=typeof window=="object"},9347:function(v,x,l){var u=l(8989),_=l(8576);v.exports=/ipad|iphone|ipod/i.test(u)&&_.Pebble!==void 0},9536:function(v,x,l){var u=l(8989);v.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(u)},224:function(v,x,l){var u=l(9272),_=l(8576);v.exports=u(_.process)=="process"},5914:function(v,x,l){var u=l(8989);v.exports=/web0s(?!.*chrome)/i.test(u)},8989:function(v,x,l){var u=l(150);v.exports=u("navigator","userAgent")||""},4218:function(v,x,l){var u=l(8576),_=l(8989),N=u.process,k=u.Deno,j=N&&N.versions||k&&k.version,R=j&&j.v8,C,s;R?(C=R.split("."),s=C[0]<4?1:C[0]+C[1]):_&&(C=_.match(/Edge\/(\d+)/),(!C||C[1]>=74)&&(C=_.match(/Chrome\/(\d+)/),C&&(s=C[1]))),v.exports=s&&+s},5607:function(v,x,l){var u=l(7545);v.exports=function(_){return u[_+"Prototype"]}},2952:function(v){v.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(v,x,l){"use strict";var u=l(8576),_=l(6447),N=l(5141).f,k=l(9245),j=l(7545),R=l(8043),C=l(8711),s=l(4500),y=function(m){var i=function(c,o,h){if(this instanceof m){switch(arguments.length){case 0:return new m;case 1:return new m(c);case 2:return new m(c,o)}return new m(c,o,h)}return m.apply(this,arguments)};return i.prototype=m.prototype,i};v.exports=function(m,i){var c=m.target,o=m.global,h=m.stat,b=m.proto,d=o?u:h?u[c]:(u[c]||{}).prototype,D=o?j:j[c]||C(j,c,{})[c],E=D.prototype,w,O,F,B,V,H,Y,se,ne;for(B in i)w=k(o?B:c+(h?".":"#")+B,m.forced),O=!w&&d&&s(d,B),H=D[B],O&&(m.noTargetGet?(ne=N(d,B),Y=ne&&ne.value):Y=d[B]),V=O&&Y?Y:i[B],!(O&&typeof H==typeof V)&&(m.bind&&O?se=R(V,u):m.wrap&&O?se=y(V):b&&_(V)?se=R(Function.call,V):se=V,(m.sham||V&&V.sham||H&&H.sham)&&C(se,"sham",!0),C(D,B,se),b&&(F=c+"Prototype",s(j,F)||C(j,F,{}),C(j[F],B,V),m.real&&E&&!E[B]&&C(E,B,V)))}},6192:function(v){v.exports=function(x){try{return!!x()}catch{return!0}}},8043:function(v,x,l){var u=l(6235);v.exports=function(_,N,k){if(u(_),N===void 0)return _;switch(k){case 0:return function(){return _.call(N)};case 1:return function(j){return _.call(N,j)};case 2:return function(j,R){return _.call(N,j,R)};case 3:return function(j,R,C){return _.call(N,j,R,C)}}return function(){return _.apply(N,arguments)}}},6782:function(v,x,l){"use strict";var u=l(6235),_=l(5744),N=[].slice,k={},j=function(R,C,s){if(!(C in k)){for(var y=[],m=0;m<C;m++)y[m]="a["+m+"]";k[C]=Function("C,a","return new C("+y.join(",")+")")}return k[C](R,s)};v.exports=Function.bind||function(C){var s=u(this),y=N.call(arguments,1),m=function(){var c=y.concat(N.call(arguments));return this instanceof m?j(s,c.length,c):s.apply(C,c)};return _(s.prototype)&&(m.prototype=s.prototype),m}},2282:function(v,x,l){var u=l(69),_=l(4500),N=Function.prototype,k=u&&Object.getOwnPropertyDescriptor,j=_(N,"name"),R=j&&(function(){}).name==="something",C=j&&(!u||u&&k(N,"name").configurable);v.exports={EXISTS:j,PROPER:R,CONFIGURABLE:C}},150:function(v,x,l){var u=l(7545),_=l(8576),N=l(6447),k=function(j){return N(j)?j:void 0};v.exports=function(j,R){return arguments.length<2?k(u[j])||k(_[j]):u[j]&&u[j][R]||_[j]&&_[j][R]}},8703:function(v,x,l){var u=l(4696),_=l(5037),N=l(7771),k=l(8182),j=k("iterator");v.exports=function(R){if(R!=null)return _(R,j)||_(R,"@@iterator")||N[u(R)]}},1669:function(v,x,l){var u=l(6235),_=l(1138),N=l(8703);v.exports=function(k,j){var R=arguments.length<2?N(k):j;if(u(R))return _(R.call(k));throw TypeError(String(k)+" is not iterable")}},5037:function(v,x,l){var u=l(6235);v.exports=function(_,N){var k=_[N];return k==null?void 0:u(k)}},8576:function(v,x,l){var u=function(_){return _&&_.Math==Math&&_};v.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof l.g=="object"&&l.g)||function(){return this}()||Function("return this")()},4500:function(v,x,l){var u=l(1795),_={}.hasOwnProperty;v.exports=Object.hasOwn||function(k,j){return _.call(u(k),j)}},4535:function(v){v.exports={}},3681:function(v,x,l){var u=l(8576);v.exports=function(_,N){var k=u.console;k&&k.error&&(arguments.length===1?k.error(_):k.error(_,N))}},7403:function(v,x,l){var u=l(150);v.exports=u("document","documentElement")},188:function(v,x,l){var u=l(69),_=l(6192),N=l(7449);v.exports=!u&&!_(function(){return Object.defineProperty(N("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(v,x,l){var u=l(6192),_=l(9272),N="".split;v.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(k){return _(k)=="String"?N.call(k,""):Object(k)}:Object},9516:function(v,x,l){var u=l(6447),_=l(6434),N=Function.toString;u(_.inspectSource)||(_.inspectSource=function(k){return N.call(k)}),v.exports=_.inspectSource},273:function(v,x,l){var u=l(5744),_=l(8711);v.exports=function(N,k){u(k)&&"cause"in k&&_(N,"cause",N.cause)}},3326:function(v,x,l){var u=l(8921),_=l(8576),N=l(5744),k=l(8711),j=l(4500),R=l(6434),C=l(9766),s=l(4535),y="Object already initialized",m=_.WeakMap,i,c,o,h=function(F){return o(F)?c(F):i(F,{})},b=function(F){return function(B){var V;if(!N(B)||(V=c(B)).type!==F)throw TypeError("Incompatible receiver, "+F+" required");return V}};if(u||R.state){var d=R.state||(R.state=new m),D=d.get,E=d.has,w=d.set;i=function(F,B){if(E.call(d,F))throw new TypeError(y);return B.facade=F,w.call(d,F,B),B},c=function(F){return D.call(d,F)||{}},o=function(F){return E.call(d,F)}}else{var O=C("state");s[O]=!0,i=function(F,B){if(j(F,O))throw new TypeError(y);return B.facade=F,k(F,O,B),B},c=function(F){return j(F,O)?F[O]:{}},o=function(F){return j(F,O)}}v.exports={set:i,get:c,has:o,enforce:h,getterFor:b}},6109:function(v,x,l){var u=l(8182),_=l(7771),N=u("iterator"),k=Array.prototype;v.exports=function(j){return j!==void 0&&(_.Array===j||k[N]===j)}},4770:function(v,x,l){var u=l(9272);v.exports=Array.isArray||function(N){return u(N)=="Array"}},6447:function(v){v.exports=function(x){return typeof x=="function"}},2091:function(v,x,l){var u=l(6192),_=l(6447),N=l(4696),k=l(150),j=l(9516),R=[],C=k("Reflect","construct"),s=/^\s*(?:class|function)\b/,y=s.exec,m=!s.exec(function(){}),i=function(o){if(!_(o))return!1;try{return C(Object,R,o),!0}catch{return!1}},c=function(o){if(!_(o))return!1;switch(N(o)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return m||!!y.call(s,j(o))};v.exports=!C||u(function(){var o;return i(i.call)||!i(Object)||!i(function(){o=!0})||o})?c:i},9245:function(v,x,l){var u=l(6192),_=l(6447),N=/#|\.prototype\./,k=function(y,m){var i=R[j(y)];return i==s?!0:i==C?!1:_(m)?u(m):!!m},j=k.normalize=function(y){return String(y).replace(N,".").toLowerCase()},R=k.data={},C=k.NATIVE="N",s=k.POLYFILL="P";v.exports=k},5744:function(v,x,l){var u=l(6447);v.exports=function(_){return typeof _=="object"?_!==null:u(_)}},5546:function(v){v.exports=!0},3236:function(v,x,l){var u=l(6447),_=l(150),N=l(615);v.exports=N?function(k){return typeof k=="symbol"}:function(k){var j=_("Symbol");return u(j)&&Object(k)instanceof j}},3442:function(v,x,l){var u=l(1138),_=l(6109),N=l(4104),k=l(8043),j=l(1669),R=l(8703),C=l(6639),s=function(y,m){this.stopped=y,this.result=m};v.exports=function(y,m,i){var c=i&&i.that,o=!!(i&&i.AS_ENTRIES),h=!!(i&&i.IS_ITERATOR),b=!!(i&&i.INTERRUPTED),d=k(m,c,1+o+b),D,E,w,O,F,B,V,H=function(se){return D&&C(D,"normal",se),new s(!0,se)},Y=function(se){return o?(u(se),b?d(se[0],se[1],H):d(se[0],se[1])):b?d(se,H):d(se)};if(h)D=y;else{if(E=R(y),!E)throw TypeError(String(y)+" is not iterable");if(_(E)){for(w=0,O=N(y);O>w;w++)if(F=Y(y[w]),F&&F instanceof s)return F;return new s(!1)}D=j(y,E)}for(B=D.next;!(V=B.call(D)).done;){try{F=Y(V.value)}catch(se){C(D,"throw",se)}if(typeof F=="object"&&F&&F instanceof s)return F}return new s(!1)}},6639:function(v,x,l){var u=l(1138),_=l(5037);v.exports=function(N,k,j){var R,C;u(N);try{if(R=_(N,"return"),!R){if(k==="throw")throw j;return j}R=R.call(N)}catch(s){C=!0,R=s}if(k==="throw")throw j;if(C)throw R;return u(R),j}},4413:function(v,x,l){"use strict";var u=l(6192),_=l(6447),N=l(2853),k=l(9341),j=l(9482),R=l(8182),C=l(5546),s=R("iterator"),y=!1,m,i,c;[].keys&&(c=[].keys(),"next"in c?(i=k(k(c)),i!==Object.prototype&&(m=i)):y=!0);var o=m==null||u(function(){var h={};return m[s].call(h)!==h});o?m={}:C&&(m=N(m)),_(m[s])||j(m,s,function(){return this}),v.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:y}},7771:function(v){v.exports={}},4104:function(v,x,l){var u=l(8445);v.exports=function(_){return u(_.length)}},2950:function(v,x,l){var u=l(8576),_=l(5141).f,N=l(7160).set,k=l(9536),j=l(9347),R=l(5914),C=l(224),s=u.MutationObserver||u.WebKitMutationObserver,y=u.document,m=u.process,i=u.Promise,c=_(u,"queueMicrotask"),o=c&&c.value,h,b,d,D,E,w,O,F;o||(h=function(){var B,V;for(C&&(B=m.domain)&&B.exit();b;){V=b.fn,b=b.next;try{V()}catch(H){throw b?D():d=void 0,H}}d=void 0,B&&B.enter()},!k&&!C&&!R&&s&&y?(E=!0,w=y.createTextNode(""),new s(h).observe(w,{characterData:!0}),D=function(){w.data=E=!E}):!j&&i&&i.resolve?(O=i.resolve(void 0),O.constructor=i,F=O.then,D=function(){F.call(O,h)}):C?D=function(){m.nextTick(h)}:D=function(){N.call(u,h)}),v.exports=o||function(B){var V={fn:B,next:void 0};d&&(d.next=V),b||(b=V,D()),d=V}},4471:function(v,x,l){var u=l(8576);v.exports=u.Promise},3045:function(v,x,l){var u=l(4218),_=l(6192);v.exports=!!Object.getOwnPropertySymbols&&!_(function(){var N=Symbol();return!String(N)||!(Object(N)instanceof Symbol)||!Symbol.sham&&u&&u<41})},4551:function(v,x,l){var u=l(6192),_=l(8182),N=l(5546),k=_("iterator");v.exports=!u(function(){var j=new URL("b?a=1&b=2&c=3","http://a"),R=j.searchParams,C="";return j.pathname="c%20d",R.forEach(function(s,y){R.delete("b"),C+=y+s}),N&&!j.toJSON||!R.sort||j.href!=="http://a/c%20d?a=1&c=3"||R.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!R[k]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||C!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8921:function(v,x,l){var u=l(8576),_=l(6447),N=l(9516),k=u.WeakMap;v.exports=_(k)&&/native code/.test(N(k))},9438:function(v,x,l){"use strict";var u=l(6235),_=function(N){var k,j;this.promise=new N(function(R,C){if(k!==void 0||j!==void 0)throw TypeError("Bad Promise constructor");k=R,j=C}),this.resolve=u(k),this.reject=u(j)};v.exports.f=function(N){return new _(N)}},15:function(v,x,l){var u=l(8576),_=l(6192),N=l(4845),k=l(4277).trim,j=l(1450),R=u.parseFloat,C=u.Symbol,s=C&&C.iterator,y=1/R(j+"-0")!==-1/0||s&&!_(function(){R(Object(s))});v.exports=y?function(i){var c=k(N(i)),o=R(c);return o===0&&c.charAt(0)=="-"?-0:o}:R},2558:function(v,x,l){var u=l(8576),_=l(6192),N=l(4845),k=l(4277).trim,j=l(1450),R=u.parseInt,C=u.Symbol,s=C&&C.iterator,y=/^[+-]?0[Xx]/,m=R(j+"08")!==8||R(j+"0x16")!==22||s&&!_(function(){R(Object(s))});v.exports=m?function(c,o){var h=k(N(c));return R(h,o>>>0||(y.test(h)?16:10))}:R},2503:function(v,x,l){"use strict";var u=l(69),_=l(6192),N=l(7653),k=l(4750),j=l(6007),R=l(1795),C=l(2202),s=Object.assign,y=Object.defineProperty;v.exports=!s||_(function(){if(u&&s({b:1},s(y({},"a",{enumerable:!0,get:function(){y(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var m={},i={},c=Symbol(),o="abcdefghijklmnopqrst";return m[c]=7,o.split("").forEach(function(h){i[h]=h}),s({},m)[c]!=7||N(s({},i)).join("")!=o})?function(i,c){for(var o=R(i),h=arguments.length,b=1,d=k.f,D=j.f;h>b;)for(var E=C(arguments[b++]),w=d?N(E).concat(d(E)):N(E),O=w.length,F=0,B;O>F;)B=w[F++],(!u||D.call(E,B))&&(o[B]=E[B]);return o}:s},2853:function(v,x,l){var u=l(1138),_=l(1187),N=l(2952),k=l(4535),j=l(7403),R=l(7449),C=l(9766),s=">",y="<",m="prototype",i="script",c=C("IE_PROTO"),o=function(){},h=function(w){return y+i+s+w+y+"/"+i+s},b=function(w){w.write(h("")),w.close();var O=w.parentWindow.Object;return w=null,O},d=function(){var w=R("iframe"),O="java"+i+":",F;return w.style.display="none",j.appendChild(w),w.src=String(O),F=w.contentWindow.document,F.open(),F.write(h("document.F=Object")),F.close(),F.F},D,E=function(){try{D=new ActiveXObject("htmlfile")}catch{}E=typeof document<"u"?document.domain&&D?b(D):d():b(D);for(var w=N.length;w--;)delete E[m][N[w]];return E()};k[c]=!0,v.exports=Object.create||function(O,F){var B;return O!==null?(o[m]=u(O),B=new o,o[m]=null,B[c]=O):B=E(),F===void 0?B:_(B,F)}},1187:function(v,x,l){var u=l(69),_=l(2760),N=l(1138),k=l(7653);v.exports=u?Object.defineProperties:function(R,C){N(R);for(var s=k(C),y=s.length,m=0,i;y>m;)_.f(R,i=s[m++],C[i]);return R}},2760:function(v,x,l){var u=l(69),_=l(188),N=l(1138),k=l(77),j=Object.defineProperty;x.f=u?j:function(C,s,y){if(N(C),s=k(s),N(y),_)try{return j(C,s,y)}catch{}if("get"in y||"set"in y)throw TypeError("Accessors not supported");return"value"in y&&(C[s]=y.value),C}},5141:function(v,x,l){var u=l(69),_=l(6007),N=l(774),k=l(101),j=l(77),R=l(4500),C=l(188),s=Object.getOwnPropertyDescriptor;x.f=u?s:function(m,i){if(m=k(m),i=j(i),C)try{return s(m,i)}catch{}if(R(m,i))return N(!_.f.call(m,i),m[i])}},4052:function(v,x,l){var u=l(101),_=l(2092).f,N={}.toString,k=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],j=function(R){try{return _(R)}catch{return k.slice()}};v.exports.f=function(C){return k&&N.call(C)=="[object Window]"?j(C):_(u(C))}},2092:function(v,x,l){var u=l(7934),_=l(2952),N=_.concat("length","prototype");x.f=Object.getOwnPropertyNames||function(j){return u(j,N)}},4750:function(v,x){x.f=Object.getOwnPropertySymbols},9341:function(v,x,l){var u=l(4500),_=l(6447),N=l(1795),k=l(9766),j=l(4635),R=k("IE_PROTO"),C=Object.prototype;v.exports=j?Object.getPrototypeOf:function(s){var y=N(s);if(u(y,R))return y[R];var m=y.constructor;return _(m)&&y instanceof m?m.prototype:y instanceof Object?C:null}},7934:function(v,x,l){var u=l(4500),_=l(101),N=l(8180).indexOf,k=l(4535);v.exports=function(j,R){var C=_(j),s=0,y=[],m;for(m in C)!u(k,m)&&u(C,m)&&y.push(m);for(;R.length>s;)u(C,m=R[s++])&&(~N(y,m)||y.push(m));return y}},7653:function(v,x,l){var u=l(7934),_=l(2952);v.exports=Object.keys||function(k){return u(k,_)}},6007:function(v,x){"use strict";var l={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,_=u&&!l.call({1:2},1);x.f=_?function(k){var j=u(this,k);return!!j&&j.enumerable}:l},4469:function(v,x,l){var u=l(1138),_=l(7757);v.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var N=!1,k={},j;try{j=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,j.call(k,[]),N=k instanceof Array}catch{}return function(C,s){return u(C),_(s),N?j.call(C,s):C.__proto__=s,C}}():void 0)},158:function(v,x,l){"use strict";var u=l(3471),_=l(4696);v.exports=u?{}.toString:function(){return"[object "+_(this)+"]"}},380:function(v,x,l){var u=l(6447),_=l(5744);v.exports=function(N,k){var j,R;if(k==="string"&&u(j=N.toString)&&!_(R=j.call(N))||u(j=N.valueOf)&&!_(R=j.call(N))||k!=="string"&&u(j=N.toString)&&!_(R=j.call(N)))return R;throw TypeError("Can't convert object to primitive value")}},7545:function(v){v.exports={}},892:function(v){v.exports=function(x){try{return{error:!1,value:x()}}catch(l){return{error:!0,value:l}}}},9126:function(v,x,l){var u=l(1138),_=l(5744),N=l(9438);v.exports=function(k,j){if(u(k),_(j)&&j.constructor===k)return j;var R=N.f(k),C=R.resolve;return C(j),R.promise}},533:function(v,x,l){var u=l(9482);v.exports=function(_,N,k){for(var j in N)k&&k.unsafe&&_[j]?_[j]=N[j]:u(_,j,N[j],k);return _}},9482:function(v,x,l){var u=l(8711);v.exports=function(_,N,k,j){j&&j.enumerable?_[N]=k:u(_,N,k)}},3209:function(v){v.exports=function(x){if(x==null)throw TypeError("Can't call method on "+x);return x}},7613:function(v,x,l){var u=l(8576);v.exports=function(_,N){try{Object.defineProperty(u,_,{value:N,configurable:!0,writable:!0})}catch{u[_]=N}return N}},3656:function(v,x,l){"use strict";var u=l(150),_=l(2760),N=l(8182),k=l(69),j=N("species");v.exports=function(R){var C=u(R),s=_.f;k&&C&&!C[j]&&s(C,j,{configurable:!0,get:function(){return this}})}},1284:function(v,x,l){var u=l(3471),_=l(2760).f,N=l(8711),k=l(4500),j=l(158),R=l(8182),C=R("toStringTag");v.exports=function(s,y,m,i){if(s){var c=m?s:s.prototype;k(c,C)||_(c,C,{configurable:!0,value:y}),i&&!u&&N(c,"toString",j)}}},9766:function(v,x,l){var u=l(8717),_=l(2759),N=u("keys");v.exports=function(k){return N[k]||(N[k]=_(k))}},6434:function(v,x,l){var u=l(8576),_=l(7613),N="__core-js_shared__",k=u[N]||_(N,{});v.exports=k},8717:function(v,x,l){var u=l(5546),_=l(6434);(v.exports=function(N,k){return _[N]||(_[N]=k!==void 0?k:{})})("versions",[]).push({version:"3.18.2",mode:u?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(v,x,l){var u=l(1138),_=l(1404),N=l(8182),k=N("species");v.exports=function(j,R){var C=u(j).constructor,s;return C===void 0||(s=u(C)[k])==null?R:_(s)}},863:function(v,x,l){var u=l(1941),_=l(4845),N=l(3209),k=function(j){return function(R,C){var s=_(N(R)),y=u(C),m=s.length,i,c;return y<0||y>=m?j?"":void 0:(i=s.charCodeAt(y),i<55296||i>56319||y+1===m||(c=s.charCodeAt(y+1))<56320||c>57343?j?s.charAt(y):i:j?s.slice(y,y+2):(i-55296<<10)+(c-56320)+65536)}};v.exports={codeAt:k(!1),charAt:k(!0)}},7977:function(v){"use strict";var x=2147483647,l=36,u=1,_=26,N=38,k=700,j=72,R=128,C="-",s=/[^\0-\u007E]/,y=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",i=l-u,c=Math.floor,o=String.fromCharCode,h=function(E){for(var w=[],O=0,F=E.length;O<F;){var B=E.charCodeAt(O++);if(B>=55296&&B<=56319&&O<F){var V=E.charCodeAt(O++);(V&64512)==56320?w.push(((B&1023)<<10)+(V&1023)+65536):(w.push(B),O--)}else w.push(B)}return w},b=function(E){return E+22+75*(E<26)},d=function(E,w,O){var F=0;for(E=O?c(E/k):E>>1,E+=c(E/w);E>i*_>>1;F+=l)E=c(E/i);return c(F+(i+1)*E/(E+N))},D=function(E){var w=[];E=h(E);var O=E.length,F=R,B=0,V=j,H,Y;for(H=0;H<E.length;H++)Y=E[H],Y<128&&w.push(o(Y));var se=w.length,ne=se;for(se&&w.push(C);ne<O;){var be=x;for(H=0;H<E.length;H++)Y=E[H],Y>=F&&Y<be&&(be=Y);var K=ne+1;if(be-F>c((x-B)/K))throw RangeError(m);for(B+=(be-F)*K,F=be,H=0;H<E.length;H++){if(Y=E[H],Y<F&&++B>x)throw RangeError(m);if(Y==F){for(var Ce=B,W=l;;W+=l){var Be=W<=V?u:W>=V+_?_:W-V;if(Ce<Be)break;var Ie=Ce-Be,ze=l-Be;w.push(o(b(Be+Ie%ze))),Ce=c(Ie/ze)}w.push(o(b(Ce))),V=d(B,K,ne==se),B=0,++ne}}++B,++F}return w.join("")};v.exports=function(E){var w=[],O=E.toLowerCase().replace(y,".").split("."),F,B;for(F=0;F<O.length;F++)B=O[F],w.push(s.test(B)?"xn--"+D(B):B);return w.join(".")}},6815:function(v,x,l){var u=l(2282).PROPER,_=l(6192),N=l(1450),k="\u200B\x85\u180E";v.exports=function(j){return _(function(){return!!N[j]()||k[j]()!==k||u&&N[j].name!==j})}},4277:function(v,x,l){var u=l(3209),_=l(4845),N=l(1450),k="["+N+"]",j=RegExp("^"+k+k+"*"),R=RegExp(k+k+"*$"),C=function(s){return function(y){var m=_(u(y));return s&1&&(m=m.replace(j,"")),s&2&&(m=m.replace(R,"")),m}};v.exports={start:C(1),end:C(2),trim:C(3)}},7160:function(v,x,l){var u=l(8576),_=l(6447),N=l(6192),k=l(8043),j=l(7403),R=l(7449),C=l(9536),s=l(224),y=u.setImmediate,m=u.clearImmediate,i=u.process,c=u.MessageChannel,o=u.Dispatch,h=0,b={},d="onreadystatechange",D,E,w,O;try{D=u.location}catch{}var F=function(Y){if(b.hasOwnProperty(Y)){var se=b[Y];delete b[Y],se()}},B=function(Y){return function(){F(Y)}},V=function(Y){F(Y.data)},H=function(Y){u.postMessage(String(Y),D.protocol+"//"+D.host)};(!y||!m)&&(y=function(se){for(var ne=[],be=arguments.length,K=1;be>K;)ne.push(arguments[K++]);return b[++h]=function(){(_(se)?se:Function(se)).apply(void 0,ne)},E(h),h},m=function(se){delete b[se]},s?E=function(Y){i.nextTick(B(Y))}:o&&o.now?E=function(Y){o.now(B(Y))}:c&&!C?(w=new c,O=w.port2,w.port1.onmessage=V,E=k(O.postMessage,O,1)):u.addEventListener&&_(u.postMessage)&&!u.importScripts&&D&&D.protocol!=="file:"&&!N(H)?(E=H,u.addEventListener("message",V,!1)):d in R("script")?E=function(Y){j.appendChild(R("script"))[d]=function(){j.removeChild(this),F(Y)}}:E=function(Y){setTimeout(B(Y),0)}),v.exports={set:y,clear:m}},7739:function(v,x,l){var u=l(1941),_=Math.max,N=Math.min;v.exports=function(k,j){var R=u(k);return R<0?_(R+j,0):N(R,j)}},101:function(v,x,l){var u=l(2202),_=l(3209);v.exports=function(N){return u(_(N))}},1941:function(v){var x=Math.ceil,l=Math.floor;v.exports=function(u){var _=+u;return _!==_||_===0?0:(_>0?l:x)(_)}},8445:function(v,x,l){var u=l(1941),_=Math.min;v.exports=function(N){return N>0?_(u(N),9007199254740991):0}},1795:function(v,x,l){var u=l(3209);v.exports=function(_){return Object(u(_))}},7888:function(v,x,l){var u=l(5744),_=l(3236),N=l(5037),k=l(380),j=l(8182),R=j("toPrimitive");v.exports=function(C,s){if(!u(C)||_(C))return C;var y=N(C,R),m;if(y){if(s===void 0&&(s="default"),m=y.call(C,s),!u(m)||_(m))return m;throw TypeError("Can't convert object to primitive value")}return s===void 0&&(s="number"),k(C,s)}},77:function(v,x,l){var u=l(7888),_=l(3236);v.exports=function(N){var k=u(N,"string");return _(k)?k:String(k)}},3471:function(v,x,l){var u=l(8182),_=u("toStringTag"),N={};N[_]="z",v.exports=String(N)==="[object z]"},4845:function(v,x,l){var u=l(4696);v.exports=function(_){if(u(_)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(_)}},9288:function(v){v.exports=function(x){try{return String(x)}catch{return"Object"}}},2759:function(v){var x=0,l=Math.random();v.exports=function(u){return"Symbol("+String(u===void 0?"":u)+")_"+(++x+l).toString(36)}},615:function(v,x,l){var u=l(3045);v.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(v,x,l){var u=l(8182);x.f=u},8182:function(v,x,l){var u=l(8576),_=l(8717),N=l(4500),k=l(2759),j=l(3045),R=l(615),C=_("wks"),s=u.Symbol,y=R?s:s&&s.withoutSetter||k;v.exports=function(m){return(!N(C,m)||!(j||typeof C[m]=="string"))&&(j&&N(s,m)?C[m]=s[m]:C[m]=y("Symbol."+m)),C[m]}},1450:function(v){v.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},4242:function(v,x,l){"use strict";var u=l(3085),_=l(9341),N=l(4469),k=l(2853),j=l(8711),R=l(774),C=l(273),s=l(3442),y=l(4845),m=function(c,o){var h=this,b=arguments.length>2?arguments[2]:void 0;if(!(h instanceof m))return new m(c,o,b);N&&(h=N(new Error(void 0),_(h))),o!==void 0&&j(h,"message",y(o)),C(h,b);var d=[];return s(c,d.push,{that:d}),j(h,"errors",d),h};m.prototype=k(Error.prototype,{constructor:R(5,m),message:R(5,""),name:R(5,"AggregateError")}),u({global:!0},{AggregateError:m})},9106:function(v,x,l){"use strict";var u=l(3085),_=l(6192),N=l(4770),k=l(5744),j=l(1795),R=l(4104),C=l(9361),s=l(1321),y=l(242),m=l(8182),i=l(4218),c=m("isConcatSpreadable"),o=9007199254740991,h="Maximum allowed index exceeded",b=i>=51||!_(function(){var w=[];return w[c]=!1,w.concat()[0]!==w}),d=y("concat"),D=function(w){if(!k(w))return!1;var O=w[c];return O!==void 0?!!O:N(w)},E=!b||!d;u({target:"Array",proto:!0,forced:E},{concat:function(O){var F=j(this),B=s(F,0),V=0,H,Y,se,ne,be;for(H=-1,se=arguments.length;H<se;H++)if(be=H===-1?F:arguments[H],D(be)){if(ne=R(be),V+ne>o)throw TypeError(h);for(Y=0;Y<ne;Y++,V++)Y in be&&C(B,V,be[Y])}else{if(V>=o)throw TypeError(h);C(B,V++,be)}return B.length=V,B}})},1710:function(v,x,l){var u=l(3085),_=l(2724),N=l(7423);u({target:"Array",proto:!0},{fill:_}),N("fill")},3436:function(v,x,l){"use strict";var u=l(3085),_=l(454).filter,N=l(242),k=N("filter");u({target:"Array",proto:!0,forced:!k},{filter:function(R){return _(this,R,arguments.length>1?arguments[1]:void 0)}})},9823:function(v,x,l){"use strict";var u=l(3085),_=l(7397);u({target:"Array",proto:!0,forced:[].forEach!=_},{forEach:_})},9173:function(v,x,l){var u=l(3085),_=l(841),N=l(9770),k=!N(function(j){Array.from(j)});u({target:"Array",stat:!0,forced:k},{from:_})},2276:function(v,x,l){"use strict";var u=l(3085),_=l(8180).indexOf,N=l(424),k=[].indexOf,j=!!k&&1/[1].indexOf(1,-0)<0,R=N("indexOf");u({target:"Array",proto:!0,forced:j||!R},{indexOf:function(s){return j?k.apply(this,arguments)||0:_(this,s,arguments.length>1?arguments[1]:void 0)}})},8118:function(v,x,l){var u=l(3085),_=l(4770);u({target:"Array",stat:!0},{isArray:_})},8939:function(v,x,l){"use strict";var u=l(101),_=l(7423),N=l(7771),k=l(3326),j=l(7218),R="Array Iterator",C=k.set,s=k.getterFor(R);v.exports=j(Array,"Array",function(y,m){C(this,{type:R,target:u(y),index:0,kind:m})},function(){var y=s(this),m=y.target,i=y.kind,c=y.index++;return!m||c>=m.length?(y.target=void 0,{value:void 0,done:!0}):i=="keys"?{value:c,done:!1}:i=="values"?{value:m[c],done:!1}:{value:[c,m[c]],done:!1}},"values"),N.Arguments=N.Array,_("keys"),_("values"),_("entries")},3838:function(v,x,l){"use strict";var u=l(3085),_=l(454).map,N=l(242),k=N("map");u({target:"Array",proto:!0,forced:!k},{map:function(R){return _(this,R,arguments.length>1?arguments[1]:void 0)}})},5818:function(v,x,l){"use strict";var u=l(3085),_=l(4770),N=l(2091),k=l(5744),j=l(7739),R=l(4104),C=l(101),s=l(9361),y=l(8182),m=l(242),i=m("slice"),c=y("species"),o=[].slice,h=Math.max;u({target:"Array",proto:!0,forced:!i},{slice:function(d,D){var E=C(this),w=R(E),O=j(d,w),F=j(D===void 0?w:D,w),B,V,H;if(_(E)&&(B=E.constructor,N(B)&&(B===Array||_(B.prototype))?B=void 0:k(B)&&(B=B[c],B===null&&(B=void 0)),B===Array||B===void 0))return o.call(E,O,F);for(V=new(B===void 0?Array:B)(h(F-O,0)),H=0;O<F;O++,H++)O in E&&s(V,H,E[O]);return V.length=H,V}})},2178:function(v,x,l){"use strict";var u=l(3085),_=l(7739),N=l(1941),k=l(4104),j=l(1795),R=l(1321),C=l(9361),s=l(242),y=s("splice"),m=Math.max,i=Math.min,c=9007199254740991,o="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!y},{splice:function(b,d){var D=j(this),E=k(D),w=_(b,E),O=arguments.length,F,B,V,H,Y,se;if(O===0?F=B=0:O===1?(F=0,B=E-w):(F=O-2,B=i(m(N(d),0),E-w)),E+F-B>c)throw TypeError(o);for(V=R(D,B),H=0;H<B;H++)Y=w+H,Y in D&&C(V,H,D[Y]);if(V.length=B,F<B){for(H=w;H<E-B;H++)Y=H+B,se=H+F,Y in D?D[se]=D[Y]:delete D[se];for(H=E;H>E-B+F;H--)delete D[H-1]}else if(F>B)for(H=E-B;H>w;H--)Y=H+B-1,se=H+F-1,Y in D?D[se]=D[Y]:delete D[se];for(H=0;H<F;H++)D[H+w]=arguments[H+2];return D.length=E-B+F,V}})},665:function(v,x,l){var u=l(3085),_=l(6782);u({target:"Function",proto:!0},{bind:_})},8671:function(v,x,l){var u=l(8576),_=l(1284);_(u.JSON,"JSON",!0)},8556:function(){},2666:function(v,x,l){var u=l(3085),_=l(2558);u({target:"Number",stat:!0,forced:Number.parseInt!=_},{parseInt:_})},3113:function(v,x,l){var u=l(3085),_=l(69),N=l(2853);u({target:"Object",stat:!0,sham:!_},{create:N})},297:function(v,x,l){var u=l(3085),_=l(69),N=l(2760);u({target:"Object",stat:!0,forced:!_,sham:!_},{defineProperty:N.f})},9234:function(v,x,l){var u=l(3085),_=l(6192),N=l(1795),k=l(9341),j=l(4635),R=_(function(){k(1)});u({target:"Object",stat:!0,forced:R,sham:!j},{getPrototypeOf:function(s){return k(N(s))}})},2647:function(v,x,l){var u=l(3085),_=l(1795),N=l(7653),k=l(6192),j=k(function(){N(1)});u({target:"Object",stat:!0,forced:j},{keys:function(C){return N(_(C))}})},3222:function(v,x,l){var u=l(3085),_=l(4469);u({target:"Object",stat:!0},{setPrototypeOf:_})},6663:function(){},4859:function(v,x,l){var u=l(3085),_=l(15);u({global:!0,forced:parseFloat!=_},{parseFloat:_})},5706:function(v,x,l){var u=l(3085),_=l(2558);u({global:!0,forced:parseInt!=_},{parseInt:_})},7884:function(v,x,l){"use strict";var u=l(3085),_=l(6235),N=l(9438),k=l(892),j=l(3442);u({target:"Promise",stat:!0},{allSettled:function(C){var s=this,y=N.f(s),m=y.resolve,i=y.reject,c=k(function(){var o=_(s.resolve),h=[],b=0,d=1;j(C,function(D){var E=b++,w=!1;h.push(void 0),d++,o.call(s,D).then(function(O){w||(w=!0,h[E]={status:"fulfilled",value:O},--d||m(h))},function(O){w||(w=!0,h[E]={status:"rejected",reason:O},--d||m(h))})}),--d||m(h)});return c.error&&i(c.value),y.promise}})},8885:function(v,x,l){"use strict";var u=l(3085),_=l(6235),N=l(150),k=l(9438),j=l(892),R=l(3442),C="No one promise resolved";u({target:"Promise",stat:!0},{any:function(y){var m=this,i=k.f(m),c=i.resolve,o=i.reject,h=j(function(){var b=_(m.resolve),d=[],D=0,E=1,w=!1;R(y,function(O){var F=D++,B=!1;d.push(void 0),E++,b.call(m,O).then(function(V){B||w||(w=!0,c(V))},function(V){B||w||(B=!0,d[F]=V,--E||o(new(N("AggregateError"))(d,C)))})}),--E||o(new(N("AggregateError"))(d,C))});return h.error&&o(h.value),i.promise}})},1868:function(v,x,l){"use strict";var u=l(3085),_=l(5546),N=l(4471),k=l(6192),j=l(150),R=l(6447),C=l(4743),s=l(9126),y=l(9482),m=!!N&&k(function(){N.prototype.finally.call({then:function(){}},function(){})});if(u({target:"Promise",proto:!0,real:!0,forced:m},{finally:function(c){var o=C(this,j("Promise")),h=R(c);return this.then(h?function(b){return s(o,c()).then(function(){return b})}:c,h?function(b){return s(o,c()).then(function(){throw b})}:c)}}),!_&&R(N)){var i=j("Promise").prototype.finally;N.prototype.finally!==i&&y(N.prototype,"finally",i,{unsafe:!0})}},9021:function(v,x,l){"use strict";var u=l(3085),_=l(5546),N=l(8576),k=l(150),j=l(4471),R=l(9482),C=l(533),s=l(4469),y=l(1284),m=l(3656),i=l(6235),c=l(6447),o=l(5744),h=l(6961),b=l(9516),d=l(3442),D=l(9770),E=l(4743),w=l(7160).set,O=l(2950),F=l(9126),B=l(3681),V=l(9438),H=l(892),Y=l(3326),se=l(9245),ne=l(8182),be=l(2957),K=l(224),Ce=l(4218),W=ne("species"),Be="Promise",Ie=Y.get,ze=Y.set,te=Y.getterFor(Be),le=j&&j.prototype,q=j,Z=le,fe=N.TypeError,G=N.document,X=N.process,J=V.f,Q=J,ve=!!(G&&G.createEvent&&N.dispatchEvent),he=c(N.PromiseRejectionEvent),Se="unhandledrejection",xe="rejectionhandled",De=0,ae=1,ee=2,ie=1,ce=2,de=!1,me,Ne,Ve,He,ye=se(Be,function(){var we=b(q),Ae=we!==String(q);if(!Ae&&Ce===66||_&&!Z.finally)return!0;if(Ce>=51&&/native code/.test(we))return!1;var Fe=new q(function(Le){Le(1)}),Ue=function(Le){Le(function(){},function(){})},Ye=Fe.constructor={};return Ye[W]=Ue,de=Fe.then(function(){})instanceof Ue,de?!Ae&&be&&!he:!0}),We=ye||!D(function(we){q.all(we).catch(function(){})}),Xe=function(we){var Ae;return o(we)&&c(Ae=we.then)?Ae:!1},qe=function(we,Ae){if(!we.notified){we.notified=!0;var Fe=we.reactions;O(function(){for(var Ue=we.value,Ye=we.state==ae,Le=0;Fe.length>Le;){var kt=Fe[Le++],Pt=Ye?kt.ok:kt.fail,Ge=kt.resolve,Ee=kt.reject,Dt=kt.domain,lt,ft,Jt;try{Pt?(Ye||(we.rejection===ce&&rt(we),we.rejection=ie),Pt===!0?lt=Ue:(Dt&&Dt.enter(),lt=Pt(Ue),Dt&&(Dt.exit(),Jt=!0)),lt===kt.promise?Ee(fe("Promise-chain cycle")):(ft=Xe(lt))?ft.call(lt,Ge,Ee):Ge(lt)):Ee(Ue)}catch(Xt){Dt&&!Jt&&Dt.exit(),Ee(Xt)}}we.reactions=[],we.notified=!1,Ae&&!we.rejection&&ut(we)})}},Et=function(we,Ae,Fe){var Ue,Ye;ve?(Ue=G.createEvent("Event"),Ue.promise=Ae,Ue.reason=Fe,Ue.initEvent(we,!1,!0),N.dispatchEvent(Ue)):Ue={promise:Ae,reason:Fe},!he&&(Ye=N["on"+we])?Ye(Ue):we===Se&&B("Unhandled promise rejection",Fe)},ut=function(we){w.call(N,function(){var Ae=we.facade,Fe=we.value,Ue=pt(we),Ye;if(Ue&&(Ye=H(function(){K?X.emit("unhandledRejection",Fe,Ae):Et(Se,Ae,Fe)}),we.rejection=K||pt(we)?ce:ie,Ye.error))throw Ye.value})},pt=function(we){return we.rejection!==ie&&!we.parent},rt=function(we){w.call(N,function(){var Ae=we.facade;K?X.emit("rejectionHandled",Ae):Et(xe,Ae,we.value)})},vt=function(we,Ae,Fe){return function(Ue){we(Ae,Ue,Fe)}},Nt=function(we,Ae,Fe){we.done||(we.done=!0,Fe&&(we=Fe),we.value=Ae,we.state=ee,qe(we,!0))},Ut=function(we,Ae,Fe){if(!we.done){we.done=!0,Fe&&(we=Fe);try{if(we.facade===Ae)throw fe("Promise can't be resolved itself");var Ue=Xe(Ae);Ue?O(function(){var Ye={done:!1};try{Ue.call(Ae,vt(Ut,Ye,we),vt(Nt,Ye,we))}catch(Le){Nt(Ye,Le,we)}}):(we.value=Ae,we.state=ae,qe(we,!1))}catch(Ye){Nt({done:!1},Ye,we)}}};if(ye&&(q=function(Ae){h(this,q,Be),i(Ae),me.call(this);var Fe=Ie(this);try{Ae(vt(Ut,Fe),vt(Nt,Fe))}catch(Ue){Nt(Fe,Ue)}},Z=q.prototype,me=function(Ae){ze(this,{type:Be,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:De,value:void 0})},me.prototype=C(Z,{then:function(Ae,Fe){var Ue=te(this),Ye=J(E(this,q));return Ye.ok=c(Ae)?Ae:!0,Ye.fail=c(Fe)&&Fe,Ye.domain=K?X.domain:void 0,Ue.parent=!0,Ue.reactions.push(Ye),Ue.state!=De&&qe(Ue,!1),Ye.promise},catch:function(we){return this.then(void 0,we)}}),Ne=function(){var we=new me,Ae=Ie(we);this.promise=we,this.resolve=vt(Ut,Ae),this.reject=vt(Nt,Ae)},V.f=J=function(we){return we===q||we===Ve?new Ne(we):Q(we)},!_&&c(j)&&le!==Object.prototype)){He=le.then,de||(R(le,"then",function(Ae,Fe){var Ue=this;return new q(function(Ye,Le){He.call(Ue,Ye,Le)}).then(Ae,Fe)},{unsafe:!0}),R(le,"catch",Z.catch,{unsafe:!0}));try{delete le.constructor}catch{}s&&s(le,Z)}u({global:!0,wrap:!0,forced:ye},{Promise:q}),y(q,Be,!1,!0),m(Be),Ve=k(Be),u({target:Be,stat:!0,forced:ye},{reject:function(Ae){var Fe=J(this);return Fe.reject.call(void 0,Ae),Fe.promise}}),u({target:Be,stat:!0,forced:_||ye},{resolve:function(Ae){return F(_&&this===Ve?q:this,Ae)}}),u({target:Be,stat:!0,forced:We},{all:function(Ae){var Fe=this,Ue=J(Fe),Ye=Ue.resolve,Le=Ue.reject,kt=H(function(){var Pt=i(Fe.resolve),Ge=[],Ee=0,Dt=1;d(Ae,function(lt){var ft=Ee++,Jt=!1;Ge.push(void 0),Dt++,Pt.call(Fe,lt).then(function(Xt){Jt||(Jt=!0,Ge[ft]=Xt,--Dt||Ye(Ge))},Le)}),--Dt||Ye(Ge)});return kt.error&&Le(kt.value),Ue.promise},race:function(Ae){var Fe=this,Ue=J(Fe),Ye=Ue.reject,Le=H(function(){var kt=i(Fe.resolve);d(Ae,function(Pt){kt.call(Fe,Pt).then(Ue.resolve,Ye)})});return Le.error&&Ye(Le.value),Ue.promise}})},5397:function(v,x,l){var u=l(3085),_=l(150),N=l(1404),k=l(1138),j=l(5744),R=l(2853),C=l(6782),s=l(6192),y=_("Reflect","construct"),m=s(function(){function o(){}return!(y(function(){},[],o)instanceof o)}),i=!s(function(){y(function(){})}),c=m||i;u({target:"Reflect",stat:!0,forced:c,sham:c},{construct:function(h,b){N(h),k(b);var d=arguments.length<3?h:N(arguments[2]);if(i&&!m)return y(h,b,d);if(h==d){switch(b.length){case 0:return new h;case 1:return new h(b[0]);case 2:return new h(b[0],b[1]);case 3:return new h(b[0],b[1],b[2]);case 4:return new h(b[0],b[1],b[2],b[3])}var D=[null];return D.push.apply(D,b),new(C.apply(h,D))}var E=d.prototype,w=R(j(E)?E:Object.prototype),O=Function.apply.call(h,w,b);return j(O)?O:w}})},1367:function(){},5454:function(v,x,l){"use strict";var u=l(863).charAt,_=l(4845),N=l(3326),k=l(7218),j="String Iterator",R=N.set,C=N.getterFor(j);k(String,"String",function(s){R(this,{type:j,string:_(s),index:0})},function(){var y=C(this),m=y.string,i=y.index,c;return i>=m.length?{value:void 0,done:!0}:(c=u(m,i),y.index+=c.length,{value:c,done:!1})})},957:function(v,x,l){"use strict";var u=l(3085),_=l(4277).trim,N=l(6815);u({target:"String",proto:!0,forced:N("trim")},{trim:function(){return _(this)}})},9781:function(v,x,l){var u=l(1488);u("asyncIterator")},492:function(){},6681:function(v,x,l){var u=l(1488);u("hasInstance")},9594:function(v,x,l){var u=l(1488);u("isConcatSpreadable")},3665:function(v,x,l){var u=l(1488);u("iterator")},6187:function(v,x,l){"use strict";var u=l(3085),_=l(8576),N=l(150),k=l(5546),j=l(69),R=l(3045),C=l(6192),s=l(4500),y=l(4770),m=l(6447),i=l(5744),c=l(3236),o=l(1138),h=l(1795),b=l(101),d=l(77),D=l(4845),E=l(774),w=l(2853),O=l(7653),F=l(2092),B=l(4052),V=l(4750),H=l(5141),Y=l(2760),se=l(6007),ne=l(9482),be=l(8717),K=l(9766),Ce=l(4535),W=l(2759),Be=l(8182),Ie=l(9207),ze=l(1488),te=l(1284),le=l(3326),q=l(454).forEach,Z=K("hidden"),fe="Symbol",G="prototype",X=Be("toPrimitive"),J=le.set,Q=le.getterFor(fe),ve=Object[G],he=_.Symbol,Se=N("JSON","stringify"),xe=H.f,De=Y.f,ae=B.f,ee=se.f,ie=be("symbols"),ce=be("op-symbols"),de=be("string-to-symbol-registry"),me=be("symbol-to-string-registry"),Ne=be("wks"),Ve=_.QObject,He=!Ve||!Ve[G]||!Ve[G].findChild,ye=j&&C(function(){return w(De({},"a",{get:function(){return De(this,"a",{value:7}).a}})).a!=7})?function(we,Ae,Fe){var Ue=xe(ve,Ae);Ue&&delete ve[Ae],De(we,Ae,Fe),Ue&&we!==ve&&De(ve,Ae,Ue)}:De,We=function(we,Ae){var Fe=ie[we]=w(he[G]);return J(Fe,{type:fe,tag:we,description:Ae}),j||(Fe.description=Ae),Fe},Xe=function(Ae,Fe,Ue){Ae===ve&&Xe(ce,Fe,Ue),o(Ae);var Ye=d(Fe);return o(Ue),s(ie,Ye)?(Ue.enumerable?(s(Ae,Z)&&Ae[Z][Ye]&&(Ae[Z][Ye]=!1),Ue=w(Ue,{enumerable:E(0,!1)})):(s(Ae,Z)||De(Ae,Z,E(1,{})),Ae[Z][Ye]=!0),ye(Ae,Ye,Ue)):De(Ae,Ye,Ue)},qe=function(Ae,Fe){o(Ae);var Ue=b(Fe),Ye=O(Ue).concat(vt(Ue));return q(Ye,function(Le){(!j||ut.call(Ue,Le))&&Xe(Ae,Le,Ue[Le])}),Ae},Et=function(Ae,Fe){return Fe===void 0?w(Ae):qe(w(Ae),Fe)},ut=function(Ae){var Fe=d(Ae),Ue=ee.call(this,Fe);return this===ve&&s(ie,Fe)&&!s(ce,Fe)?!1:Ue||!s(this,Fe)||!s(ie,Fe)||s(this,Z)&&this[Z][Fe]?Ue:!0},pt=function(Ae,Fe){var Ue=b(Ae),Ye=d(Fe);if(!(Ue===ve&&s(ie,Ye)&&!s(ce,Ye))){var Le=xe(Ue,Ye);return Le&&s(ie,Ye)&&!(s(Ue,Z)&&Ue[Z][Ye])&&(Le.enumerable=!0),Le}},rt=function(Ae){var Fe=ae(b(Ae)),Ue=[];return q(Fe,function(Ye){!s(ie,Ye)&&!s(Ce,Ye)&&Ue.push(Ye)}),Ue},vt=function(Ae){var Fe=Ae===ve,Ue=ae(Fe?ce:b(Ae)),Ye=[];return q(Ue,function(Le){s(ie,Le)&&(!Fe||s(ve,Le))&&Ye.push(ie[Le])}),Ye};if(R||(he=function(){if(this instanceof he)throw TypeError("Symbol is not a constructor");var Ae=!arguments.length||arguments[0]===void 0?void 0:D(arguments[0]),Fe=W(Ae),Ue=function(Ye){this===ve&&Ue.call(ce,Ye),s(this,Z)&&s(this[Z],Fe)&&(this[Z][Fe]=!1),ye(this,Fe,E(1,Ye))};return j&&He&&ye(ve,Fe,{configurable:!0,set:Ue}),We(Fe,Ae)},ne(he[G],"toString",function(){return Q(this).tag}),ne(he,"withoutSetter",function(we){return We(W(we),we)}),se.f=ut,Y.f=Xe,H.f=pt,F.f=B.f=rt,V.f=vt,Ie.f=function(we){return We(Be(we),we)},j&&(De(he[G],"description",{configurable:!0,get:function(){return Q(this).description}}),k||ne(ve,"propertyIsEnumerable",ut,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!R,sham:!R},{Symbol:he}),q(O(Ne),function(we){ze(we)}),u({target:fe,stat:!0,forced:!R},{for:function(we){var Ae=D(we);if(s(de,Ae))return de[Ae];var Fe=he(Ae);return de[Ae]=Fe,me[Fe]=Ae,Fe},keyFor:function(Ae){if(!c(Ae))throw TypeError(Ae+" is not a symbol");if(s(me,Ae))return me[Ae]},useSetter:function(){He=!0},useSimple:function(){He=!1}}),u({target:"Object",stat:!0,forced:!R,sham:!j},{create:Et,defineProperty:Xe,defineProperties:qe,getOwnPropertyDescriptor:pt}),u({target:"Object",stat:!0,forced:!R},{getOwnPropertyNames:rt,getOwnPropertySymbols:vt}),u({target:"Object",stat:!0,forced:C(function(){V.f(1)})},{getOwnPropertySymbols:function(Ae){return V.f(h(Ae))}}),Se){var Nt=!R||C(function(){var we=he();return Se([we])!="[null]"||Se({a:we})!="{}"||Se(Object(we))!="{}"});u({target:"JSON",stat:!0,forced:Nt},{stringify:function(Ae,Fe,Ue){for(var Ye=[Ae],Le=1,kt;arguments.length>Le;)Ye.push(arguments[Le++]);if(kt=Fe,!(!i(Fe)&&Ae===void 0||c(Ae)))return y(Fe)||(Fe=function(Pt,Ge){if(m(kt)&&(Ge=kt.call(this,Pt,Ge)),!c(Ge))return Ge}),Ye[1]=Fe,Se.apply(null,Ye)}})}if(!he[G][X]){var Ut=he[G].valueOf;ne(he[G],X,function(){return Ut.apply(this,arguments)})}te(he,fe),Ce[Z]=!0},1250:function(v,x,l){var u=l(1488);u("matchAll")},9017:function(v,x,l){var u=l(1488);u("match")},9786:function(v,x,l){var u=l(1488);u("replace")},503:function(v,x,l){var u=l(1488);u("search")},6565:function(v,x,l){var u=l(1488);u("species")},9322:function(v,x,l){var u=l(1488);u("split")},3610:function(v,x,l){var u=l(1488);u("toPrimitive")},6886:function(v,x,l){var u=l(1488);u("toStringTag")},3514:function(v,x,l){var u=l(1488);u("unscopables")},177:function(v,x,l){var u=l(1488);u("asyncDispose")},9031:function(v,x,l){var u=l(1488);u("dispose")},6658:function(v,x,l){var u=l(1488);u("matcher")},1875:function(v,x,l){var u=l(1488);u("metadata")},8658:function(v,x,l){var u=l(1488);u("observable")},4592:function(v,x,l){var u=l(1488);u("patternMatch")},6680:function(v,x,l){var u=l(1488);u("replaceAll")},162:function(v,x,l){l(8939);var u=l(7365),_=l(8576),N=l(4696),k=l(8711),j=l(7771),R=l(8182),C=R("toStringTag");for(var s in u){var y=_[s],m=y&&y.prototype;m&&N(m)!==C&&k(m,C,s),j[s]=j.Array}},2906:function(v,x,l){var u=l(3085),_=l(8576),N=l(6447),k=l(8989),j=[].slice,R=/MSIE .\./.test(k),C=function(s){return function(y,m){var i=arguments.length>2,c=i?j.call(arguments,2):void 0;return s(i?function(){(N(y)?y:Function(y)).apply(this,c)}:y,m)}};u({global:!0,bind:!0,forced:R},{setTimeout:C(_.setTimeout),setInterval:C(_.setInterval)})},9336:function(v,x,l){"use strict";l(8939);var u=l(3085),_=l(150),N=l(4551),k=l(9482),j=l(533),R=l(1284),C=l(5148),s=l(3326),y=l(6961),m=l(6447),i=l(4500),c=l(8043),o=l(4696),h=l(1138),b=l(5744),d=l(4845),D=l(2853),E=l(774),w=l(1669),O=l(8703),F=l(8182),B=_("fetch"),V=_("Request"),H=V&&V.prototype,Y=_("Headers"),se=F("iterator"),ne="URLSearchParams",be=ne+"Iterator",K=s.set,Ce=s.getterFor(ne),W=s.getterFor(be),Be=/\+/g,Ie=Array(4),ze=function(ae){return Ie[ae-1]||(Ie[ae-1]=RegExp("((?:%[\\da-f]{2}){"+ae+"})","gi"))},te=function(ae){try{return decodeURIComponent(ae)}catch{return ae}},le=function(ae){var ee=ae.replace(Be," "),ie=4;try{return decodeURIComponent(ee)}catch{for(;ie;)ee=ee.replace(ze(ie--),te);return ee}},q=/[!'()~]|%20/g,Z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},fe=function(ae){return Z[ae]},G=function(ae){return encodeURIComponent(ae).replace(q,fe)},X=function(ae,ee){if(ee)for(var ie=ee.split("&"),ce=0,de,me;ce<ie.length;)de=ie[ce++],de.length&&(me=de.split("="),ae.push({key:le(me.shift()),value:le(me.join("="))}))},J=function(ae){this.entries.length=0,X(this.entries,ae)},Q=function(ae,ee){if(ae<ee)throw TypeError("Not enough arguments")},ve=C(function(ee,ie){K(this,{type:be,iterator:w(Ce(ee).entries),kind:ie})},"Iterator",function(){var ee=W(this),ie=ee.kind,ce=ee.iterator.next(),de=ce.value;return ce.done||(ce.value=ie==="keys"?de.key:ie==="values"?de.value:[de.key,de.value]),ce}),he=function(){y(this,he,ne);var ee=arguments.length>0?arguments[0]:void 0,ie=this,ce=[],de,me,Ne,Ve,He,ye,We,Xe,qe;if(K(ie,{type:ne,entries:ce,updateURL:function(){},updateSearchParams:J}),ee!==void 0)if(b(ee))if(de=O(ee),de)for(me=w(ee,de),Ne=me.next;!(Ve=Ne.call(me)).done;){if(He=w(h(Ve.value)),ye=He.next,(We=ye.call(He)).done||(Xe=ye.call(He)).done||!ye.call(He).done)throw TypeError("Expected sequence with length 2");ce.push({key:d(We.value),value:d(Xe.value)})}else for(qe in ee)i(ee,qe)&&ce.push({key:qe,value:d(ee[qe])});else X(ce,typeof ee=="string"?ee.charAt(0)==="?"?ee.slice(1):ee:d(ee))},Se=he.prototype;if(j(Se,{append:function(ee,ie){Q(arguments.length,2);var ce=Ce(this);ce.entries.push({key:d(ee),value:d(ie)}),ce.updateURL()},delete:function(ae){Q(arguments.length,1);for(var ee=Ce(this),ie=ee.entries,ce=d(ae),de=0;de<ie.length;)ie[de].key===ce?ie.splice(de,1):de++;ee.updateURL()},get:function(ee){Q(arguments.length,1);for(var ie=Ce(this).entries,ce=d(ee),de=0;de<ie.length;de++)if(ie[de].key===ce)return ie[de].value;return null},getAll:function(ee){Q(arguments.length,1);for(var ie=Ce(this).entries,ce=d(ee),de=[],me=0;me<ie.length;me++)ie[me].key===ce&&de.push(ie[me].value);return de},has:function(ee){Q(arguments.length,1);for(var ie=Ce(this).entries,ce=d(ee),de=0;de<ie.length;)if(ie[de++].key===ce)return!0;return!1},set:function(ee,ie){Q(arguments.length,1);for(var ce=Ce(this),de=ce.entries,me=!1,Ne=d(ee),Ve=d(ie),He=0,ye;He<de.length;He++)ye=de[He],ye.key===Ne&&(me?de.splice(He--,1):(me=!0,ye.value=Ve));me||de.push({key:Ne,value:Ve}),ce.updateURL()},sort:function(){var ee=Ce(this),ie=ee.entries,ce=ie.slice(),de,me,Ne;for(ie.length=0,Ne=0;Ne<ce.length;Ne++){for(de=ce[Ne],me=0;me<Ne;me++)if(ie[me].key>de.key){ie.splice(me,0,de);break}me===Ne&&ie.push(de)}ee.updateURL()},forEach:function(ee){for(var ie=Ce(this).entries,ce=c(ee,arguments.length>1?arguments[1]:void 0,3),de=0,me;de<ie.length;)me=ie[de++],ce(me.value,me.key,this)},keys:function(){return new ve(this,"keys")},values:function(){return new ve(this,"values")},entries:function(){return new ve(this,"entries")}},{enumerable:!0}),k(Se,se,Se.entries,{name:"entries"}),k(Se,"toString",function(){for(var ee=Ce(this).entries,ie=[],ce=0,de;ce<ee.length;)de=ee[ce++],ie.push(G(de.key)+"="+G(de.value));return ie.join("&")},{enumerable:!0}),R(he,ne),u({global:!0,forced:!N},{URLSearchParams:he}),!N&&m(Y)){var xe=function(ae){if(b(ae)){var ee=ae.body,ie;if(o(ee)===ne)return ie=ae.headers?new Y(ae.headers):new Y,ie.has("content-type")||ie.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),D(ae,{body:E(0,String(ee)),headers:E(0,ie)})}return ae};if(m(B)&&u({global:!0,enumerable:!0,forced:!0},{fetch:function(ee){return B(ee,arguments.length>1?xe(arguments[1]):{})}}),m(V)){var De=function(ee){return y(this,De,"Request"),new V(ee,arguments.length>1?xe(arguments[1]):{})};H.constructor=De,De.prototype=H,u({global:!0,forced:!0},{Request:De})}}v.exports={URLSearchParams:he,getState:Ce}},4948:function(v,x,l){"use strict";l(5454);var u=l(3085),_=l(69),N=l(4551),k=l(8576),j=l(1187),R=l(9482),C=l(6961),s=l(4500),y=l(2503),m=l(841),i=l(863).codeAt,c=l(7977),o=l(4845),h=l(1284),b=l(9336),d=l(3326),D=k.URL,E=b.URLSearchParams,w=b.getState,O=d.set,F=d.getterFor("URL"),B=Math.floor,V=Math.pow,H="Invalid authority",Y="Invalid scheme",se="Invalid host",ne="Invalid port",be=/[A-Za-z]/,K=/[\d+-.A-Za-z]/,Ce=/\d/,W=/^0x/i,Be=/^[0-7]+$/,Ie=/^\d+$/,ze=/^[\dA-Fa-f]+$/,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,le=/[\0\t\n\r #/:<>?@[\\\]^|]/,q=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Z=/[\t\n\r]/g,fe,G=function($,Te){var Me,Pe,je;if(Te.charAt(0)=="["){if(Te.charAt(Te.length-1)!="]"||(Me=J(Te.slice(1,-1)),!Me))return se;$.host=Me}else if(ie($)){if(Te=c(Te),te.test(Te)||(Me=X(Te),Me===null))return se;$.host=Me}else{if(le.test(Te))return se;for(Me="",Pe=m(Te),je=0;je<Pe.length;je++)Me+=ae(Pe[je],he);$.host=Me}},X=function($){var Te=$.split("."),Me,Pe,je,it,Ze,et,_t;if(Te.length&&Te[Te.length-1]==""&&Te.pop(),Me=Te.length,Me>4)return $;for(Pe=[],je=0;je<Me;je++){if(it=Te[je],it=="")return $;if(Ze=10,it.length>1&&it.charAt(0)=="0"&&(Ze=W.test(it)?16:8,it=it.slice(Ze==8?1:2)),it==="")et=0;else{if(!(Ze==10?Ie:Ze==8?Be:ze).test(it))return $;et=parseInt(it,Ze)}Pe.push(et)}for(je=0;je<Me;je++)if(et=Pe[je],je==Me-1){if(et>=V(256,5-Me))return null}else if(et>255)return null;for(_t=Pe.pop(),je=0;je<Pe.length;je++)_t+=Pe[je]*V(256,3-je);return _t},J=function($){var Te=[0,0,0,0,0,0,0,0],Me=0,Pe=null,je=0,it,Ze,et,_t,Bt,Qt,ke,zt=function(){return $.charAt(je)};if(zt()==":"){if($.charAt(1)!=":")return;je+=2,Me++,Pe=Me}for(;zt();){if(Me==8)return;if(zt()==":"){if(Pe!==null)return;je++,Me++,Pe=Me;continue}for(it=Ze=0;Ze<4&&ze.test(zt());)it=it*16+parseInt(zt(),16),je++,Ze++;if(zt()=="."){if(Ze==0||(je-=Ze,Me>6))return;for(et=0;zt();){if(_t=null,et>0)if(zt()=="."&&et<4)je++;else return;if(!Ce.test(zt()))return;for(;Ce.test(zt());){if(Bt=parseInt(zt(),10),_t===null)_t=Bt;else{if(_t==0)return;_t=_t*10+Bt}if(_t>255)return;je++}Te[Me]=Te[Me]*256+_t,et++,(et==2||et==4)&&Me++}if(et!=4)return;break}else if(zt()==":"){if(je++,!zt())return}else if(zt())return;Te[Me++]=it}if(Pe!==null)for(Qt=Me-Pe,Me=7;Me!=0&&Qt>0;)ke=Te[Me],Te[Me--]=Te[Pe+Qt-1],Te[Pe+--Qt]=ke;else if(Me!=8)return;return Te},Q=function($){for(var Te=null,Me=1,Pe=null,je=0,it=0;it<8;it++)$[it]!==0?(je>Me&&(Te=Pe,Me=je),Pe=null,je=0):(Pe===null&&(Pe=it),++je);return je>Me&&(Te=Pe,Me=je),Te},ve=function($){var Te,Me,Pe,je;if(typeof $=="number"){for(Te=[],Me=0;Me<4;Me++)Te.unshift($%256),$=B($/256);return Te.join(".")}else if(typeof $=="object"){for(Te="",Pe=Q($),Me=0;Me<8;Me++)je&&$[Me]===0||(je&&(je=!1),Pe===Me?(Te+=Me?":":"::",je=!0):(Te+=$[Me].toString(16),Me<7&&(Te+=":")));return"["+Te+"]"}return $},he={},Se=y({},he,{" ":1,'"':1,"<":1,">":1,"`":1}),xe=y({},Se,{"#":1,"?":1,"{":1,"}":1}),De=y({},xe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ae=function($,Te){var Me=i($,0);return Me>32&&Me<127&&!s(Te,$)?$:encodeURIComponent($)},ee={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ie=function($){return s(ee,$.scheme)},ce=function($){return $.username!=""||$.password!=""},de=function($){return!$.host||$.cannotBeABaseURL||$.scheme=="file"},me=function($,Te){var Me;return $.length==2&&be.test($.charAt(0))&&((Me=$.charAt(1))==":"||!Te&&Me=="|")},Ne=function($){var Te;return $.length>1&&me($.slice(0,2))&&($.length==2||(Te=$.charAt(2))==="/"||Te==="\\"||Te==="?"||Te==="#")},Ve=function($){var Te=$.path,Me=Te.length;Me&&($.scheme!="file"||Me!=1||!me(Te[0],!0))&&Te.pop()},He=function($){return $==="."||$.toLowerCase()==="%2e"},ye=function($){return $=$.toLowerCase(),$===".."||$==="%2e."||$===".%2e"||$==="%2e%2e"},We={},Xe={},qe={},Et={},ut={},pt={},rt={},vt={},Nt={},Ut={},we={},Ae={},Fe={},Ue={},Ye={},Le={},kt={},Pt={},Ge={},Ee={},Dt={},lt=function($,Te,Me,Pe){var je=Me||We,it=0,Ze="",et=!1,_t=!1,Bt=!1,Qt,ke,zt,en;for(Me||($.scheme="",$.username="",$.password="",$.host=null,$.port=null,$.path=[],$.query=null,$.fragment=null,$.cannotBeABaseURL=!1,Te=Te.replace(q,"")),Te=Te.replace(Z,""),Qt=m(Te);it<=Qt.length;){switch(ke=Qt[it],je){case We:if(ke&&be.test(ke))Ze+=ke.toLowerCase(),je=Xe;else{if(Me)return Y;je=qe;continue}break;case Xe:if(ke&&(K.test(ke)||ke=="+"||ke=="-"||ke=="."))Ze+=ke.toLowerCase();else if(ke==":"){if(Me&&(ie($)!=s(ee,Ze)||Ze=="file"&&(ce($)||$.port!==null)||$.scheme=="file"&&!$.host))return;if($.scheme=Ze,Me){ie($)&&ee[$.scheme]==$.port&&($.port=null);return}Ze="",$.scheme=="file"?je=Ue:ie($)&&Pe&&Pe.scheme==$.scheme?je=Et:ie($)?je=vt:Qt[it+1]=="/"?(je=ut,it++):($.cannotBeABaseURL=!0,$.path.push(""),je=Ge)}else{if(Me)return Y;Ze="",je=qe,it=0;continue}break;case qe:if(!Pe||Pe.cannotBeABaseURL&&ke!="#")return Y;if(Pe.cannotBeABaseURL&&ke=="#"){$.scheme=Pe.scheme,$.path=Pe.path.slice(),$.query=Pe.query,$.fragment="",$.cannotBeABaseURL=!0,je=Dt;break}je=Pe.scheme=="file"?Ue:pt;continue;case Et:if(ke=="/"&&Qt[it+1]=="/")je=Nt,it++;else{je=pt;continue}break;case ut:if(ke=="/"){je=Ut;break}else{je=Pt;continue}case pt:if($.scheme=Pe.scheme,ke==fe)$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,$.path=Pe.path.slice(),$.query=Pe.query;else if(ke=="/"||ke=="\\"&&ie($))je=rt;else if(ke=="?")$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,$.path=Pe.path.slice(),$.query="",je=Ee;else if(ke=="#")$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,$.path=Pe.path.slice(),$.query=Pe.query,$.fragment="",je=Dt;else{$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,$.path=Pe.path.slice(),$.path.pop(),je=Pt;continue}break;case rt:if(ie($)&&(ke=="/"||ke=="\\"))je=Nt;else if(ke=="/")je=Ut;else{$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,je=Pt;continue}break;case vt:if(je=Nt,ke!="/"||Ze.charAt(it+1)!="/")continue;it++;break;case Nt:if(ke!="/"&&ke!="\\"){je=Ut;continue}break;case Ut:if(ke=="@"){et&&(Ze="%40"+Ze),et=!0,zt=m(Ze);for(var vr=0;vr<zt.length;vr++){var io=zt[vr];if(io==":"&&!Bt){Bt=!0;continue}var ro=ae(io,De);Bt?$.password+=ro:$.username+=ro}Ze=""}else if(ke==fe||ke=="/"||ke=="?"||ke=="#"||ke=="\\"&&ie($)){if(et&&Ze=="")return H;it-=m(Ze).length+1,Ze="",je=we}else Ze+=ke;break;case we:case Ae:if(Me&&$.scheme=="file"){je=Le;continue}else if(ke==":"&&!_t){if(Ze=="")return se;if(en=G($,Ze),en)return en;if(Ze="",je=Fe,Me==Ae)return}else if(ke==fe||ke=="/"||ke=="?"||ke=="#"||ke=="\\"&&ie($)){if(ie($)&&Ze=="")return se;if(Me&&Ze==""&&(ce($)||$.port!==null))return;if(en=G($,Ze),en)return en;if(Ze="",je=kt,Me)return;continue}else ke=="["?_t=!0:ke=="]"&&(_t=!1),Ze+=ke;break;case Fe:if(Ce.test(ke))Ze+=ke;else if(ke==fe||ke=="/"||ke=="?"||ke=="#"||ke=="\\"&&ie($)||Me){if(Ze!=""){var mr=parseInt(Ze,10);if(mr>65535)return ne;$.port=ie($)&&mr===ee[$.scheme]?null:mr,Ze=""}if(Me)return;je=kt;continue}else return ne;break;case Ue:if($.scheme="file",ke=="/"||ke=="\\")je=Ye;else if(Pe&&Pe.scheme=="file")if(ke==fe)$.host=Pe.host,$.path=Pe.path.slice(),$.query=Pe.query;else if(ke=="?")$.host=Pe.host,$.path=Pe.path.slice(),$.query="",je=Ee;else if(ke=="#")$.host=Pe.host,$.path=Pe.path.slice(),$.query=Pe.query,$.fragment="",je=Dt;else{Ne(Qt.slice(it).join(""))||($.host=Pe.host,$.path=Pe.path.slice(),Ve($)),je=Pt;continue}else{je=Pt;continue}break;case Ye:if(ke=="/"||ke=="\\"){je=Le;break}Pe&&Pe.scheme=="file"&&!Ne(Qt.slice(it).join(""))&&(me(Pe.path[0],!0)?$.path.push(Pe.path[0]):$.host=Pe.host),je=Pt;continue;case Le:if(ke==fe||ke=="/"||ke=="\\"||ke=="?"||ke=="#"){if(!Me&&me(Ze))je=Pt;else if(Ze==""){if($.host="",Me)return;je=kt}else{if(en=G($,Ze),en)return en;if($.host=="localhost"&&($.host=""),Me)return;Ze="",je=kt}continue}else Ze+=ke;break;case kt:if(ie($)){if(je=Pt,ke!="/"&&ke!="\\")continue}else if(!Me&&ke=="?")$.query="",je=Ee;else if(!Me&&ke=="#")$.fragment="",je=Dt;else if(ke!=fe&&(je=Pt,ke!="/"))continue;break;case Pt:if(ke==fe||ke=="/"||ke=="\\"&&ie($)||!Me&&(ke=="?"||ke=="#")){if(ye(Ze)?(Ve($),ke!="/"&&!(ke=="\\"&&ie($))&&$.path.push("")):He(Ze)?ke!="/"&&!(ke=="\\"&&ie($))&&$.path.push(""):($.scheme=="file"&&!$.path.length&&me(Ze)&&($.host&&($.host=""),Ze=Ze.charAt(0)+":"),$.path.push(Ze)),Ze="",$.scheme=="file"&&(ke==fe||ke=="?"||ke=="#"))for(;$.path.length>1&&$.path[0]==="";)$.path.shift();ke=="?"?($.query="",je=Ee):ke=="#"&&($.fragment="",je=Dt)}else Ze+=ae(ke,xe);break;case Ge:ke=="?"?($.query="",je=Ee):ke=="#"?($.fragment="",je=Dt):ke!=fe&&($.path[0]+=ae(ke,he));break;case Ee:!Me&&ke=="#"?($.fragment="",je=Dt):ke!=fe&&(ke=="'"&&ie($)?$.query+="%27":ke=="#"?$.query+="%23":$.query+=ae(ke,he));break;case Dt:ke!=fe&&($.fragment+=ae(ke,Se));break}it++}},ft=function(Te){var Me=C(this,ft,"URL"),Pe=arguments.length>1?arguments[1]:void 0,je=o(Te),it=O(Me,{type:"URL"}),Ze,et;if(Pe!==void 0){if(Pe instanceof ft)Ze=F(Pe);else if(et=lt(Ze={},o(Pe)),et)throw TypeError(et)}if(et=lt(it,je,null,Ze),et)throw TypeError(et);var _t=it.searchParams=new E,Bt=w(_t);Bt.updateSearchParams(it.query),Bt.updateURL=function(){it.query=String(_t)||null},_||(Me.href=Xt.call(Me),Me.origin=Tt.call(Me),Me.protocol=vn.call(Me),Me.username=mt.call(Me),Me.password=Kr.call(Me),Me.host=qr.call(Me),Me.hostname=eo.call(Me),Me.port=gr.call(Me),Me.pathname=to.call(Me),Me.search=wn.call(Me),Me.searchParams=hi.call(Me),Me.hash=Hn.call(Me))},Jt=ft.prototype,Xt=function(){var $=F(this),Te=$.scheme,Me=$.username,Pe=$.password,je=$.host,it=$.port,Ze=$.path,et=$.query,_t=$.fragment,Bt=Te+":";return je!==null?(Bt+="//",ce($)&&(Bt+=Me+(Pe?":"+Pe:"")+"@"),Bt+=ve(je),it!==null&&(Bt+=":"+it)):Te=="file"&&(Bt+="//"),Bt+=$.cannotBeABaseURL?Ze[0]:Ze.length?"/"+Ze.join("/"):"",et!==null&&(Bt+="?"+et),_t!==null&&(Bt+="#"+_t),Bt},Tt=function(){var $=F(this),Te=$.scheme,Me=$.port;if(Te=="blob")try{return new ft(Te.path[0]).origin}catch{return"null"}return Te=="file"||!ie($)?"null":Te+"://"+ve($.host)+(Me!==null?":"+Me:"")},vn=function(){return F(this).scheme+":"},mt=function(){return F(this).username},Kr=function(){return F(this).password},qr=function(){var $=F(this),Te=$.host,Me=$.port;return Te===null?"":Me===null?ve(Te):ve(Te)+":"+Me},eo=function(){var $=F(this).host;return $===null?"":ve($)},gr=function(){var $=F(this).port;return $===null?"":String($)},to=function(){var $=F(this),Te=$.path;return $.cannotBeABaseURL?Te[0]:Te.length?"/"+Te.join("/"):""},wn=function(){var $=F(this).query;return $?"?"+$:""},hi=function(){return F(this).searchParams},Hn=function(){var $=F(this).fragment;return $?"#"+$:""},qt=function($,Te){return{get:$,set:Te,configurable:!0,enumerable:!0}};if(_&&j(Jt,{href:qt(Xt,function($){var Te=F(this),Me=o($),Pe=lt(Te,Me);if(Pe)throw TypeError(Pe);w(Te.searchParams).updateSearchParams(Te.query)}),origin:qt(Tt),protocol:qt(vn,function($){var Te=F(this);lt(Te,o($)+":",We)}),username:qt(mt,function($){var Te=F(this),Me=m(o($));if(!de(Te)){Te.username="";for(var Pe=0;Pe<Me.length;Pe++)Te.username+=ae(Me[Pe],De)}}),password:qt(Kr,function($){var Te=F(this),Me=m(o($));if(!de(Te)){Te.password="";for(var Pe=0;Pe<Me.length;Pe++)Te.password+=ae(Me[Pe],De)}}),host:qt(qr,function($){var Te=F(this);Te.cannotBeABaseURL||lt(Te,o($),we)}),hostname:qt(eo,function($){var Te=F(this);Te.cannotBeABaseURL||lt(Te,o($),Ae)}),port:qt(gr,function($){var Te=F(this);de(Te)||($=o($),$==""?Te.port=null:lt(Te,$,Fe))}),pathname:qt(to,function($){var Te=F(this);Te.cannotBeABaseURL||(Te.path=[],lt(Te,o($),kt))}),search:qt(wn,function($){var Te=F(this);$=o($),$==""?Te.query=null:($.charAt(0)=="?"&&($=$.slice(1)),Te.query="",lt(Te,$,Ee)),w(Te.searchParams).updateSearchParams(Te.query)}),searchParams:qt(hi),hash:qt(Hn,function($){var Te=F(this);if($=o($),$==""){Te.fragment=null;return}$.charAt(0)=="#"&&($=$.slice(1)),Te.fragment="",lt(Te,$,Dt)})}),R(Jt,"toJSON",function(){return Xt.call(this)},{enumerable:!0}),R(Jt,"toString",function(){return Xt.call(this)},{enumerable:!0}),D){var pr=D.createObjectURL,no=D.revokeObjectURL;pr&&R(ft,"createObjectURL",function(Te){return pr.apply(D,arguments)}),no&&R(ft,"revokeObjectURL",function(Te){return no.apply(D,arguments)})}h(ft,"URL"),u({global:!0,forced:!N,sham:!_},{URL:ft})},9801:function(){},3822:function(v,x,l){var u=l(2221);v.exports=u},1434:function(v,x,l){var u=l(5078);v.exports=u},6899:function(v,x,l){var u=l(98);v.exports=u},7710:function(v,x,l){var u=l(5739);l(162),v.exports=u},4486:function(v,x,l){var u=l(278);v.exports=u},4877:function(v,x,l){var u=l(1484);v.exports=u},7178:function(v,x,l){var u=l(7731);v.exports=u},5603:function(v,x,l){var u=l(3669);v.exports=u},1206:function(v,x,l){l(162);var u=l(6899),_=l(4696),N=Array.prototype,k={DOMTokenList:!0,NodeList:!0};v.exports=function(j){var R=j.forEach;return j===N||j instanceof Array&&R===N.forEach||k.hasOwnProperty(_(j))?u:R}},6174:function(v,x,l){var u=l(2604);v.exports=u},57:function(v,x,l){var u=l(263);v.exports=u},4741:function(v,x,l){var u=l(7663);v.exports=u},8368:function(v,x,l){var u=l(5063);v.exports=u},3739:function(v,x,l){var u=l(6813);v.exports=u},172:function(v,x,l){var u=l(6285);v.exports=u},4963:function(v,x,l){var u=l(3213);v.exports=u},7820:function(v,x,l){var u=l(3512);v.exports=u},8980:function(v,x,l){var u=l(8168);v.exports=u},5636:function(v,x,l){var u=l(8651);v.exports=u},6672:function(v,x,l){var u=l(3083);v.exports=u},5059:function(v,x,l){var u=l(2987);v.exports=u},3969:function(v,x,l){var u=l(2239);v.exports=u},6618:function(v,x,l){var u=l(3154);l(162),v.exports=u},5279:function(v,x,l){var u=l(6577);v.exports=u},9562:function(v,x,l){l(2906);var u=l(7545);v.exports=u.setTimeout},2285:function(v,x,l){var u=l(5008);l(162),v.exports=u},8535:function(v,x,l){var u=l(994);l(162),v.exports=u},652:function(v,x,l){var u=l(5668);v.exports=u},5668:function(v,x,l){l(4948),l(9801),l(9336);var u=l(7545);v.exports=u.URL},2534:function(v){"use strict";v.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(v){"use strict";v.exports=e},4960:function(){},6759:function(){},6272:function(){}},n={};function f(v){var x=n[v];if(x!==void 0)return x.exports;var l=n[v]={exports:{}};return t[v](l,l.exports,f),l.exports}(function(){f.n=function(v){var x=v&&v.__esModule?function(){return v.default}:function(){return v};return f.d(x,{a:x}),x}})(),function(){f.d=function(v,x){for(var l in x)f.o(x,l)&&!f.o(v,l)&&Object.defineProperty(v,l,{enumerable:!0,get:x[l]})}}(),function(){f.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){f.o=function(v,x){return Object.prototype.hasOwnProperty.call(v,x)}}();var S={};return function(){"use strict";f.d(S,{default:function(){return FI}});var v=f(9131),x=f.n(v),l=f(1899),u=f.n(l),_=f(6562),N=f.n(_),k=f(1734),j=f.n(k),R=f(8005),C=f.n(R),s=f(6065),y=f.n(s),m=f(4496),i=f.n(m);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(A){var I=this;do{if(Element.prototype.matches.call(I,A))return I;I=I.parentElement||I.parentNode}while(I!==null&&I.nodeType===1);return null});"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(A){"use strict";if("Element"in A){var I="classList",a="prototype",g=A.Element[a],r=Object,p=x()(String[a])||function(){return this.replace(/^\s+|\s+$/g,"")},M=u()(Array[a])||function(oe){for(var pe=0,ue=this.length;pe<ue;pe++)if(pe in this&&this[pe]===oe)return pe;return-1},T=function(pe,ue){this.name=pe,this.code=DOMException[pe],this.message=ue},L=function(pe,ue){if(ue==="")throw new T("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(ue))throw new T("INVALID_CHARACTER_ERR","The token must not contain space characters.");return M.call(pe,ue)},P=function(pe){for(var ue=p.call(pe.getAttribute("class")||""),ge=ue?ue.split(/\s+/):[],Oe=0,Je=ge.length;Oe<Je;Oe++)this.push(ge[Oe]);this._updateClassName=function(){pe.setAttribute("class",this.toString())}},z=P[a]=[],U=function(){return new P(this)};if(T[a]=Error[a],z.item=function(oe){return this[oe]||null},z.contains=function(oe){return~L(this,oe+"")},z.add=function(){var oe=arguments,pe=0,ue=oe.length,ge,Oe=!1;do ge=oe[pe]+"",~L(this,ge)||(this.push(ge),Oe=!0);while(++pe<ue);Oe&&this._updateClassName()},z.remove=function(){var oe=arguments,pe=0,ue=oe.length,ge,Oe=!1,Je;do for(ge=oe[pe]+"",Je=L(this,ge);~Je;){var Qe;N()(Qe=this).call(Qe,Je,1),Oe=!0,Je=L(this,ge)}while(++pe<ue);Oe&&this._updateClassName()},z.toggle=function(oe,pe){var ue=this.contains(oe),ge=ue?pe!==!0&&"remove":pe!==!1&&"add";return ge&&this[ge](oe),pe===!0||pe===!1?pe:!ue},z.replace=function(oe,pe){var ue=L(oe+"");if(~ue){var ge;N()(ge=this).call(ge,ue,1,pe),this._updateClassName()}},z.toString=function(){return this.join(" ")},j()){var re={get:U,enumerable:!0,configurable:!0};try{j()(g,I,re)}catch(oe){(oe.number===void 0||oe.number===-2146823252)&&(re.enumerable=!1,j()(g,I,re))}}else r[a].__defineGetter__&&g.__defineGetter__(I,U)}}(self),function(){"use strict";var A=document.createElement("_");if(A.classList.add("c1","c2"),!A.classList.contains("c2")){var I=function(r){var p=DOMTokenList.prototype[r];DOMTokenList.prototype[r]=function(M){var T,L=arguments.length;for(T=0;T<L;T++)M=arguments[T],p.call(this,M)}};I("add"),I("remove")}if(A.classList.toggle("c3",!1),A.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(g,r){return 1 in arguments&&!this.contains(g)==!r?r:a.call(this,g)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(g,r){var p=this.toString().split(" "),M=u()(p).call(p,g+"");~M&&(p=C()(p).call(p,M),this.remove.apply(this,p),this.add(r),this.add.apply(this,C()(p).call(p,1)))}),A=null}());(function(){"use strict";if(typeof window<"u"&&window.addEventListener){var A=y()(null),I,a,g=function(){clearTimeout(a),a=i()(I,100)},r=function(){},p=function(){var z;window.addEventListener("resize",g,!1),window.addEventListener("orientationchange",g,!1),window.MutationObserver?(z=new MutationObserver(g),z.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),r=function(){try{z.disconnect(),window.removeEventListener("resize",g,!1),window.removeEventListener("orientationchange",g,!1)}catch{}}):(document.documentElement.addEventListener("DOMSubtreeModified",g,!1),r=function(){document.documentElement.removeEventListener("DOMSubtreeModified",g,!1),window.removeEventListener("resize",g,!1),window.removeEventListener("orientationchange",g,!1)})},M=function(z){function U(ue){var ge;return ue.protocol!==void 0?ge=ue:(ge=document.createElement("a"),ge.href=ue),ge.protocol.replace(/:/g,"")+ge.host}var re,oe,pe;return window.XMLHttpRequest&&(re=new XMLHttpRequest,oe=U(location),pe=U(z),re.withCredentials===void 0&&pe!==""&&pe!==oe?re=XDomainRequest||void 0:re=XMLHttpRequest),re},T="http://www.w3.org/1999/xlink";I=function(){var z,U,re="",oe,pe,ue,ge=0,Oe,Je,Qe,Ke,Re;function dt(){ge-=1,ge===0&&(r(),p())}function Gt(Lt){return function(){A[Lt.base]!==!0&&(Lt.useEl.setAttributeNS(T,"xlink:href","#"+Lt.hash),Lt.useEl.hasAttribute("href")&&Lt.useEl.setAttribute("href","#"+Lt.hash))}}function on(Lt){return function(){var ri=document.body,oi=document.createElement("x"),tn;Lt.onload=null,oi.innerHTML=Lt.responseText,tn=oi.getElementsByTagName("svg")[0],tn&&(tn.setAttribute("aria-hidden","true"),tn.style.position="absolute",tn.style.width=0,tn.style.height=0,tn.style.overflow="hidden",ri.insertBefore(tn,ri.firstChild)),dt()}}function mn(Lt){return function(){Lt.onerror=null,Lt.ontimeout=null,dt()}}for(r(),Ke=document.getElementsByTagName("use"),ue=0;ue<Ke.length;ue+=1){try{U=Ke[ue].getBoundingClientRect()}catch{U=!1}pe=Ke[ue].getAttribute("href")||Ke[ue].getAttributeNS(T,"href")||Ke[ue].getAttribute("xlink:href"),pe&&pe.split?Qe=pe.split("#"):Qe=["",""],z=Qe[0],oe=Qe[1],Oe=U&&U.left===0&&U.right===0&&U.top===0&&U.bottom===0,U&&U.width===0&&U.height===0&&!Oe?(re&&!z.length&&oe&&!document.getElementById(oe)&&(z=re),Ke[ue].hasAttribute("href")&&Ke[ue].setAttributeNS(T,"xlink:href",pe),z.length&&(Re=A[z],Re!==!0&&i()(Gt({useEl:Ke[ue],base:z,hash:oe}),0),Re===void 0&&(Je=M(z),Je!==void 0&&(Re=new Je,A[z]=Re,Re.onload=on(Re),Re.onerror=mn(Re),Re.ontimeout=mn(Re),Re.open("GET",z),Re.send(),ge+=1)))):Oe?z.length&&A[z]&&i()(Gt({useEl:Ke[ue],base:z,hash:oe}),0):A[z]===void 0?A[z]=!0:A[z].onload&&(A[z].abort(),delete A[z].onload,A[z]=!0)}Ke="",ge+=1,dt()};var L;L=function(){window.removeEventListener("load",L,!1),a=i()(I,0)},document.readyState!=="complete"?window.addEventListener("load",L,!1):L()}})();var c=f(1845);function o(A,I){(I==null||I>A.length)&&(I=A.length);for(var a=0,g=new Array(I);a<I;a++)g[a]=A[a];return g}function h(A){if(c(A))return o(A)}var b=f(184),d=f(662),D=f(7172);function E(A){if(typeof b<"u"&&d(A)!=null||A["@@iterator"]!=null)return D(A)}var w=f(711);function O(A,I){var a;if(A){if(typeof A=="string")return o(A,I);var g=w(a=Object.prototype.toString.call(A)).call(a,8,-1);if(g==="Object"&&A.constructor&&(g=A.constructor.name),g==="Map"||g==="Set")return D(A);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return o(A,I)}}function F(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B(A){return h(A)||E(A)||O(A)||F()}var V=f(7077);function H(A,I,a){return I in A?V(A,I,{value:a,enumerable:!0,configurable:!0,writable:!0}):A[I]=a,A}function Y(A,I){if(!(A instanceof I))throw new TypeError("Cannot call a class as a function")}function se(A,I){for(var a=0;a<I.length;a++){var g=I[a];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),V(A,g.key,g)}}function ne(A,I,a){return I&&se(A.prototype,I),a&&se(A,a),A}var be=f(4426),K=f.n(be),Ce=f(9406),W=f.n(Ce),Be=f(8189),Ie=f.n(Be),ze=f(3972),te=f.n(ze),le=f(2777),q=f(961),Z=f.n(q),fe=f(5695),G=f.n(fe),X=f(8592),J=f.n(X),Q=f(9052),ve=f.n(Q),he=f(2560),Se=f.n(he),xe=f(2461),De=f.n(xe);function ae(A){if(c(A))return A}function ee(A,I){var a=A==null?null:typeof b<"u"&&d(A)||A["@@iterator"];if(a!=null){var g=[],r=!0,p=!1,M,T;try{for(a=a.call(A);!(r=(M=a.next()).done)&&(g.push(M.value),!(I&&g.length===I));r=!0);}catch(L){p=!0,T=L}finally{try{!r&&a.return!=null&&a.return()}finally{if(p)throw T}}return g}}function ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(A,I){return ae(A)||ee(A,I)||O(A,I)||ie()}var de=f(6397),me=f.n(de),Ne=f(7636),Ve=f.n(Ne),He=f(789),ye=f.n(He),We=f(4729),Xe=f.n(We),qe=f(1610),Et=f.n(qe),ut=f(3053),pt=f.n(ut),rt,vt=["zoomIn","zoomOut","hand"],Nt=["history","undo","redo","reset"],Ut=["delete","deleteAll"],we=W()(rt=[]).call(rt,vt,Nt,Ut),Ae={FILTER:"filter",COLOR:"color"},Fe=["rect","circle","triangle"],Ue={CROPZONE:"cropzone"},Ye={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},Le=_t("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),kt={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},Pt={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Ge={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},Ee={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_CREATED:"objectCreated",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur",IMAGE_RESIZED:"imageResized"},Dt={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},lt={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},ft=_t("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Jt={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},Xt={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},Tt={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},vn={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},mt={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidDrawingMode:"This operation is not supported in the drawing mode.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noActiveObject:"There is no active object.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",rotation:"The current angle is same the old angle.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},Kr={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},qr={realTimeEvent:!0,min:-360,max:360,value:0},eo={min:5,max:30,value:12},gr={realTimeEvent:!0,min:2,max:300,value:3},to={realTimeEvent:!0,min:10,max:100,value:50},wn={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},hi={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},Hn={realTimeEvent:!0,min:32,max:4088,value:800},qt=2,pr="tui-image-editor-",no=Math.min,$=Math.max,Te=!1,Me=0;function Pe(A){return A.__fe_id||(Me+=1,A.__fe_id=Me),A.__fe_id}function je(A){return!it(A?.__fe_id)}function it(A){return isUndefined(A)||A===null}function Ze(A){return typeof A=="function"}function et(A,I,a){if(I>a){var g=[a,I];I=g[0],a=g[1]}return $(I,no(A,a))}function _t(){for(var A={},I=arguments.length,a=new Array(I),g=0;g<I;g++)a[g]=arguments[g];return J()(a,function(r){A[r]=r}),A}function Bt(A){var I="";return forEach(A,function(a,g){var r;I+=_concatInstanceProperty(r="".concat(g,": ")).call(r,a,";")}),I}function Qt(A,I){var a={},g=I.length,r=0,p;for(r=0;r<g;r+=1)p=I[r],a[p]=A[p];return a}function ke(A){return me()(A,10)}function zt(A){return A.replace(/-([a-z])/g,function(I,a){return a.toUpperCase()})}function en(){return!!(window.File&&window.FileList&&window.FileReader)}function vr(A,I){var a,g,r;if(A.length===4){var p;A=W()(p="".concat(A)).call(p,C()(A).call(A,1,4))}var M=me()(C()(A).call(A,1,3),16),T=me()(C()(A).call(A,3,5),16),L=me()(C()(A).call(A,5,7),16),P=I||1;return W()(a=W()(g=W()(r="rgba(".concat(M,", ")).call(r,T,", ")).call(g,L,", ")).call(a,P,")")}function io(){Te||(Te=!0,Xe()("image-editor","UA-129999381-1"))}function ro(A,I){var a=document.getElementsByTagName("head"),g=ce(a,1),r=g[0],p=document.createElement("link"),M=encodeURIComponent(A);I&&(p.id=I),p.setAttribute("rel","stylesheet"),p.setAttribute("type","text/css"),p.setAttribute("href","data:text/css;charset=UTF-8,".concat(M)),r.appendChild(p)}function mr(A){return function(I){return A.querySelector(I)}}function pp(A){var I=/data:(image\/.+);base64,/,a="",g,r,p;g=A.replace(I,function(T,L){return a=L,""}),g=atob(g);var M=g.length;for(r=new Uint8Array(M),p=0;p<M;p+=1)r[p]=g.charCodeAt(p);return new Blob([r],{type:a})}function vp(A){return Number(A.toFixed(qt))}function ln(A){J()(A,function(I,a){A[a]=null})}function oo(){var A,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(I.charAt(0)==="."){var g;return W()(g=".".concat(pr).concat(a)).call(g,C()(I).call(I,1))}return W()(A="".concat(pr).concat(a)).call(A,I)}function mp(A,I){var a=I.originX,g=I.originY,r=A.getPointByOrigin(a,g),p=r.x,M=r.y;A.set({left:p,top:M,originX:a,originY:g}),A.setCoords()}function yp(A){var I,a={};return Ve()(I=De()(A)).call(I,function(g){a[A[g]]=g}),a}function ea(A,I){A.customProps=A.customProps||{},Z()(A.customProps,I)}function yr(A,I){var a={};return Se()(I)&&(I=[I]),J()(I,function(g){a[g]=A.customProps[g]}),a}function Cp(A){return A.charAt(0).toUpperCase()+C()(A).call(A,1)}function so(A,I){return u()(A).call(A,I)>=0}function jc(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Et()(A,"type")||Ae.COLOR}function ta(A){var I=ye()(A),a=I===void 0?{}:I;return a.source?Ae.FILTER:Ae.COLOR}function Fc(A){return pt()(A.get("type"),Fe)>=0}function na(A){if(so(Fe,A))return"Shape";switch(A){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return Bc(A)}}function Ip(A){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=I.useAlpha,g=a===void 0?!0:a,r=I.mode,p=Ye.VINTAGE,M=Ye.REMOVE_COLOR,T=Ye.BLEND_COLOR,L=Ye.SEPIA2,P=Ye.COLOR_FILTER,z=Ye.REMOVE_WHITE,U=Ye.BLEND,re;switch(A){case p:re=L;break;case M:re=g?P:z;break;case T:re=r==="add"?U:r;break;default:re=A}return Bc(re)}function bp(A){var I=Ge.LOAD_IMAGE;return typeof A=="string"?I===A:I===A.name}function Sp(A){var I,a,g=Ge.FLIP_IMAGE,r=Ge.ROTATE_IMAGE,p=Ge.ADD_TEXT,M=Ge.APPLY_FILTER,T=Ge.REMOVE_FILTER,L=Ge.CHANGE_SHAPE,P=Ge.CHANGE_ICON_COLOR,z=Ge.CHANGE_TEXT_STYLE,U=Ge.CLEAR_OBJECTS,re=Ge.ADD_IMAGE_OBJECT,oe=Ge.REMOVE_OBJECT,pe=Ge.RESIZE_IMAGE,ue=A.name,ge=A.args,Oe;switch(ue){case g:Oe={name:ue,detail:ge[1]==="reset"?ge[1]:C()(I=ge[1]).call(I,4)};break;case r:Oe={name:ue,detail:ge[2]};break;case M:Oe={name:lt.APPLY_FILTER,detail:Ip(ge[1],ge[2])};break;case T:Oe={name:lt.REMOVE_FILTER,detail:"Remove"};break;case L:Oe={name:lt.CHANGE_SHAPE,detail:"Change"};break;case P:Oe={name:lt.CHANGE_ICON_COLOR,detail:"Change"};break;case z:Oe={name:lt.CHANGE_TEXT_STYLE,detail:"Change"};break;case oe:Oe={name:lt.REMOVE_OBJECT,detail:ge[2]};break;case U:Oe={name:lt.CLEAR_OBJECTS,detail:"All"};break;case re:Oe={name:lt.ADD_IMAGE_OBJECT,detail:"Add"};break;case p:Oe={name:lt.ADD_TEXT};break;case pe:Oe={name:lt.RESIZE,detail:W()(a="".concat(~~ge[1].width,"x")).call(a,~~ge[1].height)};break;default:Oe={name:ue};break}return ge[1]==="mask"&&(Oe={name:lt.LOAD_MASK_IMAGE,detail:"Apply"}),Oe}function Dp(A){return A==="top"?"bottom":A==="left"?"right":A==="right"?"left":"top"}function Bc(A){return A.replace(/[a-z]/,function(I){return I.toUpperCase()})}function xp(A){var I=A.left,a=A.top,g=A.width,r=A.height,p=hi.LEFT,M=hi.TOP,T=hi.WIDTH,L=hi.HEIGHT;return I===p&&a===M&&g===T&&r===L}var Ep=_t("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),zc={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},Mp={UN_IMPLEMENTATION:function(I){return zc.UN_IMPLEMENTATION+I},NO_COMPONENT_NAME:function(){return zc.NO_COMPONENT_NAME}},ao={types:Z()({},Ep),create:function(I){I=I.toLowerCase();for(var a=Mp[I],g=arguments.length,r=new Array(g>1?g-1:0),p=1;p<g;p++)r[p-1]=arguments[p];return a.apply(void 0,r)}},Hc=ao.create,Uc=ao.types,_p=function(){function A(I,a){Y(this,A),this.name=I.name,this.args=a,this.execute=I.execute,this.undo=I.undo,this.executeCallback=I.executeCallback||null,this.undoCallback=I.undoCallback||null,this.undoData={}}return ne(A,[{key:"execute",value:function(){throw new Error(Hc(Uc.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(Hc(Uc.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return De()(this.undoData).length>0}},{key:"setUndoData",value:function(a,g,r){return g&&(a=g),r?g||(g=a):(Z()(this.undoData,a),g=null),g}},{key:"setExecuteCallback",value:function(a){return this.executeCallback=a,this}},{key:"setUndoCallback",value:function(a){return this.undoCallback=a,this}}]),A}(),wp=_p,Vc={};function Tp(A){var I=Vc[A];if(I){for(var a=arguments.length,g=new Array(a>1?a-1:0),r=1;r<a;r++)g[r-1]=arguments[r];return new wp(I,g)}return null}function Ap(A){Vc[A.name]=A}var At={create:Tp,register:Ap},Wc=function(){function A(){Y(this,A),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return ne(A,[{key:"_invokeExecution",value:function(a){var g=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var p=a.args;return p||(p=[]),a.execute.apply(a,B(p)).then(function(M){return g._isSilent||(g.pushUndoStack(a),g.fire(r?Ee.AFTER_REDO:Ee.EXECUTE_COMMAND,a)),g.unlock(),Ze(a.executeCallback)&&a.executeCallback(M),M}).catch(function(M){return g.unlock(),Ie().reject(M)})}},{key:"_invokeUndo",value:function(a){var g=this;this.lock();var r=a.args;return r||(r=[]),a.undo.apply(a,B(r)).then(function(p){return g.pushRedoStack(a),g.fire(Ee.AFTER_UNDO,a),g.unlock(),Ze(a.undoCallback)&&a.undoCallback(p),p}).catch(function(p){return g.unlock(),Ie().reject(p)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(Ee.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(Ee.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var a=this;this._isSilent=!0;for(var g=arguments.length,r=new Array(g),p=0;p<g;p++)r[p]=arguments[p];return this.execute.apply(this,W()(r).call(r,[this._isSilent])).then(function(){a._isSilent=!1})}},{key:"execute",value:function(){var a=this;if(this._isLocked)return Ie().reject(mt.isLock);for(var g=arguments.length,r=new Array(g),p=0;p<g;p++)r[p]=arguments[p];var M=r[0];return Se()(M)&&(M=At.create.apply(At,r)),this._invokeExecution(M).then(function(T){return a.clearRedoStack(),T})}},{key:"undo",value:function(){var a=this._undoStack.pop(),g,r="";if(a&&this._isLocked&&(this.pushUndoStack(a,!0),a=null),a)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),g=this._invokeUndo(a);else{if(r=mt.undo,this._isLocked){var p;r=W()(p="".concat(r," Because ")).call(p,mt.isLock)}g=Ie().reject(r)}return g}},{key:"redo",value:function(){var a=this._redoStack.pop(),g,r="";if(a&&this._isLocked&&(this.pushRedoStack(a,!0),a=null),a)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),g=this._invokeExecution(a,!0);else{if(r=mt.redo,this._isLocked){var p;r=W()(p="".concat(r," Because ")).call(p,mt.isLock)}g=Ie().reject(r)}return g}},{key:"pushUndoStack",value:function(a,g){this._undoStack.push(a),g||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(a,g){this._redoStack.push(a),g||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),A}();ve().mixin(Wc);var Op=Wc,Np=f(5214),ti=f.n(Np),kp=function(A){var I,a,g,r,p,M,T,L=A.locale,P=A.biImage,z=A.commonStyle,U=A.headerStyle,re=A.loadButtonStyle,oe=A.downloadButtonStyle,pe=A.submenuStyle;return W()(I=W()(a=W()(g=W()(r=W()(p=W()(M=W()(T=`
    <div class="tui-image-editor-main-container" style="`.concat(z,`">
        <div class="tui-image-editor-header" style="`)).call(T,U,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(M,P,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(p,re,`">
                    `)).call(r,L.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(g,oe,`">
                    `)).call(a,L.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(I,pe,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)},Pp=function(A){var I,a,g,r,p,M=A.locale,T=A.biImage,L=A.loadButtonStyle,P=A.downloadButtonStyle,z=A.menuBarPosition;return W()(I=W()(a=W()(g=W()(r=W()(p=`
    <ul class="tui-image-editor-help-menu `.concat(Dp(z),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(p,T,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(r,L,`">
                `)).call(g,M.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(a,P,`">
                `)).call(I,M.localize("Download"),`
            </button>
        </div>
    </div>
`)},Lp=f(899),Tn=f.n(Lp),Rp=function(A){var I,a,g,r,p,M,T,L,P,z,U,re,oe,pe,ue,ge,Oe,Je,Qe,Ke,Re,dt,Gt,on,mn,Lt,ri,oi,tn,vo=A.subMenuLabelActive,mo=A.subMenuLabelNormal,yo=A.subMenuRangeTitle,Co=A.submenuPartitionVertical,Io=A.submenuPartitionHorizontal,bo=A.submenuCheckbox,So=A.submenuRangePointer,Do=A.submenuRangeValue,xo=A.submenuColorpickerTitle,Eo=A.submenuColorpickerButton,Mo=A.submenuRangeBar,_o=A.submenuRangeSubbar,wo=A.submenuDisabledRangePointer,To=A.submenuDisabledRangeBar,Ao=A.submenuDisabledRangeSubbar,Oo=A.submenuIconSize,No=A.menuIconSize,ko=A.biSize,yn=A.menuIconStyle,gi=A.submenuIconStyle;return W()(I=W()(a=W()(g=W()(r=W()(p=W()(M=W()(T=W()(L=W()(P=W()(z=W()(U=W()(re=W()(oe=W()(pe=W()(ue=W()(ge=W()(Oe=W()(Je=W()(Qe=W()(Ke=W()(Re=W()(dt=W()(Gt=W()(on=W()(mn=W()(Lt=W()(ri=W()(oi=W()(tn=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(vo,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(tn,mo,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call(oi,yo,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(ri,Co,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(Lt,Io,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(mn,bo,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(on,So,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(Gt,Mo,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(dt,_o,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(Re,wo,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(Ke,Ao,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(Qe,To,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call(Je,Do,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call(Oe,xo,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(ge,Eo,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(ue,No,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(pe,Oo,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(oe,ko,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(re,yn.normal.color,`;
        stroke: `)).call(U,yn.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(z,yn.active.color,`;
        stroke: `)).call(P,yn.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(L,yn.hover.color,`;
        stroke: `)).call(T,yn.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(M,yn.disabled.color,`;
        stroke: `)).call(p,yn.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(r,gi.normal.color,`;
        stroke: `)).call(g,gi.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(a,gi.active.color,`;
        stroke: `)).call(I,gi.active.color,`;
    }
`)},jp={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},Fp=f(2534),Bp=function(){function A(I){Y(this,A),this.styles=this._changeToObject(Z()({},jp,I)),ro(this._styleMaker()),this._loadDefaultSvgIcon()}return ne(A,[{key:"getStyle",value:function(a){var g=null,r=a.replace(/\..+$/,""),p=this.styles[a];switch(a){case"common.bi":g=this.styles[a].image;break;case"menu.icon":g={active:this.styles["".concat(r,".activeIcon")],normal:this.styles["".concat(r,".normalIcon")],hover:this.styles["".concat(r,".hoverIcon")],disabled:this.styles["".concat(r,".disabledIcon")]};break;case"submenu.icon":g={active:this.styles["".concat(r,".activeIcon")],normal:this.styles["".concat(r,".normalIcon")]};break;case"submenu.label":g={active:this._makeCssText(this.styles["".concat(r,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(r,".normalLabel")])};break;case"submenu.partition":g={vertical:this._makeCssText(Z()({},p,{borderLeft:"1px solid ".concat(p.color)})),horizontal:this._makeCssText(Z()({},p,{borderBottom:"1px solid ".concat(p.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":p.backgroundColor=p.color,g=this._makeCssText(p);break;default:g=this._makeCssText(p);break}return g}},{key:"_styleMaker",value:function(){var a=this.getStyle("submenu.label"),g=this.getStyle("submenu.partition");return Rp({subMenuLabelActive:a.active,subMenuLabelNormal:a.normal,submenuPartitionVertical:g.vertical,submenuPartitionHorizontal:g.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(a){var g={};return J()(a,function(r,p){var M=p.match(/^(.+)\.([a-z]+)$/i),T=ce(M,3),L=T[1],P=T[2];g[L]||(g[L]={}),g[L][P]=r}),g}},{key:"_makeCssText",value:function(a){var g=this,r=[];return J()(a,function(p,M){var T,L;u()(T=["backgroundImage"]).call(T,M)>-1&&p!=="none"&&(p="url(".concat(p,")")),r.push(W()(L="".concat(g._toUnderScore(M),": ")).call(L,p))}),r.join(";")}},{key:"_toUnderScore",value:function(a){return a.replace(/([A-Z])/g,function(g,r){return"-".concat(r.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var a=new DOMParser,g=Fp.replace(/data:image\/svg\+xml;base64,/,""),r=a.parseFromString(atob(g),"text/xml");document.body.appendChild(r.documentElement)}}},{key:"_makeIconClassName",value:function(a,g){var r=g?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),p=r[a],M=p.path,T=p.name;return M&&T?a:"".concat(a," use-default")}},{key:"_makeSvgIconPrefix",value:function(a,g){var r,p=g?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),M=p[a],T=M.path,L=M.name;return T&&L?W()(r="".concat(T,"#")).call(r,L,"-"):"#"}},{key:"_makeSvgItem",value:function(a,g,r){var p=this;return Tn()(a).call(a,function(M){var T,L,P=p._makeSvgIconPrefix(M,r),z=p._toUnderScore(g),U=p._makeIconClassName(M,r);return W()(T=W()(L='<use xlink:href="'.concat(P,"ic-")).call(L,z,'" class="')).call(T,U,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(a,g){var r,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return W()(r='<svg class="svg_ic-'.concat(p?"submenu":"menu",'">')).call(r,this._makeSvgItem(a,g,p),"</svg>")}}]),A}(),zp=Bp,Hp=f(9146),_e=f.n(Hp),Up=f(6623),Gc=f(4230);function ia(A,I){return ia=Gc||function(g,r){return g.__proto__=r,g},ia(A,I)}function yt(A,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Up(I&&I.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),I&&ia(A,I)}var Vp=f(3742);function lo(A){"@babel/helpers - typeof";return typeof b=="function"&&typeof Vp=="symbol"?lo=function(a){return typeof a}:lo=function(a){return a&&typeof b=="function"&&a.constructor===b&&a!==b.prototype?"symbol":typeof a},lo(A)}function ct(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function Ct(A,I){if(I&&(lo(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ct(A)}var Yc=f(9856);function $e(A){return $e=Gc?Yc:function(a){return a.__proto__||Yc(a)},$e(A)}var Wp=f(6092),Cr=f.n(Wp),Gp=f(4858),Yp=f.n(Gp),Xp=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],Xc=function(){function A(I,a){var g=a.defaultColor,r=g===void 0?"#7e7e7e":g,p=a.toggleDirection,M=p===void 0?"up":p,T=a.usageStatistics;Y(this,A),this.colorpickerElement=I,this.usageStatistics=T,this._show=!1,this._colorpickerElement=I,this._toggleDirection=M,this._makePickerButtonElement(r),this._makePickerLayerElement(I,I.getAttribute("title")),this._color=r,this.picker=Yp().create({container:this.pickerElement,preset:Xp,color:r,usageStatistics:this.usageStatistics}),this._addEvent()}return ne(A,[{key:"destroy",value:function(){var a=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",J()(this,function(g,r){a[r]=null})}},{key:"color",get:function(){return this._color},set:function(a){this._color=a,this._changeColorElement(a)}},{key:"_changeColorElement",value:function(a){a?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=a):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(a){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",a?this.colorElement.style.backgroundColor=a:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(a,g){var r=document.createElement("label"),p=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",r.innerHTML=g,p.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(p),a.appendChild(this.pickerControl),a.appendChild(this.colorElement),a.appendChild(r)}},{key:"_addEvent",value:function(){var a=this,g;this.picker.on("selectColor",function(r){a._changeColorElement(r.color),a._color=r.color,a.fire("change",r.color)}),this.eventHandler={pickerToggle:K()(g=this._pickerToggleEventHandler).call(g,this),pickerHide:function(){return a.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(a){var g=a.target,r=g&&this._isElementInColorPickerControl(g);(!r||r&&this._isPaletteButton(g))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),a.stopPropagation()}},{key:"_isPaletteButton",value:function(a){return a.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(a){for(var g=a;g!==document.body&&g;){if(g===this.pickerControl)return!0;g=g.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var a=this.pickerControl.style,g=this._colorpickerElement.clientWidth/2+2,r=this.pickerControl.offsetWidth/2-g,p=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(p=30),a.top="".concat(p,"px"),a.left="-".concat(r,"px")}}]),A}();ve().mixin(Xc);var ni=Xc,Zp=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,Zc=function(){function A(I){var a,g,r,p,M,T,L,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y(this,A),this._value=P.value||0,this.rangeElement=I.slider,this.rangeInputElement=I.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=P.min||0,this._max=P.max||100,this._useDecimal=P.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=P.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:K()(a=this._startChangingSlide).call(a,this),stopChangingSlide:K()(g=this._stopChangingSlide).call(g,this),changeSlide:K()(r=this._changeSlide).call(r,this),changeSlideFinally:K()(p=this._changeSlideFinally).call(p,this),changeInput:K()(M=this._changeInput).call(M,this),changeInputFinally:K()(T=this._changeValueWithInput).call(T,this,!0),changeInputWithArrow:K()(L=this._changeValueWithInputKeyEvent).call(L,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=P.value,this.trigger("change")}return ne(A,[{key:"destroy",value:function(){var a=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",J()(this,function(g,r){a[r]=null})}},{key:"max",get:function(){return this._max},set:function(a){this._max=a,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(a){this._min=a,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(a){a=this._useDecimal?a:ke(a);var g=a-this._min,r=g*this.rangeWidth/this._absMax;this.rangeWidth<r&&(r=this.rangeWidth),this.pointer.style.left="".concat(r,"px"),this.subbar.style.right="".concat(this.rangeWidth-r,"px"),this._value=a,this.rangeInputElement&&(this.rangeInputElement.value=a)}},{key:"trigger",value:function(a){this.fire(a,this._value)}},{key:"_getRangeWidth",value:function(){var a=function(r){return ke(window.getComputedStyle(r,null).width)};return a(this.rangeElement)-a(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(a){var g,r=a.keyCode,p=a.target;if(!(u()(g=[Tt.ARROW_UP,Tt.ARROW_DOWN]).call(g,r)<0)){var M=Number(p.value);M=this._valueUpDownForKeyEvent(M,r);var T=M<this._min||M>this._max;if(!T){var L=et(M,this._min,this.max);this.value=L,this.fire("change",L,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(a,g){var r=this._useDecimal?.1:1;return g===Tt.ARROW_UP?a+=r:g===Tt.ARROW_DOWN&&(a-=r),a}},{key:"_changeInput",value:function(a){var g=this;clearTimeout(this._userInputTimer);var r=a.keyCode;if(r<Tt.DIGIT_0||r>Tt.DIGIT_9){a.preventDefault();return}this._userInputTimer=i()(function(){g._inputSetValue(a.target.value)},350)}},{key:"_inputSetValue",value:function(a){var g=this._useDecimal?Number(a):ke(a);g=et(g,this._min,this.max),this.value=g,this.fire("change",g,!0)}},{key:"_changeValueWithInput",value:function(a,g){var r,p=g.keyCode,M=g.target;if(!(u()(r=[Tt.ARROW_UP,Tt.ARROW_DOWN]).call(r,p)>=0)){var T=this._filterForInputText(M.value),L=!T||isNaN(T);M.value=T,L||this._inputSetValue(T)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(a){var g=a.screenX,r=g-this.firstPosition,p=this.firstLeft+r;p=p>this.rangeWidth?this.rangeWidth:p,p=p<0?0:p,this.pointer.style.left="".concat(p,"px"),this.subbar.style.right="".concat(this.rangeWidth-p,"px");var M=p/this.rangeWidth,T=this._absMax*M+this._min,L=this._useDecimal?T:ke(T),P=this.value!==L;P&&(this.value=L,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(a){if(a.stopPropagation(),a.target.className==="tui-image-editor-range"){var g=a.offsetX,r=g/this.rangeWidth,p=this._absMax*r+this._min;this.pointer.style.left="".concat(r*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-r)*this.rangeWidth,"px"),this.value=p,this.fire("change",p,!0)}}},{key:"_startChangingSlide",value:function(a){this.firstPosition=a.screenX,this.firstLeft=ke(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(a){return a.replace(Zp,"$1$2$3")}}]),A}();ve().mixin(Zc);var cn=Zc,$c=function(){function A(I,a){var g=a.locale,r=a.name,p=a.makeSvgIcon,M=a.menuBarPosition,T=a.templateHtml,L=a.usageStatistics;Y(this,A),this.subMenuElement=I,this.menuBarPosition=M,this.toggleDirection=M==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=L,this.eventHandler={},this._makeSubMenuElement({locale:g,name:r,makeSvgIcon:p,templateHtml:T})}return ne(A,[{key:"selector",value:function(a){return this.subMenuElement.querySelector(a)}},{key:"colorPickerChangeShow",value:function(a){var g;Ve()(g=this.colorPickerControls).call(g,function(r){a!==r&&r.hide()})}},{key:"getButtonType",value:function(a,g){return a.className.match(RegExp("(".concat(g.join("|"),")")))[0]}},{key:"changeClass",value:function(a,g,r){a.classList.remove(g),a.classList.add(r)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(a){var g=a.locale,r=a.name,p=a.iconStyle,M=a.makeSvgIcon,T=a.templateHtml,L=document.createElement("div");L.className="tui-image-editor-menu-".concat(r),L.innerHTML=T({locale:g,iconStyle:p,makeSvgIcon:M}),this.subMenuElement.appendChild(L)}},{key:"_onStartEditingInputBox",value:function(){this.fire(Ee.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(Ee.INPUT_BOX_EDITING_STOPPED)}}]),A}();ve().mixin($c);var An=$c,$p=function(A){var I,a,g,r,p,M,T,L,P=A.locale,z=A.makeSvgIcon;return W()(I=W()(a=W()(g=W()(r=W()(p=W()(M=W()(T=W()(L=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(z(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(L,P.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(T,z(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(M,P.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(p,z(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(r,P.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(g,P.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(a,P.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(I,P.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function Jp(A){var I=Qp();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Qp(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Kp={stroke:"#ffbb3b",fill:"",strokeWidth:3},qp=function(A){yt(a,A);var I=Jp(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"shape",makeSvgIcon:T,menuBarPosition:L,templateHtml:$p,usageStatistics:P}),p.type=null,p.options=Kp,p._els={shapeSelectButton:p.selector(".tie-shape-button"),shapeColorButton:p.selector(".tie-shape-color-button"),strokeRange:new cn({slider:p.selector(".tie-stroke-range"),input:p.selector(".tie-stroke-range-value")},gr),fillColorpicker:new ni(p.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics}),strokeColorpicker:new ni(p.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics})},p.colorPickerControls.push(p._els.fillColorpicker),p.colorPickerControls.push(p._els.strokeColorpicker),p.colorPickerInputBoxes=[],p.colorPickerInputBoxes.push(p._els.fillColorpicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX)),p.colorPickerInputBoxes.push(p._els.strokeColorpicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX)),p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),ln(this)}},{key:"addEvent",value:function(r){var p,M,T,L,P,z,U=this;this.eventHandler.shapeTypeSelected=K()(p=this._changeShapeHandler).call(p,this),this.actions=r,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",K()(M=this._changeStrokeRangeHandler).call(M,this)),this._els.fillColorpicker.on("change",K()(T=this._changeFillColorHandler).call(T,this)),this._els.strokeColorpicker.on("change",K()(L=this._changeStrokeColorHandler).call(L,this)),this._els.fillColorpicker.on("changeShow",K()(P=this.colorPickerChangeShow).call(P,this)),this._els.strokeColorpicker.on("changeShow",K()(z=this.colorPickerChangeShow).call(z,this)),Cr()(this.colorPickerInputBoxes,function(re){var oe,pe;re.addEventListener(Ee.FOCUS,K()(oe=U._onStartEditingInputBox).call(oe,U)),re.addEventListener(Ee.BLUR,K()(pe=U._onStopEditingInputBox).call(pe,U))},this)}},{key:"_removeEvent",value:function(){var r=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),Cr()(this.colorPickerInputBoxes,function(p){var M,T;p.removeEventListener(Ee.FOCUS,K()(M=r._onStartEditingInputBox).call(M,r)),p.removeEventListener(Ee.BLUR,K()(T=r._onStopEditingInputBox).call(T,r))},this)}},{key:"setShapeStatus",value:function(r){var p=r.strokeWidth,M=r.strokeColor,T=r.fillColor;this._els.strokeRange.value=p,this._els.strokeColorpicker.color=M,this._els.fillColorpicker.color=T,this.options.stroke=M,this.options.fill=T,this.options.strokeWidth=p,this.actions.setDrawingShape(this.type,{strokeWidth:p})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(r){var p=r;p<=0&&(p=gr.max),this._els.strokeRange.max=p}},{key:"setStrokeValue",value:function(r){this._els.strokeRange.value=r,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(r){var p=r.target.closest(".tui-image-editor-button");if(p){this.actions.stopDrawingMode(),this.actions.discardSelection();var M=this.getButtonType(p,["circle","triangle","rect"]);if(this.type===M){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=M,r.currentTarget.classList.add(M),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(r,p){this.options.strokeWidth=ke(r),this.actions.changeShape({strokeWidth:r},!p),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(r){r=r||"transparent",this.options.fill=r,this.actions.changeShape({fill:r})}},{key:"_changeStrokeColorHandler",value:function(r){r=r||"transparent",this.options.stroke=r,this.actions.changeShape({stroke:r})}}]),a}(An),ev=qp,tv=function(A){var I,a,g,r,p,M,T,L,P,z,U,re,oe,pe,ue,ge,Oe,Je=A.locale,Qe=A.makeSvgIcon;return W()(I=W()(a=W()(g=W()(r=W()(p=W()(M=W()(T=W()(L=W()(P=W()(z=W()(U=W()(re=W()(oe=W()(pe=W()(ue=W()(ge=W()(Oe=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(Qe(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(Oe,Je.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(ge,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(ue,Je.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(pe,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(oe,Je.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call(re,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(U,Je.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(z,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(P,Je.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(L,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(T,Je.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(M,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(p,Je.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(r,Qe(["normal","active"],"apply"),`
                <label>
                    `)).call(g,Je.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(a,Qe(["normal","active"],"cancel"),`
                <label>
                    `)).call(I,Je.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function nv(A){var I=iv();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function iv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var rv=function(A){yt(a,A);var I=nv(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"crop",makeSvgIcon:T,menuBarPosition:L,templateHtml:tv,usageStatistics:P}),p.status="active",p._els={apply:p.selector(".tie-crop-button .apply"),cancel:p.selector(".tie-crop-button .cancel"),preset:p.selector(".tie-crop-preset-button")},p.defaultPresetButton=p._els.preset.querySelector(".preset-none"),p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),ln(this)}},{key:"addEvent",value:function(r){var p,M,T,L=K()(p=this._applyEventHandler).call(p,this),P=K()(M=this._cancelEventHandler).call(M,this),z=K()(T=this._cropzonePresetEventHandler).call(T,this);this.eventHandler={apply:L,cancel:P,cropzonePreset:z},this.actions=r,this._els.apply.addEventListener("click",L),this._els.cancel.addEventListener("click",P),this._els.preset.addEventListener("click",z)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(r){var p=r.target.closest(".tui-image-editor-button.preset");if(p){var M=p.className.match(/preset-[^\s]+/),T=ce(M,1),L=T[0];this._setPresetButtonActive(p),this.actions.preset(L)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(r){r?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;J()(this._els.preset.querySelectorAll(".preset"),function(p){p.classList.remove("active")}),r&&r.classList.add("active")}}]),a}(An),ov=rv,sv=function(A){var I,a,g,r,p,M,T=A.locale,L=A.makeSvgIcon;return W()(I=W()(a=W()(g=W()(r=W()(p=W()(M=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(T.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(M,T.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(p,T.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(r,L(["normal","active"],"apply"),`
                <label>
                    `)).call(g,T.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(a,L(["normal","active"],"cancel"),`
                <label>
                    `)).call(I,T.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function av(A){var I=lv();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function lv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var cv=function(A){yt(a,A);var I=av(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"resize",makeSvgIcon:T,menuBarPosition:L,templateHtml:sv,usageStatistics:P}),p.status="active",p._lockState=!1,p._originalDimensions=null,p._els={widthRange:new cn({slider:p.selector(".tie-width-range"),input:p.selector(".tie-width-range-value")},Hn),heightRange:new cn({slider:p.selector(".tie-height-range"),input:p.selector(".tie-height-range-value")},Hn),lockAspectRatio:p.selector(".tie-lock-aspect-ratio"),apply:p.selector(".tie-resize-button .apply"),cancel:p.selector(".tie-resize-button .cancel")},p}return ne(a,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var r=this.actions.getCurrentDimensions();this._originalDimensions=r,this.setWidthValue(r.width),this.setHeightValue(r.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(r){this._els.widthRange.min=this.calcMinValue(r.minWidth),this._els.heightRange.min=this.calcMinValue(r.minHeight),this._els.widthRange.max=this.calcMaxValue(r.maxWidth),this._els.heightRange.max=this.calcMaxValue(r.maxHeight)}},{key:"calcMaxValue",value:function(r){return r<=0&&(r=Hn.max),r}},{key:"calcMinValue",value:function(r){return r<=0&&(r=Hn.min),r}},{key:"setWidthValue",value:function(r){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=r,p&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(r){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=r,p&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),ln(this)}},{key:"addEvent",value:function(r){var p,M,T,L,P;this._els.widthRange.on("change",K()(p=this._changeWidthRangeHandler).call(p,this)),this._els.heightRange.on("change",K()(M=this._changeHeightRangeHandler).call(M,this)),this._els.lockAspectRatio.addEventListener("change",K()(T=this._changeLockAspectRatio).call(T,this));var z=K()(L=this._applyEventHandler).call(L,this),U=K()(P=this._cancelEventHandler).call(P,this);this.eventHandler={apply:z,cancel:U},this.actions=r,this._els.apply.addEventListener("click",z),this._els.cancel.addEventListener("click",U)}},{key:"_changeWidthRangeHandler",value:function(r){this.actions.preview("width",ke(r),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(r){this.actions.preview("height",ke(r),this._lockState)}},{key:"_changeLockAspectRatio",value:function(r){this._lockState=r.target.checked,this.actions.lockAspectRatio(this._lockState,Hn.min,Hn.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(r){r?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),a}(An),uv=cv,fv=function(A){var I,a,g,r,p,M=A.locale,T=A.makeSvgIcon;return W()(I=W()(a=W()(g=W()(r=W()(p=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(T(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(p,M.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(r,T(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(g,M.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(a,T(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(I,M.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)};function dv(A){var I=hv();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function hv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var gv=function(A){yt(a,A);var I=dv(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"flip",makeSvgIcon:T,menuBarPosition:L,templateHtml:fv,usageStatistics:P}),p.flipStatus=!1,p._els={flipButton:p.selector(".tie-flip-button")},p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),ln(this)}},{key:"addEvent",value:function(r){var p;this.eventHandler.changeFlip=K()(p=this._changeFlip).call(p,this),this._actions=r,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(r){var p=this,M=r.target.closest(".tui-image-editor-button");if(M){var T=this.getButtonType(M,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&T==="resetFlip")return;this._actions.flip(T).then(function(L){var P=p._els.flipButton.classList;p.flipStatus=!1,P.remove("resetFlip"),J()(["flipX","flipY"],function(z){P.remove(z),L[z]&&(P.add(z),P.add("resetFlip"),p.flipStatus=!0)})})}}}]),a}(An),pv=gv,vv=function(A){var I,a,g=A.locale,r=A.makeSvgIcon;return W()(I=W()(a=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(r(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(a,r(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(I,g.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function mv(A){var I=yv();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function yv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Cv=30,Iv=-30,bv=function(A){yt(a,A);var I=mv(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"rotate",makeSvgIcon:T,menuBarPosition:L,templateHtml:vv,usageStatistics:P}),p._value=0,p._els={rotateButton:p.selector(".tie-rotate-button"),rotateRange:new cn({slider:p.selector(".tie-rotate-range"),input:p.selector(".tie-rotate-range-value")},qr)},p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),ln(this)}},{key:"setRangeBarAngle",value:function(r,p){var M=p;r==="rotate"&&(M=me()(this._els.rotateRange.value,10)+p),this._setRangeBarRatio(M)}},{key:"_setRangeBarRatio",value:function(r){this._els.rotateRange.value=r}},{key:"addEvent",value:function(r){var p,M;this.eventHandler.rotationAngleChanged=K()(p=this._changeRotateForButton).call(p,this),this.actions=r,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",K()(M=this._changeRotateForRange).call(M,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(r,p){var M=ke(r);this.actions.setAngle(M,!p),this._value=M}},{key:"_changeRotateForButton",value:function(r){var p=r.target.closest(".tui-image-editor-button"),M=this._els.rotateRange.value;if(p){var T=this.getButtonType(p,["counterclockwise","clockwise"]),L={clockwise:Cv,counterclockwise:Iv}[T],P=me()(M,10)+L,z=P>=-360&&P<=360;z&&this.actions.rotate(L)}}}]),a}(An),Sv=bv,Dv=function(A){var I,a,g,r,p,M,T,L,P,z,U,re,oe,pe=A.locale,ue=A.makeSvgIcon;return W()(I=W()(a=W()(g=W()(r=W()(p=W()(M=W()(T=W()(L=W()(P=W()(z=W()(U=W()(re=W()(oe=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(ue(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(oe,pe.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call(re,ue(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(U,pe.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(z,ue(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(P,pe.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(L,ue(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(T,pe.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(M,ue(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(p,pe.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(r,ue(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(g,pe.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(a,pe.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(I,pe.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function xv(A){var I=Ev();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Ev(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Mv=function(A){yt(a,A);var I=xv(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"text",makeSvgIcon:T,menuBarPosition:L,templateHtml:Dv,usageStatistics:P}),p.effect={bold:!1,italic:!1,underline:!1},p.align="tie-text-align-left",p._els={textEffectButton:p.selector(".tie-text-effect-button"),textAlignButton:p.selector(".tie-text-align-button"),textColorpicker:new ni(p.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics}),textRange:new cn({slider:p.selector(".tie-text-range"),input:p.selector(".tie-text-range-value")},to)},p.colorPickerInputBox=p._els.textColorpicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX),p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),ln(this)}},{key:"addEvent",value:function(r){var p,M,T,L,P,z,U=K()(p=this._setTextEffectHandler).call(p,this),re=K()(M=this._setTextAlignHandler).call(M,this);this.eventHandler={setTextEffect:U,setTextAlign:re},this.actions=r,this._els.textEffectButton.addEventListener("click",U),this._els.textAlignButton.addEventListener("click",re),this._els.textRange.on("change",K()(T=this._changeTextRnageHandler).call(T,this)),this._els.textColorpicker.on("change",K()(L=this._changeColorHandler).call(L,this)),this.colorPickerInputBox.addEventListener(Ee.FOCUS,K()(P=this._onStartEditingInputBox).call(P,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,K()(z=this._onStopEditingInputBox).call(z,this))}},{key:"_removeEvent",value:function(){var r,p,M=this.eventHandler,T=M.setTextEffect,L=M.setTextAlign;this._els.textEffectButton.removeEventListener("click",T),this._els.textAlignButton.removeEventListener("click",L),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,K()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,K()(p=this._onStopEditingInputBox).call(p,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(r){this._els.textColorpicker.color=r}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(r){this._els.textRange.value=r}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=ye()(r),M=r.fontSize,T=r.fontStyle,L=r.fontWeight,P=r.textDecoration,z=r.textAlign;this.textColor=p,this.fontSize=M,this.setEffectState("italic",T),this.setEffectState("bold",L),this.setEffectState("underline",P),this.setAlignState("tie-text-align-".concat(z))}},{key:"setEffectState",value:function(r,p){var M=p==="italic"||p==="bold"||p==="underline",T=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(r));this.effect[r]=M,T.classList[M?"add":"remove"]("active")}},{key:"setAlignState",value:function(r){var p=this._els.textAlignButton;p.classList.remove(this.align),p.classList.add(r),this.align=r}},{key:"_setTextEffectHandler",value:function(r){var p=r.target.closest(".tui-image-editor-button");if(p){var M=p.className.match(/(bold|italic|underline)/),T=ce(M,1),L=T[0],P={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[L];this.effect[L]=!this.effect[L],p.classList.toggle("active"),this.actions.changeTextStyle(P)}}},{key:"_setTextAlignHandler",value:function(r){var p=r.target.closest(".tui-image-editor-button");if(p){var M=this.getButtonType(p,["left","center","right"]),T="tie-text-align-".concat(M);r.currentTarget.classList.remove(this.align),this.align!==T&&r.currentTarget.classList.add(T),this.actions.changeTextStyle({textAlign:M}),this.align=T}}},{key:"_changeTextRnageHandler",value:function(r,p){this.actions.changeTextStyle({fontSize:r},!p)}},{key:"_changeColorHandler",value:function(r){r=r||"transparent",this.actions.changeTextStyle({fill:r})}}]),a}(An),_v=Mv,wv=function(A){var I,a,g,r=A.locale,p=A.makeSvgIcon;return W()(I=W()(a=W()(g=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(p(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(g,r.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(a,p(["normal","active"],"apply"),`
                <label>
                    `)).call(I,r.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Tv(A){var I=Av();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Av(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Ov=function(A){yt(a,A);var I=Tv(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"mask",makeSvgIcon:T,menuBarPosition:L,templateHtml:wv,usageStatistics:P}),p._els={applyButton:p.selector(".tie-mask-apply"),maskImageButton:p.selector(".tie-mask-image-file")},p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),ln(this)}},{key:"addEvent",value:function(r){var p,M,T=K()(p=this._loadMaskFile).call(p,this),L=K()(M=this._applyMask).call(M,this);this.eventHandler={loadMaskFile:T,applyMask:L},this.actions=r,this._els.maskImageButton.addEventListener("change",T),this._els.applyButton.addEventListener("click",L)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(r){var p;en()||alert("This browser does not support file-api");var M=ce(r.target.files,1),T=M[0];T&&(p=te().createObjectURL(T),this.actions.loadImageFromURL(p,T),this._els.applyButton.classList.add("active"))}}]),a}(An),Nv=Ov,kv=function(A){var I,a,g,r,p,M,T,L,P,z,U,re,oe,pe,ue,ge,Oe,Je,Qe,Ke,Re=A.locale,dt=A.makeSvgIcon;return W()(I=W()(a=W()(g=W()(r=W()(p=W()(M=W()(T=W()(L=W()(P=W()(z=W()(U=W()(re=W()(oe=W()(pe=W()(ue=W()(ge=W()(Oe=W()(Je=W()(Qe=W()(Ke=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(dt(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(Ke,Re.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(Qe,dt(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call(Je,Re.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call(Oe,dt(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(ge,Re.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(ue,dt(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(pe,Re.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(oe,dt(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call(re,Re.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(U,dt(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(z,Re.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(P,dt(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(L,Re.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(T,dt(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(M,Re.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(p,dt(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(r,Re.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(g,dt(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(a,Re.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(I,Re.localize("Color"),`"></div>
        </li>
    </ul>
`)};function Pv(A){var I=Lv();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Lv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Rv=function(A){yt(a,A);var I=Pv(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"icon",makeSvgIcon:T,menuBarPosition:L,templateHtml:kv,usageStatistics:P}),p.iconType=null,p._iconMap={},p._els={registerIconButton:p.selector(".tie-icon-image-file"),addIconButton:p.selector(".tie-icon-add-button"),iconColorpicker:new ni(p.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics})},p.colorPickerInputBox=p._els.iconColorpicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX),p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),ln(this)}},{key:"addEvent",value:function(r){var p,M,T,L,P,z=K()(p=this._registerIconHandler).call(p,this),U=K()(M=this._addIconHandler).call(M,this);this.eventHandler={registerIcon:z,addIcon:U},this.actions=r,this._els.iconColorpicker.on("change",K()(T=this._changeColorHandler).call(T,this)),this._els.registerIconButton.addEventListener("change",z),this._els.addIconButton.addEventListener("click",U),this.colorPickerInputBox.addEventListener(Ee.FOCUS,K()(L=this._onStartEditingInputBox).call(L,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,K()(P=this._onStopEditingInputBox).call(P,this))}},{key:"_removeEvent",value:function(){var r,p;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,K()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,K()(p=this._onStopEditingInputBox).call(p,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var r=this;J()(Kr,function(p,M){r.actions.registerDefaultIcons(M,p)})}},{key:"setIconPickerColor",value:function(r){this._els.iconColorpicker.color=r}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(r){r=r||"transparent",this.actions.changeColor(r)}},{key:"_addIconHandler",value:function(r){var p=r.target.closest(".tui-image-editor-button");if(p){var M=p.getAttribute("data-icontype"),T=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(M),this.iconType===M?this.changeStandbyMode():(this.actions.addIcon(M,T),this.iconType=M)}}},{key:"_registerIconHandler",value:function(r){var p;en||alert("This browser does not support file-api");var M=ce(r.target.files,1),T=M[0];T&&(p=te().createObjectURL(T),this.actions.registerCustomIcon(p,T))}}]),a}(An),jv=Rv,Fv=function(A){var I,a,g,r,p,M=A.locale,T=A.makeSvgIcon;return W()(I=W()(a=W()(g=W()(r=W()(p=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(T(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(p,M.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(r,T(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(g,M.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(a,M.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(I,M.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function Bv(A){var I=zv();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function zv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Hv=.7,Uv=function(A){yt(a,A);var I=Bv(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon,L=r.menuBarPosition,P=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"draw",makeSvgIcon:T,menuBarPosition:L,templateHtml:Fv,usageStatistics:P}),p._els={lineSelectButton:p.selector(".tie-draw-line-select-button"),drawColorPicker:new ni(p.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics}),drawRange:new cn({slider:p.selector(".tie-draw-range"),input:p.selector(".tie-draw-range-value")},eo)},p.type=null,p.color=p._els.drawColorPicker.color,p.width=p._els.drawRange.value,p.colorPickerInputBox=p._els.drawColorPicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX),p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),ln(this)}},{key:"addEvent",value:function(r){var p,M,T,L,P;this.eventHandler.changeDrawType=K()(p=this._changeDrawType).call(p,this),this.actions=r,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",K()(M=this._changeDrawColor).call(M,this)),this._els.drawRange.on("change",K()(T=this._changeDrawRange).call(T,this)),this.colorPickerInputBox.addEventListener(Ee.FOCUS,K()(L=this._onStartEditingInputBox).call(L,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,K()(P=this._onStopEditingInputBox).call(P,this))}},{key:"_removeEvent",value:function(){var r,p;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,K()(r=this._onStartEditingInputBox).call(r,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,K()(p=this._onStopEditingInputBox).call(p,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:vr(this.color,Hv)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(r){var p=r.target.closest(".tui-image-editor-button");if(p){var M=this.getButtonType(p,["free","line"]);if(this.actions.discardSelection(),this.type===M){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=M,this._els.lineSelectButton.classList.add(M),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(r){this.color=r||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(r){this.width=r,this.type?this.setDrawMode():this.changeStartMode()}}]),a}(An),Vv=Uv,Wv=f(9886),Jc=f.n(Wv),Gv=function(A){var I,a,g,r,p,M,T,L,P,z,U,re,oe,pe,ue,ge,Oe=A.locale;return W()(I=W()(a=W()(g=W()(r=W()(p=W()(M=W()(T=W()(L=W()(P=W()(z=W()(U=W()(re=W()(oe=W()(pe=W()(ue=W()(ge=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat(Oe.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(ge,Oe.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(ue,Oe.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(pe,Oe.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(oe,Oe.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call(re,Oe.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(U,Oe.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(z,Oe.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(P,Oe.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(L,Oe.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(T,Oe.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(M,Oe.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(p,Oe.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(r,Oe.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(g,Oe.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(a,Oe.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(I,Oe.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)};function Yv(A){var I=Xv();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Xv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Qc="130px",Zv=["add","diff","subtract","multiply","screen","lighten","darken"],Kc=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],$v={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},qc=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],eu=["filterBlendColor","filterMultiplyColor","filterTintColor"],Jv=function(A){yt(a,A);var I=Yv(a);function a(g,r){var p,M=r.locale,T=r.menuBarPosition,L=r.usageStatistics;return Y(this,a),p=I.call(this,g,{locale:M,name:"filter",menuBarPosition:T,templateHtml:Gv,usageStatistics:L}),p.selectBoxShow=!1,p.checkedMap={},p._makeControlElement(),p}return ne(a,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),ln(this)}},{key:"_removeEvent",value:function(){var r=this,p;J()(Kc,function(M){var T=r.selector(".tie-".concat(M)),L=zt(M);T.removeEventListener("change",r.eventHandler[L])}),J()(W()(p=[]).call(p,qc,eu),function(M){r._els[M].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),Cr()(this.colorPickerInputBoxes,function(M){var T,L;M.removeEventListener(Ee.FOCUS,K()(T=r._onStartEditingInputBox).call(T,r)),M.removeEventListener(Ee.BLUR,K()(L=r._onStopEditingInputBox).call(L,r))},this)}},{key:"_destroyToolInstance",value:function(){var r,p=this;J()(W()(r=[]).call(r,qc,eu),function(M){p._els[M].destroy()})}},{key:"addEvent",value:function(r){var p=this,M,T,L,P=r.applyFilter,z=function(oe){var pe;return K()(pe=p._changeFilterState).call(pe,p,P,oe)},U=function(oe){return function(pe,ue){return p._changeFilterState(P,oe,ue)}};this.eventHandler={changeBlendFilter:z("blend"),blandTypeClick:function(oe){return oe.stopPropagation()}},J()(Kc,function(re){var oe=p.selector(".tie-".concat(re)),pe=zt(re);p.checkedMap[pe]=oe,p.eventHandler[pe]=z(pe),oe.addEventListener("change",p.eventHandler[pe])}),this._els.removewhiteDistanceRange.on("change",U("removeWhite")),this._els.colorfilterThresholdRange.on("change",U("colorFilter")),this._els.pixelateRange.on("change",U("pixelate")),this._els.noiseRange.on("change",U("noise")),this._els.brightnessRange.on("change",U("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",z("multiply")),this._els.filterTintColor.on("change",z("tint")),this._els.tintOpacity.on("change",U("tint")),this._els.filterMultiplyColor.on("changeShow",K()(M=this.colorPickerChangeShow).call(M,this)),this._els.filterTintColor.on("changeShow",K()(T=this.colorPickerChangeShow).call(T,this)),this._els.filterBlendColor.on("changeShow",K()(L=this.colorPickerChangeShow).call(L,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),Cr()(this.colorPickerInputBoxes,function(re){var oe,pe;re.addEventListener(Ee.FOCUS,K()(oe=p._onStartEditingInputBox).call(oe,p)),re.addEventListener(Ee.BLUR,K()(pe=p._onStopEditingInputBox).call(pe,p))},this)}},{key:"setFilterState",value:function(r){var p=r.type,M=r.options,T=r.action,L=this._getFilterNameFromOptions(p,M),P=T==="remove";P||this._setFilterState(L,M),this.checkedMap[L].checked=!P}},{key:"initFilterCheckBoxState",value:function(){J()(this.checkedMap,function(r){r.checked=!1},this)}},{key:"_setFilterState",value:function(r,p){r==="colorFilter"?this._els.colorfilterThresholdRange.value=p.distance:r==="removeWhite"?this._els.removewhiteDistanceRange.value=p.distance:r==="pixelate"?this._els.pixelateRange.value=p.blocksize:r==="brightness"?this._els.brightnessRange.value=p.brightness:r==="noise"?this._els.noiseRange.value=p.noise:r==="tint"?(this._els.tintOpacity.value=p.alpha,this._els.filterTintColor.color=p.color):r==="blend"?this._els.filterBlendColor.color=p.color:r==="multiply"&&(this._els.filterMultiplyColor.color=p.color)}},{key:"_getFilterNameFromOptions",value:function(r,p){var M=r;return r==="removeColor"?M=Jc()(p.useAlpha)?"removeWhite":"colorFilter":r==="blendColor"&&(M={add:"blend",multiply:"multiply",tint:"tint"}[p.mode]),M}},{key:"_changeFilterState",value:function(r,p){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,T=this.checkedMap[p].checked,L=$v[p],P=this.checkedMap[p].closest(".tui-image-editor-checkbox-group");P&&(T?P.classList.remove("tui-image-editor-disabled"):P.classList.add("tui-image-editor-disabled")),r(T,L,this._getFilterOption(p),!M)}},{key:"_getFilterOption",value:function(r){var p={};switch(r){case"removeWhite":p.color="#FFFFFF",p.useAlpha=!1,p.distance=ti()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":p.color="#FFFFFF",p.distance=ti()(this._els.colorfilterThresholdRange.value);break;case"pixelate":p.blocksize=ke(this._els.pixelateRange.value);break;case"noise":p.noise=ke(this._els.noiseRange.value);break;case"brightness":p.brightness=ti()(this._els.brightnessRange.value);break;case"blend":p.mode="add",p.color=this._els.filterBlendColor.color,p.mode=this._els.blendType.value;break;case"multiply":p.mode="multiply",p.color=this._els.filterMultiplyColor.color;break;case"tint":p.mode="tint",p.color=this._els.filterTintColor.color,p.alpha=this._els.tintOpacity.value;break;case"blur":p.blur=this._els.blurRange.value;break;default:break}return p}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new cn({slider:this.selector(".tie-removewhite-distance-range")},wn.removewhiteDistanceRange),brightnessRange:new cn({slider:this.selector(".tie-brightness-range")},wn.brightnessRange),noiseRange:new cn({slider:this.selector(".tie-noise-range")},wn.noiseRange),pixelateRange:new cn({slider:this.selector(".tie-pixelate-range")},wn.pixelateRange),colorfilterThresholdRange:new cn({slider:this.selector(".tie-colorfilter-threshold-range")},wn.colorfilterThresholdRange),filterTintColor:new ni(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new ni(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new ni(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:wn.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(r){var p=document.createElement("div"),M=document.createElement("label"),T=document.createElement("div");return T.id="tie-filter-tint-opacity",M.innerHTML="Opacity",p.appendChild(M),p.appendChild(T),r.appendChild(p),r.style.height=Qc,new cn({slider:T},wn.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(r){var p=document.createElement("div"),M=document.createElement("select"),T=document.createElement("ul");return p.className="tui-image-editor-selectlist-wrap",T.className="tui-image-editor-selectlist",p.appendChild(M),p.appendChild(T),this._makeSelectOptionList(M),r.appendChild(p),r.style.height=Qc,this._drawSelectOptionList(M,T),this._pickerWithSelectboxForAddEvent(M,T),M}},{key:"_drawSelectOptionList",value:function(r,p){var M=r.querySelectorAll("option");J()(M,function(T){var L=document.createElement("li");L.innerHTML=T.innerHTML,L.setAttribute("data-item",T.value),p.appendChild(L)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(r,p){var M=this;p.addEventListener("click",function(T){var L=T.target.getAttribute("data-item"),P=document.createEvent("HTMLEvents");r.querySelector('[value="'.concat(L,'"]')).selected=!0,P.initEvent("change",!0,!0),r.dispatchEvent(P),M.selectBoxShow=!1,p.style.display="none"}),r.addEventListener("mousedown",function(T){T.preventDefault(),M.selectBoxShow=!M.selectBoxShow,p.style.display=M.selectBoxShow?"block":"none",p.setAttribute("data-selectitem",r.value),p.querySelector("[data-item='".concat(r.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(r){J()(Zv,function(p){var M=document.createElement("option");M.setAttribute("value",p),M.innerHTML=p.replace(/^[a-z]/,function(T){return T.toUpperCase()}),r.appendChild(M)})}}]),a}(An),Qv=Jv,Kv=f(4383),qv=f.n(Kv),em=function(){function A(I,a){var g=a.name;Y(this,A),this.name=g,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),I.appendChild(this.panelElement)}return ne(A,[{key:"_makePanelElement",value:function(){var a=document.createElement("div");return a.className="tie-panel-".concat(this.name),a}},{key:"_makeListElement",value:function(){var a=document.createElement("ol");return a.className="".concat(this.name,"-list"),a}},{key:"makeListItemElement",value:function(a){var g=document.createElement("li");return g.innerHTML=a,g.className="".concat(this.name,"-item"),g.setAttribute("data-index",this.items.length),g}},{key:"pushListItemElement",value:function(a){this.listElement.appendChild(a),this.listElement.scrollTop+=a.offsetHeight,this.items.push(a)}},{key:"deleteListItemElement",value:function(a,g){for(var r=this.items,p=a;p<g;p+=1)this.listElement.removeChild(r[p]);N()(r).call(r,a,g-a+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(a,g){this.items[a]&&this.items[a].classList.add(g)}},{key:"removeClass",value:function(a,g){this.items[a]&&this.items[a].classList.remove(g)}},{key:"toggleClass",value:function(a,g){this.items[a]&&this.items[a].classList.toggle(g)}}]),A}(),tm=em,nm=function(A){var I,a,g,r=A.locale,p=A.makeSvgIcon,M=A.name,T=A.detail;return W()(I=W()(a=W()(g=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(p(["normal","active"],"history-".concat(M.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(g,r.localize(M),`
            `)).call(a,T?"(".concat(r.localize(T),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(I,p(["normal"],"history-check",!0),`
        </div>
    </div>
`)};function im(A){var I=rm();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function rm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var om="history-item",tu="selected-item",nu="disabled-item",sm=function(A){yt(a,A);var I=im(a);function a(g,r){var p,M=r.locale,T=r.makeSvgIcon;return Y(this,a),p=I.call(this,g,{name:"history"}),g.classList.add("enabled"),p.locale=M,p.makeSvgIcon=T,p._eventHandler={},p._historyIndex=p.getListLength(),p}return ne(a,[{key:"add",value:function(r){var p=r.name,M=r.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var T=nm({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:p,detail:M}),L=this.makeListItemElement(T);this.pushListItemElement(L),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var r=this;this._eventHandler.history=function(p){return r._clickHistoryItem(p)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(r){var p=r.target,M=p.closest(".".concat(om));if(M){var T=qv()(M.getAttribute("data-index"),10);if(T!==this._historyIndex){var L=Math.abs(T-this._historyIndex);T<this._historyIndex?this._actions.undo(L):this._actions.redo(L)}}}},{key:"_selectItem",value:function(r){for(var p=0;p<this.getListLength();p+=1)this.removeClass(p,tu),this.removeClass(p,nu),p>r&&this.addClass(p,nu);this.addClass(r,tu)}},{key:"destroy",value:function(){this.removeEvent(),ln(this)}},{key:"addEvent",value:function(r){this._actions=r,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),a}(tm),am=sm,lm=function(){function A(I){Y(this,A),this._locale=I}return ne(A,[{key:"localize",value:function(a){return this._locale[a]||a}}]),A}(),cm=lm,um={Shape:ev,Crop:ov,Resize:uv,Flip:pv,Rotate:Sv,Text:_v,Mask:Nv,Icon:jv,Draw:Vv,Filter:Qv},fm="1300",iu="history",dm="tie-panel-history",Ir="on",br={ZOOM_IN:"zoomIn",HAND:"hand"},ru=function(){function A(I,a,g){Y(this,A),this.options=this._initializeOption(a),this._actions=g,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new cm(this.options.locale),this.theme=new zp(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(I),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return ne(A,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",ln(this)}},{key:"setUiDefaultSelectionStyle",value:function(a){return Z()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},a)}},{key:"resizeEditor",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=a.uiSize,r=a.imageSize,p=r===void 0?this.imageSize:r;p!==this.imageSize&&(this.imageSize=p),g&&this._setUiSize(g);var M=this._getCanvasMaxDimension(),T=M.width,L=M.height,P=this._editorElement.style,z=this.options.menuBarPosition;P.height="".concat(L,"px"),P.width="".concat(T,"px"),this._setEditorPosition(z),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var U=this._selectedElement.classList;z==="top"&&this._selectedElement.offsetWidth<fm?U.add("tui-image-editor-top-optimization"):U.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(a){var g=this._buttonElements[a].classList;g.toggle(Ir),a===br.ZOOM_IN?this._buttonElements[br.HAND].classList.remove(Ir):this._buttonElements[br.ZOOM_IN].classList.remove(Ir)}},{key:"offZoomInButtonStatus",value:function(){var a=this._buttonElements[br.ZOOM_IN].classList;a.remove(Ir)}},{key:"changeHandButtonStatus",value:function(a){var g=this._buttonElements[br.HAND].classList;g[a?"add":"remove"](Ir)}},{key:"changeHelpButtonEnabled",value:function(a,g){var r=this._buttonElements[a].classList;r[g?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(a){return Z()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},a)}},{key:"_setUiSize",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,g=this._selectedElement.style;g.width=a.width,g.height=a.height}},{key:"_makeSubMenu",value:function(){var a=this;J()(this.options.menu,function(g){var r,p=um[g.replace(/^[a-z]/,function(M){return M.toUpperCase()})];a._makeMenuElement(g),a._buttonElements[g]=a._menuBarElement.querySelector(".tie-btn-".concat(g)),a[g]=new p(a._subMenuElement,{locale:a._locale,makeSvgIcon:K()(r=a.theme.makeMenSvgIconSet).call(r,a.theme),menuBarPosition:a.options.menuBarPosition,usageStatistics:a.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var a,g,r;this.on(Ee.EXECUTE_COMMAND,K()(a=this._addHistory).call(a,this)),this.on(Ee.AFTER_UNDO,K()(g=this._selectPrevHistory).call(g,this)),this.on(Ee.AFTER_REDO,K()(r=this._selectNextHistory).call(r,this))}},{key:"_attachZoomEvent",value:function(){var a=this;this.on(Ee.HAND_STARTED,function(){a.offZoomInButtonStatus(),a.changeHandButtonStatus(!0)}),this.on(Ee.HAND_STOPPED,function(){return a.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(a){var g,r;a.nodeType?r=a:r=document.querySelector(a);var p=mr(r);r.classList.add("tui-image-editor-container"),r.innerHTML=Pp({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+kp({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=r,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=p(".tui-image-editor-main"),this._editorElementWrap=p(".tui-image-editor-wrap"),this._editorElement=p(".tui-image-editor"),this._helpMenuBarElement=p(".tui-image-editor-help-menu"),this._menuBarElement=p(".tui-image-editor-menu"),this._subMenuElement=p(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new am(this._buttonElements[iu],{locale:this._locale,makeSvgIcon:K()(g=this.theme.makeMenSvgIconSet).call(g,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var a=this;J()(vt,function(g){a.changeHelpButtonEnabled(g,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var a;return W()(a=[]).call(a,B(vt),[""],B(Nt),[""],B(Ut))}},{key:"_addHelpMenus",value:function(){var a=this,g=this._makeHelpMenuWithPartition();J()(g,function(r){r?(a._makeMenuElement(r,["normal","disabled","hover"],"help"),a._buttonElements[r]=a._helpMenuBarElement.querySelector(".tie-btn-".concat(r))):a._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var a=document.createElement("li"),g=document.createElement("div");a.className=oo("item"),g.className=oo("icpartition"),a.appendChild(g),this._helpMenuBarElement.appendChild(a)}},{key:"_makeMenuElement",value:function(a){var g,r,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",T=document.createElement("li"),L=this.theme.makeMenSvgIconSet(p,a);this._addTooltipAttribute(T,a),T.className=W()(g=W()(r="tie-btn-".concat(a," ")).call(r,oo("item")," ")).call(g,M),T.innerHTML=L,M==="normal"?this._menuBarElement.appendChild(T):this._helpMenuBarElement.appendChild(T)}},{key:"_addHelpActionEvent",value:function(){var a=this;J()(we,function(g){a.eventHandler[g]=function(r){return a._actions.main[g](r)},a._buttonElements[g].addEventListener("click",a.eventHandler[g])})}},{key:"_removeHelpActionEvent",value:function(){var a=this;J()(we,function(g){a._buttonElements[g].removeEventListener("click",a.eventHandler[g])})}},{key:"_addHistory",value:function(a){if(!bp(a)){var g=typeof a=="string"?{name:a}:Sp(a);this._historyMenu.add(g)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(a){var g=a.target,r=g.closest(".".concat(dm));if(!r){var p=this._buttonElements[iu].classList;p.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(a,g){a.setAttribute("tooltip-content",this._locale.localize(g.replace(/^[a-z]/g,function(r){return r.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var a=this;this.eventHandler.download=function(){return a._actions.main.download()},J()(this._buttonElements.download,function(g){g.addEventListener("click",a.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var a=this;J()(this._buttonElements.download,function(g){g.removeEventListener("click",a.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var a=this;this.eventHandler.loadImage=function(g){return a._actions.main.load(g.target.files[0])},J()(this._buttonElements.load,function(g){g.addEventListener("change",a.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var a=this;J()(this._buttonElements.load,function(g){g.removeEventListener("change",a.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(a){var g=this;this.eventHandler[a]=function(){return g.changeMenu(a)},this._buttonElements[a].addEventListener("click",this.eventHandler[a])}},{key:"_addSubMenuEvent",value:function(a){var g=this;this[a].addEvent(this._actions[a]),this[a].on(Ee.INPUT_BOX_EDITING_STARTED,function(){return g.fire(Ee.INPUT_BOX_EDITING_STARTED)}),this[a].on(Ee.INPUT_BOX_EDITING_STOPPED,function(){return g.fire(Ee.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var a=this;J()(this.options.menu,function(g){a._addMainMenuEvent(g),a._addSubMenuEvent(g)})}},{key:"_removeMainMenuEvent",value:function(){var a=this;J()(this.options.menu,function(g){a._buttonElements[g].removeEventListener("click",a.eventHandler[g]),a[g].off(Ee.INPUT_BOX_EDITING_STARTED),a[g].off(Ee.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var a=this;J()(this.options.menu,function(g){a[g].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var a=this,g=this._getLoadImage();g.path&&this._actions.main.initLoadImage(g.path,g.name).then(function(){a.activeMenuEvent()}),this._addLoadEvent();var r=document.createElement("div");r.className=oo("grid-visual");var p=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;r.innerHTML=p,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(r)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(a){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(a,g,r),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(a,g,r){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),r&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===a&&g?this.submenu=null:(this._buttonElements[a].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(a)),this.submenu=a,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(a)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var a=this._editorContainerElement.style,g=a.maxWidth,r=a.maxHeight,p=ti()(g),M=ti()(r);return{width:p,height:M}}},{key:"_setEditorPosition",value:function(a){var g=this._getCanvasMaxDimension(),r=g.width,p=g.height,M=this._editorElement.style,T=0,L=0;this.submenu&&(a==="bottom"?p>this._editorElementWrap.scrollHeight-150?T=(p-this._editorElementWrap.scrollHeight)/2:T=150/2*-1:a==="top"?p>this._editorElementWrap.offsetHeight-150?T=150/2-(p-(this._editorElementWrap.offsetHeight-150))/2:T=150/2:a==="left"?r>this._editorElementWrap.offsetWidth-248?L=248/2-(r-(this._editorElementWrap.offsetWidth-248))/2:L=248/2:a==="right"&&(r>this._editorElementWrap.scrollWidth-248?L=(r-this._editorElementWrap.scrollWidth)/2:L=248/2*-1)),M.top="".concat(T,"px"),M.left="".concat(L,"px")}}]),A}();ve().mixin(ru);var hm=ru,gm=f(381),ji=f.n(gm),ou=function(){function A(){Y(this,A),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return ne(A,[{key:"imageToSVG",value:function(a,g,r){var p=this;r=this.checkoptions(r),this.loadImage(a,function(M){g(p.imagedataToSVG(p.getImgdata(M),r))},r)}},{key:"imagedataToSVG",value:function(a,g){g=this.checkoptions(g);var r=this.imagedataToTracedata(a,g);return this.getsvgstring(r,g)}},{key:"imageToTracedata",value:function(a,g,r){var p=this;r=this.checkoptions(r),this.loadImage(a,function(M){g(p.imagedataToTracedata(p.getImgdata(M),r))},r)}},{key:"imagedataToTracedata",value:function(a,g){g=this.checkoptions(g);var r=this.colorquantization(a,g),p;if(g.layering===0){p={layers:[],palette:r.palette,width:r.array[0].length-2,height:r.array.length-2};for(var M=0;M<r.palette.length;M+=1){var T=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(r,M),g.pathomit),g),g.ltres,g.qtres);p.layers.push(T)}}else{var L=this.layering(r);g.layercontainerid&&this.drawLayers(L,this.specpalette,g.scale,g.layercontainerid);var P=this.batchpathscan(L,g.pathomit),z=this.batchinternodes(P,g);p={layers:this.batchtracelayers(z,g.ltres,g.qtres),palette:r.palette,width:a.width,height:a.height}}return p}},{key:"checkoptions",value:function(a){a=a||{},typeof a=="string"&&(a=a.toLowerCase(),this.optionpresets[a]?a=this.optionpresets[a]:a={});for(var g=De()(this.optionpresets.default),r=0;r<g.length;r+=1)a.hasOwnProperty(g[r])||(a[g[r]]=this.optionpresets.default[g[r]]);return a}},{key:"colorquantization",value:function(a,g){var r=[],p=0,M,T,L,P=[],z=a.width*a.height,U,re,oe,pe,ue;for(re=0;re<a.height+2;re+=1)for(r[re]=[],U=0;U<a.width+2;U+=1)r[re][U]=-1;for(g.pal?ue=g.pal:g.colorsampling===0?ue=this.generatepalette(g.numberofcolors):g.colorsampling===1?ue=this.samplepalette(g.numberofcolors,a):ue=this.samplepalette2(g.numberofcolors,a),g.blurradius>0&&(a=this.blur(a,g.blurradius,g.blurdelta)),pe=0;pe<g.colorquantcycles;pe+=1){if(pe>0)for(oe=0;oe<ue.length;oe+=1)P[oe].n>0&&(ue[oe]={r:Math.floor(P[oe].r/P[oe].n),g:Math.floor(P[oe].g/P[oe].n),b:Math.floor(P[oe].b/P[oe].n),a:Math.floor(P[oe].a/P[oe].n)}),P[oe].n/z<g.mincolorratio&&pe<g.colorquantcycles-1&&(ue[oe]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(U=0;U<ue.length;U+=1)P[U]={r:0,g:0,b:0,a:0,n:0};for(re=0;re<a.height;re+=1)for(U=0;U<a.width;U+=1){for(p=(re*a.width+U)*4,L=0,T=1024,oe=0;oe<ue.length;oe+=1)M=Math.abs(ue[oe].r-a.data[p])+Math.abs(ue[oe].g-a.data[p+1])+Math.abs(ue[oe].b-a.data[p+2])+Math.abs(ue[oe].a-a.data[p+3]),M<T&&(T=M,L=oe);P[L].r+=a.data[p],P[L].g+=a.data[p+1],P[L].b+=a.data[p+2],P[L].a+=a.data[p+3],P[L].n+=1,r[re+1][U+1]=L}}return{array:r,palette:ue}}},{key:"samplepalette",value:function(a,g){for(var r,p=[],M=0;M<a;M+=1)r=Math.floor(Math.random()*g.data.length/4)*4,p.push({r:g.data[r],g:g.data[r+1],b:g.data[r+2],a:g.data[r+3]});return p}},{key:"samplepalette2",value:function(a,g){for(var r,p=[],M=Math.ceil(Math.sqrt(a)),T=Math.ceil(a/M),L=g.width/(M+1),P=g.height/(T+1),z=0;z<T;z+=1)for(var U=0;U<M&&p.length!==a;U+=1)r=Math.floor((z+1)*P*g.width+(U+1)*L)*4,p.push({r:g.data[r],g:g.data[r+1],b:g.data[r+2],a:g.data[r+3]});return p}},{key:"generatepalette",value:function(a){var g=[],r,p,M;if(a<8)for(var T=Math.floor(255/(a-1)),L=0;L<a;L+=1)g.push({r:L*T,g:L*T,b:L*T,a:255});else{var P=Math.floor(Math.pow(a,.3333333333333333)),z=Math.floor(255/(P-1)),U=a-P*P*P;for(r=0;r<P;r+=1)for(p=0;p<P;p+=1)for(M=0;M<P;M+=1)g.push({r:r*z,g:p*z,b:M*z,a:255});for(r=0;r<U;r+=1)g.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return g}},{key:"layering",value:function(a){var g=[],r=0,p=a.array.length,M=a.array[0].length,T,L,P,z,U,re,oe,pe,ue,ge,Oe;for(Oe=0;Oe<a.palette.length;Oe+=1)for(g[Oe]=[],ge=0;ge<p;ge+=1)for(g[Oe][ge]=[],ue=0;ue<M;ue+=1)g[Oe][ge][ue]=0;for(ge=1;ge<p-1;ge+=1)for(ue=1;ue<M-1;ue+=1)r=a.array[ge][ue],T=a.array[ge-1][ue-1]===r?1:0,L=a.array[ge-1][ue]===r?1:0,P=a.array[ge-1][ue+1]===r?1:0,z=a.array[ge][ue-1]===r?1:0,U=a.array[ge][ue+1]===r?1:0,re=a.array[ge+1][ue-1]===r?1:0,oe=a.array[ge+1][ue]===r?1:0,pe=a.array[ge+1][ue+1]===r?1:0,g[r][ge+1][ue+1]=1+U*2+pe*4+oe*8,z||(g[r][ge+1][ue]=2+oe*4+re*8),L||(g[r][ge][ue+1]=0+P*2+U*4+8),T||(g[r][ge][ue]=0+L*2+4+z*8);return g}},{key:"layeringstep",value:function(a,g){var r=[],p=a.array.length,M=a.array[0].length,T,L;for(L=0;L<p;L+=1)for(r[L]=[],T=0;T<M;T+=1)r[L][T]=0;for(L=1;L<p;L+=1)for(T=1;T<M;T+=1)r[L][T]=(a.array[L-1][T-1]===g?1:0)+(a.array[L-1][T]===g?2:0)+(a.array[L][T-1]===g?8:0)+(a.array[L][T]===g?4:0);return r}},{key:"pathscan",value:function(a,g){for(var r=[],p=0,M=0,T=0,L=0,P=a[0].length,z=a.length,U=0,re=!0,oe=!1,pe,ue=0;ue<z;ue+=1)for(var ge=0;ge<P;ge+=1)if(a[ue][ge]===4||a[ue][ge]===11)for(T=ge,L=ue,r[p]={},r[p].points=[],r[p].boundingbox=[T,L,T,L],r[p].holechildren=[],re=!1,M=0,oe=a[ue][ge]===11,U=1;!re;){if(r[p].points[M]={},r[p].points[M].x=T-1,r[p].points[M].y=L-1,r[p].points[M].t=a[L][T],T-1<r[p].boundingbox[0]&&(r[p].boundingbox[0]=T-1),T-1>r[p].boundingbox[2]&&(r[p].boundingbox[2]=T-1),L-1<r[p].boundingbox[1]&&(r[p].boundingbox[1]=L-1),L-1>r[p].boundingbox[3]&&(r[p].boundingbox[3]=L-1),pe=this.pathscan_combined_lookup[a[L][T]][U],a[L][T]=pe[0],U=pe[1],T+=pe[2],L+=pe[3],T-1===r[p].points[0].x&&L-1===r[p].points[0].y)if(re=!0,r[p].points.length<g)r.pop();else{if(r[p].isholepath=!!oe,oe){for(var Oe=0,Je=[-1,-1,P+1,z+1],Qe=0;Qe<p;Qe++)!r[Qe].isholepath&&this.boundingboxincludes(r[Qe].boundingbox,r[p].boundingbox)&&this.boundingboxincludes(Je,r[Qe].boundingbox)&&(Oe=Qe,Je=r[Qe].boundingbox);r[Oe].holechildren.push(p)}p+=1}M+=1}return r}},{key:"boundingboxincludes",value:function(a,g){return a[0]<g[0]&&a[1]<g[1]&&a[2]>g[2]&&a[3]>g[3]}},{key:"batchpathscan",value:function(a,g){var r=[];for(var p in a)a.hasOwnProperty(p)&&(r[p]=this.pathscan(a[p],g));return r}},{key:"internodes",value:function(a,g){var r=[],p=0,M=0,T=0,L=0,P=0,z,U;for(z=0;z<a.length;z+=1)for(r[z]={},r[z].points=[],r[z].boundingbox=a[z].boundingbox,r[z].holechildren=a[z].holechildren,r[z].isholepath=a[z].isholepath,p=a[z].points.length,U=0;U<p;U+=1)M=(U+1)%p,T=(U+2)%p,L=(U-1+p)%p,P=(U-2+p)%p,g.rightangleenhance&&this.testrightangle(a[z],P,L,U,M,T)&&(r[z].points.length>0&&(r[z].points[r[z].points.length-1].linesegment=this.getdirection(r[z].points[r[z].points.length-1].x,r[z].points[r[z].points.length-1].y,a[z].points[U].x,a[z].points[U].y)),r[z].points.push({x:a[z].points[U].x,y:a[z].points[U].y,linesegment:this.getdirection(a[z].points[U].x,a[z].points[U].y,(a[z].points[U].x+a[z].points[M].x)/2,(a[z].points[U].y+a[z].points[M].y)/2)})),r[z].points.push({x:(a[z].points[U].x+a[z].points[M].x)/2,y:(a[z].points[U].y+a[z].points[M].y)/2,linesegment:this.getdirection((a[z].points[U].x+a[z].points[M].x)/2,(a[z].points[U].y+a[z].points[M].y)/2,(a[z].points[M].x+a[z].points[T].x)/2,(a[z].points[M].y+a[z].points[T].y)/2)});return r}},{key:"testrightangle",value:function(a,g,r,p,M,T){return a.points[p].x===a.points[g].x&&a.points[p].x===a.points[r].x&&a.points[p].y===a.points[M].y&&a.points[p].y===a.points[T].y||a.points[p].y===a.points[g].y&&a.points[p].y===a.points[r].y&&a.points[p].x===a.points[M].x&&a.points[p].x===a.points[T].x}},{key:"getdirection",value:function(a,g,r,p){var M=8;return a<r?g<p?M=1:g>p?M=7:M=0:a>r?g<p?M=3:g>p?M=5:M=4:g<p?M=2:g>p?M=6:M=8,M}},{key:"batchinternodes",value:function(a,g){var r=[];for(var p in a)a.hasOwnProperty(p)&&(r[p]=this.internodes(a[p],g));return r}},{key:"tracepath",value:function(a,g,r){var p=0,M,T,L,P={};for(P.segments=[],P.boundingbox=a.boundingbox,P.holechildren=a.holechildren,P.isholepath=a.isholepath;p<a.points.length;){var z;for(M=a.points[p].linesegment,T=-1,L=p+1;(a.points[L].linesegment===M||a.points[L].linesegment===T||T===-1)&&L<a.points.length-1;)a.points[L].linesegment!==M&&T===-1&&(T=a.points[L].linesegment),L+=1;L===a.points.length-1&&(L=0),P.segments=W()(z=P.segments).call(z,this.fitseq(a,g,r,p,L)),L>0?p=L:p=a.points.length}return P}},{key:"fitseq",value:function(a,g,r,p,M){var T;if(M>a.points.length||M<0)return[];var L=p,P=0,z=!0,U,re,oe,pe=M-p;pe<0&&(pe+=a.points.length);for(var ue=(a.points[M].x-a.points[p].x)/pe,ge=(a.points[M].y-a.points[p].y)/pe,Oe=(p+1)%a.points.length,Je;Oe!=M;)Je=Oe-p,Je<0&&(Je+=a.points.length),U=a.points[p].x+ue*Je,re=a.points[p].y+ge*Je,oe=(a.points[Oe].x-U)*(a.points[Oe].x-U)+(a.points[Oe].y-re)*(a.points[Oe].y-re),oe>g&&(z=!1),oe>P&&(L=Oe,P=oe),Oe=(Oe+1)%a.points.length;if(z)return[{type:"L",x1:a.points[p].x,y1:a.points[p].y,x2:a.points[M].x,y2:a.points[M].y}];var Qe=L;z=!0,P=0;var Ke=(Qe-p)/pe,Re=(1-Ke)*(1-Ke),dt=2*(1-Ke)*Ke,Gt=Ke*Ke,on=(Re*a.points[p].x+Gt*a.points[M].x-a.points[Qe].x)/-dt,mn=(Re*a.points[p].y+Gt*a.points[M].y-a.points[Qe].y)/-dt;for(Oe=p+1;Oe!=M;)Ke=(Oe-p)/pe,Re=(1-Ke)*(1-Ke),dt=2*(1-Ke)*Ke,Gt=Ke*Ke,U=Re*a.points[p].x+dt*on+Gt*a.points[M].x,re=Re*a.points[p].y+dt*mn+Gt*a.points[M].y,oe=(a.points[Oe].x-U)*(a.points[Oe].x-U)+(a.points[Oe].y-re)*(a.points[Oe].y-re),oe>r&&(z=!1),oe>P&&(L=Oe,P=oe),Oe=(Oe+1)%a.points.length;if(z)return[{type:"Q",x1:a.points[p].x,y1:a.points[p].y,x2:on,y2:mn,x3:a.points[M].x,y3:a.points[M].y}];var Lt=Qe;return W()(T=this.fitseq(a,g,r,p,Lt)).call(T,this.fitseq(a,g,r,Lt,M))}},{key:"batchtracepaths",value:function(a,g,r){var p=[];for(var M in a)a.hasOwnProperty(M)&&p.push(this.tracepath(a[M],g,r));return p}},{key:"batchtracelayers",value:function(a,g,r){var p=[];for(var M in a)a.hasOwnProperty(M)&&(p[M]=this.batchtracepaths(a[M],g,r));return p}},{key:"roundtodec",value:function(a,g){return Number(a.toFixed(g))}},{key:"svgpathstring",value:function(a,g,r,p){var M,T,L=a.layers[g],P=L[r],z="",U;if(p.linefilter&&P.segments.length<3)return z;if(z=W()(M="<path ".concat(p.desc?W()(T='desc="l '.concat(g," p ")).call(T,r,'" '):"")).call(M,this.tosvgcolorstr(a.palette[g],p),'d="'),p.roundcoords===-1){var re;for(z+=W()(re="M ".concat(P.segments[0].x1*p.scale," ")).call(re,P.segments[0].y1*p.scale," "),U=0;U<P.segments.length;U++){var oe,pe;if(z+=W()(oe=W()(pe="".concat(P.segments[U].type," ")).call(pe,P.segments[U].x2*p.scale," ")).call(oe,P.segments[U].y2*p.scale," "),P.segments[U].hasOwnProperty("x3")){var ue;z+=W()(ue="".concat(P.segments[U].x3*p.scale," ")).call(ue,P.segments[U].y3*p.scale," ")}}z+="Z "}else{var ge;for(z+=W()(ge="M ".concat(this.roundtodec(P.segments[0].x1*p.scale,p.roundcoords)," ")).call(ge,this.roundtodec(P.segments[0].y1*p.scale,p.roundcoords)," "),U=0;U<P.segments.length;U++){var Oe,Je;if(z+=W()(Oe=W()(Je="".concat(P.segments[U].type," ")).call(Je,this.roundtodec(P.segments[U].x2*p.scale,p.roundcoords)," ")).call(Oe,this.roundtodec(P.segments[U].y2*p.scale,p.roundcoords)," "),P.segments[U].hasOwnProperty("x3")){var Qe;z+=W()(Qe="".concat(this.roundtodec(P.segments[U].x3*p.scale,p.roundcoords)," ")).call(Qe,this.roundtodec(P.segments[U].y3*p.scale,p.roundcoords)," ")}}z+="Z "}for(var Ke=0;Ke<P.holechildren.length;Ke++){var Re=L[P.holechildren[Ke]];if(p.roundcoords===-1){if(Re.segments[Re.segments.length-1].hasOwnProperty("x3")){var dt;z+=W()(dt="M ".concat(Re.segments[Re.segments.length-1].x3*p.scale," ")).call(dt,Re.segments[Re.segments.length-1].y3*p.scale," ")}else{var Gt;z+=W()(Gt="M ".concat(Re.segments[Re.segments.length-1].x2*p.scale," ")).call(Gt,Re.segments[Re.segments.length-1].y2*p.scale," ")}for(U=Re.segments.length-1;U>=0;U--){var on;if(z+="".concat(Re.segments[U].type," "),Re.segments[U].hasOwnProperty("x3")){var mn;z+=W()(mn="".concat(Re.segments[U].x2*p.scale," ")).call(mn,Re.segments[U].y2*p.scale," ")}z+=W()(on="".concat(Re.segments[U].x1*p.scale," ")).call(on,Re.segments[U].y1*p.scale," ")}}else{if(Re.segments[Re.segments.length-1].hasOwnProperty("x3")){var Lt;z+=W()(Lt="M ".concat(this.roundtodec(Re.segments[Re.segments.length-1].x3*p.scale)," ")).call(Lt,this.roundtodec(Re.segments[Re.segments.length-1].y3*p.scale)," ")}else{var ri;z+=W()(ri="M ".concat(this.roundtodec(Re.segments[Re.segments.length-1].x2*p.scale)," ")).call(ri,this.roundtodec(Re.segments[Re.segments.length-1].y2*p.scale)," ")}for(U=Re.segments.length-1;U>=0;U--){var oi;if(z+="".concat(Re.segments[U].type," "),Re.segments[U].hasOwnProperty("x3")){var tn;z+=W()(tn="".concat(this.roundtodec(Re.segments[U].x2*p.scale)," ")).call(tn,this.roundtodec(Re.segments[U].y2*p.scale)," ")}z+=W()(oi="".concat(this.roundtodec(Re.segments[U].x1*p.scale)," ")).call(oi,this.roundtodec(Re.segments[U].y1*p.scale)," ")}}z+="Z "}if(z+='" />',p.lcpr||p.qcpr){for(U=0;U<P.segments.length;U++){if(P.segments[U].hasOwnProperty("x3")&&p.qcpr){var vo,mo,yo,Co,Io,bo,So,Do,xo,Eo,Mo,_o,wo,To;z+=W()(vo=W()(mo=W()(yo='<circle cx="'.concat(P.segments[U].x2*p.scale,'" cy="')).call(yo,P.segments[U].y2*p.scale,'" r="')).call(mo,p.qcpr,'" fill="cyan" stroke-width="')).call(vo,p.qcpr*.2,'" stroke="black" />'),z+=W()(Co=W()(Io=W()(bo='<circle cx="'.concat(P.segments[U].x3*p.scale,'" cy="')).call(bo,P.segments[U].y3*p.scale,'" r="')).call(Io,p.qcpr,'" fill="white" stroke-width="')).call(Co,p.qcpr*.2,'" stroke="black" />'),z+=W()(So=W()(Do=W()(xo=W()(Eo='<line x1="'.concat(P.segments[U].x1*p.scale,'" y1="')).call(Eo,P.segments[U].y1*p.scale,'" x2="')).call(xo,P.segments[U].x2*p.scale,'" y2="')).call(Do,P.segments[U].y2*p.scale,'" stroke-width="')).call(So,p.qcpr*.2,'" stroke="cyan" />'),z+=W()(Mo=W()(_o=W()(wo=W()(To='<line x1="'.concat(P.segments[U].x2*p.scale,'" y1="')).call(To,P.segments[U].y2*p.scale,'" x2="')).call(wo,P.segments[U].x3*p.scale,'" y2="')).call(_o,P.segments[U].y3*p.scale,'" stroke-width="')).call(Mo,p.qcpr*.2,'" stroke="cyan" />')}if(!P.segments[U].hasOwnProperty("x3")&&p.lcpr){var Ao,Oo,No;z+=W()(Ao=W()(Oo=W()(No='<circle cx="'.concat(P.segments[U].x2*p.scale,'" cy="')).call(No,P.segments[U].y2*p.scale,'" r="')).call(Oo,p.lcpr,'" fill="white" stroke-width="')).call(Ao,p.lcpr*.2,'" stroke="black" />')}}for(var Ke=0;Ke<P.holechildren.length;Ke++){var Re=L[P.holechildren[Ke]];for(U=0;U<Re.segments.length;U++){if(Re.segments[U].hasOwnProperty("x3")&&p.qcpr){var ko,yn,gi,Vu,Wu,Gu,Yu,Xu,Zu,$u,Ju,Qu,Ku,qu;z+=W()(ko=W()(yn=W()(gi='<circle cx="'.concat(Re.segments[U].x2*p.scale,'" cy="')).call(gi,Re.segments[U].y2*p.scale,'" r="')).call(yn,p.qcpr,'" fill="cyan" stroke-width="')).call(ko,p.qcpr*.2,'" stroke="black" />'),z+=W()(Vu=W()(Wu=W()(Gu='<circle cx="'.concat(Re.segments[U].x3*p.scale,'" cy="')).call(Gu,Re.segments[U].y3*p.scale,'" r="')).call(Wu,p.qcpr,'" fill="white" stroke-width="')).call(Vu,p.qcpr*.2,'" stroke="black" />'),z+=W()(Yu=W()(Xu=W()(Zu=W()($u='<line x1="'.concat(Re.segments[U].x1*p.scale,'" y1="')).call($u,Re.segments[U].y1*p.scale,'" x2="')).call(Zu,Re.segments[U].x2*p.scale,'" y2="')).call(Xu,Re.segments[U].y2*p.scale,'" stroke-width="')).call(Yu,p.qcpr*.2,'" stroke="cyan" />'),z+=W()(Ju=W()(Qu=W()(Ku=W()(qu='<line x1="'.concat(Re.segments[U].x2*p.scale,'" y1="')).call(qu,Re.segments[U].y2*p.scale,'" x2="')).call(Ku,Re.segments[U].x3*p.scale,'" y2="')).call(Qu,Re.segments[U].y3*p.scale,'" stroke-width="')).call(Ju,p.qcpr*.2,'" stroke="cyan" />')}if(!Re.segments[U].hasOwnProperty("x3")&&p.lcpr){var ef,tf,nf;z+=W()(ef=W()(tf=W()(nf='<circle cx="'.concat(Re.segments[U].x2*p.scale,'" cy="')).call(nf,Re.segments[U].y2*p.scale,'" r="')).call(tf,p.lcpr,'" fill="white" stroke-width="')).call(ef,p.lcpr*.2,'" stroke="black" />')}}}}return z}},{key:"getsvgstring",value:function(a,g){var r,p,M;g=this.checkoptions(g);for(var T=a.width*g.scale,L=a.height*g.scale,P=W()(r="<svg ".concat(g.viewbox?W()(p='viewBox="0 0 '.concat(T," ")).call(p,L,'" '):W()(M='width="'.concat(T,'" height="')).call(M,L,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(r,this.versionnumber,'" >'),z=0;z<a.layers.length;z+=1)for(var U=0;U<a.layers[z].length;U+=1)a.layers[z][U].isholepath||(P+=this.svgpathstring(a,z,U,g));return P+="</svg>",P}},{key:"compareNumbers",value:function(a,g){return a-g}},{key:"torgbastr",value:function(a){var g,r,p;return W()(g=W()(r=W()(p="rgba(".concat(a.r,",")).call(p,a.g,",")).call(r,a.b,",")).call(g,a.a,")")}},{key:"tosvgcolorstr",value:function(a,g){var r,p,M,T,L,P,z;return W()(r=W()(p=W()(M=W()(T=W()(L=W()(P=W()(z='fill="rgb('.concat(a.r,",")).call(z,a.g,",")).call(P,a.b,')" stroke="rgb(')).call(L,a.r,",")).call(T,a.g,",")).call(M,a.b,')" stroke-width="')).call(p,g.strokewidth,'" opacity="')).call(r,a.a/255,'" ')}},{key:"appendSVGString",value:function(a,g){var r;g?(r=document.getElementById(g),r||(r=document.createElement("div"),r.id=g,document.body.appendChild(r))):(r=document.createElement("div"),document.body.appendChild(r)),r.innerHTML+=a}},{key:"blur",value:function(a,g,r){var p,M,T,L,P,z,U,re,oe,pe,ue={width:a.width,height:a.height,data:[]};if(g=Math.floor(g),g<1)return a;g>5&&(g=5),r=Math.abs(r),r>1024&&(r=1024);var ge=this.gks[g-1];for(M=0;M<a.height;M++)for(p=0;p<a.width;p++){for(z=0,U=0,re=0,oe=0,pe=0,T=-g;T<g+1;T++)p+T>0&&p+T<a.width&&(P=(M*a.width+p+T)*4,z+=a.data[P]*ge[T+g],U+=a.data[P+1]*ge[T+g],re+=a.data[P+2]*ge[T+g],oe+=a.data[P+3]*ge[T+g],pe+=ge[T+g]);P=(M*a.width+p)*4,ue.data[P]=Math.floor(z/pe),ue.data[P+1]=Math.floor(U/pe),ue.data[P+2]=Math.floor(re/pe),ue.data[P+3]=Math.floor(oe/pe)}var Oe=new Uint8ClampedArray(ue.data);for(M=0;M<a.height;M++)for(p=0;p<a.width;p++){for(z=0,U=0,re=0,oe=0,pe=0,T=-g;T<g+1;T++)M+T>0&&M+T<a.height&&(P=((M+T)*a.width+p)*4,z+=Oe[P]*ge[T+g],U+=Oe[P+1]*ge[T+g],re+=Oe[P+2]*ge[T+g],oe+=Oe[P+3]*ge[T+g],pe+=ge[T+g]);P=(M*a.width+p)*4,ue.data[P]=Math.floor(z/pe),ue.data[P+1]=Math.floor(U/pe),ue.data[P+2]=Math.floor(re/pe),ue.data[P+3]=Math.floor(oe/pe)}for(M=0;M<a.height;M++)for(p=0;p<a.width;p++)P=(M*a.width+p)*4,L=Math.abs(ue.data[P]-a.data[P])+Math.abs(ue.data[P+1]-a.data[P+1])+Math.abs(ue.data[P+2]-a.data[P+2])+Math.abs(ue.data[P+3]-a.data[P+3]),L>r&&(ue.data[P]=a.data[P],ue.data[P+1]=a.data[P+1],ue.data[P+2]=a.data[P+2],ue.data[P+3]=a.data[P+3]);return ue}},{key:"loadImage",value:function(a,g,r){var p=new Image;r&&r.corsenabled&&(p.crossOrigin="Anonymous"),p.src=a,p.onload=function(){var M=document.createElement("canvas");M.width=p.width,M.height=p.height;var T=M.getContext("2d");T.drawImage(p,0,0),g(M)}}},{key:"getImgdata",value:function(a){var g=a.getContext("2d");return g.getImageData(0,0,a.width,a.height)}},{key:"drawLayers",value:function(a,g,r,p){r=r||1;var M,T,L,P,z,U;p?(U=document.getElementById(p),U||(U=document.createElement("div"),U.id=p,document.body.appendChild(U))):(U=document.createElement("div"),document.body.appendChild(U));for(z in a)if(a.hasOwnProperty(z)){M=a[z][0].length,T=a[z].length;var re=document.createElement("canvas");re.width=M*r,re.height=T*r;var oe=re.getContext("2d");for(P=0;P<T;P+=1)for(L=0;L<M;L+=1)oe.fillStyle=this.torgbastr(g[a[z][P][L]%g.length]),oe.fillRect(L*r,P*r,r,r);U.appendChild(re)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),A}(),pm={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var I=this,a=function(){I.ui.submenu==="crop"&&(I.stopDrawingMode(),I.ui.changeMenu("crop"))},g=function(z){I.ui.submenu==="rotate"&&I.ui.rotate.setRangeBarAngle("setAngle",z)},r=function(z){I.ui.submenu==="filter"&&ji()(I.ui).setFilterState(z)},p=function(z){return g(z),r(z),z},M=function(){var z=I._graphics.getZoomMode();I.stopDrawingMode(),z!==Xt.ZOOM?(I.startDrawingMode(ft.ZOOM),I._graphics.startZoomInMode()):I._graphics.endZoomInMode()},T=function(){var z=I._graphics.getZoomMode();I.stopDrawingMode(),z!==Xt.HAND?(I.startDrawingMode(ft.ZOOM),I._graphics.startHandMode()):I._graphics.endHandMode()},L=function(){ji()(I.ui)&&ji()(I.ui).initFilterCheckBoxState()};return Z()({initLoadImage:function(z,U){return I.loadImageFromURL(z,U).then(function(re){a(),I.ui.initializeImgUrl=z,I.ui.resizeEditor({imageSize:re}),I.clearUndoStack(),I._invoker.fire(Ee.EXECUTE_COMMAND,lt.LOAD_IMAGE)})},undo:function(){I.isEmptyUndoStack()||(a(),I.deactivateAll(),I.undo().then(p))},redo:function(){I.isEmptyRedoStack()||(a(),I.deactivateAll(),I.redo().then(p))},reset:function(){a(),I.loadImageFromURL(I.ui.initializeImgUrl,"resetImage").then(function(z){a(),L(),I.ui.resizeEditor({imageSize:z}),I.clearUndoStack(),I._initHistory()})},delete:function(){I.ui.changeHelpButtonEnabled("delete",!1),a(),I.removeActiveObject(),I.activeObjectId=null},deleteAll:function(){a(),I.clearObjects(),I.ui.changeHelpButtonEnabled("delete",!1),I.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(z){en()||alert("This browser does not support file-api"),I.ui.initializeImgUrl=te().createObjectURL(z),I.loadImageFromFile(z).then(function(U){a(),L(),I.clearUndoStack(),I.ui.activeMenuEvent(),I.ui.resizeEditor({imageSize:U}),I._clearHistory(),I._invoker.fire(Ee.EXECUTE_COMMAND,lt.LOAD_IMAGE)}).catch(function(U){return Ie().reject(U)})},download:function(){var z=I.toDataURL(),U=I.getImageName(),re,oe,pe;en()&&window.saveAs?(re=pp(z),oe=re.type.split("/")[1],U.split(".").pop()!==oe&&(U+=".".concat(oe)),saveAs(re,U)):(pe=window.open(),pe.document.body.innerHTML="<img src='".concat(z,"'>"))},history:function(z){I.ui.toggleHistoryMenu(z)},zoomIn:function(){I.ui.toggleZoomButtonStatus("zoomIn"),I.deactivateAll(),M()},zoomOut:function(){I._graphics.zoomOut()},hand:function(){I.ui.offZoomInButtonStatus(),I.ui.toggleZoomButtonStatus("hand"),I.deactivateAll(),T()}},this._commonAction())},_iconAction:function(){var I=this;return Z()({changeColor:function(g){I.activeObjectId&&I.changeIconColor(I.activeObjectId,g)},addIcon:function(g,r){I.startDrawingMode("ICON"),I.setDrawingIcon(g,r)},cancelAddIcon:function(){I.ui.icon.clearIconType(),I.changeSelectableAll(!0),I.changeCursor("default"),I.stopDrawingMode()},registerDefaultIcons:function(g,r){var p={};p[g]=r,I.registerIcons(p)},registerCustomIcon:function(g,r){var p=new ou;p.imageToSVG(g,function(M){var T=M.match(/path[^>]*d="([^"]*)"/),L=ce(T,2),P=L[1],z={};z[r.name]=P,I.registerIcons(z),I.addIcon(r.name,{left:100,top:100})},ou.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var I=this;return Z()({setDrawMode:function(g,r){I.stopDrawingMode(),g==="free"?I.startDrawingMode("FREE_DRAWING",r):I.startDrawingMode("LINE_DRAWING",r)},setColor:function(g){I.setBrush({color:g})}},this._commonAction())},_maskAction:function(){var I=this;return Z()({loadImageFromURL:function(g,r){return I.loadImageFromURL(I.toDataURL(),"FilterImage").then(function(){I.addImageObject(g).then(function(){te().revokeObjectURL(r)}),I._invoker.fire(Ee.EXECUTE_COMMAND,lt.LOAD_MASK_IMAGE)})},applyFilter:function(){I.applyFilter("mask",{maskObjId:I.activeObjectId})}},this._commonAction())},_textAction:function(){var I=this;return Z()({changeTextStyle:function(g,r){I.activeObjectId&&I.changeTextStyle(I.activeObjectId,g,r)}},this._commonAction())},_rotateAction:function(){var I=this;return Z()({rotate:function(g,r){I.rotate(g,r),I.ui.resizeEditor(),I.ui.rotate.setRangeBarAngle("rotate",g)},setAngle:function(g,r){I.setAngle(g,r),I.ui.resizeEditor(),I.ui.rotate.setRangeBarAngle("setAngle",g)}},this._commonAction())},_shapeAction:function(){var I=this;return Z()({changeShape:function(g,r){I.activeObjectId&&I.changeShape(I.activeObjectId,g,r)},setDrawingShape:function(g){I.setDrawingShape(g)}},this._commonAction())},_cropAction:function(){var I=this;return Z()({crop:function(){var g=I.getCropzoneRect();g&&!xp(g)&&I.crop(g).then(function(){I.stopDrawingMode(),I.ui.resizeEditor(),I.ui.changeMenu("crop"),I._invoker.fire(Ee.EXECUTE_COMMAND,lt.CROP)}).catch(function(r){return Ie().reject(r)})},cancel:function(){I.stopDrawingMode(),I.ui.changeMenu("crop")},preset:function(g){switch(g){case"preset-square":I.setCropzoneRect(1/1);break;case"preset-3-2":I.setCropzoneRect(3/2);break;case"preset-4-3":I.setCropzoneRect(4/3);break;case"preset-5-4":I.setCropzoneRect(5/4);break;case"preset-7-5":I.setCropzoneRect(7/5);break;case"preset-16-9":I.setCropzoneRect(16/9);break;default:I.setCropzoneRect(),I.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var I=this;return Z()({getCurrentDimensions:function(){return I._graphics.getCurrentDimensions()},preview:function(g,r,p){var M=I._graphics.getCurrentDimensions(),T=function(){return M.width/M.height},L={};switch(g){case"width":L.width=r,p?L.height=r/T():L.height=M.height;break;case"height":L.height=r,p?L.width=r*T():L.width=M.width;break;default:L=M}I._graphics.resize(L).then(function(){I.ui.resizeEditor()}),p&&(I.ui.resize.setWidthValue(L.width),I.ui.resize.setHeightValue(L.height))},lockAspectRatio:function(g,r,p){var M=I._graphics.getCurrentDimensions(),T=M.width,L=M.height,P=T/L;if(g)if(T>L){var z=p/P,U=r*P;I.ui.resize.setLimit({minWidth:U>r?U:r,minHeight:r,maxWidth:p,maxHeight:z<p?z:p})}else{var re=p*P,oe=r/P;I.ui.resize.setLimit({minWidth:r,minHeight:oe>r?oe:r,maxWidth:re<p?re:p,maxHeight:p})}else I.ui.resize.setLimit({minWidth:r,minHeight:r,maxWidth:p,maxHeight:p})},resize:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;g||(g=I._graphics.getCurrentDimensions()),I.resize(g).then(function(){I._graphics.setOriginalDimensions(g),I.stopDrawingMode(),I.ui.resizeEditor(),I.ui.changeMenu("resize")}).catch(function(r){return Ie().reject(r)})},reset:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=I._graphics.getOriginalDimensions();I.ui.resize.setWidthValue(r.width,!0),I.ui.resize.setHeightValue(r.height,!0),I._graphics.resize(r).then(function(){g||(I.stopDrawingMode(),I.ui.resizeEditor(),I.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var I=this;return Z()({flip:function(g){return I[g]()}},this._commonAction())},_filterAction:function(){var I=this;return Z()({applyFilter:function(g,r,p,M){g?I.applyFilter(r,p,M):I.hasFilter(r)&&I.removeFilter(r)}},this._commonAction())},setReAction:function(){var I=this;this.on({undoStackChanged:function(g){g?(I.ui.changeHelpButtonEnabled("undo",!0),I.ui.changeHelpButtonEnabled("reset",!0)):(I.ui.changeHelpButtonEnabled("undo",!1),I.ui.changeHelpButtonEnabled("reset",!1)),I.ui.resizeEditor()},redoStackChanged:function(g){g?I.ui.changeHelpButtonEnabled("redo",!0):I.ui.changeHelpButtonEnabled("redo",!1),I.ui.resizeEditor()},objectActivated:function(g){var r,p;I.activeObjectId=g.id,I.ui.changeHelpButtonEnabled("delete",!0),I.ui.changeHelpButtonEnabled("deleteAll",!0),g.type==="cropzone"?I.ui.crop.changeApplyButtonStatus(!0):u()(r=["rect","circle","triangle"]).call(r,g.type)>-1?(I.stopDrawingMode(),I.ui.submenu!=="shape"&&I.ui.changeMenu("shape",!1,!1),I.ui.shape.setShapeStatus({strokeColor:g.stroke,strokeWidth:g.strokeWidth,fillColor:ye()(g)}),I.ui.shape.setMaxStrokeValue(Math.min(g.width,g.height))):g.type==="path"||g.type==="line"?I.ui.submenu!=="draw"&&(I.ui.changeMenu("draw",!1,!1),I.ui.draw.changeStandbyMode()):u()(p=["i-text","text"]).call(p,g.type)>-1?(I.ui.submenu!=="text"&&I.ui.changeMenu("text",!1,!1),I.ui.text.setTextStyleStateOnAction(g)):g.type==="icon"&&(I.stopDrawingMode(),I.ui.submenu!=="icon"&&I.ui.changeMenu("icon",!1,!1),I.ui.icon.setIconPickerColor(ye()(g)))},addText:function(g){var r=I.ui.text,p=r.textColor,M=r.fontSize,T=r.fontStyle,L=r.fontWeight,P=r.underline,z="Noto Sans";I.addText("Double Click",{position:g.originPosition,styles:{fill:p,fontSize:M,fontFamily:z,fontStyle:T,fontWeight:L,underline:P}}).then(function(){I.changeCursor("default")})},addObjectAfter:function(g){var r;g.type==="icon"?I.ui.icon.changeStandbyMode():u()(r=["rect","circle","triangle"]).call(r,g.type)>-1&&(I.ui.shape.setMaxStrokeValue(Math.min(g.width,g.height)),I.ui.shape.changeStandbyMode())},objectScaled:function(g){var r,p;if(u()(r=["i-text","text"]).call(r,g.type)>-1)I.ui.text.fontSize=ke(g.fontSize);else if(u()(p=["rect","circle","triangle"]).call(p,g.type)>=0){var M=g.width,T=g.height,L=I.ui.shape.getStrokeValue();M<L&&I.ui.shape.setStrokeValue(M),T<L&&I.ui.shape.setStrokeValue(T)}},selectionCleared:function(){I.activeObjectId=null,I.ui.submenu==="text"?I.changeCursor("text"):so(["draw","crop","resize"],I.ui.submenu)||I.stopDrawingMode()}})},_historyAction:function(){var I=this;return{undo:function(g){return I.undo(g)},redo:function(g){return I.redo(g)}}},_commonAction:function(){var I=this,a,g,r,p,M=ft.TEXT,T=ft.CROPPER,L=ft.SHAPE,P=ft.ZOOM,z=ft.RESIZE;return{modeChange:function(re){switch(re){case Jt.TEXT:I._changeActivateMode(M);break;case Jt.CROP:I.startDrawingMode(T);break;case Jt.SHAPE:I._changeActivateMode(L),I.setDrawingShape(I.ui.shape.type,I.ui.shape.options);break;case Jt.ZOOM:I.startDrawingMode(P);break;case Jt.RESIZE:I.startDrawingMode(z);break;default:break}},deactivateAll:K()(a=this.deactivateAll).call(a,this),changeSelectableAll:K()(g=this.changeSelectableAll).call(g,this),discardSelection:K()(r=this.discardSelection).call(r,this),stopDrawingMode:K()(p=this.stopDrawingMode).call(p,this)}},mixin:function(I){Z()(I.prototype,this)}},vm=f(602),su=f.n(vm),mm=f(5573),co=f.n(mm),ym=function(){function A(I,a){Y(this,A),this.name=I,this.graphics=a}return ne(A,[{key:"fire",value:function(){for(var a=this.graphics,g=arguments.length,r=new Array(g),p=0;p<g;p++)r[p]=arguments[p];return this.graphics.fire.apply(a,r)}},{key:"setCanvasImage",value:function(a,g){this.graphics.setCanvasImage(a,g)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(a,g){this.graphics.setImageProperties(a,g)}},{key:"setCanvasCssDimension",value:function(a){this.graphics.setCanvasCssDimension(a)}},{key:"setCanvasBackstoreDimension",value:function(a){this.graphics.setCanvasBackstoreDimension(a)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),A}(),un=ym;function Cm(A){var I=Im();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Im(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var bm={padding:0,crossOrigin:"Anonymous"},Sm=function(A){yt(a,A);var I=Cm(a);function a(g){return Y(this,a),I.call(this,Le.IMAGE_LOADER,g)}return ne(a,[{key:"load",value:function(r,p){var M=this,T;if(!r&&!p){var L=this.getCanvas();L.backgroundImage=null,L.renderAll(),T=new(Ie())(function(P){M.setCanvasImage("",null),P()})}else T=this._setBackgroundImage(p).then(function(P){return M.setCanvasImage(r,P),M.adjustCanvasDimension(),P});return T}},{key:"_setBackgroundImage",value:function(r){var p=this;return r?new(Ie())(function(M,T){var L=p.getCanvas();L.setBackgroundImage(r,function(){var P=L.backgroundImage;P&&P.getElement()?M(P):T(mt.loadingImageFailed)},bm)}):Ie().reject(mt.loadImage)}}]),a}(un),Dm=Sm,xm="tl",Em="tr",Mm="mt",_m="ml",wm="mr",Tm="mb",Am="bl",Om="br",au=[xm,Em,Mm,_m,wm,Tm,Am,Om],ra=function(){};function Nm(A){return u()(au).call(au,A)>=0}function uo(A,I){return A>I?"width":"height"}var km=le.fabric.util.createClass(le.fabric.Rect,{initialize:function(I,a,g){a=Z()(a,g),a.type="cropzone",this.callSuper("initialize",a),this._addEventHandler(),this.canvas=I,this.options=a},canvasEventDelegation:function(I){var a,g="unregistered",r=this.canvasEventTrigger[I]!==ra;return r?g="registered":u()(a=[Ee.OBJECT_MOVED,Ee.OBJECT_SCALED]).call(a,I)<0&&(g="none"),g},canvasEventRegister:function(I,a){this.canvasEventTrigger[I]=a},_addEventHandler:function(){var I,a,g,r,p;this.canvasEventTrigger=(I={},H(I,Ee.OBJECT_MOVED,ra),H(I,Ee.OBJECT_SCALED,ra),I),this.on({moving:K()(a=this._onMoving).call(a,this),scaling:K()(g=this._onScaling).call(g,this)}),le.fabric.util.addListener(document,"keydown",K()(r=this._onKeyDown).call(r,this)),le.fabric.util.addListener(document,"keyup",K()(p=this._onKeyUp).call(p,this))},_renderCropzone:function(I){var a=7,g=7,r=this.flipX?-1:1,p=this.flipY?-1:1,M=r/this.scaleX,T=p/this.scaleY;I.scale(M,T),this._fillOuterRect(I,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(I),this._strokeBorder(I,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(I,"rgb(0, 0, 0)",{lineDashWidth:a}),this._strokeBorder(I,"rgb(255, 255, 255)",{lineDashWidth:a,lineDashOffset:g})),I.scale(1/M,1/T)},_render:function(I){this.callSuper("_render",I),this._renderCropzone(I)},_fillOuterRect:function(I,a){var g=this._getCoordinates(),r=g.x,p=g.y;I.save(),I.fillStyle=a,I.beginPath(),I.moveTo(r[0]-1,p[0]-1),I.lineTo(r[3]+1,p[0]-1),I.lineTo(r[3]+1,p[3]+1),I.lineTo(r[0]-1,p[3]+1),I.lineTo(r[0]-1,p[0]-1),I.closePath(),I.moveTo(r[1],p[1]),I.lineTo(r[1],p[2]),I.lineTo(r[2],p[2]),I.lineTo(r[2],p[1]),I.lineTo(r[1],p[1]),I.closePath(),ye()(I).call(I),I.restore()},_fillInnerRect:function(I){var a=this._getCoordinates(),g=a.x,r=a.y,p=this._caculateInnerPosition(g,(g[2]-g[1])/3),M=this._caculateInnerPosition(r,(r[2]-r[1])/3);I.save(),I.strokeStyle="rgba(255, 255, 255, 0.7)",I.lineWidth=this.options.lineWidth,I.beginPath(),I.moveTo(p[0],M[1]),I.lineTo(p[3],M[1]),I.moveTo(p[0],M[2]),I.lineTo(p[3],M[2]),I.moveTo(p[1],M[0]),I.lineTo(p[1],M[3]),I.moveTo(p[2],M[0]),I.lineTo(p[2],M[3]),I.stroke(),I.closePath(),I.restore()},_caculateInnerPosition:function(I,a){var g=[];return g[0]=I[1],g[1]=I[1]+a,g[2]=I[1]+a*2,g[3]=I[2],g},_getCoordinates:function(){var I,a,g=this.canvas,r=this.width,p=this.height,M=this.left,T=this.top,L=r/2,P=p/2,z=g.getHeight(),U=g.getWidth();return{x:Tn()(I=[-(L+M),-L,L,L+(U-M-r)]).call(I,Math.ceil),y:Tn()(a=[-(P+T),-P,P,P+(z-T-p)]).call(a,Math.ceil)}},_strokeBorder:function(I,a,g){var r=g.lineDashWidth,p=g.lineDashOffset,M=g.lineWidth,T=this.width/2,L=this.height/2;I.save(),I.strokeStyle=a,I.setLineDash&&I.setLineDash([r,r]),p&&(I.lineDashOffset=p),M&&(I.lineWidth=M),I.beginPath(),I.moveTo(-T,-L),I.lineTo(T,-L),I.lineTo(T,L),I.lineTo(-T,L),I.lineTo(-T,-L),I.stroke(),I.restore()},_onMoving:function(){var I=this.height,a=this.width,g=this.left,r=this.top,p=this.canvas.getWidth()-a,M=this.canvas.getHeight()-I;this.left=et(g,0,p),this.top=et(r,0,M),this.canvasEventTrigger[Ee.OBJECT_MOVED](this)},_onScaling:function(I){var a=I.transform.corner,g=this.canvas.getPointer(I.e),r=this._calcScalingSizeFromPointer(g,a);this.scale(1).set(r),this.canvasEventTrigger[Ee.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(I,a){var g=Nm(a);return g&&this._resizeCropZone(I,a)},adjustRatioCropzoneSize:function(I){var a=I.width,g=I.height,r=I.leftMaker,p=I.topMaker,M=I.maxWidth,T=I.maxHeight,L=I.scaleTo;if(a=M?et(a,1,M):a,g=T?et(g,1,T):g,!this.presetRatio)return this._withShiftKey&&(a>g?g=a:g>a&&(a=g)),{width:a,height:g,left:r(a),top:p(g)};L==="width"?g=a/this.presetRatio:a=g*this.presetRatio;var P=Math.min(M/a,T/g);if(P<=1){var z,U=Tn()(z=[a,g]).call(z,function(oe){return oe*P}),re=ce(U,2);a=re[0],g=re[1]}return{width:a,height:g,left:r(a),top:p(g)}},_getCropzoneRectInfo:function(){var I=this.canvas,a=I.width,g=I.height,r=this.getBoundingRect(!1,!0),p=r.top,M=r.left,T=r.width,L=r.height;return{rectTop:p,rectLeft:M,rectWidth:T,rectHeight:L,rectRight:M+T,rectBottom:p+L,canvasWidth:a,canvasHeight:g}},_resizeCropZone:function(I,a){var g=I.x,r=I.y,p=this._getCropzoneRectInfo(),M=p.rectWidth,T=p.rectHeight,L=p.rectTop,P=p.rectLeft,z=p.rectBottom,U=p.rectRight,re=p.canvasWidth,oe=p.canvasHeight,pe={tl:{width:U-g,height:z-r,leftMaker:function(ge){return U-ge},topMaker:function(ge){return z-ge},maxWidth:U,maxHeight:z,scaleTo:uo(P-g,L-r)},tr:{width:g-P,height:z-r,leftMaker:function(){return P},topMaker:function(ge){return z-ge},maxWidth:re-P,maxHeight:z,scaleTo:uo(g-U,L-r)},mt:{width:M,height:z-r,leftMaker:function(){return P},topMaker:function(ge){return z-ge},maxWidth:re-P,maxHeight:z,scaleTo:"height"},ml:{width:U-g,height:T,leftMaker:function(ge){return U-ge},topMaker:function(){return L},maxWidth:U,maxHeight:oe-L,scaleTo:"width"},mr:{width:g-P,height:T,leftMaker:function(){return P},topMaker:function(){return L},maxWidth:re-P,maxHeight:oe-L,scaleTo:"width"},mb:{width:M,height:r-L,leftMaker:function(){return P},topMaker:function(){return L},maxWidth:re-P,maxHeight:oe-L,scaleTo:"height"},bl:{width:U-g,height:r-L,leftMaker:function(ge){return U-ge},topMaker:function(){return L},maxWidth:U,maxHeight:oe-L,scaleTo:uo(P-g,r-z)},br:{width:g-P,height:r-L,leftMaker:function(){return P},topMaker:function(){return L},maxWidth:re-P,maxHeight:oe-L,scaleTo:uo(g-U,r-z)}};return this.adjustRatioCropzoneSize(pe[a])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(I){var a=I.keyCode;a===Tt.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(I){var a=I.keyCode;a===Tt.SHIFT&&(this._withShiftKey=!1)}}),Pm=km;function Lm(A){var I=Rm();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Rm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var jm=10,Fm={presetRatio:null,top:-10,left:-10,height:1,width:1},Bm=function(A){yt(a,A);var I=Lm(a);function a(g){var r,p,M,T,L,P;return Y(this,a),P=I.call(this,Le.CROPPER,g),P._cropzone=null,P._startX=null,P._startY=null,P._withShiftKey=!1,P._listeners={keydown:K()(r=P._onKeyDown).call(r,ct(P)),keyup:K()(p=P._onKeyUp).call(p,ct(P)),mousedown:K()(M=P._onFabricMouseDown).call(M,ct(P)),mousemove:K()(T=P._onFabricMouseMove).call(T,ct(P)),mouseup:K()(L=P._onFabricMouseUp).call(L,ct(P))},P}return ne(a,[{key:"start",value:function(){if(!this._cropzone){var r=this.getCanvas();r.forEachObject(function(p){p.evented=!1}),this._cropzone=new Pm(r,Z()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},Pt,this.graphics.cropSelectionStyle)),r.discardActiveObject(),r.add(this._cropzone),r.on("mouse:down",this._listeners.mousedown),r.selection=!1,r.defaultCursor="crosshair",le.fabric.util.addListener(document,"keydown",this._listeners.keydown),le.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var r=this.getCanvas(),p=this._cropzone;p&&(r.remove(p),r.selection=!0,r.defaultCursor="default",r.off("mouse:down",this._listeners.mousedown),r.forEachObject(function(M){M.evented=!0}),this._cropzone=null,le.fabric.util.removeListener(document,"keydown",this._listeners.keydown),le.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(r){this._cropzone&&this._cropzone.set({visible:r})}},{key:"_onFabricMouseDown",value:function(r){var p=this.getCanvas();if(!r.target){p.selection=!1;var M=p.getPointer(r.e);this._startX=M.x,this._startY=M.y,p.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(r){var p=this.getCanvas(),M=p.getPointer(r.e),T=M.x,L=M.y,P=this._cropzone;Math.abs(T-this._startX)+Math.abs(L-this._startY)>jm&&(p.remove(P),P.set(this._calcRectDimensionFromPoint(T,L,P.presetRatio)),p.add(P),p.setActiveObject(P))}},{key:"_calcRectDimensionFromPoint",value:function(r,p){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,T=this.getCanvas(),L=T.getWidth(),P=T.getHeight(),z=this._startX,U=this._startY,re=et(r,0,z),oe=et(p,0,U),pe=et(r,z,L)-re,ue=et(p,U,P)-oe;return this._withShiftKey&&!M?(pe>ue?ue=pe:ue>pe&&(pe=ue),z>=r&&(re=z-pe),U>=p&&(oe=U-ue)):M&&(ue=pe/M,z>=r&&(re=et(z-pe,0,L)),U>=p&&(oe=et(U-ue,0,P)),oe+ue>P&&(ue=P-oe,pe=ue*M,z>=r&&(re=et(z-pe,0,L)),U>=p&&(oe=et(U-ue,0,P)))),{left:re,top:oe,width:pe,height:ue}}},{key:"_onFabricMouseUp",value:function(){var r=this._cropzone,p=this._listeners,M=this.getCanvas();M.setActiveObject(r),M.off({"mouse:move":p.mousemove,"mouse:up":p.mouseup})}},{key:"getCroppedImageData",value:function(r){var p=this.getCanvas(),M=p.contains(this._cropzone);if(!r)return null;M&&p.remove(this._cropzone);var T={imageName:this.getImageName(),url:p.toDataURL(r)};return M&&p.add(this._cropzone),T}},{key:"getCropzoneRect",value:function(){var r=this._cropzone;return r.isValid()?{left:r.left,top:r.top,width:r.width,height:r.height}:null}},{key:"setCropzoneRect",value:function(r){var p=this.getCanvas(),M=this._cropzone;p.discardActiveObject(),p.selection=!1,p.remove(M),M.set(r?this._getPresetPropertiesForCropSize(r):Fm),p.add(M),p.selection=!0,r&&p.setActiveObject(M)}},{key:"_getPresetPropertiesForCropSize",value:function(r){var p,M,T=this.getCanvas(),L=T.getWidth(),P=T.getHeight(),z=L>=P?L:P,U=function(Re,dt){return Re>dt?dt/Re:1},re=z*r,oe=z,pe=U(re,L),ue=Tn()(p=[re,oe]).call(p,function(Ke){return Ke*pe}),ge=ce(ue,2);re=ge[0],oe=ge[1];var Oe=U(oe,P),Je=Tn()(M=[re,oe]).call(M,function(Ke){return vp(Ke*Oe)}),Qe=ce(Je,2);return re=Qe[0],oe=Qe[1],{presetRatio:r,top:(P-oe)/2,left:(L-re)/2,width:re,height:oe}}},{key:"_onKeyDown",value:function(r){r.keyCode===Tt.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(r){r.keyCode===Tt.SHIFT&&(this._withShiftKey=!1)}}]),a}(un),zm=Bm;function Hm(A){var I=Um();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Um(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Vm=function(A){yt(a,A);var I=Hm(a);function a(g){return Y(this,a),I.call(this,Le.FLIP,g)}return ne(a,[{key:"getCurrentSetting",value:function(){var r=this.getCanvasImage();return{flipX:r.flipX,flipY:r.flipY}}},{key:"set",value:function(r){var p=this.getCurrentSetting(),M=p.flipX!==r.flipX,T=p.flipY!==r.flipY;return!M&&!T?Ie().reject(mt.flip):(Z()(p,r),this.setImageProperties(p,!0),this._invertAngle(M,T),this._flipObjects(M,T),Ie().resolve({flipX:p.flipX,flipY:p.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(r,p){var M=this.getCanvasImage(),T=M.angle;r&&(T*=-1),p&&(T*=-1),M.rotate(ti()(T)).setCoords()}},{key:"_flipObjects",value:function(r,p){var M=this.getCanvas();r&&M.forEachObject(function(T){T.set({angle:ti()(T.angle*-1),flipX:!T.flipX,left:M.width-T.left}).setCoords()}),p&&M.forEachObject(function(T){T.set({angle:ti()(T.angle*-1),flipY:!T.flipY,top:M.height-T.top}).setCoords()}),M.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var r=this.getCurrentSetting();return this.set({flipX:!r.flipX,flipY:r.flipY})}},{key:"flipY",value:function(){var r=this.getCurrentSetting();return this.set({flipX:r.flipX,flipY:!r.flipY})}}]),a}(un),Wm=Vm;function Gm(A){var I=Ym();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Ym(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Xm=function(A){yt(a,A);var I=Gm(a);function a(g){return Y(this,a),I.call(this,Le.ROTATION,g)}return ne(a,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(r){var p=this.getCurrentAngle()%360;r%=360;var M=this.getCanvasImage(),T=M.getCenterPoint();M.set({angle:r}).setCoords(),this.adjustCanvasDimension();var L=M.getCenterPoint();return this._rotateForEachObject(T,L,r-p),Ie().resolve(r)}},{key:"_rotateForEachObject",value:function(r,p,M){var T=this.getCanvas(),L={x:r.x-p.x,y:r.y-p.y};T.forEachObject(function(P){var z=P.getCenterPoint(),U=le.fabric.util.degreesToRadians(M),re=le.fabric.util.rotatePoint(z,r,U);P.set({left:re.x-L.x,top:re.y-L.y,angle:(P.angle+M)%360}),P.setCoords()}),T.renderAll()}},{key:"rotate",value:function(r){var p=this.getCurrentAngle();return this.setAngle(p+r)}}]),a}(un),Zm=Xm;function $m(A){var I=Jm();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Jm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Qm=function(A){yt(a,A);var I=$m(a);function a(g){var r;return Y(this,a),r=I.call(this,Le.FREE_DRAWING,g),r.width=12,r.oColor=new le.fabric.Color("rgba(0, 0, 0, 0.5)"),r}return ne(a,[{key:"start",value:function(r){var p=this.getCanvas();p.isDrawingMode=!0,this.setBrush(r)}},{key:"setBrush",value:function(r){var p=this.getCanvas().freeDrawingBrush;r=r||{},this.width=r.width||this.width,r.color&&(this.oColor=new le.fabric.Color(r.color)),p.width=this.width,p.color=this.oColor.toRgba()}},{key:"end",value:function(){var r=this.getCanvas();r.isDrawingMode=!1}}]),a}(un),Km=Qm,lu=30,qm=2.7,ey=1.7,cu=180,ty=le.fabric.util.createClass(le.fabric.Line,{type:"line",initialize:function(I){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",I,a),this.arrowType=a.arrowType},_render:function(I){var a=this.calcLinePoints(),g=a.x1,r=a.y1,p=a.x2,M=a.y2,T={fromX:g,fromY:r,toX:p,toY:M};this.ctx=I,I.lineWidth=this.strokeWidth,this._renderBasicLinePath(T),this._drawDecoratorPath(T),this._renderStroke(I)},_renderBasicLinePath:function(I){var a=I.fromX,g=I.fromY,r=I.toX,p=I.toY;this.ctx.beginPath(),this.ctx.moveTo(a,g),this.ctx.lineTo(r,p)},_drawDecoratorPath:function(I){this._drawDecoratorPathType("head",I),this._drawDecoratorPathType("tail",I)},_drawDecoratorPathType:function(I,a){switch(this.arrowType[I]){case"triangle":this._drawTrianglePath(I,a);break;case"chevron":this._drawChevronPath(I,a);break;default:break}},_drawTrianglePath:function(I,a){var g=this.ctx.lineWidth*ey;this._drawChevronPath(I,a,g),this.ctx.closePath()},_drawChevronPath:function(I,a,g){var r=this,p=a.fromX,M=a.fromY,T=a.toX,L=a.toY,P=this.ctx;g||(g=this.ctx.lineWidth*qm);var z=I==="head"?[p,M]:[T,L],U=ce(z,2),re=U[0],oe=U[1],pe=I==="head"?[T,L]:[p,M],ue=ce(pe,2),ge=ue[0],Oe=ue[1],Je=Math.atan2(Oe-oe,ge-re)*cu/Math.PI,Qe=function(Re){return r.getRotatePosition(g,Re,{x:re,y:oe})};P.moveTo.apply(P,B(Qe(Je+lu))),P.lineTo(re,oe),P.lineTo.apply(P,B(Qe(Je-lu)))},getRotatePosition:function(I,a,g){var r=a*Math.PI/cu,p=g.x,M=g.y;return[I*Math.cos(r)+p,I*Math.sin(r)+M]}}),ny=ty;function iy(A){var I=ry();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function ry(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var oy=function(A){yt(a,A);var I=iy(a);function a(g){var r,p,M,T;return Y(this,a),T=I.call(this,Le.LINE,g),T._width=12,T._oColor=new le.fabric.Color("rgba(0, 0, 0, 0.5)"),T._listeners={mousedown:K()(r=T._onFabricMouseDown).call(r,ct(T)),mousemove:K()(p=T._onFabricMouseMove).call(p,ct(T)),mouseup:K()(M=T._onFabricMouseUp).call(M,ct(T))},T}return ne(a,[{key:"setHeadOption",value:function(r){var p=r.arrowType,M=p===void 0?{head:null,tail:null}:p;this._arrowType=M}},{key:"start",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this.getCanvas();p.defaultCursor="crosshair",p.selection=!1,this.setHeadOption(r),this.setBrush(r),p.forEachObject(function(M){M.set({evented:!1})}),p.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(r){var p=this.getCanvas().freeDrawingBrush;r=r||{},this._width=r.width||this._width,r.color&&(this._oColor=new le.fabric.Color(r.color)),p.width=this._width,p.color=this._oColor.toRgba()}},{key:"end",value:function(){var r=this.getCanvas();r.defaultCursor="default",r.selection=!0,r.forEachObject(function(p){p.set({evented:!0})}),r.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(r){var p=this.getCanvas(),M=p.getPointer(r.e),T=M.x,L=M.y,P=[T,L,T,L];this._line=new ny(P,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(vn.SELECTION_STYLE),p.add(this._line),p.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(Ee.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(r){var p=this.getCanvas(),M=p.getPointer(r.e);this._line.set({x2:M.x,y2:M.y}),this._line.setCoords(),p.renderAll()}},{key:"_onFabricMouseUp",value:function(){var r=this.getCanvas();this.fire(Ee.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,r.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var r=this.graphics.createObjectProperties(this._line),p=this._line,M=p.x1,T=p.x2,L=p.y1,P=p.y2;return Z()({},r,{startPosition:{x:M,y:L},endPosition:{x:T,y:P}})}}]),a}(un),sy=oy;function ay(A){var I=ly();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function ly(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var cy={fill:"#000000",left:0,top:0},uy={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},fy=500,dy=function(A){yt(a,A);var I=ay(a);function a(g){var r,p,M,T,L,P;return Y(this,a),P=I.call(this,Le.TEXT,g),P._defaultStyles=cy,P._isSelected=!1,P._selectedObj={},P._editingObj={},P._listeners={mousedown:K()(r=P._onFabricMouseDown).call(r,ct(P)),select:K()(p=P._onFabricSelect).call(p,ct(P)),selectClear:K()(M=P._onFabricSelectClear).call(M,ct(P)),scaling:K()(T=P._onFabricScaling).call(T,ct(P)),textChanged:K()(L=P._onFabricTextChanged).call(L,ct(P))},P._textarea=null,P._ratio=1,P._lastClickTime=new Date().getTime(),P._editingObjInfos={},P.isPrevEditing=!1,P}return ne(a,[{key:"start",value:function(){var r=this,p=this.getCanvas();p.selection=!1,p.defaultCursor="text",p.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),p.forEachObject(function(M){M.type==="i-text"&&r.adjustOriginPosition(M,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var r=this,p=this.getCanvas();p.selection=!0,p.defaultCursor="default",p.forEachObject(function(M){M.type==="i-text"&&(M.text===""?p.remove(M):r.adjustOriginPosition(M,"end"))}),p.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(r,p){var M="center",T="center";p==="start"&&(M="left",T="top");var L=r.getPointByOrigin(M,T),P=L.x,z=L.y;r.set({left:P,top:z,originX:M,originY:T}),r.setCoords()}},{key:"add",value:function(r,p){var M=this;return new(Ie())(function(T){var L,P=M.getCanvas(),z=null,U=vn.SELECTION_STYLE,re=M._defaultStyles;M._setInitPos(p.position),p.styles&&(re=Z()(re,p.styles)),Jc()(p.autofocus)||(p.autofocus=!0),z=new le.fabric.IText(r,re),U=Z()({},U,{originX:"left",originY:"top"}),z.set(U),z.on({mouseup:K()(L=M._onFabricMouseUp).call(L,M)}),P.add(z),p.autofocus&&(z.enterEditing(),z.selectAll()),P.getActiveObject()||P.setActiveObject(z),M.isPrevEditing=!0,T(M.graphics.createObjectProperties(z))})}},{key:"change",value:function(r,p){var M=this;return new(Ie())(function(T){r.set("text",p),M.getCanvas().renderAll(),T()})}},{key:"setStyle",value:function(r,p){var M=this;return new(Ie())(function(T){J()(p,function(L,P){r[P]===L&&P!=="fontSize"&&(p[P]=uy[P]||"")},M),"textDecoration"in p&&Z()(p,M._getTextDecorationAdaptObject(p.textDecoration)),r.set(p),M.getCanvas().renderAll(),T()})}},{key:"getText",value:function(r){return r.text}},{key:"setSelectedInfo",value:function(r,p){this._selectedObj=r,this._isSelected=p}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var r=this.getCanvasElement(),p=me()(r.style.maxWidth,10),M=r.width;this._ratio=M/p}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(r){return{underline:r==="underline",linethrough:r==="line-through",overline:r==="overline"}}},{key:"_setInitPos",value:function(r){r=r||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=r.x,this._defaultStyles.top=r.y}},{key:"_onInput",value:function(){var r=this.getCanvasRatio(),p=this._editingObj,M=this._textarea.style;M.width="".concat(Math.ceil(p.width/r),"px"),M.height="".concat(Math.ceil(p.height/r),"px")}},{key:"_onKeyDown",value:function(){var r=this,p=this.getCanvasRatio(),M=this._editingObj,T=this._textarea.style;i()(function(){M.text(r._textarea.value),T.width="".concat(Math.ceil(M.width/p),"px"),T.height="".concat(Math.ceil(M.height/p),"px")},0)}},{key:"_onBlur",value:function(){var r=this.getCanvasRatio(),p=this._editingObj,M=this._editingObjInfos,T=this._textarea.value,L=p.width/r-M.width/r,P=p.height/r-M.height/r;if(r===1&&(L/=2,P/=2),this._textarea.style.display="none",p.set({left:M.left+L,top:M.top+P}),T.length){this.getCanvas().add(p);var z={id:Pe(p),type:p.type,text:T};this.fire(Ee.TEXT_CHANGED,z)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(r){var p=r.target;p.fontSize=p.fontSize*p.scaleY,p.scaleX=1,p.scaleY=1}},{key:"_onFabricTextChanged",value:function(r){this.fire(Ee.TEXT_CHANGED,r.target)}},{key:"_onFabricSelectClear",value:function(r){var p=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(r.target,!1),p&&p.text===""&&this.getCanvas().remove(p)}},{key:"_onFabricSelect",value:function(r){this.isPrevEditing=!0,this.setSelectedInfo(r.target,!0)}},{key:"_onFabricMouseDown",value:function(r){var p=r.target;if(!(p&&!p.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(r)}}},{key:"_fireAddText",value:function(r){var p=r.target,M=r.e||{},T=this.getCanvas().getPointer(M);p||this.fire(Ee.ADD_TEXT,{originPosition:{x:T.x,y:T.y},clientPosition:{x:M.clientX||0,y:M.clientY||0}})}},{key:"_onFabricMouseUp",value:function(r){var p=r.target,M=new Date().getTime();this._isDoubleClick(M)&&!p.isEditing&&p.enterEditing(),p.isEditing&&this.fire(Ee.TEXT_EDITING),this._lastClickTime=M}},{key:"_isDoubleClick",value:function(r){return r-this._lastClickTime<fy}}]),a}(un),hy=dy;function gy(A){var I=py();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function py(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var vy={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},my=function(A){yt(a,A);var I=gy(a);function a(g){var r,p,M,T;return Y(this,a),T=I.call(this,Le.ICON,g),T._oColor="#000000",T._pathMap=vy,T._type=null,T._iconColor=null,T._handlers={mousedown:K()(r=T._onFabricMouseDown).call(r,ct(T)),mousemove:K()(p=T._onFabricMouseMove).call(p,ct(T)),mouseup:K()(M=T._onFabricMouseUp).call(M,ct(T))},T}return ne(a,[{key:"setStates",value:function(r,p){this._type=r,this._iconColor=p}},{key:"start",value:function(){var r=this.getCanvas();r.selection=!1,r.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var r=this.getCanvas();r.selection=!0,r.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(r,p){var M=this;return new(Ie())(function(T,L){var P=M.getCanvas(),z=M._pathMap[r],U=vn.SELECTION_STYLE,re=z?M._createIcon(z):null;M._icon=re,re||L(mt.invalidParameters),re.set(Z()({type:"icon",fill:M._oColor},U,p,M.graphics.controlStyle)),P.add(re).setActiveObject(re),T(M.graphics.createObjectProperties(re))})}},{key:"registerPaths",value:function(r){var p=this;J()(r,function(M,T){p._pathMap[T]=M},this)}},{key:"setColor",value:function(r,p){this._oColor=r,p&&p.get("type")==="icon"&&(p.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(r){return ye()(r)}},{key:"_createIcon",value:function(r){return new le.fabric.Path(r)}},{key:"_onFabricMouseDown",value:function(r){var p=this,M=this.getCanvas();this._startPoint=M.getPointer(r.e);var T=this._startPoint,L=T.x,P=T.y;this.add(this._type,{left:L,top:P,fill:this._iconColor}).then(function(){p.fire(Ee.ADD_OBJECT,p.graphics.createObjectProperties(p._icon)),M.on("mouse:move",p._handlers.mousemove),M.on("mouse:up",p._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(r){var p=this.getCanvas();if(this._icon){var M=p.getPointer(r.e),T=(M.x-this._startPoint.x)/this._icon.width,L=(M.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(T*2),scaleY:Math.abs(L*2)}),this._icon.setCoords(),p.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var r=this.getCanvas();this.fire(Ee.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,r.off("mouse:down",this._handlers.mousedown),r.off("mouse:move",this._handlers.mousemove),r.off("mouse:up",this._handlers.mouseup)}}]),a}(un),yy=my,Cy=le.fabric.util.createClass(le.fabric.Image.filters.BlendImage,{applyTo:function(I){if(this.mask){var a=I.canvasEl,g=a.width,r=a.height,p=this._createCanvasOfMask(g,r),M=a.getContext("2d"),T=p.getContext("2d"),L=M.getImageData(0,0,g,r);this._drawMask(T,a,M),this._mapData(T,L,g,r),I.imageData=L}},_createCanvasOfMask:function(I,a){var g=le.fabric.util.createCanvasElement();return g.width=I,g.height=a,g},_drawMask:function(I){var a=this.mask,g=a.getElement(),r=a.angle,p=a.left,M=a.scaleX,T=a.scaleY,L=a.top;I.save(),I.translate(p,L),I.rotate(r*Math.PI/180),I.scale(M,T),I.drawImage(g,-g.width/2,-g.height/2),I.restore()},_mapData:function(I,a,g,r){for(var p=a.data,M=a.height,T=a.width,L=p,P=T*M*4,z=I.getImageData(0,0,g,r).data,U=0;U<P;U+=4)L[U+3]=z[U]}}),Iy=Cy,by=le.fabric.util.createClass(le.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),Sy=by,Dy=le.fabric.util.createClass(le.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),xy=Dy,Ey=le.fabric.util.createClass(le.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(I){I||(I={}),this.color=I.color||"#FFFFFF",this.threshold=I.threshold||45,this.x=I.x||null,this.y=I.y||null},applyTo:function(I){var a=I.canvasEl,g=a.getContext("2d"),r=g.getImageData(0,0,a.width,a.height),p=r.data,M=this.threshold,T=le.fabric.Color.sourceFromHex(this.color),L,P;for(this.x&&this.y&&(T=this._getColor(r,this.x,this.y)),L=0,P=p.length;L<P;L+=4)this._isOutsideThreshold(p[L],T[0],M)||this._isOutsideThreshold(p[L+1],T[1],M)||this._isOutsideThreshold(p[L+2],T[2],M)||(p[L]=p[L+1]=p[L+2]=p[L+3]=0);g.putImageData(r,0,0)},_isOutsideThreshold:function(I,a,g){var r=I-a;return Math.abs(r)>g},_getColor:function(I,a,g){var r=[0,0,0,0],p=I.data,M=I.width,T=4,L=(M*g+a)*T;return r[0]=p[L],r[1]=p[L+1],r[2]=p[L+2],r[3]=p[L+3],r}}),My=Ey;function _y(A){var I=wy();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function wy(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var fo=le.fabric.Image.filters;fo.Mask=Iy,fo.Sharpen=Sy,fo.Emboss=xy,fo.ColorFilter=My;var Ty=function(A){yt(a,A);var I=_y(a);function a(g){return Y(this,a),I.call(this,Le.FILTER,g)}return ne(a,[{key:"add",value:function(r,p){var M=this;return new(Ie())(function(T,L){var P=M._getSourceImage(),z=M.getCanvas(),U=M._getFilter(P,r);U||(U=M._createFilter(P,r,p)),U||L(mt.invalidParameters),M._changeFilterValues(U,p),M._apply(P,function(){z.renderAll(),T({type:r,action:"add",options:p})})})}},{key:"remove",value:function(r){var p=this;return new(Ie())(function(M,T){var L=p._getSourceImage(),P=p.getCanvas(),z=p.getOptions(r);L.filters.length||T(mt.unsupportedOperation),p._removeFilter(L,r),p._apply(L,function(){P.renderAll(),M({type:r,action:"remove",options:z})})})}},{key:"hasFilter",value:function(r){return!!this._getFilter(this._getSourceImage(),r)}},{key:"getOptions",value:function(r){var p=this._getSourceImage(),M=this._getFilter(p,r);return M?Z()({},M.options):null}},{key:"_changeFilterValues",value:function(r,p){J()(p,function(M,T){G()(r[T])||(r[T]=M)}),J()(r.options,function(M,T){G()(p[T])||(r.options[T]=p[T])})}},{key:"_apply",value:function(r,p){r.filters.push();var M=r.applyFilters();M&&p()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(r,p,M){var T,L=this._getFabricFilterType(p),P=le.fabric.Image.filters[L];return P&&(T=new P(M),T.options=M,r.filters.push(T)),T}},{key:"_getFilter",value:function(r,p){var M=null;if(r){var T=this._getFabricFilterType(p),L=r.filters.length,P,z;for(z=0;z<L;z+=1)if(P=r.filters[z],P.type===T){M=P;break}}return M}},{key:"_removeFilter",value:function(r,p){var M,T=this._getFabricFilterType(p);r.filters=ji()(M=r.filters).call(M,function(L){return L.type!==T})}},{key:"_getFabricFilterType",value:function(r){return r.charAt(0).toUpperCase()+C()(r).call(r,1)}}]),a}(un),Ay=Ty,Oy=f(1801),Un=f.n(Oy),uu={pixelate:"blocksize",blur:"blur"},oa={x:"width",y:"height"},Ny=yp(uu),Sr=null;function ho(A){var I=yr(A,"patternSourceCanvas"),a=I.patternSourceCanvas,g=a.getObjects(),r=ce(g,1),p=r[0];return p}function ky(A){var I=A.angle,a=A.flipX,g=A.flipY,r=ho(A),p=Gy(A),M=p.right,T=p.bottom,L=p.width,P=p.height,z=(L-A.width)/2,U=(P-A.height)/2,re=A.left-A.width/2-z,oe=A.top-A.height/2-U,pe=L/2-z,ue=P/2-U,ge=Math.max(L,P)+Math.max(z,U),Oe=Py({shapeObj:A,left:pe,top:ue,width:L,height:P,cropX:re,cropY:oe,flipX:a,flipY:g,right:M,bottom:T}),Je=ce(Oe,4);pe=Je[0],ue=Je[1],L=Je[2],P=Je[3],r.set({angle:a===g?-I:I,left:pe,top:ue,width:L,height:P,cropX:re,cropY:oe,flipX:a,flipY:g}),ea(r,{fillImageMaxSize:ge})}function sa(A){var I;return Tn()(I=A.filters).call(I,function(a){var g=De()(a),r=ce(g,1),p=r[0];return H({},Ny[p],a[p])})}function Py(A){var I=A.shapeObj,a=A.left,g=A.top,r=A.width,p=A.height,M=A.cropX,T=A.cropY,L=A.flipX,P=A.flipY,z=A.right,U=A.bottom,re=function(Ke,Re,dt,Gt){return By({type:Ke,outDistance:Re,shapeObj:I,flipX:L,flipY:P,left:dt,top:Gt})},oe=r,pe=p,ue=Ry(re,{left:a,top:g,width:r,height:p,cropX:M,cropY:T}),ge=ce(ue,4);a=ge[0],g=ge[1],r=ge[2],p=ge[3];var Oe=Ly(re,{left:a,top:g,insideCanvasRealImageWidth:r,insideCanvasRealImageHeight:p,right:z,bottom:U,cropX:M,cropY:T,originalWidth:oe,originalHeight:pe}),Je=ce(Oe,4);return a=Je[0],g=Je[1],r=Je[2],p=Je[3],[a,g,r,p]}function Ly(A,I){var a=I.left,g=I.top,r=I.insideCanvasRealImageWidth,p=I.insideCanvasRealImageHeight,M=I.right,T=I.bottom,L=I.cropX,P=I.cropY,z=I.originalWidth,U=I.originalHeight,re=r,oe=p,pe=Sr,ue=pe.width,ge=pe.height;M>ue&&L>0&&(re=z-Math.abs(M-ue)),T>ge&&P>0&&(oe=U-Math.abs(T-ge));var Oe={x:(r-re)/2,y:(p-oe)/2};return J()(["x","y"],function(Je){var Qe=Oe[Je];if(Qe>0){var Ke=A(Je,Qe,a,g),Re=ce(Ke,2);a=Re[0],g=Re[1]}}),[a,g,re,oe]}function Ry(A,I){var a=I.left,g=I.top,r=I.width,p=I.height,M=I.cropX,T=I.cropY,L={width:r,height:p};return J()(["x","y"],function(P){var z=P==="x"?M:T,U=L[oa[P]],re=Sr[oa[P]];if(U>re){var oe=(U-re)/2;L[oa[P]]=re;var pe=A(P,oe,a,g),ue=ce(pe,2);a=ue[0],g=ue[1]}if(z<0){var ge=A(P,z,a,g),Oe=ce(ge,2);a=Oe[0],g=Oe[1]}}),[a,g,L.width,L.height]}function fu(A,I,a){var g=du(A),r=gu(g,A.angle,I);a.add(r);var p={fill:new le.fabric.Pattern({source:a.getElement(),repeat:"no-repeat"})};return ea(p,{patternSourceCanvas:a}),p}function jy(A){var I=A.getObjects(),a=ce(I,1),g=a[0],r=yr(g,"fillImageMaxSize"),p=r.fillImageMaxSize;p=Math.max(1,p),A.setDimensions({width:p,height:p}),A.renderAll()}function Fy(A,I){var a=yr(A,"patternSourceCanvas"),g=a.patternSourceCanvas,r=g.getObjects(),p=ce(r,1),M=p[0],T=sa(M);g.remove(M);var L=du(I,!0),P=gu(L,I.angle,T);g.add(P)}function du(A){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!Sr||I)&&(Sr=A.toCanvasElement()),Sr}function By(A){var I=A.type,a=A.shapeObj,g=A.outDistance,r=A.left,p=A.top,M=A.flipX,T=A.flipY,L=hu(a),P=[[1,2],[0,3],[0,3],[1,2]],z=Hy(I,L,P),U=Uy(I,L,z),re=z.startPointIndex,oe=zy({outDistance:g,startPointIndex:re,flipX:M,flipY:T,reatAngles:U});return[r+oe.left,p+oe.top]}function zy(A){var I=A.outDistance,a=A.startPointIndex,g=A.flipX,r=A.flipY,p=A.reatAngles,M=I*Math.cos(p[0]*Math.PI/180),T=I*Math.cos(p[1]*Math.PI/180),L=a===2||a===3,P={top:L?M:T,left:L?T:M};return Vy(a,g,r)&&(P.left=P.left*-1),Wy(a,g,r)&&(P.top=P.top*-1),P}function Hy(A,I,a){var g=0,r=0;J()(I,function(L,P){L[A]<g&&(g=L[A],r=P)});var p=ce(a[r],2),M=p[0],T=p[1];return{startPointIndex:r,endPointIndex1:M,endPointIndex2:T}}function Uy(A,I,a){var g,r=a.startPointIndex,p=a.endPointIndex1,M=a.endPointIndex2,T=A==="x"?180:270;return Tn()(g=[p,M]).call(g,function(L){var P=I[r],z=I[L],U=P.y-z.y,re=P.x-z.x;return Math.atan2(U,re)*180/Math.PI-T})}function Vy(A,I,a){return(!I&&a||!I&&!a)&&A===0||(I&&a||I&&!a)&&A===1||(!I&&!a||!I&&a)&&A===2||(I&&!a||I&&a)&&A===3}function Wy(A,I,a){return(I&&!a||!I&&!a)&&A===0||(!I&&!a||I&&!a)&&A===1||(I&&a||!I&&a)&&A===2||(!I&&a||I&&a)&&A===3}function hu(A){return[A.getPointByOrigin("left","top"),A.getPointByOrigin("right","top"),A.getPointByOrigin("left","bottom"),A.getPointByOrigin("right","bottom")]}function Gy(A){var I=hu(A),a=ce(I,4),g=a[0],r=g.x,p=g.y,M=a[1],T=M.x,L=M.y,P=a[2],z=P.x,U=P.y,re=a[3],oe=re.x,pe=re.y,ue=Math.min(r,T,z,oe),ge=Math.min(p,L,U,pe),Oe=Math.max(r,T,z,oe),Je=Math.max(p,L,U,pe);return{left:ue,top:ge,right:Oe,bottom:Je,width:Oe-ue,height:Je-ge}}function gu(A,I,a){var g,r=new le.fabric.Image(A);return J()(Z().apply(void 0,W()(g=[{}]).call(g,B(a))),function(p,M){var T=Cp(M),L=new le.fabric.Image.filters[T](H({},uu[M],p));r.filters.push(L)}),r.applyFilters(),ea(r,{originalAngle:I,fillImageMaxSize:Math.max(r.width,r.height)}),Un().adjustOriginToCenter(r),r}function Yy(A){var I=Xy();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function Xy(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var pu=Z()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},kt),Zy="rect",$y=20,Jy=20;function vu(A,I,a){var g=ye()(A),r=jc(ye()(A)),p=g;g.color&&(p=g.color);var M=null;if(r==="filter"){var T=a();M=fu(I,ji()(g),T)}else M={fill:p};return Z()({},A,M)}var Qy=function(A){yt(a,A);var I=Yy(a);function a(g){var r,p,M,T,L,P;return Y(this,a),P=I.call(this,Le.SHAPE,g),P._shapeObj=null,P._type=Zy,P._options=Z()({},pu),P._isSelected=!1,P._startPoint={},P._withShiftKey=!1,P._handlers={mousedown:K()(r=P._onFabricMouseDown).call(r,ct(P)),mousemove:K()(p=P._onFabricMouseMove).call(p,ct(P)),mouseup:K()(M=P._onFabricMouseUp).call(M,ct(P)),keydown:K()(T=P._onKeyDown).call(T,ct(P)),keyup:K()(L=P._onKeyUp).call(L,ct(P))},P}return ne(a,[{key:"start",value:function(){var r=this.getCanvas();this._isSelected=!1,r.defaultCursor="crosshair",r.selection=!1,r.uniformScaling=!0,r.on({"mouse:down":this._handlers.mousedown}),le.fabric.util.addListener(document,"keydown",this._handlers.keydown),le.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var r=this.getCanvas();this._isSelected=!1,r.defaultCursor="default",r.selection=!0,r.uniformScaling=!1,r.off({"mouse:down":this._handlers.mousedown}),le.fabric.util.removeListener(document,"keydown",this._handlers.keydown),le.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(r,p){this._type=r,p&&(this._options=Z()(this._options,p))}},{key:"add",value:function(r,p){var M=this;return new(Ie())(function(T){var L=M.getCanvas(),P=M._extendOptions(p),z=M._createInstance(r,P),U=M.graphics.createObjectProperties(z);M._bindEventOnShape(z),L.add(z).setActiveObject(z),M._resetPositionFillFilter(z),T(U)})}},{key:"change",value:function(r,p){var M=this;return new(Ie())(function(T,L){Fc(r)||L(mt.unsupportedType);var P=jc(ye()(p))==="filter",z=M.graphics,U=z.canvasImage,re=z.createStaticCanvas;r.set(P?vu(p,U,re):p),P&&M._resetPositionFillFilter(r),M.getCanvas().renderAll(),T()})}},{key:"makeFillPropertyForUserEvent",value:function(r){var p=ta(r),M={};if(p===Ae.FILTER){var T=ho(r),L=sa(T);M.type=p,M.filter=L}else M.type=Ae.COLOR,M.color=ye()(r)||"transparent";return M}},{key:"processForCopiedObject",value:function(r,p){if(this._bindEventOnShape(r),ta(r)==="filter"){var M=ho(p),T=sa(M),L=this.graphics.createStaticCanvas();r.set(fu(this.graphics.canvasImage,T,L)),this._resetPositionFillFilter(r)}}},{key:"_createInstance",value:function(r,p){var M;switch(r){case"rect":M=new le.fabric.Rect(p);break;case"circle":M=new le.fabric.Ellipse(Z()({type:"circle"},p));break;case"triangle":M=new le.fabric.Triangle(p);break;default:M={}}return M}},{key:"_extendOptions",value:function(r){var p=vn.SELECTION_STYLE,M=this.graphics,T=M.canvasImage,L=M.createStaticCanvas;return r=Z()({},pu,this._options,p,r),vu(r,T,L)}},{key:"_bindEventOnShape",value:function(r){var p=this,M=this.getCanvas();r.on({added:function(){p._shapeObj=this,Un().setOrigins(p._shapeObj)},selected:function(){p._isSelected=!0,p._shapeObj=this,M.uniformScaling=!0,M.defaultCursor="default",Un().setOrigins(p._shapeObj)},deselected:function(){p._isSelected=!1,p._shapeObj=null,M.defaultCursor="crosshair",M.uniformScaling=!1},modified:function(){var L=p._shapeObj;Un().adjustOriginToCenter(L),Un().setOrigins(L)},modifiedInGroup:function(L){p._fillFilterRePositionInGroupSelection(r,L)},moving:function(){p._resetPositionFillFilter(this)},rotating:function(){p._resetPositionFillFilter(this)},scaling:function(L){var P=M.getPointer(L.e),z=p._shapeObj;M.setCursor("crosshair"),Un().resize(z,P,!0),p._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(r){if(r.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var p=this.getCanvas();this._startPoint=p.getPointer(r.e),p.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(r){var p=this,M=this.getCanvas(),T=M.getPointer(r.e),L=this._startPoint.x,P=this._startPoint.y,z=L-T.x,U=P-T.y,re=this._shapeObj;re?(this._shapeObj.set({isRegular:this._withShiftKey}),Un().resize(re,T),M.renderAll(),this._resetPositionFillFilter(re)):this.add(this._type,{left:L,top:P,width:z,height:U}).then(function(oe){p.fire(Ee.ADD_OBJECT,oe)})}},{key:"_onFabricMouseUp",value:function(){var r=this,p=this.getCanvas(),M=this._startPoint.x,T=this._startPoint.y,L=this._shapeObj;L?L&&(Un().adjustOriginToCenter(L),this.fire(Ee.OBJECT_ADDED,this.graphics.createObjectProperties(L))):this.add(this._type,{left:M,top:T,width:$y,height:Jy}).then(function(P){r.fire(Ee.ADD_OBJECT,P)}),p.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(r){r.keyCode===Tt.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(r){r.keyCode===Tt.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(r){if(ta(r)==="filter"){var p=yr(r,"patternSourceCanvas"),M=p.patternSourceCanvas,T=ho(r),L=yr(T,"originalAngle"),P=L.originalAngle;this.graphics.canvasImage.angle!==P&&Fy(r,this.graphics.canvasImage);var z=r.originX,U=r.originY;Un().adjustOriginToCenter(r),r.width*=r.scaleX,r.height*=r.scaleY,r.rx*=r.scaleX,r.ry*=r.scaleY,r.scaleX=1,r.scaleY=1,ky(r),mp(r,{originX:z,originY:U}),jy(M)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(r,p){(p.scaleX!==1||p.scaleY!==1)&&p.addWithUpdate();var M=r.angle,T=r.left,L=r.top;le.fabric.util.addTransformToObject(r,p.calcTransformMatrix()),this._resetPositionFillFilter(r),r.set({angle:M,left:T,top:L})}}]),a}(un);function Ky(A){var I=qy();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function qy(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var aa=10,mu={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},la={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},ca={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},go=1,yu=Ee.ZOOM_CHANGED,eC=Ee.ADD_TEXT,tC=Ee.TEXT_EDITING,nC=Ee.OBJECT_MODIFIED,Cu=Ee.KEY_DOWN,Iu=Ee.KEY_UP,iC=Ee.HAND_STARTED,rC=Ee.HAND_STOPPED,oC=function(A){yt(a,A);var I=Ky(a);function a(g){var r,p,M,T,L,P,z,U,re,oe,pe,ue,ge;Y(this,a),ge=I.call(this,Le.ZOOM,g),ge.zoomArea=null,ge._startPoint=null,ge._centerPoints=[],ge.zoomLevel=go,ge.zoomMode=Xt.DEFAULT,ge._listeners={startZoom:K()(r=ge._onMouseDownWithZoomMode).call(r,ct(ge)),moveZoom:K()(p=ge._onMouseMoveWithZoomMode).call(p,ct(ge)),stopZoom:K()(M=ge._onMouseUpWithZoomMode).call(M,ct(ge)),startHand:K()(T=ge._onMouseDownWithHandMode).call(T,ct(ge)),moveHand:K()(L=ge._onMouseMoveWithHandMode).call(L,ct(ge)),stopHand:K()(P=ge._onMouseUpWithHandMode).call(P,ct(ge)),zoomChanged:K()(z=ge._changeScrollState).call(z,ct(ge)),keydown:K()(U=ge._startHandModeWithSpaceBar).call(U,ct(ge)),keyup:K()(re=ge._endHandModeWithSpaceBar).call(re,ct(ge))};var Oe=ge.getCanvas();return ge.aspectRatio=Oe.width/Oe.height,ge._verticalScroll=new le.fabric.Rect(mu),ge._horizontalScroll=new le.fabric.Rect(mu),Oe.on(yu,ge._listeners.zoomChanged),ge.graphics.on(eC,K()(oe=ge._startTextEditingHandler).call(oe,ct(ge))),ge.graphics.on(tC,K()(pe=ge._startTextEditingHandler).call(pe,ct(ge))),ge.graphics.on(nC,K()(ue=ge._stopTextEditingHandler).call(ue,ct(ge))),ge}return ne(a,[{key:"attachKeyboardZoomEvents",value:function(){le.fabric.util.addListener(document,Cu,this._listeners.keydown),le.fabric.util.addListener(document,Iu,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){le.fabric.util.removeListener(document,Cu,this._listeners.keydown),le.fabric.util.removeListener(document,Iu,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(r){this.withSpace||this.isTextEditing||r.keyCode===Tt.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(r){r.keyCode===Tt.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=Xt.ZOOM;var r=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new le.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),r.discardActiveObject(),r.add(this.zoomArea),r.on("mouse:down",this._listeners.startZoom),r.selection=!1,r.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=Xt.DEFAULT;var r=this.getCanvas(),p=this._listeners,M=p.startZoom,T=p.moveZoom,L=p.stopZoom;r.selection=!0,r.defaultCursor="auto",r.off({"mouse:down":M,"mouse:move":T,"mouse:up":L}),this._changeObjectsEventedState(!0),r.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=Xt.HAND;var r=this.getCanvas();this._changeObjectsEventedState(!1),r.discardActiveObject(),r.off("mouse:down",this._listeners.startHand),r.on("mouse:down",this._listeners.startHand),r.selection=!1,r.defaultCursor="grab",r.fire(iC)}},{key:"endHandMode",value:function(){this.zoomMode=Xt.DEFAULT;var r=this.getCanvas();this._changeObjectsEventedState(!0),r.off("mouse:down",this._listeners.startHand),r.selection=!0,r.defaultCursor="auto",this._startHandPoint=null,r.fire(rC)}},{key:"_onMouseDownWithZoomMode",value:function(r){var p=r.target,M=r.e;if(!p){var T=this.getCanvas();T.selection=!1,this._startPoint=T.getPointer(M),this.zoomArea.set({width:0,height:0});var L=this._listeners,P=L.moveZoom,z=L.stopZoom;T.on({"mouse:move":P,"mouse:up":z})}}},{key:"_onMouseMoveWithZoomMode",value:function(r){var p=r.e,M=this.getCanvas(),T=M.getPointer(p),L=T.x,P=T.y,z=this.zoomArea,U=this._startPoint,re=Math.abs(L-U.x),oe=Math.abs(P-U.y);re+oe>aa&&(M.remove(z),z.set(this._calcRectDimensionFromPoint(L,P)),M.add(z))}},{key:"_calcRectDimensionFromPoint",value:function(r,p){var M=this.getCanvas(),T=M.getWidth(),L=M.getHeight(),P=this._startPoint,z=P.x,U=P.y,re=Math.min,oe=re(z,r),pe=re(U,p),ue=et(r,z,T)-oe,ge=et(p,U,L)-pe;return{left:oe,top:pe,width:ue,height:ge}}},{key:"_onMouseUpWithZoomMode",value:function(){var r=this.zoomLevel,p=this.zoomArea,M=this._listeners,T=M.moveZoom,L=M.stopZoom,P=this.getCanvas(),z=this._getCenterPoint(),U=z.x,re=z.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:U,y:re,prevZoomLevel:r,zoomLevel:r+1}),r+=1,P.zoomToPoint({x:U,y:re},r),this._fireZoomChanged(P,r),this.zoomLevel=r),P.off({"mouse:move":T,"mouse:up":L}),P.remove(p),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var r=this.zoomArea,p=r.left,M=r.top,T=r.width,L=r.height,P=this._startPoint,z=P.x,U=P.y,re=this.aspectRatio;return T<aa&&L<aa?{x:z,y:U}:T>L?{x:p+re*L/2,y:M+L/2}:{x:p+T/2,y:M+T/re/2}}},{key:"zoom",value:function(r){for(var p=r.x,M=r.y,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,L=this.getCanvas(),P=this._centerPoints,z=P.length-1;z>=0&&!(P[z].zoomLevel<T);z-=1){var U=P.pop(),re=U.x,oe=U.y,pe=U.prevZoomLevel;L.zoomToPoint({x:re,y:oe},pe),this.zoomLevel=pe}L.zoomToPoint({x:p,y:M},T),this._isDefaultZoomLevel(T)||this._centerPoints.push({x:p,y:M,zoomLevel:T,prevZoomLevel:this.zoomLevel}),this.zoomLevel=T,this._fireZoomChanged(L,T)}},{key:"zoomOut",value:function(){var r=this._centerPoints;if(r.length){var p=this.getCanvas(),M=r.pop(),T=M.x,L=M.y,P=M.prevZoomLevel;this._isDefaultZoomLevel(P)?p.setViewportTransform([1,0,0,1,0,0]):p.zoomToPoint({x:T,y:L},P),this.zoomLevel=P,this._fireZoomChanged(p,this.zoomLevel)}}},{key:"resetZoom",value:function(){var r=this.getCanvas();r.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=go,this._centerPoints=[],this._fireZoomChanged(r,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(r){var p=r.x,M=r.y,T=this._centerPoints;if(T.length){var L=this.getCanvas(),P=this.zoomLevel,z=T.pop(),U=z.x,re=z.y,oe=z.prevZoomLevel,pe=U-p,ue=re-M;L.zoomToPoint({x:U,y:re},oe),L.zoomToPoint({x:pe,y:ue},P),T.push({x:pe,y:ue,prevZoomLevel:oe,zoomLevel:P}),this._fireZoomChanged(L,P)}}},{key:"_onMouseDownWithHandMode",value:function(r){var p=r.target,M=r.e;if(!p){var T=this.getCanvas();if(!(this.zoomLevel<=go)){T.selection=!1,this._startHandPoint=T.getPointer(M);var L=this._listeners,P=L.moveHand,z=L.stopHand;T.on({"mouse:move":P,"mouse:up":z})}}}},{key:"_onMouseMoveWithHandMode",value:function(r){var p=r.e,M=this.getCanvas(),T=M.getPointer(p),L=T.x,P=T.y,z=L-this._startHandPoint.x,U=P-this._startHandPoint.y;this._movePointOfZoom({x:z,y:U})}},{key:"_onMouseUpWithHandMode",value:function(){var r=this.getCanvas(),p=this._listeners,M=p.moveHand,T=p.stopHand;r.off({"mouse:move":M,"mouse:up":T}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(r){var p=r.viewport,M=r.zoomLevel,T=this.getCanvas();if(T.remove(this._verticalScroll),T.remove(this._horizontalScroll),!this._isDefaultZoomLevel(M)){var L=T.width,P=T.height,z=p.tl,U=p.tr,re=p.bl,oe=U.x-z.x,pe=re.y-z.y,ue=oe*oe/L,ge=pe*ca.SIZE,Oe=et(z.x+z.x/L*oe,z.x,U.x-ue),Je=pe*ca.MARGIN,Qe=pe*ca.BORDER_RADIUS;this._horizontalScroll.set({left:Oe,top:re.y-ge-Je,width:ue,height:ge,rx:Qe,ry:Qe});var Ke=oe*la.SIZE,Re=pe*pe/P,dt=et(z.y+z.y/P*pe,U.y,re.y-Re),Gt=oe*la.MARGIN,on=oe*la.BORDER_RADIUS;this._verticalScroll.set({left:U.x-Ke-Gt,top:dt,width:Ke,height:Re,rx:on,ry:on}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=this.getCanvas();p.forEachObject(function(M){M.evented=r})}},{key:"_addScrollBar",value:function(){var r=this,p=this.getCanvas();p.add(this._horizontalScroll),p.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=i()(function(){p.remove(r._horizontalScroll),p.remove(r._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(r){return r===go}},{key:"_fireZoomChanged",value:function(r,p){r.fire(yu,{viewport:r.calcViewportBoundaries(),zoomLevel:p})}},{key:"mode",get:function(){return this.zoomMode}}]),a}(un),sC=oC,bu=ao.create,Su=ao.types,aC=function(){function A(I){Y(this,A),this.name=I}return ne(A,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(bu(Su.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(bu(Su.UN_IMPLEMENTATION,"stop"))}}]),A}(),ii=aC;function lC(A){var I=cC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function cC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var uC=function(A){yt(a,A);var I=lC(a);function a(){return Y(this,a),I.call(this,ft.CROPPER)}return ne(a,[{key:"start",value:function(r){var p=r.getComponent(Le.CROPPER);p.start()}},{key:"end",value:function(r){var p=r.getComponent(Le.CROPPER);p.end()}}]),a}(ii),fC=uC;function dC(A){var I=hC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function hC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var gC=function(A){yt(a,A);var I=dC(a);function a(){return Y(this,a),I.call(this,ft.FREE_DRAWING)}return ne(a,[{key:"start",value:function(r,p){var M=r.getComponent(Le.FREE_DRAWING);M.start(p)}},{key:"end",value:function(r){var p=r.getComponent(Le.FREE_DRAWING);p.end()}}]),a}(ii),pC=gC;function vC(A){var I=mC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function mC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var yC=function(A){yt(a,A);var I=vC(a);function a(){return Y(this,a),I.call(this,ft.LINE_DRAWING)}return ne(a,[{key:"start",value:function(r,p){var M=r.getComponent(Le.LINE);M.start(p)}},{key:"end",value:function(r){var p=r.getComponent(Le.LINE);p.end()}}]),a}(ii),CC=yC;function IC(A){var I=bC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function bC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var SC=function(A){yt(a,A);var I=IC(a);function a(){return Y(this,a),I.call(this,ft.SHAPE)}return ne(a,[{key:"start",value:function(r){var p=r.getComponent(Le.SHAPE);p.start()}},{key:"end",value:function(r){var p=r.getComponent(Le.SHAPE);p.end()}}]),a}(ii),DC=SC;function xC(A){var I=EC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function EC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var MC=function(A){yt(a,A);var I=xC(a);function a(){return Y(this,a),I.call(this,ft.TEXT)}return ne(a,[{key:"start",value:function(r){var p=r.getComponent(Le.TEXT);p.start()}},{key:"end",value:function(r){var p=r.getComponent(Le.TEXT);p.end()}}]),a}(ii),_C=MC;function wC(A){var I=TC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function TC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var AC=function(A){yt(a,A);var I=wC(a);function a(){return Y(this,a),I.call(this,ft.ICON)}return ne(a,[{key:"start",value:function(r){var p=r.getComponent(Le.ICON);p.start()}},{key:"end",value:function(r){var p=r.getComponent(Le.ICON);p.end()}}]),a}(ii),OC=AC;function NC(A){var I=kC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function kC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var PC=function(A){yt(a,A);var I=NC(a);function a(){return Y(this,a),I.call(this,ft.ZOOM)}return ne(a,[{key:"start",value:function(r){var p=r.getComponent(Le.ZOOM);p.start()}},{key:"end",value:function(r){var p=r.getComponent(Le.ZOOM);p.end()}}]),a}(ii),LC=PC,Du=null;function xu(A){Du=A}function RC(){return Du}function ua(A,I){var a;if(A.type==="activeSelection"){var g;a=Tn()(g=A.getObjects()).call(g,function(r){var p=r.angle,M=r.left,T=r.top,L=r.scaleX,P=r.scaleY,z=r.width,U=r.height;le.fabric.util.addTransformToObject(r,A.calcTransformMatrix());var re=I(r);return r.set({angle:p,left:M,top:T,width:z,height:U,scaleX:L,scaleY:P}),re})}else a=[I(A)];return a}function fa(A,I,a){return a?{id:A,width:I.width,height:I.height,top:I.top,left:I.left,angle:I.angle,scaleX:I.scaleX,scaleY:I.scaleY}:Z()({id:A},I)}function jC(A){var I=FC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function FC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var BC=function(A){yt(a,A);var I=jC(a);function a(g){var r;return Y(this,a),r=I.call(this,Le.RESIZE,g),r._dimensions=null,r._originalDimensions=null,r}return ne(a,[{key:"getCurrentDimensions",value:function(){var r=this.getCanvasImage();if(!this._dimensions&&r){var p=r.width,M=r.height;this._dimensions={width:p,height:M}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(r){this._originalDimensions=r}},{key:"resize",value:function(r){var p=this.getCanvasImage(),M=p.width,T=p.height,L=p.scaleX,P=p.scaleY,z=r.width,U=r.height,re={scaleX:z?z/M:L,scaleY:U?U/T:P};return(L!==re.scaleX||P!==re.scaleY)&&(p.set(re).setCoords(),this._dimensions={width:p.width*p.scaleX,height:p.height*p.scaleY}),this.adjustCanvasDimensionBase(),Ie().resolve()}},{key:"start",value:function(){var r=this.getCurrentDimensions();this.setOriginalDimensions(r)}},{key:"end",value:function(){}}]),a}(un),zC=BC;function HC(A){var I=UC();return function(){var g=$e(A),r;if(I){var p=$e(this).constructor;r=_e()(g,arguments,p)}else r=g.apply(this,arguments);return Ct(this,r)}}function UC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var VC=function(A){yt(a,A);var I=HC(a);function a(){return Y(this,a),I.call(this,ft.RESIZE)}return ne(a,[{key:"start",value:function(r){var p=r.getComponent(Le.RESIZE);p.start()}},{key:"end",value:function(r){var p=r.getComponent(Le.RESIZE);p.end()}}]),a}(ii),WC=VC,GC=1e3,YC=800,po=10,XC={cssOnly:!0},ZC={backstoreOnly:!0},Eu=function(){function A(I){var a,g,r,p,M,T,L,P,z,U,re,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=oe.cssMaxWidth,ue=oe.cssMaxHeight;Y(this,A),this.canvasImage=null,this.cssMaxWidth=pe||GC,this.cssMaxHeight=ue||YC,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=ft.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:K()(a=this._onMouseDown).call(a,this),onObjectAdded:K()(g=this._onObjectAdded).call(g,this),onObjectRemoved:K()(r=this._onObjectRemoved).call(r,this),onObjectMoved:K()(p=this._onObjectMoved).call(p,this),onObjectScaled:K()(M=this._onObjectScaled).call(M,this),onObjectModified:K()(T=this._onObjectModified).call(T,this),onObjectRotated:K()(L=this._onObjectRotated).call(L,this),onObjectSelected:K()(P=this._onObjectSelected).call(P,this),onPathCreated:K()(z=this._onPathCreated).call(z,this),onSelectionCleared:K()(U=this._onSelectionCleared).call(U,this),onSelectionCreated:K()(re=this._onSelectionCreated).call(re,this)},this._setObjectCachingToFalse(),this._setCanvasElement(I),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return ne(A,[{key:"destroy",value:function(){var a=this._canvas.wrapperEl;this._canvas.clear(),a.parentNode.removeChild(a),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var a=this.getComponent(Le.ZOOM);a.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var a=this.getComponent(Le.ZOOM);a.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(a){var g,r=[];su()(a)?r=a:r.push(a),(g=this._canvas).add.apply(g,B(r))}},{key:"contains",value:function(a){return this._canvas.contains(a)}},{key:"getObjects",value:function(){var a;return C()(a=this._canvas.getObjects()).call(a)}},{key:"getObject",value:function(a){return this._objects[a]}},{key:"remove",value:function(a){this._canvas.remove(a)}},{key:"removeAll",value:function(a){var g,r=this._canvas,p=C()(g=r.getObjects()).call(g);return r.remove.apply(r,B(this._canvas.getObjects())),a&&r.clear(),p}},{key:"removeObjectById",value:function(a){var g=[],r=this._canvas,p=this.getObject(a),M=p&&p.isType("group")&&!p.isEmpty();return M?(r.discardActiveObject(),p.forEachObject(function(T){g.push(T),r.remove(T)})):r.contains(p)&&(g.push(p),r.remove(p)),g}},{key:"getObjectId",value:function(a){var g=null;for(g in this._objects)if(this._objects.hasOwnProperty(g)&&a===this._objects[g])return g;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var a=this.getActiveObject(),g=a.type,r=a.left,p=a.top,M=g==="activeSelection";if(M){var T=new le.fabric.Group(B(a.getObjects()),{left:r,top:p});return this._addFabricObject(T)}return this.getObjectId(a)}},{key:"isReadyRemoveObject",value:function(){var a=this.getActiveObject();return a&&!a.isEditing}},{key:"getActiveObjects",value:function(){var a=this._canvas._activeObject;return a&&a.type==="activeSelection"?a:null}},{key:"getActiveSelectionFromObjects",value:function(a){var g=this.getCanvas();return new le.fabric.ActiveSelection(a,{canvas:g})}},{key:"setActiveObject",value:function(a){this._canvas.setActiveObject(a)}},{key:"setCropSelectionStyle",value:function(a){this.cropSelectionStyle=a}},{key:"getComponent",value:function(a){return this._componentMap[a]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(a,g){if(this._isSameDrawingMode(a))return!0;this.stopDrawingMode();var r=this._getDrawingModeInstance(a);return r&&r.start&&(r.start(this,g),this._drawingMode=a),!!r}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(ft.NORMAL)){var a=this._getDrawingModeInstance(this.getDrawingMode());a&&a.end&&a.end(this),this._drawingMode=ft.NORMAL}}},{key:"zoom",value:function(a,g){var r=a.x,p=a.y,M=this.getComponent(Le.ZOOM);M.zoom({x:r,y:p},g)}},{key:"getZoomMode",value:function(){var a=this.getComponent(Le.ZOOM);return a.mode}},{key:"startZoomInMode",value:function(){var a=this.getComponent(Le.ZOOM);a.startZoomInMode()}},{key:"endZoomInMode",value:function(){var a=this.getComponent(Le.ZOOM);a.endZoomInMode()}},{key:"zoomOut",value:function(){var a=this.getComponent(Le.ZOOM);a.zoomOut()}},{key:"startHandMode",value:function(){var a=this.getComponent(Le.ZOOM);a.startHandMode()}},{key:"endHandMode",value:function(){var a=this.getComponent(Le.ZOOM);a.endHandMode()}},{key:"resetZoom",value:function(){var a=this.getComponent(Le.ZOOM);a.resetZoom()}},{key:"toDataURL",value:function(a){var g=this.getComponent(Le.CROPPER);g.changeVisibility(!1);var r=this._canvas&&this._canvas.toDataURL(a);return g.changeVisibility(!0),r}},{key:"setCanvasImage",value:function(a,g){g&&Pe(g),this.imageName=a,this.canvasImage=g}},{key:"setCssMaxDimension",value:function(a){this.cssMaxWidth=a.width||this.cssMaxWidth,this.cssMaxHeight=a.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;a||(a=this.canvasImage);var g=a.getBoundingRect(),r=g.width,p=g.height,M=this._calcMaxDimension(r,p);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(M.width,"px"),"max-height":"".concat(M.height,"px")}),this.setCanvasBackstoreDimension({width:r,height:p}),this._canvas.centerObject(a)}},{key:"setCanvasCssDimension",value:function(a){this._canvas.setDimensions(a,XC)}},{key:"setCanvasBackstoreDimension",value:function(a){this._canvas.setDimensions(a,ZC)}},{key:"setImageProperties",value:function(a,g){var r=this.canvasImage;r&&(r.set(a).setCoords(),g&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(a){var g,r=this,p=K()(g=this._callbackAfterLoadingImageObject).call(g,this);return new(Ie())(function(M){le.fabric.Image.fromURL(a,function(T){p(T),M(r.createObjectProperties(T))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(Le.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(a){this.getComponent(Le.CROPPER).setCropzoneRect(a)}},{key:"getCroppedImageData",value:function(a){return this.getComponent(Le.CROPPER).getCroppedImageData(a)}},{key:"setBrush",value:function(a){var g=this._drawingMode,r=Le.FREE_DRAWING;g===ft.LINE_DRAWING&&(r=Le.LINE),this.getComponent(r).setBrush(a)}},{key:"setDrawingShape",value:function(a,g){this.getComponent(Le.SHAPE).setStates(a,g)}},{key:"setIconStyle",value:function(a,g){this.getComponent(Le.ICON).setStates(a,g)}},{key:"registerPaths",value:function(a){this.getComponent(Le.ICON).registerPaths(a)}},{key:"changeCursor",value:function(a){var g=this.getCanvas();g.defaultCursor=a,g.renderAll()}},{key:"hasFilter",value:function(a){return this.getComponent(Le.FILTER).hasFilter(a)}},{key:"setSelectionStyle",value:function(a){Z()(vn.SELECTION_STYLE,a)}},{key:"setObjectProperties",value:function(a,g){var r=this.getObject(a),p=Z()({},g);return r.set(p),r.setCoords(),this.getCanvas().renderAll(),p}},{key:"getObjectProperties",value:function(a,g){var r=this.getObject(a),p={};return Se()(g)?p[g]=r[g]:su()(g)?Cr()(g,function(M){p[M]=r[M]}):co()(g,function(M,T){p[T]=r[T]}),p}},{key:"getObjectPosition",value:function(a,g,r){var p=this.getObject(a);return p?p.getPointByOrigin(g,r):null}},{key:"setObjectPosition",value:function(a,g){var r=this.getObject(a),p=g.x,M=g.y,T=g.originX,L=g.originY;if(!r)return!1;var P=r.getPointByOrigin(T,L),z=r.getPointByOrigin("center","center"),U=z.x-P.x,re=z.y-P.y;return r.set({left:p+U,top:M+re}),r.setCoords(),!0}},{key:"getCanvasSize",value:function(){var a=this.getCanvasImage();return{width:a?a.width:0,height:a?a.height:0}}},{key:"createStaticCanvas",value:function(){var a=new le.fabric.StaticCanvas;return a.set({enableRetinaScaling:!1}),a}},{key:"_getDrawingModeInstance",value:function(a){return this._drawingModeMap[a]}},{key:"_setObjectCachingToFalse",value:function(){le.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(a){var g,r;a.nodeType?g=a:g=document.querySelector(a),g.nodeName.toUpperCase()!=="CANVAS"&&(r=document.createElement("canvas"),g.appendChild(r)),this._canvas=new le.fabric.Canvas(r,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new fC),this._register(this._drawingModeMap,new pC),this._register(this._drawingModeMap,new CC),this._register(this._drawingModeMap,new DC),this._register(this._drawingModeMap,new _C),this._register(this._drawingModeMap,new OC),this._register(this._drawingModeMap,new LC),this._register(this._drawingModeMap,new WC)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new Dm(this)),this._register(this._componentMap,new zm(this)),this._register(this._componentMap,new Wm(this)),this._register(this._componentMap,new Zm(this)),this._register(this._componentMap,new Km(this)),this._register(this._componentMap,new sy(this)),this._register(this._componentMap,new hy(this)),this._register(this._componentMap,new yy(this)),this._register(this._componentMap,new Ay(this)),this._register(this._componentMap,new Qy(this)),this._register(this._componentMap,new sC(this)),this._register(this._componentMap,new zC(this))}},{key:"_register",value:function(a,g){a[g.getName()]=g}},{key:"_isSameDrawingMode",value:function(a){return this.getDrawingMode()===a}},{key:"_calcMaxDimension",value:function(a,g){var r=this.cssMaxWidth/a,p=this.cssMaxHeight/g,M=Math.min(a,this.cssMaxWidth),T=Math.min(g,this.cssMaxHeight);return r<1&&r<p?(M=a*r,T=g*r):p<1&&p<r&&(M=a*p,T=g*p),{width:Math.floor(M),height:Math.floor(T)}}},{key:"_callbackAfterLoadingImageObject",value:function(a){var g=this.getCanvasImage().getCenterPoint();a.set(vn.SELECTION_STYLE),a.set({left:g.x,top:g.y,crossOrigin:"Anonymous"}),this.getCanvas().add(a).setActiveObject(a)}},{key:"_attachCanvasEvents",value:function(){var a=this._canvas,g=this._handler;a.on({"mouse:down":g.onMouseDown,"object:added":g.onObjectAdded,"object:removed":g.onObjectRemoved,"object:moving":g.onObjectMoved,"object:scaling":g.onObjectScaled,"object:modified":g.onObjectModified,"object:rotating":g.onObjectRotated,"path:created":g.onPathCreated,"selection:cleared":g.onSelectionCleared,"selection:created":g.onSelectionCreated,"selection:updated":g.onObjectSelected})}},{key:"_onMouseDown",value:function(a){var g=this,r=a.e,p=a.target,M=this._canvas.getPointer(r);if(p){var T=p.type,L=ua(p,function(P){return fa(g.getObjectId(P),P,T==="activeSelection")});xu(L)}this.fire(Ee.MOUSE_DOWN,r,M)}},{key:"_onObjectAdded",value:function(a){var g=a.target;g.isType("cropzone")||this._addFabricObject(g)}},{key:"_onObjectRemoved",value:function(a){var g=a.target;this._removeFabricObject(Pe(g))}},{key:"_onObjectMoved",value:function(a){var g=this;this._lazyFire(Ee.OBJECT_MOVED,function(r){return g.createObjectProperties(r)},a.target)}},{key:"_onObjectScaled",value:function(a){var g=this;this._lazyFire(Ee.OBJECT_SCALED,function(r){return g.createObjectProperties(r)},a.target)}},{key:"_onObjectModified",value:function(a){var g=a.target;if(g.type==="activeSelection"){var r=g.getObjects();Ve()(r).call(r,function(p){return p.fire("modifiedInGroup",g)})}this.fire(Ee.OBJECT_MODIFIED,g,this.getObjectId(g))}},{key:"_onObjectRotated",value:function(a){var g=this;this._lazyFire(Ee.OBJECT_ROTATED,function(r){return g.createObjectProperties(r)},a.target)}},{key:"_lazyFire",value:function(a,g,r){var p=this,M=r&&r.canvasEventDelegation,T=M?r.canvasEventDelegation(a):"none";T==="unregistered"&&r.canvasEventRegister(a,function(L){p.fire(a,g(L))}),T==="none"&&this.fire(a,g(r))}},{key:"_onObjectSelected",value:function(a){var g=a.target,r=this.createObjectProperties(g);this.fire(Ee.OBJECT_ACTIVATED,r)}},{key:"_onPathCreated",value:function(a){var g=a.path.getCenterPoint(),r=g.x,p=g.y;a.path.set(Z()({left:r,top:p},vn.SELECTION_STYLE));var M=this.createObjectProperties(a.path);this.fire(Ee.ADD_OBJECT,M)}},{key:"_onSelectionCleared",value:function(){this.fire(Ee.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(a){var g=a.target,r=this.createObjectProperties(g);this.fire(Ee.OBJECT_ACTIVATED,r),this.fire(Ee.SELECTION_CREATED,a.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(a){this._canvas.forEachObject(function(g){g.selectable=a,g.hoverCursor=a?"move":"crosshair"})}},{key:"createObjectProperties",value:function(a){var g=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],r={id:Pe(a),type:a.type};if(Z()(r,Qt(a,g)),so(["i-text","text"],a.type))Z()(r,this._createTextProperties(a,r));else if(so(["rect","triangle","circle"],a.type)){var p=this.getComponent(Le.SHAPE);Z()(r,{fill:p.makeFillPropertyForUserEvent(a)})}return r}},{key:"_createTextProperties",value:function(a){var g=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],r={};return Z()(r,Qt(a,g)),r}},{key:"_addFabricObject",value:function(a){var g=Pe(a);return this._objects[g]=a,g}},{key:"_removeFabricObject",value:function(a){delete this._objects[a]}},{key:"resetTargetObjectForCopyPaste",value:function(){var a=this.getActiveObject();a&&(this.targetObjectForCopyPaste=a)}},{key:"pasteObject",value:function(){var a=this;if(!this.targetObjectForCopyPaste)return Ie().resolve([]);var g=this.targetObjectForCopyPaste,r=g.type==="activeSelection",p=r?g.getObjects():[g],M=null;return this.discardSelection(),this._cloneObject(p).then(function(T){if(T.length>1)M=a.getActiveSelectionFromObjects(T);else{var L=ce(T,1);M=L[0]}a.targetObjectForCopyPaste=M,a.setActiveObject(M)})}},{key:"_cloneObject",value:function(a){var g=this,r=Tn()(a).call(a,function(p){return g._cloneObjectItem(p)});return Ie().all(r)}},{key:"_cloneObjectItem",value:function(a){var g=this;return this._copyFabricObjectForPaste(a).then(function(r){var p=g.createObjectProperties(r);return g.add(r),g.fire(Ee.ADD_OBJECT,p),r})}},{key:"_copyFabricObjectForPaste",value:function(a){var g=this,r=function(M,T){return T?M-po:M+po};return this._copyFabricObject(a).then(function(p){var M=p.left,T=p.top,L=p.width,P=p.height,z=g.getCanvasSize(),U=z.width,re=z.height,oe=M+L/2,pe=T+P/2;return p.set(Z()({left:r(M,oe+po>U),top:r(T,pe+po>re)},vn.SELECTION_STYLE)),p})}},{key:"_copyFabricObject",value:function(a){var g=this;return new(Ie())(function(r){a.clone(function(p){var M=g.getComponent(Le.SHAPE);Fc(p)&&M.processForCopiedObject(p,a),r(p)})})}},{key:"getCurrentDimensions",value:function(){var a=this.getComponent(Le.RESIZE);return a.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var a=this.getComponent(Le.RESIZE);return a.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(a){var g=this.getComponent(Le.RESIZE);g.setOriginalDimensions(a)}},{key:"resize",value:function(a){var g=this.getComponent(Le.RESIZE);return g.resize(a)}}]),A}();ve().mixin(Eu);var $C=Eu,JC=Ee.MOUSE_DOWN,QC=Ee.OBJECT_MOVED,KC=Ee.OBJECT_SCALED,qC=Ee.OBJECT_ACTIVATED,eI=Ee.OBJECT_ROTATED,Mu=Ee.OBJECT_ADDED,tI=Ee.OBJECT_MODIFIED,nI=Ee.ADD_TEXT,iI=Ee.ADD_OBJECT,rI=Ee.TEXT_EDITING,oI=Ee.TEXT_CHANGED,sI=Ee.ICON_CREATE_RESIZE,aI=Ee.ICON_CREATE_END,_u=Ee.SELECTION_CLEARED,wu=Ee.SELECTION_CREATED,lI=Ee.ADD_OBJECT_AFTER,da=function(){function A(I,a){var g,r,p,M,T,L,P,z,U,re,oe,pe,ue,ge,Oe,Je;if(Y(this,A),a=Z()({includeUI:!1,usageStatistics:!0},a),this.mode=null,this.activeObjectId=null,a.includeUI){var Qe=a.includeUI;Qe.usageStatistics=a.usageStatistics,this.ui=new hm(I,Qe,this.getActions()),a=this.ui.setUiDefaultSelectionStyle(a)}this._invoker=new Op,this._graphics=new $C(this.ui?this.ui.getEditorArea():I,{cssMaxWidth:a.cssMaxWidth,cssMaxHeight:a.cssMaxHeight}),this._handlers={keydown:K()(g=this._onKeyDown).call(g,this),mousedown:K()(r=this._onMouseDown).call(r,this),objectActivated:K()(p=this._onObjectActivated).call(p,this),objectMoved:K()(M=this._onObjectMoved).call(M,this),objectScaled:K()(T=this._onObjectScaled).call(T,this),objectRotated:K()(L=this._onObjectRotated).call(L,this),objectAdded:K()(P=this._onObjectAdded).call(P,this),objectModified:K()(z=this._onObjectModified).call(z,this),createdPath:this._onCreatedPath,addText:K()(U=this._onAddText).call(U,this),addObject:K()(re=this._onAddObject).call(re,this),textEditing:K()(oe=this._onTextEditing).call(oe,this),textChanged:K()(pe=this._onTextChanged).call(pe,this),iconCreateResize:K()(ue=this._onIconCreateResize).call(ue,this),iconCreateEnd:K()(ge=this._onIconCreateEnd).call(ge,this),selectionCleared:K()(Oe=this._selectionCleared).call(Oe,this),selectionCreated:K()(Je=this._selectionCreated).call(Je,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(a.selectionStyle,{applyCropSelectionStyle:a.applyCropSelectionStyle,applyGroupSelectionStyle:a.applyGroupSelectionStyle}),a.usageStatistics&&io(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),le.fabric.enableGLFiltering=!1}return ne(A,[{key:"_attachColorPickerInputBoxEvents",value:function(){var a=this;this.ui.on(Ee.INPUT_BOX_EDITING_STARTED,function(){a.isColorPickerInputBoxEditing=!0}),this.ui.on(Ee.INPUT_BOX_EDITING_STOPPED,function(){a.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(Ee.INPUT_BOX_EDITING_STARTED),this.ui.off(Ee.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(a,g){var r=g.applyCropSelectionStyle,p=g.applyGroupSelectionStyle;a&&this._graphics.setSelectionStyle(a),r&&this._graphics.setCropSelectionStyle(a),p&&this.on("selectionCreated",function(M){M.type==="activeSelection"&&M.set(a)})}},{key:"_attachInvokerEvents",value:function(){var a,g,r=this,p=Ee.UNDO_STACK_CHANGED,M=Ee.REDO_STACK_CHANGED,T=Ee.EXECUTE_COMMAND,L=Ee.AFTER_UNDO,P=Ee.AFTER_REDO,z=Ee.HAND_STARTED,U=Ee.HAND_STOPPED;if(this._invoker.on(p,K()(a=this.fire).call(a,this,p)),this._invoker.on(M,K()(g=this.fire).call(g,this,M)),this.ui){var re=this._graphics.getCanvas();this._invoker.on(T,function(oe){return r.ui.fire(T,oe)}),this._invoker.on(L,function(oe){return r.ui.fire(L,oe)}),this._invoker.on(P,function(oe){return r.ui.fire(P,oe)}),re.on(z,function(){return r.ui.fire(z)}),re.on(U,function(){return r.ui.fire(U)})}}},{key:"_attachGraphicsEvents",value:function(){var a;this._graphics.on((a={},H(a,JC,this._handlers.mousedown),H(a,QC,this._handlers.objectMoved),H(a,KC,this._handlers.objectScaled),H(a,eI,this._handlers.objectRotated),H(a,qC,this._handlers.objectActivated),H(a,Mu,this._handlers.objectAdded),H(a,tI,this._handlers.objectModified),H(a,nI,this._handlers.addText),H(a,iI,this._handlers.addObject),H(a,rI,this._handlers.textEditing),H(a,oI,this._handlers.textChanged),H(a,sI,this._handlers.iconCreateResize),H(a,aI,this._handlers.iconCreateEnd),H(a,_u,this._handlers.selectionCleared),H(a,wu,this._handlers.selectionCreated),a))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(a){var g=a.ctrlKey,r=a.keyCode,p=a.metaKey,M=g||p;M&&(r===Tt.C?this._graphics.resetTargetObjectForCopyPaste():r===Tt.V?(this._graphics.pasteObject(),this.clearRedoStack()):r===Tt.Z?this.undo().catch(function(){}):r===Tt.Y&&this.redo().catch(function(){}));var T=r===Tt.BACKSPACE||r===Tt.DEL,L=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&L&&T&&(a.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var a=this._graphics.getActiveObjectIdForRemove();this.removeObject(a)}},{key:"_onMouseDown",value:function(a,g){this.fire(Ee.MOUSE_DOWN,a,g)}},{key:"_pushAddObjectCommand",value:function(a){var g=At.create(Ge.ADD_OBJECT,this._graphics,a);this._invoker.pushUndoStack(g)}},{key:"_pushModifyObjectCommand",value:function(a){var g=this,r=a.type,p=ua(a,function(T){return fa(g._graphics.getObjectId(T),T,r==="activeSelection")}),M=At.create(Ge.CHANGE_SELECTION,this._graphics,p);M.execute(this._graphics,p),this._invoker.pushUndoStack(M)}},{key:"_onObjectActivated",value:function(a){this.fire(Ee.OBJECT_ACTIVATED,a)}},{key:"_onObjectMoved",value:function(a){this.fire(Ee.OBJECT_MOVED,a)}},{key:"_onObjectScaled",value:function(a){this.fire(Ee.OBJECT_SCALED,a)}},{key:"_onObjectRotated",value:function(a){this.fire(Ee.OBJECT_ROTATED,a)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Ge.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(a){this._graphics.changeSelectableAll(a)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(a){for(var g,r,p,M=arguments.length,T=new Array(M>1?M-1:0),L=1;L<M;L++)T[L-1]=arguments[L];var P=W()(g=[this._graphics]).call(g,T);return(r=this._invoker).execute.apply(r,W()(p=[a]).call(p,B(P)))}},{key:"executeSilent",value:function(a){for(var g,r,p,M=arguments.length,T=new Array(M>1?M-1:0),L=1;L<M;L++)T[L-1]=arguments[L];var P=W()(g=[this._graphics]).call(g,T);return(r=this._invoker).executeSilent.apply(r,W()(p=[a]).call(p,B(P)))}},{key:"undo",value:function(){for(var a=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=Ie().resolve(),p=0;p<g;p+=1)r=r.then(function(){return a._invoker.undo()});return r}},{key:"redo",value:function(){for(var a=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=Ie().resolve(),p=0;p<g;p+=1)r=r.then(function(){return a._invoker.redo()});return r}},{key:"zoom",value:function(a){var g=a.x,r=a.y,p=a.zoomLevel;this._graphics.zoom({x:g,y:r},p)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(a,g){if(!a)return Ie().reject(mt.invalidParameters);var r=te().createObjectURL(a);return g=g||a.name,this.loadImageFromURL(r,g).then(function(p){return te().revokeObjectURL(a),p})}},{key:"loadImageFromURL",value:function(a,g){return!g||!a?Ie().reject(mt.invalidParameters):this.execute(Ge.LOAD_IMAGE,g,a)}},{key:"addImageObject",value:function(a){return a?this.execute(Ge.ADD_IMAGE_OBJECT,a):Ie().reject(mt.invalidParameters)}},{key:"startDrawingMode",value:function(a,g){return this._graphics.startDrawingMode(a,g)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(a){var g=this._graphics.getCroppedImageData(a);return g?this.loadImageFromURL(g.url,g.imageName):Ie().reject(mt.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(a){this._graphics.setCropzoneRect(a)}},{key:"_flip",value:function(a){return this.execute(Ge.FLIP_IMAGE,a)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(a,g,r){var p=null;return r?p=this.executeSilent(Ge.ROTATE_IMAGE,a,g):p=this.execute(Ge.ROTATE_IMAGE,a,g),p}},{key:"rotate",value:function(a,g){return this._rotate("rotate",a,g)}},{key:"setAngle",value:function(a,g){return this._rotate("setAngle",a,g)}},{key:"setBrush",value:function(a){this._graphics.setBrush(a)}},{key:"setDrawingShape",value:function(a,g){this._graphics.setDrawingShape(a,g)}},{key:"setDrawingIcon",value:function(a,g){this._graphics.setIconStyle(a,g)}},{key:"addShape",value:function(a,g){return g=g||{},this._setPositions(g),this.execute(Ge.ADD_SHAPE,a,g)}},{key:"changeShape",value:function(a,g,r){var p=r?"executeSilent":"execute";return this[p](Ge.CHANGE_SHAPE,a,g)}},{key:"addText",value:function(a,g){return a=a||"",g=g||{},this.execute(Ge.ADD_TEXT,a,g)}},{key:"changeText",value:function(a,g){return g=g||"",this.execute(Ge.CHANGE_TEXT,a,g)}},{key:"changeTextStyle",value:function(a,g,r){var p=r?"executeSilent":"execute";return this[p](Ge.CHANGE_TEXT_STYLE,a,g)}},{key:"_changeActivateMode",value:function(a){a!=="ICON"&&this.getDrawingMode()!==a&&this.startDrawingMode(a)}},{key:"_onTextChanged",value:function(a){this.fire(Ee.TEXT_CHANGED,a)}},{key:"_onIconCreateResize",value:function(a){this.fire(Ee.ICON_CREATE_RESIZE,a)}},{key:"_onIconCreateEnd",value:function(a){this.fire(Ee.ICON_CREATE_END,a)}},{key:"_onTextEditing",value:function(){this.fire(Ee.TEXT_EDITING)}},{key:"_onAddText",value:function(a){this.fire(Ee.ADD_TEXT,{originPosition:a.originPosition,clientPosition:a.clientPosition})}},{key:"_onAddObject",value:function(a){var g=this._graphics.getObject(a.id);this._invoker.fire(Ee.EXECUTE_COMMAND,na(g.type)),this._pushAddObjectCommand(g)}},{key:"_onObjectAdded",value:function(a){this.fire(Mu,a),this.fire(lI,a)}},{key:"_onObjectModified",value:function(a){a.type!==Ue.CROPZONE&&(this._invoker.fire(Ee.EXECUTE_COMMAND,na(a.type)),this._pushModifyObjectCommand(a))}},{key:"_selectionCleared",value:function(){this.fire(_u)}},{key:"_selectionCreated",value:function(a){this.fire(wu,a)}},{key:"registerIcons",value:function(a){this._graphics.registerPaths(a)}},{key:"changeCursor",value:function(a){this._graphics.changeCursor(a)}},{key:"addIcon",value:function(a,g){return g=g||{},this._setPositions(g),this.execute(Ge.ADD_ICON,a,g)}},{key:"changeIconColor",value:function(a,g){return this.execute(Ge.CHANGE_ICON_COLOR,a,g)}},{key:"removeObject",value:function(a){var g=this._graphics.getObject(a),r=g.type;return this.execute(Ge.REMOVE_OBJECT,a,na(r))}},{key:"hasFilter",value:function(a){return this._graphics.hasFilter(a)}},{key:"removeFilter",value:function(a){return this.execute(Ge.REMOVE_FILTER,a)}},{key:"applyFilter",value:function(a,g,r){var p=r?"executeSilent":"execute";return this[p](Ge.APPLY_FILTER,a,g)}},{key:"toDataURL",value:function(a){return this._graphics.toDataURL(a)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(a){return a?this.execute(Ge.RESIZE_CANVAS_DIMENSION,a):Ie().reject(mt.invalidParameters)}},{key:"destroy",value:function(){var a=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),J()(this,function(g,r){a[r]=null},this)}},{key:"_setPositions",value:function(a){var g=this._graphics.getCenter();G()(a.left)&&(a.left=g.left),G()(a.top)&&(a.top=g.top)}},{key:"setObjectProperties",value:function(a,g){return this.execute(Ge.SET_OBJECT_PROPERTIES,a,g)}},{key:"setObjectPropertiesQuietly",value:function(a,g){this._graphics.setObjectProperties(a,g)}},{key:"getObjectProperties",value:function(a,g){var r=this._graphics.getObject(a);return r?this._graphics.getObjectProperties(a,g):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(a,g,r){return this._graphics.getObjectPosition(a,g,r)}},{key:"setObjectPosition",value:function(a,g){return this.execute(Ge.SET_OBJECT_POSITION,a,g)}},{key:"resize",value:function(a){return this.execute(Ge.RESIZE_IMAGE,a)}}]),A}();pm.mixin(da),ve().mixin(da);var cI=da,uI=Le.ICON,fI={name:Ge.ADD_ICON,execute:function(I,a,g){var r=this,p=I.getComponent(uI);return p.add(a,g).then(function(M){return r.undoData.object=I.getObject(M.id),M})},undo:function(I){return I.remove(this.undoData.object),Ie().resolve()}};At.register(fI);var lM=null,dI={name:Ge.ADD_IMAGE_OBJECT,execute:function(I,a){var g=this;return I.addImageObject(a).then(function(r){return g.undoData.object=I.getObject(r.id),r})},undo:function(I){return I.remove(this.undoData.object),Ie().resolve()}};At.register(dI);var cM=null,hI={name:Ge.ADD_OBJECT,execute:function(I,a){return new(Ie())(function(g,r){I.contains(a)?r(mt.addedObject):(I.add(a),g(a))})},undo:function(I,a){return new(Ie())(function(g,r){I.contains(a)?(I.remove(a),g(a)):r(mt.noObject)})}};At.register(hI);var uM=null,gI=Le.SHAPE,pI={name:Ge.ADD_SHAPE,execute:function(I,a,g){var r=this,p=I.getComponent(gI);return p.add(a,g).then(function(M){var T=M.id;return r.undoData.object=I.getObject(T),M})},undo:function(I){return I.remove(this.undoData.object),Ie().resolve()}};At.register(pI);var fM=null,vI=Le.TEXT,mI={name:Ge.ADD_TEXT,execute:function(I,a,g){var r=this,p=I.getComponent(vI);if(this.undoData.object){var M=this.undoData.object;return new(Ie())(function(T,L){I.contains(M)?L(mt.redo):(I.add(M),T(M))})}return p.add(a,g).then(function(T){var L=T.id,P=I.getObject(L);return r.undoData.object=P,xu(ua(P,function(){return fa(L,P,!1)})),T})},undo:function(I){return I.remove(this.undoData.object),Ie().resolve()}};At.register(mI);var dM=null,Tu=Le.FILTER,Au=null;function yI(A,I,a){var g={};return A==="mask"&&(g.object=a.mask),g.options=I,g}var CI={name:Ge.APPLY_FILTER,execute:function(I,a,g,r){var p=I.getComponent(Tu);if(a==="mask"){var M=I.getObject(g.maskObjId);if(!(M&&M.isType("image")))return Ie().reject(mt.invalidParameters);Z()(g,{mask:M}),I.remove(g.mask)}if(!this.isRedo){var T=p.getOptions(a),L=yI(a,T,g);Au=this.setUndoData(L,Au,r)}return p.add(a,g)},undo:function(I,a){var g=I.getComponent(Tu);if(a==="mask"){var r=this.undoData.object;return I.add(r),I.setActiveObject(r),g.remove(a)}return this.undoData.options?g.add(a,this.undoData.options):g.remove(a)}};At.register(CI);var hM=null,Ou=Le.ICON,II={name:Ge.CHANGE_ICON_COLOR,execute:function(I,a,g){var r=this;return new(Ie())(function(p,M){var T=I.getComponent(Ou),L=I.getObject(a);L||M(mt.noObject),r.undoData.object=L,r.undoData.color=T.getColor(L),T.setColor(g,L),p()})},undo:function(I){var a=I.getComponent(Ou),g=this.undoData,r=g.object,p=g.color;return a.setColor(p,r),Ie().resolve()}};At.register(II);var gM=null,Nu=Le.SHAPE,ku=null;function bI(A,I){var a={object:I,options:{}};return co()(A,function(g,r){a.options[r]=I[r]}),a}var SI={name:Ge.CHANGE_SHAPE,execute:function(I,a,g,r){var p=I.getComponent(Nu),M=I.getObject(a);if(!M)return Ie().reject(mt.noObject);if(!this.isRedo){var T=bI(g,M);ku=this.setUndoData(T,ku,r)}return p.change(M,g)},undo:function(I){var a=I.getComponent(Nu),g=this.undoData,r=g.object,p=g.options;return a.change(r,p)}};At.register(SI);var pM=null,Pu=Le.TEXT,DI={name:Ge.CHANGE_TEXT,execute:function(I,a,g){var r=I.getComponent(Pu),p=I.getObject(a);return p?(this.undoData.object=p,this.undoData.text=r.getText(p),r.change(p,g)):Ie().reject(mt.noObject)},undo:function(I){var a=I.getComponent(Pu),g=this.undoData,r=g.object,p=g.text;return a.change(r,p)}};At.register(DI);var vM=null,Lu=Le.TEXT,Ru=null;function xI(A,I){var a={object:I,styles:{}};return co()(A,function(g,r){var p=I[r];a.styles[r]=p}),a}var EI={name:Ge.CHANGE_TEXT_STYLE,execute:function(I,a,g,r){var p=I.getComponent(Lu),M=I.getObject(a);if(!M)return Ie().reject(mt.noObject);if(!this.isRedo){var T=xI(g,M);Ru=this.setUndoData(T,Ru,r)}return p.setStyle(M,g)},undo:function(I){var a=I.getComponent(Lu),g=this.undoData,r=g.object,p=g.styles;return a.setStyle(r,p)}};At.register(EI);var mM=null,MI={name:Ge.CLEAR_OBJECTS,execute:function(I){var a=this;return new(Ie())(function(g){a.undoData.objects=I.removeAll(),g()})},undo:function(I){return I.add(this.undoData.objects),Ie().resolve()}};At.register(MI);var yM=null,ju=Le.FLIP,_I={name:Ge.FLIP_IMAGE,execute:function(I,a){var g=I.getComponent(ju);return this.undoData.setting=g.getCurrentSetting(),g[a]()},undo:function(I){var a=I.getComponent(ju);return a.set(this.undoData.setting)}};At.register(_I);var CM=null,Fu=Le.IMAGE_LOADER,wI={name:Ge.LOAD_IMAGE,execute:function(I,a,g){var r,p=I.getComponent(Fu),M=p.getCanvasImage(),T=M?M.width:0,L=M?M.height:0,P=ji()(r=I.removeAll(!0)).call(r,function(z){return z.type!=="cropzone"});return Ve()(P).call(P,function(z){z.evented=!0}),this.undoData={name:p.getImageName(),image:M,objects:P},p.load(a,g).then(function(z){return{oldWidth:T,oldHeight:L,newWidth:z.width,newHeight:z.height}})},undo:function(I){var a=I.getComponent(Fu),g=this.undoData,r=g.objects,p=g.name,M=g.image;return I.removeAll(!0),I.add(r),a.load(p,M)}};At.register(wI);var IM=null,Bu=Le.FILTER,TI={name:Ge.REMOVE_FILTER,execute:function(I,a){var g=I.getComponent(Bu);return this.undoData.options=g.getOptions(a),g.remove(a)},undo:function(I,a){var g=I.getComponent(Bu),r=this.undoData.options;return g.add(a,r)}};At.register(TI);var bM=null,AI={name:Ge.REMOVE_OBJECT,execute:function(I,a){var g=this;return new(Ie())(function(r,p){g.undoData.objects=I.removeObjectById(a),g.undoData.objects.length?r():p(mt.noObject)})},undo:function(I){return I.add(this.undoData.objects),Ie().resolve()}};At.register(AI);var SM=null,OI={name:Ge.RESIZE_CANVAS_DIMENSION,execute:function(I,a){var g=this;return new(Ie())(function(r){g.undoData.size={width:I.cssMaxWidth,height:I.cssMaxHeight},I.setCssMaxDimension(a),I.adjustCanvasDimension(),r()})},undo:function(I){return I.setCssMaxDimension(this.undoData.size),I.adjustCanvasDimension(),Ie().resolve()}};At.register(OI);var DM=null,zu=Le.ROTATION,Hu=null;function NI(A){return{angle:A.getCurrentAngle()}}var kI={name:Ge.ROTATE_IMAGE,execute:function(I,a,g,r){var p=I.getComponent(zu);if(!this.isRedo){var M=NI(p);Hu=this.setUndoData(M,Hu,r)}return p[a](g)},undo:function(I){var a=I.getComponent(zu),g=ce(this.args,3),r=g[1],p=g[2];return r==="setAngle"?a[r](this.undoData.angle):a.rotate(-p)}};At.register(kI);var xM=null,PI={name:Ge.SET_OBJECT_PROPERTIES,execute:function(I,a,g){var r=this,p=I.getObject(a);return p?(this.undoData.props={},co()(g,function(M,T){r.undoData.props[T]=p[T]}),I.setObjectProperties(a,g),Ie().resolve()):Ie().reject(mt.noObject)},undo:function(I,a){var g=this.undoData.props;return I.setObjectProperties(a,g),Ie().resolve()}};At.register(PI);var EM=null,LI={name:Ge.SET_OBJECT_POSITION,execute:function(I,a,g){var r=I.getObject(a);return r?(this.undoData.objectId=a,this.undoData.props=I.getObjectProperties(a,["left","top"]),I.setObjectPosition(a,g),I.renderAll(),Ie().resolve()):Ie().reject(mt.noObject)},undo:function(I){var a=this.undoData,g=a.objectId,r=a.props;return I.setObjectProperties(g,r),I.renderAll(),Ie().resolve()}};At.register(LI);var MM=null,RI={name:Ge.CHANGE_SELECTION,execute:function(I,a){return this.isRedo?Ve()(a).call(a,function(g){I.setObjectProperties(g.id,g)}):this.undoData=RC(),Ie().resolve()},undo:function(I){var a;return Ve()(a=this.undoData).call(a,function(g){I.setObjectProperties(g.id,g)}),Ie().resolve()}};At.register(RI);var _M=null,Uu=Le.RESIZE,jI={name:Ge.RESIZE_IMAGE,execute:function(I,a){var g=I.getComponent(Uu),r=g.getOriginalDimensions();return r||(r=g.getCurrentDimensions()),this.undoData.dimensions=r,g.resize(a)},undo:function(I){var a=I.getComponent(Uu);return a.resize(this.undoData.dimensions)}};At.register(jI);var wM=null,FI=cI}(),S=S.default,S}()})});var va=null;var pa=1,lf=Symbol("SIGNAL");function It(e){let t=va;return va=e,t}function cf(){return va}var ma={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ZI(e){if(!(Sa(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===pa)){if(!e.producerMustRecompute(e)&&!Ca(e)){e.dirty=!1,e.lastCleanEpoch=pa;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=pa}}function ya(e){return e&&(e.nextProducerIndex=0),It(e)}function uf(e,t){if(It(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Sa(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)ba(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Ca(e){Da(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],f=e.producerLastReadVersion[t];if(f!==n.version||(ZI(n),f!==n.version))return!0}return!1}function Ia(e){if(Da(e),Sa(e))for(let t=0;t<e.producerNode.length;t++)ba(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function ba(e,t){if($I(e),e.liveConsumerNode.length===1&&JI(e))for(let f=0;f<e.producerNode.length;f++)ba(e.producerNode[f],e.producerIndexOfThis[f]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let f=e.liveConsumerIndexOfThis[t],S=e.liveConsumerNode[t];Da(S),S.producerIndexOfThis[f]=t}}function Sa(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Da(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function $I(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function JI(e){return e.producerNode!==void 0}function QI(){throw new Error}var KI=QI;function ff(e){KI=e}function tt(e){return typeof e=="function"}function Po(e){let n=e(f=>{Error.call(f),f.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Lo=Po(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((f,S)=>`${S+1}) ${f.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function pi(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Vt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let v of n)v.remove(this);else n.remove(this);let{initialTeardown:f}=this;if(tt(f))try{f()}catch(v){t=v instanceof Lo?v.errors:[v]}let{_finalizers:S}=this;if(S){this._finalizers=null;for(let v of S)try{df(v)}catch(x){t=t??[],x instanceof Lo?t=[...t,...x.errors]:t.push(x)}}if(t)throw new Lo(t)}}add(t){var n;if(t&&t!==this)if(this.closed)df(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&pi(n,t)}remove(t){let{_finalizers:n}=this;n&&pi(n,t),t instanceof e&&t._removeParent(this)}};Vt.EMPTY=(()=>{let e=new Vt;return e.closed=!0,e})();var xa=Vt.EMPTY;function Ro(e){return e instanceof Vt||e&&"closed"in e&&tt(e.remove)&&tt(e.add)&&tt(e.unsubscribe)}function df(e){tt(e)?e():e.unsubscribe()}var In={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Fi={setTimeout(e,t,...n){let{delegate:f}=Fi;return f?.setTimeout?f.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Fi;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function jo(e){Fi.setTimeout(()=>{let{onUnhandledError:t}=In;if(t)t(e);else throw e})}function vi(){}var hf=Ea("C",void 0,void 0);function gf(e){return Ea("E",void 0,e)}function pf(e){return Ea("N",e,void 0)}function Ea(e,t,n){return{kind:e,value:t,error:n}}var mi=null;function Bi(e){if(In.useDeprecatedSynchronousErrorHandling){let t=!mi;if(t&&(mi={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:f}=mi;if(mi=null,n)throw f}}else e()}function vf(e){In.useDeprecatedSynchronousErrorHandling&&mi&&(mi.errorThrown=!0,mi.error=e)}var yi=class extends Vt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ro(t)&&t.add(this)):this.destination=t0}static create(t,n,f){return new zi(t,n,f)}next(t){this.isStopped?_a(pf(t),this):this._next(t)}error(t){this.isStopped?_a(gf(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?_a(hf,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qI=Function.prototype.bind;function Ma(e,t){return qI.call(e,t)}var wa=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(f){Fo(f)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(f){Fo(f)}else Fo(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Fo(n)}}},zi=class extends yi{constructor(t,n,f){super();let S;if(tt(t)||!t)S={next:t??void 0,error:n??void 0,complete:f??void 0};else{let v;this&&In.useDeprecatedNextContext?(v=Object.create(t),v.unsubscribe=()=>this.unsubscribe(),S={next:t.next&&Ma(t.next,v),error:t.error&&Ma(t.error,v),complete:t.complete&&Ma(t.complete,v)}):S=t}this.destination=new wa(S)}};function Fo(e){In.useDeprecatedSynchronousErrorHandling?vf(e):jo(e)}function e0(e){throw e}function _a(e,t){let{onStoppedNotification:n}=In;n&&Fi.setTimeout(()=>n(e,t))}var t0={closed:!0,next:vi,error:e0,complete:vi};var Hi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ui(e){return e}function mf(e){return e.length===0?Ui:e.length===1?e[0]:function(n){return e.reduce((f,S)=>S(f),n)}}var gt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let f=new e;return f.source=this,f.operator=n,f}subscribe(n,f,S){let v=i0(n)?n:new zi(n,f,S);return Bi(()=>{let{operator:x,source:l}=this;v.add(x?x.call(v,l):l?this._subscribe(v):this._trySubscribe(v))}),v}_trySubscribe(n){try{return this._subscribe(n)}catch(f){n.error(f)}}forEach(n,f){return f=yf(f),new f((S,v)=>{let x=new zi({next:l=>{try{n(l)}catch(u){v(u),x.unsubscribe()}},error:v,complete:S});this.subscribe(x)})}_subscribe(n){var f;return(f=this.source)===null||f===void 0?void 0:f.subscribe(n)}[Hi](){return this}pipe(...n){return mf(n)(this)}toPromise(n){return n=yf(n),new n((f,S)=>{let v;this.subscribe(x=>v=x,x=>S(x),()=>f(v))})}}return e.create=t=>new e(t),e})();function yf(e){var t;return(t=e??In.Promise)!==null&&t!==void 0?t:Promise}function n0(e){return e&&tt(e.next)&&tt(e.error)&&tt(e.complete)}function i0(e){return e&&e instanceof yi||n0(e)&&Ro(e)}function Ta(e){return tt(e?.lift)}function Rt(e){return t=>{if(Ta(t))return t.lift(function(n){try{return e(n,this)}catch(f){this.error(f)}});throw new TypeError("Unable to lift unknown Observable type")}}function jt(e,t,n,f,S){return new Aa(e,t,n,f,S)}var Aa=class extends yi{constructor(t,n,f,S,v,x){super(t),this.onFinalize=v,this.shouldUnsubscribe=x,this._next=n?function(l){try{n(l)}catch(u){t.error(u)}}:super._next,this._error=S?function(l){try{S(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=f?function(){try{f()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Cf(){return Rt((e,t)=>{let n=null;e._refCount++;let f=jt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let S=e._connection,v=n;n=null,S&&(!v||S===v)&&S.unsubscribe(),t.unsubscribe()});e.subscribe(f),f.closed||(n=e.connect())})}var Bo=class extends gt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ta(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Vt;let n=this.getSubject();t.add(this.source.subscribe(jt(n,void 0,()=>{this._teardown(),n.complete()},f=>{this._teardown(),n.error(f)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Vt.EMPTY)}return t}refCount(){return Cf()(this)}};var If=Po(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nn=(()=>{class e extends gt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let f=new zo(this,this);return f.operator=n,f}_throwIfClosed(){if(this.closed)throw new If}next(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let f of this.currentObservers)f.next(n)}})}error(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:f}=this;for(;f.length;)f.shift().error(n)}})}complete(){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:f,isStopped:S,observers:v}=this;return f||S?xa:(this.currentObservers=null,v.push(n),new Vt(()=>{this.currentObservers=null,pi(v,n)}))}_checkFinalizedStatuses(n){let{hasError:f,thrownError:S,isStopped:v}=this;f?n.error(S):v&&n.complete()}asObservable(){let n=new gt;return n.source=this,n}}return e.create=(t,n)=>new zo(t,n),e})(),zo=class extends nn{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,f;(f=(n=this.destination)===null||n===void 0?void 0:n.next)===null||f===void 0||f.call(n,t)}error(t){var n,f;(f=(n=this.destination)===null||n===void 0?void 0:n.error)===null||f===void 0||f.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,f;return(f=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&f!==void 0?f:xa}};var Dr=class extends nn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:f}=this;if(t)throw n;return this._throwIfClosed(),f}next(t){super.next(this._value=t)}};var Oa={now(){return(Oa.delegate||Date).now()},delegate:void 0};var Ho=class extends Vt{constructor(t,n){super()}schedule(t,n=0){return this}};var xr={setInterval(e,t,...n){let{delegate:f}=xr;return f?.setInterval?f.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=xr;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Uo=class extends Ho{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var f;if(this.closed)return this;this.state=t;let S=this.id,v=this.scheduler;return S!=null&&(this.id=this.recycleAsyncId(v,S,n)),this.pending=!0,this.delay=n,this.id=(f=this.id)!==null&&f!==void 0?f:this.requestAsyncId(v,this.id,n),this}requestAsyncId(t,n,f=0){return xr.setInterval(t.flush.bind(t,this),f)}recycleAsyncId(t,n,f=0){if(f!=null&&this.delay===f&&this.pending===!1)return n;n!=null&&xr.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let f=this._execute(t,n);if(f)return f;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let f=!1,S;try{this.work(t)}catch(v){f=!0,S=v||new Error("Scheduled action threw falsy error")}if(f)return this.unsubscribe(),S}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:f}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pi(f,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Vi=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,f){return new this.schedulerActionCtor(this,t).schedule(f,n)}};Vi.now=Oa.now;var Vo=class extends Vi{constructor(t,n=Vi.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let f;this._active=!0;do if(f=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,f){for(;t=n.shift();)t.unsubscribe();throw f}}};var Na=new Vo(Uo),bf=Na;var Wo=new gt(e=>e.complete());function Go(e){return e&&tt(e.schedule)}function Sf(e){return e[e.length-1]}function Wi(e){return Go(Sf(e))?e.pop():void 0}function Df(e,t){return typeof Sf(e)=="number"?e.pop():t}function Ef(e,t,n,f){function S(v){return v instanceof n?v:new n(function(x){x(v)})}return new(n||(n=Promise))(function(v,x){function l(N){try{_(f.next(N))}catch(k){x(k)}}function u(N){try{_(f.throw(N))}catch(k){x(k)}}function _(N){N.done?v(N.value):S(N.value).then(l,u)}_((f=f.apply(e,t||[])).next())})}function xf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],f=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&f>=e.length&&(e=void 0),{value:e&&e[f++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ci(e){return this instanceof Ci?(this.v=e,this):new Ci(e)}function Mf(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var f=n.apply(e,t||[]),S,v=[];return S={},l("next"),l("throw"),l("return",x),S[Symbol.asyncIterator]=function(){return this},S;function x(R){return function(C){return Promise.resolve(C).then(R,k)}}function l(R,C){f[R]&&(S[R]=function(s){return new Promise(function(y,m){v.push([R,s,y,m])>1||u(R,s)})},C&&(S[R]=C(S[R])))}function u(R,C){try{_(f[R](C))}catch(s){j(v[0][3],s)}}function _(R){R.value instanceof Ci?Promise.resolve(R.value.v).then(N,k):j(v[0][2],R)}function N(R){u("next",R)}function k(R){u("throw",R)}function j(R,C){R(C),v.shift(),v.length&&u(v[0][0],v[0][1])}}function _f(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof xf=="function"?xf(e):e[Symbol.iterator](),n={},f("next"),f("throw"),f("return"),n[Symbol.asyncIterator]=function(){return this},n);function f(v){n[v]=e[v]&&function(x){return new Promise(function(l,u){x=e[v](x),S(l,u,x.done,x.value)})}}function S(v,x,l,u){Promise.resolve(u).then(function(_){v({value:_,done:l})},x)}}var Gi=e=>e&&typeof e.length=="number"&&typeof e!="function";function Yo(e){return tt(e?.then)}function Xo(e){return tt(e[Hi])}function Zo(e){return Symbol.asyncIterator&&tt(e?.[Symbol.asyncIterator])}function $o(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function r0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jo=r0();function Qo(e){return tt(e?.[Jo])}function Ko(e){return Mf(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:f,done:S}=yield Ci(n.read());if(S)return yield Ci(void 0);yield yield Ci(f)}}finally{n.releaseLock()}})}function qo(e){return tt(e?.getReader)}function Ft(e){if(e instanceof gt)return e;if(e!=null){if(Xo(e))return o0(e);if(Gi(e))return s0(e);if(Yo(e))return a0(e);if(Zo(e))return wf(e);if(Qo(e))return l0(e);if(qo(e))return c0(e)}throw $o(e)}function o0(e){return new gt(t=>{let n=e[Hi]();if(tt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function s0(e){return new gt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function a0(e){return new gt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,jo)})}function l0(e){return new gt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function wf(e){return new gt(t=>{u0(e,t).catch(n=>t.error(n))})}function c0(e){return wf(Ko(e))}function u0(e,t){var n,f,S,v;return Ef(this,void 0,void 0,function*(){try{for(n=_f(e);f=yield n.next(),!f.done;){let x=f.value;if(t.next(x),t.closed)return}}catch(x){S={error:x}}finally{try{f&&!f.done&&(v=n.return)&&(yield v.call(n))}finally{if(S)throw S.error}}t.complete()})}function fn(e,t,n,f=0,S=!1){let v=t.schedule(function(){n(),S?e.add(this.schedule(null,f)):this.unsubscribe()},f);if(e.add(v),!S)return v}function es(e,t=0){return Rt((n,f)=>{n.subscribe(jt(f,S=>fn(f,e,()=>f.next(S),t),()=>fn(f,e,()=>f.complete(),t),S=>fn(f,e,()=>f.error(S),t)))})}function ts(e,t=0){return Rt((n,f)=>{f.add(e.schedule(()=>n.subscribe(f),t))})}function Tf(e,t){return Ft(e).pipe(ts(t),es(t))}function Af(e,t){return Ft(e).pipe(ts(t),es(t))}function Of(e,t){return new gt(n=>{let f=0;return t.schedule(function(){f===e.length?n.complete():(n.next(e[f++]),n.closed||this.schedule())})})}function Nf(e,t){return new gt(n=>{let f;return fn(n,t,()=>{f=e[Jo](),fn(n,t,()=>{let S,v;try{({value:S,done:v}=f.next())}catch(x){n.error(x);return}v?n.complete():n.next(S)},0,!0)}),()=>tt(f?.return)&&f.return()})}function ns(e,t){if(!e)throw new Error("Iterable cannot be null");return new gt(n=>{fn(n,t,()=>{let f=e[Symbol.asyncIterator]();fn(n,t,()=>{f.next().then(S=>{S.done?n.complete():n.next(S.value)})},0,!0)})})}function kf(e,t){return ns(Ko(e),t)}function Pf(e,t){if(e!=null){if(Xo(e))return Tf(e,t);if(Gi(e))return Of(e,t);if(Yo(e))return Af(e,t);if(Zo(e))return ns(e,t);if(Qo(e))return Nf(e,t);if(qo(e))return kf(e,t)}throw $o(e)}function Yi(e,t){return t?Pf(e,t):Ft(e)}function Er(...e){let t=Wi(e);return Yi(e,t)}function ka(e,t){let n=tt(e)?e:()=>e,f=S=>S.error(n());return new gt(t?S=>t.schedule(f,0,S):f)}function Lf(e){return e instanceof Date&&!isNaN(e)}function Zt(e,t){return Rt((n,f)=>{let S=0;n.subscribe(jt(f,v=>{f.next(e.call(t,v,S++))}))})}var{isArray:f0}=Array;function d0(e,t){return f0(t)?e(...t):e(t)}function Rf(e){return Zt(t=>d0(e,t))}function jf(e,t,n,f,S,v,x,l){let u=[],_=0,N=0,k=!1,j=()=>{k&&!u.length&&!_&&t.complete()},R=s=>_<f?C(s):u.push(s),C=s=>{v&&t.next(s),_++;let y=!1;Ft(n(s,N++)).subscribe(jt(t,m=>{S?.(m),v?R(m):t.next(m)},()=>{y=!0},void 0,()=>{if(y)try{for(_--;u.length&&_<f;){let m=u.shift();x?fn(t,x,()=>C(m)):C(m)}j()}catch(m){t.error(m)}}))};return e.subscribe(jt(t,R,()=>{k=!0,j()})),()=>{l?.()}}function Ii(e,t,n=1/0){return tt(t)?Ii((f,S)=>Zt((v,x)=>t(f,v,S,x))(Ft(e(f,S))),n):(typeof t=="number"&&(n=t),Rt((f,S)=>jf(f,S,e,n)))}function is(e=1/0){return Ii(Ui,e)}function Ff(){return is(1)}function Mr(...e){return Ff()(Yi(e,Wi(e)))}function rs(e){return new gt(t=>{Ft(e()).subscribe(t)})}var h0=["addListener","removeListener"],g0=["addEventListener","removeEventListener"],p0=["on","off"];function Xi(e,t,n,f){if(tt(n)&&(f=n,n=void 0),f)return Xi(e,t,n).pipe(Rf(f));let[S,v]=y0(e)?g0.map(x=>l=>e[x](t,l,n)):v0(e)?h0.map(Bf(e,t)):m0(e)?p0.map(Bf(e,t)):[];if(!S&&Gi(e))return Ii(x=>Xi(x,t,n))(Ft(e));if(!S)throw new TypeError("Invalid event target");return new gt(x=>{let l=(...u)=>x.next(1<u.length?u:u[0]);return S(l),()=>v(l)})}function Bf(e,t){return n=>f=>e[n](t,f)}function v0(e){return tt(e.addListener)&&tt(e.removeListener)}function m0(e){return tt(e.on)&&tt(e.off)}function y0(e){return tt(e.addEventListener)&&tt(e.removeEventListener)}function zf(e=0,t,n=bf){let f=-1;return t!=null&&(Go(t)?n=t:f=t),new gt(S=>{let v=Lf(e)?+e-n.now():e;v<0&&(v=0);let x=0;return n.schedule(function(){S.closed||(S.next(x++),0<=f?this.schedule(void 0,f):S.complete())},v)})}function os(...e){let t=Wi(e),n=Df(e,1/0),f=e;return f.length?f.length===1?Ft(f[0]):is(n)(Yi(f,t)):Wo}var bi=new gt(vi);function Si(e,t){return Rt((n,f)=>{let S=0;n.subscribe(jt(f,v=>e.call(t,v,S++)&&f.next(v)))})}function Hf(e){return new gt(t=>e.subscribe(t))}var C0={connector:()=>new nn};function ss(e,t=C0){let{connector:n}=t;return Rt((f,S)=>{let v=n();Ft(e(Hf(v))).subscribe(S),S.add(f.subscribe(v))})}function bn(e){return e<=0?()=>Wo:Rt((t,n)=>{let f=0;t.subscribe(jt(n,S=>{++f<=e&&(n.next(S),e<=f&&n.complete())}))})}function Uf(){return Rt((e,t)=>{e.subscribe(jt(t,vi))})}function Vf(e){return Zt(()=>e)}function Pa(e,t){return t?n=>Mr(t.pipe(bn(1),Uf()),n.pipe(Pa(e))):Ii((n,f)=>Ft(e(n,f)).pipe(bn(1),Vf(n)))}function La(e,t=Na){let n=zf(e,t);return Pa(()=>n)}function Wf(e,t){let n=tt(e)?e:()=>e;return tt(t)?ss(t,{connector:n}):f=>new Bo(f,n)}function Ra(e){return e?t=>ss(e)(t):t=>Wf(new nn)(t)}function Zi(e,t){return Rt((n,f)=>{let S=null,v=0,x=!1,l=()=>x&&!S&&f.complete();n.subscribe(jt(f,u=>{S?.unsubscribe();let _=0,N=v++;Ft(e(u,N)).subscribe(S=jt(f,k=>f.next(t?t(u,k,N,_++):k),()=>{S=null,l()}))},()=>{x=!0,l()}))})}function ja(e,t,n){let f=tt(e)||t||n?{next:e,error:t,complete:n}:e;return f?Rt((S,v)=>{var x;(x=f.subscribe)===null||x===void 0||x.call(f);let l=!0;S.subscribe(jt(v,u=>{var _;(_=f.next)===null||_===void 0||_.call(f,u),v.next(u)},()=>{var u;l=!1,(u=f.complete)===null||u===void 0||u.call(f),v.complete()},u=>{var _;l=!1,(_=f.error)===null||_===void 0||_.call(f,u),v.error(u)},()=>{var u,_;l&&((u=f.unsubscribe)===null||u===void 0||u.call(f)),(_=f.finalize)===null||_===void 0||_.call(f)}))}):Ui}var Td="https://g.co/ng/security#xss",bt=class extends Error{constructor(t,n){super(Rl(t,n)),this.code=t}};function Rl(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Ad(e){return{toString:e}.toString()}var Ja=globalThis;function Ot(e){for(let t in e)if(e[t]===Ot)return t;throw Error("Could not find renamed property on target object.")}function dn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(dn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function Qa(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var I0=Ot({__forward_ref__:Ot});function Od(e){return e.__forward_ref__=Od,e.toString=function(){return dn(this())},e}function Dn(e){return b0(e)?e():e}function b0(e){return typeof e=="function"&&e.hasOwnProperty(I0)&&e.__forward_ref__===Od}function xt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function jl(e){return Gf(e,Nd)||Gf(e,kd)}function Gf(e,t){return e.hasOwnProperty(t)?e[t]:null}function S0(e){let t=e&&(e[Nd]||e[kd]);return t||null}function Yf(e){return e&&(e.hasOwnProperty(Xf)||e.hasOwnProperty(D0))?e[Xf]:null}var Nd=Ot({\u0275prov:Ot}),Xf=Ot({\u0275inj:Ot}),kd=Ot({ngInjectableDef:Ot}),D0=Ot({ngInjectorDef:Ot}),St=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=xt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Pd(e){return e&&!!e.\u0275providers}var x0=Ot({\u0275cmp:Ot}),E0=Ot({\u0275dir:Ot}),M0=Ot({\u0275pipe:Ot});var Zf=Ot({\u0275fac:Ot}),_r=Ot({__NG_ELEMENT_ID__:Ot}),$f=Ot({__NG_ENV_ID__:Ot});function Ld(e){return typeof e=="string"?e:e==null?"":String(e)}function _0(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Ld(e)}function w0(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new bt(-200,e)}function Fl(e,t){throw new bt(-201,!1)}var at=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(at||{}),Ka;function Rd(){return Ka}function On(e){let t=Ka;return Ka=e,t}function jd(e,t,n){let f=jl(e);if(f&&f.providedIn=="root")return f.value===void 0?f.value=f.factory():f.value;if(n&at.Optional)return null;if(t!==void 0)return t;Fl(e,"Injector")}var T0={},wr=T0,A0="__NG_DI_FLAG__",gs="ngTempTokenPath",O0="ngTokenPath",N0=/\n/gm,k0="\u0275",Jf="__source",qi;function P0(){return qi}function $i(e){let t=qi;return qi=e,t}function L0(e,t=at.Default){if(qi===void 0)throw new bt(-203,!1);return qi===null?jd(e,void 0,t):qi.get(e,t&at.Optional?null:void 0,t)}function ht(e,t=at.Default){return(Rd()||L0)(Dn(e),t)}function Mt(e,t=at.Default){return ht(e,Ps(t))}function Ps(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function qa(e){let t=[];for(let n=0;n<e.length;n++){let f=Dn(e[n]);if(Array.isArray(f)){if(f.length===0)throw new bt(900,!1);let S,v=at.Default;for(let x=0;x<f.length;x++){let l=f[x],u=R0(l);typeof u=="number"?u===-1?S=l.token:v|=u:S=l}t.push(ht(S,v))}else t.push(ht(f))}return t}function R0(e){return e[A0]}function j0(e,t,n,f){let S=e[gs];throw t[Jf]&&S.unshift(t[Jf]),e.message=F0(`
`+e.message,S,n,f),e[O0]=S,e[gs]=null,e}function F0(e,t,n,f=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==k0?e.slice(2):e;let S=dn(t);if(Array.isArray(t))S=t.map(dn).join(" -> ");else if(typeof t=="object"){let v=[];for(let x in t)if(t.hasOwnProperty(x)){let l=t[x];v.push(x+":"+(typeof l=="string"?JSON.stringify(l):dn(l)))}S=`{${v.join(", ")}}`}return`${n}${f?"("+f+")":""}[${S}]: ${e.replace(N0,`
  `)}`}function Tr(e,t){let n=e.hasOwnProperty(Zf);return n?e[Zf]:null}function B0(e,t,n){if(e.length!==t.length)return!1;for(let f=0;f<e.length;f++){let S=e[f],v=t[f];if(n&&(S=n(S),v=n(v)),v!==S)return!1}return!0}function z0(e){return e.flat(Number.POSITIVE_INFINITY)}function Bl(e,t){e.forEach(n=>Array.isArray(n)?Bl(n,t):t(n))}function Fd(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ps(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function H0(e,t,n,f){let S=e.length;if(S==t)e.push(n,f);else if(S===1)e.push(f,e[0]),e[0]=n;else{for(S--,e.push(e[S-1],e[S]);S>t;){let v=S-2;e[S]=e[v],S--}e[t]=n,e[t+1]=f}}function Bd(e,t,n){let f=Br(e,t);return f>=0?e[f|1]=n:(f=~f,H0(e,f,t,n)),f}function Fa(e,t){let n=Br(e,t);if(n>=0)return e[n|1]}function Br(e,t){return U0(e,t,1)}function U0(e,t,n){let f=0,S=e.length>>n;for(;S!==f;){let v=f+(S-f>>1),x=e[v<<n];if(t===x)return v<<n;x>t?S=v:f=v+1}return~(S<<n)}var Ar={},Vn=[],Or=new St(""),zd=new St("",-1),Hd=new St(""),vs=class{get(t,n=wr){if(n===wr){let f=new Error(`NullInjectorError: No provider for ${dn(t)}!`);throw f.name="NullInjectorError",f}return n}},Ud=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Ud||{}),Ln=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ln||{}),li=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(li||{});function V0(e,t,n){let f=e.length;for(;;){let S=e.indexOf(t,n);if(S===-1)return S;if(S===0||e.charCodeAt(S-1)<=32){let v=t.length;if(S+v===f||e.charCodeAt(S+v)<=32)return S}n=S+1}}function el(e,t,n){let f=0;for(;f<n.length;){let S=n[f];if(typeof S=="number"){if(S!==0)break;f++;let v=n[f++],x=n[f++],l=n[f++];e.setAttribute(t,x,l,v)}else{let v=S,x=n[++f];G0(v)?e.setProperty(t,v,x):e.setAttribute(t,v,x),f++}}return f}function W0(e){return e===3||e===4||e===6}function G0(e){return e.charCodeAt(0)===64}function zl(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let f=0;f<t.length;f++){let S=t[f];typeof S=="number"?n=S:n===0||(n===-1||n===2?Qf(e,n,S,null,t[++f]):Qf(e,n,S,null,null))}}return e}function Qf(e,t,n,f,S){let v=0,x=e.length;if(t===-1)x=-1;else for(;v<e.length;){let l=e[v++];if(typeof l=="number"){if(l===t){x=-1;break}else if(l>t){x=v-1;break}}}for(;v<e.length;){let l=e[v];if(typeof l=="number")break;if(l===n){if(f===null){S!==null&&(e[v+1]=S);return}else if(f===e[v+1]){e[v+2]=S;return}}v++,f!==null&&v++,S!==null&&v++}x!==-1&&(e.splice(x,0,t),v=x+1),e.splice(v++,0,n),f!==null&&e.splice(v++,0,f),S!==null&&e.splice(v++,0,S)}var Vd="ng-template";function Y0(e,t,n,f){let S=0;if(f){for(;S<t.length&&typeof t[S]=="string";S+=2)if(t[S]==="class"&&V0(t[S+1].toLowerCase(),n,0)!==-1)return!0}else if(Hl(e))return!1;if(S=t.indexOf(1,S),S>-1){let v;for(;++S<t.length&&typeof(v=t[S])=="string";)if(v.toLowerCase()===n)return!0}return!1}function Hl(e){return e.type===4&&e.value!==Vd}function X0(e,t,n){let f=e.type===4&&!n?Vd:e.value;return t===f}function Z0(e,t,n){let f=4,S=e.attrs,v=S!==null?Q0(S):0,x=!1;for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="number"){if(!x&&!Sn(f)&&!Sn(u))return!1;if(x&&Sn(u))continue;x=!1,f=u|f&1;continue}if(!x)if(f&4){if(f=2|f&1,u!==""&&!X0(e,u,n)||u===""&&t.length===1){if(Sn(f))return!1;x=!0}}else if(f&8){if(S===null||!Y0(e,S,u,n)){if(Sn(f))return!1;x=!0}}else{let _=t[++l],N=$0(u,S,Hl(e),n);if(N===-1){if(Sn(f))return!1;x=!0;continue}if(_!==""){let k;if(N>v?k="":k=S[N+1].toLowerCase(),f&2&&_!==k){if(Sn(f))return!1;x=!0}}}}return Sn(f)||x}function Sn(e){return(e&1)===0}function $0(e,t,n,f){if(t===null)return-1;let S=0;if(f||!n){let v=!1;for(;S<t.length;){let x=t[S];if(x===e)return S;if(x===3||x===6)v=!0;else if(x===1||x===2){let l=t[++S];for(;typeof l=="string";)l=t[++S];continue}else{if(x===4)break;if(x===0){S+=4;continue}}S+=v?1:2}return-1}else return K0(t,e)}function J0(e,t,n=!1){for(let f=0;f<t.length;f++)if(Z0(e,t[f],n))return!0;return!1}function Q0(e){for(let t=0;t<e.length;t++){let n=e[t];if(W0(n))return t}return e.length}function K0(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let f=e[n];if(typeof f=="number")return-1;if(f===t)return n;n++}return-1}function Kf(e,t){return e?":not("+t.trim()+")":t}function q0(e){let t=e[0],n=1,f=2,S="",v=!1;for(;n<e.length;){let x=e[n];if(typeof x=="string")if(f&2){let l=e[++n];S+="["+x+(l.length>0?'="'+l+'"':"")+"]"}else f&8?S+="."+x:f&4&&(S+=" "+x);else S!==""&&!Sn(x)&&(t+=Kf(v,S),S=""),f=x,v=v||!Sn(f);n++}return S!==""&&(t+=Kf(v,S)),t}function eb(e){return e.map(q0).join(",")}function tb(e){let t=[],n=[],f=1,S=2;for(;f<e.length;){let v=e[f];if(typeof v=="string")S===2?v!==""&&t.push(v,e[++f]):S===8&&n.push(v);else{if(!Sn(S))break;S=v}f++}return{attrs:t,classes:n}}function Ls(e){return Ad(()=>{let t=Xd(e),n=si(Cn({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Ud.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ln.Emulated,styles:e.styles||Vn,_:null,schemas:e.schemas||null,tView:null,id:""});Zd(n);let f=e.dependencies;return n.directiveDefs=ed(f,!1),n.pipeDefs=ed(f,!0),n.id=ob(n),n})}function nb(e){return tr(e)||Gd(e)}function ib(e){return e!==null}function qf(e,t){if(e==null)return Ar;let n={};for(let f in e)if(e.hasOwnProperty(f)){let S=e[f],v,x,l=li.None;Array.isArray(S)?(l=S[0],v=S[1],x=S[2]??v):(v=S,x=S),t?(n[v]=l!==li.None?[f,l]:f,t[v]=x):n[v]=f}return n}function Wd(e){return Ad(()=>{let t=Xd(e);return Zd(t),t})}function tr(e){return e[x0]||null}function Gd(e){return e[E0]||null}function Yd(e){return e[M0]||null}function rb(e){let t=tr(e)||Gd(e)||Yd(e);return t!==null?t.standalone:!1}function Xd(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Ar,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Vn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qf(e.inputs,t),outputs:qf(e.outputs),debugInfo:null}}function Zd(e){e.features?.forEach(t=>t(e))}function ed(e,t){if(!e)return null;let n=t?Yd:nb;return()=>(typeof e=="function"?e():e).map(f=>n(f)).filter(ib)}function ob(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let S of n)t=Math.imul(31,t)+S.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Ul(e){return{\u0275providers:e}}function sb(...e){return{\u0275providers:$d(!0,e),\u0275fromNgModule:!0}}function $d(e,...t){let n=[],f=new Set,S,v=x=>{n.push(x)};return Bl(t,x=>{let l=x;tl(l,v,[],f)&&(S||=[],S.push(l))}),S!==void 0&&Jd(S,v),n}function Jd(e,t){for(let n=0;n<e.length;n++){let{ngModule:f,providers:S}=e[n];Vl(S,v=>{t(v,f)})}}function tl(e,t,n,f){if(e=Dn(e),!e)return!1;let S=null,v=Yf(e),x=!v&&tr(e);if(!v&&!x){let u=e.ngModule;if(v=Yf(u),v)S=u;else return!1}else{if(x&&!x.standalone)return!1;S=e}let l=f.has(S);if(x){if(l)return!1;if(f.add(S),x.dependencies){let u=typeof x.dependencies=="function"?x.dependencies():x.dependencies;for(let _ of u)tl(_,t,n,f)}}else if(v){if(v.imports!=null&&!l){f.add(S);let _;try{Bl(v.imports,N=>{tl(N,t,n,f)&&(_||=[],_.push(N))})}finally{}_!==void 0&&Jd(_,t)}if(!l){let _=Tr(S)||(()=>new S);t({provide:S,useFactory:_,deps:Vn},S),t({provide:Hd,useValue:S,multi:!0},S),t({provide:Or,useValue:()=>ht(S),multi:!0},S)}let u=v.providers;if(u!=null&&!l){let _=e;Vl(u,N=>{t(N,_)})}}else return!1;return S!==e&&e.providers!==void 0}function Vl(e,t){for(let n of e)Pd(n)&&(n=n.\u0275providers),Array.isArray(n)?Vl(n,t):t(n)}var ab=Ot({provide:String,useValue:Ot});function Qd(e){return e!==null&&typeof e=="object"&&ab in e}function lb(e){return!!(e&&e.useExisting)}function cb(e){return!!(e&&e.useFactory)}function nl(e){return typeof e=="function"}var Rs=new St(""),ls={},ub={},Ba;function Wl(){return Ba===void 0&&(Ba=new vs),Ba}var ci=class{},ms=class extends ci{get destroyed(){return this._destroyed}constructor(t,n,f,S){super(),this.parent=n,this.source=f,this.scopes=S,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rl(t,x=>this.processProvider(x)),this.records.set(zd,Ji(void 0,this)),S.has("environment")&&this.records.set(ci,Ji(void 0,this));let v=this.records.get(Rs);v!=null&&typeof v.value=="string"&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Hd,Vn,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=It(null);try{for(let f of this._ngOnDestroyHooks)f.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let f of n)f()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),It(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=$i(this),f=On(void 0),S;try{return t()}finally{$i(n),On(f)}}get(t,n=wr,f=at.Default){if(this.assertNotDestroyed(),t.hasOwnProperty($f))return t[$f](this);f=Ps(f);let S,v=$i(this),x=On(void 0);try{if(!(f&at.SkipSelf)){let u=this.records.get(t);if(u===void 0){let _=vb(t)&&jl(t);_&&this.injectableDefInScope(_)?u=Ji(il(t),ls):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u)}let l=f&at.Self?Wl():this.parent;return n=f&at.Optional&&n===wr?null:n,l.get(t,n)}catch(l){if(l.name==="NullInjectorError"){if((l[gs]=l[gs]||[]).unshift(dn(t)),v)throw l;return j0(l,t,"R3InjectorError",this.source)}else throw l}finally{On(x),$i(v)}}resolveInjectorInitializers(){let t=It(null),n=$i(this),f=On(void 0),S;try{let v=this.get(Or,Vn,at.Self);for(let x of v)x()}finally{$i(n),On(f),It(t)}}toString(){let t=[],n=this.records;for(let f of n.keys())t.push(dn(f));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new bt(205,!1)}processProvider(t){t=Dn(t);let n=nl(t)?t:Dn(t&&t.provide),f=db(t);if(!nl(t)&&t.multi===!0){let S=this.records.get(n);S||(S=Ji(void 0,ls,!0),S.factory=()=>qa(S.multi),this.records.set(n,S)),n=t,S.multi.push(t)}this.records.set(n,f)}hydrate(t,n){let f=It(null);try{return n.value===ls&&(n.value=ub,n.value=n.factory()),typeof n.value=="object"&&n.value&&pb(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{It(f)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Dn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function il(e){let t=jl(e),n=t!==null?t.factory:Tr(e);if(n!==null)return n;if(e instanceof St)throw new bt(204,!1);if(e instanceof Function)return fb(e);throw new bt(204,!1)}function fb(e){if(e.length>0)throw new bt(204,!1);let n=S0(e);return n!==null?()=>n.factory(e):()=>new e}function db(e){if(Qd(e))return Ji(void 0,e.useValue);{let t=hb(e);return Ji(t,ls)}}function hb(e,t,n){let f;if(nl(e)){let S=Dn(e);return Tr(S)||il(S)}else if(Qd(e))f=()=>Dn(e.useValue);else if(cb(e))f=()=>e.useFactory(...qa(e.deps||[]));else if(lb(e))f=()=>ht(Dn(e.useExisting));else{let S=Dn(e&&(e.useClass||e.provide));if(gb(e))f=()=>new S(...qa(e.deps));else return Tr(S)||il(S)}return f}function Ji(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function gb(e){return!!e.deps}function pb(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function vb(e){return typeof e=="function"||typeof e=="object"&&e instanceof St}function rl(e,t){for(let n of e)Array.isArray(n)?rl(n,t):n&&Pd(n)?rl(n.\u0275providers,t):t(n)}function mb(){return Rd()!==void 0||P0()!=null}function yb(e){return typeof e=="function"}var Zn=0,ot=1,nt=2,$t=3,xn=4,Mn=5,ys=6,Cs=7,En=8,nr=9,Rn=10,rn=11,Nr=12,td=13,cr=14,Wn=15,Mi=16,Qi=17,Gn=18,js=19,Kd=20,ai=21,za=22,hn=23,ui=25,qd=1;var _i=7,Is=8,ir=9,sn=10,bs=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(bs||{});function xi(e){return Array.isArray(e)&&typeof e[qd]=="object"}function $n(e){return Array.isArray(e)&&e[qd]===!0}function eh(e){return(e.flags&4)!==0}function Gl(e){return e.componentOffset>-1}function Yl(e){return(e.flags&1)===1}function zr(e){return!!e.template}function ol(e){return(e[nt]&512)!==0}var sl=class{constructor(t,n,f){this.previousValue=t,this.currentValue=n,this.firstChange=f}isFirstChange(){return this.firstChange}};function th(e,t,n,f){t!==null?t.applyValueToInputSignal(t,f):e[n]=f}function nh(){return ih}function ih(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ib),Cb}nh.ngInherit=!0;function Cb(){let e=oh(this),t=e?.current;if(t){let n=e.previous;if(n===Ar)e.previous=t;else for(let f in t)n[f]=t[f];e.current=null,this.ngOnChanges(t)}}function Ib(e,t,n,f,S){let v=this.declaredInputs[f],x=oh(e)||bb(e,{previous:Ar,current:null}),l=x.current||(x.current={}),u=x.previous,_=u[v];l[v]=new sl(_&&_.currentValue,n,u===Ar),th(e,t,S,n)}var rh="__ngSimpleChanges__";function oh(e){return e[rh]||null}function bb(e,t){return e[rh]=t}var nd=null;var Nn=function(e,t,n){nd?.(e,t,n)},sh="svg",Sb="math";function jn(e){for(;Array.isArray(e);)e=e[Zn];return e}function Db(e,t){return jn(t[e])}function _n(e,t){return jn(t[e.index])}function ah(e,t){return e.data[t]}function ur(e,t){let n=t[e];return xi(n)?n:n[Zn]}function xb(e){return(e[nt]&4)===4}function Xl(e){return(e[nt]&128)===128}function Eb(e){return $n(e[$t])}function Ss(e,t){return t==null?null:e[t]}function lh(e){e[Qi]=0}function ch(e){e[nt]&1024||(e[nt]|=1024,Xl(e)&&Fs(e))}function Mb(e,t){for(;e>0;)t=t[cr],e--;return t}function kr(e){return!!(e[nt]&9216||e[hn]?.dirty)}function al(e){e[Rn].changeDetectionScheduler?.notify(7),e[nt]&64&&(e[nt]|=1024),kr(e)&&Fs(e)}function Fs(e){e[Rn].changeDetectionScheduler?.notify(0);let t=wi(e);for(;t!==null&&!(t[nt]&8192||(t[nt]|=8192,!Xl(t)));)t=wi(t)}function uh(e,t){if((e[nt]&256)===256)throw new bt(911,!1);e[ai]===null&&(e[ai]=[]),e[ai].push(t)}function _b(e,t){if(e[ai]===null)return;let n=e[ai].indexOf(t);n!==-1&&e[ai].splice(n,1)}function wi(e){let t=e[$t];return $n(t)?t[$t]:t}var st={lFrame:Ch(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fh=!1;function wb(){return st.lFrame.elementDepthCount}function Tb(){st.lFrame.elementDepthCount++}function Ab(){st.lFrame.elementDepthCount--}function dh(){return st.bindingsEnabled}function Ob(){return st.skipHydrationRootTNode!==null}function Nb(e){return st.skipHydrationRootTNode===e}function kb(){st.skipHydrationRootTNode=null}function Ht(){return st.lFrame.lView}function Fn(){return st.lFrame.tView}function Jn(e){return st.lFrame.contextLView=e,e[En]}function Qn(e){return st.lFrame.contextLView=null,e}function Bn(){let e=hh();for(;e!==null&&e.type===64;)e=e.parent;return e}function hh(){return st.lFrame.currentTNode}function Pb(){let e=st.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Hr(e,t){let n=st.lFrame;n.currentTNode=e,n.isParent=t}function gh(){return st.lFrame.isParent}function Lb(){st.lFrame.isParent=!1}function ph(){return fh}function id(e){fh=e}function Rb(e){return st.lFrame.bindingIndex=e}function jb(){return st.lFrame.bindingIndex++}function Fb(e){let t=st.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Bb(){return st.lFrame.inI18n}function zb(e,t){let n=st.lFrame;n.bindingIndex=n.bindingRootIndex=e,ll(t)}function Hb(){return st.lFrame.currentDirectiveIndex}function ll(e){st.lFrame.currentDirectiveIndex=e}function Ub(e){let t=st.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function vh(){return st.lFrame.currentQueryIndex}function Zl(e){st.lFrame.currentQueryIndex=e}function Vb(e){let t=e[ot];return t.type===2?t.declTNode:t.type===1?e[Mn]:null}function mh(e,t,n){if(n&at.SkipSelf){let S=t,v=e;for(;S=S.parent,S===null&&!(n&at.Host);)if(S=Vb(v),S===null||(v=v[cr],S.type&10))break;if(S===null)return!1;t=S,e=v}let f=st.lFrame=yh();return f.currentTNode=t,f.lView=e,!0}function $l(e){let t=yh(),n=e[ot];st.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function yh(){let e=st.lFrame,t=e===null?null:e.child;return t===null?Ch(e):t}function Ch(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Ih(){let e=st.lFrame;return st.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var bh=Ih;function Jl(){let e=Ih();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Wb(e){return(st.lFrame.contextLView=Mb(e,st.lFrame.contextLView))[En]}function Ur(){return st.lFrame.selectedIndex}function Ti(e){st.lFrame.selectedIndex=e}function Gb(){let e=st.lFrame;return ah(e.tView,e.selectedIndex)}function Sh(){st.lFrame.currentNamespace=sh}function Yb(){return st.lFrame.currentNamespace}var Dh=!0;function Ql(){return Dh}function Kl(e){Dh=e}function Xb(e,t,n){let{ngOnChanges:f,ngOnInit:S,ngDoCheck:v}=t.type.prototype;if(f){let x=ih(t);(n.preOrderHooks??=[]).push(e,x),(n.preOrderCheckHooks??=[]).push(e,x)}S&&(n.preOrderHooks??=[]).push(0-e,S),v&&((n.preOrderHooks??=[]).push(e,v),(n.preOrderCheckHooks??=[]).push(e,v))}function ql(e,t){for(let n=t.directiveStart,f=t.directiveEnd;n<f;n++){let v=e.data[n].type.prototype,{ngAfterContentInit:x,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:_,ngOnDestroy:N}=v;x&&(e.contentHooks??=[]).push(-n,x),l&&((e.contentHooks??=[]).push(n,l),(e.contentCheckHooks??=[]).push(n,l)),u&&(e.viewHooks??=[]).push(-n,u),_&&((e.viewHooks??=[]).push(n,_),(e.viewCheckHooks??=[]).push(n,_)),N!=null&&(e.destroyHooks??=[]).push(n,N)}}function cs(e,t,n){xh(e,t,3,n)}function us(e,t,n,f){(e[nt]&3)===n&&xh(e,t,n,f)}function Ha(e,t){let n=e[nt];(n&3)===t&&(n&=16383,n+=1,e[nt]=n)}function xh(e,t,n,f){let S=f!==void 0?e[Qi]&65535:0,v=f??-1,x=t.length-1,l=0;for(let u=S;u<x;u++)if(typeof t[u+1]=="number"){if(l=t[u],f!=null&&l>=f)break}else t[u]<0&&(e[Qi]+=65536),(l<v||v==-1)&&(Zb(e,n,t,u),e[Qi]=(e[Qi]&4294901760)+u+2),u++}function rd(e,t){Nn(4,e,t);let n=It(null);try{t.call(e)}finally{It(n),Nn(5,e,t)}}function Zb(e,t,n,f){let S=n[f]<0,v=n[f+1],x=S?-n[f]:n[f],l=e[x];S?e[nt]>>14<e[Qi]>>16&&(e[nt]&3)===t&&(e[nt]+=16384,rd(l,v)):rd(l,v)}var er=-1,Pr=class{constructor(t,n,f){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=f}};function $b(e){return e instanceof Pr}function Jb(e){return(e.flags&8)!==0}function Qb(e){return(e.flags&16)!==0}var Ua={},cl=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,f){f=Ps(f);let S=this.injector.get(t,Ua,f);return S!==Ua||n===Ua?S:this.parentInjector.get(t,n,f)}};function Eh(e){return e!==er}function Ds(e){return e&32767}function Kb(e){return e>>16}function xs(e,t){let n=Kb(e),f=t;for(;n>0;)f=f[cr],n--;return f}var ul=!0;function od(e){let t=ul;return ul=e,t}var qb=256,Mh=qb-1,_h=5,eS=0,kn={};function tS(e,t,n){let f;typeof n=="string"?f=n.charCodeAt(0)||0:n.hasOwnProperty(_r)&&(f=n[_r]),f==null&&(f=n[_r]=eS++);let S=f&Mh,v=1<<S;t.data[e+(S>>_h)]|=v}function wh(e,t){let n=Th(e,t);if(n!==-1)return n;let f=t[ot];f.firstCreatePass&&(e.injectorIndex=t.length,Va(f.data,e),Va(t,null),Va(f.blueprint,null));let S=ec(e,t),v=e.injectorIndex;if(Eh(S)){let x=Ds(S),l=xs(S,t),u=l[ot].data;for(let _=0;_<8;_++)t[v+_]=l[x+_]|u[x+_]}return t[v+8]=S,v}function Va(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Th(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function ec(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,f=null,S=t;for(;S!==null;){if(f=Ph(S),f===null)return er;if(n++,S=S[cr],f.injectorIndex!==-1)return f.injectorIndex|n<<16}return er}function nS(e,t,n){tS(e,t,n)}function Ah(e,t,n){if(n&at.Optional||e!==void 0)return e;Fl(t,"NodeInjector")}function Oh(e,t,n,f){if(n&at.Optional&&f===void 0&&(f=null),!(n&(at.Self|at.Host))){let S=e[nr],v=On(void 0);try{return S?S.get(t,f,n&at.Optional):jd(t,f,n&at.Optional)}finally{On(v)}}return Ah(f,t,n)}function Nh(e,t,n,f=at.Default,S){if(e!==null){if(t[nt]&2048&&!(f&at.Self)){let x=sS(e,t,n,f,kn);if(x!==kn)return x}let v=kh(e,t,n,f,kn);if(v!==kn)return v}return Oh(t,n,f,S)}function kh(e,t,n,f,S){let v=rS(n);if(typeof v=="function"){if(!mh(t,e,f))return f&at.Host?Ah(S,n,f):Oh(t,n,f,S);try{let x;if(x=v(f),x==null&&!(f&at.Optional))Fl(n);else return x}finally{bh()}}else if(typeof v=="number"){let x=null,l=Th(e,t),u=er,_=f&at.Host?t[Wn][Mn]:null;for((l===-1||f&at.SkipSelf)&&(u=l===-1?ec(e,t):t[l+8],u===er||!ad(f,!1)?l=-1:(x=t[ot],l=Ds(u),t=xs(u,t)));l!==-1;){let N=t[ot];if(sd(v,l,N.data)){let k=iS(l,t,n,x,f,_);if(k!==kn)return k}u=t[l+8],u!==er&&ad(f,t[ot].data[l+8]===_)&&sd(v,l,t)?(x=N,l=Ds(u),t=xs(u,t)):l=-1}}return S}function iS(e,t,n,f,S,v){let x=t[ot],l=x.data[e+8],u=f==null?Gl(l)&&ul:f!=x&&(l.type&3)!==0,_=S&at.Host&&v===l,N=fs(l,x,n,u,_);return N!==null?rr(t,x,N,l):kn}function fs(e,t,n,f,S){let v=e.providerIndexes,x=t.data,l=v&1048575,u=e.directiveStart,_=e.directiveEnd,N=v>>20,k=f?l:l+N,j=S?l+N:_;for(let R=k;R<j;R++){let C=x[R];if(R<u&&n===C||R>=u&&C.type===n)return R}if(S){let R=x[u];if(R&&zr(R)&&R.type===n)return u}return null}function rr(e,t,n,f){let S=e[n],v=t.data;if($b(S)){let x=S;x.resolving&&w0(_0(v[n]));let l=od(x.canSeeViewProviders);x.resolving=!0;let u,_=x.injectImpl?On(x.injectImpl):null,N=mh(e,f,at.Default);try{S=e[n]=x.factory(void 0,v,e,f),t.firstCreatePass&&n>=f.directiveStart&&Xb(n,v[n],t)}finally{_!==null&&On(_),od(l),x.resolving=!1,bh()}}return S}function rS(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(_r)?e[_r]:void 0;return typeof t=="number"?t>=0?t&Mh:oS:t}function sd(e,t,n){let f=1<<e;return!!(n[t+(e>>_h)]&f)}function ad(e,t){return!(e&at.Self)&&!(e&at.Host&&t)}var Ei=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,f){return Nh(this._tNode,this._lView,t,Ps(f),n)}};function oS(){return new Ei(Bn(),Ht())}function sS(e,t,n,f,S){let v=e,x=t;for(;v!==null&&x!==null&&x[nt]&2048&&!(x[nt]&512);){let l=kh(v,x,n,f|at.Self,kn);if(l!==kn)return l;let u=v.parent;if(!u){let _=x[Kd];if(_){let N=_.get(n,kn,f);if(N!==kn)return N}u=Ph(x),x=x[cr]}v=u}return S}function Ph(e){let t=e[ot],n=t.type;return n===2?t.declTNode:n===1?e[Mn]:null}function ld(e,t=null,n=null,f){let S=aS(e,t,n,f);return S.resolveInjectorInitializers(),S}function aS(e,t=null,n=null,f,S=new Set){let v=[n||Vn,sb(e)];return f=f||(typeof e=="object"?void 0:dn(e)),new ms(v,t||Wl(),f||null,S)}var Di=class Di{static create(t,n){if(Array.isArray(t))return ld({name:""},n,t,"");{let f=t.name??"";return ld({name:f},t.parent,t.providers,f)}}};Di.THROW_IF_NOT_FOUND=wr,Di.NULL=new vs,Di.\u0275prov=xt({token:Di,providedIn:"any",factory:()=>ht(zd)}),Di.__NG_ELEMENT_ID__=-1;var Ai=Di;var lS=new St("");lS.__NG_ELEMENT_ID__=e=>{let t=Bn();if(t===null)throw new bt(204,!1);if(t.type&2)return t.value;if(e&at.Optional)return null;throw new bt(204,!1)};var cS="ngOriginalError";function Wa(e){return e[cS]}var Yn=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Wa(t);for(;n&&Wa(n);)n=Wa(n);return n||null}},Lh=new St("",{providedIn:"root",factory:()=>Mt(Yn).handleError.bind(void 0)}),Rh=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=uS,t.__NG_ENV_ID__=f=>f;let e=t;return e})(),fl=class extends Rh{constructor(t){super(),this._lView=t}onDestroy(t){return uh(this._lView,t),()=>_b(this._lView,t)}};function uS(){return new fl(Ht())}function fS(){return fr(Bn(),Ht())}function fr(e,t){return new dr(_n(e,t))}var dr=(()=>{let t=class t{constructor(f){this.nativeElement=f}};t.__NG_ELEMENT_ID__=fS;let e=t;return e})();function dS(e){return e instanceof dr?e.nativeElement:e}var Bs=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Dr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let f=this.taskId++;return this.pendingTasks.add(f),f}remove(f){this.pendingTasks.delete(f),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275prov=xt({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();var dl=class extends nn{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,mb()&&(this.destroyRef=Mt(Rh,{optional:!0})??void 0,this.pendingTasks=Mt(Bs,{optional:!0})??void 0)}emit(t){let n=It(null);try{super.next(t)}finally{It(n)}}subscribe(t,n,f){let S=t,v=n||(()=>null),x=f;if(t&&typeof t=="object"){let u=t;S=u.next?.bind(u),v=u.error?.bind(u),x=u.complete?.bind(u)}this.__isAsync&&(v=this.wrapInTimeout(v),S&&(S=this.wrapInTimeout(S)),x&&(x=this.wrapInTimeout(x)));let l=super.subscribe({next:S,error:v,complete:x});return t instanceof Vt&&t.add(l),l}wrapInTimeout(t){return n=>{let f=this.pendingTasks?.add();setTimeout(()=>{t(n),f!==void 0&&this.pendingTasks?.remove(f)})}}},Pn=dl;function hS(){return this._results[Symbol.iterator]()}var hl=class e{get changes(){return this._changes??=new Pn}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=hS)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let f=z0(t);(this._changesDetected=!B0(this._results,f,n))&&(this._results=f,this.length=f.length,this.last=f[this.length-1],this.first=f[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function jh(e){return(e.flags&128)===128}var Fh=new Map,gS=0;function pS(){return gS++}function vS(e){Fh.set(e[js],e)}function mS(e){Fh.delete(e[js])}var cd="__ngContext__";function Oi(e,t){xi(t)?(e[cd]=t[js],vS(t)):e[cd]=t}function Bh(e){return Hh(e[Nr])}function zh(e){return Hh(e[xn])}function Hh(e){for(;e!==null&&!$n(e);)e=e[xn];return e}var gl;function Uh(e){gl=e}function yS(){if(gl!==void 0)return gl;if(typeof document<"u")return document;throw new bt(210,!1)}var tc=new St("",{providedIn:"root",factory:()=>CS}),CS="ng",nc=new St(""),Kn=new St("",{providedIn:"platform",factory:()=>"unknown"});var ic=new St("",{providedIn:"root",factory:()=>yS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IS="h",bS="b";var SS=()=>null;function rc(e,t,n=!1){return SS(e,t,n)}var Vh=!1,DS=new St("",{providedIn:"root",factory:()=>Vh});var Es=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Td})`}};function Vr(e){return e instanceof Es?e.changingThisBreaksApplicationSecurity:e}function Wh(e,t){let n=xS(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Td})`)}return n===t}function xS(e){return e instanceof Es&&e.getTypeName()||null}var ES=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gh(e){return e=String(e),e.match(ES)?e:"unsafe:"+e}var oc=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(oc||{});function Yh(e){let t=MS();return t?t.sanitize(oc.URL,e)||"":Wh(e,"URL")?Vr(e):Gh(Ld(e))}function MS(){let e=Ht();return e&&e[Rn].sanitizer}var Xn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xn||{}),_S;function sc(e,t){return _S(e,t)}function Ki(e,t,n,f,S){if(f!=null){let v,x=!1;$n(f)?v=f:xi(f)&&(x=!0,f=f[Zn]);let l=jn(f);e===0&&n!==null?S==null?Qh(t,n,l):Ms(t,n,l,S||null,!0):e===1&&n!==null?Ms(t,n,l,S||null,!0):e===2?US(t,l,x):e===3&&t.destroyNode(l),v!=null&&WS(t,e,v,n,S)}}function wS(e,t){return e.createText(t)}function Xh(e,t,n){return e.createElement(t,n)}function TS(e,t){Zh(e,t),t[Zn]=null,t[Mn]=null}function AS(e,t,n,f,S,v){f[Zn]=S,f[Mn]=t,zs(e,f,n,1,S,v)}function Zh(e,t){t[Rn].changeDetectionScheduler?.notify(8),zs(e,t,t[rn],2,null,null)}function OS(e){let t=e[Nr];if(!t)return Ga(e[ot],e);for(;t;){let n=null;if(xi(t))n=t[Nr];else{let f=t[sn];f&&(n=f)}if(!n){for(;t&&!t[xn]&&t!==e;)xi(t)&&Ga(t[ot],t),t=t[$t];t===null&&(t=e),xi(t)&&Ga(t[ot],t),n=t&&t[xn]}t=n}}function NS(e,t,n,f){let S=sn+f,v=n.length;f>0&&(n[S-1][xn]=t),f<v-sn?(t[xn]=n[S],Fd(n,sn+f,t)):(n.push(t),t[xn]=null),t[$t]=n;let x=t[Mi];x!==null&&n!==x&&$h(x,t);let l=t[Gn];l!==null&&l.insertView(e),al(t),t[nt]|=128}function $h(e,t){let n=e[ir],f=t[$t];if(xi(f))e[nt]|=bs.HasTransplantedViews;else{let S=f[$t][Wn];t[Wn]!==S&&(e[nt]|=bs.HasTransplantedViews)}n===null?e[ir]=[t]:n.push(t)}function ac(e,t){let n=e[ir],f=n.indexOf(t);n.splice(f,1)}function pl(e,t){if(e.length<=sn)return;let n=sn+t,f=e[n];if(f){let S=f[Mi];S!==null&&S!==e&&ac(S,f),t>0&&(e[n-1][xn]=f[xn]);let v=ps(e,sn+t);TS(f[ot],f);let x=v[Gn];x!==null&&x.detachView(v[ot]),f[$t]=null,f[xn]=null,f[nt]&=-129}return f}function Jh(e,t){if(!(t[nt]&256)){let n=t[rn];n.destroyNode&&zs(e,t,n,3,null,null),OS(t)}}function Ga(e,t){if(t[nt]&256)return;let n=It(null);try{t[nt]&=-129,t[nt]|=256,t[hn]&&Ia(t[hn]),PS(e,t),kS(e,t),t[ot].type===1&&t[rn].destroy();let f=t[Mi];if(f!==null&&$n(t[$t])){f!==t[$t]&&ac(f,t);let S=t[Gn];S!==null&&S.detachView(e)}mS(t)}finally{It(n)}}function kS(e,t){let n=e.cleanup,f=t[Cs];if(n!==null)for(let v=0;v<n.length-1;v+=2)if(typeof n[v]=="string"){let x=n[v+3];x>=0?f[x]():f[-x].unsubscribe(),v+=2}else{let x=f[n[v+1]];n[v].call(x)}f!==null&&(t[Cs]=null);let S=t[ai];if(S!==null){t[ai]=null;for(let v=0;v<S.length;v++){let x=S[v];x()}}}function PS(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let f=0;f<n.length;f+=2){let S=t[n[f]];if(!(S instanceof Pr)){let v=n[f+1];if(Array.isArray(v))for(let x=0;x<v.length;x+=2){let l=S[v[x]],u=v[x+1];Nn(4,l,u);try{u.call(l)}finally{Nn(5,l,u)}}else{Nn(4,S,v);try{v.call(S)}finally{Nn(5,S,v)}}}}}function LS(e,t,n){return RS(e,t.parent,n)}function RS(e,t,n){let f=t;for(;f!==null&&f.type&168;)t=f,f=t.parent;if(f===null)return n[Zn];{let{componentOffset:S}=f;if(S>-1){let{encapsulation:v}=e.data[f.directiveStart+S];if(v===Ln.None||v===Ln.Emulated)return null}return _n(f,n)}}function Ms(e,t,n,f,S){e.insertBefore(t,n,f,S)}function Qh(e,t,n){e.appendChild(t,n)}function ud(e,t,n,f,S){f!==null?Ms(e,t,n,f,S):Qh(e,t,n)}function jS(e,t,n,f){e.removeChild(t,n,f)}function lc(e,t){return e.parentNode(t)}function FS(e,t){return e.nextSibling(t)}function BS(e,t,n){return HS(e,t,n)}function zS(e,t,n){return e.type&40?_n(e,n):null}var HS=zS,fd;function cc(e,t,n,f){let S=LS(e,f,t),v=t[rn],x=f.parent||t[Mn],l=BS(x,f,t);if(S!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)ud(v,S,n[u],l,!1);else ud(v,S,n,l,!1);fd!==void 0&&fd(v,f,t,n,S)}function ds(e,t){if(t!==null){let n=t.type;if(n&3)return _n(t,e);if(n&4)return vl(-1,e[t.index]);if(n&8){let f=t.child;if(f!==null)return ds(e,f);{let S=e[t.index];return $n(S)?vl(-1,S):jn(S)}}else{if(n&32)return sc(t,e)()||jn(e[t.index]);{let f=Kh(e,t);if(f!==null){if(Array.isArray(f))return f[0];let S=wi(e[Wn]);return ds(S,f)}else return ds(e,t.next)}}}return null}function Kh(e,t){if(t!==null){let f=e[Wn][Mn],S=t.projection;return f.projection[S]}return null}function vl(e,t){let n=sn+e+1;if(n<t.length){let f=t[n],S=f[ot].firstChild;if(S!==null)return ds(f,S)}return t[_i]}function US(e,t,n){let f=lc(e,t);f&&jS(e,f,t,n)}function uc(e,t,n,f,S,v,x){for(;n!=null;){if(n.type===128){n=n.next;continue}let l=f[n.index],u=n.type;if(x&&t===0&&(l&&Oi(jn(l),f),n.flags|=2),(n.flags&32)!==32)if(u&8)uc(e,t,n.child,f,S,v,!1),Ki(t,e,S,l,v);else if(u&32){let _=sc(n,f),N;for(;N=_();)Ki(t,e,S,N,v);Ki(t,e,S,l,v)}else u&16?VS(e,t,f,n,S,v):Ki(t,e,S,l,v);n=x?n.projectionNext:n.next}}function zs(e,t,n,f,S,v){uc(n,f,e.firstChild,t,S,v,!1)}function VS(e,t,n,f,S,v){let x=n[Wn],u=x[Mn].projection[f.projection];if(Array.isArray(u))for(let _=0;_<u.length;_++){let N=u[_];Ki(t,e,S,N,v)}else{let _=u,N=x[$t];jh(f)&&(_.flags|=128),uc(e,t,_,N,S,v,!0)}}function WS(e,t,n,f,S){let v=n[_i],x=jn(n);v!==x&&Ki(t,e,f,v,S);for(let l=sn;l<n.length;l++){let u=n[l];zs(u[ot],u,e,t,f,v)}}function GS(e,t,n,f,S){if(t)S?e.addClass(n,f):e.removeClass(n,f);else{let v=f.indexOf("-")===-1?void 0:Xn.DashCase;S==null?e.removeStyle(n,f,v):(typeof S=="string"&&S.endsWith("!important")&&(S=S.slice(0,-10),v|=Xn.Important),e.setStyle(n,f,S,v))}}function YS(e,t,n){e.setAttribute(t,"style",n)}function qh(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function eg(e,t,n){let{mergedAttrs:f,classes:S,styles:v}=n;f!==null&&el(e,t,f),S!==null&&qh(e,t,S),v!==null&&YS(e,t,v)}var Wr={};function gn(e=1){tg(Fn(),Ht(),Ur()+e,!1)}function tg(e,t,n,f){if(!f)if((t[nt]&3)===3){let v=e.preOrderCheckHooks;v!==null&&cs(t,v,n)}else{let v=e.preOrderHooks;v!==null&&us(t,v,0,n)}Ti(n)}function ki(e,t=at.Default){let n=Ht();if(n===null)return ht(e,t);let f=Bn();return Nh(f,n,Dn(e),t)}function ng(e,t,n,f,S,v){let x=It(null);try{let l=null;S&li.SignalBased&&(l=t[f][lf]),l!==null&&l.transformFn!==void 0&&(v=l.transformFn(v)),S&li.HasDecoratorInputTransform&&(v=e.inputTransforms[f].call(t,v)),e.setInput!==null?e.setInput(t,l,v,n,f):th(t,l,f,v)}finally{It(x)}}function XS(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let f=0;f<n.length;f++){let S=n[f];if(S<0)Ti(~S);else{let v=S,x=n[++f],l=n[++f];zb(x,v);let u=t[v];l(2,u)}}}finally{Ti(-1)}}function Hs(e,t,n,f,S,v,x,l,u,_,N){let k=t.blueprint.slice();return k[Zn]=S,k[nt]=f|4|128|8|64,(_!==null||e&&e[nt]&2048)&&(k[nt]|=2048),lh(k),k[$t]=k[cr]=e,k[En]=n,k[Rn]=x||e&&e[Rn],k[rn]=l||e&&e[rn],k[nr]=u||e&&e[nr]||null,k[Mn]=v,k[js]=pS(),k[ys]=N,k[Kd]=_,k[Wn]=t.type==2?e[Wn]:k,k}function Us(e,t,n,f,S){let v=e.data[t];if(v===null)v=ZS(e,t,n,f,S),Bb()&&(v.flags|=32);else if(v.type&64){v.type=n,v.value=f,v.attrs=S;let x=Pb();v.injectorIndex=x===null?-1:x.injectorIndex}return Hr(v,!0),v}function ZS(e,t,n,f,S){let v=hh(),x=gh(),l=x?v:v&&v.parent,u=e.data[t]=eD(e,l,n,t,f,S);return e.firstChild===null&&(e.firstChild=u),v!==null&&(x?v.child==null&&u.parent!==null&&(v.child=u):v.next===null&&(v.next=u,u.prev=v)),u}function ig(e,t,n,f){if(n===0)return-1;let S=t.length;for(let v=0;v<n;v++)t.push(f),e.blueprint.push(f),e.data.push(null);return S}function rg(e,t,n,f,S){let v=Ur(),x=f&2;try{Ti(-1),x&&t.length>ui&&tg(e,t,ui,!1),Nn(x?2:0,S),n(f,S)}finally{Ti(v),Nn(x?3:1,S)}}function og(e,t,n){if(eh(t)){let f=It(null);try{let S=t.directiveStart,v=t.directiveEnd;for(let x=S;x<v;x++){let l=e.data[x];if(l.contentQueries){let u=n[x];l.contentQueries(1,u,x)}}}finally{It(f)}}}function sg(e,t,n){dh()&&(aD(e,t,n,_n(n,t)),(n.flags&64)===64&&fg(e,t,n))}function ag(e,t,n=_n){let f=t.localNames;if(f!==null){let S=t.index+1;for(let v=0;v<f.length;v+=2){let x=f[v+1],l=x===-1?n(t,e):e[x];e[S++]=l}}}function lg(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=fc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function fc(e,t,n,f,S,v,x,l,u,_,N){let k=ui+f,j=k+S,R=$S(k,j),C=typeof _=="function"?_():_;return R[ot]={type:e,blueprint:R,template:n,queries:null,viewQuery:l,declTNode:t,data:R.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof v=="function"?v():v,pipeRegistry:typeof x=="function"?x():x,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:N}}function $S(e,t){let n=[];for(let f=0;f<t;f++)n.push(f<e?null:Wr);return n}function JS(e,t,n,f){let v=f.get(DS,Vh)||n===Ln.ShadowDom,x=e.selectRootElement(t,v);return QS(x),x}function QS(e){KS(e)}var KS=()=>null;function qS(e,t,n,f){let S=gg(t);S.push(n),e.firstCreatePass&&pg(e).push(f,S.length-1)}function eD(e,t,n,f,S,v){let x=t?t.injectorIndex:-1,l=0;return Ob()&&(l|=128),{type:n,index:f,insertBeforeIndex:null,injectorIndex:x,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:S,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function dd(e,t,n,f,S){for(let v in t){if(!t.hasOwnProperty(v))continue;let x=t[v];if(x===void 0)continue;f??={};let l,u=li.None;Array.isArray(x)?(l=x[0],u=x[1]):l=x;let _=v;if(S!==null){if(!S.hasOwnProperty(v))continue;_=S[v]}e===0?hd(f,n,_,l,u):hd(f,n,_,l)}return f}function hd(e,t,n,f,S){let v;e.hasOwnProperty(n)?(v=e[n]).push(t,f):v=e[n]=[t,f],S!==void 0&&v.push(S)}function tD(e,t,n){let f=t.directiveStart,S=t.directiveEnd,v=e.data,x=t.attrs,l=[],u=null,_=null;for(let N=f;N<S;N++){let k=v[N],j=n?n.get(k):null,R=j?j.inputs:null,C=j?j.outputs:null;u=dd(0,k.inputs,N,u,R),_=dd(1,k.outputs,N,_,C);let s=u!==null&&x!==null&&!Hl(t)?vD(u,N,x):null;l.push(s)}u!==null&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=l,t.inputs=u,t.outputs=_}function nD(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function iD(e,t,n,f,S,v,x,l){let u=_n(t,n),_=t.inputs,N;!l&&_!=null&&(N=_[f])?(dc(e,n,N,f,S),Gl(t)&&rD(n,t.index)):t.type&3?(f=nD(f),S=x!=null?x(S,t.value||"",f):S,v.setProperty(u,f,S)):t.type&12}function rD(e,t){let n=ur(t,e);n[nt]&16||(n[nt]|=64)}function cg(e,t,n,f){if(dh()){let S=f===null?null:{"":-1},v=cD(e,n),x,l;v===null?x=l=null:[x,l]=v,x!==null&&ug(e,t,n,x,S,l),S&&uD(n,f,S)}n.mergedAttrs=zl(n.mergedAttrs,n.attrs)}function ug(e,t,n,f,S,v){for(let _=0;_<f.length;_++)nS(wh(n,t),e,f[_].type);dD(n,e.data.length,f.length);for(let _=0;_<f.length;_++){let N=f[_];N.providersResolver&&N.providersResolver(N)}let x=!1,l=!1,u=ig(e,t,f.length,null);for(let _=0;_<f.length;_++){let N=f[_];n.mergedAttrs=zl(n.mergedAttrs,N.hostAttrs),hD(e,n,t,u,N),fD(u,N,S),N.contentQueries!==null&&(n.flags|=4),(N.hostBindings!==null||N.hostAttrs!==null||N.hostVars!==0)&&(n.flags|=64);let k=N.type.prototype;!x&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),x=!0),!l&&(k.ngOnChanges||k.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),l=!0),u++}tD(e,n,v)}function oD(e,t,n,f,S){let v=S.hostBindings;if(v){let x=e.hostBindingOpCodes;x===null&&(x=e.hostBindingOpCodes=[]);let l=~t.index;sD(x)!=l&&x.push(l),x.push(n,f,v)}}function sD(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function aD(e,t,n,f){let S=n.directiveStart,v=n.directiveEnd;Gl(n)&&gD(t,n,e.data[S+n.componentOffset]),e.firstCreatePass||wh(n,t),Oi(f,t);let x=n.initialInputs;for(let l=S;l<v;l++){let u=e.data[l],_=rr(t,e,l,n);if(Oi(_,t),x!==null&&pD(t,l-S,_,u,n,x),zr(u)){let N=ur(n.index,t);N[En]=rr(t,e,l,n)}}}function fg(e,t,n){let f=n.directiveStart,S=n.directiveEnd,v=n.index,x=Hb();try{Ti(v);for(let l=f;l<S;l++){let u=e.data[l],_=t[l];ll(l),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&lD(u,_)}}finally{Ti(-1),ll(x)}}function lD(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function cD(e,t){let n=e.directiveRegistry,f=null,S=null;if(n)for(let v=0;v<n.length;v++){let x=n[v];if(J0(t,x.selectors,!1))if(f||(f=[]),zr(x))if(x.findHostDirectiveDefs!==null){let l=[];S=S||new Map,x.findHostDirectiveDefs(x,l,S),f.unshift(...l,x);let u=l.length;ml(e,t,u)}else f.unshift(x),ml(e,t,0);else S=S||new Map,x.findHostDirectiveDefs?.(x,f,S),f.push(x)}return f===null?null:[f,S]}function ml(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function uD(e,t,n){if(t){let f=e.localNames=[];for(let S=0;S<t.length;S+=2){let v=n[t[S+1]];if(v==null)throw new bt(-301,!1);f.push(t[S],v)}}}function fD(e,t,n){if(n){if(t.exportAs)for(let f=0;f<t.exportAs.length;f++)n[t.exportAs[f]]=e;zr(t)&&(n[""]=e)}}function dD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function hD(e,t,n,f,S){e.data[f]=S;let v=S.factory||(S.factory=Tr(S.type,!0)),x=new Pr(v,zr(S),ki);e.blueprint[f]=x,n[f]=x,oD(e,t,f,ig(e,n,S.hostVars,Wr),S)}function gD(e,t,n){let f=_n(t,e),S=lg(n),v=e[Rn].rendererFactory,x=16;n.signals?x=4096:n.onPush&&(x=64);let l=Vs(e,Hs(e,S,null,x,f,t,null,v.createRenderer(f,n),null,null,null));e[t.index]=l}function pD(e,t,n,f,S,v){let x=v[t];if(x!==null)for(let l=0;l<x.length;){let u=x[l++],_=x[l++],N=x[l++],k=x[l++];ng(f,n,u,_,N,k)}}function vD(e,t,n){let f=null,S=0;for(;S<n.length;){let v=n[S];if(v===0){S+=4;continue}else if(v===5){S+=2;continue}if(typeof v=="number")break;if(e.hasOwnProperty(v)){f===null&&(f=[]);let x=e[v];for(let l=0;l<x.length;l+=3)if(x[l]===t){f.push(v,x[l+1],x[l+2],n[S+1]);break}}S+=2}return f}function dg(e,t,n,f){return[e,!0,0,t,null,f,null,n,null,null]}function hg(e,t){let n=e.contentQueries;if(n!==null){let f=It(null);try{for(let S=0;S<n.length;S+=2){let v=n[S],x=n[S+1];if(x!==-1){let l=e.data[x];Zl(v),l.contentQueries(2,t[x],x)}}}finally{It(f)}}}function Vs(e,t){return e[Nr]?e[td][xn]=t:e[Nr]=t,e[td]=t,t}function yl(e,t,n){Zl(0);let f=It(null);try{t(e,n)}finally{It(f)}}function gg(e){return e[Cs]??=[]}function pg(e){return e.cleanup??=[]}function vg(e,t){let n=e[nr],f=n?n.get(Yn,null):null;f&&f.handleError(t)}function dc(e,t,n,f,S){for(let v=0;v<n.length;){let x=n[v++],l=n[v++],u=n[v++],_=t[x],N=e.data[x];ng(N,_,f,l,u,S)}}function mD(e,t){let n=ur(t,e),f=n[ot];yD(f,n);let S=n[Zn];S!==null&&n[ys]===null&&(n[ys]=rc(S,n[nr])),hc(f,n,n[En])}function yD(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function hc(e,t,n){$l(t);try{let f=e.viewQuery;f!==null&&yl(1,f,n);let S=e.template;S!==null&&rg(e,t,S,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Gn]?.finishViewCreation(e),e.staticContentQueries&&hg(e,t),e.staticViewQueries&&yl(2,e.viewQuery,n);let v=e.components;v!==null&&CD(t,v)}catch(f){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),f}finally{t[nt]&=-5,Jl()}}function CD(e,t){for(let n=0;n<t.length;n++)mD(e,t[n])}function ID(e,t,n,f){let S=It(null);try{let v=t.tView,l=e[nt]&4096?4096:16,u=Hs(e,v,n,l,null,t,null,null,f?.injector??null,f?.embeddedViewInjector??null,f?.dehydratedView??null),_=e[t.index];u[Mi]=_;let N=e[Gn];return N!==null&&(u[Gn]=N.createEmbeddedView(v)),hc(v,u,n),u}finally{It(S)}}function gd(e,t){return!t||t.firstChild===null||jh(e)}function bD(e,t,n,f=!0){let S=t[ot];if(NS(S,t,e,n),f){let x=vl(n,e),l=t[rn],u=lc(l,e[_i]);u!==null&&AS(S,e[Mn],l,t,u,x)}let v=t[ys];v!==null&&v.firstChild!==null&&(v.firstChild=null)}function _s(e,t,n,f,S=!1){for(;n!==null;){if(n.type===128){n=S?n.projectionNext:n.next;continue}let v=t[n.index];v!==null&&f.push(jn(v)),$n(v)&&SD(v,f);let x=n.type;if(x&8)_s(e,t,n.child,f);else if(x&32){let l=sc(n,t),u;for(;u=l();)f.push(u)}else if(x&16){let l=Kh(t,n);if(Array.isArray(l))f.push(...l);else{let u=wi(t[Wn]);_s(u[ot],u,l,f,!0)}}n=S?n.projectionNext:n.next}return f}function SD(e,t){for(let n=sn;n<e.length;n++){let f=e[n],S=f[ot].firstChild;S!==null&&_s(f[ot],f,S,t)}e[_i]!==e[Zn]&&t.push(e[_i])}var mg=[];function DD(e){return e[hn]??xD(e)}function xD(e){let t=mg.pop()??Object.create(MD);return t.lView=e,t}function ED(e){e.lView[hn]!==e&&(e.lView=null,mg.push(e))}var MD=si(Cn({},ma),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Fs(e.lView)},consumerOnSignalRead(){this.lView[hn]=this}});function _D(e){let t=e[hn]??Object.create(wD);return t.lView=e,t}var wD=si(Cn({},ma),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=wi(e.lView);for(;t&&!yg(t[ot]);)t=wi(t);t&&ch(t)},consumerOnSignalRead(){this.lView[hn]=this}});function yg(e){return e.type!==2}var TD=100;function Cg(e,t=!0,n=0){let f=e[Rn],S=f.rendererFactory,v=!1;v||S.begin?.();try{AD(e,n)}catch(x){throw t&&vg(e,x),x}finally{v||(S.end?.(),f.inlineEffectRunner?.flush())}}function AD(e,t){let n=ph();try{id(!0),Cl(e,t);let f=0;for(;kr(e);){if(f===TD)throw new bt(103,!1);f++,Cl(e,1)}}finally{id(n)}}function OD(e,t,n,f){let S=t[nt];if((S&256)===256)return;let v=!1,x=!1;!v&&t[Rn].inlineEffectRunner?.flush(),$l(t);let l=!0,u=null,_=null;v||(yg(e)?(_=DD(t),u=ya(_)):cf()===null?(l=!1,_=_D(t),u=ya(_)):t[hn]&&(Ia(t[hn]),t[hn]=null));try{lh(t),Rb(e.bindingStartIndex),n!==null&&rg(e,t,n,2,f);let N=(S&3)===3;if(!v)if(N){let R=e.preOrderCheckHooks;R!==null&&cs(t,R,null)}else{let R=e.preOrderHooks;R!==null&&us(t,R,0,null),Ha(t,0)}if(x||ND(t),Ig(t,0),e.contentQueries!==null&&hg(e,t),!v)if(N){let R=e.contentCheckHooks;R!==null&&cs(t,R)}else{let R=e.contentHooks;R!==null&&us(t,R,1),Ha(t,1)}XS(e,t);let k=e.components;k!==null&&Sg(t,k,0);let j=e.viewQuery;if(j!==null&&yl(2,j,f),!v)if(N){let R=e.viewCheckHooks;R!==null&&cs(t,R)}else{let R=e.viewHooks;R!==null&&us(t,R,2),Ha(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[za]){for(let R of t[za])R();t[za]=null}v||(t[nt]&=-73)}catch(N){throw v||Fs(t),N}finally{_!==null&&(uf(_,u),l&&ED(_)),Jl()}}function Ig(e,t){for(let n=Bh(e);n!==null;n=zh(n))for(let f=sn;f<n.length;f++){let S=n[f];bg(S,t)}}function ND(e){for(let t=Bh(e);t!==null;t=zh(t)){if(!(t[nt]&bs.HasTransplantedViews))continue;let n=t[ir];for(let f=0;f<n.length;f++){let S=n[f];ch(S)}}}function kD(e,t,n){let f=ur(t,e);bg(f,n)}function bg(e,t){Xl(e)&&Cl(e,t)}function Cl(e,t){let f=e[ot],S=e[nt],v=e[hn],x=!!(t===0&&S&16);if(x||=!!(S&64&&t===0),x||=!!(S&1024),x||=!!(v?.dirty&&Ca(v)),x||=!1,v&&(v.dirty=!1),e[nt]&=-9217,x)OD(f,e,f.template,e[En]);else if(S&8192){Ig(e,1);let l=f.components;l!==null&&Sg(e,l,1)}}function Sg(e,t,n){for(let f=0;f<t.length;f++)kD(e,t[f],n)}function gc(e,t){let n=ph()?64:1088;for(e[Rn].changeDetectionScheduler?.notify(t);e;){e[nt]|=n;let f=wi(e);if(ol(e)&&!f)return e;e=f}return null}var Lr=class{get rootNodes(){let t=this._lView,n=t[ot];return _s(n,t,n.firstChild,[])}constructor(t,n,f=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=f,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(t){this._lView[En]=t}get destroyed(){return(this._lView[nt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[$t];if($n(t)){let n=t[Is],f=n?n.indexOf(this):-1;f>-1&&(pl(t,f),ps(n,f))}this._attachedToViewContainer=!1}Jh(this._lView[ot],this._lView)}onDestroy(t){uh(this._lView,t)}markForCheck(){gc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[nt]&=-129}reattach(){al(this._lView),this._lView[nt]|=128}detectChanges(){this._lView[nt]|=1024,Cg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new bt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=ol(this._lView),n=this._lView[Mi];n!==null&&!t&&ac(n,this._lView),Zh(this._lView[ot],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new bt(902,!1);this._appRef=t;let n=ol(this._lView),f=this._lView[Mi];f!==null&&!n&&$h(f,this._lView),al(this._lView)}},or=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=RD;let e=t;return e})(),PD=or,LD=class extends PD{constructor(t,n,f){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=f}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,f){let S=ID(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:f});return new Lr(S)}};function RD(){return pc(Bn(),Ht())}function pc(e,t){return e.type&4?new LD(t,e,fr(e,t)):null}var tO=new RegExp(`^(\\d+)*(${bS}|${IS})*(.*)`);var jD=()=>null;function pd(e,t){return jD(e,t)}var Rr=class{},Dg=new St("",{providedIn:"root",factory:()=>!1});var xg=new St(""),Il=class{},ws=class{};function FD(e){let t=Error(`No component factory found for ${dn(e)}.`);return t[BD]=e,t}var BD="ngComponent";var bl=class{resolveComponentFactory(t){throw FD(t)}},bc=class bc{};bc.NULL=new bl;var jr=bc,sr=class{};var zD=(()=>{let t=class t{};t.\u0275prov=xt({token:t,providedIn:"root",factory:()=>null});let e=t;return e})();var vd=new Set;function Eg(e){vd.has(e)||(vd.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Mg(e){let t=!0;return setTimeout(()=>{t&&(t=!1,e())}),typeof Ja.requestAnimationFrame=="function"&&Ja.requestAnimationFrame(()=>{t&&(t=!1,e())}),()=>{t=!1}}function md(e){let t=!0;return queueMicrotask(()=>{t&&e()}),()=>{t=!1}}function yd(...e){}var Wt=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pn(!1),this.onMicrotaskEmpty=new Pn(!1),this.onStable=new Pn(!1),this.onError=new Pn(!1),typeof Zone>"u")throw new bt(908,!1);Zone.assertZonePatched();let S=this;S._nesting=0,S._outer=S._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(S._inner=S._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(S._inner=S._inner.fork(Zone.longStackTraceZoneSpec)),S.shouldCoalesceEventChangeDetection=!f&&n,S.shouldCoalesceRunChangeDetection=f,S.callbackScheduled=!1,VD(S)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new bt(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new bt(909,!1)}run(t,n,f){return this._inner.run(t,n,f)}runTask(t,n,f,S){let v=this._inner,x=v.scheduleEventTask("NgZoneEvent: "+S,t,HD,yd,yd);try{return v.runTask(x,n,f)}finally{v.cancelTask(x)}}runGuarded(t,n,f){return this._inner.runGuarded(t,n,f)}runOutsideAngular(t){return this._outer.run(t)}},HD={};function vc(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function UD(e){e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,Zone.root.run(()=>{Mg(()=>{e.callbackScheduled=!1,Sl(e),e.isCheckStableRunning=!0,vc(e),e.isCheckStableRunning=!1})}),Sl(e))}function VD(e){let t=()=>{UD(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,f,S,v,x,l)=>{if(WD(l))return n.invokeTask(S,v,x,l);try{return Cd(e),n.invokeTask(S,v,x,l)}finally{(e.shouldCoalesceEventChangeDetection&&v.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Id(e)}},onInvoke:(n,f,S,v,x,l,u)=>{try{return Cd(e),n.invoke(S,v,x,l,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!GD(l)&&t(),Id(e)}},onHasTask:(n,f,S,v)=>{n.hasTask(S,v),f===S&&(v.change=="microTask"?(e._hasPendingMicrotasks=v.microTask,Sl(e),vc(e)):v.change=="macroTask"&&(e.hasPendingMacrotasks=v.macroTask))},onHandleError:(n,f,S,v)=>(n.handleError(S,v),e.runOutsideAngular(()=>e.onError.emit(v)),!1)})}function Sl(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Cd(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Id(e){e._nesting--,vc(e)}var Dl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pn,this.onMicrotaskEmpty=new Pn,this.onStable=new Pn,this.onError=new Pn}run(t,n,f){return t.apply(n,f)}runGuarded(t,n,f){return t.apply(n,f)}runOutsideAngular(t){return t()}runTask(t,n,f,S){return t.apply(n,f)}};function WD(e){return _g(e,"__ignore_ng_zone__")}function GD(e){return _g(e,"__scheduler_tick__")}function _g(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var wg=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let f=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let S of f)S()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=xt({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function xl(e,t,n){let f=n?e.styles:null,S=n?e.classes:null,v=0;if(t!==null)for(let x=0;x<t.length;x++){let l=t[x];if(typeof l=="number")v=l;else if(v==1)S=Qa(S,l);else if(v==2){let u=l,_=t[++x];f=Qa(f,u+": "+_+";")}}n?e.styles=f:e.stylesWithoutHost=f,n?e.classes=S:e.classesWithoutHost=S}var El=class extends jr{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=tr(t);return new Ts(n,this.ngModule)}};function bd(e,t){let n=[];for(let f in e){if(!e.hasOwnProperty(f))continue;let S=e[f];if(S===void 0)continue;let v=Array.isArray(S),x=v?S[0]:S,l=v?S[1]:li.None;t?n.push({propName:x,templateName:f,isSignal:(l&li.SignalBased)!==0}):n.push({propName:x,templateName:f})}return n}function YD(e){let t=e.toLowerCase();return t==="svg"?sh:t==="math"?Sb:null}var Ts=class extends ws{get inputs(){let t=this.componentDef,n=t.inputTransforms,f=bd(t.inputs,!0);if(n!==null)for(let S of f)n.hasOwnProperty(S.propName)&&(S.transform=n[S.propName]);return f}get outputs(){return bd(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=eb(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,f,S){let v=It(null);try{S=S||this.ngModule;let x=S instanceof ci?S:S?.injector;x&&this.componentDef.getStandaloneInjector!==null&&(x=this.componentDef.getStandaloneInjector(x)||x);let l=x?new cl(t,x):t,u=l.get(sr,null);if(u===null)throw new bt(407,!1);let _=l.get(zD,null),N=l.get(wg,null),k=l.get(Rr,null),j={rendererFactory:u,sanitizer:_,inlineEffectRunner:null,afterRenderEventManager:N,changeDetectionScheduler:k},R=u.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",s=f?JS(R,f,this.componentDef.encapsulation,l):Xh(R,C,YD(C)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let m=null;s!==null&&(m=rc(s,l,!0));let i=fc(0,null,null,1,0,null,null,null,null,null,null),c=Hs(null,i,null,y,null,null,j,R,l,null,m);$l(c);let o,h;try{let b=this.componentDef,d,D=null;b.findHostDirectiveDefs?(d=[],D=new Map,b.findHostDirectiveDefs(b,d,D),d.push(b)):d=[b];let E=XD(c,s),w=ZD(E,s,b,d,c,j,R);h=ah(i,ui),s&&QD(R,b,s,f),n!==void 0&&KD(h,this.ngContentSelectors,n),o=JD(w,b,d,D,c,[qD]),hc(i,c,null)}finally{Jl()}return new Ml(this.componentType,o,fr(h,c),c,h)}finally{It(v)}}},Ml=class extends Il{constructor(t,n,f,S,v){super(),this.location=f,this._rootLView=S,this._tNode=v,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Lr(S,void 0,!1),this.componentType=t}setInput(t,n){let f=this._tNode.inputs,S;if(f!==null&&(S=f[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let v=this._rootLView;dc(v[ot],v,S,t,n),this.previousInputValues.set(t,n);let x=ur(this._tNode.index,v);gc(x,1)}}get injector(){return new Ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function XD(e,t){let n=e[ot],f=ui;return e[f]=t,Us(n,f,2,"#host",null)}function ZD(e,t,n,f,S,v,x){let l=S[ot];$D(f,e,t,x);let u=null;t!==null&&(u=rc(t,S[nr]));let _=v.rendererFactory.createRenderer(t,n),N=16;n.signals?N=4096:n.onPush&&(N=64);let k=Hs(S,lg(n),null,N,S[e.index],e,v,_,null,null,u);return l.firstCreatePass&&ml(l,e,f.length-1),Vs(S,k),S[e.index]=k}function $D(e,t,n,f){for(let S of e)t.mergedAttrs=zl(t.mergedAttrs,S.hostAttrs);t.mergedAttrs!==null&&(xl(t,t.mergedAttrs,!0),n!==null&&eg(f,n,t))}function JD(e,t,n,f,S,v){let x=Bn(),l=S[ot],u=_n(x,S);ug(l,S,x,n,null,f);for(let N=0;N<n.length;N++){let k=x.directiveStart+N,j=rr(S,l,k,x);Oi(j,S)}fg(l,S,x),u&&Oi(u,S);let _=rr(S,l,x.directiveStart+x.componentOffset,x);if(e[En]=S[En]=_,v!==null)for(let N of v)N(_,t);return og(l,x,S),_}function QD(e,t,n,f){if(f)el(e,n,["ng-version","18.1.2"]);else{let{attrs:S,classes:v}=tb(t.selectors[0]);S&&el(e,n,S),v&&v.length>0&&qh(e,n,v.join(" "))}}function KD(e,t,n){let f=e.projection=[];for(let S=0;S<t.length;S++){let v=n[S];f.push(v!=null?Array.from(v):null)}}function qD(){let e=Bn();ql(Ht()[ot],e)}var Gr=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=ex;let e=t;return e})();function ex(){let e=Bn();return Ag(e,Ht())}var tx=Gr,Tg=class extends tx{constructor(t,n,f){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=f}get element(){return fr(this._hostTNode,this._hostLView)}get injector(){return new Ei(this._hostTNode,this._hostLView)}get parentInjector(){let t=ec(this._hostTNode,this._hostLView);if(Eh(t)){let n=xs(t,this._hostLView),f=Ds(t),S=n[ot].data[f+8];return new Ei(S,n)}else return new Ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Sd(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(t,n,f){let S,v;typeof f=="number"?S=f:f!=null&&(S=f.index,v=f.injector);let x=pd(this._lContainer,t.ssrId),l=t.createEmbeddedViewImpl(n||{},v,x);return this.insertImpl(l,S,gd(this._hostTNode,x)),l}createComponent(t,n,f,S,v){let x=t&&!yb(t),l;if(x)l=n;else{let C=n||{};l=C.index,f=C.injector,S=C.projectableNodes,v=C.environmentInjector||C.ngModuleRef}let u=x?t:new Ts(tr(t)),_=f||this.parentInjector;if(!v&&u.ngModule==null){let s=(x?_:this.parentInjector).get(ci,null);s&&(v=s)}let N=tr(u.componentType??{}),k=pd(this._lContainer,N?.id??null),j=k?.firstChild??null,R=u.create(_,S,j,v);return this.insertImpl(R.hostView,l,gd(this._hostTNode,k)),R}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,f){let S=t._lView;if(Eb(S)){let l=this.indexOf(t);if(l!==-1)this.detach(l);else{let u=S[$t],_=new Tg(u,u[Mn],u[$t]);_.detach(_.indexOf(t))}}let v=this._adjustIndex(n),x=this._lContainer;return bD(x,S,v,f),t.attachToViewContainerRef(),Fd(Ya(x),v,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Sd(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),f=pl(this._lContainer,n);f&&(ps(Ya(this._lContainer),n),Jh(f[ot],f))}detach(t){let n=this._adjustIndex(t,-1),f=pl(this._lContainer,n);return f&&ps(Ya(this._lContainer),n)!=null?new Lr(f):null}_adjustIndex(t,n=0){return t??this.length+n}};function Sd(e){return e[Is]}function Ya(e){return e[Is]||(e[Is]=[])}function Ag(e,t){let n,f=t[e.index];return $n(f)?n=f:(n=dg(f,t,null,e),t[e.index]=n,Vs(t,n)),ix(n,t,e,f),new Tg(n,e,t)}function nx(e,t){let n=e[rn],f=n.createComment(""),S=_n(t,e),v=lc(n,S);return Ms(n,v,f,FS(n,S),!1),f}var ix=sx,rx=()=>!1;function ox(e,t,n){return rx(e,t,n)}function sx(e,t,n,f){if(e[_i])return;let S;n.type&8?S=jn(f):S=nx(t,n),e[_i]=S}var _l=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},wl=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let f=t.contentQueries!==null?t.contentQueries[0]:n.length,S=[];for(let v=0;v<f;v++){let x=n.getByIndex(v),l=this.queries[x.indexInDeclarationView];S.push(l.clone())}return new e(S)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)mc(t,n).matches!==null&&this.queries[n].setDirty()}},Tl=class{constructor(t,n,f=null){this.flags=n,this.read=f,typeof t=="string"?this.predicate=gx(t):this.predicate=t}},Al=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let f=0;f<this.length;f++){let S=n!==null?n.length:0,v=this.getByIndex(f).embeddedTView(t,S);v&&(v.indexInDeclarationView=f,n!==null?n.push(v):n=[v])}return n!==null?new e(n):null}template(t,n){for(let f=0;f<this.queries.length;f++)this.queries[f].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Ol=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,f=t.parent;for(;f!==null&&f.type&8&&f.index!==n;)f=f.parent;return n===(f!==null?f.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let f=this.metadata.predicate;if(Array.isArray(f))for(let S=0;S<f.length;S++){let v=f[S];this.matchTNodeWithReadOption(t,n,ax(n,v)),this.matchTNodeWithReadOption(t,n,fs(n,t,v,!1,!1))}else f===or?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,fs(n,t,f,!1,!1))}matchTNodeWithReadOption(t,n,f){if(f!==null){let S=this.metadata.read;if(S!==null)if(S===dr||S===Gr||S===or&&n.type&4)this.addMatch(n.index,-2);else{let v=fs(n,t,S,!1,!1);v!==null&&this.addMatch(n.index,v)}else this.addMatch(n.index,f)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function ax(e,t){let n=e.localNames;if(n!==null){for(let f=0;f<n.length;f+=2)if(n[f]===t)return n[f+1]}return null}function lx(e,t){return e.type&11?fr(e,t):e.type&4?pc(e,t):null}function cx(e,t,n,f){return n===-1?lx(t,e):n===-2?ux(e,t,f):rr(e,e[ot],n,t)}function ux(e,t,n){if(n===dr)return fr(t,e);if(n===or)return pc(t,e);if(n===Gr)return Ag(t,e)}function Og(e,t,n,f){let S=t[Gn].queries[f];if(S.matches===null){let v=e.data,x=n.matches,l=[];for(let u=0;x!==null&&u<x.length;u+=2){let _=x[u];if(_<0)l.push(null);else{let N=v[_];l.push(cx(t,N,x[u+1],n.metadata.read))}}S.matches=l}return S.matches}function Nl(e,t,n,f){let S=e.queries.getByIndex(n),v=S.matches;if(v!==null){let x=Og(e,t,S,n);for(let l=0;l<v.length;l+=2){let u=v[l];if(u>0)f.push(x[l/2]);else{let _=v[l+1],N=t[-u];for(let k=sn;k<N.length;k++){let j=N[k];j[Mi]===j[$t]&&Nl(j[ot],j,_,f)}if(N[ir]!==null){let k=N[ir];for(let j=0;j<k.length;j++){let R=k[j];Nl(R[ot],R,_,f)}}}}}return f}function fx(e,t){return e[Gn].queries[t].queryList}function dx(e,t,n){let f=new hl((n&4)===4);return qS(e,t,f,f.destroy),(t[Gn]??=new wl).queries.push(new _l(f))-1}function hx(e,t,n){let f=Fn();return f.firstCreatePass&&(px(f,new Tl(e,t,n),-1),(t&2)===2&&(f.staticViewQueries=!0)),dx(f,Ht(),t)}function gx(e){return e.split(",").map(t=>t.trim())}function px(e,t,n){e.queries===null&&(e.queries=new Al),e.queries.track(new Ol(t,n))}function mc(e,t){return e.queries.getByIndex(t)}function vx(e,t){let n=e[ot],f=mc(n,t);return f.crossesNgTemplate?Nl(n,e,t,[]):Og(n,e,f,t)}var ar=class{};var As=class extends ar{constructor(t){super(),this.componentFactoryResolver=new El(this),this.instance=null;let n=new ms([...t.providers,{provide:ar,useValue:this},{provide:jr,useValue:this.componentFactoryResolver}],t.parent||Wl(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function mx(e,t,n=null){return new As({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function Ng(e,t,n){let f=e[t];return Object.is(f,n)?!1:(e[t]=n,!0)}function yx(e){return(e.flags&32)===32}function Cx(e,t,n,f,S,v,x,l,u){let _=t.consts,N=Us(t,e,4,x||null,l||null);cg(t,n,N,Ss(_,u)),ql(t,N);let k=N.tView=fc(2,N,f,S,v,t.directiveRegistry,t.pipeRegistry,null,t.schemas,_,null);return t.queries!==null&&(t.queries.template(t,N),k.queries=t.queries.embeddedTView(N)),N}function Ix(e,t,n,f,S,v,x,l,u,_){let N=n+ui,k=t.firstCreatePass?Cx(N,t,e,f,S,v,x,l,u):t.data[N];Hr(k,!1);let j=bx(t,e,k,n);Ql()&&cc(t,e,j,k),Oi(j,e);let R=dg(j,e,j,k);return e[N]=R,Vs(e,R),ox(R,k,e),Yl(k)&&sg(t,e,k),u!=null&&ag(e,k,_),k}function Pi(e,t,n,f,S,v,x,l){let u=Ht(),_=Fn(),N=Ss(_.consts,v);return Ix(u,_,e,t,n,f,S,N,x,l),Pi}var bx=Sx;function Sx(e,t,n,f){return Kl(!0),t[rn].createComment("")}function as(e,t){return e<<17|t<<2}function Ni(e){return e>>17&32767}function Dx(e){return(e&2)==2}function xx(e,t){return e&131071|t<<17}function kl(e){return e|2}function lr(e){return(e&131068)>>2}function Xa(e,t){return e&-131069|t<<2}function Ex(e){return(e&1)===1}function Pl(e){return e|1}function Mx(e,t,n,f,S,v){let x=v?t.classBindings:t.styleBindings,l=Ni(x),u=lr(x);e[f]=n;let _=!1,N;if(Array.isArray(n)){let k=n;N=k[1],(N===null||Br(k,N)>0)&&(_=!0)}else N=n;if(S)if(u!==0){let j=Ni(e[l+1]);e[f+1]=as(j,l),j!==0&&(e[j+1]=Xa(e[j+1],f)),e[l+1]=xx(e[l+1],f)}else e[f+1]=as(l,0),l!==0&&(e[l+1]=Xa(e[l+1],f)),l=f;else e[f+1]=as(u,0),l===0?l=f:e[u+1]=Xa(e[u+1],f),u=f;_&&(e[f+1]=kl(e[f+1])),Dd(e,N,f,!0),Dd(e,N,f,!1),_x(t,N,e,f,v),x=as(l,u),v?t.classBindings=x:t.styleBindings=x}function _x(e,t,n,f,S){let v=S?e.residualClasses:e.residualStyles;v!=null&&typeof t=="string"&&Br(v,t)>=0&&(n[f+1]=Pl(n[f+1]))}function Dd(e,t,n,f){let S=e[n+1],v=t===null,x=f?Ni(S):lr(S),l=!1;for(;x!==0&&(l===!1||v);){let u=e[x],_=e[x+1];wx(u,t)&&(l=!0,e[x+1]=f?Pl(_):kl(_)),x=f?Ni(_):lr(_)}l&&(e[n+1]=f?kl(S):Pl(S))}function wx(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Br(e,t)>=0:!1}var Kt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tx(e){return e.substring(Kt.key,Kt.keyEnd)}function Ax(e){return e.substring(Kt.value,Kt.valueEnd)}function Ox(e){return Nx(e),kg(e,Os(e,0,Kt.textEnd))}function kg(e,t){let n=Kt.textEnd,f=Kt.key=Os(e,t,n);return n===f?-1:(f=Kt.keyEnd=kx(e,f,n),f=xd(e,f,n,58),f=Kt.value=Os(e,f,n),f=Kt.valueEnd=Px(e,f,n),xd(e,f,n,59))}function Nx(e){Kt.key=0,Kt.keyEnd=0,Kt.value=0,Kt.valueEnd=0,Kt.textEnd=e.length}function Os(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function kx(e,t,n){let f;for(;t<n&&((f=e.charCodeAt(t))===45||f===95||(f&-33)>=65&&(f&-33)<=90||f>=48&&f<=57);)t++;return t}function xd(e,t,n,f){return t=Os(e,t,n),t<n&&t++,t}function Px(e,t,n){let f=-1,S=-1,v=-1,x=t,l=x;for(;x<n;){let u=e.charCodeAt(x++);if(u===59)return l;u===34||u===39?l=x=Ed(e,u,x,n):t===x-4&&v===85&&S===82&&f===76&&u===40?l=x=Ed(e,41,x,n):u>32&&(l=x),v=S,S=f,f=u&-33}return l}function Ed(e,t,n,f){let S=-1,v=n;for(;v<f;){let x=e.charCodeAt(v++);if(x==t&&S!==92)return v;x==92&&S===92?S=0:S=x}throw new Error}function an(e,t,n){let f=Ht(),S=jb();if(Ng(f,S,t)){let v=Fn(),x=Gb();iD(v,x,f,e,t,f[rn],n,!1)}return an}function Ll(e,t,n,f,S){let v=t.inputs,x=S?"class":"style";dc(e,n,v[x],x,f)}function Pg(e){Rx(Rg,Lx,e,!1)}function Lx(e,t){for(let n=Ox(t);n>=0;n=kg(t,n))Rg(e,Tx(t),Ax(t))}function Rx(e,t,n,f){let S=Fn(),v=Fb(2);S.firstUpdatePass&&jx(S,null,v,f);let x=Ht();if(n!==Wr&&Ng(x,v,n)){let l=S.data[Ur()];if(jg(l,f)&&!Lg(S,v)){let u=f?l.classesWithoutHost:l.stylesWithoutHost;u!==null&&(n=Qa(u,n||"")),Ll(S,l,x,n,f)}else Vx(S,l,x,x[rn],x[v+1],x[v+1]=Ux(e,t,n),f,v)}}function Lg(e,t){return t>=e.expandoStartIndex}function jx(e,t,n,f){let S=e.data;if(S[n+1]===null){let v=S[Ur()],x=Lg(e,n);jg(v,f)&&t===null&&!x&&(t=!1),t=Fx(S,v,t,f),Mx(S,v,t,n,x,f)}}function Fx(e,t,n,f){let S=Ub(e),v=f?t.residualClasses:t.residualStyles;if(S===null)(f?t.classBindings:t.styleBindings)===0&&(n=Za(null,e,t,n,f),n=Fr(n,t.attrs,f),v=null);else{let x=t.directiveStylingLast;if(x===-1||e[x]!==S)if(n=Za(S,e,t,n,f),v===null){let u=Bx(e,t,f);u!==void 0&&Array.isArray(u)&&(u=Za(null,e,t,u[1],f),u=Fr(u,t.attrs,f),zx(e,t,f,u))}else v=Hx(e,t,f)}return v!==void 0&&(f?t.residualClasses=v:t.residualStyles=v),n}function Bx(e,t,n){let f=n?t.classBindings:t.styleBindings;if(lr(f)!==0)return e[Ni(f)]}function zx(e,t,n,f){let S=n?t.classBindings:t.styleBindings;e[Ni(S)]=f}function Hx(e,t,n){let f,S=t.directiveEnd;for(let v=1+t.directiveStylingLast;v<S;v++){let x=e[v].hostAttrs;f=Fr(f,x,n)}return Fr(f,t.attrs,n)}function Za(e,t,n,f,S){let v=null,x=n.directiveEnd,l=n.directiveStylingLast;for(l===-1?l=n.directiveStart:l++;l<x&&(v=t[l],f=Fr(f,v.hostAttrs,S),v!==e);)l++;return e!==null&&(n.directiveStylingLast=l),f}function Fr(e,t,n){let f=n?1:2,S=-1;if(t!==null)for(let v=0;v<t.length;v++){let x=t[v];typeof x=="number"?S=x:S===f&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Bd(e,x,n?!0:t[++v]))}return e===void 0?null:e}function Ux(e,t,n){if(n==null||n==="")return Vn;let f=[],S=Vr(n);if(Array.isArray(S))for(let v=0;v<S.length;v++)e(f,S[v],!0);else if(typeof S=="object")for(let v in S)S.hasOwnProperty(v)&&e(f,v,S[v]);else typeof S=="string"&&t(f,S);return f}function Rg(e,t,n){Bd(e,t,Vr(n))}function Vx(e,t,n,f,S,v,x,l){S===Wr&&(S=Vn);let u=0,_=0,N=0<S.length?S[0]:null,k=0<v.length?v[0]:null;for(;N!==null||k!==null;){let j=u<S.length?S[u+1]:void 0,R=_<v.length?v[_+1]:void 0,C=null,s;N===k?(u+=2,_+=2,j!==R&&(C=k,s=R)):k===null||N!==null&&N<k?(u+=2,C=N):(_+=2,C=k,s=R),C!==null&&Wx(e,t,n,f,C,s,x,l),N=u<S.length?S[u]:null,k=_<v.length?v[_]:null}}function Wx(e,t,n,f,S,v,x,l){if(!(t.type&3))return;let u=e.data,_=u[l+1],N=Ex(_)?Md(u,t,n,S,lr(_),x):void 0;if(!Ns(N)){Ns(v)||Dx(_)&&(v=Md(u,null,n,S,l,x));let k=Db(Ur(),n);GS(f,x,k,S,v)}}function Md(e,t,n,f,S,v){let x=t===null,l;for(;S>0;){let u=e[S],_=Array.isArray(u),N=_?u[1]:u,k=N===null,j=n[S+1];j===Wr&&(j=k?Vn:void 0);let R=k?Fa(j,f):N===f?j:void 0;if(_&&!Ns(R)&&(R=Fa(u,f)),Ns(R)&&(l=R,x))return l;let C=e[S+1];S=x?Ni(C):lr(C)}if(t!==null){let u=v?t.residualClasses:t.residualStyles;u!=null&&(l=Fa(u,f))}return l}function Ns(e){return e!==void 0}function jg(e,t){return(e.flags&(t?8:16))!==0}function Gx(e,t,n,f,S,v){let x=t.consts,l=Ss(x,S),u=Us(t,e,2,f,l);return cg(t,n,u,Ss(x,v)),u.attrs!==null&&xl(u,u.attrs,!1),u.mergedAttrs!==null&&xl(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function wt(e,t,n,f){let S=Ht(),v=Fn(),x=ui+e,l=S[rn],u=v.firstCreatePass?Gx(x,v,S,t,n,f):v.data[x],_=Yx(v,S,u,l,t,e);S[x]=_;let N=Yl(u);return Hr(u,!0),eg(l,_,u),!yx(u)&&Ql()&&cc(v,S,_,u),wb()===0&&Oi(_,S),Tb(),N&&(sg(v,S,u),og(v,u,S)),f!==null&&ag(S,u),wt}function Yt(){let e=Bn();gh()?Lb():(e=e.parent,Hr(e,!1));let t=e;Nb(t)&&kb(),Ab();let n=Fn();return n.firstCreatePass&&(ql(n,e),eh(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&Jb(t)&&Ll(n,t,Ht(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Qb(t)&&Ll(n,t,Ht(),t.stylesWithoutHost,!1),Yt}function fi(e,t,n,f){return wt(e,t,n,f),Yt(),fi}var Yx=(e,t,n,f,S,v)=>(Kl(!0),Xh(f,S,Yb()));function di(){return Ht()}var ks="en-US";var Xx=ks;function Zx(e){typeof e=="string"&&(Xx=e.toLowerCase().replace(/_/g,"-"))}var $x=(e,t,n)=>{};function zn(e,t,n,f){let S=Ht(),v=Fn(),x=Bn();return Qx(v,S,S[rn],x,e,t,f),zn}function Jx(e,t,n,f){let S=e.cleanup;if(S!=null)for(let v=0;v<S.length-1;v+=2){let x=S[v];if(x===n&&S[v+1]===f){let l=t[Cs],u=S[v+2];return l.length>u?l[u]:null}typeof x=="string"&&(v+=2)}return null}function Qx(e,t,n,f,S,v,x){let l=Yl(f),_=e.firstCreatePass&&pg(e),N=t[En],k=gg(t),j=!0;if(f.type&3||x){let s=_n(f,t),y=x?x(s):s,m=k.length,i=x?o=>x(jn(o[f.index])):f.index,c=null;if(!x&&l&&(c=Jx(e,t,S,f.index)),c!==null){let o=c.__ngLastListenerFn__||c;o.__ngNextListenerFn__=v,c.__ngLastListenerFn__=v,j=!1}else{v=wd(f,t,N,v),$x(s,S,v);let o=n.listen(y,S,v);k.push(v,o),_&&_.push(S,i,m,m+1)}}else v=wd(f,t,N,v);let R=f.outputs,C;if(j&&R!==null&&(C=R[S])){let s=C.length;if(s)for(let y=0;y<s;y+=2){let m=C[y],i=C[y+1],h=t[m][i].subscribe(v),b=k.length;k.push(v,h),_&&_.push(S,f.index,b,-(b+1))}}}function _d(e,t,n,f){let S=It(null);try{return Nn(6,t,n),n(f)!==!1}catch(v){return vg(e,v),!1}finally{Nn(7,t,n),It(S)}}function wd(e,t,n,f){return function S(v){if(v===Function)return f;let x=e.componentOffset>-1?ur(e.index,t):t;gc(x,5);let l=_d(t,n,f,v),u=S.__ngNextListenerFn__;for(;u;)l=_d(t,n,u,v)&&l,u=u.__ngNextListenerFn__;return l}}function pn(e=1){return Wb(e)}function Ws(e,t,n){hx(e,t,n)}function Gs(e){let t=Ht(),n=Fn(),f=vh();Zl(f+1);let S=mc(n,f);if(e.dirty&&xb(t)===((S.metadata.flags&2)===2)){if(S.matches===null)e.reset([]);else{let v=vx(t,f);e.reset(v,dS),e.notifyOnChanges()}return!0}return!1}function Ys(){return fx(Ht(),vh())}function qn(e,t=""){let n=Ht(),f=Fn(),S=e+ui,v=f.firstCreatePass?Us(f,S,1,t,null):f.data[S],x=Kx(f,n,v,t,e);n[S]=x,Ql()&&cc(f,n,x,v),Hr(v,!1)}var Kx=(e,t,n,f,S)=>(Kl(!0),wS(t[rn],f));var qx=(()=>{let t=class t{constructor(f){this._injector=f,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(f){if(!f.standalone)return null;if(!this.cachedInjectors.has(f)){let S=$d(!1,f.type),v=S.length>0?mx([S],this._injector,`Standalone[${f.type.name}]`):null;this.cachedInjectors.set(f,v)}return this.cachedInjectors.get(f)}ngOnDestroy(){try{for(let f of this.cachedInjectors.values())f!==null&&f.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=xt({token:t,providedIn:"environment",factory:()=>new t(ht(ci))});let e=t;return e})();function Xs(e){Eg("NgStandalone"),e.getStandaloneInjector=t=>t.get(qx).getOrCreateStandaloneInjector(e)}var Fg=new St("");function yc(e){return!!e&&typeof e.then=="function"}function Bg(e){return!!e&&typeof e.subscribe=="function"}var Cc=new St(""),zg=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,S)=>{this.resolve=f,this.reject=S}),this.appInits=Mt(Cc,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let f=[];for(let v of this.appInits){let x=v();if(yc(x))f.push(x);else if(Bg(x)){let l=new Promise((u,_)=>{x.subscribe({complete:u,error:_})});f.push(l)}}let S=()=>{this.done=!0,this.resolve()};Promise.all(f).then(()=>{S()}).catch(v=>{this.reject(v)}),f.length===0&&S(),this.initialized=!0}};t.\u0275fac=function(S){return new(S||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),eE=new St("");function tE(){ff(()=>{throw new bt(600,!1)})}function nE(e){return e.isBoundToModule}var iE=10;function rE(e,t,n){try{let f=n();return yc(f)?f.catch(S=>{throw t.runOutsideAngular(()=>e.handleError(S)),S}):f}catch(f){throw t.runOutsideAngular(()=>e.handleError(f)),f}}var Li=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Mt(Lh),this.afterRenderEffectManager=Mt(wg),this.zonelessEnabled=Mt(Dg),this.externalTestViews=new Set,this.beforeRender=new nn,this.afterTick=new nn,this.componentTypes=[],this.components=[],this.isStable=Mt(Bs).hasPendingTasks.pipe(Zt(f=>!f)),this._injector=Mt(ci)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(f,S){let v=f instanceof ws;if(!this._injector.get(zg).done){let R=!v&&rb(f),C=!1;throw new bt(405,C)}let l;v?l=f:l=this._injector.get(jr).resolveComponentFactory(f),this.componentTypes.push(l.componentType);let u=nE(l)?void 0:this._injector.get(ar),_=S||l.selector,N=l.create(Ai.NULL,[],_,u),k=N.location.nativeElement,j=N.injector.get(Fg,null);return j?.registerApplication(k),N.onDestroy(()=>{this.detachView(N.hostView),$a(this.components,N),j?.unregisterApplication(k)}),this._loadComponent(N),N}tick(){this._tick(!0)}_tick(f){if(this._runningTick)throw new bt(101,!1);let S=It(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(f)}catch(v){this.internalErrorHandler(v)}finally{this._runningTick=!1,It(S),this.afterTick.next()}}detectChangesInAttachedViews(f){let S=null;this._injector.destroyed||(S=this._injector.get(sr,null,{optional:!0}));let v=0,x=this.afterRenderEffectManager;for(;v<iE;){let l=v===0;if(f||!l){this.beforeRender.next(l);for(let{_lView:u,notifyErrorHandler:_}of this._views)oE(u,_,l,this.zonelessEnabled)}else S?.begin?.(),S?.end?.();if(v++,x.executeInternalCallbacks(),!this.allViews.some(({_lView:u})=>kr(u))&&(x.execute(),!this.allViews.some(({_lView:u})=>kr(u))))break}}attachView(f){let S=f;this._views.push(S),S.attachToAppRef(this)}detachView(f){let S=f;$a(this._views,S),S.detachFromAppRef()}_loadComponent(f){this.attachView(f.hostView),this.tick(),this.components.push(f);let S=this._injector.get(eE,[]);[...this._bootstrapListeners,...S].forEach(v=>v(f))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(f=>f()),this._views.slice().forEach(f=>f.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(f){return this._destroyListeners.push(f),()=>$a(this._destroyListeners,f)}destroy(){if(this._destroyed)throw new bt(406,!1);let f=this._injector;f.destroy&&!f.destroyed&&f.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(S){return new(S||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function $a(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function oE(e,t,n,f){if(!n&&!kr(e))return;Cg(e,t,n&&!f?0:1)}var sE=(()=>{let t=class t{constructor(){this.zone=Mt(Wt),this.changeDetectionScheduler=Mt(Rr),this.applicationRef=Mt(Li)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(S){return new(S||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function aE({ngZoneFactory:e,ignoreChangesOutsideZone:t}){return e??=()=>new Wt(cE()),[{provide:Wt,useFactory:e},{provide:Or,multi:!0,useFactory:()=>{let n=Mt(sE,{optional:!0});return()=>n.initialize()}},{provide:Or,multi:!0,useFactory:()=>{let n=Mt(uE);return()=>{n.initialize()}}},{provide:Lh,useFactory:lE},t===!0?{provide:xg,useValue:!0}:[]]}function lE(){let e=Mt(Wt),t=Mt(Yn);return n=>e.runOutsideAngular(()=>t.handleError(n))}function cE(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var uE=(()=>{let t=class t{constructor(){this.subscription=new Vt,this.initialized=!1,this.zone=Mt(Wt),this.pendingTasks=Mt(Bs)}initialize(){if(this.initialized)return;this.initialized=!0;let f=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(f=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Wt.assertNotInAngularZone(),queueMicrotask(()=>{f!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(f),f=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Wt.assertInAngularZone(),f??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(S){return new(S||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var fE=(()=>{let t=class t{constructor(){this.appRef=Mt(Li),this.taskService=Mt(Bs),this.ngZone=Mt(Wt),this.zonelessEnabled=Mt(Dg),this.disableScheduling=Mt(xg,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Vt,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Dl||!this.zoneIsDefined)}notify(f){if(!this.zonelessEnabled&&f===5)return;switch(f){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let S=this.useMicrotaskScheduler?md:Mg;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=S(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=S(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Wt.isInAngularZone())}tick(f){if(this.runningTick||this.appRef.destroyed)return;let S=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(f)},void 0,this.schedulerTickApplyArgs)}catch(v){throw this.taskService.remove(S),v}finally{this.cleanup()}this.useMicrotaskScheduler=!0,md(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(S)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let f=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(f)}}};t.\u0275fac=function(S){return new(S||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function dE(){return typeof $localize<"u"&&$localize.locale||ks}var Ic=new St("",{providedIn:"root",factory:()=>Mt(Ic,at.Optional|at.SkipSelf)||dE()});var Hg=new St("");var hs=null;function hE(e=[],t){return Ai.create({name:t,providers:[{provide:Rs,useValue:"platform"},{provide:Hg,useValue:new Set([()=>hs=null])},...e]})}function gE(e=[]){if(hs)return hs;let t=hE(e);return hs=t,tE(),pE(t),t}function pE(e){e.get(nc,null)?.forEach(n=>n())}function Ug(e){try{let{rootComponent:t,appProviders:n,platformProviders:f}=e,S=gE(f),v=[aE({}),{provide:Rr,useExisting:fE},...n||[]],l=new As({providers:v,parent:S,debugName:"",runEnvironmentInitializers:!1}).injector,u=l.get(Wt);return u.run(()=>{l.resolveInjectorInitializers();let _=l.get(Yn,null),N;u.runOutsideAngular(()=>{N=u.onError.subscribe({next:R=>{_.handleError(R)}})});let k=()=>l.destroy(),j=S.get(Hg);return j.add(k),l.onDestroy(()=>{N.unsubscribe(),j.delete(k)}),rE(_,u,()=>{let R=l.get(zg);return R.runInitializers(),R.donePromise.then(()=>{let C=l.get(Ic,ks);Zx(C||ks);let s=l.get(Li);return t!==void 0&&s.bootstrap(t),s})})})}catch(t){return Promise.reject(t)}}var Vg=new St("");var Xg=null;function Dc(){return Xg}function Zg(e){Xg??=e}var Zs=class{};var ei=new St("");function $g(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let f=n.indexOf("="),[S,v]=f==-1?[n,""]:[n.slice(0,f),n.slice(f+1)];if(S.trim()===t)return decodeURIComponent(v)}return null}var Jg=(()=>{let t=class t{constructor(f,S){this._viewContainer=f,this._context=new Sc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=S}set ngIf(f){this._context.$implicit=this._context.ngIf=f,this._updateView()}set ngIfThen(f){Wg("ngIfThen",f),this._thenTemplateRef=f,this._thenViewRef=null,this._updateView()}set ngIfElse(f){Wg("ngIfElse",f),this._elseTemplateRef=f,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(f,S){return!0}};t.\u0275fac=function(S){return new(S||t)(ki(Gr),ki(or))},t.\u0275dir=Wd({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),Sc=class{constructor(){this.$implicit=null,this.ngIf=null}};function Wg(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${dn(t)}'.`)}var xc="browser",CE="server";function Ec(e){return e===xc}function Mc(e){return e===CE}var $s=class{};var Tc=class extends Zs{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ac=class e extends Tc{static makeCurrent(){Zg(new e)}onAndCancel(t,n,f){return t.addEventListener(n,f),()=>{t.removeEventListener(n,f)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=bE();return n==null?null:SE(n)}resetBaseElement(){Yr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $g(document.cookie,t)}},Yr=null;function bE(){return Yr=Yr||document.querySelector("base"),Yr?Yr.getAttribute("href"):null}function SE(e){return new URL(e,document.baseURI).pathname}var DE=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(S){return new(S||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),Js=new St(""),ep=(()=>{let t=class t{constructor(f,S){this._zone=S,this._eventNameToPlugin=new Map,f.forEach(v=>{v.manager=this}),this._plugins=f.slice().reverse()}addEventListener(f,S,v){return this._findPluginFor(S).addEventListener(f,S,v)}getZone(){return this._zone}_findPluginFor(f){let S=this._eventNameToPlugin.get(f);if(S)return S;if(S=this._plugins.find(x=>x.supports(f)),!S)throw new bt(5101,!1);return this._eventNameToPlugin.set(f,S),S}};t.\u0275fac=function(S){return new(S||t)(ht(Js),ht(Wt))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),Xr=class{constructor(t){this._doc=t}},_c="ng-app-id",tp=(()=>{let t=class t{constructor(f,S,v,x={}){this.doc=f,this.appId=S,this.nonce=v,this.platformId=x,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mc(x),this.resetHostNodes()}addStyles(f){for(let S of f)this.changeUsageCount(S,1)===1&&this.onStyleAdded(S)}removeStyles(f){for(let S of f)this.changeUsageCount(S,-1)<=0&&this.onStyleRemoved(S)}ngOnDestroy(){let f=this.styleNodesInDOM;f&&(f.forEach(S=>S.remove()),f.clear());for(let S of this.getAllStyles())this.onStyleRemoved(S);this.resetHostNodes()}addHost(f){this.hostNodes.add(f);for(let S of this.getAllStyles())this.addStyleToHost(f,S)}removeHost(f){this.hostNodes.delete(f)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(f){for(let S of this.hostNodes)this.addStyleToHost(S,f)}onStyleRemoved(f){let S=this.styleRef;S.get(f)?.elements?.forEach(v=>v.remove()),S.delete(f)}collectServerRenderedStyles(){let f=this.doc.head?.querySelectorAll(`style[${_c}="${this.appId}"]`);if(f?.length){let S=new Map;return f.forEach(v=>{v.textContent!=null&&S.set(v.textContent,v)}),S}return null}changeUsageCount(f,S){let v=this.styleRef;if(v.has(f)){let x=v.get(f);return x.usage+=S,x.usage}return v.set(f,{usage:S,elements:[]}),S}getStyleElement(f,S){let v=this.styleNodesInDOM,x=v?.get(S);if(x?.parentNode===f)return v.delete(S),x.removeAttribute(_c),x;{let l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=S,this.platformIsServer&&l.setAttribute(_c,this.appId),f.appendChild(l),l}}addStyleToHost(f,S){let v=this.getStyleElement(f,S),x=this.styleRef,l=x.get(S)?.elements;l?l.push(v):x.set(S,{elements:[v],usage:1})}resetHostNodes(){let f=this.hostNodes;f.clear(),f.add(this.doc.head)}};t.\u0275fac=function(S){return new(S||t)(ht(ei),ht(tc),ht(ic,8),ht(Kn))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Nc=/%COMP%/g,np="%COMP%",xE=`_nghost-${np}`,EE=`_ngcontent-${np}`,ME=!0,_E=new St("",{providedIn:"root",factory:()=>ME});function wE(e){return EE.replace(Nc,e)}function TE(e){return xE.replace(Nc,e)}function ip(e,t){return t.map(n=>n.replace(Nc,e))}var Qg=(()=>{let t=class t{constructor(f,S,v,x,l,u,_,N=null){this.eventManager=f,this.sharedStylesHost=S,this.appId=v,this.removeStylesOnCompDestroy=x,this.doc=l,this.platformId=u,this.ngZone=_,this.nonce=N,this.rendererByCompId=new Map,this.platformIsServer=Mc(u),this.defaultRenderer=new Zr(f,l,_,this.platformIsServer)}createRenderer(f,S){if(!f||!S)return this.defaultRenderer;this.platformIsServer&&S.encapsulation===Ln.ShadowDom&&(S=si(Cn({},S),{encapsulation:Ln.Emulated}));let v=this.getOrCreateRenderer(f,S);return v instanceof Qs?v.applyToHost(f):v instanceof $r&&v.applyStyles(),v}getOrCreateRenderer(f,S){let v=this.rendererByCompId,x=v.get(S.id);if(!x){let l=this.doc,u=this.ngZone,_=this.eventManager,N=this.sharedStylesHost,k=this.removeStylesOnCompDestroy,j=this.platformIsServer;switch(S.encapsulation){case Ln.Emulated:x=new Qs(_,N,S,this.appId,k,l,u,j);break;case Ln.ShadowDom:return new Oc(_,N,f,S,l,u,this.nonce,j);default:x=new $r(_,N,S,k,l,u,j);break}v.set(S.id,x)}return x}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(S){return new(S||t)(ht(ep),ht(tp),ht(tc),ht(_E),ht(ei),ht(Kn),ht(Wt),ht(ic))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),Zr=class{constructor(t,n,f,S){this.eventManager=t,this.doc=n,this.ngZone=f,this.platformIsServer=S,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(wc[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Kg(t)?t.content:t).appendChild(n)}insertBefore(t,n,f){t&&(Kg(t)?t.content:t).insertBefore(n,f)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let f=typeof t=="string"?this.doc.querySelector(t):t;if(!f)throw new bt(-5104,!1);return n||(f.textContent=""),f}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,f,S){if(S){n=S+":"+n;let v=wc[S];v?t.setAttributeNS(v,n,f):t.setAttribute(n,f)}else t.setAttribute(n,f)}removeAttribute(t,n,f){if(f){let S=wc[f];S?t.removeAttributeNS(S,n):t.removeAttribute(`${f}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,f,S){S&(Xn.DashCase|Xn.Important)?t.style.setProperty(n,f,S&Xn.Important?"important":""):t.style[n]=f}removeStyle(t,n,f){f&Xn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,f){t!=null&&(t[n]=f)}setValue(t,n){t.nodeValue=n}listen(t,n,f){if(typeof t=="string"&&(t=Dc().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(f))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Kg(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Oc=class extends Zr{constructor(t,n,f,S,v,x,l,u){super(t,v,x,u),this.sharedStylesHost=n,this.hostEl=f,this.shadowRoot=f.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let _=ip(S.id,S.styles);for(let N of _){let k=document.createElement("style");l&&k.setAttribute("nonce",l),k.textContent=N,this.shadowRoot.appendChild(k)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,f){return super.insertBefore(this.nodeOrShadowRoot(t),n,f)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$r=class extends Zr{constructor(t,n,f,S,v,x,l,u){super(t,v,x,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=S,this.styles=u?ip(u,f.styles):f.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qs=class extends $r{constructor(t,n,f,S,v,x,l,u){let _=S+"-"+f.id;super(t,n,f,v,x,l,u,_),this.contentAttr=wE(_),this.hostAttr=TE(_)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let f=super.createElement(t,n);return super.setAttribute(f,this.contentAttr,""),f}},AE=(()=>{let t=class t extends Xr{constructor(f){super(f)}supports(f){return!0}addEventListener(f,S,v){return f.addEventListener(S,v,!1),()=>this.removeEventListener(f,S,v)}removeEventListener(f,S,v){return f.removeEventListener(S,v)}};t.\u0275fac=function(S){return new(S||t)(ht(ei))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),OE=(()=>{let t=class t extends Xr{constructor(f){super(f),this.delegate=Mt(Vg,{optional:!0})}supports(f){return this.delegate?this.delegate.supports(f):!1}addEventListener(f,S,v){return this.delegate.addEventListener(f,S,v)}removeEventListener(f,S,v){return this.delegate.removeEventListener(f,S,v)}};t.\u0275fac=function(S){return new(S||t)(ht(ei))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),qg=["alt","control","meta","shift"],NE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kE={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},PE=(()=>{let t=class t extends Xr{constructor(f){super(f)}supports(f){return t.parseEventName(f)!=null}addEventListener(f,S,v){let x=t.parseEventName(S),l=t.eventCallback(x.fullKey,v,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dc().onAndCancel(f,x.domEventName,l))}static parseEventName(f){let S=f.toLowerCase().split("."),v=S.shift();if(S.length===0||!(v==="keydown"||v==="keyup"))return null;let x=t._normalizeKey(S.pop()),l="",u=S.indexOf("code");if(u>-1&&(S.splice(u,1),l="code."),qg.forEach(N=>{let k=S.indexOf(N);k>-1&&(S.splice(k,1),l+=N+".")}),l+=x,S.length!=0||x.length===0)return null;let _={};return _.domEventName=v,_.fullKey=l,_}static matchEventFullKeyCode(f,S){let v=NE[f.key]||f.key,x="";return S.indexOf("code.")>-1&&(v=f.code,x="code."),v==null||!v?!1:(v=v.toLowerCase(),v===" "?v="space":v==="."&&(v="dot"),qg.forEach(l=>{if(l!==v){let u=kE[l];u(f)&&(x+=l+".")}}),x+=v,x===S)}static eventCallback(f,S,v){return x=>{t.matchEventFullKeyCode(x,f)&&v.runGuarded(()=>S(x))}}static _normalizeKey(f){return f==="esc"?"escape":f}};t.\u0275fac=function(S){return new(S||t)(ht(ei))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})();function rp(e,t){return Ug(Cn({rootComponent:e},LE(t)))}function LE(e){return{appProviders:[...zE,...e?.providers??[]],platformProviders:BE}}function RE(){Ac.makeCurrent()}function jE(){return new Yn}function FE(){return Uh(document),document}var BE=[{provide:Kn,useValue:xc},{provide:nc,useValue:RE,multi:!0},{provide:ei,useFactory:FE,deps:[]}];var zE=[{provide:Rs,useValue:"root"},{provide:Yn,useFactory:jE,deps:[]},{provide:Js,useClass:AE,multi:!0,deps:[ei,Wt,Kn]},{provide:Js,useClass:PE,multi:!0,deps:[ei]},{provide:Js,useClass:OE,multi:!0},Qg,tp,ep,{provide:sr,useExisting:Qg},{provide:$s,useClass:DE,deps:[]},[]];var Qr="Service workers are disabled or not supported by this browser";function HE(e){return rs(()=>ka(new Error(e)))}var hr=class{constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=HE(Qr);else{let f=Xi(t,"controllerchange").pipe(Zt(()=>t.controller)),S=rs(()=>Er(t.controller)),v=Mr(S,f);this.worker=v.pipe(Si(N=>!!N)),this.registration=this.worker.pipe(Zi(()=>t.getRegistration()));let _=Xi(t,"message").pipe(Zt(N=>N.data)).pipe(Si(N=>N&&N.type)).pipe(Ra());_.connect(),this.events=_}}postMessage(t,n){return this.worker.pipe(bn(1),ja(f=>{f.postMessage(Cn({action:t},n))})).toPromise().then(()=>{})}postMessageWithOperation(t,n,f){let S=this.waitForOperationCompleted(f),v=this.postMessage(t,n);return Promise.all([v,S]).then(([,x])=>x)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let n;return typeof t=="string"?n=f=>f.type===t:n=f=>t.includes(f.type),this.events.pipe(Si(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(bn(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Si(n=>n.nonce===t),bn(1),Zt(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},kc=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(f){if(this.sw=f,this.pushManager=null,this.subscriptionChanges=new nn,!f.isEnabled){this.messages=bi,this.notificationClicks=bi,this.subscription=bi;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Zt(v=>v.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Zt(v=>v.data)),this.pushManager=this.sw.registration.pipe(Zt(v=>v.pushManager));let S=this.pushManager.pipe(Zi(v=>v.getSubscription()));this.subscription=os(S,this.subscriptionChanges)}requestSubscription(f){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Qr));let S={userVisibleOnly:!0},v=this.decodeBase64(f.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),x=new Uint8Array(new ArrayBuffer(v.length));for(let l=0;l<v.length;l++)x[l]=v.charCodeAt(l);return S.applicationServerKey=x,this.pushManager.pipe(Zi(l=>l.subscribe(S)),bn(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Qr));let f=S=>{if(S===null)throw new Error("Not subscribed to push notifications.");return S.unsubscribe().then(v=>{if(!v)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(bn(1),Zi(f)).toPromise()}decodeBase64(f){return atob(f)}};t.\u0275fac=function(S){return new(S||t)(ht(hr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),UE=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(f){if(this.sw=f,!f.isEnabled){this.versionUpdates=bi,this.unrecoverable=bi;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Qr));let f=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:f},f)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Qr));let f=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:f},f)}};t.\u0275fac=function(S){return new(S||t)(ht(hr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})();var op=new St("");function VE(e,t,n,f){return()=>{if(!(Ec(f)&&"serviceWorker"in navigator&&n.enabled!==!1))return;let S=e.get(Wt),v=e.get(Li);S.runOutsideAngular(()=>{let l=navigator.serviceWorker,u=()=>l.controller?.postMessage({action:"INITIALIZE"});l.addEventListener("controllerchange",u),v.onDestroy(()=>{l.removeEventListener("controllerchange",u)})});let x;if(typeof n.registrationStrategy=="function")x=n.registrationStrategy();else{let[l,...u]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":x=Er(null);break;case"registerWithDelay":x=sp(+u[0]||0);break;case"registerWhenStable":x=u[0]?os(ap(e),sp(+u[0])):ap(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}S.runOutsideAngular(()=>x.pipe(bn(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function sp(e){return Er(null).pipe(La(e))}function ap(e){return e.get(Li).isStable.pipe(Si(n=>n))}function WE(e,t){return new hr(Ec(t)&&e.enabled!==!1?navigator.serviceWorker:void 0)}var Jr=class{};function lp(e,t={}){return Ul([kc,UE,{provide:op,useValue:e},{provide:Jr,useValue:t},{provide:hr,useFactory:WE,deps:[Jr,Kn]},{provide:Cc,useFactory:VE,deps:[Ai,op,Jr,Kn],multi:!0}])}var cp=(()=>{class e{static \u0275fac=function(f){return new(f||e)};static \u0275cmp=Ls({type:e,selectors:[["app-camera-icon"]],standalone:!0,features:[Xs],decls:5,vars:0,consts:[[1,"icon"],["fill","#F4B389","height","30px","width","30px","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 487 487",0,"xml","space","preserve"],["d",`M308.1,277.95c0,35.7-28.9,64.6-64.6,64.6s-64.6-28.9-64.6-64.6s28.9-64.6,64.6-64.6S308.1,242.25,308.1,277.95z
                 M440.3,116.05c25.8,0,46.7,20.9,46.7,46.7v122.4v103.8c0,27.5-22.3,49.8-49.8,49.8H49.8c-27.5,0-49.8-22.3-49.8-49.8v-103.9
                v-122.3l0,0c0-25.8,20.9-46.7,46.7-46.7h93.4l4.4-18.6c6.7-28.8,32.4-49.2,62-49.2h74.1c29.6,0,55.3,20.4,62,49.2l4.3,18.6H440.3z
                 M97.4,183.45c0-12.9-10.5-23.4-23.4-23.4c-13,0-23.5,10.5-23.5,23.4s10.5,23.4,23.4,23.4C86.9,206.95,97.4,196.45,97.4,183.45z
                 M358.7,277.95c0-63.6-51.6-115.2-115.2-115.2s-115.2,51.6-115.2,115.2s51.6,115.2,115.2,115.2S358.7,341.55,358.7,277.95z`]],template:function(f,S){f&1&&(wt(0,"div",0),Sh(),wt(1,"svg",1)(2,"g")(3,"g"),fi(4,"path",2),Yt()()()())},styles:[".icon[_ngcontent-%COMP%]{width:fit-content;height:fit-content}"]})}return e})();var hp=XI(up());var fp=(()=>{class e{constructor(){}requestPermission(){"Notification"in window&&Notification.requestPermission().then(n=>{console.log(n==="granted"?"Permission granted":"Permission denied")})}showNotification(n,f){"Notification"in window&&Notification.permission==="granted"&&new Notification(n,f)}static \u0275fac=function(f){return new(f||e)};static \u0275prov=xt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var dp=(()=>{class e{swPush;VAPID_PUBLIC_KEY="qh3HCeFKlOw3yQoDeq3kh0ZQ4KqrsZ4BILtj5UlBqxI";constructor(n){this.swPush=n}subscribeToNotifications(){this.swPush.requestSubscription({serverPublicKey:this.VAPID_PUBLIC_KEY}).then(n=>{console.log("Subscription received: ",n)}).catch(n=>console.error("Could not subscribe to notifications",n))}listenForNotifications(){this.swPush.messages.subscribe(n=>{console.log("Received message: ",n)}),this.swPush.notificationClicks.subscribe(({action:n,notification:f})=>{console.log("Action: ",n),console.log("Notification: ",f)})}static \u0275fac=function(f){return new(f||e)(ht(kc))};static \u0275prov=xt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ZE=["videoElement"],$E=["canvas"],JE=["tuiRef"];function QE(e,t){if(e&1){let n=di();wt(0,"div",10),zn("click",function(){Jn(n);let S=pn(2);return Qn(S.startCamera())}),wt(1,"span"),qn(2,"Start Camera"),Yt()()}}function KE(e,t){if(e&1){let n=di();wt(0,"div",10),zn("click",function(){Jn(n);let S=pn(2);return Qn(S.stopCamera())}),wt(1,"span"),qn(2,"Stop Camera"),Yt()()}}function qE(e,t){if(e&1){let n=di();wt(0,"div",17),zn("click",function(){Jn(n);let S=pn(3);return Qn(S.startCamera())}),fi(1,"app-camera-icon"),Yt()}}function eM(e,t){if(e&1&&(wt(0,"div",13),Pi(1,qE,2,0,"div",14),fi(2,"video",15,1)(4,"canvas",16,2),Yt()),e&2){let n=pn(2);gn(),an("ngIf",!n.currentStream)}}function tM(e,t){if(e&1){let n=di();wt(0,"div",9)(1,"div",10),zn("click",function(){Jn(n);let S=pn(2);return Qn(S.takePicture())}),wt(2,"span"),qn(3,"Take Picture"),Yt()()()}}function nM(e,t){if(e&1&&(wt(0,"div",9),fi(1,"img",18),Yt()),e&2){let n=pn(2);gn(),an("src",n.image,Yh)}}function iM(e,t){if(e&1){let n=di();wt(0,"div",10),zn("click",function(){Jn(n);let S=pn(2);return Qn(S.onEdit())}),wt(1,"span"),qn(2,"Edit"),Yt()()}}function rM(e,t){if(e&1){let n=di();wt(0,"div",6)(1,"div",7)(2,"span"),qn(3,"Demo app Angular + PWA"),Yt()(),wt(4,"div",8)(5,"div",9)(6,"div",10),zn("click",function(){Jn(n);let S=pn();return Qn(S.notify())}),wt(7,"span"),qn(8,"Send Notification"),Yt()()(),wt(9,"div",9),Pi(10,QE,3,0,"div",4)(11,KE,3,0,"div",4),wt(12,"div",10),zn("click",function(){Jn(n);let S=pn();return Qn(S.switchCamera())}),wt(13,"span"),qn(14,"Switch Camera"),Yt()()(),Pi(15,eM,6,1,"div",11)(16,tM,4,0,"div",12)(17,nM,2,1,"div",12)(18,iM,3,0,"div",4),Yt()()}if(e&2){let n=pn();gn(10),an("ngIf",!n.currentStream),gn(),an("ngIf",n.currentStream),gn(4),an("ngIf",n.image.length===0),gn(),an("ngIf",n.currentStream),gn(),an("ngIf",n.image.length),gn(),an("ngIf",n.image.length)}}function oM(e,t){if(e&1){let n=di();wt(0,"div",10),zn("click",function(){Jn(n);let S=pn();return Qn(S.onBack())}),wt(1,"span"),qn(2,"Back"),Yt()()}}function sM(e,t){e&1&&fi(0,"canvas")}var gp=(()=>{class e{notificationService;pushService;constructor(n,f){this.notificationService=n,this.pushService=f}_tuiImageEditor;image="";title="test-pwa";deferredPrompt;showInstallButton=!1;currentStream=null;isFrontCamera=!0;isEdit=!1;videoElement;canvas;_tuiRef;ngOnInit(){this.notificationService.requestPermission(),this.pushService.subscribeToNotifications(),this.pushService.listenForNotifications()}ngAfterViewInit(){}_createImageEditor(){this._tuiImageEditor=new hp.default(this._tuiRef.nativeElement,{includeUI:{loadImage:{path:this.image,name:"SampleImage"},initMenu:"filter",menuBarPosition:"bottom"},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}),this._tuiImageEditor.loadImageFromURL("","My example picture")}notify(){this.notificationService.showNotification("Notificare PWA",{body:"Bommmba !!!!!!"})}installPWA(){this.showInstallButton=!1,this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(n=>{n.outcome==="accepted"?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),this.deferredPrompt=null})}startCamera(){return ga(this,null,function*(){this.image="",this.stopCamera();let n={video:{facingMode:this.isFrontCamera?"user":"environment"}};try{this.currentStream=yield navigator.mediaDevices.getUserMedia(n),this.videoElement.nativeElement.srcObject=this.currentStream,this.videoElement.nativeElement.play()}catch(f){console.error("Error accessing camera:",f)}})}switchCamera(){this.isFrontCamera=!this.isFrontCamera,this.startCamera()}stopCamera(){this.currentStream&&(this.currentStream.getTracks().forEach(n=>n.stop()),this.currentStream=null,this.videoElement.nativeElement.srcObject=null)}takePicture(){let n=this.videoElement.nativeElement,f=this.canvas.nativeElement,S=f.getContext("2d");S&&(f.width=n.videoWidth,f.height=n.videoHeight,S.drawImage(n,0,0,f.width,f.height),this.image=f.toDataURL("image/png"),this.stopCamera())}downloadImage(n){let f=document.createElement("a");f.href=n,f.download="picture.png",f.click()}onBack(){location.reload()}onEdit(){this.isEdit=!0,this._createImageEditor()}static \u0275fac=function(f){return new(f||e)(ki(fp),ki(dp))};static \u0275cmp=Ls({type:e,selectors:[["app-root"]],viewQuery:function(f,S){if(f&1&&(Ws(ZE,5),Ws($E,5),Ws(JE,5)),f&2){let v;Gs(v=Ys())&&(S.videoElement=v.first),Gs(v=Ys())&&(S.canvas=v.first),Gs(v=Ys())&&(S._tuiRef=v.first)}},standalone:!0,features:[Xs],decls:5,vars:5,consts:[["tuiRef",""],["videoElement",""],["canvas",""],["class","demo-app",4,"ngIf"],["class","button",3,"click",4,"ngIf"],[4,"ngIf"],[1,"demo-app"],[1,"demo-app__title"],[1,"demo-app__content"],[1,"demo-app__content__item"],[1,"button",3,"click"],["class","demo-app__content__item demo-app__content__item--camera",4,"ngIf"],["class","demo-app__content__item",4,"ngIf"],[1,"demo-app__content__item","demo-app__content__item--camera"],["class","camera-icon",3,"click",4,"ngIf"],["autoplay",""],[2,"display","none"],[1,"camera-icon",3,"click"],["alt","",3,"src"]],template:function(f,S){f&1&&(Pi(0,rM,19,6,"div",3)(1,oM,3,0,"div",4),wt(2,"div",null,0),Pi(4,sM,1,0,"canvas",5),Yt()),f&2&&(an("ngIf",!S.isEdit),gn(),an("ngIf",S.isEdit),gn(),Pg(S.isEdit?"height: 1000px !important":""),gn(2),an("ngIf",S.isEdit))},dependencies:[Jg,cp],styles:[".demo-app[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin:0 auto;width:100%;max-width:400px}.demo-app__title[_ngcontent-%COMP%]{margin-top:30px;font-weight:700;font-size:24px;text-align:center}.demo-app__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.demo-app__content__item[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px}.demo-app__content__item[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:270px;background-color:#282828}.demo-app__content__item--camera[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;cursor:pointer}.demo-app__content__item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:270px;margin:auto}.button[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;width:calc(100% - 40px);background:#282828;padding:20px;border-radius:20px;cursor:pointer}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto}.button[_ngcontent-%COMP%]:hover{background-color:#f4b389;color:#000}.camera-icon[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:1}.tui-image-editor-container[_ngcontent-%COMP%]{height:1000px!important}"]})}return e})();function aM(){let e="en";document.documentElement.lang=e}aM();rp(gp,{providers:[lp("ngsw-worker.js",{registrationStrategy:"registerWhenStable:30000"})]}).catch(e=>console.error(e));
