var WD=Object.create;var pc=Object.defineProperty,GD=Object.defineProperties,YD=Object.getOwnPropertyDescriptor,XD=Object.getOwnPropertyDescriptors,$D=Object.getOwnPropertyNames,fg=Object.getOwnPropertySymbols,ZD=Object.getPrototypeOf,gg=Object.prototype.hasOwnProperty,QD=Object.prototype.propertyIsEnumerable;var hg=(e,t,n)=>t in e?pc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ke=(e,t)=>{for(var n in t||={})gg.call(t,n)&&hg(e,n,t[n]);if(fg)for(var n of fg(t))QD.call(t,n)&&hg(e,n,t[n]);return e},qt=(e,t)=>GD(e,XD(t));var pg=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var JD=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of $D(t))!gg.call(e,s)&&s!==n&&pc(e,s,{get:()=>t[s],enumerable:!(r=YD(t,s))||r.enumerable});return e};var KD=(e,t,n)=>(n=e!=null?WD(ZD(e)):{},JD(t||!e||!e.__esModule?pc(n,"default",{value:e,enumerable:!0}):n,e));var Ct=(e,t,n)=>new Promise((r,s)=>{var o=a=>{try{i(n.next(a))}catch(M){s(M)}},I=a=>{try{i(n.throw(a))}catch(M){s(M)}},i=a=>a.done?r(a.value):Promise.resolve(a.value).then(o,I);i((n=n.apply(e,t)).next())});var Bf=pg((Kl,Ff)=>{"use strict";(function(t,n){typeof Kl=="object"&&typeof Ff=="object"?Ff.exports=n():typeof define=="function"&&define.amd?define([],n):typeof Kl=="object"?Kl.colorPicker=n():(t.tui=t.tui||{},t.tui.colorPicker=n())})(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(r,s,o){n.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:o})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,s){if(s&1&&(r=n(r)),s&8||s&4&&typeof r=="object"&&r&&r.__esModule)return r;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:r}),s&2&&typeof r!="string")for(var I in r)n.d(o,I,(function(i){return r[i]}).bind(null,I));return o},n.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(s,"a",s),s},n.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},n.p="dist",n(n.s=33)}([function(e,t,n){"use strict";function r(s,o){var I=Object.prototype.hasOwnProperty,i,a,M,T;for(M=1,T=arguments.length;M<T;M+=1){i=arguments[M];for(a in i)I.call(i,a)&&(s[a]=i[a])}return s}e.exports=r},function(e,t,n){"use strict";function r(s){return s instanceof Array}e.exports=r},function(e,t,n){"use strict";var r=n(1),s=n(6),o=n(7);function I(i,a,M){r(i)?s(i,a,M):o(i,a,M)}e.exports=I},function(e,t,n){"use strict";function r(s){return s===void 0}e.exports=r},function(e,t,n){"use strict";var r=n(22),s=n(2),o=n(6),I=n(7),i=n(37),a=0,M={getLength:function(T){var P=0;return I(T,function(){P+=1}),P},map:function(T,P,k){var R=[];return s(T,function(){R.push(P.apply(k||null,arguments))}),R},filter:function(T,P,k){var R=[];return o(T,function(b){P.apply(k||null,arguments)&&R.push(b)}),R},generateId:function(){return a+=1,a},isOldBrowser:function(){return r.msie&&r.version<9}(),sendHostName:function(){i("color-picker","UA-129987462-1")}};e.exports=M},function(e,t,n){"use strict";var r=n(1);function s(o,I,i){var a,M;if(i=i||0,!r(I))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(I,o,i);for(M=I.length,a=i;i>=0&&a<M;a+=1)if(I[a]===o)return a;return-1}e.exports=s},function(e,t,n){"use strict";function r(s,o,I){var i=0,a=s.length;for(I=I||null;i<a&&o.call(I,s[i],i,s)!==!1;i+=1);}e.exports=r},function(e,t,n){"use strict";function r(s,o,I){var i;I=I||null;for(i in s)if(s.hasOwnProperty(i)&&o.call(I,s[i],i,s)===!1)break}e.exports=r},function(e,t,n){"use strict";var r=n(39),s=n(13),o=n(41),I=n(3),i=n(9),a=n(19),M=n(4);function T(P,k){var R=M.generateId();P=P||{},I(k)&&(k=i.appendHTMLElement("div")),r(k,"tui-view-"+R),this.id=R,this.container=k,this.childs=new a(function(b){return b.id}),this.parent=null}T.prototype.addChild=function(P,k){k&&k.call(P,this),P.parent=this,this.childs.add(P)},T.prototype.removeChild=function(P,k){var R=o(P)?this.childs.items[P]:P;k&&k.call(R,this),this.childs.remove(R.id)},T.prototype.render=function(){this.childs.each(function(P){P.render()})},T.prototype.recursive=function(P,k){s(P)&&(k||P(this),this.childs.each(function(R){R.recursive(P)}))},T.prototype.resize=function(){for(var P=Array.prototype.slice.call(arguments),k=this.parent;k;)s(k._onResize)&&k._onResize.apply(k,P),k=k.parent},T.prototype._beforeDestroy=function(){},T.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},T.prototype.destroy=function(P){this.childs&&(this.childs.each(function(k){k.destroy(!0),k._destroy()}),this.childs.clear()),!P&&this._destroy()},T.prototype.getViewBound=function(){var P=this.container.getBoundingClientRect();return{x:P.left,y:P.top,width:P.right-P.left,height:P.bottom-P.top}},e.exports=T},function(e,t,n){"use strict";var r={appendHTMLElement:function(s,o,I){var i=document.createElement(s);return i.className=I||"",o?o.appendChild(i):document.body.appendChild(i),i}};e.exports=r},function(e,t,n){"use strict";var r=n(0),s=n(20),o=n(11),I=n(21),i=n(1),a=n(13),M=n(2),T=/\s+/g;function P(){this.events=null,this.contexts=null}P.mixin=function(k){r(k.prototype,P.prototype)},P.prototype._getHandlerItem=function(k,R){var b={handler:k};return R&&(b.context=R),b},P.prototype._safeEvent=function(k){var R=this.events,b;return R||(R=this.events={}),k&&(b=R[k],b||(b=[],R[k]=b),R=b),R},P.prototype._safeContext=function(){var k=this.contexts;return k||(k=this.contexts=[]),k},P.prototype._indexOfContext=function(k){for(var R=this._safeContext(),b=0;R[b];){if(k===R[b][0])return b;b+=1}return-1},P.prototype._memorizeContext=function(k){var R,b;s(k)&&(R=this._safeContext(),b=this._indexOfContext(k),b>-1?R[b][1]+=1:R.push([k,1]))},P.prototype._forgetContext=function(k){var R,b;s(k)&&(R=this._safeContext(),b=this._indexOfContext(k),b>-1&&(R[b][1]-=1,R[b][1]<=0&&R.splice(b,1)))},P.prototype._bindEvent=function(k,R,b){var c=this._safeEvent(k);this._memorizeContext(b),c.push(this._getHandlerItem(R,b))},P.prototype.on=function(k,R,b){var c=this;o(k)?(k=k.split(T),M(k,function(C){c._bindEvent(C,R,b)})):I(k)&&(b=R,M(k,function(C,y){c.on(y,C,b)}))},P.prototype.once=function(k,R,b){var c=this;if(I(k)){b=R,M(k,function(y,l){c.once(l,y,b)});return}function C(){R.apply(b,arguments),c.off(k,C,b)}this.on(k,C,b)},P.prototype._spliceMatches=function(k,R){var b=0,c;if(i(k))for(c=k.length;b<c;b+=1)R(k[b])===!0&&(k.splice(b,1),c-=1,b-=1)},P.prototype._matchHandler=function(k){var R=this;return function(b){var c=k===b.handler;return c&&R._forgetContext(b.context),c}},P.prototype._matchContext=function(k){var R=this;return function(b){var c=k===b.context;return c&&R._forgetContext(b.context),c}},P.prototype._matchHandlerAndContext=function(k,R){var b=this;return function(c){var C=k===c.handler,y=R===c.context,l=C&&y;return l&&b._forgetContext(c.context),l}},P.prototype._offByEventName=function(k,R){var b=this,c=a(R),C=b._matchHandler(R);k=k.split(T),M(k,function(y){var l=b._safeEvent(y);c?b._spliceMatches(l,C):(M(l,function(h){b._forgetContext(h.context)}),b.events[y]=[])})},P.prototype._offByHandler=function(k){var R=this,b=this._matchHandler(k);M(this._safeEvent(),function(c){R._spliceMatches(c,b)})},P.prototype._offByObject=function(k,R){var b=this,c;this._indexOfContext(k)<0?M(k,function(C,y){b.off(y,C)}):o(R)?(c=this._matchContext(k),b._spliceMatches(this._safeEvent(R),c)):a(R)?(c=this._matchHandlerAndContext(R,k),M(this._safeEvent(),function(C){b._spliceMatches(C,c)})):(c=this._matchContext(k),M(this._safeEvent(),function(C){b._spliceMatches(C,c)}))},P.prototype.off=function(k,R){o(k)?this._offByEventName(k,R):arguments.length?a(k)?this._offByHandler(k):I(k)&&this._offByObject(k,R):(this.events={},this.contexts=[])},P.prototype.fire=function(k){this.invoke.apply(this,arguments)},P.prototype.invoke=function(k){var R,b,c,C;if(!this.hasListener(k))return!0;for(R=this._safeEvent(k),b=Array.prototype.slice.call(arguments,1),c=0;R[c];){if(C=R[c],C.handler.apply(C.context,b)===!1)return!1;c+=1}return!0},P.prototype.hasListener=function(k){return this.getListenerLength(k)>0},P.prototype.getListenerLength=function(k){var R=this._safeEvent(k);return R.length},e.exports=P},function(e,t,n){"use strict";function r(s){return typeof s=="string"||s instanceof String}e.exports=r},function(e,t,n){"use strict";var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,s={leadingZero:function(o,I){var i="",a=0;if((o+"").length>I)return o+"";for(;a<I-1;a+=1)i+="0";return(i+o).slice(I*-1)},isValidRGB:function(o){return r.test(o)},hexToRGB:function(o){var I,i,a;return s.isValidRGB(o)?(o=o.substring(1),I=parseInt(o.substr(0,2),16),i=parseInt(o.substr(2,2),16),a=parseInt(o.substr(4,2),16),[I,i,a]):!1},rgbToHEX:function(o,I,i){var a="#"+s.leadingZero(o.toString(16),2)+s.leadingZero(I.toString(16),2)+s.leadingZero(i.toString(16),2);return s.isValidRGB(a)?a:!1},rgbToHSV:function(o,I,i){var a,M,T,P,k,R;if(o/=255,I/=255,i/=255,a=Math.max(o,I,i),M=Math.min(o,I,i),k=a,R=a-M,P=a===0?0:R/a,a===M)T=0;else{switch(a){case o:T=(I-i)/R+(I<i?6:0);break;case I:T=(i-o)/R+2;break;case i:T=(o-I)/R+4;break}T/=6}return[Math.round(T*360),Math.round(P*100),Math.round(k*100)]},hsvToRGB:function(o,I,i){var a,M,T,P,k,R,b,c;if(o=Math.max(0,Math.min(360,o)),I=Math.max(0,Math.min(100,I)),i=Math.max(0,Math.min(100,i)),I/=100,i/=100,I===0)return a=M=T=i,[Math.round(a*255),Math.round(M*255),Math.round(T*255)];switch(o/=60,P=Math.floor(o),k=o-P,R=i*(1-I),b=i*(1-I*k),c=i*(1-I*(1-k)),P){case 0:a=i,M=c,T=R;break;case 1:a=b,M=i,T=R;break;case 2:a=R,M=i,T=c;break;case 3:a=R,M=b,T=i;break;case 4:a=c,M=R,T=i;break;default:a=i,M=R,T=b;break}return[Math.round(a*255),Math.round(M*255),Math.round(T*255)]}};e.exports=s},function(e,t,n){"use strict";function r(s){return s instanceof Function}e.exports=r},function(e,t,n){"use strict";var r=n(11),s=n(2),o=n(26);function I(M,T,P,k){if(r(T)){s(T.split(/\s+/g),function(R){i(M,R,P,k)});return}s(T,function(R,b){i(M,b,R,P)})}function i(M,T,P,k){function R(b){P.call(k||M,b||window.event)}"addEventListener"in M?M.addEventListener(T,R):"attachEvent"in M&&M.attachEvent("on"+T,R),a(M,T,P,R)}function a(M,T,P,k){var R=o(M,T),b=!1;s(R,function(c){return c.handler===P?(b=!0,!1):!0}),b||R.push({handler:P,wrappedHandler:k})}e.exports=I},function(e,t,n){"use strict";function r(s){if(s.preventDefault){s.preventDefault();return}s.returnValue=!1}e.exports=r},function(e,t,n){"use strict";function r(s){return s.replace(/([A-Z])/g,function(o){return"-"+o.toLowerCase()})}e.exports=r},function(e,t,n){"use strict";var r=n(11),s=n(2),o=n(26);function I(M,T,P){if(r(T)){s(T.split(/\s+/g),function(k){i(M,k,P)});return}s(T,function(k,R){i(M,R,k)})}function i(M,T,P){var k=o(M,T),R;P?(s(k,function(b,c){return P===b.handler?(a(M,T,b.wrappedHandler),R=c,!1):!0}),k.splice(R,1)):(s(k,function(b){a(M,T,b.wrappedHandler)}),k.splice(0,k.length))}function a(M,T,P){"removeEventListener"in M?M.removeEventListener(T,P):"detachEvent"in M&&M.detachEvent("on"+T,P)}e.exports=I},function(e,t,n){"use strict";var r=n(50);function s(o,I){var i=r(I.prototype);i.constructor=o,o.prototype=i}e.exports=s},function(e,t,n){"use strict";var r=n(6),s=n(7),o=n(0),I=n(1),i=n(20),a=n(13),M=n(21),T=n(4),P=Array.prototype.slice;function k(R){this.items={},this.length=0,a(R)&&(this.getItemID=R)}k.and=function(R){var b;return R=P.call(arguments),b=R.length,function(c){for(var C=0;C<b;C+=1)if(!R[C].call(null,c))return!1;return!0}},k.or=function(R){var b;return R=P.call(arguments),b=R.length,function(c){for(var C=1,y=R[0].call(null,c);C<b;C+=1)y=y||R[C].call(null,c);return y}},k.merge=function(R){var b={},c=new k(R.getItemID);return r(arguments,function(C){o(b,C.items)}),c.items=b,c.length=T.getLength(c.items),c},k.prototype.getItemID=function(R){return R._id+""},k.prototype.add=function(R){var b,c;if(arguments.length>1){r(P.call(arguments),function(C){this.add(C)},this);return}b=this.getItemID(R),c=this.items,c[b]||(this.length+=1),c[b]=R},k.prototype.remove=function(R){var b=[],c,C;return this.length?arguments.length>1?(b=T.map(P.call(arguments),function(y){return this.remove(y)},this),b):(c=this.items,M(R)&&(R=this.getItemID(R)),c[R]?(this.length-=1,C=c[R],delete c[R],C):b):b},k.prototype.clear=function(){this.items={},this.length=0},k.prototype.has=function(R){var b,c;return this.length?(b=a(R),c=!1,b?this.each(function(C){return R(C)===!0?(c=!0,!1):!0}):(R=M(R)?this.getItemID(R):R,c=i(this.items[R])),c):!1},k.prototype.doWhenHas=function(R,b,c){var C=this.items[R];i(C)&&b.call(c||this,C)},k.prototype.find=function(R){var b=new k;return this.hasOwnProperty("getItemID")&&(b.getItemID=this.getItemID),this.each(function(c){R(c)===!0&&b.add(c)}),b},k.prototype.groupBy=function(R,b){var c={},C=a(R),y=this.getItemID,l,h;if(I(R)){if(r(R,function(u){c[u+""]=new k(y)}),!b)return c;R=b,C=!0}return this.each(function(u){C?h=R(u):(h=u[R],a(h)&&(h=h.apply(u))),l=c[h],l||(l=c[h]=new k(y)),l.add(u)}),c},k.prototype.single=function(){var R;return this.each(function(b){return R=b,!1},this),R},k.prototype.sort=function(R){var b=[];return this.each(function(c){b.push(c)}),a(R)&&(b=b.sort(R)),b},k.prototype.each=function(R,b){s(this.items,R,b||this)},k.prototype.toArray=function(){return this.length?T.map(this.items,function(R){return R}):[]},e.exports=k},function(e,t,n){"use strict";var r=n(3),s=n(36);function o(I){return!r(I)&&!s(I)}e.exports=o},function(e,t,n){"use strict";function r(s){return s===Object(s)}e.exports=r},function(e,t,n){"use strict";var r={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};typeof window<"u"&&window.navigator&&s();function s(){var o=window.navigator,I=o.appName.replace(/\s/g,"_"),i=o.userAgent,a=/MSIE\s([0-9]+[.0-9]*)/,M=/Trident.*rv:11\./,T=/Edge\/(\d+)\./,P={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},k,R,b={Microsoft_Internet_Explorer:function(){var C=i.match(a);C?(r.msie=!0,r.version=parseFloat(C[1])):r.others=!0},Netscape:function(){var C=!1;if(M.exec(i))r.msie=!0,r.version=11,C=!0;else if(T.exec(i))r.edge=!0,r.version=i.match(T)[1],C=!0;else for(k in P)if(P.hasOwnProperty(k)&&(R=i.match(P[k]),R&&R.length>1)){r[k]=C=!0,r.version=parseFloat(R[1]||0);break}C||(r.others=!0)}},c=b[I];c&&b[I]()}e.exports=r},function(e,t,n){"use strict";var r=n(3);function s(o){return!o||!o.className?"":r(o.className.baseVal)?o.className:o.className.baseVal}e.exports=s},function(e,t,n){"use strict";(function(r){var s=n(10),o=n(42),I=n(44),i=n(47),a=n(28),M=n(17),T=n(14),P=n(15),k=n(0);function R(b,c){T(c,"mousedown",this._onMouseDown,this),this.options=k({distance:10},b),this.container=c,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}R.prototype.destroy=function(){M(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},R.prototype._toggleDragEvent=function(b){var c=this.container;b?(o(c),T(window,"dragstart",P),T(r.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(I(c),M(window,"dragstart",P),M(r.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},R.prototype._getEventData=function(b){return{target:a(b),originEvent:b}},R.prototype._onMouseDown=function(b){i(b)===0&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(b),this._toggleDragEvent(!0))},R.prototype._onMouseMove=function(b){var c=this.options.distance;if(P(b),this._isMoved=!0,this._distance<c){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData))){this._toggleDragEvent(!1);return}this.fire("drag",this._getEventData(b))},R.prototype._onMouseUp=function(b){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(b));return}this.fire("click",this._getEventData(b))},s.mixin(R),e.exports=R}).call(this,n(25))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r="_feEventKey";function s(o,I){var i=o[r],a;return i||(i=o[r]={}),a=i[I],a||(a=i[I]=[]),a}e.exports=s},function(e,t,n){"use strict";function r(s){var o=document.documentElement.style,I,i;for(I=0,i=s.length;I<i;I+=1)if(s[I]in o)return s[I];return!1}e.exports=r},function(e,t,n){"use strict";function r(s){return s.target||s.srcElement}e.exports=r},function(e,t,n){"use strict";var r=n(10),s=n(28),o=n(17),I=n(14),i=n(30),a=n(0),M=n(18),T=n(9),P=n(12),k=n(8),R=n(51);function b(c,C){this.options=a({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},c),C=T.appendHTMLElement("div",C,this.options.cssPrefix+"palette-container"),k.call(this,c,C)}M(b,k),b.prototype._onClick=function(c){var C=this.options,y=s(c),l={};if(i(y,C.cssPrefix+"palette-button")){l.color=y.value,this.fire("_selectColor",l);return}i(y,C.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},b.prototype._onChange=function(c){var C=this.options,y=s(c),l={};i(y,C.cssPrefix+"palette-hex")&&(l.color=y.value,this.fire("_selectColor",l))},b.prototype._beforeDestroy=function(){this._toggleEvent(!1)},b.prototype._toggleEvent=function(c){var C=this.options,y=this.container,l=c?I:o,h;l(y,"click",this._onClick,this),h=y.querySelector("."+C.cssPrefix+"palette-hex",y),h&&l(h,"change",this._onChange,this)},b.prototype.render=function(c){var C=this.options,y="";this._toggleEvent(!1),y=R({cssPrefix:C.cssPrefix,preset:C.preset,detailTxt:C.detailTxt,color:c,isValidRGB:P.isValidRGB,getItemClass:function(l){return l?"":" "+C.cssPrefix+"color-transparent"},isSelected:function(l){return l===c?" "+C.cssPrefix+"selected":""}}),this.container.innerHTML=y,this._toggleEvent(!0)},r.mixin(b),e.exports=b},function(e,t,n){"use strict";var r=n(5),s=n(23);function o(I,i){var a;return I.classList?I.classList.contains(i):(a=s(I).split(/\s+/),r(i,a)>-1)}e.exports=o},function(e,t,n){"use strict";var r=n(10),s=n(53),o=n(54),I=n(30),i=n(0),a=n(18),M=n(9),T=n(32),P=n(12),k=n(8),R=n(24),b=n(57),c=-7,C=112,y=-3,l=115,h=359.99;function u(p,D){D=M.appendHTMLElement("div",D,p.cssPrefix+"slider-container"),D.style.display="none",k.call(this,p,D),this.options=i({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},p),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new R({distance:0},D),this.colorSliderPosLimitRange=[c,C],this.huebarPosLimitRange=[y,l],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}a(u,k),u.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},u.prototype.toggle=function(p){this.container.style.display=p?"block":"none"},u.prototype.isVisible=function(){return this.container.style.display==="block"},u.prototype.render=function(p){var D=this.container,g=this.options,x=b.layout,E,_;P.isValidRGB(p)&&(x=x.replace(/{{slider}}/,b.slider),x=x.replace(/{{huebar}}/,b.huebar),x=x.replace(/{{cssPrefix}}/g,g.cssPrefix),x=x.replace(/{{id}}/g,g.id),this.container.innerHTML=x,this.sliderSvgElement=D.querySelector("."+g.cssPrefix+"svg-slider"),this.huebarSvgElement=D.querySelector("."+g.cssPrefix+"svg-huebar"),this.sliderHandleElement=D.querySelector("."+g.cssPrefix+"slider-handle"),this.huebarHandleElement=D.querySelector("."+g.cssPrefix+"huebar-handle"),this.baseColorElement=D.querySelector("."+g.cssPrefix+"slider-basecolor"),E=P.hexToRGB(p),_=P.rgbToHSV.apply(null,E),this.moveHue(_[0],!0),this.moveSaturationAndValue(_[1],_[2],!0))},u.prototype._setColorSliderPosMax=function(){var p=this.sliderSvgElement.getClientRects()[0];p&&(this.colorSliderPosLimitRange[1]=p.height-10)},u.prototype._moveColorSliderHandle=function(p,D,g){var x=this.sliderHandleElement,E;D=Math.max(this.colorSliderPosLimitRange[0],D),D=Math.min(this.colorSliderPosLimitRange[1],D),p=Math.max(this.colorSliderPosLimitRange[0],p),p=Math.min(this.colorSliderPosLimitRange[1],p),T.setTranslateXY(x,p,D),E=D>50?"white":"black",T.setStrokeColor(x,E),g||this.fire("_selectColor",{color:P.rgbToHEX.apply(null,this.getRGB())})},u.prototype.moveSaturationAndValue=function(p,D,g){var x,E,_,O;p=p||0,D=D||0,x=Math.abs(this.colorSliderPosLimitRange[0]),E=this.colorSliderPosLimitRange[1],_=p*E/100-x,O=E-D*E/100-x,this._moveColorSliderHandle(_,O,g)},u.prototype._moveColorSliderByPosition=function(p,D){var g=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(p+g,D+g)},u.prototype.getSaturationAndValue=function(){var p=Math.abs(this.colorSliderPosLimitRange[0]),D=p+this.colorSliderPosLimitRange[1],g=T.getTranslateXY(this.sliderHandleElement),x,E;return x=(g[1]+p)/D*100,E=100-(g[0]+p)/D*100,[x,E]},u.prototype._setHueBarPosMax=function(){var p=this.huebarSvgElement.getClientRects()[0];p&&(this.huebarPosLimitRange[1]=p.height-7)},u.prototype._moveHueHandle=function(p,D){var g=this.huebarHandleElement,x=this.baseColorElement,E,_;p=Math.max(this.huebarPosLimitRange[0],p),p=Math.min(this.huebarPosLimitRange[1],p),T.setTranslateY(g,p),E=P.hsvToRGB(this.getHue(),100,100),_=P.rgbToHEX.apply(null,E),T.setGradientColorStop(x,_),D||this.fire("_selectColor",{color:P.rgbToHEX.apply(null,this.getRGB())})},u.prototype.moveHue=function(p,D){var g=0,x,E;x=Math.abs(this.huebarPosLimitRange[0]),E=x+this.huebarPosLimitRange[1],p=p||0,g=E*p/h-x,this._moveHueHandle(g,D)},u.prototype._moveHueByPosition=function(p){var D=this.huebarPosLimitRange[0];this._moveHueHandle(p+D)},u.prototype.getHue=function(){var p=this.huebarHandleElement,D=T.getTranslateXY(p),g,x;return g=Math.abs(this.huebarPosLimitRange[0]),x=g+this.huebarPosLimitRange[1],(D[0]+g)*h/x},u.prototype.getHSV=function(){var p=this.getSaturationAndValue(),D=this.getHue();return[D].concat(p)},u.prototype.getRGB=function(){return P.hsvToRGB.apply(null,this.getHSV())},u.prototype._prepareColorSliderForMouseEvent=function(p){var D=this.options,g=o(p.target,"."+D.cssPrefix+"slider-part"),x;return x=this._dragDataCache={isColorSlider:I(g,D.cssPrefix+"slider-left"),parentElement:g},x},u.prototype._onClick=function(p){var D=this._prepareColorSliderForMouseEvent(p),g=s(p.originEvent,D.parentElement);D.isColorSlider?this._moveColorSliderByPosition(g[0],g[1]):this._moveHueByPosition(g[1]),this._dragDataCache=null},u.prototype._onDragStart=function(p){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(p)},u.prototype._onDrag=function(p){var D=this._dragDataCache,g=s(p.originEvent,D.parentElement);D.isColorSlider?this._moveColorSliderByPosition(g[0],g[1]):this._moveHueByPosition(g[1])},u.prototype._onDragEnd=function(){this._dragDataCache=null},r.mixin(u),e.exports=u},function(e,t,n){"use strict";var r=n(4).isOldBrowser,s=/[\.\-0-9]+/g,o=-6,I={getTranslateXY:function(i){var a;return r?(a=i.style,[parseFloat(a.top),parseFloat(a.left)]):(a=i.getAttribute("transform"),a?(a=a.match(s),[parseFloat(a[1]),parseFloat(a[0])]):[0,0])},setTranslateXY:function(i,a,M){r?(i.style.left=a+"px",i.style.top=M+"px"):i.setAttribute("transform","translate("+a+","+M+")")},setTranslateY:function(i,a){r?i.style.top=a+"px":i.setAttribute("transform","translate("+o+","+a+")")},setStrokeColor:function(i,a){r?i.strokecolor=a:i.setAttribute("stroke",a)},setGradientColorStop:function(i,a){r?i.color=a:i.setAttribute("stop-color",a)}};e.exports=I},function(e,t,n){n(34),e.exports=n(35)},function(e,t,n){},function(e,t,n){"use strict";var r=n(19),s=n(8),o=n(24),I=n(48),i=n(29),a=n(31),M=n(12),T=n(32),P={Collection:r,View:s,Drag:o,create:I,Palette:i,Slider:a,colorutil:M,svgvml:T};e.exports=P},function(e,t,n){"use strict";function r(s){return s===null}e.exports=r},function(e,t,n){"use strict";var r=n(3),s=n(38),o=7*24*60*60*1e3;function I(a){var M=new Date().getTime();return M-a>o}function i(a,M){var T="https://www.google-analytics.com/collect",P=location.hostname,k="event",R="use",b="TOAST UI "+a+" for "+P+": Statistics",c=window.localStorage.getItem(b);!r(window.tui)&&window.tui.usageStatistics===!1||c&&!I(c)||(window.localStorage.setItem(b,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&s(T,{v:1,t:k,tid:M,cid:P,dp:P,dh:a,el:a,ec:R})},1e3))}e.exports=i},function(e,t,n){"use strict";var r=n(7);function s(o,I){var i=document.createElement("img"),a="";return r(I,function(M,T){a+="&"+T+"="+M}),a=a.substring(1),i.src=o+"?"+a,i.style.display="none",document.body.appendChild(i),document.body.removeChild(i),i}e.exports=s},function(e,t,n){"use strict";var r=n(2),s=n(5),o=n(23),I=n(40);function i(a){var M=Array.prototype.slice.call(arguments,1),T=a.classList,P=[],k;if(T){r(M,function(R){a.classList.add(R)});return}k=o(a),k&&(M=[].concat(k.split(/\s+/),M)),r(M,function(R){s(R,P)<0&&P.push(R)}),I(a,P)}e.exports=i},function(e,t,n){"use strict";var r=n(1),s=n(3);function o(I,i){if(i=r(i)?i.join(" "):i,i=i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),s(I.className.baseVal)){I.className=i;return}I.className.baseVal=i}e.exports=o},function(e,t,n){"use strict";function r(s){return typeof s=="number"||s instanceof Number}e.exports=r},function(e,t,n){"use strict";var r=n(14),s=n(15),o=n(43),I=n(27),i="onselectstart"in document,a="prevUserSelect",M=I(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function T(P){P||(P=document),i?r(P,"selectstart",s):(P=P===document?document.documentElement:P,o(P,a,P.style[M]),P.style[M]="none")}e.exports=T},function(e,t,n){"use strict";var r=n(16);function s(o,I,i){if(o.dataset){o.dataset[I]=i;return}o.setAttribute("data-"+r(I),i)}e.exports=s},function(e,t,n){"use strict";var r=n(17),s=n(15),o=n(45),I=n(46),i=n(27),a="onselectstart"in document,M="prevUserSelect",T=i(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function P(k){k||(k=document),a?r(k,"selectstart",s):(k=k===document?document.documentElement:k,k.style[T]=o(k,M)||"auto",I(k,M))}e.exports=P},function(e,t,n){"use strict";var r=n(16);function s(o,I){return o.dataset?o.dataset[I]:o.getAttribute("data-"+r(I))}e.exports=s},function(e,t,n){"use strict";var r=n(16);function s(o,I){if(o.dataset){delete o.dataset[I];return}o.removeAttribute("data-"+r(I))}e.exports=s},function(e,t,n){"use strict";var r=n(22),s=n(5),o=["0","1","3","5","7"],I=["2","6"],i=["4"];function a(T){return r.msie&&r.version<=8?M(T):T.button}function M(T){var P=String(T.button);return s(P,o)>-1?0:s(P,I)>-1?2:s(P,i)>-1?1:null}e.exports=a},function(e,t,n){"use strict";var r=n(10),s=n(0),o=n(4),I=n(12),i=n(49),a=n(29),M=n(31),T=0;function P(){return T+=1,T}function k(R){var b;if(!(this instanceof k))return new k(R);if(R=this.options=s({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:P(),usageStatistics:!0},R),!R.container)throw new Error("ColorPicker(): need container option.");b=this.layout=new i(R,R.container),this.palette=new a(R,b.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new M(R,b.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),b.addChild(this.palette),b.addChild(this.slider),this.render(R.color),R.usageStatistics&&o.sendHostName()}k.prototype._onSelectColorInPalette=function(R){var b=R.color,c=this.options;if(!I.isValidRGB(b)&&b!==""){this.render();return}this.fire("selectColor",{color:b,origin:"palette"}),c.color!==b&&(c.color=b,this.render(b))},k.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},k.prototype._onSelectColorInSlider=function(R){var b=R.color,c=this.options;this.fire("selectColor",{color:b,origin:"slider"}),c.color!==b&&(c.color=b,this.palette.render(b))},k.prototype.setColor=function(R){if(!I.isValidRGB(R))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=R,this.render(R)},k.prototype.getColor=function(){return this.options.color},k.prototype.toggle=function(R){this.layout.container.style.display=R?"block":"none"},k.prototype.render=function(R){this.layout.render(R||this.options.color)},k.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},r.mixin(k),e.exports=k},function(e,t,n){"use strict";var r=n(0),s=n(18),o=n(9),I=n(8);function i(a,M){this.options=r({cssPrefix:"tui-colorpicker-"},a),M=o.appendHTMLElement("div",M,this.options.cssPrefix+"container"),I.call(this,a,M),this.render()}s(i,I),i.prototype.render=function(a){this.recursive(function(M){M.render(a)},!0)},e.exports=i},function(e,t,n){"use strict";function r(s){function o(){}return o.prototype=s,new o}e.exports=r},function(e,t,n){"use strict";var r=n(52);e.exports=function(s){var o=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),I=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",o,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join(`
`);return r(I,s)}},function(e,t,n){"use strict";var r=n(5),s=n(2),o=n(1),I=n(11),i=n(0),a=/{{\s?|\s?}}/g,M=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,T=/\[\s?|\s?\]/,P=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,k=/\./,R=/^["']\w+["']$/,b=/"|'/g,c=/^-?\d+\.?\d*$/,C=2,y={if:D,each:g,with:x},l="a".split(/a/).length===3,h=function(){return l?function(H,Y){return H.split(Y)}:function(H,Y){var oe=[],ne=0,be,Z;for(Y.global||(Y=new RegExp(Y,"g")),be=Y.exec(H);be!==null;)Z=be.index,oe.push(H.slice(ne,Z)),ne=Z+be[0].length,be=Y.exec(H);return oe.push(H.slice(ne)),oe}}();function u(H,Y){var oe,ne=Y[H];return H==="true"?ne=!0:H==="false"?ne=!1:R.test(H)?ne=H.replace(b,""):M.test(H)?(oe=H.split(T),ne=u(oe[0],Y)[u(oe[1],Y)]):P.test(H)?(oe=H.split(k),ne=u(oe[0],Y)[oe[1]]):c.test(H)&&(ne=parseFloat(H)),ne}function p(H,Y){var oe=[H],ne=[],be=0,Z=0;return s(Y,function(me,V){me.indexOf("if")===0?be+=1:me==="/if"?be-=1:!be&&(me.indexOf("elseif")===0||me==="else")&&(oe.push(me==="else"?["true"]:me.split(" ").slice(1)),ne.push(Y.slice(Z,V)),Z=V+1)}),ne.push(Y.slice(Z)),{exps:oe,sourcesInsideIf:ne}}function D(H,Y,oe){var ne=p(H,Y),be=!1,Z="";return s(ne.exps,function(me,V){return be=O(me,oe),be&&(Z=B(ne.sourcesInsideIf[V],oe)),!be}),Z}function g(H,Y,oe){var ne=O(H,oe),be=o(ne)?"@index":"@key",Z={},me="";return s(ne,function(V,Le){Z[be]=Le,Z["@this"]=V,i(oe,Z),me+=B(Y.slice(),oe)}),me}function x(H,Y,oe){var ne=r("as",H),be=H[ne+1],Z=O(H.slice(0,ne),oe),me={};return me[be]=Z,B(Y,i(oe,me))||""}function E(H,Y,oe){var ne=H.splice(Y+1,oe-Y);return ne.pop(),ne}function _(H,Y,oe){for(var ne=y[H],be=1,Z=0,me,V=Z+C,Le=Y[V];be&&I(Le);)Le.indexOf(H)===0?be+=1:Le.indexOf("/"+H)===0&&(be-=1,me=V),V+=C,Le=Y[V];if(be)throw Error(H+" needs {{/"+H+"}} expression.");return Y[Z]=ne(Y[Z].split(" ").slice(1),E(Y,Z,me),oe),Y}function O(H,Y){var oe=u(H[0],Y);return oe instanceof Function?F(oe,H.slice(1),Y):oe}function F(H,Y,oe){var ne=[];return s(Y,function(be){ne.push(u(be,oe))}),H.apply(null,ne)}function B(H,Y){for(var oe=1,ne=H[oe],be,Z,me;I(ne);)be=ne.split(" "),Z=be[0],y[Z]?(me=_(Z,H.splice(oe,H.length-oe),Y),H=H.concat(me)):H[oe]=O(be,Y),oe+=C,ne=H[oe];return H.join("")}function W(H,Y){return B(h(H,a),Y)}e.exports=W},function(e,t,n){"use strict";var r=n(1);function s(o,I){var i=r(o),a=i?o[0]:o.clientX,M=i?o[1]:o.clientY,T;return I?(T=I.getBoundingClientRect(),[a-T.left-I.clientLeft,M-T.top-I.clientTop]):[a,M]}e.exports=s},function(e,t,n){"use strict";var r=n(55);function s(o,I){var i=o.parentNode;if(r(o,I))return o;for(;i&&i!==document;){if(r(i,I))return i;i=i.parentNode}return null}e.exports=s},function(e,t,n){"use strict";var r=n(5),s=n(56),o=Element.prototype,I=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(a){var M=this.document||this.ownerDocument;return r(this,s(M.querySelectorAll(a)))>-1};function i(a,M){return I.call(a,M)}e.exports=i},function(e,t,n){"use strict";var r=n(6);function s(o){var I;try{I=Array.prototype.slice.call(o)}catch{I=[],r(o,function(a){I.push(a)})}return I}e.exports=s},function(e,t,n){"use strict";(function(r){var s=n(4).isOldBrowser,o=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join(`
`),I=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join(`
`),i=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join(`
`),a=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join(`
`),M=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join(`
`);s&&r.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),e.exports={layout:o,slider:s?i:I,huebar:s?M:a}}).call(this,n(25))}])})});var iC=pg((ql,zf)=>{"use strict";(function(t,n){typeof ql=="object"&&typeof zf=="object"?zf.exports=n(Bf()):typeof define=="function"&&define.amd?define(["tui-color-picker"],n):typeof ql=="object"?ql.tui=n(Bf()):(t.tui=t.tui||{},t.tui.ImageEditor=n(t.tui.colorPicker))})(self,function(e){return function(){var t={2777:function(o,I,i){var a=a||{version:"4.6.0"};if(I.fabric=a,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?a.document=document:a.document=document.implementation.createHTMLDocument(""),a.window=window;else{var M=i(4960),T=new M.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;a.document=T.document,a.jsdomImplForWrapper=i(6759).implForWrapper,a.nodeCanvas=i(6272).Canvas,a.window=T,DOMParser=a.window.DOMParser}a.isTouchSupported="ontouchstart"in a.window||"ontouchstart"in a.document||a.window&&a.window.navigator&&a.window.navigator.maxTouchPoints>0,a.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",a.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],a.DPI=96,a.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",a.commaWsp="(?:\\s+,?\\s*|,\\s*)",a.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,a.reNonWord=/[ \n\.,;!\?\-]/,a.fontPaths={},a.iMatrix=[1,0,0,1,0,0],a.svgNS="http://www.w3.org/2000/svg",a.perfLimitSizeTotal=2097152,a.maxCacheSideLimit=4096,a.minCacheSideLimit=256,a.charWidthsCache={},a.textureSize=2048,a.disableStyleCopyPaste=!1,a.enableGLFiltering=!0,a.devicePixelRatio=a.window.devicePixelRatio||a.window.webkitDevicePixelRatio||a.window.mozDevicePixelRatio||1,a.browserShadowBlurConstant=1,a.arcToSegmentsCache={},a.boundsOfCurveCache={},a.cachesBoundsOfCurve=!0,a.forceGLPutImageData=!1,a.initFilterBackend=function(){if(a.enableGLFiltering&&a.isWebglSupported&&a.isWebglSupported(a.textureSize))return console.log("max texture size: "+a.maxTextureSize),new a.WebglFilterBackend({tileSize:a.textureSize});if(a.Canvas2dFilterBackend)return new a.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=a),function(){function b(u,p){if(this.__eventListeners[u]){var D=this.__eventListeners[u];p?D[D.indexOf(p)]=!1:a.util.array.fill(D,!1)}}function c(u,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var D in u)this.on(D,u[D]);else this.__eventListeners[u]||(this.__eventListeners[u]=[]),this.__eventListeners[u].push(p);return this}function C(u,p){var D=(function(){p.apply(this,arguments),this.off(u,D)}).bind(this);this.on(u,D)}function y(u,p){if(arguments.length===1)for(var D in u)C.call(this,D,u[D]);else C.call(this,u,p);return this}function l(u,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(u in this.__eventListeners)b.call(this,u);else if(arguments.length===1&&typeof arguments[0]=="object")for(var D in u)b.call(this,D,u[D]);else b.call(this,u,p);return this}function h(u,p){if(!this.__eventListeners)return this;var D=this.__eventListeners[u];if(!D)return this;for(var g=0,x=D.length;g<x;g++)D[g]&&D[g].call(this,p||{});return this.__eventListeners[u]=D.filter(function(E){return E!==!1}),this}a.Observable={fire:h,on:c,once:y,off:l}}(),a.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var b=0,c=arguments.length;b<c;b++)this._onObjectAdded(arguments[b]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(b,c,C){var y=this._objects;return C?y[c]=b:y.splice(c,0,b),this._onObjectAdded&&this._onObjectAdded(b),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var b=this._objects,c,C=!1,y=0,l=arguments.length;y<l;y++)c=b.indexOf(arguments[y]),c!==-1&&(C=!0,b.splice(c,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[y]));return this.renderOnAddRemove&&C&&this.requestRenderAll(),this},forEachObject:function(b,c){for(var C=this.getObjects(),y=0,l=C.length;y<l;y++)b.call(c,C[y],y,C);return this},getObjects:function(b){return typeof b>"u"?this._objects.concat():this._objects.filter(function(c){return c.type===b})},item:function(b){return this._objects[b]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(b,c){return this._objects.indexOf(b)>-1?!0:c?this._objects.some(function(C){return typeof C.contains=="function"&&C.contains(b,!0)}):!1},complexity:function(){return this._objects.reduce(function(b,c){return b+=c.complexity?c.complexity():0,b},0)}},a.CommonMethods={_setOptions:function(b){for(var c in b)this.set(c,b[c])},_initGradient:function(b,c){b&&b.colorStops&&!(b instanceof a.Gradient)&&this.set(c,new a.Gradient(b))},_initPattern:function(b,c,C){b&&b.source&&!(b instanceof a.Pattern)?this.set(c,new a.Pattern(b,C)):C&&C()},_setObject:function(b){for(var c in b)this._set(c,b[c])},set:function(b,c){return typeof b=="object"?this._setObject(b):this._set(b,c),this},_set:function(b,c){this[b]=c},toggle:function(b){var c=this.get(b);return typeof c=="boolean"&&this.set(b,!c),this},get:function(b){return this[b]}},function(b){var c=Math.sqrt,C=Math.atan2,y=Math.pow,l=Math.PI/180,h=Math.PI/2;a.util={cos:function(u){if(u===0)return 1;u<0&&(u=-u);var p=u/h;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(u)},sin:function(u){if(u===0)return 0;var p=u/h,D=1;switch(u<0&&(D=-1),p){case 1:return D;case 2:return 0;case 3:return-D}return Math.sin(u)},removeFromArray:function(u,p){var D=u.indexOf(p);return D!==-1&&u.splice(D,1),u},getRandomInt:function(u,p){return Math.floor(Math.random()*(p-u+1))+u},degreesToRadians:function(u){return u*l},radiansToDegrees:function(u){return u/l},rotatePoint:function(u,p,D){var g=new a.Point(u.x-p.x,u.y-p.y),x=a.util.rotateVector(g,D);return new a.Point(x.x,x.y).addEquals(p)},rotateVector:function(u,p){var D=a.util.sin(p),g=a.util.cos(p),x=u.x*g-u.y*D,E=u.x*D+u.y*g;return{x,y:E}},transformPoint:function(u,p,D){return D?new a.Point(p[0]*u.x+p[2]*u.y,p[1]*u.x+p[3]*u.y):new a.Point(p[0]*u.x+p[2]*u.y+p[4],p[1]*u.x+p[3]*u.y+p[5])},makeBoundingBoxFromPoints:function(u,p){if(p)for(var D=0;D<u.length;D++)u[D]=a.util.transformPoint(u[D],p);var g=[u[0].x,u[1].x,u[2].x,u[3].x],x=a.util.array.min(g),E=a.util.array.max(g),_=E-x,O=[u[0].y,u[1].y,u[2].y,u[3].y],F=a.util.array.min(O),B=a.util.array.max(O),W=B-F;return{left:x,top:F,width:_,height:W}},invertTransform:function(u){var p=1/(u[0]*u[3]-u[1]*u[2]),D=[p*u[3],-p*u[1],-p*u[2],p*u[0]],g=a.util.transformPoint({x:u[4],y:u[5]},D,!0);return D[4]=-g.x,D[5]=-g.y,D},toFixed:function(u,p){return parseFloat(Number(u).toFixed(p))},parseUnit:function(u,p){var D=/\D{0,2}$/.exec(u),g=parseFloat(u);switch(p||(p=a.Text.DEFAULT_SVG_FONT_SIZE),D[0]){case"mm":return g*a.DPI/25.4;case"cm":return g*a.DPI/2.54;case"in":return g*a.DPI;case"pt":return g*a.DPI/72;case"pc":return g*a.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(u,p){return u=a.util.string.camelize(u.charAt(0).toUpperCase()+u.slice(1)),a.util.resolveNamespace(p)[u]},getSvgAttributes:function(u){var p=["instantiated_by_use","style","id","class"];switch(u){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(u){if(!u)return a;var p=u.split("."),D=p.length,g,x=b||a.window;for(g=0;g<D;++g)x=x[p[g]];return x},loadImage:function(u,p,D,g){if(!u){p&&p.call(D,u);return}var x=a.util.createImage(),E=function(){p&&p.call(D,x,!1),x=x.onload=x.onerror=null};x.onload=E,x.onerror=function(){a.log("Error loading "+x.src),p&&p.call(D,null,!0),x=x.onload=x.onerror=null},u.indexOf("data")!==0&&g!==void 0&&g!==null&&(x.crossOrigin=g),u.substring(0,14)==="data:image/svg"&&(x.onload=null,a.util.loadImageInDom(x,E)),x.src=u},loadImageInDom:function(u,p){var D=a.document.createElement("div");D.style.width=D.style.height="1px",D.style.left=D.style.top="-100%",D.style.position="absolute",D.appendChild(u),a.document.querySelector("body").appendChild(D),u.onload=function(){p(),D.parentNode.removeChild(D),D=null}},enlivenObjects:function(u,p,D,g){u=u||[];var x=[],E=0,_=u.length;function O(){++E===_&&p&&p(x.filter(function(F){return F}))}if(!_){p&&p(x);return}u.forEach(function(F,B){if(!F||!F.type){O();return}var W=a.util.getKlass(F.type,D);W.fromObject(F,function(H,Y){Y||(x[B]=H),g&&g(F,H,Y),O()})})},enlivenPatterns:function(u,p){u=u||[];function D(){++x===E&&p&&p(g)}var g=[],x=0,E=u.length;if(!E){p&&p(g);return}u.forEach(function(_,O){_&&_.source?new a.Pattern(_,function(F){g[O]=F,D()}):(g[O]=_,D())})},groupSVGElements:function(u,p,D){var g;return u&&u.length===1?u[0]:(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new a.Group(u,p),typeof D<"u"&&(g.sourcePath=D),g)},populateWithProperties:function(u,p,D){if(D&&Object.prototype.toString.call(D)==="[object Array]")for(var g=0,x=D.length;g<x;g++)D[g]in u&&(p[D[g]]=u[D[g]])},drawDashedLine:function(u,p,D,g,x,E){var _=g-p,O=x-D,F=c(_*_+O*O),B=C(O,_),W=E.length,H=0,Y=!0;for(u.save(),u.translate(p,D),u.moveTo(0,0),u.rotate(B),p=0;F>p;)p+=E[H++%W],p>F&&(p=F),u[Y?"lineTo":"moveTo"](p,0),Y=!Y;u.restore()},createCanvasElement:function(){return a.document.createElement("canvas")},copyCanvasElement:function(u){var p=a.util.createCanvasElement();return p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0),p},toDataURL:function(u,p,D){return u.toDataURL("image/"+p,D)},createImage:function(){return a.document.createElement("img")},multiplyTransformMatrices:function(u,p,D){return[u[0]*p[0]+u[2]*p[1],u[1]*p[0]+u[3]*p[1],u[0]*p[2]+u[2]*p[3],u[1]*p[2]+u[3]*p[3],D?0:u[0]*p[4]+u[2]*p[5]+u[4],D?0:u[1]*p[4]+u[3]*p[5]+u[5]]},qrDecompose:function(u){var p=C(u[1],u[0]),D=y(u[0],2)+y(u[1],2),g=c(D),x=(u[0]*u[3]-u[2]*u[1])/g,E=C(u[0]*u[2]+u[1]*u[3],D);return{angle:p/l,scaleX:g,scaleY:x,skewX:E/l,skewY:0,translateX:u[4],translateY:u[5]}},calcRotateMatrix:function(u){if(!u.angle)return a.iMatrix.concat();var p=a.util.degreesToRadians(u.angle),D=a.util.cos(p),g=a.util.sin(p);return[D,g,-g,D,0,0]},calcDimensionsMatrix:function(u){var p=typeof u.scaleX>"u"?1:u.scaleX,D=typeof u.scaleY>"u"?1:u.scaleY,g=[u.flipX?-p:p,0,0,u.flipY?-D:D,0,0],x=a.util.multiplyTransformMatrices,E=a.util.degreesToRadians;return u.skewX&&(g=x(g,[1,0,Math.tan(E(u.skewX)),1],!0)),u.skewY&&(g=x(g,[1,Math.tan(E(u.skewY)),0,1],!0)),g},composeMatrix:function(u){var p=[1,0,0,1,u.translateX||0,u.translateY||0],D=a.util.multiplyTransformMatrices;return u.angle&&(p=D(p,a.util.calcRotateMatrix(u))),(u.scaleX!==1||u.scaleY!==1||u.skewX||u.skewY||u.flipX||u.flipY)&&(p=D(p,a.util.calcDimensionsMatrix(u))),p},resetObjectTransform:function(u){u.scaleX=1,u.scaleY=1,u.skewX=0,u.skewY=0,u.flipX=!1,u.flipY=!1,u.rotate(0)},saveObjectTransform:function(u){return{scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,angle:u.angle,left:u.left,flipX:u.flipX,flipY:u.flipY,top:u.top}},isTransparent:function(u,p,D,g){g>0&&(p>g?p-=g:p=0,D>g?D-=g:D=0);var x=!0,E,_,O=u.getImageData(p,D,g*2||1,g*2||1),F=O.data.length;for(E=3;E<F&&(_=O.data[E],x=_<=0,x!==!1);E+=4);return O=null,x},parsePreserveAspectRatioAttribute:function(u){var p="meet",D="Mid",g="Mid",x=u.split(" "),E;return x&&x.length&&(p=x.pop(),p!=="meet"&&p!=="slice"?(E=p,p="meet"):x.length&&(E=x.pop())),D=E!=="none"?E.slice(1,4):"none",g=E!=="none"?E.slice(5,8):"none",{meetOrSlice:p,alignX:D,alignY:g}},clearFabricFontCache:function(u){u=(u||"").toLowerCase(),u?a.charWidthsCache[u]&&delete a.charWidthsCache[u]:a.charWidthsCache={}},limitDimsByArea:function(u,p){var D=Math.sqrt(p*u),g=Math.floor(p/D);return{x:Math.floor(D),y:g}},capValue:function(u,p,D){return Math.max(u,Math.min(p,D))},findScaleToFit:function(u,p){return Math.min(p.width/u.width,p.height/u.height)},findScaleToCover:function(u,p){return Math.max(p.width/u.width,p.height/u.height)},matrixToSVG:function(u){return"matrix("+u.map(function(p){return a.util.toFixed(p,a.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(u,p){var D=a.util.invertTransform(p),g=a.util.multiplyTransformMatrices(D,u.calcOwnMatrix());a.util.applyTransformToObject(u,g)},addTransformToObject:function(u,p){a.util.applyTransformToObject(u,a.util.multiplyTransformMatrices(p,u.calcOwnMatrix()))},applyTransformToObject:function(u,p){var D=a.util.qrDecompose(p),g=new a.Point(D.translateX,D.translateY);u.flipX=!1,u.flipY=!1,u.set("scaleX",D.scaleX),u.set("scaleY",D.scaleY),u.skewX=D.skewX,u.skewY=D.skewY,u.angle=D.angle,u.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(u,p,D){var g=u/2,x=p/2,E=[{x:-g,y:-x},{x:g,y:-x},{x:-g,y:x},{x:g,y:x}],_=a.util.calcDimensionsMatrix(D),O=a.util.makeBoundingBoxFromPoints(E,_);return{x:O.width,y:O.height}}}}(I),function(){var b=Array.prototype.join,c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},C={m:"l",M:"L"};function y(q,$,de,G,X,J,K,ve,he,Se,xe){var De=a.util.cos(q),le=a.util.sin(q),ee=a.util.cos($),re=a.util.sin($),ce=de*X*ee-G*J*re+K,fe=G*X*ee+de*J*re+ve,ye=Se+he*(-de*X*le-G*J*De),Ne=xe+he*(-G*X*le+de*J*De),Ve=ce+he*(de*X*re+G*J*ee),He=fe+he*(G*X*re-de*J*ee);return["C",ye,Ne,Ve,He,ce,fe]}function l(q,$,de,G,X,J,K){var ve=Math.PI,he=K*ve/180,Se=a.util.sin(he),xe=a.util.cos(he),De=0,le=0;de=Math.abs(de),G=Math.abs(G);var ee=-xe*q*.5-Se*$*.5,re=-xe*$*.5+Se*q*.5,ce=de*de,fe=G*G,ye=re*re,Ne=ee*ee,Ve=ce*fe-ce*ye-fe*Ne,He=0;if(Ve<0){var Ie=Math.sqrt(1-Ve/(ce*fe));de*=Ie,G*=Ie}else He=(X===J?-1:1)*Math.sqrt(Ve/(ce*ye+fe*Ne));var We=He*de*re/G,Xe=-He*G*ee/de,rt=xe*We-Se*Xe+q*.5,Lt=Se*We+xe*Xe+$*.5,xt=h(1,0,(ee-We)/de,(re-Xe)/G),wt=h((ee-We)/de,(re-Xe)/G,(-ee-We)/de,(-re-Xe)/G);J===0&&wt>0?wt-=2*ve:J===1&&wt<0&&(wt+=2*ve);for(var ct=Math.ceil(Math.abs(wt/ve*2)),_t=[],Ut=wt/ct,tn=8/3*Math.sin(Ut/4)*Math.sin(Ut/4)/Math.sin(Ut/2),_e=xt+Ut,Ae=0;Ae<ct;Ae++)_t[Ae]=y(xt,_e,xe,Se,de,G,rt,Lt,tn,De,le),De=_t[Ae][5],le=_t[Ae][6],xt=_e,_e+=Ut;return _t}function h(q,$,de,G){var X=Math.atan2($,q),J=Math.atan2(G,de);return J>=X?J-X:2*Math.PI-(X-J)}function u(q,$,de,G,X,J,K,ve){var he;if(a.cachesBoundsOfCurve&&(he=b.call(arguments),a.boundsOfCurveCache[he]))return a.boundsOfCurveCache[he];var Se=Math.sqrt,xe=Math.min,De=Math.max,le=Math.abs,ee=[],re=[[],[]],ce,fe,ye,Ne,Ve,He,Ie,We;fe=6*q-12*de+6*X,ce=-3*q+9*de-9*X+3*K,ye=3*de-3*q;for(var Xe=0;Xe<2;++Xe){if(Xe>0&&(fe=6*$-12*G+6*J,ce=-3*$+9*G-9*J+3*ve,ye=3*G-3*$),le(ce)<1e-12){if(le(fe)<1e-12)continue;Ne=-ye/fe,0<Ne&&Ne<1&&ee.push(Ne);continue}Ie=fe*fe-4*ye*ce,!(Ie<0)&&(We=Se(Ie),Ve=(-fe+We)/(2*ce),0<Ve&&Ve<1&&ee.push(Ve),He=(-fe-We)/(2*ce),0<He&&He<1&&ee.push(He))}for(var rt,Lt,xt=ee.length,wt=xt,ct;xt--;)Ne=ee[xt],ct=1-Ne,rt=ct*ct*ct*q+3*ct*ct*Ne*de+3*ct*Ne*Ne*X+Ne*Ne*Ne*K,re[0][xt]=rt,Lt=ct*ct*ct*$+3*ct*ct*Ne*G+3*ct*Ne*Ne*J+Ne*Ne*Ne*ve,re[1][xt]=Lt;re[0][wt]=q,re[1][wt]=$,re[0][wt+1]=K,re[1][wt+1]=ve;var _t=[{x:xe.apply(null,re[0]),y:xe.apply(null,re[1])},{x:De.apply(null,re[0]),y:De.apply(null,re[1])}];return a.cachesBoundsOfCurve&&(a.boundsOfCurveCache[he]=_t),_t}function p(q,$,de){for(var G=de[1],X=de[2],J=de[3],K=de[4],ve=de[5],he=de[6],Se=de[7],xe=l(he-q,Se-$,G,X,K,ve,J),De=0,le=xe.length;De<le;De++)xe[De][1]+=q,xe[De][2]+=$,xe[De][3]+=q,xe[De][4]+=$,xe[De][5]+=q,xe[De][6]+=$;return xe}function D(q){var $=0,de=0,G=q.length,X=0,J=0,K,ve,he,Se=[],xe,De,le;for(ve=0;ve<G;++ve){switch(he=!1,K=q[ve].slice(0),K[0]){case"l":K[0]="L",K[1]+=$,K[2]+=de;case"L":$=K[1],de=K[2];break;case"h":K[1]+=$;case"H":K[0]="L",K[2]=de,$=K[1];break;case"v":K[1]+=de;case"V":K[0]="L",de=K[1],K[1]=$,K[2]=de;break;case"m":K[0]="M",K[1]+=$,K[2]+=de;case"M":$=K[1],de=K[2],X=K[1],J=K[2];break;case"c":K[0]="C",K[1]+=$,K[2]+=de,K[3]+=$,K[4]+=de,K[5]+=$,K[6]+=de;case"C":De=K[3],le=K[4],$=K[5],de=K[6];break;case"s":K[0]="S",K[1]+=$,K[2]+=de,K[3]+=$,K[4]+=de;case"S":xe==="C"?(De=2*$-De,le=2*de-le):(De=$,le=de),$=K[3],de=K[4],K[0]="C",K[5]=K[3],K[6]=K[4],K[3]=K[1],K[4]=K[2],K[1]=De,K[2]=le,De=K[3],le=K[4];break;case"q":K[0]="Q",K[1]+=$,K[2]+=de,K[3]+=$,K[4]+=de;case"Q":De=K[1],le=K[2],$=K[3],de=K[4];break;case"t":K[0]="T",K[1]+=$,K[2]+=de;case"T":xe==="Q"?(De=2*$-De,le=2*de-le):(De=$,le=de),K[0]="Q",$=K[1],de=K[2],K[1]=De,K[2]=le,K[3]=$,K[4]=de;break;case"a":K[0]="A",K[6]+=$,K[7]+=de;case"A":he=!0,Se=Se.concat(p($,de,K)),$=K[6],de=K[7];break;case"z":case"Z":$=X,de=J;break;default:}he||Se.push(K),xe=K[0]}return Se}function g(q,$,de,G){return Math.sqrt((de-q)*(de-q)+(G-$)*(G-$))}function x(q){return q*q*q}function E(q){return 3*q*q*(1-q)}function _(q){return 3*q*(1-q)*(1-q)}function O(q){return(1-q)*(1-q)*(1-q)}function F(q,$,de,G,X,J,K,ve){return function(he){var Se=x(he),xe=E(he),De=_(he),le=O(he);return{x:K*Se+X*xe+de*De+q*le,y:ve*Se+J*xe+G*De+$*le}}}function B(q,$,de,G,X,J,K,ve){return function(he){var Se=1-he,xe=3*Se*Se*(de-q)+6*Se*he*(X-de)+3*he*he*(K-X),De=3*Se*Se*(G-$)+6*Se*he*(J-G)+3*he*he*(ve-J);return Math.atan2(De,xe)}}function W(q){return q*q}function H(q){return 2*q*(1-q)}function Y(q){return(1-q)*(1-q)}function oe(q,$,de,G,X,J){return function(K){var ve=W(K),he=H(K),Se=Y(K);return{x:X*ve+de*he+q*Se,y:J*ve+G*he+$*Se}}}function ne(q,$,de,G,X,J){return function(K){var ve=1-K,he=2*ve*(de-q)+2*K*(X-de),Se=2*ve*(G-$)+2*K*(J-G);return Math.atan2(Se,he)}}function be(q,$,de){var G={x:$,y:de},X,J=0,K;for(K=1;K<=100;K+=1)X=q(K/100),J+=g(G.x,G.y,X.x,X.y),G=X;return J}function Z(q,$){for(var de=0,G=0,X=q.iterator,J={x:q.x,y:q.y},K,ve,he=.01,Se=q.angleFinder,xe;G<$&&de<=1&&he>1e-4;)K=X(de),xe=de,ve=g(J.x,J.y,K.x,K.y),ve+G>$?(he/=2,de-=he):(J=K,de+=he,G+=ve);return K.angle=Se(xe),K}function me(q){for(var $=0,de=q.length,G,X=0,J=0,K=0,ve=0,he=[],Se,xe,De,le=0;le<de;le++){switch(G=q[le],xe={x:X,y:J,command:G[0]},G[0]){case"M":xe.length=0,K=X=G[1],ve=J=G[2];break;case"L":xe.length=g(X,J,G[1],G[2]),X=G[1],J=G[2];break;case"C":Se=F(X,J,G[1],G[2],G[3],G[4],G[5],G[6]),De=B(X,J,G[1],G[2],G[3],G[4],G[5],G[6]),xe.iterator=Se,xe.angleFinder=De,xe.length=be(Se,X,J),X=G[5],J=G[6];break;case"Q":Se=oe(X,J,G[1],G[2],G[3],G[4]),De=ne(X,J,G[1],G[2],G[3],G[4]),xe.iterator=Se,xe.angleFinder=De,xe.length=be(Se,X,J),X=G[3],J=G[4];break;case"Z":case"z":xe.destX=K,xe.destY=ve,xe.length=g(X,J,K,ve),X=K,J=ve;break}$+=xe.length,he.push(xe)}return he.push({length:$,x:X,y:J}),he}function V(q,$,de){de||(de=me(q));for(var G=0;$-de[G].length>0&&G<de.length-2;)$-=de[G].length,G++;var X=de[G],J=$/X.length,K=X.command,ve=q[G],he;switch(K){case"M":return{x:X.x,y:X.y,angle:0};case"Z":case"z":return he=new a.Point(X.x,X.y).lerp(new a.Point(X.destX,X.destY),J),he.angle=Math.atan2(X.destY-X.y,X.destX-X.x),he;case"L":return he=new a.Point(X.x,X.y).lerp(new a.Point(ve[1],ve[2]),J),he.angle=Math.atan2(ve[2]-X.y,ve[1]-X.x),he;case"C":return Z(X,$);case"Q":return Z(X,$)}}function Le(q){var $=[],de=[],G,X,J=a.rePathCommand,K="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",ve="("+K+")"+a.commaWsp,he="([01])"+a.commaWsp+"?",Se=ve+"?"+ve+"?"+ve+he+he+ve+"?("+K+")",xe=new RegExp(Se,"g"),De,le,ee;if(!q||!q.match)return $;ee=q.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var re=0,ce,fe=ee.length;re<fe;re++){G=ee[re],le=G.slice(1).trim(),de.length=0;var ye=G.charAt(0);if(ce=[ye],ye.toLowerCase()==="a")for(var Ne;Ne=xe.exec(le);)for(var Ve=1;Ve<Ne.length;Ve++)de.push(Ne[Ve]);else for(;De=J.exec(le);)de.push(De[0]);for(var Ve=0,He=de.length;Ve<He;Ve++)X=parseFloat(de[Ve]),isNaN(X)||ce.push(X);var Ie=c[ye.toLowerCase()],We=C[ye]||ye;if(ce.length-1>Ie)for(var Xe=1,rt=ce.length;Xe<rt;Xe+=Ie)$.push([ye].concat(ce.slice(Xe,Xe+Ie))),ye=We;else $.push(ce)}return $}function Ce(q,$){var de=[],G,X=new a.Point(q[0].x,q[0].y),J=new a.Point(q[1].x,q[1].y),K=q.length,ve=1,he=0,Se=K>2;for($=$||0,Se&&(ve=q[2].x<J.x?-1:q[2].x===J.x?0:1,he=q[2].y<J.y?-1:q[2].y===J.y?0:1),de.push(["M",X.x-ve*$,X.y-he*$]),G=1;G<K;G++){if(!X.eq(J)){var xe=X.midPointFrom(J);de.push(["Q",X.x,X.y,xe.x,xe.y])}X=q[G],G+1<q.length&&(J=q[G+1])}return Se&&(ve=X.x>q[G-2].x?1:X.x===q[G-2].x?0:-1,he=X.y>q[G-2].y?1:X.y===q[G-2].y?0:-1),de.push(["L",X.x+ve*$,X.y+he*$]),de}function ze(q,$,de){return de&&($=a.util.multiplyTransformMatrices($,[1,0,0,1,-de.x,-de.y])),q.map(function(G){for(var X=G.slice(0),J={},K=1;K<G.length-1;K+=2)J.x=G[K],J.y=G[K+1],J=a.util.transformPoint(J,$),X[K]=J.x,X[K+1]=J.y;return X})}function te(q,$,de,G,X,J,K,ve,he){for(var Se=0,xe=0,De,le=[],ee=l(ve-q,he-$,de,G,J,K,X),re=0,ce=ee.length;re<ce;re++)De=u(Se,xe,ee[re][1],ee[re][2],ee[re][3],ee[re][4],ee[re][5],ee[re][6]),le.push({x:De[0].x+q,y:De[0].y+$}),le.push({x:De[1].x+q,y:De[1].y+$}),Se=ee[re][5],xe=ee[re][6];return le}function ae(q,$,de,G){G=G.slice(0).unshift("X");var X=p($,de,G);X.forEach(function(J){q.bezierCurveTo.apply(q,J.slice(1))})}a.util.joinPath=function(q){return q.map(function($){return $.join(" ")}).join(" ")},a.util.parsePath=Le,a.util.makePathSimpler=D,a.util.getSmoothPathFromPoints=Ce,a.util.getPathSegmentsInfo=me,a.util.getBoundsOfCurve=u,a.util.getPointOnPath=V,a.util.transformPath=ze,a.util.fromArcToBeizers=p,a.util.getBoundsOfArc=te,a.util.drawArc=ae}(),function(){var b=Array.prototype.slice;function c(u,p){for(var D=b.call(arguments,2),g=[],x=0,E=u.length;x<E;x++)g[x]=D.length?u[x][p].apply(u[x],D):u[x][p].call(u[x]);return g}function C(u,p){return h(u,p,function(D,g){return D>=g})}function y(u,p){return h(u,p,function(D,g){return D<g})}function l(u,p){for(var D=u.length;D--;)u[D]=p;return u}function h(u,p,D){if(!(!u||u.length===0)){var g=u.length-1,x=p?u[g][p]:u[g];if(p)for(;g--;)D(u[g][p],x)&&(x=u[g][p]);else for(;g--;)D(u[g],x)&&(x=u[g]);return x}}a.util.array={fill:l,invoke:c,min:y,max:C}}(),function(){function b(C,y,l){if(l)if(!a.isLikelyNode&&y instanceof Element)C=y;else if(y instanceof Array){C=[];for(var h=0,u=y.length;h<u;h++)C[h]=b({},y[h],l)}else if(y&&typeof y=="object")for(var p in y)p==="canvas"||p==="group"?C[p]=null:y.hasOwnProperty(p)&&(C[p]=b({},y[p],l));else C=y;else for(var p in y)C[p]=y[p];return C}function c(C,y){return b({},C,y)}a.util.object={extend:b,clone:c},a.util.object.extend(a.util,a.Observable)}(),function(){function b(h){return h.replace(/-+(.)?/g,function(u,p){return p?p.toUpperCase():""})}function c(h,u){return h.charAt(0).toUpperCase()+(u?h.slice(1):h.slice(1).toLowerCase())}function C(h){return h.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function y(h){var u=0,p,D=[];for(u=0,p;u<h.length;u++)(p=l(h,u))!==!1&&D.push(p);return D}function l(h,u){var p=h.charCodeAt(u);if(isNaN(p))return"";if(p<55296||p>57343)return h.charAt(u);if(55296<=p&&p<=56319){if(h.length<=u+1)throw"High surrogate without following low surrogate";var D=h.charCodeAt(u+1);if(56320>D||D>57343)throw"High surrogate without following low surrogate";return h.charAt(u)+h.charAt(u+1)}if(u===0)throw"Low surrogate without preceding high surrogate";var g=h.charCodeAt(u-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}a.util.string={camelize:b,capitalize:c,escapeXml:C,graphemeSplit:y}}(),function(){var b=Array.prototype.slice,c=function(){},C=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),y=function(p,D,g){for(var x in D)x in p.prototype&&typeof p.prototype[x]=="function"&&(D[x]+"").indexOf("callSuper")>-1?p.prototype[x]=function(E){return function(){var _=this.constructor.superclass;this.constructor.superclass=g;var O=D[E].apply(this,arguments);if(this.constructor.superclass=_,E!=="initialize")return O}}(x):p.prototype[x]=D[x],C&&(D.toString!==Object.prototype.toString&&(p.prototype.toString=D.toString),D.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=D.valueOf))};function l(){}function h(p){for(var D=null,g=this;g.constructor.superclass;){var x=g.constructor.superclass.prototype[p];if(g[p]!==x){D=x;break}g=g.constructor.superclass.prototype}return D?arguments.length>1?D.apply(this,b.call(arguments,1)):D.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function u(){var p=null,D=b.call(arguments,0);typeof D[0]=="function"&&(p=D.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(l.prototype=p.prototype,g.prototype=new l,p.subclasses.push(g));for(var x=0,E=D.length;x<E;x++)y(g,D[x],p);return g.prototype.initialize||(g.prototype.initialize=c),g.prototype.constructor=g,g.prototype.callSuper=h,g}a.util.createClass=u}(),function(){var b=!!a.document.createElement("div").attachEvent,c=["touchstart","touchmove","touchend"];a.util.addListener=function(y,l,h,u){y&&y.addEventListener(l,h,b?!1:u)},a.util.removeListener=function(y,l,h,u){y&&y.removeEventListener(l,h,b?!1:u)};function C(y){var l=y.changedTouches;return l&&l[0]?l[0]:y}a.util.getPointer=function(y){var l=y.target,h=a.util.getScrollLeftTop(l),u=C(y);return{x:u.clientX+h.left,y:u.clientY+h.top}},a.util.isTouchEvent=function(y){return c.indexOf(y.type)>-1||y.pointerType==="touch"}}(),function(){function b(u,p){var D=u.style;if(!D)return u;if(typeof p=="string")return u.style.cssText+=";"+p,p.indexOf("opacity")>-1?h(u,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):u;for(var g in p)if(g==="opacity")h(u,p[g]);else{var x=g==="float"||g==="cssFloat"?typeof D.styleFloat>"u"?"cssFloat":"styleFloat":g;D[x]=p[g]}return u}var c=a.document.createElement("div"),C=typeof c.style.opacity=="string",y=typeof c.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,h=function(u){return u};C?h=function(u,p){return u.style.opacity=p,u}:y&&(h=function(u,p){var D=u.style;return u.currentStyle&&!u.currentStyle.hasLayout&&(D.zoom=1),l.test(D.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",D.filter=D.filter.replace(l,p)):D.filter+=" alpha(opacity="+p*100+")",u}),a.util.setStyle=b}(),function(){var b=Array.prototype.slice;function c(O){return typeof O=="string"?a.document.getElementById(O):O}var C,y=function(O){return b.call(O,0)};try{C=y(a.document.childNodes)instanceof Array}catch{}C||(y=function(O){for(var F=new Array(O.length),B=O.length;B--;)F[B]=O[B];return F});function l(O,F){var B=a.document.createElement(O);for(var W in F)W==="class"?B.className=F[W]:W==="for"?B.htmlFor=F[W]:B.setAttribute(W,F[W]);return B}function h(O,F){O&&(" "+O.className+" ").indexOf(" "+F+" ")===-1&&(O.className+=(O.className?" ":"")+F)}function u(O,F,B){return typeof F=="string"&&(F=l(F,B)),O.parentNode&&O.parentNode.replaceChild(F,O),F.appendChild(O),F}function p(O){for(var F=0,B=0,W=a.document.documentElement,H=a.document.body||{scrollLeft:0,scrollTop:0};O&&(O.parentNode||O.host)&&(O=O.parentNode||O.host,O===a.document?(F=H.scrollLeft||W.scrollLeft||0,B=H.scrollTop||W.scrollTop||0):(F+=O.scrollLeft||0,B+=O.scrollTop||0),!(O.nodeType===1&&O.style.position==="fixed")););return{left:F,top:B}}function D(O){var F,B=O&&O.ownerDocument,W={left:0,top:0},H={left:0,top:0},Y,oe={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!B)return H;for(var ne in oe)H[oe[ne]]+=parseInt(g(O,ne),10)||0;return F=B.documentElement,typeof O.getBoundingClientRect<"u"&&(W=O.getBoundingClientRect()),Y=p(O),{left:W.left+Y.left-(F.clientLeft||0)+H.left,top:W.top+Y.top-(F.clientTop||0)+H.top}}var g;a.document.defaultView&&a.document.defaultView.getComputedStyle?g=function(O,F){var B=a.document.defaultView.getComputedStyle(O,null);return B?B[F]:void 0}:g=function(O,F){var B=O.style[F];return!B&&O.currentStyle&&(B=O.currentStyle[F]),B},function(){var O=a.document.documentElement.style,F="userSelect"in O?"userSelect":"MozUserSelect"in O?"MozUserSelect":"WebkitUserSelect"in O?"WebkitUserSelect":"KhtmlUserSelect"in O?"KhtmlUserSelect":"";function B(H){return typeof H.onselectstart<"u"&&(H.onselectstart=a.util.falseFunction),F?H.style[F]="none":typeof H.unselectable=="string"&&(H.unselectable="on"),H}function W(H){return typeof H.onselectstart<"u"&&(H.onselectstart=null),F?H.style[F]="":typeof H.unselectable=="string"&&(H.unselectable=""),H}a.util.makeElementUnselectable=B,a.util.makeElementSelectable=W}();function x(O){var F=a.jsdomImplForWrapper(O);return F._canvas||F._image}function E(O){if(a.isLikelyNode){var F=a.jsdomImplForWrapper(O);F&&(F._image=null,F._canvas=null,F._currentSrc=null,F._attributes=null,F._classList=null)}}function _(O,F){O.imageSmoothingEnabled=O.imageSmoothingEnabled||O.webkitImageSmoothingEnabled||O.mozImageSmoothingEnabled||O.msImageSmoothingEnabled||O.oImageSmoothingEnabled,O.imageSmoothingEnabled=F}a.util.setImageSmoothing=_,a.util.getById=c,a.util.toArray=y,a.util.addClass=h,a.util.makeElement=l,a.util.wrapElement=u,a.util.getScrollLeftTop=p,a.util.getElementOffset=D,a.util.getNodeCanvas=x,a.util.cleanUpJsdomNode=E}(),function(){function b(y,l){return y+(/\?/.test(y)?"&":"?")+l}function c(){}function C(y,l){l||(l={});var h=l.method?l.method.toUpperCase():"GET",u=l.onComplete||function(){},p=new a.window.XMLHttpRequest,D=l.body||l.parameters;return p.onreadystatechange=function(){p.readyState===4&&(u(p),p.onreadystatechange=c)},h==="GET"&&(D=null,typeof l.parameters=="string"&&(y=b(y,l.parameters))),p.open(h,y,!0),(h==="POST"||h==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(D),p}a.util.request=C}(),a.log=console.log,a.warn=console.warn,function(){function b(){return!1}function c(p,D,g,x){return-g*Math.cos(p/x*(Math.PI/2))+g+D}function C(p){var D=!1;return h(function(g){p||(p={});var x=g||+new Date,E=p.duration||500,_=x+E,O,F=p.onChange||b,B=p.abort||b,W=p.onComplete||b,H=p.easing||c,Y="startValue"in p?p.startValue:0,oe="endValue"in p?p.endValue:100,ne=p.byValue||oe-Y;p.onStart&&p.onStart(),function be(Z){O=Z||+new Date;var me=O>_?E:O-x,V=me/E,Le=H(me,Y,ne,E),Ce=Math.abs((Le-Y)/ne);if(!D){if(B(Le,Ce,V)){W(oe,1,1);return}if(O>_){F(oe,1,1),W(oe,1,1);return}else F(Le,Ce,V),h(be)}}(x)}),function(){D=!0}}var y=a.window.requestAnimationFrame||a.window.webkitRequestAnimationFrame||a.window.mozRequestAnimationFrame||a.window.oRequestAnimationFrame||a.window.msRequestAnimationFrame||function(p){return a.window.setTimeout(p,1e3/60)},l=a.window.cancelAnimationFrame||a.window.clearTimeout;function h(){return y.apply(a.window,arguments)}function u(){return l.apply(a.window,arguments)}a.util.animate=C,a.util.requestAnimFrame=h,a.util.cancelAnimFrame=u}(),function(){function b(C,y,l){var h="rgba("+parseInt(C[0]+l*(y[0]-C[0]),10)+","+parseInt(C[1]+l*(y[1]-C[1]),10)+","+parseInt(C[2]+l*(y[2]-C[2]),10);return h+=","+(C&&y?parseFloat(C[3]+l*(y[3]-C[3])):1),h+=")",h}function c(C,y,l,h){var u=new a.Color(C).getSource(),p=new a.Color(y).getSource(),D=h.onComplete,g=h.onChange;return h=h||{},a.util.animate(a.util.object.extend(h,{duration:l||500,startValue:u,endValue:p,byValue:p,easing:function(x,E,_,O){var F=h.colorEasing?h.colorEasing(x,O):1-Math.cos(x/O*(Math.PI/2));return b(E,_,F)},onComplete:function(x,E,_){if(D)return D(b(p,p,0),E,_)},onChange:function(x,E,_){if(g){if(Array.isArray(x))return g(b(x,x,0),E,_);g(x,E,_)}}}))}a.util.animateColor=c}(),function(){function b(te,ae,q,$){return te<Math.abs(ae)?(te=ae,$=q/4):ae===0&&te===0?$=q/(2*Math.PI)*Math.asin(1):$=q/(2*Math.PI)*Math.asin(ae/te),{a:te,c:ae,p:q,s:$}}function c(te,ae,q){return te.a*Math.pow(2,10*(ae-=1))*Math.sin((ae*q-te.s)*(2*Math.PI)/te.p)}function C(te,ae,q,$){return q*((te=te/$-1)*te*te+1)+ae}function y(te,ae,q,$){return te/=$/2,te<1?q/2*te*te*te+ae:q/2*((te-=2)*te*te+2)+ae}function l(te,ae,q,$){return q*(te/=$)*te*te*te+ae}function h(te,ae,q,$){return-q*((te=te/$-1)*te*te*te-1)+ae}function u(te,ae,q,$){return te/=$/2,te<1?q/2*te*te*te*te+ae:-q/2*((te-=2)*te*te*te-2)+ae}function p(te,ae,q,$){return q*(te/=$)*te*te*te*te+ae}function D(te,ae,q,$){return q*((te=te/$-1)*te*te*te*te+1)+ae}function g(te,ae,q,$){return te/=$/2,te<1?q/2*te*te*te*te*te+ae:q/2*((te-=2)*te*te*te*te+2)+ae}function x(te,ae,q,$){return-q*Math.cos(te/$*(Math.PI/2))+q+ae}function E(te,ae,q,$){return q*Math.sin(te/$*(Math.PI/2))+ae}function _(te,ae,q,$){return-q/2*(Math.cos(Math.PI*te/$)-1)+ae}function O(te,ae,q,$){return te===0?ae:q*Math.pow(2,10*(te/$-1))+ae}function F(te,ae,q,$){return te===$?ae+q:q*(-Math.pow(2,-10*te/$)+1)+ae}function B(te,ae,q,$){return te===0?ae:te===$?ae+q:(te/=$/2,te<1?q/2*Math.pow(2,10*(te-1))+ae:q/2*(-Math.pow(2,-10*--te)+2)+ae)}function W(te,ae,q,$){return-q*(Math.sqrt(1-(te/=$)*te)-1)+ae}function H(te,ae,q,$){return q*Math.sqrt(1-(te=te/$-1)*te)+ae}function Y(te,ae,q,$){return te/=$/2,te<1?-q/2*(Math.sqrt(1-te*te)-1)+ae:q/2*(Math.sqrt(1-(te-=2)*te)+1)+ae}function oe(te,ae,q,$){var de=1.70158,G=0,X=q;if(te===0)return ae;if(te/=$,te===1)return ae+q;G||(G=$*.3);var J=b(X,q,G,de);return-c(J,te,$)+ae}function ne(te,ae,q,$){var de=1.70158,G=0,X=q;if(te===0)return ae;if(te/=$,te===1)return ae+q;G||(G=$*.3);var J=b(X,q,G,de);return J.a*Math.pow(2,-10*te)*Math.sin((te*$-J.s)*(2*Math.PI)/J.p)+J.c+ae}function be(te,ae,q,$){var de=1.70158,G=0,X=q;if(te===0)return ae;if(te/=$/2,te===2)return ae+q;G||(G=$*.44999999999999996);var J=b(X,q,G,de);return te<1?-.5*c(J,te,$)+ae:J.a*Math.pow(2,-10*(te-=1))*Math.sin((te*$-J.s)*(2*Math.PI)/J.p)*.5+J.c+ae}function Z(te,ae,q,$,de){return de===void 0&&(de=1.70158),q*(te/=$)*te*((de+1)*te-de)+ae}function me(te,ae,q,$,de){return de===void 0&&(de=1.70158),q*((te=te/$-1)*te*((de+1)*te+de)+1)+ae}function V(te,ae,q,$,de){return de===void 0&&(de=1.70158),te/=$/2,te<1?q/2*(te*te*(((de*=1.525)+1)*te-de))+ae:q/2*((te-=2)*te*(((de*=1.525)+1)*te+de)+2)+ae}function Le(te,ae,q,$){return q-Ce($-te,0,q,$)+ae}function Ce(te,ae,q,$){return(te/=$)<.36363636363636365?q*(7.5625*te*te)+ae:te<.7272727272727273?q*(7.5625*(te-=.5454545454545454)*te+.75)+ae:te<.9090909090909091?q*(7.5625*(te-=.8181818181818182)*te+.9375)+ae:q*(7.5625*(te-=.9545454545454546)*te+.984375)+ae}function ze(te,ae,q,$){return te<$/2?Le(te*2,0,q,$)*.5+ae:Ce(te*2-$,0,q,$)*.5+q*.5+ae}a.util.ease={easeInQuad:function(te,ae,q,$){return q*(te/=$)*te+ae},easeOutQuad:function(te,ae,q,$){return-q*(te/=$)*(te-2)+ae},easeInOutQuad:function(te,ae,q,$){return te/=$/2,te<1?q/2*te*te+ae:-q/2*(--te*(te-2)-1)+ae},easeInCubic:function(te,ae,q,$){return q*(te/=$)*te*te+ae},easeOutCubic:C,easeInOutCubic:y,easeInQuart:l,easeOutQuart:h,easeInOutQuart:u,easeInQuint:p,easeOutQuint:D,easeInOutQuint:g,easeInSine:x,easeOutSine:E,easeInOutSine:_,easeInExpo:O,easeOutExpo:F,easeInOutExpo:B,easeInCirc:W,easeOutCirc:H,easeInOutCirc:Y,easeInElastic:oe,easeOutElastic:ne,easeInOutElastic:be,easeInBack:Z,easeOutBack:me,easeInOutBack:V,easeInBounce:Le,easeOutBounce:Ce,easeInOutBounce:ze}}(),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.extend,y=c.util.object.clone,l=c.util.toFixed,h=c.util.parseUnit,u=c.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],D=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],x=["symbol","g","a","svg","clipPath","defs"],E={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},O="font-size",F="clip-path";c.svgValidTagNamesRegEx=H(p),c.svgViewBoxElementsRegEx=H(D),c.svgInvalidAncestorsRegEx=H(g),c.svgValidParentsRegEx=H(x),c.cssRules={},c.gradientDefs={},c.clipPaths={};function B(G){return G in E?E[G]:G}function W(G,X,J,K){var ve=Object.prototype.toString.call(X)==="[object Array]",he;if((G==="fill"||G==="stroke")&&X==="none")X="";else{if(G==="strokeUniform")return X==="non-scaling-stroke";if(G==="strokeDashArray")X==="none"?X=null:X=X.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(G==="transformMatrix")J&&J.transformMatrix?X=u(J.transformMatrix,c.parseTransformAttribute(X)):X=c.parseTransformAttribute(X);else if(G==="visible")X=X!=="none"&&X!=="hidden",J&&J.visible===!1&&(X=!1);else if(G==="opacity")X=parseFloat(X),J&&typeof J.opacity<"u"&&(X*=J.opacity);else if(G==="textAnchor")X=X==="start"?"left":X==="end"?"right":"center";else if(G==="charSpacing")he=h(X,K)/K*1e3;else if(G==="paintFirst"){var Se=X.indexOf("fill"),xe=X.indexOf("stroke"),X="fill";(Se>-1&&xe>-1&&xe<Se||Se===-1&&xe>-1)&&(X="stroke")}else{if(G==="href"||G==="xlink:href"||G==="font")return X;if(G==="imageSmoothing")return X==="optimizeQuality";he=ve?X.map(h):h(X,K)}}return!ve&&isNaN(he)?X:he}function H(G){return new RegExp("^("+G.join("|")+")\\b","i")}function Y(G){for(var X in _)if(!(typeof G[_[X]]>"u"||G[X]==="")){if(typeof G[X]>"u"){if(!c.Object.prototype[X])continue;G[X]=c.Object.prototype[X]}if(G[X].indexOf("url(")!==0){var J=new c.Color(G[X]);G[X]=J.setAlpha(l(J.getAlpha()*G[_[X]],2)).toRgba()}}return G}function oe(G,X){var J,K=[],ve,he,Se;for(he=0,Se=X.length;he<Se;he++)J=X[he],ve=G.getElementsByTagName(J),K=K.concat(Array.prototype.slice.call(ve));return K}c.parseTransformAttribute=function(){function G(Ie,We){var Xe=c.util.cos(We[0]),rt=c.util.sin(We[0]),Lt=0,xt=0;We.length===3&&(Lt=We[1],xt=We[2]),Ie[0]=Xe,Ie[1]=rt,Ie[2]=-rt,Ie[3]=Xe,Ie[4]=Lt-(Xe*Lt-rt*xt),Ie[5]=xt-(rt*Lt+Xe*xt)}function X(Ie,We){var Xe=We[0],rt=We.length===2?We[1]:We[0];Ie[0]=Xe,Ie[3]=rt}function J(Ie,We,Xe){Ie[Xe]=Math.tan(c.util.degreesToRadians(We[0]))}function K(Ie,We){Ie[4]=We[0],We.length===2&&(Ie[5]=We[1])}var ve=c.iMatrix,he=c.reNum,Se=c.commaWsp,xe="(?:(skewX)\\s*\\(\\s*("+he+")\\s*\\))",De="(?:(skewY)\\s*\\(\\s*("+he+")\\s*\\))",le="(?:(rotate)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+")"+Se+"("+he+"))?\\s*\\))",ee="(?:(scale)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+"))?\\s*\\))",re="(?:(translate)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+"))?\\s*\\))",ce="(?:(matrix)\\s*\\(\\s*("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")\\s*\\))",fe="(?:"+ce+"|"+re+"|"+ee+"|"+le+"|"+xe+"|"+De+")",ye="(?:"+fe+"(?:"+Se+"*"+fe+")*)",Ne="^\\s*(?:"+ye+"?)\\s*$",Ve=new RegExp(Ne),He=new RegExp(fe,"g");return function(Ie){var We=ve.concat(),Xe=[];if(!Ie||Ie&&!Ve.test(Ie))return We;Ie.replace(He,function(Lt){var xt=new RegExp(fe).exec(Lt).filter(function(_t){return!!_t}),wt=xt[1],ct=xt.slice(2).map(parseFloat);switch(wt){case"translate":K(We,ct);break;case"rotate":ct[0]=c.util.degreesToRadians(ct[0]),G(We,ct);break;case"scale":X(We,ct);break;case"skewX":J(We,ct,2);break;case"skewY":J(We,ct,1);break;case"matrix":We=ct;break}Xe.push(We.concat()),We=ve.concat()});for(var rt=Xe[0];Xe.length>1;)Xe.shift(),rt=c.util.multiplyTransformMatrices(rt,Xe[0]);return rt}}();function ne(G,X){var J,K;G.replace(/;\s*$/,"").split(";").forEach(function(ve){var he=ve.split(":");J=he[0].trim().toLowerCase(),K=he[1].trim(),X[J]=K})}function be(G,X){var J,K;for(var ve in G)typeof G[ve]>"u"||(J=ve.toLowerCase(),K=G[ve],X[J]=K)}function Z(G,X){var J={};for(var K in c.cssRules[X])if(me(G,K.split(" ")))for(var ve in c.cssRules[X][K])J[ve]=c.cssRules[X][K][ve];return J}function me(G,X){var J,K=!0;return J=Le(G,X.pop()),J&&X.length&&(K=V(G,X)),J&&K&&X.length===0}function V(G,X){for(var J,K=!0;G.parentNode&&G.parentNode.nodeType===1&&X.length;)K&&(J=X.pop()),G=G.parentNode,K=Le(G,J);return X.length===0}function Le(G,X){var J=G.nodeName,K=G.getAttribute("class"),ve=G.getAttribute("id"),he,Se;if(he=new RegExp("^"+J,"i"),X=X.replace(he,""),ve&&X.length&&(he=new RegExp("#"+ve+"(?![a-zA-Z\\-]+)","i"),X=X.replace(he,"")),K&&X.length)for(K=K.split(" "),Se=K.length;Se--;)he=new RegExp("\\."+K[Se]+"(?![a-zA-Z\\-]+)","i"),X=X.replace(he,"");return X.length===0}function Ce(G,X){var J;if(G.getElementById&&(J=G.getElementById(X)),J)return J;var K,ve,he,Se=G.getElementsByTagName("*");for(ve=0,he=Se.length;ve<he;ve++)if(K=Se[ve],X===K.getAttribute("id"))return K}function ze(G){for(var X=oe(G,["use","svg:use"]),J=0;X.length&&J<X.length;){var K=X[J],ve=K.getAttribute("xlink:href")||K.getAttribute("href");if(ve===null)return;var he=ve.substr(1),Se=K.getAttribute("x")||0,xe=K.getAttribute("y")||0,De=Ce(G,he).cloneNode(!0),le=(De.getAttribute("transform")||"")+" translate("+Se+", "+xe+")",ee,re=X.length,ce,fe,ye,Ne,Ve=c.svgNS;if(ae(De),/^svg$/i.test(De.nodeName)){var He=De.ownerDocument.createElementNS(Ve,"g");for(fe=0,ye=De.attributes,Ne=ye.length;fe<Ne;fe++)ce=ye.item(fe),He.setAttributeNS(Ve,ce.nodeName,ce.nodeValue);for(;De.firstChild;)He.appendChild(De.firstChild);De=He}for(fe=0,ye=K.attributes,Ne=ye.length;fe<Ne;fe++)ce=ye.item(fe),!(ce.nodeName==="x"||ce.nodeName==="y"||ce.nodeName==="xlink:href"||ce.nodeName==="href")&&(ce.nodeName==="transform"?le=ce.nodeValue+" "+le:De.setAttribute(ce.nodeName,ce.nodeValue));De.setAttribute("transform",le),De.setAttribute("instantiated_by_use","1"),De.removeAttribute("id"),ee=K.parentNode,ee.replaceChild(De,K),X.length===re&&J++}}var te=new RegExp("^\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*,?\\s*("+c.reNum+"+)\\s*$");function ae(G){if(!c.svgViewBoxElementsRegEx.test(G.nodeName))return{};var X=G.getAttribute("viewBox"),J=1,K=1,ve=0,he=0,Se,xe,De,le,ee=G.getAttribute("width"),re=G.getAttribute("height"),ce=G.getAttribute("x")||0,fe=G.getAttribute("y")||0,ye=G.getAttribute("preserveAspectRatio")||"",Ne=!X||!(X=X.match(te)),Ve=!ee||!re||ee==="100%"||re==="100%",He=Ne&&Ve,Ie={},We="",Xe=0,rt=0;if(Ie.width=0,Ie.height=0,Ie.toBeParsed=He,Ne&&(ce||fe)&&G.parentNode&&G.parentNode.nodeName!=="#document"&&(We=" translate("+h(ce)+" "+h(fe)+") ",De=(G.getAttribute("transform")||"")+We,G.setAttribute("transform",De),G.removeAttribute("x"),G.removeAttribute("y")),He)return Ie;if(Ne)return Ie.width=h(ee),Ie.height=h(re),Ie;if(ve=-parseFloat(X[1]),he=-parseFloat(X[2]),Se=parseFloat(X[3]),xe=parseFloat(X[4]),Ie.minX=ve,Ie.minY=he,Ie.viewBoxWidth=Se,Ie.viewBoxHeight=xe,Ve?(Ie.width=Se,Ie.height=xe):(Ie.width=h(ee),Ie.height=h(re),J=Ie.width/Se,K=Ie.height/xe),ye=c.util.parsePreserveAspectRatioAttribute(ye),ye.alignX!=="none"&&(ye.meetOrSlice==="meet"&&(K=J=J>K?K:J),ye.meetOrSlice==="slice"&&(K=J=J>K?J:K),Xe=Ie.width-Se*J,rt=Ie.height-xe*J,ye.alignX==="Mid"&&(Xe/=2),ye.alignY==="Mid"&&(rt/=2),ye.alignX==="Min"&&(Xe=0),ye.alignY==="Min"&&(rt=0)),J===1&&K===1&&ve===0&&he===0&&ce===0&&fe===0)return Ie;if((ce||fe)&&G.parentNode.nodeName!=="#document"&&(We=" translate("+h(ce)+" "+h(fe)+") "),De=We+" matrix("+J+" 0 0 "+K+" "+(ve*J+Xe)+" "+(he*K+rt)+") ",G.nodeName==="svg"){for(le=G.ownerDocument.createElementNS(c.svgNS,"g");G.firstChild;)le.appendChild(G.firstChild);G.appendChild(le)}else le=G,le.removeAttribute("x"),le.removeAttribute("y"),De=le.getAttribute("transform")+De;return le.setAttribute("transform",De),Ie}function q(G,X){for(;G&&(G=G.parentNode);)if(G.nodeName&&X.test(G.nodeName.replace("svg:",""))&&!G.getAttribute("instantiated_by_use"))return!0;return!1}c.parseSVGDocument=function(G,X,J,K){if(G){ze(G);var ve=c.Object.__uid++,he,Se,xe=ae(G),De=c.util.toArray(G.getElementsByTagName("*"));if(xe.crossOrigin=K&&K.crossOrigin,xe.svgUid=ve,De.length===0&&c.isLikelyNode){De=G.selectNodes('//*[name(.)!="svg"]');var le=[];for(he=0,Se=De.length;he<Se;he++)le[he]=De[he];De=le}var ee=De.filter(function(ce){return ae(ce),c.svgValidTagNamesRegEx.test(ce.nodeName.replace("svg:",""))&&!q(ce,c.svgInvalidAncestorsRegEx)});if(!ee||ee&&!ee.length){X&&X([],{});return}var re={};De.filter(function(ce){return ce.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ce){var fe=ce.getAttribute("id");re[fe]=c.util.toArray(ce.getElementsByTagName("*")).filter(function(ye){return c.svgValidTagNamesRegEx.test(ye.nodeName.replace("svg:",""))})}),c.gradientDefs[ve]=c.getGradientDefs(G),c.cssRules[ve]=c.getCSSRules(G),c.clipPaths[ve]=re,c.parseElements(ee,function(ce,fe){X&&(X(ce,xe,fe,De),delete c.gradientDefs[ve],delete c.cssRules[ve],delete c.clipPaths[ve])},y(xe),J,K)}};function $(G,X){var J=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],K="xlink:href",ve=X.getAttribute(K).substr(1),he=Ce(G,ve);if(he&&he.getAttribute(K)&&$(G,he),J.forEach(function(xe){he&&!X.hasAttribute(xe)&&he.hasAttribute(xe)&&X.setAttribute(xe,he.getAttribute(xe))}),!X.children.length)for(var Se=he.cloneNode(!0);Se.firstChild;)X.appendChild(Se.firstChild);X.removeAttribute(K)}var de=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+c.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+c.reNum+"))?\\s+(.*)");C(c,{parseFontDeclaration:function(G,X){var J=G.match(de);if(J){var K=J[1],ve=J[3],he=J[4],Se=J[5],xe=J[6];K&&(X.fontStyle=K),ve&&(X.fontWeight=isNaN(parseFloat(ve))?ve:parseFloat(ve)),he&&(X.fontSize=h(he)),xe&&(X.fontFamily=xe),Se&&(X.lineHeight=Se==="normal"?1:Se)}},getGradientDefs:function(G){var X=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],J=oe(G,X),K,ve=0,he={};for(ve=J.length;ve--;)K=J[ve],K.getAttribute("xlink:href")&&$(G,K),he[K.getAttribute("id")]=K;return he},parseAttributes:function(G,X,J){if(G){var K,ve={},he,Se;typeof J>"u"&&(J=G.getAttribute("svgUid")),G.parentNode&&c.svgValidParentsRegEx.test(G.parentNode.nodeName)&&(ve=c.parseAttributes(G.parentNode,X,J));var xe=X.reduce(function(ye,Ne){return K=G.getAttribute(Ne),K&&(ye[Ne]=K),ye},{}),De=C(Z(G,J),c.parseStyleAttribute(G));xe=C(xe,De),De[F]&&G.setAttribute(F,De[F]),he=Se=ve.fontSize||c.Text.DEFAULT_SVG_FONT_SIZE,xe[O]&&(xe[O]=he=h(xe[O],Se));var le,ee,re={};for(var ce in xe)le=B(ce),ee=W(le,xe[ce],ve,he),re[le]=ee;re&&re.font&&c.parseFontDeclaration(re.font,re);var fe=C(ve,re);return c.svgValidParentsRegEx.test(G.nodeName)?fe:Y(fe)}},parseElements:function(G,X,J,K,ve){new c.ElementsParser(G,X,J,K,ve).parse()},parseStyleAttribute:function(G){var X={},J=G.getAttribute("style");return J&&(typeof J=="string"?ne(J,X):be(J,X)),X},parsePointsAttribute:function(G){if(!G)return null;G=G.replace(/,/g," ").trim(),G=G.split(/\s+/);var X=[],J,K;for(J=0,K=G.length;J<K;J+=2)X.push({x:parseFloat(G[J]),y:parseFloat(G[J+1])});return X},getCSSRules:function(G){var X=G.getElementsByTagName("style"),J,K,ve={},he;for(J=0,K=X.length;J<K;J++){var Se=X[J].textContent;Se=Se.replace(/\/\*[\s\S]*?\*\//g,""),Se.trim()!==""&&(he=Se.match(/[^{]*\{[\s\S]*?\}/g),he=he.map(function(xe){return xe.trim()}),he.forEach(function(xe){var De=xe.match(/([\s\S]*?)\s*\{([^}]*)\}/),le={},ee=De[2].trim(),re=ee.replace(/;$/,"").split(/\s*;\s*/);for(J=0,K=re.length;J<K;J++){var ce=re[J].split(/\s*:\s*/),fe=ce[0],ye=ce[1];le[fe]=ye}xe=De[1],xe.split(",").forEach(function(Ne){Ne=Ne.replace(/^svg/i,"").trim(),Ne!==""&&(ve[Ne]?c.util.object.extend(ve[Ne],le):ve[Ne]=c.util.object.clone(le))})}))}return ve},loadSVGFromURL:function(G,X,J,K){G=G.replace(/^\n\s*/,"").trim(),new c.util.request(G,{method:"get",onComplete:ve});function ve(he){var Se=he.responseXML;if(!Se||!Se.documentElement)return X&&X(null),!1;c.parseSVGDocument(Se.documentElement,function(xe,De,le,ee){X&&X(xe,De,le,ee)},J,K)}},loadSVGFromString:function(G,X,J,K){var ve=new c.window.DOMParser,he=ve.parseFromString(G.trim(),"text/xml");c.parseSVGDocument(he.documentElement,function(Se,xe,De,le){X(Se,xe,De,le)},J,K)}})}(I),a.ElementsParser=function(b,c,C,y,l,h){this.elements=b,this.callback=c,this.options=C,this.reviver=y,this.svgUid=C&&C.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=h},function(b){b.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},b.createObjects=function(){var c=this;this.elements.forEach(function(C,y){C.setAttribute("svgUid",c.svgUid),c.createObject(C,y)})},b.findTag=function(c){return a[a.util.string.capitalize(c.tagName.replace("svg:",""))]},b.createObject=function(c,C){var y=this.findTag(c);if(y&&y.fromElement)try{y.fromElement(c,this.createCallback(C,c),this.options)}catch(l){a.log(l)}else this.checkIfDone()},b.createCallback=function(c,C){var y=this;return function(l){var h;y.resolveGradient(l,C,"fill"),y.resolveGradient(l,C,"stroke"),l instanceof a.Image&&l._originalElement&&(h=l.parsePreserveAspectRatioAttribute(C)),l._removeTransformMatrix(h),y.resolveClipPath(l,C),y.reviver&&y.reviver(C,l),y.instances[c]=l,y.checkIfDone()}},b.extractPropertyDefinition=function(c,C,y){var l=c[C],h=this.regexUrl;if(h.test(l)){h.lastIndex=0;var u=h.exec(l)[1];return h.lastIndex=0,a[y][this.svgUid][u]}},b.resolveGradient=function(c,C,y){var l=this.extractPropertyDefinition(c,y,"gradientDefs");if(l){var h=C.getAttribute(y+"-opacity"),u=a.Gradient.fromElement(l,c,h,this.options);c.set(y,u)}},b.createClipPathCallback=function(c,C){return function(y){y._removeTransformMatrix(),y.fillRule=y.clipRule,C.push(y)}},b.resolveClipPath=function(c,C){var y=this.extractPropertyDefinition(c,"clipPath","clipPaths"),l,h,u,p,D,g;if(y){p=[],u=a.util.invertTransform(c.calcTransformMatrix());for(var x=y[0].parentNode,E=C;E.parentNode&&E.getAttribute("clip-path")!==c.clipPath;)E=E.parentNode;E.parentNode.appendChild(x);for(var _=0;_<y.length;_++)l=y[_],h=this.findTag(l),h.fromElement(l,this.createClipPathCallback(c,p),this.options);p.length===1?y=p[0]:y=new a.Group(p),D=a.util.multiplyTransformMatrices(u,y.calcTransformMatrix()),y.clipPath&&this.resolveClipPath(y,E);var g=a.util.qrDecompose(D);y.flipX=!1,y.flipY=!1,y.set("scaleX",g.scaleX),y.set("scaleY",g.scaleY),y.angle=g.angle,y.skewX=g.skewX,y.skewY=0,y.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),c.clipPath=y}else delete c.clipPath},b.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(c){return c!=null}),this.callback(this.instances,this.elements))}}(a.ElementsParser.prototype),function(b){"use strict";var c=b.fabric||(b.fabric={});if(c.Point){c.warn("fabric.Point is already defined");return}c.Point=C;function C(y,l){this.x=y,this.y=l}C.prototype={type:"point",constructor:C,add:function(y){return new C(this.x+y.x,this.y+y.y)},addEquals:function(y){return this.x+=y.x,this.y+=y.y,this},scalarAdd:function(y){return new C(this.x+y,this.y+y)},scalarAddEquals:function(y){return this.x+=y,this.y+=y,this},subtract:function(y){return new C(this.x-y.x,this.y-y.y)},subtractEquals:function(y){return this.x-=y.x,this.y-=y.y,this},scalarSubtract:function(y){return new C(this.x-y,this.y-y)},scalarSubtractEquals:function(y){return this.x-=y,this.y-=y,this},multiply:function(y){return new C(this.x*y,this.y*y)},multiplyEquals:function(y){return this.x*=y,this.y*=y,this},divide:function(y){return new C(this.x/y,this.y/y)},divideEquals:function(y){return this.x/=y,this.y/=y,this},eq:function(y){return this.x===y.x&&this.y===y.y},lt:function(y){return this.x<y.x&&this.y<y.y},lte:function(y){return this.x<=y.x&&this.y<=y.y},gt:function(y){return this.x>y.x&&this.y>y.y},gte:function(y){return this.x>=y.x&&this.y>=y.y},lerp:function(y,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new C(this.x+(y.x-this.x)*l,this.y+(y.y-this.y)*l)},distanceFrom:function(y){var l=this.x-y.x,h=this.y-y.y;return Math.sqrt(l*l+h*h)},midPointFrom:function(y){return this.lerp(y)},min:function(y){return new C(Math.min(this.x,y.x),Math.min(this.y,y.y))},max:function(y){return new C(Math.max(this.x,y.x),Math.max(this.y,y.y))},toString:function(){return this.x+","+this.y},setXY:function(y,l){return this.x=y,this.y=l,this},setX:function(y){return this.x=y,this},setY:function(y){return this.y=y,this},setFromPoint:function(y){return this.x=y.x,this.y=y.y,this},swap:function(y){var l=this.x,h=this.y;this.x=y.x,this.y=y.y,y.x=l,y.y=h},clone:function(){return new C(this.x,this.y)}}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={});if(c.Intersection){c.warn("fabric.Intersection is already defined");return}function C(y){this.status=y,this.points=[]}c.Intersection=C,c.Intersection.prototype={constructor:C,appendPoint:function(y){return this.points.push(y),this},appendPoints:function(y){return this.points=this.points.concat(y),this}},c.Intersection.intersectLineLine=function(y,l,h,u){var p,D=(u.x-h.x)*(y.y-h.y)-(u.y-h.y)*(y.x-h.x),g=(l.x-y.x)*(y.y-h.y)-(l.y-y.y)*(y.x-h.x),x=(u.y-h.y)*(l.x-y.x)-(u.x-h.x)*(l.y-y.y);if(x!==0){var E=D/x,_=g/x;0<=E&&E<=1&&0<=_&&_<=1?(p=new C("Intersection"),p.appendPoint(new c.Point(y.x+E*(l.x-y.x),y.y+E*(l.y-y.y)))):p=new C}else D===0||g===0?p=new C("Coincident"):p=new C("Parallel");return p},c.Intersection.intersectLinePolygon=function(y,l,h){var u=new C,p=h.length,D,g,x,E;for(E=0;E<p;E++)D=h[E],g=h[(E+1)%p],x=C.intersectLineLine(y,l,D,g),u.appendPoints(x.points);return u.points.length>0&&(u.status="Intersection"),u},c.Intersection.intersectPolygonPolygon=function(y,l){var h=new C,u=y.length,p;for(p=0;p<u;p++){var D=y[p],g=y[(p+1)%u],x=C.intersectLinePolygon(D,g,l);h.appendPoints(x.points)}return h.points.length>0&&(h.status="Intersection"),h},c.Intersection.intersectPolygonRectangle=function(y,l,h){var u=l.min(h),p=l.max(h),D=new c.Point(p.x,u.y),g=new c.Point(u.x,p.y),x=C.intersectLinePolygon(u,D,y),E=C.intersectLinePolygon(D,p,y),_=C.intersectLinePolygon(p,g,y),O=C.intersectLinePolygon(g,u,y),F=new C;return F.appendPoints(x.points),F.appendPoints(E.points),F.appendPoints(_.points),F.appendPoints(O.points),F.points.length>0&&(F.status="Intersection"),F}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={});if(c.Color){c.warn("fabric.Color is already defined.");return}function C(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}c.Color=C,c.Color.prototype={_tryParsingColor:function(l){var h;l in C.colorNameMap&&(l=C.colorNameMap[l]),l==="transparent"&&(h=[255,255,255,0]),h||(h=C.sourceFromHex(l)),h||(h=C.sourceFromRgb(l)),h||(h=C.sourceFromHsl(l)),h||(h=[0,0,0,1]),h&&this.setSource(h)},_rgbToHsl:function(l,h,u){l/=255,h/=255,u/=255;var p,D,g,x=c.util.array.max([l,h,u]),E=c.util.array.min([l,h,u]);if(g=(x+E)/2,x===E)p=D=0;else{var _=x-E;switch(D=g>.5?_/(2-x-E):_/(x+E),x){case l:p=(h-u)/_+(h<u?6:0);break;case h:p=(u-l)/_+2;break;case u:p=(l-h)/_+4;break}p/=6}return[Math.round(p*360),Math.round(D*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),h=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+h[0]+","+h[1]+"%,"+h[2]+"%)"},toHsla:function(){var l=this.getSource(),h=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+h[0]+","+h[1]+"%,"+h[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),h,u,p;return h=l[0].toString(16),h=h.length===1?"0"+h:h,u=l[1].toString(16),u=u.length===1?"0"+u:u,p=l[2].toString(16),p=p.length===1?"0"+p:p,h.toUpperCase()+u.toUpperCase()+p.toUpperCase()},toHexa:function(){var l=this.getSource(),h;return h=Math.round(l[3]*255),h=h.toString(16),h=h.length===1?"0"+h:h,this.toHex()+h.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var h=this.getSource();return h[3]=l,this.setSource(h),this},toGrayscale:function(){var l=this.getSource(),h=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),u=l[3];return this.setSource([h,h,h,u]),this},toBlackWhite:function(l){var h=this.getSource(),u=(h[0]*.3+h[1]*.59+h[2]*.11).toFixed(0),p=h[3];return l=l||127,u=Number(u)<Number(l)?0:255,this.setSource([u,u,u,p]),this},overlayWith:function(l){l instanceof C||(l=new C(l));var h=[],u=this.getAlpha(),p=.5,D=this.getSource(),g=l.getSource(),x;for(x=0;x<3;x++)h.push(Math.round(D[x]*(1-p)+g[x]*p));return h[3]=u,this.setSource(h),this}},c.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,c.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,c.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,c.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function y(l,h,u){return u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?l+(h-l)*6*u:u<.5?h:u<.6666666666666666?l+(h-l)*(.6666666666666666-u)*6:l}c.Color.fromRgb=function(l){return C.fromSource(C.sourceFromRgb(l))},c.Color.sourceFromRgb=function(l){var h=l.match(C.reRGBa);if(h){var u=parseInt(h[1],10)/(/%$/.test(h[1])?100:1)*(/%$/.test(h[1])?255:1),p=parseInt(h[2],10)/(/%$/.test(h[2])?100:1)*(/%$/.test(h[2])?255:1),D=parseInt(h[3],10)/(/%$/.test(h[3])?100:1)*(/%$/.test(h[3])?255:1);return[parseInt(u,10),parseInt(p,10),parseInt(D,10),h[4]?parseFloat(h[4]):1]}},c.Color.fromRgba=C.fromRgb,c.Color.fromHsl=function(l){return C.fromSource(C.sourceFromHsl(l))},c.Color.sourceFromHsl=function(l){var h=l.match(C.reHSLa);if(h){var u=(parseFloat(h[1])%360+360)%360/360,p=parseFloat(h[2])/(/%$/.test(h[2])?100:1),D=parseFloat(h[3])/(/%$/.test(h[3])?100:1),g,x,E;if(p===0)g=x=E=D;else{var _=D<=.5?D*(p+1):D+p-D*p,O=D*2-_;g=y(O,_,u+.3333333333333333),x=y(O,_,u),E=y(O,_,u-.3333333333333333)}return[Math.round(g*255),Math.round(x*255),Math.round(E*255),h[4]?parseFloat(h[4]):1]}},c.Color.fromHsla=C.fromHsl,c.Color.fromHex=function(l){return C.fromSource(C.sourceFromHex(l))},c.Color.sourceFromHex=function(l){if(l.match(C.reHex)){var h=l.slice(l.indexOf("#")+1),u=h.length===3||h.length===4,p=h.length===8||h.length===4,D=u?h.charAt(0)+h.charAt(0):h.substring(0,2),g=u?h.charAt(1)+h.charAt(1):h.substring(2,4),x=u?h.charAt(2)+h.charAt(2):h.substring(4,6),E=p?u?h.charAt(3)+h.charAt(3):h.substring(6,8):"FF";return[parseInt(D,16),parseInt(g,16),parseInt(x,16),parseFloat((parseInt(E,16)/255).toFixed(2))]}},c.Color.fromSource=function(l){var h=new C;return h.setSource(l),h}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=["e","se","s","sw","w","nw","n","ne","e"],y=["ns","nesw","ew","nwse"],l={},h="left",u="top",p="right",D="bottom",g="center",x={top:D,bottom:u,left:p,right:h,center:g},E=c.util.radiansToDegrees,_=Math.sign||function(le){return(le>0)-(le<0)||+le};function O(le,ee){var re=le.angle+E(Math.atan2(ee.y,ee.x))+360;return Math.round(re%360/45)}function F(le,ee){var re=ee.transform.target,ce=re.canvas,fe=c.util.object.clone(ee);fe.target=re,ce&&ce.fire("object:"+le,fe),re.fire(le,ee)}function B(le,ee){var re=ee.canvas,ce=re.uniScaleKey,fe=le[ce];return re.uniformScaling&&!fe||!re.uniformScaling&&fe}function W(le){return le.originX===g&&le.originY===g}function H(le,ee,re){var ce=le.lockScalingX,fe=le.lockScalingY;return!!(ce&&fe||!ee&&(ce||fe)&&re||ce&&ee==="x"||fe&&ee==="y")}function Y(le,ee,re){var ce="not-allowed",fe=B(le,re),ye="";if(ee.x!==0&&ee.y===0?ye="x":ee.x===0&&ee.y!==0&&(ye="y"),H(re,ye,fe))return ce;var Ne=O(re,ee);return C[Ne]+"-resize"}function oe(le,ee,re){var ce="not-allowed";if(ee.x!==0&&re.lockSkewingY||ee.y!==0&&re.lockSkewingX)return ce;var fe=O(re,ee)%4;return y[fe]+"-resize"}function ne(le,ee,re){return le[re.canvas.altActionKey]?l.skewCursorStyleHandler(le,ee,re):l.scaleCursorStyleHandler(le,ee,re)}function be(le,ee,re){var ce=le[re.canvas.altActionKey];if(ee.x===0)return ce?"skewX":"scaleY";if(ee.y===0)return ce?"skewY":"scaleX"}function Z(le,ee,re){return re.lockRotation?"not-allowed":ee.cursorStyle}function me(le,ee,re,ce){return{e:le,transform:ee,pointer:{x:re,y:ce}}}function V(le){return function(ee,re,ce,fe){var ye=re.target,Ne=ye.getCenterPoint(),Ve=ye.translateToOriginPoint(Ne,re.originX,re.originY),He=le(ee,re,ce,fe);return ye.setPositionByOrigin(Ve,re.originX,re.originY),He}}function Le(le,ee){return function(re,ce,fe,ye){var Ne=ee(re,ce,fe,ye);return Ne&&F(le,me(re,ce,fe,ye)),Ne}}function Ce(le,ee,re,ce,fe){var ye=le.target,Ne=ye.controls[le.corner],Ve=ye.canvas.getZoom(),He=ye.padding/Ve,Ie=ye.toLocalPoint(new c.Point(ce,fe),ee,re);return Ie.x>=He&&(Ie.x-=He),Ie.x<=-He&&(Ie.x+=He),Ie.y>=He&&(Ie.y-=He),Ie.y<=He&&(Ie.y+=He),Ie.x-=Ne.offsetX,Ie.y-=Ne.offsetY,Ie}function ze(le){return le.flipX!==le.flipY}function te(le,ee,re,ce,fe){if(le[ee]!==0){var ye=le._getTransformedDimensions()[ce],Ne=fe/ye*le[re];le.set(re,Ne)}}function ae(le,ee,re,ce){var fe=ee.target,ye=fe._getTransformedDimensions(0,fe.skewY),Ne=Ce(ee,ee.originX,ee.originY,re,ce),Ve=Math.abs(Ne.x*2)-ye.x,He=fe.skewX,Ie;Ve<2?Ie=0:(Ie=E(Math.atan2(Ve/fe.scaleX,ye.y/fe.scaleY)),ee.originX===h&&ee.originY===D&&(Ie=-Ie),ee.originX===p&&ee.originY===u&&(Ie=-Ie),ze(fe)&&(Ie=-Ie));var We=He!==Ie;if(We){var Xe=fe._getTransformedDimensions().y;fe.set("skewX",Ie),te(fe,"skewY","scaleY","y",Xe)}return We}function q(le,ee,re,ce){var fe=ee.target,ye=fe._getTransformedDimensions(fe.skewX,0),Ne=Ce(ee,ee.originX,ee.originY,re,ce),Ve=Math.abs(Ne.y*2)-ye.y,He=fe.skewY,Ie;Ve<2?Ie=0:(Ie=E(Math.atan2(Ve/fe.scaleY,ye.x/fe.scaleX)),ee.originX===h&&ee.originY===D&&(Ie=-Ie),ee.originX===p&&ee.originY===u&&(Ie=-Ie),ze(fe)&&(Ie=-Ie));var We=He!==Ie;if(We){var Xe=fe._getTransformedDimensions().x;fe.set("skewY",Ie),te(fe,"skewX","scaleX","x",Xe)}return We}function $(le,ee,re,ce){var fe=ee.target,ye=fe.skewX,Ne,Ve=ee.originY;if(fe.lockSkewingX)return!1;if(ye===0){var He=Ce(ee,g,g,re,ce);He.x>0?Ne=h:Ne=p}else ye>0&&(Ne=Ve===u?h:p),ye<0&&(Ne=Ve===u?p:h),ze(fe)&&(Ne=Ne===h?p:h);ee.originX=Ne;var Ie=Le("skewing",V(ae));return Ie(le,ee,re,ce)}function de(le,ee,re,ce){var fe=ee.target,ye=fe.skewY,Ne,Ve=ee.originX;if(fe.lockSkewingY)return!1;if(ye===0){var He=Ce(ee,g,g,re,ce);He.y>0?Ne=u:Ne=D}else ye>0&&(Ne=Ve===h?u:D),ye<0&&(Ne=Ve===h?D:u),ze(fe)&&(Ne=Ne===u?D:u);ee.originY=Ne;var Ie=Le("skewing",V(q));return Ie(le,ee,re,ce)}function G(le,ee,re,ce){var fe=ee,ye=fe.target,Ne=ye.translateToOriginPoint(ye.getCenterPoint(),fe.originX,fe.originY);if(ye.lockRotation)return!1;var Ve=Math.atan2(fe.ey-Ne.y,fe.ex-Ne.x),He=Math.atan2(ce-Ne.y,re-Ne.x),Ie=E(He-Ve+fe.theta),We=!0;if(ye.snapAngle>0){var Xe=ye.snapAngle,rt=ye.snapThreshold||Xe,Lt=Math.ceil(Ie/Xe)*Xe,xt=Math.floor(Ie/Xe)*Xe;Math.abs(Ie-xt)<rt?Ie=xt:Math.abs(Ie-Lt)<rt&&(Ie=Lt)}return Ie<0&&(Ie=360+Ie),Ie%=360,We=ye.angle!==Ie,ye.angle=Ie,We}function X(le,ee,re,ce,fe){fe=fe||{};var ye=ee.target,Ne=ye.lockScalingX,Ve=ye.lockScalingY,He=fe.by,Ie,We,Xe,rt,Lt=B(le,ye),xt=H(ye,He,Lt),wt,ct,_t=ee.gestureScale;if(xt)return!1;if(_t)We=ee.scaleX*_t,Xe=ee.scaleY*_t;else{if(Ie=Ce(ee,ee.originX,ee.originY,re,ce),wt=He!=="y"?_(Ie.x):1,ct=He!=="x"?_(Ie.y):1,ee.signX||(ee.signX=wt),ee.signY||(ee.signY=ct),ye.lockScalingFlip&&(ee.signX!==wt||ee.signY!==ct))return!1;if(rt=ye._getTransformedDimensions(),Lt&&!He){var Ut=Math.abs(Ie.x)+Math.abs(Ie.y),tn=ee.original,_e=Math.abs(rt.x*tn.scaleX/ye.scaleX)+Math.abs(rt.y*tn.scaleY/ye.scaleY),Ae=Ut/_e;We=tn.scaleX*Ae,Xe=tn.scaleY*Ae}else We=Math.abs(Ie.x*ye.scaleX/rt.x),Xe=Math.abs(Ie.y*ye.scaleY/rt.y);W(ee)&&(We*=2,Xe*=2),ee.signX!==wt&&He!=="y"&&(ee.originX=x[ee.originX],We*=-1,ee.signX=wt),ee.signY!==ct&&He!=="x"&&(ee.originY=x[ee.originY],Xe*=-1,ee.signY=ct)}var Be=ye.scaleX,Ue=ye.scaleY;return He?(He==="x"&&ye.set("scaleX",We),He==="y"&&ye.set("scaleY",Xe)):(!Ne&&ye.set("scaleX",We),!Ve&&ye.set("scaleY",Xe)),Be!==ye.scaleX||Ue!==ye.scaleY}function J(le,ee,re,ce){return X(le,ee,re,ce)}function K(le,ee,re,ce){return X(le,ee,re,ce,{by:"x"})}function ve(le,ee,re,ce){return X(le,ee,re,ce,{by:"y"})}function he(le,ee,re,ce){return le[ee.target.canvas.altActionKey]?l.skewHandlerX(le,ee,re,ce):l.scalingY(le,ee,re,ce)}function Se(le,ee,re,ce){return le[ee.target.canvas.altActionKey]?l.skewHandlerY(le,ee,re,ce):l.scalingX(le,ee,re,ce)}function xe(le,ee,re,ce){var fe=ee.target,ye=Ce(ee,ee.originX,ee.originY,re,ce),Ne=fe.strokeWidth/(fe.strokeUniform?fe.scaleX:1),Ve=W(ee)?2:1,He=fe.width,Ie=Math.abs(ye.x*Ve/fe.scaleX)-Ne;return fe.set("width",Math.max(Ie,0)),He!==Ie}function De(le,ee,re,ce){var fe=ee.target,ye=re-ee.offsetX,Ne=ce-ee.offsetY,Ve=!fe.get("lockMovementX")&&fe.left!==ye,He=!fe.get("lockMovementY")&&fe.top!==Ne;return Ve&&fe.set("left",ye),He&&fe.set("top",Ne),(Ve||He)&&F("moving",me(le,ee,re,ce)),Ve||He}l.scaleCursorStyleHandler=Y,l.skewCursorStyleHandler=oe,l.scaleSkewCursorStyleHandler=ne,l.rotationWithSnapping=Le("rotating",V(G)),l.scalingEqually=Le("scaling",V(J)),l.scalingX=Le("scaling",V(K)),l.scalingY=Le("scaling",V(ve)),l.scalingYOrSkewingX=he,l.scalingXOrSkewingY=Se,l.changeWidth=Le("resizing",V(xe)),l.skewHandlerX=$,l.skewHandlerY=de,l.dragHandler=De,l.scaleOrSkewActionName=be,l.rotationStyleHandler=Z,l.fireEvent=F,l.wrapWithFixedAnchor=V,l.wrapWithFireEvent=Le,l.getLocalPoint=Ce,c.controlsUtils=l}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.degreesToRadians,y=c.controlsUtils;function l(u,p,D,g,x){g=g||{};var E=this.sizeX||g.cornerSize||x.cornerSize,_=this.sizeY||g.cornerSize||x.cornerSize,O=typeof g.transparentCorners<"u"?g.transparentCorners:x.transparentCorners,F=O?"stroke":"fill",B=!O&&(g.cornerStrokeColor||x.cornerStrokeColor),W=p,H=D,Y;u.save(),u.fillStyle=g.cornerColor||x.cornerColor,u.strokeStyle=g.cornerStrokeColor||x.cornerStrokeColor,E>_?(Y=E,u.scale(1,_/E),H=D*E/_):_>E?(Y=_,u.scale(E/_,1),W=p*_/E):Y=E,u.lineWidth=1,u.beginPath(),u.arc(W,H,Y/2,0,2*Math.PI,!1),u[F](),B&&u.stroke(),u.restore()}function h(u,p,D,g,x){g=g||{};var E=this.sizeX||g.cornerSize||x.cornerSize,_=this.sizeY||g.cornerSize||x.cornerSize,O=typeof g.transparentCorners<"u"?g.transparentCorners:x.transparentCorners,F=O?"stroke":"fill",B=!O&&(g.cornerStrokeColor||x.cornerStrokeColor),W=E/2,H=_/2;u.save(),u.fillStyle=g.cornerColor||x.cornerColor,u.strokeStyle=g.cornerStrokeColor||x.cornerStrokeColor,u.lineWidth=1,u.translate(p,D),u.rotate(C(x.angle)),u[F+"Rect"](-W,-H,E,_),B&&u.strokeRect(-W,-H,E,_),u.restore()}y.renderCircleControl=l,y.renderSquareControl=h}(I),function(b){"use strict";var c=b.fabric||(b.fabric={});function C(y){for(var l in y)this[l]=y[l]}c.Control=C,c.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(y,l){return l.cursorStyle},getActionName:function(y,l){return l.actionName},getVisibility:function(y,l){var h=y._controlsVisibility;return h&&typeof h[l]<"u"?h[l]:this.visible},setVisibility:function(y){this.visible=y},positionHandler:function(y,l){var h=c.util.transformPoint({x:this.x*y.x+this.offsetX,y:this.y*y.y+this.offsetY},l);return h},calcCornerCoords:function(y,l,h,u,p){var D,g,x,E,_=p?this.touchSizeX:this.sizeX,O=p?this.touchSizeY:this.sizeY;if(_&&O&&_!==O){var F=Math.atan2(O,_),B=Math.sqrt(_*_+O*O)/2,W=F-c.util.degreesToRadians(y),H=Math.PI/2-F-c.util.degreesToRadians(y);D=B*c.util.cos(W),g=B*c.util.sin(W),x=B*c.util.cos(H),E=B*c.util.sin(H)}else{var Y=_&&O?_:l;B=Y*.7071067812;var W=c.util.degreesToRadians(45-y);D=x=B*c.util.cos(W),g=E=B*c.util.sin(W)}return{tl:{x:h-E,y:u-x},tr:{x:h+D,y:u-g},bl:{x:h-D,y:u+g},br:{x:h+E,y:u+x}}},render:function(y,l,h,u,p){switch(u=u||{},u.cornerStyle||p.cornerStyle){case"circle":c.controlsUtils.renderCircleControl.call(this,y,l,h,u,p);break;default:c.controlsUtils.renderSquareControl.call(this,y,l,h,u,p)}}}}(I),function(){function b(h,u){var p=h.getAttribute("style"),D=h.getAttribute("offset")||0,g,x,E,_;if(D=parseFloat(D)/(/%$/.test(D)?100:1),D=D<0?0:D>1?1:D,p){var O=p.split(/\s*;\s*/);for(O[O.length-1]===""&&O.pop(),_=O.length;_--;){var F=O[_].split(/\s*:\s*/),B=F[0].trim(),W=F[1].trim();B==="stop-color"?g=W:B==="stop-opacity"&&(E=W)}}return g||(g=h.getAttribute("stop-color")||"rgb(0,0,0)"),E||(E=h.getAttribute("stop-opacity")),g=new a.Color(g),x=g.getAlpha(),E=isNaN(parseFloat(E))?1:parseFloat(E),E*=x*u,{offset:D,color:g.toRgb(),opacity:E}}function c(h){return{x1:h.getAttribute("x1")||0,y1:h.getAttribute("y1")||0,x2:h.getAttribute("x2")||"100%",y2:h.getAttribute("y2")||0}}function C(h){return{x1:h.getAttribute("fx")||h.getAttribute("cx")||"50%",y1:h.getAttribute("fy")||h.getAttribute("cy")||"50%",r1:0,x2:h.getAttribute("cx")||"50%",y2:h.getAttribute("cy")||"50%",r2:h.getAttribute("r")||"50%"}}var y=a.util.object.clone;a.Gradient=a.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(h){h||(h={}),h.coords||(h.coords={});var u,p=this;Object.keys(h).forEach(function(D){p[D]=h[D]}),this.id?this.id+="_"+a.Object.__uid++:this.id=a.Object.__uid++,u={x1:h.coords.x1||0,y1:h.coords.y1||0,x2:h.coords.x2||0,y2:h.coords.y2||0},this.type==="radial"&&(u.r1=h.coords.r1||0,u.r2=h.coords.r2||0),this.coords=u,this.colorStops=h.colorStops.slice()},addColorStop:function(h){for(var u in h){var p=new a.Color(h[u]);this.colorStops.push({offset:parseFloat(u),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(h){var u={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return a.util.populateWithProperties(this,u,h),u},toSVG:function(h,x){var p=y(this.coords,!0),D,g,x=x||{},E,_,O=y(this.colorStops,!0),F=p.r1>p.r2,B=this.gradientTransform?this.gradientTransform.concat():a.iMatrix.concat(),W=-this.offsetX,H=-this.offsetY,Y=!!x.additionalTransform,oe=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(O.sort(function(V,Le){return V.offset-Le.offset}),oe==="objectBoundingBox"?(W/=h.width,H/=h.height):(W+=h.width/2,H+=h.height/2),h.type==="path"&&this.gradientUnits!=="percentage"&&(W-=h.pathOffset.x,H-=h.pathOffset.y),B[4]-=W,B[5]-=H,_='id="SVGID_'+this.id+'" gradientUnits="'+oe+'"',_+=' gradientTransform="'+(Y?x.additionalTransform+" ":"")+a.util.matrixToSVG(B)+'" ',this.type==="linear"?E=["<linearGradient ",_,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(E=["<radialGradient ",_,' cx="',F?p.x1:p.x2,'" cy="',F?p.y1:p.y2,'" r="',F?p.r1:p.r2,'" fx="',F?p.x2:p.x1,'" fy="',F?p.y2:p.y1,`">
`]),this.type==="radial"){if(F)for(O=O.concat(),O.reverse(),D=0,g=O.length;D<g;D++)O[D].offset=1-O[D].offset;var ne=Math.min(p.r1,p.r2);if(ne>0){var be=Math.max(p.r1,p.r2),Z=ne/be;for(D=0,g=O.length;D<g;D++)O[D].offset+=Z*(1-O[D].offset)}}for(D=0,g=O.length;D<g;D++){var me=O[D];E.push("<stop ",'offset="',me.offset*100+"%",'" style="stop-color:',me.color,typeof me.opacity<"u"?";stop-opacity: "+me.opacity:";",`"/>
`)}return E.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),E.join("")},toLive:function(h){var u,p=a.util.object.clone(this.coords),D,g;if(this.type){for(this.type==="linear"?u=h.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(u=h.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),D=0,g=this.colorStops.length;D<g;D++){var x=this.colorStops[D].color,E=this.colorStops[D].opacity,_=this.colorStops[D].offset;typeof E<"u"&&(x=new a.Color(x).setAlpha(E).toRgba()),u.addColorStop(_,x)}return u}}}),a.util.object.extend(a.Gradient,{fromElement:function(h,u,p,D){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var x=h.getElementsByTagName("stop"),E,_=h.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",O=h.getAttribute("gradientTransform")||"",F=[],B,W,H=0,Y=0,oe;for(h.nodeName==="linearGradient"||h.nodeName==="LINEARGRADIENT"?(E="linear",B=c(h)):(E="radial",B=C(h)),W=x.length;W--;)F.push(b(x[W],g));oe=a.parseTransformAttribute(O),l(u,B,D,_),_==="pixels"&&(H=-u.left,Y=-u.top);var ne=new a.Gradient({id:h.getAttribute("id"),type:E,coords:B,colorStops:F,gradientUnits:_,gradientTransform:oe,offsetX:H,offsetY:Y});return ne}});function l(h,u,p,D){var g,x;Object.keys(u).forEach(function(E){g=u[E],g==="Infinity"?x=1:g==="-Infinity"?x=0:(x=parseFloat(u[E],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(x*=.01,D==="pixels"&&((E==="x1"||E==="x2"||E==="r2")&&(x*=p.viewBoxWidth||p.width),(E==="y1"||E==="y2")&&(x*=p.viewBoxHeight||p.height)))),u[E]=x})}}(),function(){"use strict";var b=a.util.toFixed;a.Pattern=a.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(c,C){if(c||(c={}),this.id=a.Object.__uid++,this.setOptions(c),!c.source||c.source&&typeof c.source!="string"){C&&C(this);return}else{var y=this;this.source=a.util.createImage(),a.util.loadImage(c.source,function(l,h){y.source=l,C&&C(y,h)},null,this.crossOrigin)}},toObject:function(c){var C=a.Object.NUM_FRACTION_DIGITS,y,l;return typeof this.source.src=="string"?y=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(y=this.source.toDataURL()),l={type:"pattern",source:y,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:b(this.offsetX,C),offsetY:b(this.offsetY,C),patternTransform:this.patternTransform?this.patternTransform.concat():null},a.util.populateWithProperties(this,l,c),l},toSVG:function(c){var C=typeof this.source=="function"?this.source():this.source,y=C.width/c.width,l=C.height/c.height,h=this.offsetX/c.width,u=this.offsetY/c.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,u&&(l+=Math.abs(u))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(y=1,h&&(y+=Math.abs(h))),C.src?p=C.src:C.toDataURL&&(p=C.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+h+'" y="'+u+'" width="'+y+'" height="'+l+`">
<image x="0" y="0" width="`+C.width+'" height="'+C.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(c){for(var C in c)this[C]=c[C]},toLive:function(c){var C=this.source;return!C||typeof C.src<"u"&&(!C.complete||C.naturalWidth===0||C.naturalHeight===0)?"":c.createPattern(C,this.repeat)}})}(),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.toFixed;if(c.Shadow){c.warn("fabric.Shadow is already defined.");return}c.Shadow=c.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(y){typeof y=="string"&&(y=this._parseShadow(y));for(var l in y)this[l]=y[l];this.id=c.Object.__uid++},_parseShadow:function(y){var l=y.trim(),h=c.Shadow.reOffsetsAndBlur.exec(l)||[],u=l.replace(c.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:u.trim(),offsetX:parseFloat(h[1],10)||0,offsetY:parseFloat(h[2],10)||0,blur:parseFloat(h[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(y){var l=40,h=40,u=c.Object.NUM_FRACTION_DIGITS,p=c.util.rotateVector({x:this.offsetX,y:this.offsetY},c.util.degreesToRadians(-y.angle)),D=20,g=new c.Color(this.color);return y.width&&y.height&&(l=C((Math.abs(p.x)+this.blur)/y.width,u)*100+D,h=C((Math.abs(p.y)+this.blur)/y.height,u)*100+D),y.flipX&&(p.x*=-1),y.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+h+'%" height="'+(100+2*h)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+C(this.blur?this.blur/2:0,u)+`"></feGaussianBlur>
	<feOffset dx="`+C(p.x,u)+'" dy="'+C(p.y,u)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var y={},l=c.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(h){this[h]!==l[h]&&(y[h]=this[h])},this),y}}),c.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(I),function(){"use strict";if(a.StaticCanvas){a.warn("fabric.StaticCanvas is already defined.");return}var b=a.util.object.extend,c=a.util.getElementOffset,C=a.util.removeFromArray,y=a.util.toFixed,l=a.util.transformPoint,h=a.util.invertTransform,u=a.util.getNodeCanvas,p=a.util.createCanvasElement,D=new Error("Could not initialize `canvas` element");a.StaticCanvas=a.util.createClass(a.CommonMethods,{initialize:function(g,x){x||(x={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,x)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:a.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,x){var E=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(x),this.interactive||this._initRetinaScaling(),x.overlayImage&&this.setOverlayImage(x.overlayImage,E),x.backgroundImage&&this.setBackgroundImage(x.backgroundImage,E),x.backgroundColor&&this.setBackgroundColor(x.backgroundColor,E),x.overlayColor&&this.setOverlayColor(x.overlayColor,E),this.calcOffset()},_isRetinaScaling:function(){return a.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?a.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=a.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,x,E){x.setAttribute("width",this.width*g),x.setAttribute("height",this.height*g),E.scale(g,g)},calcOffset:function(){return this._offset=c(this.lowerCanvasEl),this},setOverlayImage:function(g,x,E){return this.__setBgOverlayImage("overlayImage",g,x,E)},setBackgroundImage:function(g,x,E){return this.__setBgOverlayImage("backgroundImage",g,x,E)},setOverlayColor:function(g,x){return this.__setBgOverlayColor("overlayColor",g,x)},setBackgroundColor:function(g,x){return this.__setBgOverlayColor("backgroundColor",g,x)},__setBgOverlayImage:function(g,x,E,_){return typeof x=="string"?a.util.loadImage(x,function(O,F){if(O){var B=new a.Image(O,_);this[g]=B,B.canvas=this}E&&E(O,F)},this,_&&_.crossOrigin):(_&&x.setOptions(_),this[g]=x,x&&(x.canvas=this),E&&E(x,!1)),this},__setBgOverlayColor:function(g,x,E){return this[g]=x,this._initGradient(x,g),this._initPattern(x,g,E),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw D;return g},_initOptions:function(g){var x=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(x.width,10)||0,this.height=this.height||parseInt(x.height,10)||0,this.lowerCanvasEl.style&&(x.width=this.width,x.height=this.height,x.style.width=this.width+"px",x.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=a.util.getById(g)||this._createCanvasElement(),a.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,x){return this.setDimensions({width:g},x)},setHeight:function(g,x){return this.setDimensions({height:g},x)},setDimensions:function(g,x){var E;x=x||{};for(var _ in g)E=g[_],x.cssOnly||(this._setBackstoreDimension(_,g[_]),E+="px",this.hasLostContext=!0),x.backstoreOnly||this._setCssDimension(_,E);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),x.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,x){return this.lowerCanvasEl[g]=x,this.upperCanvasEl&&(this.upperCanvasEl[g]=x),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=x),this[g]=x,this},_setCssDimension:function(g,x){return this.lowerCanvasEl.style[g]=x,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=x),this.wrapperEl&&(this.wrapperEl.style[g]=x),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var x=this._activeObject,E=this.backgroundImage,_=this.overlayImage,O,F,B;for(this.viewportTransform=g,F=0,B=this._objects.length;F<B;F++)O=this._objects[F],O.group||O.setCoords(!0);return x&&x.setCoords(),E&&E.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,x){var E=g,_=this.viewportTransform.slice(0);g=l(g,h(this.viewportTransform)),_[0]=x,_[3]=x;var O=l(g,_);return _[4]+=E.x-O.x,_[5]+=E.y-O.y,this.setViewportTransform(_)},setZoom:function(g){return this.zoomToPoint(new a.Point(0,0),g),this},absolutePan:function(g){var x=this.viewportTransform.slice(0);return x[4]=-g.x,x[5]=-g.y,this.setViewportTransform(x)},relativePan:function(g){return this.absolutePan(new a.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=a.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},x=this.width,E=this.height,_=h(this.viewportTransform);return g.tl=l({x:0,y:0},_),g.br=l({x,y:E},_),g.tr=new a.Point(g.br.x,g.tl.y),g.bl=new a.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(a.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,x){var E=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),a.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._renderObjects(g,x),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var x=this.viewportTransform,E=this.clipPath;g.save(),g.transform(x[0],x[1],x[2],x[3],x[4],x[5]),g.globalCompositeOperation="destination-in",E.transform(g),g.scale(1/E.zoomX,1/E.zoomY),g.drawImage(E._cacheCanvas,-E.cacheTranslationX,-E.cacheTranslationY),g.restore()},_renderObjects:function(g,x){var E,_;for(E=0,_=x.length;E<_;++E)x[E]&&x[E].render(g)},_renderBackgroundOrOverlay:function(g,x){var E=this[x+"Color"],_=this[x+"Image"],O=this.viewportTransform,F=this[x+"Vpt"];if(!(!E&&!_)){if(E){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=E.toLive?E.toLive(g,this):E,F&&g.transform(O[0],O[1],O[2],O[3],O[4],O[5]),g.transform(1,0,0,1,E.offsetX||0,E.offsetY||0);var B=E.gradientTransform||E.patternTransform;B&&g.transform(B[0],B[1],B[2],B[3],B[4],B[5]),g.fill(),g.restore()}_&&(g.save(),F&&g.transform(O[0],O[1],O[2],O[3],O[4],O[5]),_.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(g){return this._centerObject(g,new a.Point(this.getCenter().left,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new a.Point(g.getCenterPoint().x,this.getCenter().top))},centerObject:function(g){var x=this.getCenter();return this._centerObject(g,new a.Point(x.left,x.top))},viewportCenterObject:function(g){var x=this.getVpCenter();return this._centerObject(g,x)},viewportCenterObjectH:function(g){var x=this.getVpCenter();return this._centerObject(g,new a.Point(x.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var x=this.getVpCenter();return this._centerObject(g,new a.Point(g.getCenterPoint().x,x.y))},getVpCenter:function(){var g=this.getCenter(),x=h(this.viewportTransform);return l({x:g.left,y:g.top},x)},_centerObject:function(g,x){return g.setPositionByOrigin(x,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,x){var E=this.clipPath,_={version:a.version,objects:this._toObjects(g,x)};return E&&!E.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,g,x)),b(_,this.__serializeBgOverlay(g,x)),a.util.populateWithProperties(this,_,x),_},_toObjects:function(g,x){return this._objects.filter(function(E){return!E.excludeFromExport}).map(function(E){return this._toObject(E,g,x)},this)},_toObject:function(g,x,E){var _;this.includeDefaultValues||(_=g.includeDefaultValues,g.includeDefaultValues=!1);var O=g[x](E);return this.includeDefaultValues||(g.includeDefaultValues=_),O},__serializeBgOverlay:function(g,x){var E={},_=this.backgroundImage,O=this.overlayImage,F=this.backgroundColor,B=this.overlayColor;return F&&F.toObject?F.excludeFromExport||(E.background=F.toObject(x)):F&&(E.background=F),B&&B.toObject?B.excludeFromExport||(E.overlay=B.toObject(x)):B&&(E.overlay=B),_&&!_.excludeFromExport&&(E.backgroundImage=this._toObject(_,g,x)),O&&!O.excludeFromExport&&(E.overlayImage=this._toObject(O,g,x)),E},svgViewportTransformation:!0,toSVG:function(g,x){g||(g={}),g.reviver=x;var E=[];return this._setSVGPreamble(E,g),this._setSVGHeader(E,g),this.clipPath&&E.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(E,"background"),this._setSVGBgOverlayImage(E,"backgroundImage",x),this._setSVGObjects(E,x),this.clipPath&&E.push(`</g>
`),this._setSVGBgOverlayColor(E,"overlay"),this._setSVGBgOverlayImage(E,"overlayImage",x),E.push("</svg>"),E.join("")},_setSVGPreamble:function(g,x){x.suppressPreamble||g.push('<?xml version="1.0" encoding="',x.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,x){var E=x.width||this.width,_=x.height||this.height,O,F='viewBox="0 0 '+this.width+" "+this.height+'" ',B=a.Object.NUM_FRACTION_DIGITS;x.viewBox?F='viewBox="'+x.viewBox.x+" "+x.viewBox.y+" "+x.viewBox.width+" "+x.viewBox.height+'" ':this.svgViewportTransformation&&(O=this.viewportTransform,F='viewBox="'+y(-O[4]/O[0],B)+" "+y(-O[5]/O[3],B)+" "+y(this.width/O[0],B)+" "+y(this.height/O[3],B)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',E,'" ','height="',_,'" ',F,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",a.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(x),`</defs>
`)},createSVGClipPathMarkup:function(g){var x=this.clipPath;return x?(x.clipPathId="CLIPPATH_"+a.Object.__uid++,'<clipPath id="'+x.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,x=["background","overlay"].map(function(E){var _=g[E+"Color"];if(_&&_.toLive){var O=g[E+"Vpt"],F=g.viewportTransform,B={width:g.width/(O?F[0]:1),height:g.height/(O?F[3]:1)};return _.toSVG(B,{additionalTransform:O?a.util.matrixToSVG(F):""})}});return x.join("")},createSVGFontFacesMarkup:function(){var g="",x={},E,_,O,F,B,W,H,Y,oe,ne=a.fontPaths,be=[];for(this._objects.forEach(function me(V){be.push(V),V._objects&&V._objects.forEach(me)}),Y=0,oe=be.length;Y<oe;Y++)if(E=be[Y],_=E.fontFamily,!(E.type.indexOf("text")===-1||x[_]||!ne[_])&&(x[_]=!0,!!E.styles)){O=E.styles;for(B in O){F=O[B];for(H in F)W=F[H],_=W.fontFamily,!x[_]&&ne[_]&&(x[_]=!0)}}for(var Z in x)g+=[`		@font-face {
`,"			font-family: '",Z,`';
`,"			src: url('",ne[Z],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,x){var E,_,O,F=this._objects;for(_=0,O=F.length;_<O;_++)E=F[_],!E.excludeFromExport&&this._setSVGObject(g,E,x)},_setSVGObject:function(g,x,E){g.push(x.toSVG(E))},_setSVGBgOverlayImage:function(g,x,E){this[x]&&!this[x].excludeFromExport&&this[x].toSVG&&g.push(this[x].toSVG(E))},_setSVGBgOverlayColor:function(g,x){var E=this[x+"Color"],_=this.viewportTransform,O=this.width,F=this.height;if(E)if(E.toLive){var B=E.repeat,W=a.util.invertTransform(_),H=this[x+"Vpt"],Y=H?a.util.matrixToSVG(W):"";g.push('<rect transform="'+Y+" translate(",O/2,",",F/2,')"',' x="',E.offsetX-O/2,'" y="',E.offsetY-F/2,'" ','width="',B==="repeat-y"||B==="no-repeat"?E.source.width:O,'" height="',B==="repeat-x"||B==="no-repeat"?E.source.height:F,'" fill="url(#SVGID_'+E.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',E,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var x=this._activeObject,E,_,O;if(g===x&&g.type==="activeSelection")for(O=x._objects,E=O.length;E--;)_=O[E],C(this._objects,_),this._objects.unshift(_);else C(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var x=this._activeObject,E,_,O;if(g===x&&g.type==="activeSelection")for(O=x._objects,E=0;E<O.length;E++)_=O[E],C(this._objects,_),this._objects.push(_);else C(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,x){if(!g)return this;var E=this._activeObject,_,O,F,B,W,H=0;if(g===E&&g.type==="activeSelection")for(W=E._objects,_=0;_<W.length;_++)O=W[_],F=this._objects.indexOf(O),F>0+H&&(B=F-1,C(this._objects,O),this._objects.splice(B,0,O)),H++;else F=this._objects.indexOf(g),F!==0&&(B=this._findNewLowerIndex(g,F,x),C(this._objects,g),this._objects.splice(B,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,x,E){var _,O;if(E)for(_=x,O=x-1;O>=0;--O){var F=g.intersectsWithObject(this._objects[O])||g.isContainedWithinObject(this._objects[O])||this._objects[O].isContainedWithinObject(g);if(F){_=O;break}}else _=x-1;return _},bringForward:function(g,x){if(!g)return this;var E=this._activeObject,_,O,F,B,W,H=0;if(g===E&&g.type==="activeSelection")for(W=E._objects,_=W.length;_--;)O=W[_],F=this._objects.indexOf(O),F<this._objects.length-1-H&&(B=F+1,C(this._objects,O),this._objects.splice(B,0,O)),H++;else F=this._objects.indexOf(g),F!==this._objects.length-1&&(B=this._findNewUpperIndex(g,F,x),C(this._objects,g),this._objects.splice(B,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,x,E){var _,O,F;if(E)for(_=x,O=x+1,F=this._objects.length;O<F;++O){var B=g.intersectsWithObject(this._objects[O])||g.isContainedWithinObject(this._objects[O])||this._objects[O].isContainedWithinObject(g);if(B){_=O;break}}else _=x+1;return _},moveTo:function(g,x){return C(this._objects,g),this._objects.splice(x,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(a.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),a.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),b(a.StaticCanvas.prototype,a.Observable),b(a.StaticCanvas.prototype,a.Collection),b(a.StaticCanvas.prototype,a.DataURLExporter),b(a.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var x=p();if(!x||!x.getContext)return null;var E=x.getContext("2d");if(!E)return null;switch(g){case"setLineDash":return typeof E.setLineDash<"u";default:return null}}}),a.StaticCanvas.prototype.toJSON=a.StaticCanvas.prototype.toObject,a.isLikelyNode&&(a.StaticCanvas.prototype.createPNGStream=function(){var g=u(this.lowerCanvasEl);return g&&g.createPNGStream()},a.StaticCanvas.prototype.createJPEGStream=function(g){var x=u(this.lowerCanvasEl);return x&&x.createJPEGStream(g)})}(),a.BaseBrush=a.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var b=this.canvas.contextTop;b.strokeStyle=this.color,b.lineWidth=this.width,b.lineCap=this.strokeLineCap,b.miterLimit=this.strokeMiterLimit,b.lineJoin=this.strokeLineJoin,b.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(b){var c=this.canvas.viewportTransform;b.save(),b.transform(c[0],c[1],c[2],c[3],c[4],c[5])},_setShadow:function(){if(this.shadow){var b=this.canvas,c=this.shadow,C=b.contextTop,y=b.getZoom();b&&b._isRetinaScaling()&&(y*=a.devicePixelRatio),C.shadowColor=c.color,C.shadowBlur=c.blur*y,C.shadowOffsetX=c.offsetX*y,C.shadowOffsetY=c.offsetY*y}},needsFullRender:function(){var b=new a.Color(this.color);return b.getAlpha()<1||!!this.shadow},_resetShadow:function(){var b=this.canvas.contextTop;b.shadowColor="",b.shadowBlur=b.shadowOffsetX=b.shadowOffsetY=0},_isOutSideCanvas:function(b){return b.x<0||b.x>this.canvas.getWidth()||b.y<0||b.y>this.canvas.getHeight()}}),function(){a.PencilBrush=a.util.createClass(a.BaseBrush,{decimate:.4,initialize:function(b){this.canvas=b,this._points=[]},_drawSegment:function(b,c,C){var y=c.midPointFrom(C);return b.quadraticCurveTo(c.x,c.y,y.x,y.y),y},onMouseDown:function(b,c){this.canvas._isMainEvent(c.e)&&(this._prepareForDrawing(b),this._captureDrawingPath(b),this._render())},onMouseMove:function(b,c){if(this.canvas._isMainEvent(c.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(b))&&this._captureDrawingPath(b)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var C=this._points,y=C.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,C[y-2],C[y-1],!0),l.stroke(),l.restore()}},onMouseUp:function(b){return this.canvas._isMainEvent(b.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(b){var c=new a.Point(b.x,b.y);this._reset(),this._addPoint(c),this.canvas.contextTop.moveTo(c.x,c.y)},_addPoint:function(b){return this._points.length>1&&b.eq(this._points[this._points.length-1])?!1:(this._points.push(b),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(b){var c=new a.Point(b.x,b.y);return this._addPoint(c)},_render:function(){var b=this.canvas.contextTop,c,C,y=this._points[0],l=this._points[1];if(this._saveAndTransform(b),b.beginPath(),this._points.length===2&&y.x===l.x&&y.y===l.y){var h=this.width/1e3;y=new a.Point(y.x,y.y),l=new a.Point(l.x,l.y),y.x-=h,l.x+=h}for(b.moveTo(y.x,y.y),c=1,C=this._points.length;c<C;c++)this._drawSegment(b,y,l),y=this._points[c],l=this._points[c+1];b.lineTo(y.x,y.y),b.stroke(),b.restore()},convertPointsToSVGPath:function(b){var c=this.width/1e3;return a.util.getSmoothPathFromPoints(b,c)},_isEmptySVGPath:function(b){var c=a.util.joinPath(b);return c==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(b){var c=new a.Path(b,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,c.shadow=new a.Shadow(this.shadow)),c},decimatePoints:function(b,c){if(b.length<=2)return b;var C=this.canvas.getZoom(),y=Math.pow(c/C,2),l,h=b.length-1,u=b[0],p=[u],D;for(l=1;l<h-1;l++)D=Math.pow(u.x-b[l].x,2)+Math.pow(u.y-b[l].y,2),D>=y&&(u=b[l],p.push(u));return p.push(b[h]),p},_finalizeAndAddPath:function(){var b=this.canvas.contextTop;b.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var c=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(c)){this.canvas.requestRenderAll();return}var C=this.createPath(c);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:C}),this.canvas.add(C),this.canvas.requestRenderAll(),C.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:C})}})}(),a.CircleBrush=a.util.createClass(a.BaseBrush,{width:10,initialize:function(b){this.canvas=b,this.points=[]},drawDot:function(b){var c=this.addPoint(b),C=this.canvas.contextTop;this._saveAndTransform(C),this.dot(C,c),C.restore()},dot:function(b,c){b.fillStyle=c.fill,b.beginPath(),b.arc(c.x,c.y,c.radius,0,Math.PI*2,!1),b.closePath(),b.fill()},onMouseDown:function(b){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(b)},_render:function(){var b=this.canvas.contextTop,c,C,y=this.points;for(this._saveAndTransform(b),c=0,C=y.length;c<C;c++)this.dot(b,y[c]);b.restore()},onMouseMove:function(b){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(b)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(b),this._render()):this.drawDot(b))},onMouseUp:function(){var b=this.canvas.renderOnAddRemove,c,C;this.canvas.renderOnAddRemove=!1;var y=[];for(c=0,C=this.points.length;c<C;c++){var l=this.points[c],h=new a.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(h.shadow=new a.Shadow(this.shadow)),y.push(h)}var u=new a.Group(y);u.canvas=this.canvas,this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.fire("path:created",{path:u}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=b,this.canvas.requestRenderAll()},addPoint:function(b){var c=new a.Point(b.x,b.y),C=a.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,y=new a.Color(this.color).setAlpha(a.util.getRandomInt(0,100)/100).toRgba();return c.radius=C,c.fill=y,this.points.push(c),c}}),a.SprayBrush=a.util.createClass(a.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(b){this.canvas=b,this.sprayChunks=[]},onMouseDown:function(b){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(b),this.render(this.sprayChunkPoints)},onMouseMove:function(b){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(b)||(this.addSprayChunk(b),this.render(this.sprayChunkPoints))},onMouseUp:function(){var b=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var c=[],C=0,y=this.sprayChunks.length;C<y;C++)for(var l=this.sprayChunks[C],h=0,u=l.length;h<u;h++){var p=new a.Rect({width:l[h].width,height:l[h].width,left:l[h].x+1,top:l[h].y+1,originX:"center",originY:"center",fill:this.color});c.push(p)}this.optimizeOverlapping&&(c=this._getOptimizedRects(c));var D=new a.Group(c);this.shadow&&D.set("shadow",new a.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:D}),this.canvas.add(D),this.canvas.fire("path:created",{path:D}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=b,this.canvas.requestRenderAll()},_getOptimizedRects:function(b){var c={},C,y,l;for(y=0,l=b.length;y<l;y++)C=b[y].left+""+b[y].top,c[C]||(c[C]=b[y]);var h=[];for(C in c)h.push(c[C]);return h},render:function(b){var c=this.canvas.contextTop,C,y;for(c.fillStyle=this.color,this._saveAndTransform(c),C=0,y=b.length;C<y;C++){var l=b[C];typeof l.opacity<"u"&&(c.globalAlpha=l.opacity),c.fillRect(l.x,l.y,l.width,l.width)}c.restore()},_render:function(){var b=this.canvas.contextTop,c,C;for(b.fillStyle=this.color,this._saveAndTransform(b),c=0,C=this.sprayChunks.length;c<C;c++)this.render(this.sprayChunks[c]);b.restore()},addSprayChunk:function(b){this.sprayChunkPoints=[];var c,C,y,l=this.width/2,h;for(h=0;h<this.density;h++){c=a.util.getRandomInt(b.x-l,b.x+l),C=a.util.getRandomInt(b.y-l,b.y+l),this.dotWidthVariance?y=a.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):y=this.dotWidth;var u=new a.Point(c,C);u.width=y,this.randomOpacity&&(u.opacity=a.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(u)}this.sprayChunks.push(this.sprayChunkPoints)}}),a.PatternBrush=a.util.createClass(a.PencilBrush,{getPatternSrc:function(){var b=20,c=5,C=a.util.createCanvasElement(),y=C.getContext("2d");return C.width=C.height=b+c,y.fillStyle=this.color,y.beginPath(),y.arc(b/2,b/2,b/2,0,Math.PI*2,!1),y.closePath(),y.fill(),C},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(b){var c=this.callSuper("createPath",b),C=c._getLeftTopCoords().scalarAdd(c.strokeWidth/2);return c.stroke=new a.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-C.x,offsetY:-C.y}),c}}),function(){var b=a.util.getPointer,c=a.util.degreesToRadians,C=a.util.isTouchEvent;a.Canvas=a.util.createClass(a.StaticCanvas,{initialize:function(l,h){h||(h={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,h),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=a.PencilBrush&&new a.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),h,u,p;if(l.length>0&&!this.preserveObjectStacking){u=[],p=[];for(var D=0,g=this._objects.length;D<g;D++)h=this._objects[D],l.indexOf(h)===-1?u.push(h):p.push(h);l.length>1&&(this._activeObject._objects=p),u.push.apply(u,p)}else u=this._objects;return u},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,h){var u=l.calcTransformMatrix(),p=a.util.invertTransform(u),D=this.restorePointerVpt(h);return a.util.transformPoint(D,p)},isTargetTransparent:function(l,h,u){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var p=this._normalizePointer(l,{x:h,y:u}),D=Math.max(l.cacheTranslationX+p.x*l.zoomX,0),g=Math.max(l.cacheTranslationY+p.y*l.zoomY,0),O=a.util.isTransparent(l._cacheContext,Math.round(D),Math.round(g),this.targetFindTolerance);return O}var x=this.contextCache,E=l.selectionBackgroundColor,_=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(x),x.save(),x.transform(_[0],_[1],_[2],_[3],_[4],_[5]),l.render(x),x.restore(),l.selectionBackgroundColor=E;var O=a.util.isTransparent(x,h,u,this.targetFindTolerance);return O},_isSelectionKeyPressed:function(l){var h=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?h=!!this.selectionKey.find(function(u){return l[u]===!0}):h=l[this.selectionKey],h},_shouldClearSelection:function(l,h){var u=this.getActiveObjects(),p=this._activeObject;return!h||h&&p&&u.length>1&&u.indexOf(h)===-1&&p!==h&&!this._isSelectionKeyPressed(l)||h&&!h.evented||h&&!h.selectable&&p&&p!==h},_shouldCenterTransform:function(l,h,u){if(l){var p;return h==="scale"||h==="scaleX"||h==="scaleY"||h==="resizing"?p=this.centeredScaling||l.centeredScaling:h==="rotate"&&(p=this.centeredRotation||l.centeredRotation),p?!u:u}},_getOriginFromCorner:function(l,h){var u={x:l.originX,y:l.originY};return h==="ml"||h==="tl"||h==="bl"?u.x="right":(h==="mr"||h==="tr"||h==="br")&&(u.x="left"),h==="tl"||h==="mt"||h==="tr"?u.y="bottom":(h==="bl"||h==="mb"||h==="br")&&(u.y="top"),u},_getActionFromCorner:function(l,h,u,p){if(!h||!l)return"drag";var D=p.controls[h];return D.getActionName(u,D,p)},_setupCurrentTransform:function(l,h,u){if(h){var p=this.getPointer(l),D=h.__corner,g=h.controls[D],x=u&&D?g.getActionHandler(l,h,g):a.controlsUtils.dragHandler,E=this._getActionFromCorner(u,D,l,h),_=this._getOriginFromCorner(h,D),O=l[this.centeredKey],F={target:h,action:E,actionHandler:x,corner:D,scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,offsetX:p.x-h.left,offsetY:p.y-h.top,originX:_.x,originY:_.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:c(h.angle),width:h.width*h.scaleX,shiftKey:l.shiftKey,altKey:O,original:a.util.saveObjectTransform(h)};this._shouldCenterTransform(h,E,O)&&(F.originX="center",F.originY="center"),F.original.originX=_.x,F.original.originY=_.y,this._currentTransform=F,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var h=this._groupSelector,u=new a.Point(h.ex,h.ey),p=a.util.transformPoint(u,this.viewportTransform),D=new a.Point(h.ex+h.left,h.ey+h.top),g=a.util.transformPoint(D,this.viewportTransform),x=Math.min(p.x,g.x),E=Math.min(p.y,g.y),_=Math.max(p.x,g.x),O=Math.max(p.y,g.y),F=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(x,E,_-x,O-E)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,x+=F,E+=F,_-=F,O-=F,a.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(x,E,_-x,O-E))},findTarget:function(l,h){if(!this.skipTargetFind){var u=!0,p=this.getPointer(l,u),D=this._activeObject,g=this.getActiveObjects(),x,E,_=C(l),O=g.length>1&&!h||g.length===1;if(this.targets=[],O&&D._findTargetCorner(p,_)||g.length>1&&!h&&D===this._searchPossibleTargets([D],p))return D;if(g.length===1&&D===this._searchPossibleTargets([D],p))if(this.preserveObjectStacking)x=D,E=this.targets,this.targets=[];else return D;var F=this._searchPossibleTargets(this._objects,p);return l[this.altSelectionKey]&&F&&x&&F!==x&&(F=x,this.targets=E),F}},_checkTarget:function(l,h,u){if(h&&h.visible&&h.evented&&h.containsPoint(l))if((this.perPixelTargetFind||h.perPixelTargetFind)&&!h.isEditing){var p=this.isTargetTransparent(h,u.x,u.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(l,h){for(var u,p=l.length,D;p--;){var g=l[p],x=g.group?this._normalizePointer(g.group,h):h;if(this._checkTarget(x,g,h)){u=l[p],u.subTargetCheck&&u instanceof a.Group&&(D=this._searchPossibleTargets(u._objects,h),D&&this.targets.push(D));break}}return u},restorePointerVpt:function(l){return a.util.transformPoint(l,a.util.invertTransform(this.viewportTransform))},getPointer:function(l,h){if(this._absolutePointer&&!h)return this._absolutePointer;if(this._pointer&&h)return this._pointer;var u=b(l),p=this.upperCanvasEl,D=p.getBoundingClientRect(),g=D.width||0,x=D.height||0,E;(!g||!x)&&("top"in D&&"bottom"in D&&(x=Math.abs(D.top-D.bottom)),"right"in D&&"left"in D&&(g=Math.abs(D.right-D.left))),this.calcOffset(),u.x=u.x-this._offset.left,u.y=u.y-this._offset.top,h||(u=this.restorePointerVpt(u));var _=this.getRetinaScaling();return _!==1&&(u.x/=_,u.y/=_),g===0||x===0?E={width:1,height:1}:E={width:p.width/g,height:p.height/x},{x:u.x*E.width,y:u.y*E.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),h=this.lowerCanvasEl,u=this.upperCanvasEl;u?u.className="":(u=this._createCanvasElement(),this.upperCanvasEl=u),a.util.addClass(u,"upper-canvas "+l),this.wrapperEl.appendChild(u),this._copyCanvasStyle(h,u),this._applyCanvasStyle(u),this.contextTop=u.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=a.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),a.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),a.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var h=this.width||l.width,u=this.height||l.height;a.util.setStyle(l,{position:"absolute",width:h+"px",height:u+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=h,l.height=u,a.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,h){h.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,h){var u=!1,p=this.getActiveObjects(),D=[],g=[];l.forEach(function(x){p.indexOf(x)===-1&&(u=!0,x.fire("deselected",{e:h,target:x}),g.push(x))}),p.forEach(function(x){l.indexOf(x)===-1&&(u=!0,x.fire("selected",{e:h,target:x}),D.push(x))}),l.length>0&&p.length>0?u&&this.fire("selection:updated",{e:h,selected:D,deselected:g,updated:D[0]||g[0],target:this._activeObject}):p.length>0?this.fire("selection:created",{e:h,selected:D,target:this._activeObject}):l.length>0&&this.fire("selection:cleared",{e:h,deselected:g})},setActiveObject:function(l,h){var u=this.getActiveObjects();return this._setActiveObject(l,h),this._fireSelectionEvents(u,h),this},_setActiveObject:function(l,h){return this._activeObject===l||!this._discardActiveObject(h,l)||l.onSelect({e:h})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,h){var u=this._activeObject;if(u){if(u.onDeselect({e:l,object:h}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var h=this.getActiveObjects(),u=this.getActiveObject();return h.length&&this.fire("before:selection:cleared",{target:u,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(h,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(h){a.util.cleanUpJsdomNode(this[h]),this[h]=void 0}).bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,a.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var h=this._activeObject;h&&h._renderControls(l)},_toObject:function(l,h,u){var p=this._realizeGroupTransformOnObject(l),D=this.callSuper("_toObject",l,h,u);return this._unwindGroupTransformOnObject(l,p),D},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var h=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],u={};return h.forEach(function(p){u[p]=l[p]}),a.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),u}else return null},_unwindGroupTransformOnObject:function(l,h){h&&l.set(h)},_setSVGObject:function(l,h,u){var p=this._realizeGroupTransformOnObject(h);this.callSuper("_setSVGObject",l,h,u),this._unwindGroupTransformOnObject(h,p)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),a.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var y in a.StaticCanvas)y!=="prototype"&&(a.Canvas[y]=a.StaticCanvas[y])}(),function(){var b=a.util.addListener,c=a.util.removeListener,C=3,y=2,l=1,h={passive:!1};function u(p,D){return p.button&&p.button===D-1}a.util.object.extend(a.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(b,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,D){var g=this.upperCanvasEl,x=this._getEventPrefix();p(a.window,"resize",this._onResize),p(g,x+"down",this._onMouseDown),p(g,x+"move",this._onMouseMove,h),p(g,x+"out",this._onMouseOut),p(g,x+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,h),typeof eventjs<"u"&&D in eventjs&&(eventjs[D](g,"gesture",this._onGesture),eventjs[D](g,"drag",this._onDrag),eventjs[D](g,"orientation",this._onOrientationChange),eventjs[D](g,"shake",this._onShake),eventjs[D](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(c,"remove");var p=this._getEventPrefix();c(a.document,p+"up",this._onMouseUp),c(a.document,"touchend",this._onTouchEnd,h),c(a.document,p+"move",this._onMouseMove,h),c(a.document,"touchmove",this._onMouseMove,h)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(p,D){this.__onTransformGesture&&this.__onTransformGesture(p,D)},_onDrag:function(p,D){this.__onDrag&&this.__onDrag(p,D)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var D=this._hoveredTarget;this.fire("mouse:out",{target:D,e:p}),this._hoveredTarget=null,D&&D.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(x){g.fire("mouse:out",{target:D,e:p}),x&&D.fire("mouseout",{e:p})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(x){x.isEditing&&x.hiddenTextarea.focus()})},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,D){this.__onOrientationChange&&this.__onOrientationChange(p,D)},_onShake:function(p,D){this.__onShake&&this.__onShake(p,D)},_onLongPress:function(p,D){this.__onLongPress&&this.__onLongPress(p,D)},_onDragOver:function(p){p.preventDefault();var D=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(D,p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var D=p.changedTouches;return D?D[0]&&D[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var D=this.upperCanvasEl,g=this._getEventPrefix();b(a.document,"touchend",this._onTouchEnd,h),b(a.document,"touchmove",this._onMouseMove,h),c(D,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var D=this.upperCanvasEl,g=this._getEventPrefix();c(D,g+"move",this._onMouseMove,h),b(a.document,g+"up",this._onMouseUp),b(a.document,g+"move",this._onMouseMove,h)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var D=this._getEventPrefix();c(a.document,"touchend",this._onTouchEnd,h),c(a.document,"touchmove",this._onMouseMove,h);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){b(g.upperCanvasEl,D+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var D=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(c(a.document,g+"up",this._onMouseUp),c(a.document,g+"move",this._onMouseMove,h),b(D,g+"move",this._onMouseMove,h))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var D=this._activeObject;return!!D!=!!p||D&&p&&D!==p?!0:(D&&D.isEditing,!1)},__onMouseUp:function(p){var D,g=this._currentTransform,x=this._groupSelector,E=!1,_=!x||x.left===0&&x.top===0;if(this._cacheTransformEventData(p),D=this._target,this._handleEvent(p,"up:before"),u(p,C)){this.fireRightClick&&this._handleEvent(p,"up",C,_);return}if(u(p,y)){this.fireMiddleClick&&this._handleEvent(p,"up",y,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),E=g.actionPerformed),!_){var O=D===this._activeObject;this._maybeGroupObjects(p),E||(E=this._shouldRender(D)||!O&&D===this._activeObject)}if(D){if(D.selectable&&D!==this._activeObject&&D.activeOn==="up")this.setActiveObject(D,p),E=!0;else{var F=D._findTargetCorner(this.getPointer(p,!0),a.util.isTouchEvent(p)),B=D.controls[F],W=B&&B.getMouseUpHandler(p,D,B);if(W){var H=this.getPointer(p);W(p,g,H.x,H.y)}}D.isMoving=!1}this._setCursorFromEvent(p,D),this._handleEvent(p,"up",l,_),this._groupSelector=null,this._currentTransform=null,D&&(D.__corner=0),E?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(p,D){var g=this.findTarget(D),x=this.targets,E={e:D,target:g,subTargets:x};if(this.fire(p,E),g&&g.fire(p,E),!x)return g;for(var _=0;_<x.length;_++)x[_].fire(p,E);return g},_handleEvent:function(p,D,g,x){var E=this._target,_=this.targets||[],O={e:p,target:E,subTargets:_,button:g||l,isClick:x||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};D==="up"&&(O.currentTarget=this.findTarget(p),O.currentSubTargets=this.targets),this.fire("mouse:"+D,O),E&&E.fire("mouse"+D,O);for(var F=0;F<_.length;F++)_[F].fire("mouse"+D,O)},_finalizeCurrentTransform:function(p){var D=this._currentTransform,g=D.target,x,E={e:p,target:g,transform:D,action:D.action};g._scaling&&(g._scaling=!1),g.setCoords(),(D.actionPerformed||this.stateful&&g.hasStateChanged())&&(D.actionPerformed&&(x=this._addEventOptions(E,D),this._fire(x,E)),this._fire("modified",E))},_addEventOptions:function(p,D){var g,x;switch(D.action){case"scaleX":g="scaled",x="x";break;case"scaleY":g="scaled",x="y";break;case"skewX":g="skewed",x="x";break;case"skewY":g="skewed",x="y";break;case"scale":g="scaled",x="equally";break;case"rotate":g="rotated";break;case"drag":g="moved";break}return p.by=x,g},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var D=this.getPointer(p);this.freeDrawingBrush.onMouseDown(D,{e:p,pointer:D}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var D=this.getPointer(p);this.freeDrawingBrush.onMouseMove(D,{e:p,pointer:D})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var D=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:D}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var D=this._target;if(u(p,C)){this.fireRightClick&&this._handleEvent(p,"down",C);return}if(u(p,y)){this.fireMiddleClick&&this._handleEvent(p,"down",y);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var x=this._shouldRender(D),E=this._shouldGroup(p,D);if(this._shouldClearSelection(p,D)?this.discardActiveObject(p):E&&(this._handleGrouping(p,D),D=this._activeObject),this.selection&&(!D||!D.selectable&&!D.isEditing&&D!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),D){var _=D===this._activeObject;D.selectable&&D.activeOn==="down"&&this.setActiveObject(D,p);var O=D._findTargetCorner(this.getPointer(p,!0),a.util.isTouchEvent(p));if(D.__corner=O,D===this._activeObject&&(O||!E)){this._setupCurrentTransform(p,D,_);var F=D.controls[O],g=this.getPointer(p),B=F&&F.getMouseDownHandler(p,D,F);B&&B(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(x||E)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var D=this._currentTransform;this.stateful&&D.target.saveState(),this.fire("before:transform",{e:p,transform:D})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var D,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var x=this._groupSelector;x?(g=this._absolutePointer,x.left=g.x-x.ex,x.top=g.y-x.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(D=this.findTarget(p)||null,this._setCursorFromEvent(p,D),this._fireOverOutEvents(D,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,D){var g=this._hoveredTarget,x=this._hoveredTargets,E=this.targets,_=Math.max(x.length,E.length);this.fireSyntheticInOutEvents(p,D,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var O=0;O<_;O++)this.fireSyntheticInOutEvents(E[O],D,{oldTarget:x[O],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,D){var g=this._draggedoverTarget,x=this._hoveredTargets,E=this.targets,_=Math.max(x.length,E.length);this.fireSyntheticInOutEvents(p,D,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var O=0;O<_;O++)this.fireSyntheticInOutEvents(E[O],D,{oldTarget:x[O],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,D,g){var x,E,_=g.oldTarget,O,F,B=_!==p,W=g.canvasEvtIn,H=g.canvasEvtOut;B&&(x={e:D,target:p,previousTarget:_},E={e:D,target:_,nextTarget:p}),F=p&&B,O=_&&B,O&&(H&&this.fire(H,E),_.fire(g.evtOut,E)),F&&(W&&this.fire(W,x),p.fire(g.evtIn,x))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var D=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,D),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,D,g){var x=g.x,E=g.y,_=D.action,O=!1,F=D.actionHandler;F&&(O=F(p,D,x,E)),_==="drag"&&O&&(D.target.isMoving=!0,this.setCursor(D.target.moveCursor||this.moveCursor)),D.actionPerformed=D.actionPerformed||O},_fire:a.controlsUtils.fireEvent,_setCursorFromEvent:function(p,D){if(!D)return this.setCursor(this.defaultCursor),!1;var g=D.hoverCursor||this.hoverCursor,x=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,E=(!x||!x.contains(D))&&D._findTargetCorner(this.getPointer(p,!0));E?this.setCursor(this.getCornerCursor(E,D,p)):(D.subTargetCheck&&this.targets.concat().reverse().map(function(_){g=_.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,D,g){var x=D.controls[p];return x.cursorStyleHandler(g,x,D)}})}(),function(){var b=Math.min,c=Math.max;a.util.object.extend(a.Canvas.prototype,{_shouldGroup:function(C,y){var l=this._activeObject;return l&&this._isSelectionKeyPressed(C)&&y&&y.selectable&&this.selection&&(l!==y||l.type==="activeSelection")&&!y.onSelect({e:C})},_handleGrouping:function(C,y){var l=this._activeObject;l.__corner||y===l&&(y=this.findTarget(C,!0),!y||!y.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(y,C):this._createActiveSelection(y,C))},_updateActiveSelection:function(C,y){var l=this._activeObject,h=l._objects.slice(0);l.contains(C)?(l.removeWithUpdate(C),this._hoveredTarget=C,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),y)):(l.addWithUpdate(C),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(h,y)},_createActiveSelection:function(C,y){var l=this.getActiveObjects(),h=this._createGroup(C);this._hoveredTarget=h,this._setActiveObject(h,y),this._fireSelectionEvents(l,y)},_createGroup:function(C){var y=this._objects,l=y.indexOf(this._activeObject)<y.indexOf(C),h=l?[this._activeObject,C]:[C,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new a.ActiveSelection(h,{canvas:this})},_groupSelectedObjects:function(C){var y=this._collectObjects(C),l;y.length===1?this.setActiveObject(y[0],C):y.length>1&&(l=new a.ActiveSelection(y.reverse(),{canvas:this}),this.setActiveObject(l,C))},_collectObjects:function(C){for(var y=[],l,h=this._groupSelector.ex,u=this._groupSelector.ey,p=h+this._groupSelector.left,D=u+this._groupSelector.top,g=new a.Point(b(h,p),b(u,D)),x=new a.Point(c(h,p),c(u,D)),E=!this.selectionFullyContained,_=h===p&&u===D,O=this._objects.length;O--&&(l=this._objects[O],!(!(!l||!l.selectable||!l.visible)&&(E&&l.intersectsWithRect(g,x,!0)||l.isContainedWithinRect(g,x,!0)||E&&l.containsPoint(g,null,!0)||E&&l.containsPoint(x,null,!0))&&(y.push(l),_))););return y.length>1&&(y=y.filter(function(F){return!F.onSelect({e:C})})),y},_maybeGroupObjects:function(C){this.selection&&this._groupSelector&&this._groupSelectedObjects(C),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){a.util.object.extend(a.StaticCanvas.prototype,{toDataURL:function(b){b||(b={});var c=b.format||"png",C=b.quality||1,y=(b.multiplier||1)*(b.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(y,b);return a.util.toDataURL(l,c,C)},toCanvasElement:function(b,c){b=b||1,c=c||{};var C=(c.width||this.width)*b,y=(c.height||this.height)*b,l=this.getZoom(),h=this.width,u=this.height,p=l*b,D=this.viewportTransform,g=(D[4]-(c.left||0))*b,x=(D[5]-(c.top||0))*b,E=this.interactive,_=[p,0,0,p,g,x],O=this.enableRetinaScaling,F=a.util.createCanvasElement(),B=this.contextTop;return F.width=C,F.height=y,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=C,this.height=y,this.calcViewportBoundaries(),this.renderCanvas(F.getContext("2d"),this._objects),this.viewportTransform=D,this.width=h,this.height=u,this.calcViewportBoundaries(),this.interactive=E,this.enableRetinaScaling=O,this.contextTop=B,F}})}(),a.util.object.extend(a.StaticCanvas.prototype,{loadFromJSON:function(b,c,C){if(b){var y=typeof b=="string"?JSON.parse(b):a.util.object.clone(b),l=this,h=y.clipPath,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete y.clipPath,this._enlivenObjects(y.objects,function(p){l.clear(),l._setBgOverlay(y,function(){h?l._enlivenObjects([h],function(D){l.clipPath=D[0],l.__setupCanvas.call(l,y,p,u,c)}):l.__setupCanvas.call(l,y,p,u,c)})},C),this}},__setupCanvas:function(b,c,C,y){var l=this;c.forEach(function(h,u){l.insertAt(h,u)}),this.renderOnAddRemove=C,delete b.objects,delete b.backgroundImage,delete b.overlayImage,delete b.background,delete b.overlay,this._setOptions(b),this.renderAll(),y&&y()},_setBgOverlay:function(b,c){var C={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!b.backgroundImage&&!b.overlayImage&&!b.background&&!b.overlay){c&&c();return}var y=function(){C.backgroundImage&&C.overlayImage&&C.backgroundColor&&C.overlayColor&&c&&c()};this.__setBgOverlay("backgroundImage",b.backgroundImage,C,y),this.__setBgOverlay("overlayImage",b.overlayImage,C,y),this.__setBgOverlay("backgroundColor",b.background,C,y),this.__setBgOverlay("overlayColor",b.overlay,C,y)},__setBgOverlay:function(b,c,C,y){var l=this;if(!c){C[b]=!0,y&&y();return}b==="backgroundImage"||b==="overlayImage"?a.util.enlivenObjects([c],function(h){l[b]=h[0],C[b]=!0,y&&y()}):this["set"+a.util.string.capitalize(b,!0)](c,function(){C[b]=!0,y&&y()})},_enlivenObjects:function(b,c,C){if(!b||b.length===0){c&&c([]);return}a.util.enlivenObjects(b,function(y){c&&c(y)},null,C)},_toDataURL:function(b,c){this.clone(function(C){c(C.toDataURL(b))})},_toDataURLWithMultiplier:function(b,c,C){this.clone(function(y){C(y.toDataURLWithMultiplier(b,c))})},clone:function(b,c){var C=JSON.stringify(this.toJSON(c));this.cloneWithoutData(function(y){y.loadFromJSON(C,function(){b&&b(y)})})},cloneWithoutData:function(b){var c=a.util.createCanvasElement();c.width=this.width,c.height=this.height;var C=new a.Canvas(c);this.backgroundImage?(C.setBackgroundImage(this.backgroundImage.src,function(){C.renderAll(),b&&b(C)}),C.backgroundImageOpacity=this.backgroundImageOpacity,C.backgroundImageStretch=this.backgroundImageStretch):b&&b(C)}}),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.extend,y=c.util.object.clone,l=c.util.toFixed,h=c.util.string.capitalize,u=c.util.degreesToRadians,p=!c.isLikelyNode,D=2;c.Object||(c.Object=c.util.createClass(c.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=c.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var x=c.perfLimitSizeTotal,E=g.width,_=g.height,O=c.maxCacheSideLimit,F=c.minCacheSideLimit;if(E<=O&&_<=O&&E*_<=x)return E<F&&(g.width=F),_<F&&(g.height=F),g;var B=E/_,W=c.util.limitDimsByArea(B,x),H=c.util.capValue,Y=H(F,W.x,O),oe=H(F,W.y,O);return E>Y&&(g.zoomX/=E/Y,g.width=Y,g.capped=!0),_>oe&&(g.zoomY/=_/oe,g.height=oe,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),x=this._getTransformedDimensions(0,0),E=x.x*g.scaleX/this.scaleX,_=x.y*g.scaleY/this.scaleY;return{width:E+D,height:_+D,zoomX:g.scaleX,zoomY:g.scaleY,x:E,y:_}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var x=g._currentTransform.target,E=g._currentTransform.action;if(this===x&&E.slice&&E.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,O=this._limitCacheSize(this._getCacheCanvasDimensions()),F=c.minCacheSideLimit,B=O.width,W=O.height,H,Y,oe=O.zoomX,ne=O.zoomY,be=B!==this.cacheWidth||W!==this.cacheHeight,Z=this.zoomX!==oe||this.zoomY!==ne,me=be||Z,V=0,Le=0,Ce=!1;if(be){var ze=this._cacheCanvas.width,te=this._cacheCanvas.height,ae=B>ze||W>te,q=(B<ze*.9||W<te*.9)&&ze>F&&te>F;Ce=ae||q,ae&&!O.capped&&(B>F||W>F)&&(V=B*.1,Le=W*.1)}return this instanceof c.Text&&this.path&&(me=!0,Ce=!0,V+=this.getHeightOfLine(0)*this.zoomX,Le+=this.getHeightOfLine(0)*this.zoomY),me?(Ce?(_.width=Math.ceil(B+V),_.height=Math.ceil(W+Le)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),H=O.x/2,Y=O.y/2,this.cacheTranslationX=Math.round(_.width/2-H)+H,this.cacheTranslationY=Math.round(_.height/2-Y)+Y,this.cacheWidth=B,this.cacheHeight=W,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(oe,ne),this.zoomX=oe,this.zoomY=ne,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var x=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,E=this.calcTransformMatrix(!x);g.transform(E[0],E[1],E[2],E[3],E[4],E[5])},toObject:function(g){var x=c.Object.NUM_FRACTION_DIGITS,E={type:this.type,version:c.version,originX:this.originX,originY:this.originY,left:l(this.left,x),top:l(this.top,x),width:l(this.width,x),height:l(this.height,x),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,x),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,x),scaleX:l(this.scaleX,x),scaleY:l(this.scaleY,x),angle:l(this.angle,x),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,x),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,x),skewY:l(this.skewY,x)};return this.clipPath&&!this.clipPath.excludeFromExport&&(E.clipPath=this.clipPath.toObject(g),E.clipPath.inverted=this.clipPath.inverted,E.clipPath.absolutePositioned=this.clipPath.absolutePositioned),c.util.populateWithProperties(this,E,g),this.includeDefaultValues||(E=this._removeDefaultValues(E)),E},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var x=c.util.getKlass(g.type).prototype,E=x.stateProperties;return E.forEach(function(_){if(!(_==="left"||_==="top")){g[_]===x[_]&&delete g[_];var O=Object.prototype.toString.call(g[_])==="[object Array]"&&Object.prototype.toString.call(x[_])==="[object Array]";O&&g[_].length===0&&x[_].length===0&&delete g[_]}}),g},toString:function(){return"#<fabric."+h(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=c.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),x=g.scaleX,E=g.scaleY;if(this.canvas){var _=this.canvas.getZoom(),O=this.canvas.getRetinaScaling();x*=_*O,E*=_*O}return{scaleX:x,scaleY:E}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,x){var E=g==="scaleX"||g==="scaleY",_=this[g]!==x,O=!1;return E&&(x=this._constrainScale(x)),g==="scaleX"&&x<0?(this.flipX=!this.flipX,x*=-1):g==="scaleY"&&x<0?(this.flipY=!this.flipY,x*=-1):g==="shadow"&&x&&!(x instanceof c.Shadow)?x=new c.Shadow(x):g==="dirty"&&this.group&&this.group.set("dirty",x),this[g]=x,_&&(O=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,O&&this.group.set("dirty",!0)):O&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:c.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g){var x=this.clipPath;if(g.save(),x.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",x.absolutePositioned){var E=c.util.invertTransform(this.calcTransformMatrix());g.transform(E[0],E[1],E[2],E[3],E[4],E[5])}x.transform(g),g.scale(1/x.zoomX,1/x.zoomY),g.drawImage(x._cacheCanvas,-x.cacheTranslationX,-x.cacheTranslationY),g.restore()},drawObject:function(g,x){var E=this.fill,_=this.stroke;x?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g),this.fill=E,this.stroke=_},_drawClipPath:function(g){var x=this.clipPath;x&&(x.canvas=this.canvas,x.shouldCache(),x._transformDone=!0,x.renderCache({forClipping:!0}),this.drawClipPathOnCache(g))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!g){var x=this.cacheWidth/this.zoomX,E=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-x/2,-E/2,x,E)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var x=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-x.x/2,-x.y/2,x.x,x.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,x){var E=x.stroke;E&&(g.lineWidth=x.strokeWidth,g.lineCap=x.strokeLineCap,g.lineDashOffset=x.strokeDashOffset,g.lineJoin=x.strokeLineJoin,g.miterLimit=x.strokeMiterLimit,E.toLive?E.gradientUnits==="percentage"||E.gradientTransform||E.patternTransform?this._applyPatternForTransformedGradient(g,E):(g.strokeStyle=E.toLive(g,this),this._applyPatternGradientTransform(g,E)):g.strokeStyle=x.stroke)},_setFillStyles:function(g,x){var E=x.fill;E&&(E.toLive?(g.fillStyle=E.toLive(g,this),this._applyPatternGradientTransform(g,x.fill)):g.fillStyle=E)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,x){!x||x.length===0||(1&x.length&&x.push.apply(x,x),g.setLineDash(x))},_renderControls:function(g,x){var E=this.getViewportTransform(),_=this.calcTransformMatrix(),O,F,B;x=x||{},F=typeof x.hasBorders<"u"?x.hasBorders:this.hasBorders,B=typeof x.hasControls<"u"?x.hasControls:this.hasControls,_=c.util.multiplyTransformMatrices(E,_),O=c.util.qrDecompose(_),g.save(),g.translate(O.translateX,O.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),g.rotate(u(O.angle)),x.forActiveSelection||this.group?F&&this.drawBordersInGroup(g,O,x):F&&this.drawBorders(g,x),B&&this.drawControls(g,x),g.restore()},_setShadow:function(g){if(this.shadow){var x=this.shadow,E=this.canvas,_,O=E&&E.viewportTransform[0]||1,F=E&&E.viewportTransform[3]||1;x.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),E&&E._isRetinaScaling()&&(O*=c.devicePixelRatio,F*=c.devicePixelRatio),g.shadowColor=x.color,g.shadowBlur=x.blur*c.browserShadowBlurConstant*(O+F)*(_.scaleX+_.scaleY)/4,g.shadowOffsetX=x.offsetX*O*_.scaleX,g.shadowOffsetY=x.offsetY*F*_.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,x){if(!x||!x.toLive)return{offsetX:0,offsetY:0};var E=x.gradientTransform||x.patternTransform,_=-this.width/2+x.offsetX||0,O=-this.height/2+x.offsetY||0;return x.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,_,O):g.transform(1,0,0,1,_,O),E&&g.transform(E[0],E[1],E[2],E[3],E[4],E[5]),{offsetX:_,offsetY:O}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var x=this.getObjectScaling();g.scale(1/x.scaleX,1/x.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,x){var E=this._limitCacheSize(this._getCacheCanvasDimensions()),_=c.util.createCanvasElement(),O,F=this.canvas.getRetinaScaling(),B=E.x/this.scaleX/F,W=E.y/this.scaleY/F;_.width=B,_.height=W,O=_.getContext("2d"),O.beginPath(),O.moveTo(0,0),O.lineTo(B,0),O.lineTo(B,W),O.lineTo(0,W),O.closePath(),O.translate(B/2,W/2),O.scale(E.zoomX/this.scaleX/F,E.zoomY/this.scaleY/F),this._applyPatternGradientTransform(O,x),O.fillStyle=x.toLive(g),O.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(F*this.scaleX/E.zoomX,F*this.scaleY/E.zoomY),g.strokeStyle=O.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=c.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var x=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),x=c.util.transformPoint(x,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,x.x+=g.offsetLeft,x.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(x,"center","center")},clone:function(g,x){var E=this.toObject(x);this.constructor.fromObject?this.constructor.fromObject(E,g):c.Object._fromObject("Object",E,g)},cloneAsImage:function(g,x){var E=this.toCanvasElement(x);return g&&g(new c.Image(E)),this},toCanvasElement:function(g){g||(g={});var x=c.util,E=x.saveObjectTransform(this),_=this.group,O=this.shadow,F=Math.abs,B=(g.multiplier||1)*(g.enableRetinaScaling?c.devicePixelRatio:1);delete this.group,g.withoutTransform&&x.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var W=c.util.createCanvasElement(),H=this.getBoundingRect(!0,!0),Y=this.shadow,oe,ne={x:0,y:0},be,Z,me;Y&&(be=Y.blur,Y.nonScaling?oe={scaleX:1,scaleY:1}:oe=this.getObjectScaling(),ne.x=2*Math.round(F(Y.offsetX)+be)*F(oe.scaleX),ne.y=2*Math.round(F(Y.offsetY)+be)*F(oe.scaleY)),Z=H.width+ne.x,me=H.height+ne.y,W.width=Math.ceil(Z),W.height=Math.ceil(me);var V=new c.StaticCanvas(W,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(V.backgroundColor="#fff"),this.setPositionByOrigin(new c.Point(V.width/2,V.height/2),"center","center");var Le=this.canvas;V.add(this);var Ce=V.toCanvasElement(B||1,g);return this.shadow=O,this.set("canvas",Le),_&&(this.group=_),this.set(E).setCoords(),V._objects=[],V.dispose(),V=null,Ce},toDataURL:function(g){return g||(g={}),c.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var x=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return x&&this._setOriginToCenter(),this.set("angle",g),x&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,x){x=x||this.canvas.getPointer(g);var E=new c.Point(x.x,x.y),_=this._getLeftTopCoords();return this.angle&&(E=c.util.rotatePoint(E,_,u(-this.angle))),{x:E.x-_.x,y:E.y-_.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)}}),c.util.createAccessors&&c.util.createAccessors(c.Object),C(c.Object.prototype,c.Observable),c.Object.NUM_FRACTION_DIGITS=2,c.Object._fromObject=function(g,x,E,_){var O=c[g];x=y(x,!0),c.util.enlivenPatterns([x.fill,x.stroke],function(F){typeof F[0]<"u"&&(x.fill=F[0]),typeof F[1]<"u"&&(x.stroke=F[1]),c.util.enlivenObjects([x.clipPath],function(B){x.clipPath=B[0];var W=_?new O(x[_],x):new O(x);E&&E(W)})})},c.Object.__uid=0)}(I),function(){var b=a.util.degreesToRadians,c={left:-.5,center:0,right:.5},C={top:-.5,center:0,bottom:.5};a.util.object.extend(a.Object.prototype,{translateToGivenOrigin:function(y,l,h,u,p){var D=y.x,g=y.y,x,E,_;return typeof l=="string"?l=c[l]:l-=.5,typeof u=="string"?u=c[u]:u-=.5,x=u-l,typeof h=="string"?h=C[h]:h-=.5,typeof p=="string"?p=C[p]:p-=.5,E=p-h,(x||E)&&(_=this._getTransformedDimensions(),D=y.x+x*_.x,g=y.y+E*_.y),new a.Point(D,g)},translateToCenterPoint:function(y,l,h){var u=this.translateToGivenOrigin(y,l,h,"center","center");return this.angle?a.util.rotatePoint(u,y,b(this.angle)):u},translateToOriginPoint:function(y,l,h){var u=this.translateToGivenOrigin(y,"center","center",l,h);return this.angle?a.util.rotatePoint(u,y,b(this.angle)):u},getCenterPoint:function(){var y=new a.Point(this.left,this.top);return this.translateToCenterPoint(y,this.originX,this.originY)},getPointByOrigin:function(y,l){var h=this.getCenterPoint();return this.translateToOriginPoint(h,y,l)},toLocalPoint:function(y,l,h){var u=this.getCenterPoint(),p,D;return typeof l<"u"&&typeof h<"u"?p=this.translateToGivenOrigin(u,"center","center",l,h):p=new a.Point(this.left,this.top),D=new a.Point(y.x,y.y),this.angle&&(D=a.util.rotatePoint(D,u,-b(this.angle))),D.subtractEquals(p)},setPositionByOrigin:function(y,l,h){var u=this.translateToCenterPoint(y,l,h),p=this.translateToOriginPoint(u,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(y){var l=b(this.angle),h=this.getScaledWidth(),u=a.util.cos(l)*h,p=a.util.sin(l)*h,D,g;typeof this.originX=="string"?D=c[this.originX]:D=this.originX-.5,typeof y=="string"?g=c[y]:g=y-.5,this.left+=u*(g-D),this.top+=p*(g-D),this.setCoords(),this.originX=y},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var y=this.getCenterPoint();this.originX="center",this.originY="center",this.left=y.x,this.top=y.y},_resetOrigin:function(){var y=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=y.x,this.top=y.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function b(h){return[new a.Point(h.tl.x,h.tl.y),new a.Point(h.tr.x,h.tr.y),new a.Point(h.br.x,h.br.y),new a.Point(h.bl.x,h.bl.y)]}var c=a.util,C=c.degreesToRadians,y=c.multiplyTransformMatrices,l=c.transformPoint;c.object.extend(a.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(h,u){return u?h?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),h?this.aCoords:this.lineCoords)},getCoords:function(h,u){return b(this._getCoords(h,u))},intersectsWithRect:function(h,u,p,D){var g=this.getCoords(p,D),x=a.Intersection.intersectPolygonRectangle(g,h,u);return x.status==="Intersection"},intersectsWithObject:function(h,u,p){var D=a.Intersection.intersectPolygonPolygon(this.getCoords(u,p),h.getCoords(u,p));return D.status==="Intersection"||h.isContainedWithinObject(this,u,p)||this.isContainedWithinObject(h,u,p)},isContainedWithinObject:function(h,u,p){for(var D=this.getCoords(u,p),g=u?h.aCoords:h.lineCoords,x=0,E=h._getImageLines(g);x<4;x++)if(!h.containsPoint(D[x],E))return!1;return!0},isContainedWithinRect:function(h,u,p,D){var g=this.getBoundingRect(p,D);return g.left>=h.x&&g.left+g.width<=u.x&&g.top>=h.y&&g.top+g.height<=u.y},containsPoint:function(h,x,p,D){var g=this._getCoords(p,D),x=x||this._getImageLines(g),E=this._findCrossPoints(h,x);return E!==0&&E%2===1},isOnScreen:function(h){if(!this.canvas)return!1;var u=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,D=this.getCoords(!0,h);return D.some(function(g){return g.x<=p.x&&g.x>=u.x&&g.y<=p.y&&g.y>=u.y})||this.intersectsWithRect(u,p,!0,h)?!0:this._containsCenterOfCanvas(u,p,h)},_containsCenterOfCanvas:function(h,u,p){var D={x:(h.x+u.x)/2,y:(h.y+u.y)/2};return!!this.containsPoint(D,null,!0,p)},isPartiallyOnScreen:function(h){if(!this.canvas)return!1;var u=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(u,p,!0,h))return!0;var D=this.getCoords(!0,h).every(function(g){return(g.x>=p.x||g.x<=u.x)&&(g.y>=p.y||g.y<=u.y)});return D&&this._containsCenterOfCanvas(u,p,h)},_getImageLines:function(h){var u={topline:{o:h.tl,d:h.tr},rightline:{o:h.tr,d:h.br},bottomline:{o:h.br,d:h.bl},leftline:{o:h.bl,d:h.tl}};return u},_findCrossPoints:function(h,u){var p,D,g,x,E,_=0,O;for(var F in u)if(O=u[F],!(O.o.y<h.y&&O.d.y<h.y)&&!(O.o.y>=h.y&&O.d.y>=h.y)&&(O.o.x===O.d.x&&O.o.x>=h.x?E=O.o.x:(p=0,D=(O.d.y-O.o.y)/(O.d.x-O.o.x),g=h.y-p*h.x,x=O.o.y-D*O.o.x,E=-(g-x)/(p-D)),E>=h.x&&(_+=1),_===2))break;return _},getBoundingRect:function(h,u){var p=this.getCoords(h,u);return c.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(h){return Math.abs(h)<this.minScaleLimit?h<0?-this.minScaleLimit:this.minScaleLimit:h===0?1e-4:h},scale:function(h){return this._set("scaleX",h),this._set("scaleY",h),this.setCoords()},scaleToWidth:function(h,u){var p=this.getBoundingRect(u).width/this.getScaledWidth();return this.scale(h/this.width/p)},scaleToHeight:function(h,u){var p=this.getBoundingRect(u).height/this.getScaledHeight();return this.scale(h/this.height/p)},calcCoords:function(h){return h?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var h=this.getViewportTransform(),u=this.padding,p=C(this.angle),D=c.cos(p),g=c.sin(p),x=D*u,E=g*u,_=x+E,O=x-E,F=this.calcACoords(),B={tl:l(F.tl,h),tr:l(F.tr,h),bl:l(F.bl,h),br:l(F.br,h)};return u&&(B.tl.x-=O,B.tl.y-=_,B.tr.x+=_,B.tr.y-=O,B.bl.x-=_,B.bl.y+=O,B.br.x+=O,B.br.y+=_),B},calcOCoords:function(){var h=this._calcRotateMatrix(),u=this._calcTranslateMatrix(),p=this.getViewportTransform(),D=y(p,u),g=y(D,h),g=y(g,[1/p[0],0,0,1/p[3],0,0]),x=this._calculateCurrentDimensions(),E={};return this.forEachControl(function(_,O,F){E[O]=_.positionHandler(x,g,F)}),E},calcACoords:function(){var h=this._calcRotateMatrix(),u=this._calcTranslateMatrix(),p=y(u,h),D=this._getTransformedDimensions(),g=D.x/2,x=D.y/2;return{tl:l({x:-g,y:-x},p),tr:l({x:g,y:-x},p),bl:l({x:-g,y:x},p),br:l({x:g,y:x},p)}},setCoords:function(h){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),h?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return c.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var h=this.getCenterPoint();return[1,0,0,1,h.x,h.y]},transformMatrixKey:function(h){var u="_",p="";return!h&&this.group&&(p=this.group.transformMatrixKey(h)+u),p+this.top+u+this.left+u+this.scaleX+u+this.scaleY+u+this.skewX+u+this.skewY+u+this.angle+u+this.originX+u+this.originY+u+this.width+u+this.height+u+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(h){var u=this.calcOwnMatrix();if(h||!this.group)return u;var p=this.transformMatrixKey(h),D=this.matrixCache||(this.matrixCache={});return D.key===p?D.value:(this.group&&(u=y(this.group.calcTransformMatrix(!1),u)),D.key=p,D.value=u,u)},calcOwnMatrix:function(){var h=this.transformMatrixKey(!0),u=this.ownMatrixCache||(this.ownMatrixCache={});if(u.key===h)return u.value;var p=this._calcTranslateMatrix(),D={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return u.key=h,u.value=c.composeMatrix(D),u.value},_calcDimensionsTransformMatrix:function(h,u,p){return c.calcDimensionsMatrix({skewX:h,skewY:u,scaleX:this.scaleX*(p&&this.flipX?-1:1),scaleY:this.scaleY*(p&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var h=this.strokeWidth,u=this.width+h,p=this.height+h;return{x:u,y:p}},_getTransformedDimensions:function(h,u){typeof h>"u"&&(h=this.skewX),typeof u>"u"&&(u=this.skewY);var p,D,g,x=h===0&&u===0;if(this.strokeUniform?(D=this.width,g=this.height):(p=this._getNonTransformedDimensions(),D=p.x,g=p.y),x)return this._finalizeDimensions(D*this.scaleX,g*this.scaleY);var E=c.sizeAfterTransform(D,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:h,skewY:u});return this._finalizeDimensions(E.x,E.y)},_finalizeDimensions:function(h,u){return this.strokeUniform?{x:h+this.strokeWidth,y:u+this.strokeWidth}:{x:h,y:u}},_calculateCurrentDimensions:function(){var h=this.getViewportTransform(),u=this._getTransformedDimensions(),p=l(u,h,!0);return p.scalarAdd(2*this.padding)}})}(),a.util.object.extend(a.Object.prototype,{sendToBack:function(){return this.group?a.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?a.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(b){return this.group?a.StaticCanvas.prototype.sendBackwards.call(this.group,this,b):this.canvas&&this.canvas.sendBackwards(this,b),this},bringForward:function(b){return this.group?a.StaticCanvas.prototype.bringForward.call(this.group,this,b):this.canvas&&this.canvas.bringForward(this,b),this},moveTo:function(b){return this.group&&this.group.type!=="activeSelection"?a.StaticCanvas.prototype.moveTo.call(this.group,this,b):this.canvas&&this.canvas.moveTo(this,b),this}}),function(){function b(C,y){if(y){if(y.toLive)return C+": url(#SVGID_"+y.id+"); ";var l=new a.Color(y),h=C+": "+l.toRgb()+"; ",u=l.getAlpha();return u!==1&&(h+=C+"-opacity: "+u.toString()+"; "),h}else return C+": none; "}var c=a.util.toFixed;a.util.object.extend(a.Object.prototype,{getSvgStyles:function(C){var y=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",h=this.strokeDashArray?this.strokeDashArray.join(" "):"none",u=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",D=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",x=typeof this.opacity<"u"?this.opacity:"1",E=this.visible?"":" visibility: hidden;",_=C?"":this.getSvgFilter(),O=b("fill",this.fill),F=b("stroke",this.stroke);return[F,"stroke-width: ",l,"; ","stroke-dasharray: ",h,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",u,"; ","stroke-linejoin: ",D,"; ","stroke-miterlimit: ",g,"; ",O,"fill-rule: ",y,"; ","opacity: ",x,";",_,E].join("")},getSvgSpanStyles:function(C,y){var l="; ",u=C.fontFamily?"font-family: "+(C.fontFamily.indexOf("'")===-1&&C.fontFamily.indexOf('"')===-1?"'"+C.fontFamily+"'":C.fontFamily)+l:"",h=C.strokeWidth?"stroke-width: "+C.strokeWidth+l:"",u=u,p=C.fontSize?"font-size: "+C.fontSize+"px"+l:"",D=C.fontStyle?"font-style: "+C.fontStyle+l:"",g=C.fontWeight?"font-weight: "+C.fontWeight+l:"",x=C.fill?b("fill",C.fill):"",E=C.stroke?b("stroke",C.stroke):"",_=this.getSvgTextDecoration(C),O=C.deltaY?"baseline-shift: "+-C.deltaY+"; ":"";return _&&(_="text-decoration: "+_+l),[E,h,u,p,D,g,_,x,O,y?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(C){return["overline","underline","line-through"].filter(function(y){return C[y.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(C,y){var l=C?this.calcTransformMatrix():this.calcOwnMatrix(),h='transform="'+a.util.matrixToSVG(l);return h+(y||"")+'" '},_setSVGBg:function(C){if(this.backgroundColor){var y=a.Object.NUM_FRACTION_DIGITS;C.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',c(-this.width/2,y),'" y="',c(-this.height/2,y),'" width="',c(this.width,y),'" height="',c(this.height,y),`"></rect>
`)}},toSVG:function(C){return this._createBaseSVGMarkup(this._toSVG(C),{reviver:C})},toClipPathSVG:function(C){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(C),{reviver:C})},_createBaseClipPathSVGMarkup:function(C,y){y=y||{};var l=y.reviver,h=y.additionalTransform||"",u=[this.getSvgTransform(!0,h),this.getSvgCommons()].join(""),p=C.indexOf("COMMON_PARTS");return C[p]=u,l?l(C.join("")):C.join("")},_createBaseSVGMarkup:function(C,y){y=y||{};var l=y.noStyle,h=y.reviver,u=l?"":'style="'+this.getSvgStyles()+'" ',p=y.withShadow?'style="'+this.getSvgFilter()+'" ':"",D=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",x=D&&D.absolutePositioned,E=this.stroke,_=this.fill,O=this.shadow,F,B=[],W,H=C.indexOf("COMMON_PARTS"),Y=y.additionalTransform;return D&&(D.clipPathId="CLIPPATH_"+a.Object.__uid++,W='<clipPath id="'+D.clipPathId+`" >
`+D.toClipPathSVG(h)+`</clipPath>
`),x&&B.push("<g ",p,this.getSvgCommons(),` >
`),B.push("<g ",this.getSvgTransform(!1),x?"":p+this.getSvgCommons(),` >
`),F=[u,g,l?"":this.addPaintOrder()," ",Y?'transform="'+Y+'" ':""].join(""),C[H]=F,_&&_.toLive&&B.push(_.toSVG(this)),E&&E.toLive&&B.push(E.toSVG(this)),O&&B.push(O.toSVG(this)),D&&B.push(W),B.push(C.join("")),B.push(`</g>
`),x&&B.push(`</g>
`),h?h(B.join("")):B.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var b=a.util.object.extend,c="stateProperties";function C(l,h,u){var p={},D=!0;u.forEach(function(g){p[g]=l[g]}),b(l[h],p,D)}function y(l,h,u){if(l===h)return!0;if(Array.isArray(l)){if(!Array.isArray(h)||l.length!==h.length)return!1;for(var p=0,D=l.length;p<D;p++)if(!y(l[p],h[p]))return!1;return!0}else if(l&&typeof l=="object"){var g=Object.keys(l),x;if(!h||typeof h!="object"||!u&&g.length!==Object.keys(h).length)return!1;for(var p=0,D=g.length;p<D;p++)if(x=g[p],!(x==="canvas"||x==="group")&&!y(l[x],h[x]))return!1;return!0}}a.util.object.extend(a.Object.prototype,{hasStateChanged:function(l){l=l||c;var h="_"+l;return Object.keys(this[h]).length<this[l].length?!0:!y(this[h],this,!0)},saveState:function(l){var h=l&&l.propertySet||c,u="_"+h;return this[u]?(C(this,u,this[h]),l&&l.stateProperties&&C(this,u,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var h=l.propertySet||c;return l.propertySet=h,this["_"+h]={},this.saveState(l),this}})}(),function(){var b=a.util.degreesToRadians;a.util.object.extend(a.Object.prototype,{_findTargetCorner:function(c,C){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var y=c.x,l=c.y,h,u,p=Object.keys(this.oCoords),D=p.length-1,g;for(this.__corner=0;D>=0;D--)if(g=p[D],!!this.isControlVisible(g)&&(u=this._getImageLines(C?this.oCoords[g].touchCorner:this.oCoords[g].corner),h=this._findCrossPoints({x:y,y:l},u),h!==0&&h%2===1))return this.__corner=g,g;return!1},forEachControl:function(c){for(var C in this.controls)c(this.controls[C],C,this)},_setCornerCoords:function(){var c=this.oCoords;for(var C in c){var y=this.controls[C];c[C].corner=y.calcCornerCoords(this.angle,this.cornerSize,c[C].x,c[C].y,!1),c[C].touchCorner=y.calcCornerCoords(this.angle,this.touchCornerSize,c[C].x,c[C].y,!0)}},drawSelectionBackground:function(c){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;c.save();var C=this.getCenterPoint(),y=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return c.translate(C.x,C.y),c.scale(1/l[0],1/l[3]),c.rotate(b(this.angle)),c.fillStyle=this.selectionBackgroundColor,c.fillRect(-y.x/2,-y.y/2,y.x,y.y),c.restore(),this},drawBorders:function(c,C){C=C||{};var y=this._calculateCurrentDimensions(),l=this.borderScaleFactor,h=y.x+l,u=y.y+l,p=typeof C.hasControls<"u"?C.hasControls:this.hasControls,D=!1;return c.save(),c.strokeStyle=C.borderColor||this.borderColor,this._setLineDash(c,C.borderDashArray||this.borderDashArray),c.strokeRect(-h/2,-u/2,h,u),p&&(c.beginPath(),this.forEachControl(function(g,x,E){g.withConnection&&g.getVisibility(E,x)&&(D=!0,c.moveTo(g.x*h,g.y*u),c.lineTo(g.x*h+g.offsetX,g.y*u+g.offsetY))}),D&&c.stroke()),c.restore(),this},drawBordersInGroup:function(c,C,y){y=y||{};var l=a.util.sizeAfterTransform(this.width,this.height,C),h=this.strokeWidth,u=this.strokeUniform,p=this.borderScaleFactor,D=l.x+h*(u?this.canvas.getZoom():C.scaleX)+p,g=l.y+h*(u?this.canvas.getZoom():C.scaleY)+p;return c.save(),this._setLineDash(c,y.borderDashArray||this.borderDashArray),c.strokeStyle=y.borderColor||this.borderColor,c.strokeRect(-D/2,-g/2,D,g),c.restore(),this},drawControls:function(c,C){C=C||{},c.save();var y=this.canvas.getRetinaScaling(),l,h;return c.setTransform(y,0,0,y,0,0),c.strokeStyle=c.fillStyle=C.cornerColor||this.cornerColor,this.transparentCorners||(c.strokeStyle=C.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(c,C.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(u,p,D){h=D.oCoords[p],u.getVisibility(D,p)&&(l&&(h=a.util.transformPoint(h,l)),u.render(c,h.x,h.y,C,D))}),c.restore(),this},isControlVisible:function(c){return this.controls[c]&&this.controls[c].getVisibility(this,c)},setControlVisible:function(c,C){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[c]=C,this},setControlsVisibility:function(c){c||(c={});for(var C in c)this.setControlVisible(C,c[C]);return this},onDeselect:function(){},onSelect:function(){}})}(),a.util.object.extend(a.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(b,c){c=c||{};var C=function(){},y=c.onComplete||C,l=c.onChange||C,h=this;return a.util.animate({startValue:b.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(u){b.set("left",u),h.requestRenderAll(),l()},onComplete:function(){b.setCoords(),y()}}),this},fxCenterObjectV:function(b,c){c=c||{};var C=function(){},y=c.onComplete||C,l=c.onChange||C,h=this;return a.util.animate({startValue:b.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(u){b.set("top",u),h.requestRenderAll(),l()},onComplete:function(){b.setCoords(),y()}}),this},fxRemove:function(b,c){c=c||{};var C=function(){},y=c.onComplete||C,l=c.onChange||C,h=this;return a.util.animate({startValue:b.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(u){b.set("opacity",u),h.requestRenderAll(),l()},onComplete:function(){h.remove(b),y()}}),this}}),a.util.object.extend(a.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var b=[],c,C;for(c in arguments[0])b.push(c);for(var y=0,l=b.length;y<l;y++)c=b[y],C=y!==l-1,this._animate(c,arguments[0][c],arguments[1],C)}else this._animate.apply(this,arguments);return this},_animate:function(b,c,C,y){var l=this,h;c=c.toString(),C?C=a.util.object.clone(C):C={},~b.indexOf(".")&&(h=b.split("."));var u=l.colorProperties.indexOf(b)>-1||h&&l.colorProperties.indexOf(h[1])>-1,p=h?this.get(h[0])[h[1]]:this.get(b);"from"in C||(C.from=p),u||(~c.indexOf("=")?c=p+parseFloat(c.replace("=","")):c=parseFloat(c));var D={startValue:C.from,endValue:c,byValue:C.by,easing:C.easing,duration:C.duration,abort:C.abort&&function(g,x,E){return C.abort.call(l,g,x,E)},onChange:function(g,x,E){h?l[h[0]][h[1]]=g:l.set(b,g),!y&&C.onChange&&C.onChange(g,x,E)},onComplete:function(g,x,E){y||(l.setCoords(),C.onComplete&&C.onComplete(g,x,E))}};return u?a.util.animateColor(D.startValue,D.endValue,D.duration,D):a.util.animate(D)}}),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.extend,y=c.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(c.Line){c.warn("fabric.Line is already defined");return}c.Line=c.util.createClass(c.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:c.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(u,p){u||(u=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",u[0]),this.set("y1",u[1]),this.set("x2",u[2]),this.set("y2",u[3]),this._setWidthHeight(p)},_setWidthHeight:function(u){u||(u={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in u?u.left:this._getLeftToOriginX(),this.top="top"in u?u.top:this._getTopToOriginY()},_set:function(u,p){return this.callSuper("_set",u,p),typeof l[u]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:h({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:h({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(u){u.beginPath();var p=this.calcLinePoints();u.moveTo(p.x1,p.y1),u.lineTo(p.x2,p.y2),u.lineWidth=this.strokeWidth;var D=u.strokeStyle;u.strokeStyle=this.stroke||u.fillStyle,this.stroke&&this._renderStroke(u),u.strokeStyle=D},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(u){return C(this.callSuper("toObject",u),this.calcLinePoints())},_getNonTransformedDimensions:function(){var u=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(u.y-=this.strokeWidth),this.height===0&&(u.x-=this.strokeWidth)),u},calcLinePoints:function(){var u=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,D=u*this.width*.5,g=p*this.height*.5,x=u*this.width*-.5,E=p*this.height*-.5;return{x1:D,x2:x,y1:g,y2:E}},_toSVG:function(){var u=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`" />
`]}}),c.Line.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),c.Line.fromElement=function(u,p,D){D=D||{};var g=c.parseAttributes(u,c.Line.ATTRIBUTE_NAMES),x=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new c.Line(x,C(g,D)))},c.Line.fromObject=function(u,p){function D(x){delete x.points,p&&p(x)}var g=y(u,!0);g.points=[u.x1,u.y1,u.x2,u.y2],c.Object._fromObject("Line",g,D,"points")};function h(u,p){var D=u.origin,g=u.axis1,x=u.axis2,E=u.dimension,_=p.nearest,O=p.center,F=p.farthest;return function(){switch(this.get(D)){case _:return Math.min(this.get(g),this.get(x));case O:return Math.min(this.get(g),this.get(x))+.5*this.get(E);case F:return Math.max(this.get(g),this.get(x))}}}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=Math.PI;if(c.Circle){c.warn("fabric.Circle is already defined.");return}c.Circle=c.util.createClass(c.Object,{type:"circle",radius:0,startAngle:0,endAngle:C*2,cacheProperties:c.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,h){return this.callSuper("_set",l,h),l==="radius"&&this.setRadius(h),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,h=0,u=0,p=(this.endAngle-this.startAngle)%(2*C);if(p===0)l=["<circle ","COMMON_PARTS",'cx="'+h+'" cy="'+u+'" ','r="',this.radius,`" />
`];else{var D=c.util.cos(this.startAngle)*this.radius,g=c.util.sin(this.startAngle)*this.radius,x=c.util.cos(this.endAngle)*this.radius,E=c.util.sin(this.endAngle)*this.radius,_=p>C?"1":"0";l=['<path d="M '+D+" "+g," A "+this.radius+" "+this.radius," 0 ",+_+" 1"," "+x+" "+E,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),c.Circle.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),c.Circle.fromElement=function(l,h){var u=c.parseAttributes(l,c.Circle.ATTRIBUTE_NAMES);if(!y(u))throw new Error("value of `r` attribute is required and can not be negative");u.left=(u.left||0)-u.radius,u.top=(u.top||0)-u.radius,h(new c.Circle(u))};function y(l){return"radius"in l&&l.radius>=0}c.Circle.fromObject=function(l,h){c.Object._fromObject("Circle",l,h)}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={});if(c.Triangle){c.warn("fabric.Triangle is already defined");return}c.Triangle=c.util.createClass(c.Object,{type:"triangle",width:100,height:100,_render:function(C){var y=this.width/2,l=this.height/2;C.beginPath(),C.moveTo(-y,l),C.lineTo(0,-l),C.lineTo(y,l),C.closePath(),this._renderPaintInOrder(C)},_toSVG:function(){var C=this.width/2,y=this.height/2,l=[-C+" "+y,"0 "+-y,C+" "+y].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),c.Triangle.fromObject=function(C,y){return c.Object._fromObject("Triangle",C,y)}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=Math.PI*2;if(c.Ellipse){c.warn("fabric.Ellipse is already defined.");return}c.Ellipse=c.util.createClass(c.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:c.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(y){this.callSuper("initialize",y),this.set("rx",y&&y.rx||0),this.set("ry",y&&y.ry||0)},_set:function(y,l){switch(this.callSuper("_set",y,l),y){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(y){return this.callSuper("toObject",["rx","ry"].concat(y))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(y){y.beginPath(),y.save(),y.transform(1,0,0,this.ry/this.rx,0,0),y.arc(0,0,this.rx,0,C,!1),y.restore(),this._renderPaintInOrder(y)}}),c.Ellipse.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),c.Ellipse.fromElement=function(y,l){var h=c.parseAttributes(y,c.Ellipse.ATTRIBUTE_NAMES);h.left=(h.left||0)-h.rx,h.top=(h.top||0)-h.ry,l(new c.Ellipse(h))},c.Ellipse.fromObject=function(y,l){c.Object._fromObject("Ellipse",y,l)}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.extend;if(c.Rect){c.warn("fabric.Rect is already defined");return}c.Rect=c.util.createClass(c.Object,{stateProperties:c.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:c.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(y){this.callSuper("initialize",y),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(y){var l=this.rx?Math.min(this.rx,this.width/2):0,h=this.ry?Math.min(this.ry,this.height/2):0,u=this.width,p=this.height,D=-this.width/2,g=-this.height/2,x=l!==0||h!==0,E=1-.5522847498;y.beginPath(),y.moveTo(D+l,g),y.lineTo(D+u-l,g),x&&y.bezierCurveTo(D+u-E*l,g,D+u,g+E*h,D+u,g+h),y.lineTo(D+u,g+p-h),x&&y.bezierCurveTo(D+u,g+p-E*h,D+u-E*l,g+p,D+u-l,g+p),y.lineTo(D+l,g+p),x&&y.bezierCurveTo(D+E*l,g+p,D,g+p-E*h,D,g+p-h),y.lineTo(D,g+h),x&&y.bezierCurveTo(D,g+E*h,D+E*l,g,D+l,g),y.closePath(),this._renderPaintInOrder(y)},toObject:function(y){return this.callSuper("toObject",["rx","ry"].concat(y))},_toSVG:function(){var y=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',y,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),c.Rect.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),c.Rect.fromElement=function(y,l,h){if(!y)return l(null);h=h||{};var u=c.parseAttributes(y,c.Rect.ATTRIBUTE_NAMES);u.left=u.left||0,u.top=u.top||0,u.height=u.height||0,u.width=u.width||0;var p=new c.Rect(C(h?c.util.object.clone(h):{},u));p.visible=p.visible&&p.width>0&&p.height>0,l(p)},c.Rect.fromObject=function(y,l){return c.Object._fromObject("Rect",y,l)}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.extend,y=c.util.array.min,l=c.util.array.max,h=c.util.toFixed;if(c.Polyline){c.warn("fabric.Polyline is already defined");return}c.Polyline=c.util.createClass(c.Object,{type:"polyline",points:null,cacheProperties:c.Object.prototype.cacheProperties.concat("points"),initialize:function(u,p){p=p||{},this.points=u||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_setPositionDimensions:function(u){var p=this._calcDimensions(u),D;this.width=p.width,this.height=p.height,u.fromSVG||(D=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2,y:p.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof u.left>"u"&&(this.left=u.fromSVG?p.left:D.x),typeof u.top>"u"&&(this.top=u.fromSVG?p.top:D.y),this.pathOffset={x:p.left+this.width/2,y:p.top+this.height/2}},_calcDimensions:function(){var u=this.points,p=y(u,"x")||0,D=y(u,"y")||0,g=l(u,"x")||0,x=l(u,"y")||0,E=g-p,_=x-D;return{left:p,top:D,width:E,height:_}},toObject:function(u){return C(this.callSuper("toObject",u),{points:this.points.concat()})},_toSVG:function(){for(var u=[],p=this.pathOffset.x,D=this.pathOffset.y,g=c.Object.NUM_FRACTION_DIGITS,x=0,E=this.points.length;x<E;x++)u.push(h(this.points[x].x-p,g),",",h(this.points[x].y-D,g)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',u.join(""),`" />
`]},commonRender:function(u){var p,D=this.points.length,g=this.pathOffset.x,x=this.pathOffset.y;if(!D||isNaN(this.points[D-1].y))return!1;u.beginPath(),u.moveTo(this.points[0].x-g,this.points[0].y-x);for(var E=0;E<D;E++)p=this.points[E],u.lineTo(p.x-g,p.y-x);return!0},_render:function(u){this.commonRender(u)&&this._renderPaintInOrder(u)},complexity:function(){return this.get("points").length}}),c.Polyline.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polyline.fromElementGenerator=function(u){return function(p,D,g){if(!p)return D(null);g||(g={});var x=c.parsePointsAttribute(p.getAttribute("points")),E=c.parseAttributes(p,c[u].ATTRIBUTE_NAMES);E.fromSVG=!0,D(new c[u](x,C(E,g)))}},c.Polyline.fromElement=c.Polyline.fromElementGenerator("Polyline"),c.Polyline.fromObject=function(u,p){return c.Object._fromObject("Polyline",u,p,"points")}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={});if(c.Polygon){c.warn("fabric.Polygon is already defined");return}c.Polygon=c.util.createClass(c.Polyline,{type:"polygon",_render:function(C){this.commonRender(C)&&(C.closePath(),this._renderPaintInOrder(C))}}),c.Polygon.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polygon.fromElement=c.Polyline.fromElementGenerator("Polygon"),c.Polygon.fromObject=function(C,y){c.Object._fromObject("Polygon",C,y,"points")}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.array.min,y=c.util.array.max,l=c.util.object.extend,h=Object.prototype.toString,u=c.util.toFixed;if(c.Path){c.warn("fabric.Path is already defined");return}c.Path=c.util.createClass(c.Object,{type:"path",path:null,cacheProperties:c.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:c.Object.prototype.stateProperties.concat("path"),initialize:function(p,D){D=D||{},this.callSuper("initialize",D),p||(p=[]);var g=h.call(p)==="[object Array]";this.path=c.util.makePathSimpler(g?p:c.util.parsePath(p)),this.path&&c.Polyline.prototype._setPositionDimensions.call(this,D)},_renderPathCommands:function(p){var D,g=0,x=0,E=0,_=0,O=0,F=0,B=-this.pathOffset.x,W=-this.pathOffset.y;p.beginPath();for(var H=0,Y=this.path.length;H<Y;++H)switch(D=this.path[H],D[0]){case"L":E=D[1],_=D[2],p.lineTo(E+B,_+W);break;case"M":E=D[1],_=D[2],g=E,x=_,p.moveTo(E+B,_+W);break;case"C":E=D[5],_=D[6],O=D[3],F=D[4],p.bezierCurveTo(D[1]+B,D[2]+W,O+B,F+W,E+B,_+W);break;case"Q":p.quadraticCurveTo(D[1]+B,D[2]+W,D[3]+B,D[4]+W),E=D[3],_=D[4],O=D[1],F=D[2];break;case"z":case"Z":E=g,_=x,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return l(this.callSuper("toObject",p),{path:this.path.map(function(D){return D.slice()})})},toDatalessObject:function(p){var D=this.toObject(["sourcePath"].concat(p));return D.sourcePath&&delete D.path,D},_toSVG:function(){var p=c.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=c.Object.NUM_FRACTION_DIGITS;return" translate("+u(-this.pathOffset.x,p)+", "+u(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var D=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:D})},toSVG:function(p){var D=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:D})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],D=[],g,x=0,E=0,_=0,O=0,F,B=0,W=this.path.length;B<W;++B){switch(g=this.path[B],g[0]){case"L":_=g[1],O=g[2],F=[];break;case"M":_=g[1],O=g[2],x=_,E=O,F=[];break;case"C":F=c.util.getBoundsOfCurve(_,O,g[1],g[2],g[3],g[4],g[5],g[6]),_=g[5],O=g[6];break;case"Q":F=c.util.getBoundsOfCurve(_,O,g[1],g[2],g[1],g[2],g[3],g[4]),_=g[3],O=g[4];break;case"z":case"Z":_=x,O=E;break}F.forEach(function(me){p.push(me.x),D.push(me.y)}),p.push(_),D.push(O)}var H=C(p)||0,Y=C(D)||0,oe=y(p)||0,ne=y(D)||0,be=oe-H,Z=ne-Y;return{left:H,top:Y,width:be,height:Z}}}),c.Path.fromObject=function(p,D){if(typeof p.sourcePath=="string"){var g=p.sourcePath;c.loadSVGFromURL(g,function(x){var E=x[0];E.setOptions(p),D&&D(E)})}else c.Object._fromObject("Path",p,D,"path")},c.Path.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["d"]),c.Path.fromElement=function(p,D,g){var x=c.parseAttributes(p,c.Path.ATTRIBUTE_NAMES);x.fromSVG=!0,D(new c.Path(x.d,l(x,g)))}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.array.min,y=c.util.array.max;c.Group||(c.Group=c.util.createClass(c.Object,c.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,h,u){h=h||{},this._objects=[],u&&this.callSuper("initialize",h),this._objects=l||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(u)this._updateObjectsACoords();else{var D=h&&h.centerPoint;h.originX!==void 0&&(this.originX=h.originX),h.originY!==void 0&&(this.originY=h.originY),D||this._calcBounds(),this._updateObjectsCoords(D),delete h.centerPoint,this.callSuper("initialize",h)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,h=this._objects.length;h--;)this._objects[h].setCoords(l)},_updateObjectsCoords:function(h){for(var h=h||this.getCenterPoint(),u=this._objects.length;u--;)this._updateObjectCoords(this._objects[u],h)},_updateObjectCoords:function(l,h){var u=l.left,p=l.top,D=!0;l.set({left:u-h.x,top:p-h.y}),l.group=this,l.setCoords(D)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var h=!!this.group;return this._restoreObjectsState(),c.util.resetObjectTransform(this),l&&(h&&c.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,h?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),c.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,h){var u=this._objects.length;if(this.useSetOnGroup)for(;u--;)this._objects[u].setOnGroup(l,h);if(l==="canvas")for(;u--;)this._objects[u]._set(l,h);c.Object.prototype._set.call(this,l,h)},toObject:function(l){var h=this.includeDefaultValues,u=this._objects.filter(function(D){return!D.excludeFromExport}).map(function(D){var g=D.includeDefaultValues;D.includeDefaultValues=h;var x=D.toObject(l);return D.includeDefaultValues=g,x}),p=c.Object.prototype.toObject.call(this,l);return p.objects=u,p},toDatalessObject:function(l){var h,u=this.sourcePath;if(u)h=u;else{var p=this.includeDefaultValues;h=this._objects.map(function(g){var x=g.includeDefaultValues;g.includeDefaultValues=p;var E=g.toDatalessObject(l);return g.includeDefaultValues=x,E})}var D=c.Object.prototype.toDatalessObject.call(this,l);return D.objects=h,D},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=c.Object.prototype.shouldCache.call(this);if(l){for(var h=0,u=this._objects.length;h<u;h++)if(this._objects[h].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(c.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,h=this._objects.length;l<h;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var h=0,u=this._objects.length;h<u;h++)this._objects[h].render(l);this._drawClipPath(l)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var h=0,u=this._objects.length;h<u;h++)if(this._objects[h].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,D=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-D/2,p,D)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(h){c.util.addTransformToObject(h,l),delete h.group,h.setCoords()}),this},realizeTransform:function(l,h){return c.util.addTransformToObject(l,h),l},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var l=this._objects,h=this.canvas;this._objects=[];var u=this.toObject();delete u.objects;var p=new c.ActiveSelection([]);return p.set(u),p.type="activeSelection",h.remove(this),l.forEach(function(D){D.group=p,D.dirty=!0,h.add(D)}),p.canvas=h,p._objects=l,h._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(h){h.setCoords(l)}),this},_calcBounds:function(l){for(var h=[],u=[],p,D,g,x=["tr","br","bl","tl"],E=0,_=this._objects.length,O,F=x.length;E<_;++E){for(p=this._objects[E],g=p.calcACoords(),O=0;O<F;O++)D=x[O],h.push(g[D].x),u.push(g[D].y);p.aCoords=g}this._getBounds(h,u,l)},_getBounds:function(l,h,u){var p=new c.Point(C(l),C(h)),D=new c.Point(y(l),y(h)),g=p.y||0,x=p.x||0,E=D.x-p.x||0,_=D.y-p.y||0;this.width=E,this.height=_,u||this.setPositionByOrigin({x,y:g},"left","top")},_toSVG:function(l){for(var h=["<g ","COMMON_PARTS",` >
`],u=0,p=this._objects.length;u<p;u++)h.push("		",this._objects[u].toSVG(l));return h.push(`</g>
`),h},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",h=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),h].join("")},toClipPathSVG:function(l){for(var h=[],u=0,p=this._objects.length;u<p;u++)h.push("	",this._objects[u].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(h,{reviver:l})}}),c.Group.fromObject=function(l,h){var u=l.objects,p=c.util.object.clone(l,!0);if(delete p.objects,typeof u=="string"){c.loadSVGFromURL(u,function(D){var g=c.util.groupSVGElements(D,l,u);g.set(p),h&&h(g)});return}c.util.enlivenObjects(u,function(D){c.util.enlivenObjects([l.clipPath],function(g){var x=c.util.object.clone(l,!0);x.clipPath=g[0],delete x.objects,h&&h(new c.Group(D,x,!0))})})})}(I),function(b){"use strict";var c=b.fabric||(b.fabric={});c.ActiveSelection||(c.ActiveSelection=c.util.createClass(c.Group,{type:"activeSelection",initialize:function(C,y){y=y||{},this._objects=C||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;y.originX&&(this.originX=y.originX),y.originY&&(this.originY=y.originY),this._calcBounds(),this._updateObjectsCoords(),c.Object.prototype.initialize.call(this,y),this.setCoords()},toGroup:function(){var C=this._objects.concat();this._objects=[];var y=c.Object.prototype.toObject.call(this),l=new c.Group([]);if(delete y.type,l.set(y),C.forEach(function(u){u.canvas.remove(u),u.group=l}),l._objects=C,!this.canvas)return l;var h=this.canvas;return h.add(l),h._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(C,y,l){C.save(),C.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",C,y),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var h=0,u=this._objects.length;h<u;h++)this._objects[h]._renderControls(C,l);C.restore()}}),c.ActiveSelection.fromObject=function(C,y){c.util.enlivenObjects(C.objects,function(l){delete C.objects,y&&y(new c.ActiveSelection(l,C,!0))})})}(I),function(b){"use strict";var c=a.util.object.extend;if(b.fabric||(b.fabric={}),b.fabric.Image){a.warn("fabric.Image is already defined.");return}a.Image=a.util.createClass(a.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:a.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:a.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(C,y){y||(y={}),this.filters=[],this.cacheKey="texture"+a.Object.__uid++,this.callSuper("initialize",y),this._initElement(C,y)},getElement:function(){return this._element||{}},setElement:function(C,y){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=C,this._originalElement=C,this._initConfig(y),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(C){var y=a.filterBackend;y&&y.evictCachesForKey&&y.evictCachesForKey(C)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(C){a.util.cleanUpJsdomNode(this[C]),this[C]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var C=this.getElement();return{width:C.naturalWidth||C.width,height:C.naturalHeight||C.height}},_stroke:function(C){if(!(!this.stroke||this.strokeWidth===0)){var y=this.width/2,l=this.height/2;C.beginPath(),C.moveTo(-y,-l),C.lineTo(y,-l),C.lineTo(y,l),C.lineTo(-y,l),C.lineTo(-y,-l),C.closePath()}},toObject:function(C){var y=[];this.filters.forEach(function(h){h&&y.push(h.toObject())});var l=c(this.callSuper("toObject",["cropX","cropY"].concat(C)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:y});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var C=[],y=[],l,h=this._element,u=-this.width/2,p=-this.height/2,D="",g="";if(!h)return[];if(this.hasCrop()){var x=a.Object.__uid++;C.push('<clipPath id="imageCrop_'+x+`">
`,'	<rect x="'+u+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),D=' clip-path="url(#imageCrop_'+x+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),y.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',u-this.cropX,'" y="',p-this.cropY,'" width="',h.width||h.naturalWidth,'" height="',h.height||h.height,g,'"',D,`></image>
`),this.stroke||this.strokeDashArray){var E=this.fill;this.fill=null,l=["	<rect ",'x="',u,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=E}return this.paintFirst!=="fill"?C=C.concat(l,y):C=C.concat(y,l),C},getSrc:function(C){var y=C?this._element:this._originalElement;return y?y.toDataURL?y.toDataURL():this.srcFromAttribute?y.getAttribute("src"):y.src:this.src||""},setSrc:function(C,y,l){return a.util.loadImage(C,function(h,u){this.setElement(h,l),this._setWidthHeight(),y&&y(this,u)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var C=this.resizeFilter,y=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),h=l.scaleX,u=l.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!C||h>y&&u>y){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=h,this._lastScaleY=u;return}a.filterBackend||(a.filterBackend=a.initFilterBackend());var D=a.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,x=p.width,E=p.height;D.width=x,D.height=E,this._element=D,this._lastScaleX=C.scaleX=h,this._lastScaleY=C.scaleY=u,a.filterBackend.applyFilters([C],p,x,E,this._element,g),this._filterScalingX=D.width/this._originalElement.width,this._filterScalingY=D.height/this._originalElement.height},applyFilters:function(C){if(C=C||this.filters||[],C=C.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),C.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var y=this._originalElement,l=y.naturalWidth||y.width,h=y.naturalHeight||y.height;if(this._element===this._originalElement){var u=a.util.createCanvasElement();u.width=l,u.height=h,this._element=u,this._filteredEl=u}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,h),this._lastScaleX=1,this._lastScaleY=1;return a.filterBackend||(a.filterBackend=a.initFilterBackend()),a.filterBackend.applyFilters(C,this._originalElement,l,h,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(C){a.util.setImageSmoothing(C,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(C),this._renderPaintInOrder(C)},drawCacheOnCanvas:function(C){a.util.setImageSmoothing(C,this.imageSmoothing),a.Object.prototype.drawCacheOnCanvas.call(this,C)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(C){var y=this._element;if(y){var l=this._filterScalingX,h=this._filterScalingY,u=this.width,p=this.height,D=Math.min,g=Math.max,x=g(this.cropX,0),E=g(this.cropY,0),_=y.naturalWidth||y.width,O=y.naturalHeight||y.height,F=x*l,B=E*h,W=D(u*l,_-F),H=D(p*h,O-B),Y=-u/2,oe=-p/2,ne=D(u,_/l-x),be=D(p,O/h-E);y&&C.drawImage(y,F,B,W,H,Y,oe,ne,be)}},_needsResize:function(){var C=this.getTotalObjectScaling();return C.scaleX!==this._lastScaleX||C.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(C,y){this.setElement(a.util.getById(C),y),a.util.addClass(this.getElement(),a.Image.CSS_CANVAS)},_initConfig:function(C){C||(C={}),this.setOptions(C),this._setWidthHeight(C)},_initFilters:function(C,y){C&&C.length?a.util.enlivenObjects(C,function(l){y&&y(l)},"fabric.Image.filters"):y&&y()},_setWidthHeight:function(C){C||(C={});var y=this.getElement();this.width=C.width||y.naturalWidth||y.width||0,this.height=C.height||y.naturalHeight||y.height||0},parsePreserveAspectRatioAttribute:function(){var C=a.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),y=this._element.width,l=this._element.height,h=1,u=1,p=0,D=0,g=0,x=0,E,_=this.width,O=this.height,F={width:_,height:O};return C&&(C.alignX!=="none"||C.alignY!=="none")?(C.meetOrSlice==="meet"&&(h=u=a.util.findScaleToFit(this._element,F),E=(_-y*h)/2,C.alignX==="Min"&&(p=-E),C.alignX==="Max"&&(p=E),E=(O-l*u)/2,C.alignY==="Min"&&(D=-E),C.alignY==="Max"&&(D=E)),C.meetOrSlice==="slice"&&(h=u=a.util.findScaleToCover(this._element,F),E=y-_/h,C.alignX==="Mid"&&(g=E/2),C.alignX==="Max"&&(g=E),E=l-O/u,C.alignY==="Mid"&&(x=E/2),C.alignY==="Max"&&(x=E),y=_/h,l=O/u)):(h=_/y,u=O/l),{width:y,height:l,scaleX:h,scaleY:u,offsetLeft:p,offsetTop:D,cropX:g,cropY:x}}}),a.Image.CSS_CANVAS="canvas-img",a.Image.prototype.getSvgSrc=a.Image.prototype.getSrc,a.Image.fromObject=function(C,y){var l=a.util.object.clone(C);a.util.loadImage(l.src,function(h,u){if(u){y&&y(null,!0);return}a.Image.prototype._initFilters.call(l,l.filters,function(p){l.filters=p||[],a.Image.prototype._initFilters.call(l,[l.resizeFilter],function(D){l.resizeFilter=D[0],a.util.enlivenObjects([l.clipPath],function(g){l.clipPath=g[0];var x=new a.Image(h,l);y(x,!1)})})})},null,l.crossOrigin)},a.Image.fromURL=function(C,y,l){a.util.loadImage(C,function(h,u){y&&y(new a.Image(h,l),u)},null,l&&l.crossOrigin)},a.Image.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),a.Image.fromElement=function(C,y,l){var h=a.parseAttributes(C,a.Image.ATTRIBUTE_NAMES);a.Image.fromURL(h["xlink:href"],y,c(l?a.util.object.clone(l):{},h))}}(I),a.util.object.extend(a.Object.prototype,{_getAngleValueForStraighten:function(){var b=this.angle%360;return b>0?Math.round((b-1)/90)*90:Math.round(b/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(b){b=b||{};var c=function(){},C=b.onComplete||c,y=b.onChange||c,l=this;return a.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(h){l.rotate(h),y()},onComplete:function(){l.setCoords(),C()}}),this}}),a.util.object.extend(a.StaticCanvas.prototype,{straightenObject:function(b){return b.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(b){return b.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function b(C,y){var l="precision "+y+` float;
void main(){}`,h=C.createShader(C.FRAGMENT_SHADER);return C.shaderSource(h,l),C.compileShader(h),!!C.getShaderParameter(h,C.COMPILE_STATUS)}a.isWebglSupported=function(C){if(a.isLikelyNode)return!1;C=C||a.WebglFilterBackend.prototype.tileSize;var y=document.createElement("canvas"),l=y.getContext("webgl")||y.getContext("experimental-webgl"),h=!1;if(l){a.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),h=a.maxTextureSize>=C;for(var u=["highp","mediump","lowp"],p=0;p<3;p++)if(b(l,u[p])){a.webGlPrecision=u[p];break}}return this.isSupported=h,h},a.WebglFilterBackend=c;function c(C){C&&C.tileSize&&(this.tileSize=C.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}c.prototype={tileSize:2048,resources:{},setupGLContext:function(C,y){this.dispose(),this.createWebGLCanvas(C,y),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(C,y)},chooseFastestCopyGLTo2DMethod:function(C,y){var l=typeof window.performance<"u",h;try{new ImageData(1,1),h=!0}catch{h=!1}var u=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(l&&h&&u&&p){var D=a.util.createCanvasElement(),g=new ArrayBuffer(C*y*4);if(a.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=R;return}var x={imageBuffer:g,destinationWidth:C,destinationHeight:y,targetCanvas:D},E,_,O;D.width=C,D.height=y,E=window.performance.now(),k.call(x,this.gl,x),_=window.performance.now()-E,E=window.performance.now(),R.call(x,this.gl,x),O=window.performance.now()-E,_>O?(this.imageBuffer=g,this.copyGLTo2D=R):this.copyGLTo2D=k}},createWebGLCanvas:function(C,y){var l=a.util.createCanvasElement();l.width=C,l.height=y;var h={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},u=l.getContext("webgl",h);u||(u=l.getContext("experimental-webgl",h)),u&&(u.clearColor(0,0,0,0),this.canvas=l,this.gl=u)},applyFilters:function(C,y,l,h,u,p){var D=this.gl,g;p&&(g=this.getCachedTexture(p,y));var x={originalWidth:y.width||y.originalWidth,originalHeight:y.height||y.originalHeight,sourceWidth:l,sourceHeight:h,destinationWidth:l,destinationHeight:h,context:D,sourceTexture:this.createTexture(D,l,h,!g&&y),targetTexture:this.createTexture(D,l,h),originalTexture:g||this.createTexture(D,l,h,!g&&y),passes:C.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:u},E=D.createFramebuffer();return D.bindFramebuffer(D.FRAMEBUFFER,E),C.forEach(function(_){_&&_.applyTo(x)}),P(x),this.copyGLTo2D(D,x),D.bindTexture(D.TEXTURE_2D,null),D.deleteTexture(x.sourceTexture),D.deleteTexture(x.targetTexture),D.deleteFramebuffer(E),u.getContext("2d").setTransform(1,0,0,1,0,0),x},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(C,y,l,h){var u=C.createTexture();return C.bindTexture(C.TEXTURE_2D,u),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),h?C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,h):C.texImage2D(C.TEXTURE_2D,0,C.RGBA,y,l,0,C.RGBA,C.UNSIGNED_BYTE,null),u},getCachedTexture:function(C,y){if(this.textureCache[C])return this.textureCache[C];var l=this.createTexture(this.gl,y.width,y.height,y);return this.textureCache[C]=l,l},evictCachesForKey:function(C){this.textureCache[C]&&(this.gl.deleteTexture(this.textureCache[C]),delete this.textureCache[C])},copyGLTo2D:k,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var C=this.gl,y={renderer:"",vendor:""};if(!C)return y;var l=C.getExtension("WEBGL_debug_renderer_info");if(l){var h=C.getParameter(l.UNMASKED_RENDERER_WEBGL),u=C.getParameter(l.UNMASKED_VENDOR_WEBGL);h&&(y.renderer=h.toLowerCase()),u&&(y.vendor=u.toLowerCase())}return this.gpuInfo=y,y}}}();function P(b){var c=b.targetCanvas,C=c.width,y=c.height,l=b.destinationWidth,h=b.destinationHeight;(C!==l||y!==h)&&(c.width=l,c.height=h)}function k(b,c){var C=b.canvas,y=c.targetCanvas,l=y.getContext("2d");l.translate(0,y.height),l.scale(1,-1);var h=C.height-y.height;l.drawImage(C,0,h,y.width,y.height,0,0,y.width,y.height)}function R(b,c){var C=c.targetCanvas,y=C.getContext("2d"),l=c.destinationWidth,h=c.destinationHeight,u=l*h*4,p=new Uint8Array(this.imageBuffer,0,u),D=new Uint8ClampedArray(this.imageBuffer,0,u);b.readPixels(0,0,l,h,b.RGBA,b.UNSIGNED_BYTE,p);var g=new ImageData(D,l,h);y.putImageData(g,0,0)}(function(){"use strict";var b=function(){};a.Canvas2dFilterBackend=c;function c(){}c.prototype={evictCachesForKey:b,dispose:b,clearWebGLCaches:b,resources:{},applyFilters:function(C,y,l,h,u){var p=u.getContext("2d");p.drawImage(y,0,0,l,h);var D=p.getImageData(0,0,l,h),g=p.getImageData(0,0,l,h),x={sourceWidth:l,sourceHeight:h,imageData:D,originalEl:y,originalImageData:g,canvasEl:u,ctx:p,filterBackend:this};return C.forEach(function(E){E.applyTo(x)}),(x.imageData.width!==l||x.imageData.height!==h)&&(u.width=x.imageData.width,u.height=x.imageData.height),p.putImageData(x.imageData,0,0),x}}})(),a.Image=a.Image||{},a.Image.filters=a.Image.filters||{},a.Image.filters.BaseFilter=a.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(b){b&&this.setOptions(b)},setOptions:function(b){for(var c in b)this[c]=b[c]},createProgram:function(b,c,C){c=c||this.fragmentSource,C=C||this.vertexSource,a.webGlPrecision!=="highp"&&(c=c.replace(/precision highp float/g,"precision "+a.webGlPrecision+" float"));var y=b.createShader(b.VERTEX_SHADER);if(b.shaderSource(y,C),b.compileShader(y),!b.getShaderParameter(y,b.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+b.getShaderInfoLog(y));var l=b.createShader(b.FRAGMENT_SHADER);if(b.shaderSource(l,c),b.compileShader(l),!b.getShaderParameter(l,b.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+b.getShaderInfoLog(l));var h=b.createProgram();if(b.attachShader(h,y),b.attachShader(h,l),b.linkProgram(h),!b.getProgramParameter(h,b.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+b.getProgramInfoLog(h));var u=this.getAttributeLocations(b,h),p=this.getUniformLocations(b,h)||{};return p.uStepW=b.getUniformLocation(h,"uStepW"),p.uStepH=b.getUniformLocation(h,"uStepH"),{program:h,attributeLocations:u,uniformLocations:p}},getAttributeLocations:function(b,c){return{aPosition:b.getAttribLocation(c,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(b,c,C){var y=c.aPosition,l=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,l),b.enableVertexAttribArray(y),b.vertexAttribPointer(y,2,b.FLOAT,!1,0,0),b.bufferData(b.ARRAY_BUFFER,C,b.STATIC_DRAW)},_setupFrameBuffer:function(b){var c=b.context,C,y;b.passes>1?(C=b.destinationWidth,y=b.destinationHeight,(b.sourceWidth!==C||b.sourceHeight!==y)&&(c.deleteTexture(b.targetTexture),b.targetTexture=b.filterBackend.createTexture(c,C,y)),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b.targetTexture,0)):(c.bindFramebuffer(c.FRAMEBUFFER,null),c.finish())},_swapTextures:function(b){b.passes--,b.pass++;var c=b.targetTexture;b.targetTexture=b.sourceTexture,b.sourceTexture=c},isNeutralState:function(){var b=this.mainParameter,c=a.Image.filters[this.type].prototype;if(b)if(Array.isArray(c[b])){for(var C=c[b].length;C--;)if(this[b][C]!==c[b][C])return!1;return!0}else return c[b]===this[b];else return!1},applyTo:function(b){b.webgl?(this._setupFrameBuffer(b),this.applyToWebGL(b),this._swapTextures(b)):this.applyTo2d(b)},retrieveShader:function(b){return b.programCache.hasOwnProperty(this.type)||(b.programCache[this.type]=this.createProgram(b.context)),b.programCache[this.type]},applyToWebGL:function(b){var c=b.context,C=this.retrieveShader(b);b.pass===0&&b.originalTexture?c.bindTexture(c.TEXTURE_2D,b.originalTexture):c.bindTexture(c.TEXTURE_2D,b.sourceTexture),c.useProgram(C.program),this.sendAttributeData(c,C.attributeLocations,b.aPosition),c.uniform1f(C.uniformLocations.uStepW,1/b.sourceWidth),c.uniform1f(C.uniformLocations.uStepH,1/b.sourceHeight),this.sendUniformData(c,C.uniformLocations),c.viewport(0,0,b.destinationWidth,b.destinationHeight),c.drawArrays(c.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(b,c,C){b.activeTexture(C),b.bindTexture(b.TEXTURE_2D,c),b.activeTexture(b.TEXTURE0)},unbindAdditionalTexture:function(b,c){b.activeTexture(c),b.bindTexture(b.TEXTURE_2D,null),b.activeTexture(b.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(b){this[this.mainParameter]=b},sendUniformData:function(){},createHelpLayer:function(b){if(!b.helpLayer){var c=document.createElement("canvas");c.width=b.sourceWidth,c.height=b.sourceHeight,b.helpLayer=c}},toObject:function(){var b={type:this.type},c=this.mainParameter;return c&&(b[c]=this[c]),b},toJSON:function(){return this.toObject()}}),a.Image.filters.BaseFilter.fromObject=function(b,c){var C=new a.Image.filters[b.type](b);return c&&c(C),C},function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.ColorMatrix=y(C.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var h=l.imageData,u=h.data,p=u.length,D=this.matrix,g,x,E,_,O,F=this.colorsOnly;for(O=0;O<p;O+=4)g=u[O],x=u[O+1],E=u[O+2],F?(u[O]=g*D[0]+x*D[1]+E*D[2]+D[4]*255,u[O+1]=g*D[5]+x*D[6]+E*D[7]+D[9]*255,u[O+2]=g*D[10]+x*D[11]+E*D[12]+D[14]*255):(_=u[O+3],u[O]=g*D[0]+x*D[1]+E*D[2]+_*D[3]+D[4]*255,u[O+1]=g*D[5]+x*D[6]+E*D[7]+_*D[8]+D[9]*255,u[O+2]=g*D[10]+x*D[11]+E*D[12]+_*D[13]+D[14]*255,u[O+3]=g*D[15]+x*D[16]+E*D[17]+_*D[18]+D[19]*255)},getUniformLocations:function(l,h){return{uColorMatrix:l.getUniformLocation(h,"uColorMatrix"),uConstants:l.getUniformLocation(h,"uConstants")}},sendUniformData:function(l,h){var u=this.matrix,p=[u[0],u[1],u[2],u[3],u[5],u[6],u[7],u[8],u[10],u[11],u[12],u[13],u[15],u[16],u[17],u[18]],D=[u[4],u[9],u[14],u[19]];l.uniformMatrix4fv(h.uColorMatrix,!1,p),l.uniform4fv(h.uConstants,D)}}),c.Image.filters.ColorMatrix.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Brightness=y(C.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var h=l.imageData,u=h.data,p,D=u.length,g=Math.round(this.brightness*255);for(p=0;p<D;p+=4)u[p]=u[p]+g,u[p+1]=u[p+1]+g,u[p+2]=u[p+2]+g}},getUniformLocations:function(l,h){return{uBrightness:l.getUniformLocation(h,"uBrightness")}},sendUniformData:function(l,h){l.uniform1f(h.uBrightness,this.brightness)}}),c.Image.filters.Brightness.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.extend,y=c.Image.filters,l=c.util.createClass;y.Convolute=l(y.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(h){var u=Math.sqrt(this.matrix.length),p=this.type+"_"+u+"_"+(this.opaque?1:0),D=this.fragmentSource[p];return h.programCache.hasOwnProperty(p)||(h.programCache[p]=this.createProgram(h.context,D)),h.programCache[p]},applyTo2d:function(h){var u=h.imageData,p=u.data,D=this.matrix,g=Math.round(Math.sqrt(D.length)),x=Math.floor(g/2),E=u.width,_=u.height,O=h.ctx.createImageData(E,_),F=O.data,B=this.opaque?1:0,W,H,Y,oe,ne,be,Z,me,V,Le,Ce,ze,te;for(Ce=0;Ce<_;Ce++)for(Le=0;Le<E;Le++){for(ne=(Ce*E+Le)*4,W=0,H=0,Y=0,oe=0,te=0;te<g;te++)for(ze=0;ze<g;ze++)Z=Ce+te-x,be=Le+ze-x,!(Z<0||Z>=_||be<0||be>=E)&&(me=(Z*E+be)*4,V=D[te*g+ze],W+=p[me]*V,H+=p[me+1]*V,Y+=p[me+2]*V,B||(oe+=p[me+3]*V));F[ne]=W,F[ne+1]=H,F[ne+2]=Y,B?F[ne+3]=p[ne+3]:F[ne+3]=oe}h.imageData=O},getUniformLocations:function(h,u){return{uMatrix:h.getUniformLocation(u,"uMatrix"),uOpaque:h.getUniformLocation(u,"uOpaque"),uHalfSize:h.getUniformLocation(u,"uHalfSize"),uSize:h.getUniformLocation(u,"uSize")}},sendUniformData:function(h,u){h.uniform1fv(u.uMatrix,this.matrix)},toObject:function(){return C(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),c.Image.filters.Convolute.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Grayscale=y(C.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var h=l.imageData,u=h.data,p,D=u.length,g,x=this.mode;for(p=0;p<D;p+=4)x==="average"?g=(u[p]+u[p+1]+u[p+2])/3:x==="lightness"?g=(Math.min(u[p],u[p+1],u[p+2])+Math.max(u[p],u[p+1],u[p+2]))/2:x==="luminosity"&&(g=.21*u[p]+.72*u[p+1]+.07*u[p+2]),u[p]=g,u[p+1]=g,u[p+2]=g},retrieveShader:function(l){var h=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(h)){var u=this.fragmentSource[this.mode];l.programCache[h]=this.createProgram(l.context,u)}return l.programCache[h]},getUniformLocations:function(l,h){return{uMode:l.getUniformLocation(h,"uMode")}},sendUniformData:function(l,h){var u=1;l.uniform1i(h.uMode,u)},isNeutralState:function(){return!1}}),c.Image.filters.Grayscale.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Invert=y(C.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var h=l.imageData,u=h.data,p,D=u.length;for(p=0;p<D;p+=4)u[p]=255-u[p],u[p+1]=255-u[p+1],u[p+2]=255-u[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,h){return{uInvert:l.getUniformLocation(h,"uInvert")}},sendUniformData:function(l,h){l.uniform1i(h.uInvert,this.invert)}}),c.Image.filters.Invert.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.extend,y=c.Image.filters,l=c.util.createClass;y.Noise=l(y.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(h){if(this.noise!==0){var u=h.imageData,p=u.data,D,g=p.length,x=this.noise,E;for(D=0,g=p.length;D<g;D+=4)E=(.5-Math.random())*x,p[D]+=E,p[D+1]+=E,p[D+2]+=E}},getUniformLocations:function(h,u){return{uNoise:h.getUniformLocation(u,"uNoise"),uSeed:h.getUniformLocation(u,"uSeed")}},sendUniformData:function(h,u){h.uniform1f(u.uNoise,this.noise/255),h.uniform1f(u.uSeed,Math.random())},toObject:function(){return C(this.callSuper("toObject"),{noise:this.noise})}}),c.Image.filters.Noise.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Pixelate=y(C.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var h=l.imageData,u=h.data,p=h.height,D=h.width,g,x,E,_,O,F,B,W,H,Y,oe;for(x=0;x<p;x+=this.blocksize)for(E=0;E<D;E+=this.blocksize)for(g=x*4*D+E*4,_=u[g],O=u[g+1],F=u[g+2],B=u[g+3],Y=Math.min(x+this.blocksize,p),oe=Math.min(E+this.blocksize,D),W=x;W<Y;W++)for(H=E;H<oe;H++)g=W*4*D+H*4,u[g]=_,u[g+1]=O,u[g+2]=F,u[g+3]=B},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,h){return{uBlocksize:l.getUniformLocation(h,"uBlocksize"),uStepW:l.getUniformLocation(h,"uStepW"),uStepH:l.getUniformLocation(h,"uStepH")}},sendUniformData:function(l,h){l.uniform1f(h.uBlocksize,this.blocksize)}}),c.Image.filters.Pixelate.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.extend,y=c.Image.filters,l=c.util.createClass;y.RemoveColor=l(y.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(h){var u=h.imageData,p=u.data,D,g=this.distance*255,x,E,_,O=new c.Color(this.color).getSource(),F=[O[0]-g,O[1]-g,O[2]-g],B=[O[0]+g,O[1]+g,O[2]+g];for(D=0;D<p.length;D+=4)x=p[D],E=p[D+1],_=p[D+2],x>F[0]&&E>F[1]&&_>F[2]&&x<B[0]&&E<B[1]&&_<B[2]&&(p[D+3]=0)},getUniformLocations:function(h,u){return{uLow:h.getUniformLocation(u,"uLow"),uHigh:h.getUniformLocation(u,"uHigh")}},sendUniformData:function(h,u){var p=new c.Color(this.color).getSource(),D=parseFloat(this.distance),g=[0+p[0]/255-D,0+p[1]/255-D,0+p[2]/255-D,1],x=[p[0]/255+D,p[1]/255+D,p[2]/255+D,1];h.uniform4fv(u.uLow,g),h.uniform4fv(u.uHigh,x)},toObject:function(){return C(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),c.Image.filters.RemoveColor.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var h in l)C[h]=y(C.ColorMatrix,{type:h,matrix:l[h],mainParameter:!1,colorsOnly:!0}),c.Image.filters[h].fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric,C=c.Image.filters,y=c.util.createClass;C.BlendColor=y(C.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var h=this.type+"_"+this.mode,u;return l.programCache.hasOwnProperty(h)||(u=this.buildSource(this.mode),l.programCache[h]=this.createProgram(l.context,u)),l.programCache[h]},applyTo2d:function(l){var h=l.imageData,u=h.data,p=u.length,D,g,x,E,_,O,F,B=1-this.alpha;F=new c.Color(this.color).getSource(),D=F[0]*this.alpha,g=F[1]*this.alpha,x=F[2]*this.alpha;for(var W=0;W<p;W+=4)switch(E=u[W],_=u[W+1],O=u[W+2],this.mode){case"multiply":u[W]=E*D/255,u[W+1]=_*g/255,u[W+2]=O*x/255;break;case"screen":u[W]=255-(255-E)*(255-D)/255,u[W+1]=255-(255-_)*(255-g)/255,u[W+2]=255-(255-O)*(255-x)/255;break;case"add":u[W]=E+D,u[W+1]=_+g,u[W+2]=O+x;break;case"diff":case"difference":u[W]=Math.abs(E-D),u[W+1]=Math.abs(_-g),u[W+2]=Math.abs(O-x);break;case"subtract":u[W]=E-D,u[W+1]=_-g,u[W+2]=O-x;break;case"darken":u[W]=Math.min(E,D),u[W+1]=Math.min(_,g),u[W+2]=Math.min(O,x);break;case"lighten":u[W]=Math.max(E,D),u[W+1]=Math.max(_,g),u[W+2]=Math.max(O,x);break;case"overlay":u[W]=D<128?2*E*D/255:255-2*(255-E)*(255-D)/255,u[W+1]=g<128?2*_*g/255:255-2*(255-_)*(255-g)/255,u[W+2]=x<128?2*O*x/255:255-2*(255-O)*(255-x)/255;break;case"exclusion":u[W]=D+E-2*D*E/255,u[W+1]=g+_-2*g*_/255,u[W+2]=x+O-2*x*O/255;break;case"tint":u[W]=D+E*B,u[W+1]=g+_*B,u[W+2]=x+O*B}},getUniformLocations:function(l,h){return{uColor:l.getUniformLocation(h,"uColor")}},sendUniformData:function(l,h){var u=new c.Color(this.color).getSource();u[0]=this.alpha*u[0]/255,u[1]=this.alpha*u[1]/255,u[2]=this.alpha*u[2]/255,u[3]=this.alpha,l.uniform4fv(h.uColor,u)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),c.Image.filters.BlendColor.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric,C=c.Image.filters,y=c.util.createClass;C.BlendImage=y(C.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var h=this.type+"_"+this.mode,u=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(h)||(l.programCache[h]=this.createProgram(l.context,u)),l.programCache[h]},applyToWebGL:function(l){var h=l.context,u=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(h,u,h.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(h,h.TEXTURE1)},createTexture:function(l,h){return l.getCachedTexture(h.cacheKey,h._element)},calculateMatrix:function(){var l=this.image,h=l._element.width,u=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/h,-l.top/u,1]},applyTo2d:function(l){var h=l.imageData,u=l.filterBackend.resources,p=h.data,D=p.length,g=h.width,x=h.height,E,_,O,F,B,W,H,Y,oe,ne,be=this.image,Z;u.blendImage||(u.blendImage=c.util.createCanvasElement()),oe=u.blendImage,ne=oe.getContext("2d"),oe.width!==g||oe.height!==x?(oe.width=g,oe.height=x):ne.clearRect(0,0,g,x),ne.setTransform(be.scaleX,0,0,be.scaleY,be.left,be.top),ne.drawImage(be._element,0,0,g,x),Z=ne.getImageData(0,0,g,x).data;for(var me=0;me<D;me+=4)switch(B=p[me],W=p[me+1],H=p[me+2],Y=p[me+3],E=Z[me],_=Z[me+1],O=Z[me+2],F=Z[me+3],this.mode){case"multiply":p[me]=B*E/255,p[me+1]=W*_/255,p[me+2]=H*O/255,p[me+3]=Y*F/255;break;case"mask":p[me+3]=F;break}},getUniformLocations:function(l,h){return{uTransformMatrix:l.getUniformLocation(h,"uTransformMatrix"),uImage:l.getUniformLocation(h,"uImage")}},sendUniformData:function(l,h){var u=this.calculateMatrix();l.uniform1i(h.uImage,1),l.uniformMatrix3fv(h.uTransformMatrix,!1,u)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),c.Image.filters.BlendImage.fromObject=function(l,h){c.Image.fromObject(l.image,function(u){var p=c.util.object.clone(l);p.image=u,h(new c.Image.filters.BlendImage(p))})}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=Math.pow,y=Math.floor,l=Math.sqrt,h=Math.abs,u=Math.round,p=Math.sin,D=Math.ceil,g=c.Image.filters,x=c.util.createClass;g.Resize=x(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(E,_){return{uDelta:E.getUniformLocation(_,"uDelta"),uTaps:E.getUniformLocation(_,"uTaps")}},sendUniformData:function(E,_){E.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),E.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(E){var _=this.getFilterWindow(),O=this.type+"_"+_;if(!E.programCache.hasOwnProperty(O)){var F=this.generateShader(_);E.programCache[O]=this.createProgram(E.context,F)}return E.programCache[O]},getFilterWindow:function(){var E=this.tempScale;return Math.ceil(this.lanczosLobes/E)},getTaps:function(){for(var E=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,O=this.getFilterWindow(),F=new Array(O),B=1;B<=O;B++)F[B-1]=E(B*_);return F},generateShader:function(F){for(var _=new Array(F),O=this.fragmentSourceTOP,F,B=1;B<=F;B++)_[B-1]=B+".0 * uDelta";return O+="uniform float uTaps["+F+`];
`,O+=`void main() {
`,O+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,O+=`  float sum = 1.0;
`,_.forEach(function(W,H){O+="  color += texture2D(uTexture, vTexCoord + "+W+") * uTaps["+H+`];
`,O+="  color += texture2D(uTexture, vTexCoord - "+W+") * uTaps["+H+`];
`,O+="  sum += 2.0 * uTaps["+H+`];
`}),O+=`  gl_FragColor = color / sum;
`,O+="}",O},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(E){E.webgl?(E.passes++,this.width=E.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=E.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),E.destinationWidth=this.dW,this._setupFrameBuffer(E),this.applyToWebGL(E),this._swapTextures(E),E.sourceWidth=E.destinationWidth,this.height=E.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),E.destinationHeight=this.dH,this._setupFrameBuffer(E),this.applyToWebGL(E),this._swapTextures(E),E.sourceHeight=E.destinationHeight):this.applyTo2d(E)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(E){return function(_){if(_>=E||_<=-E)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var O=_/E;return p(_)/_*p(O)/O}},applyTo2d:function(E){var _=E.imageData,O=this.scaleX,F=this.scaleY;this.rcpScaleX=1/O,this.rcpScaleY=1/F;var B=_.width,W=_.height,H=u(B*O),Y=u(W*F),oe;this.resizeType==="sliceHack"?oe=this.sliceByTwo(E,B,W,H,Y):this.resizeType==="hermite"?oe=this.hermiteFastResize(E,B,W,H,Y):this.resizeType==="bilinear"?oe=this.bilinearFiltering(E,B,W,H,Y):this.resizeType==="lanczos"&&(oe=this.lanczosResize(E,B,W,H,Y)),E.imageData=oe},sliceByTwo:function(E,_,O,F,B){var W=E.imageData,H=.5,Y=!1,oe=!1,ne=_*H,be=O*H,Z=c.filterBackend.resources,me,V,Le=0,Ce=0,ze=_,te=0;for(Z.sliceByTwo||(Z.sliceByTwo=document.createElement("canvas")),me=Z.sliceByTwo,(me.width<_*1.5||me.height<O)&&(me.width=_*1.5,me.height=O),V=me.getContext("2d"),V.clearRect(0,0,_*1.5,O),V.putImageData(W,0,0),F=y(F),B=y(B);!Y||!oe;)_=ne,O=be,F<y(ne*H)?ne=y(ne*H):(ne=F,Y=!0),B<y(be*H)?be=y(be*H):(be=B,oe=!0),V.drawImage(me,Le,Ce,_,O,ze,te,ne,be),Le=ze,Ce=te,te+=be;return V.getImageData(Le,Ce,F,B)},lanczosResize:function(E,_,O,F,B){function W(q){var $,de,G,X,J,K,ve,he,Se,xe,De;for(te.x=(q+.5)*be,ae.x=y(te.x),$=0;$<B;$++){for(te.y=($+.5)*Z,ae.y=y(te.y),J=0,K=0,ve=0,he=0,Se=0,de=ae.x-Le;de<=ae.x+Le;de++)if(!(de<0||de>=_)){xe=y(1e3*h(de-te.x)),ze[xe]||(ze[xe]={});for(var le=ae.y-Ce;le<=ae.y+Ce;le++)le<0||le>=O||(De=y(1e3*h(le-te.y)),ze[xe][De]||(ze[xe][De]=ne(l(C(xe*me,2)+C(De*V,2))/1e3)),G=ze[xe][De],G>0&&(X=(le*_+de)*4,J+=G,K+=G*H[X],ve+=G*H[X+1],he+=G*H[X+2],Se+=G*H[X+3]))}X=($*F+q)*4,oe[X]=K/J,oe[X+1]=ve/J,oe[X+2]=he/J,oe[X+3]=Se/J}return++q<F?W(q):Y}var H=E.imageData.data,Y=E.ctx.createImageData(F,B),oe=Y.data,ne=this.lanczosCreate(this.lanczosLobes),be=this.rcpScaleX,Z=this.rcpScaleY,me=2/this.rcpScaleX,V=2/this.rcpScaleY,Le=D(be*this.lanczosLobes/2),Ce=D(Z*this.lanczosLobes/2),ze={},te={},ae={};return W(0)},bilinearFiltering:function(E,_,O,F,B){var W,H,Y,oe,ne,be,Z,me,V,Le,Ce,ze,te=0,ae,q=this.rcpScaleX,$=this.rcpScaleY,de=4*(_-1),G=E.imageData,X=G.data,J=E.ctx.createImageData(F,B),K=J.data;for(Z=0;Z<B;Z++)for(me=0;me<F;me++)for(ne=y(q*me),be=y($*Z),V=q*me-ne,Le=$*Z-be,ae=4*(be*_+ne),Ce=0;Ce<4;Ce++)W=X[ae+Ce],H=X[ae+4+Ce],Y=X[ae+de+Ce],oe=X[ae+de+4+Ce],ze=W*(1-V)*(1-Le)+H*V*(1-Le)+Y*Le*(1-V)+oe*V*Le,K[te++]=ze;return J},hermiteFastResize:function(E,_,O,F,B){for(var W=this.rcpScaleX,H=this.rcpScaleY,Y=D(W/2),oe=D(H/2),ne=E.imageData,be=ne.data,Z=E.ctx.createImageData(F,B),me=Z.data,V=0;V<B;V++)for(var Le=0;Le<F;Le++){for(var Ce=(Le+V*F)*4,ze=0,te=0,ae=0,q=0,$=0,de=0,G=0,X=(V+.5)*H,J=y(V*H);J<(V+1)*H;J++)for(var K=h(X-(J+.5))/oe,ve=(Le+.5)*W,he=K*K,Se=y(Le*W);Se<(Le+1)*W;Se++){var xe=h(ve-(Se+.5))/Y,De=l(he+xe*xe);De>1&&De<-1||(ze=2*De*De*De-3*De*De+1,ze>0&&(xe=4*(Se+J*_),G+=ze*be[xe+3],ae+=ze,be[xe+3]<255&&(ze=ze*be[xe+3]/250),q+=ze*be[xe],$+=ze*be[xe+1],de+=ze*be[xe+2],te+=ze))}me[Ce]=q/te,me[Ce+1]=$/te,me[Ce+2]=de/te,me[Ce+3]=G/ae}return Z},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),c.Image.filters.Resize.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Contrast=y(C.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var h=l.imageData,u,D,p=h.data,D=p.length,g=Math.floor(this.contrast*255),x=259*(g+255)/(255*(259-g));for(u=0;u<D;u+=4)p[u]=x*(p[u]-128)+128,p[u+1]=x*(p[u+1]-128)+128,p[u+2]=x*(p[u+2]-128)+128}},getUniformLocations:function(l,h){return{uContrast:l.getUniformLocation(h,"uContrast")}},sendUniformData:function(l,h){l.uniform1f(h.uContrast,this.contrast)}}),c.Image.filters.Contrast.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Saturation=y(C.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var h=l.imageData,u=h.data,p=u.length,D=-this.saturation,g,x;for(g=0;g<p;g+=4)x=Math.max(u[g],u[g+1],u[g+2]),u[g]+=x!==u[g]?(x-u[g])*D:0,u[g+1]+=x!==u[g+1]?(x-u[g+1])*D:0,u[g+2]+=x!==u[g+2]?(x-u[g+2])*D:0}},getUniformLocations:function(l,h){return{uSaturation:l.getUniformLocation(h,"uSaturation")}},sendUniformData:function(l,h){l.uniform1f(h.uSaturation,-this.saturation)}}),c.Image.filters.Saturation.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Vibrance=y(C.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var h=l.imageData,u=h.data,p=u.length,D=-this.vibrance,g,x,E,_;for(g=0;g<p;g+=4)x=Math.max(u[g],u[g+1],u[g+2]),E=(u[g]+u[g+1]+u[g+2])/3,_=Math.abs(x-E)*2/255*D,u[g]+=x!==u[g]?(x-u[g])*_:0,u[g+1]+=x!==u[g+1]?(x-u[g+1])*_:0,u[g+2]+=x!==u[g+2]?(x-u[g+2])*_:0}},getUniformLocations:function(l,h){return{uVibrance:l.getUniformLocation(h,"uVibrance")}},sendUniformData:function(l,h){l.uniform1f(h.uVibrance,-this.vibrance)}}),c.Image.filters.Vibrance.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Blur=y(C.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var h=l.filterBackend.resources,u,p,D=l.imageData.width,g=l.imageData.height;h.blurLayer1||(h.blurLayer1=c.util.createCanvasElement(),h.blurLayer2=c.util.createCanvasElement()),u=h.blurLayer1,p=h.blurLayer2,(u.width!==D||u.height!==g)&&(p.width=u.width=D,p.height=u.height=g);var x=u.getContext("2d"),E=p.getContext("2d"),_=15,O,F,B,W,H=this.blur*.06*.5;for(x.putImageData(l.imageData,0,0),E.clearRect(0,0,D,g),W=-_;W<=_;W++)O=(Math.random()-.5)/4,F=W/_,B=H*F*D+O,E.globalAlpha=1-Math.abs(F),E.drawImage(u,B,O),x.drawImage(p,0,0),E.globalAlpha=1,E.clearRect(0,0,p.width,p.height);for(W=-_;W<=_;W++)O=(Math.random()-.5)/4,F=W/_,B=H*F*g+O,E.globalAlpha=1-Math.abs(F),E.drawImage(u,O,B),x.drawImage(p,0,0),E.globalAlpha=1,E.clearRect(0,0,p.width,p.height);l.ctx.drawImage(u,0,0);var Y=l.ctx.getImageData(0,0,u.width,u.height);return x.globalAlpha=1,x.clearRect(0,0,u.width,u.height),Y},getUniformLocations:function(l,h){return{delta:l.getUniformLocation(h,"uDelta")}},sendUniformData:function(l,h){var u=this.chooseRightDelta();l.uniform2fv(h.delta,u)},chooseRightDelta:function(){var l=1,h=[0,0],u;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),u=l*this.blur*.12,this.horizontal?h[0]=u:h[1]=u,h}}),C.Blur.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Gamma=y(C.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],C.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var h=l.imageData,u=h.data,p=this.gamma,D=u.length,g=1/p[0],x=1/p[1],E=1/p[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,D=256;_<D;_++)this.rVals[_]=Math.pow(_/255,g)*255,this.gVals[_]=Math.pow(_/255,x)*255,this.bVals[_]=Math.pow(_/255,E)*255;for(_=0,D=u.length;_<D;_+=4)u[_]=this.rVals[u[_]],u[_+1]=this.gVals[u[_+1]],u[_+2]=this.bVals[u[_+2]]},getUniformLocations:function(l,h){return{uGamma:l.getUniformLocation(h,"uGamma")}},sendUniformData:function(l,h){l.uniform3fv(h.uGamma,this.gamma)}}),c.Image.filters.Gamma.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.Composed=y(C.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(h){h.applyTo(l)})},toObject:function(){return c.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),c.Image.filters.Composed.fromObject=function(l,h){var u=l.subFilters||[],p=u.map(function(g){return new c.Image.filters[g.type](g)}),D=new c.Image.filters.Composed({subFilters:p});return h&&h(D),D}}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.Image.filters,y=c.util.createClass;C.HueRotation=y(C.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,h=c.util.cos(l),u=c.util.sin(l),p=1/3,D=Math.sqrt(p)*u,g=1-h;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=h+g/3,this.matrix[1]=p*g-D,this.matrix[2]=p*g+D,this.matrix[5]=p*g+D,this.matrix[6]=h+p*g,this.matrix[7]=p*g-D,this.matrix[10]=p*g-D,this.matrix[11]=p*g+D,this.matrix[12]=h+p*g},isNeutralState:function(l){return this.calculateMatrix(),C.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),C.BaseFilter.prototype.applyTo.call(this,l)}}),c.Image.filters.HueRotation.fromObject=c.Image.filters.BaseFilter.fromObject}(I),function(b){"use strict";var c=b.fabric||(b.fabric={}),C=c.util.object.clone;if(c.Text){c.warn("fabric.Text is already defined");return}var y="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");c.Text=c.util.createClass(c.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:c.Object.prototype.stateProperties.concat(y),cacheProperties:c.Object.prototype.cacheProperties.concat(y),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,h){this.styles=h?h.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",h),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=c.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return c._measuringContext||(c._measuringContext=this.canvas&&this.canvas.contextCache||c.util.createCanvasElement().getContext("2d")),c._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,h,u,p,D,g,x,E=0,_=this._textLines.length;E<_;E++)if(!(this.textAlign!=="justify"&&(E===_-1||this.isEndOfWrapping(E)))&&(p=0,D=this._textLines[E],h=this.getLineWidth(E),h<this.width&&(x=this.textLines[E].match(this._reSpacesAndTabs)))){u=x.length,l=(this.width-h)/u;for(var O=0,F=D.length;O<=F;O++)g=this.__charBounds[E][O],this._reSpaceAndTab.test(D[O])?(g.width+=l,g.kernedWidth+=l,g.left+=p,p+=l):g.left+=p}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),h=this.fontSize;return l.width+=h*l.zoomX,l.height+=h*l.zoomY,l},_render:function(l){var h=this.path;h&&!h.isNotVisible()&&h._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,h,u){l.textBaseline="alphabetic",l.font=this._getFontDeclaration(h,u)},calcTextWidth:function(){for(var l=this.getLineWidth(0),h=1,u=this._textLines.length;h<u;h++){var p=this.getLineWidth(h);p>l&&(l=p)}return l},_renderTextLine:function(l,h,u,p,D,g){this._renderChars(l,h,u,p,D,g)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var h,u,p=l.fillStyle,D,g,x=this._getLeftOffset(),E=this._getTopOffset(),_=0,O=0,F,B,W=this.path,H,Y=0,oe=this._textLines.length;Y<oe;Y++){if(h=this.getHeightOfLine(Y),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Y)){E+=h;continue}D=this._textLines[Y],u=this._getLineLeftOffset(Y),O=0,_=0,g=this.getValueOfPropertyAt(Y,0,"textBackgroundColor");for(var ne=0,be=D.length;ne<be;ne++)F=this.__charBounds[Y][ne],B=this.getValueOfPropertyAt(Y,ne,"textBackgroundColor"),W?(l.save(),l.translate(F.renderLeft,F.renderTop),l.rotate(F.angle),l.fillStyle=B,B&&l.fillRect(-F.width/2,-h/this.lineHeight*(1-this._fontSizeFraction),F.width,h/this.lineHeight),l.restore()):B!==g?(H=x+u+_,this.direction==="rtl"&&(H=this.width-H-O),l.fillStyle=g,g&&l.fillRect(H,E,O,h/this.lineHeight),_=F.left,O=F.width,g=B):O+=F.kernedWidth;B&&!W&&(H=x+u+_,this.direction==="rtl"&&(H=this.width-H-O),l.fillStyle=B,l.fillRect(H,E,O,h/this.lineHeight)),E+=h}l.fillStyle=p,this._removeShadow(l)}},getFontCache:function(l){var h=l.fontFamily.toLowerCase();c.charWidthsCache[h]||(c.charWidthsCache[h]={});var u=c.charWidthsCache[h],p=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return u[p]||(u[p]={}),u[p]},_measureChar:function(l,h,u,p){var D=this.getFontCache(h),g=this._getFontDeclaration(h),x=this._getFontDeclaration(p),E=u+l,_=g===x,O,F,B,W=h.fontSize/this.CACHE_FONT_SIZE,H;if(u&&D[u]!==void 0&&(B=D[u]),D[l]!==void 0&&(H=O=D[l]),_&&D[E]!==void 0&&(F=D[E],H=F-B),O===void 0||B===void 0||F===void 0){var Y=this.getMeasuringContext();this._setTextStyles(Y,h,!0)}return O===void 0&&(H=O=Y.measureText(l).width,D[l]=O),B===void 0&&_&&u&&(B=Y.measureText(u).width,D[u]=B),_&&F===void 0&&(F=Y.measureText(E).width,D[E]=F,H=F-B),{width:O*W,kernedWidth:H*W}},getHeightOfChar:function(l,h){return this.getValueOfPropertyAt(l,h,"fontSize")},measureLine:function(l){var h=this._measureLine(l);return this.charSpacing!==0&&(h.width-=this._getWidthOfCharSpacing()),h.width<0&&(h.width=0),h},_measureLine:function(l){var h=0,u,p,D=this._textLines[l],g,x,E=0,_=new Array(D.length),O=0,F,B,W=this.path,H=this.pathSide==="right";for(this.__charBounds[l]=_,u=0;u<D.length;u++)p=D[u],x=this._getGraphemeBox(p,l,u,g),_[u]=x,h+=x.kernedWidth,g=p;if(_[u]={left:x?x.left+x.width:0,width:0,kernedWidth:0,height:this.fontSize},W){switch(B=W.segmentsInfo[W.segmentsInfo.length-1].length,F=c.util.getPointOnPath(W.path,0,W.segmentsInfo),F.x+=W.pathOffset.x,F.y+=W.pathOffset.y,this.textAlign){case"left":O=H?B-h:0;break;case"center":O=(B-h)/2;break;case"right":O=H?0:B-h;break}for(O+=this.pathStartOffset*(H?-1:1),u=H?D.length-1:0;H?u>=0:u<D.length;H?u--:u++)x=_[u],O>B?O%=B:O<0&&(O+=B),this._setGraphemeOnPath(O,x,F),O+=x.kernedWidth}return{width:h,numOfSpaces:E}},_setGraphemeOnPath:function(l,h,u){var p=l+h.kernedWidth/2,D=this.path,g=c.util.getPointOnPath(D.path,p,D.segmentsInfo);h.renderLeft=g.x-u.x,h.renderTop=g.y-u.y,h.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,h,u,p,D){var g=this.getCompleteStyleDeclaration(h,u),x=p?this.getCompleteStyleDeclaration(h,u-1):{},E=this._measureChar(l,g,p,x),_=E.kernedWidth,O=E.width,F;this.charSpacing!==0&&(F=this._getWidthOfCharSpacing(),O+=F,_+=F);var B={width:O,left:0,height:g.fontSize,kernedWidth:_,deltaY:g.deltaY};if(u>0&&!D){var W=this.__charBounds[h][u-1];B.left=W.left+W.width+E.kernedWidth-E.width}return B},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var h=this._textLines[l],u=this.getHeightOfChar(l,0),p=1,D=h.length;p<D;p++)u=Math.max(this.getHeightOfChar(l,p),u);return this.__lineHeights[l]=u*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,h=0,u=0,p=this._textLines.length;u<p;u++)l=this.getHeightOfLine(u),h+=u===p-1?l/this.lineHeight:l;return h},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,h){l.save();for(var u=0,p=this._getLeftOffset(),D=this._getTopOffset(),g=0,x=this._textLines.length;g<x;g++){var E=this.getHeightOfLine(g),_=E/this.lineHeight,O=this._getLineLeftOffset(g);this._renderTextLine(h,l,this._textLines[g],p+O,D+u+_,g),u+=E}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,h,u,p,D,g){var x=this.getHeightOfLine(g),E=this.textAlign.indexOf("justify")!==-1,_,O,F="",B,W=0,H,Y=this.path,oe=!E&&this.charSpacing===0&&this.isEmptyStyles(g)&&!Y,ne=this.direction==="ltr",be=this.direction==="ltr"?1:-1,Z;if(h.save(),D-=x*this._fontSizeFraction/this.lineHeight,oe){h.canvas.setAttribute("dir",ne?"ltr":"rtl"),h.direction=ne?"ltr":"rtl",h.textAlign=ne?"left":"right",this._renderChar(l,h,g,0,u.join(""),p,D,x),h.restore();return}for(var me=0,V=u.length-1;me<=V;me++)H=me===V||this.charSpacing||Y,F+=u[me],B=this.__charBounds[g][me],W===0?(p+=be*(B.kernedWidth-B.width),W+=B.width):W+=B.kernedWidth,E&&!H&&this._reSpaceAndTab.test(u[me])&&(H=!0),H||(_=_||this.getCompleteStyleDeclaration(g,me),O=this.getCompleteStyleDeclaration(g,me+1),H=this._hasStyleChanged(_,O)),H&&(Y?(h.save(),h.translate(B.renderLeft,B.renderTop),h.rotate(B.angle),this._renderChar(l,h,g,me,F,-W/2,0,x),h.restore()):(Z=p,h.canvas.setAttribute("dir",ne?"ltr":"rtl"),h.direction=ne?"ltr":"rtl",h.textAlign=ne?"left":"right",this._renderChar(l,h,g,me,F,Z,D,x)),F="",_=O,p+=be*W,W=0);h.restore()},_applyPatternGradientTransformText:function(l){var h=c.util.createCanvasElement(),u,p=this.width+this.strokeWidth,D=this.height+this.strokeWidth;return h.width=p,h.height=D,u=h.getContext("2d"),u.beginPath(),u.moveTo(0,0),u.lineTo(p,0),u.lineTo(p,D),u.lineTo(0,D),u.closePath(),u.translate(p/2,D/2),u.fillStyle=l.toLive(u),this._applyPatternGradientTransform(u,l),u.fill(),u.createPattern(h,"no-repeat")},handleFiller:function(l,h,u){var p,D;return u.toLive?u.gradientUnits==="percentage"||u.gradientTransform||u.patternTransform?(p=-this.width/2,D=-this.height/2,l.translate(p,D),l[h]=this._applyPatternGradientTransformText(u),{offsetX:p,offsetY:D}):(l[h]=u.toLive(l,this),this._applyPatternGradientTransform(l,u)):(l[h]=u,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,h){return l.lineWidth=h.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",h.stroke)},_setFillStyles:function(l,h){return this.handleFiller(l,"fillStyle",h.fill)},_renderChar:function(l,h,u,p,D,g,x){var E=this._getStyleDeclaration(u,p),_=this.getCompleteStyleDeclaration(u,p),O=l==="fillText"&&_.fill,F=l==="strokeText"&&_.stroke&&_.strokeWidth,B,W;!F&&!O||(h.save(),O&&(B=this._setFillStyles(h,_)),F&&(W=this._setStrokeStyles(h,_)),h.font=this._getFontDeclaration(_),E&&E.textBackgroundColor&&this._removeShadow(h),E&&E.deltaY&&(x+=E.deltaY),O&&h.fillText(D,g-B.offsetX,x-B.offsetY),F&&h.strokeText(D,g-W.offsetX,x-W.offsetY),h.restore())},setSuperscript:function(l,h){return this._setScript(l,h,this.superscript)},setSubscript:function(l,h){return this._setScript(l,h,this.subscript)},_setScript:function(l,h,u){var p=this.get2DCursorLocation(l,!0),D=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),x={fontSize:D*u.size,deltaY:g+D*u.baseline};return this.setSelectionStyles(x,l,h),this},_hasStyleChanged:function(l,h){return l.fill!==h.fill||l.stroke!==h.stroke||l.strokeWidth!==h.strokeWidth||l.fontSize!==h.fontSize||l.fontFamily!==h.fontFamily||l.fontWeight!==h.fontWeight||l.fontStyle!==h.fontStyle||l.deltaY!==h.deltaY},_hasStyleChangedForSvg:function(l,h){return this._hasStyleChanged(l,h)||l.overline!==h.overline||l.underline!==h.underline||l.linethrough!==h.linethrough},_getLineLeftOffset:function(l){var h=this.getLineWidth(l),u=this.width-h,p=this.textAlign,D=this.direction,x,g=0,x=this.isEndOfWrapping(l);return p==="justify"||p==="justify-center"&&!x||p==="justify-right"&&!x||p==="justify-left"&&!x?0:(p==="center"&&(g=u/2),p==="right"&&(g=u),p==="justify-center"&&(g=u/2),p==="justify-right"&&(g=u),D==="rtl"&&(g-=u),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l])return this.__lineWidths[l];var h,u=this._textLines[l],p;return u===""?h=0:(p=this.measureLine(l),h=p.width),this.__lineWidths[l]=h,h},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,h,u){var p=this._getStyleDeclaration(l,h);return p&&typeof p[u]<"u"?p[u]:this[u]},_renderTextDecoration:function(l,h){if(!(!this[h]&&!this.styleHas(h))){for(var u,p,D,g,x,E,_,O,F=this._getLeftOffset(),B=this._getTopOffset(),W,H,Y,oe,ne,be,Z,me,V=this.path,Le=this._getWidthOfCharSpacing(),Ce=this.offsets[h],ze=0,te=this._textLines.length;ze<te;ze++){if(u=this.getHeightOfLine(ze),!this[h]&&!this.styleHas(h,ze)){B+=u;continue}_=this._textLines[ze],be=u/this.lineHeight,g=this._getLineLeftOffset(ze),H=0,Y=0,O=this.getValueOfPropertyAt(ze,0,h),me=this.getValueOfPropertyAt(ze,0,"fill"),W=B+be*(1-this._fontSizeFraction),p=this.getHeightOfChar(ze,0),x=this.getValueOfPropertyAt(ze,0,"deltaY");for(var ae=0,q=_.length;ae<q;ae++)if(oe=this.__charBounds[ze][ae],ne=this.getValueOfPropertyAt(ze,ae,h),Z=this.getValueOfPropertyAt(ze,ae,"fill"),D=this.getHeightOfChar(ze,ae),E=this.getValueOfPropertyAt(ze,ae,"deltaY"),V&&ne&&Z)l.save(),l.fillStyle=me,l.translate(oe.renderLeft,oe.renderTop),l.rotate(oe.angle),l.fillRect(-oe.kernedWidth/2,Ce*D+E,oe.kernedWidth,this.fontSize/15),l.restore();else if((ne!==O||Z!==me||D!==p||E!==x)&&Y>0){var $=F+g+H;this.direction==="rtl"&&($=this.width-$-Y),O&&me&&(l.fillStyle=me,l.fillRect($,W+Ce*p+x,Y,this.fontSize/15)),H=oe.left,Y=oe.width,O=ne,me=Z,p=D,x=E}else Y+=oe.kernedWidth;var $=F+g+H;this.direction==="rtl"&&($=this.width-$-Y),l.fillStyle=Z,ne&&Z&&l.fillRect($,W+Ce*p+x,Y-Le,this.fontSize/15),B+=u}this._removeShadow(l)}},_getFontDeclaration:function(l,h){var u=l||this,p=this.fontFamily,D=c.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||D?u.fontFamily:'"'+u.fontFamily+'"';return[c.isLikelyNode?u.fontWeight:u.fontStyle,c.isLikelyNode?u.fontStyle:u.fontWeight,h?this.CACHE_FONT_SIZE+"px":u.fontSize+"px",g].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var h=l.split(this._reNewline),u=new Array(h.length),p=[`
`],D=[],g=0;g<h.length;g++)u[g]=c.util.string.graphemeSplit(h[g]),D=D.concat(u[g],p);return D.pop(),{_unwrappedLines:u,lines:h,graphemeText:D,graphemeLines:u}},toObject:function(l){var h=y.concat(l),u=this.callSuper("toObject",h);return u.styles=C(this.styles,!0),u.path&&(u.path=this.path.toObject()),u},set:function(l,h){this.callSuper("set",l,h);var u=!1,p=!1;if(typeof l=="object")for(var D in l)D==="path"&&this.setPathInfo(),u=u||this._dimensionAffectingProps.indexOf(D)!==-1,p=p||D==="path";else u=this._dimensionAffectingProps.indexOf(l)!==-1,p=l==="path";return p&&this.setPathInfo(),u&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),c.Text.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),c.Text.DEFAULT_SVG_FONT_SIZE=16,c.Text.fromElement=function(l,h,u){if(!l)return h(null);var p=c.parseAttributes(l,c.Text.ATTRIBUTE_NAMES),D=p.textAnchor||"left";if(u=c.util.object.extend(u?C(u):{},p),u.top=u.top||0,u.left=u.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(u.underline=!0),g.indexOf("overline")!==-1&&(u.overline=!0),g.indexOf("line-through")!==-1&&(u.linethrough=!0),delete u.textDecoration}"dx"in p&&(u.left+=p.dx),"dy"in p&&(u.top+=p.dy),"fontSize"in u||(u.fontSize=c.Text.DEFAULT_SVG_FONT_SIZE);var x="";"textContent"in l?x=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(x=l.firstChild.data),x=x.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var E=u.strokeWidth;u.strokeWidth=0;var _=new c.Text(x,u),O=_.getScaledHeight()/_.height,F=(_.height+_.strokeWidth)*_.lineHeight-_.height,B=F*O,W=_.getScaledHeight()+B,H=0;D==="center"&&(H=_.getScaledWidth()/2),D==="right"&&(H=_.getScaledWidth()),_.set({left:_.left-H,top:_.top-(W-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof E<"u"?E:1}),h(_)},c.Text.fromObject=function(l,h){var u=C(l),p=l.path;return delete u.path,c.Object._fromObject("Text",u,function(D){p?c.Object._fromObject("Path",p,function(g){D.set("path",g),h(D)},"path"):h(D)},"text")},c.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],c.util.createAccessors&&c.util.createAccessors(c.Text)}(I),function(){a.util.object.extend(a.Text.prototype,{isEmptyStyles:function(b){if(!this.styles||typeof b<"u"&&!this.styles[b])return!0;var c=typeof b>"u"?this.styles:{line:this.styles[b]};for(var C in c)for(var y in c[C])for(var l in c[C][y])return!1;return!0},styleHas:function(b,c){if(!this.styles||!b||b===""||typeof c<"u"&&!this.styles[c])return!1;var C=typeof c>"u"?this.styles:{0:this.styles[c]};for(var y in C)for(var l in C[y])if(typeof C[y][l][b]<"u")return!0;return!1},cleanStyle:function(b){if(!this.styles||!b||b==="")return!1;var c=this.styles,C=0,y,l,h=!0,u=0,p;for(var D in c){y=0;for(var g in c[D]){var p=c[D][g],x=p.hasOwnProperty(b);C++,x?(l?p[b]!==l&&(h=!1):l=p[b],p[b]===this[b]&&delete p[b]):h=!1,Object.keys(p).length!==0?y++:delete c[D][g]}y===0&&delete c[D]}for(var E=0;E<this._textLines.length;E++)u+=this._textLines[E].length;h&&C===u&&(this[b]=l,this.removeStyle(b))},removeStyle:function(b){if(!(!this.styles||!b||b==="")){var c=this.styles,C,y,l;for(y in c){C=c[y];for(l in C)delete C[l][b],Object.keys(C[l]).length===0&&delete C[l];Object.keys(C).length===0&&delete c[y]}}},_extendStyles:function(b,c){var C=this.get2DCursorLocation(b);this._getLineStyle(C.lineIndex)||this._setLineStyle(C.lineIndex),this._getStyleDeclaration(C.lineIndex,C.charIndex)||this._setStyleDeclaration(C.lineIndex,C.charIndex,{}),a.util.object.extend(this._getStyleDeclaration(C.lineIndex,C.charIndex),c)},get2DCursorLocation:function(b,c){typeof b>"u"&&(b=this.selectionStart);for(var C=c?this._unwrappedTextLines:this._textLines,y=C.length,l=0;l<y;l++){if(b<=C[l].length)return{lineIndex:l,charIndex:b};b-=C[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:C[l-1].length<b?C[l-1].length:b}},getSelectionStyles:function(b,c,C){typeof b>"u"&&(b=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||b);for(var y=[],l=b;l<c;l++)y.push(this.getStyleAtPosition(l,C));return y},getStyleAtPosition:function(b,c){var C=this.get2DCursorLocation(b),y=c?this.getCompleteStyleDeclaration(C.lineIndex,C.charIndex):this._getStyleDeclaration(C.lineIndex,C.charIndex);return y||{}},setSelectionStyles:function(b,c,C){typeof c>"u"&&(c=this.selectionStart||0),typeof C>"u"&&(C=this.selectionEnd||c);for(var y=c;y<C;y++)this._extendStyles(y,b);return this._forceClearCache=!0,this},_getStyleDeclaration:function(b,c){var C=this.styles&&this.styles[b];return C?C[c]:null},getCompleteStyleDeclaration:function(b,c){for(var C=this._getStyleDeclaration(b,c)||{},y={},l,h=0;h<this._styleProperties.length;h++)l=this._styleProperties[h],y[l]=typeof C[l]>"u"?this[l]:C[l];return y},_setStyleDeclaration:function(b,c,C){this.styles[b][c]=C},_deleteStyleDeclaration:function(b,c){delete this.styles[b][c]},_getLineStyle:function(b){return!!this.styles[b]},_setLineStyle:function(b){this.styles[b]={}},_deleteLineStyle:function(b){delete this.styles[b]}})}(),function(){function b(c){c.textDecoration&&(c.textDecoration.indexOf("underline")>-1&&(c.underline=!0),c.textDecoration.indexOf("line-through")>-1&&(c.linethrough=!0),c.textDecoration.indexOf("overline")>-1&&(c.overline=!0),delete c.textDecoration)}a.IText=a.util.createClass(a.Text,a.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(c,C){this.callSuper("initialize",c,C),this.initBehavior()},setSelectionStart:function(c){c=Math.max(c,0),this._updateAndFire("selectionStart",c)},setSelectionEnd:function(c){c=Math.min(c,this.text.length),this._updateAndFire("selectionEnd",c)},_updateAndFire:function(c,C){this[c]!==C&&(this._fireSelectionChanged(),this[c]=C),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(c){this.clearContextTop(),this.callSuper("render",c),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(c){this.callSuper("_render",c)},clearContextTop:function(c){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var C=this.canvas.contextTop,y=this.canvas.viewportTransform;C.save(),C.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this.transform(C),this._clearTextArea(C),c||C.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this._getCursorBoundaries(),C=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(c,C):this.renderSelection(c,C),C.restore()}},_clearTextArea:function(c){var C=this.width+4,y=this.height+4;c.clearRect(-C/2,-y/2,C,y)},_getCursorBoundaries:function(c){typeof c>"u"&&(c=this.selectionStart);var C=this._getLeftOffset(),y=this._getTopOffset(),l=this._getCursorBoundariesOffsets(c);return{left:C,top:y,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(c){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var C,y,l,h=0,u=0,p,D=this.get2DCursorLocation(c);l=D.charIndex,y=D.lineIndex;for(var g=0;g<y;g++)h+=this.getHeightOfLine(g);C=this._getLineLeftOffset(y);var x=this.__charBounds[y][l];return x&&(u=x.left),this.charSpacing!==0&&l===this._textLines[y].length&&(u-=this._getWidthOfCharSpacing()),p={top:h,left:C+(u>0?u:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(c,C){var y=this.get2DCursorLocation(),l=y.lineIndex,h=y.charIndex>0?y.charIndex-1:0,u=this.getValueOfPropertyAt(l,h,"fontSize"),p=this.scaleX*this.canvas.getZoom(),D=this.cursorWidth/p,g=c.topOffset,x=this.getValueOfPropertyAt(l,h,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-u*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(c,C),C.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,h,"fill"),C.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,C.fillRect(c.left+c.leftOffset-D/2,g+c.top+x,D,u)},renderSelection:function(c,C){for(var y=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,h=this.textAlign.indexOf("justify")!==-1,u=this.get2DCursorLocation(y),p=this.get2DCursorLocation(l),D=u.lineIndex,g=p.lineIndex,x=u.charIndex<0?0:u.charIndex,E=p.charIndex<0?0:p.charIndex,_=D;_<=g;_++){var O=this._getLineLeftOffset(_)||0,F=this.getHeightOfLine(_),B=0,W=0,H=0;if(_===D&&(W=this.__charBounds[D][x].left),_>=D&&_<g)H=h&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===g)if(E===0)H=this.__charBounds[g][E].left;else{var Y=this._getWidthOfCharSpacing();H=this.__charBounds[g][E-1].left+this.__charBounds[g][E-1].width-Y}B=F,(this.lineHeight<1||_===g&&this.lineHeight>1)&&(F/=this.lineHeight);var oe=c.left+O+W,ne=H-W,be=F,Z=0;this.inCompositionMode?(C.fillStyle=this.compositionColor||"black",be=1,Z=F):C.fillStyle=this.selectionColor,this.direction==="rtl"&&(oe=this.width-oe-ne),C.fillRect(oe,c.top+c.topOffset+Z,ne,be),c.topOffset+=B}},getCurrentCharFontSize:function(){var c=this._getCurrentCharIndex();return this.getValueOfPropertyAt(c.l,c.c,"fontSize")},getCurrentCharColor:function(){var c=this._getCurrentCharIndex();return this.getValueOfPropertyAt(c.l,c.c,"fill")},_getCurrentCharIndex:function(){var c=this.get2DCursorLocation(this.selectionStart,!0),C=c.charIndex>0?c.charIndex-1:0;return{l:c.lineIndex,c:C}}}),a.IText.fromObject=function(c,C){if(b(c),c.styles)for(var y in c.styles)for(var l in c.styles[y])b(c.styles[y][l]);a.Object._fromObject("IText",c,C,"text")}}(),function(){var b=a.util.object.clone;a.util.object.extend(a.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var c=this;this.on("added",function(){var C=c.canvas;C&&(C._hasITextHandlers||(C._hasITextHandlers=!0,c._initCanvasHandlers(C)),C._iTextInstances=C._iTextInstances||[],C._iTextInstances.push(c))})},initRemovedHandler:function(){var c=this;this.on("removed",function(){var C=c.canvas;C&&(C._iTextInstances=C._iTextInstances||[],a.util.removeFromArray(C._iTextInstances,c),C._iTextInstances.length===0&&(C._hasITextHandlers=!1,c._removeCanvasHandlers(C)))})},_initCanvasHandlers:function(c){c._mouseUpITextHandler=function(){c._iTextInstances&&c._iTextInstances.forEach(function(C){C.__isMousedown=!1})},c.on("mouse:up",c._mouseUpITextHandler)},_removeCanvasHandlers:function(c){c.off("mouse:up",c._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(c,C,y,l){var h;return h={isAborted:!1,abort:function(){this.isAborted=!0}},c.animate("_currentCursorOpacity",C,{duration:y,onComplete:function(){h.isAborted||c[l]()},onChange:function(){c.canvas&&c.selectionStart===c.selectionEnd&&c.renderCursorOrSelection()},abort:function(){return h.isAborted}}),h},_onTickComplete:function(){var c=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){c._currentTickCompleteState=c._animateCursor(c,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(c){var C=this,y=c?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){C._tick()},y)},abortCursorAnimation:function(){var c=this._currentTickState||this._currentTickCompleteState,C=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,c&&C&&C.clearContext(C.contextTop||C.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(c){var C=0,y=c-1;if(this._reSpace.test(this._text[y]))for(;this._reSpace.test(this._text[y]);)C++,y--;for(;/\S/.test(this._text[y])&&y>-1;)C++,y--;return c-C},findWordBoundaryRight:function(c){var C=0,y=c;if(this._reSpace.test(this._text[y]))for(;this._reSpace.test(this._text[y]);)C++,y++;for(;/\S/.test(this._text[y])&&y<this._text.length;)C++,y++;return c+C},findLineBoundaryLeft:function(c){for(var C=0,y=c-1;!/\n/.test(this._text[y])&&y>-1;)C++,y--;return c-C},findLineBoundaryRight:function(c){for(var C=0,y=c;!/\n/.test(this._text[y])&&y<this._text.length;)C++,y++;return c+C},searchWordBoundary:function(c,C){for(var y=this._text,l=this._reSpace.test(y[c])?c-1:c,h=y[l],u=a.reNonWord;!u.test(h)&&l>0&&l<y.length;)l+=C,h=y[l];return u.test(h)&&(l+=C===1?0:1),l},selectWord:function(c){c=c||this.selectionStart;var C=this.searchWordBoundary(c,-1),y=this.searchWordBoundary(c,1);this.selectionStart=C,this.selectionEnd=y,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(c){c=c||this.selectionStart;var C=this.findLineBoundaryLeft(c),y=this.findLineBoundaryRight(c);return this.selectionStart=C,this.selectionEnd=y,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(c){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(c),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(c){c._iTextInstances&&c._iTextInstances.forEach(function(C){C.selected=!1,C.isEditing&&C.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(c){if(!(!this.__isMousedown||!this.isEditing)){var C=this.getSelectionStartFromPointer(c.e),y=this.selectionStart,l=this.selectionEnd;(C!==this.__selectionStartOnMouseDown||y===l)&&(y===C||l===C)||(C>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=C):(this.selectionStart=C,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==y||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(c,C,y){var l=y.slice(0,c),h=a.util.string.graphemeSplit(l).length;if(c===C)return{selectionStart:h,selectionEnd:h};var u=y.slice(c,C),p=a.util.string.graphemeSplit(u).length;return{selectionStart:h,selectionEnd:h+p}},fromGraphemeToStringSelection:function(c,C,y){var l=y.slice(0,c),h=l.join("").length;if(c===C)return{selectionStart:h,selectionEnd:h};var u=y.slice(c,C),p=u.join("").length;return{selectionStart:h,selectionEnd:h+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var c=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=c.selectionStart,this.hiddenTextarea.selectionEnd=c.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var c=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=c.selectionEnd,this.inCompositionMode||(this.selectionStart=c.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var c=this._calcTextareaPosition();this.hiddenTextarea.style.left=c.left,this.hiddenTextarea.style.top=c.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var c=this.inCompositionMode?this.compositionStart:this.selectionStart,C=this._getCursorBoundaries(c),y=this.get2DCursorLocation(c),l=y.lineIndex,h=y.charIndex,u=this.getValueOfPropertyAt(l,h,"fontSize")*this.lineHeight,p=C.leftOffset,D=this.calcTransformMatrix(),g={x:C.left+p,y:C.top+C.topOffset+u},x=this.canvas.getRetinaScaling(),E=this.canvas.upperCanvasEl,_=E.width/x,O=E.height/x,F=_-u,B=O-u,W=E.clientWidth/_,H=E.clientHeight/O;return g=a.util.transformPoint(g,D),g=a.util.transformPoint(g,this.canvas.viewportTransform),g.x*=W,g.y*=H,g.x<0&&(g.x=0),g.x>F&&(g.x=F),g.y<0&&(g.y=0),g.y>B&&(g.y=B),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:u+"px",charHeight:u}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var c=this._textBeforeEdit!==this.text,C=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,C&&(C.blur&&C.blur(),C.parentNode&&C.parentNode.removeChild(C)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),c&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),c&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var c in this.styles)this._textLines[c]||delete this.styles[c]},removeStyleFromTo:function(c,C){var y=this.get2DCursorLocation(c,!0),l=this.get2DCursorLocation(C,!0),h=y.lineIndex,u=y.charIndex,p=l.lineIndex,D=l.charIndex,g,x;if(h!==p){if(this.styles[h])for(g=u;g<this._unwrappedTextLines[h].length;g++)delete this.styles[h][g];if(this.styles[p])for(g=D;g<this._unwrappedTextLines[p].length;g++)x=this.styles[p][g],x&&(this.styles[h]||(this.styles[h]={}),this.styles[h][u+g-D]=x);for(g=h+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,h-p)}else if(this.styles[h]){x=this.styles[h];var E=D-u,_,O;for(g=u;g<D;g++)delete x[g];for(O in this.styles[h])_=parseInt(O,10),_>=D&&(x[_-E]=x[O],delete x[O])}},shiftLineStyles:function(c,C){var y=b(this.styles);for(var l in this.styles){var h=parseInt(l,10);h>c&&(this.styles[h+C]=y[h],y[h-C]||delete this.styles[h])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(c,C,y,l){var h,u={},p=!1,D=this._unwrappedTextLines[c].length===C;y||(y=1),this.shiftLineStyles(c,y),this.styles[c]&&(h=this.styles[c][C===0?C:C-1]);for(var g in this.styles[c]){var x=parseInt(g,10);x>=C&&(p=!0,u[x-C]=this.styles[c][g],D&&C===0||delete this.styles[c][g])}var E=!1;for(p&&!D&&(this.styles[c+y]=u,E=!0),E&&y--;y>0;)l&&l[y-1]?this.styles[c+y]={0:b(l[y-1])}:h?this.styles[c+y]={0:b(h)}:delete this.styles[c+y],y--;this._forceClearCache=!0},insertCharStyleObject:function(c,C,y,l){this.styles||(this.styles={});var h=this.styles[c],u=h?b(h):{};y||(y=1);for(var p in u){var D=parseInt(p,10);D>=C&&(h[D+y]=u[D],u[D-y]||delete h[D])}if(this._forceClearCache=!0,l){for(;y--;)Object.keys(l[y]).length&&(this.styles[c]||(this.styles[c]={}),this.styles[c][C+y]=b(l[y]));return}if(h)for(var g=h[C?C-1:1];g&&y--;)this.styles[c][C+y]=b(g)},insertNewStyleBlock:function(c,C,y){for(var l=this.get2DCursorLocation(C,!0),h=[0],u=0,p=0;p<c.length;p++)c[p]===`
`?(u++,h[u]=0):h[u]++;h[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,h[0],y),y=y&&y.slice(h[0]+1)),u&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+h[0],u);for(var p=1;p<u;p++)h[p]>0?this.insertCharStyleObject(l.lineIndex+p,0,h[p],y):y&&(this.styles[l.lineIndex+p][0]=y[0]),y=y&&y.slice(h[p]+1);h[p]>0&&this.insertCharStyleObject(l.lineIndex+p,0,h[p],y)},setSelectionStartEndWithShift:function(c,C,y){y<=c?(C===c?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=c),this.selectionStart=y):y>c&&y<C?this._selectionDirection==="right"?this.selectionEnd=y:this.selectionStart=y:(C===c?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=C),this.selectionEnd=y)},setSelectionInBoundaries:function(){var c=this.text.length;this.selectionStart>c?this.selectionStart=c:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>c?this.selectionEnd=c:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),a.util.object.extend(a.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(b){if(this.canvas){this.__newClickTime=+new Date;var c=b.pointer;this.isTripleClick(c)&&(this.fire("tripleclick",b),this._stopEvent(b.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=c,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(b){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===b.x&&this.__lastPointer.y===b.y},_stopEvent:function(b){b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(b){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(b.e))},tripleClickHandler:function(b){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(b.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(b){!this.canvas||!this.editable||b.e.button&&b.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(b.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(b){!this.canvas||!this.editable||b.e.button&&b.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(b){if(this.__isMousedown=!1,!(!this.editable||this.group||b.transform&&b.transform.actionPerformed||b.e.button&&b.e.button!==1)){if(this.canvas){var c=this.canvas._activeObject;if(c&&c!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(b.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(b){var c=this.getSelectionStartFromPointer(b),C=this.selectionStart,y=this.selectionEnd;b.shiftKey?this.setSelectionStartEndWithShift(C,y,c):(this.selectionStart=c,this.selectionEnd=c),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(b){for(var c=this.getLocalPointer(b),C=0,y=0,l=0,h=0,u=0,p,D,g=0,x=this._textLines.length;g<x&&l<=c.y;g++)l+=this.getHeightOfLine(g)*this.scaleY,u=g,g>0&&(h+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(u),y=p*this.scaleX,D=this._textLines[u],this.direction==="rtl"&&(c.x=this.width*this.scaleX-c.x+y);for(var E=0,_=D.length;E<_&&(C=y,y+=this.__charBounds[u][E].kernedWidth*this.scaleX,y<=c.x);E++)h++;return this._getNewSelectionStartFromOffset(c,C,y,h,_)},_getNewSelectionStartFromOffset:function(b,c,C,y,l){var h=b.x-c,u=C-b.x,p=u>h||u<0?0:1,D=y+p;return this.flipX&&(D=l-D),D>this._text.length&&(D=this._text.length),D}}),a.util.object.extend(a.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=a.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var b=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+b.top+"; left: "+b.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+b.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):a.document.body.appendChild(this.hiddenTextarea),a.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),a.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),a.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),a.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),a.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),a.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),a.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),a.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),a.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(a.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(b){if(this.isEditing){var c=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(b.keyCode in c)this[c[b.keyCode]](b);else if(b.keyCode in this.ctrlKeysMapDown&&(b.ctrlKey||b.metaKey))this[this.ctrlKeysMapDown[b.keyCode]](b);else return;b.stopImmediatePropagation(),b.preventDefault(),b.keyCode>=33&&b.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(b){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(b.keyCode in this.ctrlKeysMapUp&&(b.ctrlKey||b.metaKey))this[this.ctrlKeysMapUp[b.keyCode]](b);else return;b.stopImmediatePropagation(),b.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(b){var c=this.fromPaste;if(this.fromPaste=!1,b&&b.stopPropagation(),!!this.isEditing){var C=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,y=this._text.length,l=C.length,h,u,p=l-y,D=this.selectionStart,g=this.selectionEnd,x=D!==g,E,_,O;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var F=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),B=D>F.selectionStart;x?(h=this._text.slice(D,g),p+=g-D):l<y&&(B?h=this._text.slice(g+p,g):h=this._text.slice(D,D-p)),u=C.slice(F.selectionEnd-p,F.selectionEnd),h&&h.length&&(u.length&&(E=this.getSelectionStyles(D,D+1,!1),E=u.map(function(){return E[0]})),x?(_=D,O=g):B?(_=g-h.length,O=g):(_=g,O=g+h.length),this.removeStyleFromTo(_,O)),u.length&&(c&&u.join("")===a.copiedText&&!a.disableStyleCopyPaste&&(E=a.copiedTextStyle),this.insertNewStyleBlock(u,D,E)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(b){this.compositionStart=b.target.selectionStart,this.compositionEnd=b.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(a.copiedText=this.getSelectedText(),a.disableStyleCopyPaste?a.copiedTextStyle=null:a.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(b){return b&&b.clipboardData||a.window.clipboardData},_getWidthBeforeCursor:function(b,c){var C=this._getLineLeftOffset(b),y;return c>0&&(y=this.__charBounds[b][c-1],C+=y.left+y.width),C},getDownCursorOffset:function(b,c){var C=this._getSelectionForOffset(b,c),y=this.get2DCursorLocation(C),l=y.lineIndex;if(l===this._textLines.length-1||b.metaKey||b.keyCode===34)return this._text.length-C;var h=y.charIndex,u=this._getWidthBeforeCursor(l,h),p=this._getIndexOnLine(l+1,u),D=this._textLines[l].slice(h);return D.length+p+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(b,c){return b.shiftKey&&this.selectionStart!==this.selectionEnd&&c?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(b,c){var C=this._getSelectionForOffset(b,c),y=this.get2DCursorLocation(C),l=y.lineIndex;if(l===0||b.metaKey||b.keyCode===33)return-C;var h=y.charIndex,u=this._getWidthBeforeCursor(l,h),p=this._getIndexOnLine(l-1,u),D=this._textLines[l].slice(0,h),g=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+p-D.length+(1-g)},_getIndexOnLine:function(b,c){for(var C=this._textLines[b],y=this._getLineLeftOffset(b),l=y,h=0,u,p,D=0,g=C.length;D<g;D++)if(u=this.__charBounds[b][D].width,l+=u,l>c){p=!0;var x=l-u,E=l,_=Math.abs(x-c),O=Math.abs(E-c);h=O<_?D:D-1;break}return p||(h=C.length-1),h},moveCursorDown:function(b){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",b)},moveCursorUp:function(b){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",b)},_moveCursorUpOrDown:function(b,c){var C="get"+b+"CursorOffset",y=this[C](c,this._selectionDirection==="right");c.shiftKey?this.moveCursorWithShift(y):this.moveCursorWithoutShift(y),y!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(b){var c=this._selectionDirection==="left"?this.selectionStart+b:this.selectionEnd+b;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,c),b!==0},moveCursorWithoutShift:function(b){return b<0?(this.selectionStart+=b,this.selectionEnd=this.selectionStart):(this.selectionEnd+=b,this.selectionStart=this.selectionEnd),b!==0},moveCursorLeft:function(b){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",b)},_move:function(b,c,C){var y;if(b.altKey)y=this["findWordBoundary"+C](this[c]);else if(b.metaKey||b.keyCode===35||b.keyCode===36)y=this["findLineBoundary"+C](this[c]);else return this[c]+=C==="Left"?-1:1,!0;if(typeof y!==void 0&&this[c]!==y)return this[c]=y,!0},_moveLeft:function(b,c){return this._move(b,c,"Left")},_moveRight:function(b,c){return this._move(b,c,"Right")},moveCursorLeftWithoutShift:function(b){var c=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(c=this._moveLeft(b,"selectionStart")),this.selectionEnd=this.selectionStart,c},moveCursorLeftWithShift:function(b){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(b,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(b,"selectionStart")},moveCursorRight:function(b){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",b)},_moveCursorLeftOrRight:function(b,c){var C="moveCursor"+b+"With";this._currentCursorOpacity=1,c.shiftKey?C+="Shift":C+="outShift",this[C](c)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(b){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(b,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(b,"selectionEnd")},moveCursorRightWithoutShift:function(b){var c=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(c=this._moveRight(b,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,c},removeChars:function(b,c){typeof c>"u"&&(c=b+1),this.removeStyleFromTo(b,c),this._text.splice(b,c-b),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(b,c,C,y){typeof y>"u"&&(y=C),y>C&&this.removeStyleFromTo(C,y);var l=a.util.string.graphemeSplit(b);this.insertNewStyleBlock(l,C,c),this._text=[].concat(this._text.slice(0,C),l,this._text.slice(y)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var b=a.util.toFixed,c=/  +/g;a.util.object.extend(a.Text.prototype,{_toSVG:function(){var C=this._getSVGLeftTopOffsets(),y=this._getSVGTextAndBg(C.textTop,C.textLeft);return this._wrapSVGTextAndBg(y)},toSVG:function(C){return this._createBaseSVGMarkup(this._toSVG(),{reviver:C,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(C){var y=!0,l=this.getSvgTextDecoration(this);return[C.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(y),'"',this.addPaintOrder()," >",C.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(C,y){var l=[],h=[],u=C,p;this._setSVGBg(h);for(var D=0,g=this._textLines.length;D<g;D++)p=this._getLineLeftOffset(D),(this.textBackgroundColor||this.styleHas("textBackgroundColor",D))&&this._setSVGTextLineBg(h,D,y+p,u),this._setSVGTextLineText(l,D,y+p,u),u+=this.getHeightOfLine(D);return{textSpans:l,textBgRects:h}},_createTextCharSpan:function(C,y,l,h){var u=C!==C.trim()||C.match(c),p=this.getSvgSpanStyles(y,u),D=p?'style="'+p+'"':"",g=y.deltaY,x="",E=a.Object.NUM_FRACTION_DIGITS;return g&&(x=' dy="'+b(g,E)+'" '),['<tspan x="',b(l,E),'" y="',b(h,E),'" ',x,D,">",a.util.string.escapeXml(C),"</tspan>"].join("")},_setSVGTextLineText:function(C,y,l,h){var u=this.getHeightOfLine(y),p=this.textAlign.indexOf("justify")!==-1,D,g,x="",E,_,O=0,F=this._textLines[y],B;h+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var W=0,H=F.length-1;W<=H;W++)B=W===H||this.charSpacing,x+=F[W],E=this.__charBounds[y][W],O===0?(l+=E.kernedWidth-E.width,O+=E.width):O+=E.kernedWidth,p&&!B&&this._reSpaceAndTab.test(F[W])&&(B=!0),B||(D=D||this.getCompleteStyleDeclaration(y,W),g=this.getCompleteStyleDeclaration(y,W+1),B=this._hasStyleChangedForSvg(D,g)),B&&(_=this._getStyleDeclaration(y,W)||{},C.push(this._createTextCharSpan(x,_,l,h)),x="",D=g,l+=O,O=0)},_pushTextBgRect:function(C,y,l,h,u,p){var D=a.Object.NUM_FRACTION_DIGITS;C.push("		<rect ",this._getFillAttributes(y),' x="',b(l,D),'" y="',b(h,D),'" width="',b(u,D),'" height="',b(p,D),`"></rect>
`)},_setSVGTextLineBg:function(C,y,l,h){for(var u=this._textLines[y],p=this.getHeightOfLine(y)/this.lineHeight,D=0,g=0,x,E,_=this.getValueOfPropertyAt(y,0,"textBackgroundColor"),O=0,F=u.length;O<F;O++)x=this.__charBounds[y][O],E=this.getValueOfPropertyAt(y,O,"textBackgroundColor"),E!==_?(_&&this._pushTextBgRect(C,_,l+g,h,D,p),g=x.left,D=x.width,_=E):D+=x.kernedWidth;E&&this._pushTextBgRect(C,E,l+g,h,D,p)},_getFillAttributes:function(C){var y=C&&typeof C=="string"?new a.Color(C):"";return!y||!y.getSource()||y.getAlpha()===1?'fill="'+C+'"':'opacity="'+y.getAlpha()+'" fill="'+y.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(C){for(var y=0,l=0,h=0;h<C;h++)y+=this.getHeightOfLine(h);return l=this.getHeightOfLine(h),{lineTop:y,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(C){var y=a.Object.prototype.getSvgStyles.call(this,C);return y+" white-space: pre;"}})}(),function(b){"use strict";var c=b.fabric||(b.fabric={});c.Textbox=c.util.createClass(c.IText,c.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:c.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(C){for(var y=0,l=0,h=0,u={},p=0;p<C.graphemeLines.length;p++)C.graphemeText[h]===`
`&&p>0?(l=0,h++,y++):!this.splitByGrapheme&&this._reSpaceAndTab.test(C.graphemeText[h])&&p>0&&(l++,h++),u[p]={line:y,offset:l},h+=C.graphemeLines[p].length,l+=C.graphemeLines[p].length;return u},styleHas:function(C,y){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[y];l&&(y=l.line)}return c.Text.prototype.styleHas.call(this,C,y)},isEmptyStyles:function(C){if(!this.styles)return!0;var y=0,l=C+1,h,u,p=!1,D=this._styleMap[C],g=this._styleMap[C+1];D&&(C=D.line,y=D.offset),g&&(l=g.line,p=l===C,h=g.offset),u=typeof C>"u"?this.styles:{line:this.styles[C]};for(var x in u)for(var E in u[x])if(E>=y&&(!p||E<h))for(var _ in u[x][E])return!1;return!0},_getStyleDeclaration:function(C,y){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[C];if(!l)return null;C=l.line,y=l.offset+y}return this.callSuper("_getStyleDeclaration",C,y)},_setStyleDeclaration:function(C,y,l){var h=this._styleMap[C];C=h.line,y=h.offset+y,this.styles[C][y]=l},_deleteStyleDeclaration:function(C,y){var l=this._styleMap[C];C=l.line,y=l.offset+y,delete this.styles[C][y]},_getLineStyle:function(C){var y=this._styleMap[C];return!!this.styles[y.line]},_setLineStyle:function(C){var y=this._styleMap[C];this.styles[y.line]={}},_wrapText:function(C,y){var l=[],h;for(this.isWrapping=!0,h=0;h<C.length;h++)l=l.concat(this._wrapLine(C[h],h,y));return this.isWrapping=!1,l},_measureWord:function(C,y,l){var h=0,u,p=!0;l=l||0;for(var D=0,g=C.length;D<g;D++){var x=this._getGraphemeBox(C[D],y,D+l,u,p);h+=x.kernedWidth,u=C[D]}return h},_wrapLine:function(C,y,l,oe){var u=0,p=this.splitByGrapheme,D=[],g=[],x=p?c.util.string.graphemeSplit(C):C.split(this._wordJoiners),E="",_=0,O=p?"":" ",F=0,B=0,W=0,H=!0,Y=this._getWidthOfCharSpacing(),oe=oe||0;x.length===0&&x.push([]),l-=oe;for(var ne=0;ne<x.length;ne++)E=p?x[ne]:c.util.string.graphemeSplit(x[ne]),F=this._measureWord(E,y,_),_+=E.length,u+=B+F-Y,u>l&&!H?(D.push(g),g=[],u=F,H=!0):u+=Y,!H&&!p&&g.push(O),g=g.concat(E),B=p?0:this._measureWord([O],y,_),_++,H=!1,F>W&&(W=F);return ne&&D.push(g),W+oe>this.dynamicMinWidth&&(this.dynamicMinWidth=W-Y+oe),D},isEndOfWrapping:function(C){return!this._styleMap[C+1]||this._styleMap[C+1].line!==this._styleMap[C].line},missingNewlineOffset:function(C){return this.splitByGrapheme?this.isEndOfWrapping(C)?1:0:1},_splitTextIntoLines:function(C){for(var y=c.Text.prototype._splitTextIntoLines.call(this,C),l=this._wrapText(y.lines,this.width),h=new Array(l.length),u=0;u<l.length;u++)h[u]=l[u].join("");return y.lines=h,y.graphemeLines=l,y},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var C={};for(var y in this._styleMap)this._textLines[y]&&(C[this._styleMap[y].line]=1);for(var y in this.styles)C[y]||delete this.styles[y]},toObject:function(C){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(C))}}),c.Textbox.fromObject=function(C,y){return c.Object._fromObject("Textbox",C,y,"text")}}(I),function(){var b=a.controlsUtils,c=b.scaleSkewCursorStyleHandler,C=b.scaleCursorStyleHandler,y=b.scalingEqually,l=b.scalingYOrSkewingX,h=b.scalingXOrSkewingY,u=b.scaleOrSkewActionName,p=a.Object.prototype.controls;if(p.ml=new a.Control({x:-.5,y:0,cursorStyleHandler:c,actionHandler:h,getActionName:u}),p.mr=new a.Control({x:.5,y:0,cursorStyleHandler:c,actionHandler:h,getActionName:u}),p.mb=new a.Control({x:0,y:.5,cursorStyleHandler:c,actionHandler:l,getActionName:u}),p.mt=new a.Control({x:0,y:-.5,cursorStyleHandler:c,actionHandler:l,getActionName:u}),p.tl=new a.Control({x:-.5,y:-.5,cursorStyleHandler:C,actionHandler:y}),p.tr=new a.Control({x:.5,y:-.5,cursorStyleHandler:C,actionHandler:y}),p.bl=new a.Control({x:-.5,y:.5,cursorStyleHandler:C,actionHandler:y}),p.br=new a.Control({x:.5,y:.5,cursorStyleHandler:C,actionHandler:y}),p.mtr=new a.Control({x:0,y:-.5,actionHandler:b.rotationWithSnapping,cursorStyleHandler:b.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),a.Textbox){var D=a.Textbox.prototype.controls={};D.mtr=p.mtr,D.tr=p.tr,D.br=p.br,D.tl=p.tl,D.bl=p.bl,D.mt=p.mt,D.mb=p.mb,D.mr=new a.Control({x:.5,y:0,actionHandler:b.changeWidth,cursorStyleHandler:c,actionName:"resizing"}),D.ml=new a.Control({x:-.5,y:0,actionHandler:b.changeWidth,cursorStyleHandler:c,actionName:"resizing"})}}()},3053:function(o,I,i){"use strict";var a=i(602);function M(T,P,k){var R,b;if(k=k||0,!a(P))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(P,T,k);for(b=P.length,R=k;k>=0&&R<b;R+=1)if(P[R]===T)return R;return-1}o.exports=M},8592:function(o,I,i){"use strict";var a=i(602),M=i(6092),T=i(5573);function P(k,R,b){a(k)?M(k,R,b):T(k,R,b)}o.exports=P},6092:function(o){"use strict";function I(i,a,M){var T=0,P=i.length;for(M=M||null;T<P&&a.call(M,i[T],T,i)!==!1;T+=1);}o.exports=I},5573:function(o){"use strict";function I(i,a,M){var T;M=M||null;for(T in i)if(i.hasOwnProperty(T)&&a.call(M,i[T],T,i)===!1)break}o.exports=I},9052:function(o,I,i){"use strict";var a=i(961),M=i(9886),T=i(2560),P=i(5393),k=i(602),R=i(5183),b=i(8592),c=/\s+/g;function C(){this.events=null,this.contexts=null}C.mixin=function(y){a(y.prototype,C.prototype)},C.prototype._getHandlerItem=function(y,l){var h={handler:y};return l&&(h.context=l),h},C.prototype._safeEvent=function(y){var l=this.events,h;return l||(l=this.events={}),y&&(h=l[y],h||(h=[],l[y]=h),l=h),l},C.prototype._safeContext=function(){var y=this.contexts;return y||(y=this.contexts=[]),y},C.prototype._indexOfContext=function(y){for(var l=this._safeContext(),h=0;l[h];){if(y===l[h][0])return h;h+=1}return-1},C.prototype._memorizeContext=function(y){var l,h;M(y)&&(l=this._safeContext(),h=this._indexOfContext(y),h>-1?l[h][1]+=1:l.push([y,1]))},C.prototype._forgetContext=function(y){var l,h;M(y)&&(l=this._safeContext(),h=this._indexOfContext(y),h>-1&&(l[h][1]-=1,l[h][1]<=0&&l.splice(h,1)))},C.prototype._bindEvent=function(y,l,h){var u=this._safeEvent(y);this._memorizeContext(h),u.push(this._getHandlerItem(l,h))},C.prototype.on=function(y,l,h){var u=this;T(y)?(y=y.split(c),b(y,function(p){u._bindEvent(p,l,h)})):P(y)&&(h=l,b(y,function(p,D){u.on(D,p,h)}))},C.prototype.once=function(y,l,h){var u=this;if(P(y)){h=l,b(y,function(D,g){u.once(g,D,h)});return}function p(){l.apply(h,arguments),u.off(y,p,h)}this.on(y,p,h)},C.prototype._spliceMatches=function(y,l){var h=0,u;if(k(y))for(u=y.length;h<u;h+=1)l(y[h])===!0&&(y.splice(h,1),u-=1,h-=1)},C.prototype._matchHandler=function(y){var l=this;return function(h){var u=y===h.handler;return u&&l._forgetContext(h.context),u}},C.prototype._matchContext=function(y){var l=this;return function(h){var u=y===h.context;return u&&l._forgetContext(h.context),u}},C.prototype._matchHandlerAndContext=function(y,l){var h=this;return function(u){var p=y===u.handler,D=l===u.context,g=p&&D;return g&&h._forgetContext(u.context),g}},C.prototype._offByEventName=function(y,l){var h=this,u=R(l),p=h._matchHandler(l);y=y.split(c),b(y,function(D){var g=h._safeEvent(D);u?h._spliceMatches(g,p):(b(g,function(x){h._forgetContext(x.context)}),h.events[D]=[])})},C.prototype._offByHandler=function(y){var l=this,h=this._matchHandler(y);b(this._safeEvent(),function(u){l._spliceMatches(u,h)})},C.prototype._offByObject=function(y,l){var h=this,u;this._indexOfContext(y)<0?b(y,function(p,D){h.off(D,p)}):T(l)?(u=this._matchContext(y),h._spliceMatches(this._safeEvent(l),u)):R(l)?(u=this._matchHandlerAndContext(l,y),b(this._safeEvent(),function(p){h._spliceMatches(p,u)})):(u=this._matchContext(y),b(this._safeEvent(),function(p){h._spliceMatches(p,u)}))},C.prototype.off=function(y,l){T(y)?this._offByEventName(y,l):arguments.length?R(y)?this._offByHandler(y):P(y)&&this._offByObject(y,l):(this.events={},this.contexts=[])},C.prototype.fire=function(y){this.invoke.apply(this,arguments)},C.prototype.invoke=function(y){var l,h,u,p;if(!this.hasListener(y))return!0;for(l=this._safeEvent(y),h=Array.prototype.slice.call(arguments,1),u=0;l[u];){if(p=l[u],p.handler.apply(p.context,h)===!1)return!1;u+=1}return!0},C.prototype.hasListener=function(y){return this.getListenerLength(y)>0},C.prototype.getListenerLength=function(y){var l=this._safeEvent(y);return l.length},o.exports=C},961:function(o){"use strict";function I(i,a){var M=Object.prototype.hasOwnProperty,T,P,k,R;for(k=1,R=arguments.length;k<R;k+=1){T=arguments[k];for(P in T)M.call(T,P)&&(i[P]=T[P])}return i}o.exports=I},1610:function(o,I,i){"use strict";var a=i(5695),M=i(3778);function T(P,k){for(var R=arguments,b=R[0],c=1,C=R.length;c<C;c+=1){if(a(b)||M(b))return;b=b[R[c]]}return b}o.exports=T},4564:function(o,I,i){"use strict";var a=i(5573);function M(T,P){var k=document.createElement("img"),R="";return a(P,function(b,c){R+="&"+c+"="+b}),R=R.substring(1),k.src=T+"?"+R,k.style.display="none",document.body.appendChild(k),document.body.removeChild(k),k}o.exports=M},4729:function(o,I,i){"use strict";var a=i(5695),M=i(4564),T=7*24*60*60*1e3;function P(R){var b=new Date().getTime();return b-R>T}function k(R,b){var c="https://www.google-analytics.com/collect",C=location.hostname,y="event",l="use",h="TOAST UI "+R+" for "+C+": Statistics",u=window.localStorage.getItem(h);!a(window.tui)&&window.tui.usageStatistics===!1||u&&!P(u)||(window.localStorage.setItem(h,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&M(c,{v:1,t:y,tid:b,cid:C,dp:C,dh:R,el:R,ec:l})},1e3))}o.exports=k},602:function(o){"use strict";function I(i){return i instanceof Array}o.exports=I},9886:function(o,I,i){"use strict";var a=i(5695),M=i(3778);function T(P){return!a(P)&&!M(P)}o.exports=T},5183:function(o){"use strict";function I(i){return i instanceof Function}o.exports=I},3778:function(o){"use strict";function I(i){return i===null}o.exports=I},5393:function(o){"use strict";function I(i){return i===Object(i)}o.exports=I},2560:function(o){"use strict";function I(i){return typeof i=="string"||i instanceof String}o.exports=I},5695:function(o){"use strict";function I(i){return i===void 0}o.exports=I},4426:function(o,I,i){o.exports=i(4486)},9406:function(o,I,i){o.exports=i(4877)},789:function(o,I,i){o.exports=i(7178)},381:function(o,I,i){o.exports=i(5603)},7636:function(o,I,i){o.exports=i(1206)},1899:function(o,I,i){o.exports=i(6174)},899:function(o,I,i){o.exports=i(57)},8005:function(o,I,i){o.exports=i(4741)},6562:function(o,I,i){o.exports=i(8368)},9131:function(o,I,i){o.exports=i(3739)},4383:function(o,I,i){o.exports=i(172)},6065:function(o,I,i){o.exports=i(4963)},1734:function(o,I,i){o.exports=i(7820)},2461:function(o,I,i){o.exports=i(5636)},5214:function(o,I,i){o.exports=i(5059)},6397:function(o,I,i){o.exports=i(3969)},8189:function(o,I,i){o.exports=i(6618)},9146:function(o,I,i){o.exports=i(5279)},4496:function(o,I,i){o.exports=i(9562)},3972:function(o,I,i){o.exports=i(652)},7172:function(o,I,i){o.exports=i(2813)},1845:function(o,I,i){o.exports=i(8664)},662:function(o,I,i){o.exports=i(1457)},711:function(o,I,i){o.exports=i(2937)},6623:function(o,I,i){o.exports=i(9297)},7077:function(o,I,i){o.exports=i(8026)},9856:function(o,I,i){o.exports=i(2044)},4230:function(o,I,i){o.exports=i(2214)},184:function(o,I,i){o.exports=i(9256)},3742:function(o,I,i){o.exports=i(5659)},1801:function(o){var I={rect:1,circle:2,triangle:1},i={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function a(c){var C=c.originX,y=c.originY,l=C.substring(0,1)+y.substring(0,1);c.startPoint=c.origins[l]}function M(c,C,y){var l=c.x,h=c.y,u=C.x,p=C.y,D=y*Math.PI/180,g=(u-l)*Math.cos(D)-(p-h)*Math.sin(D)+l,x=(u-l)*Math.sin(D)+(p-h)*Math.cos(D)+h;return{originX:l>g?"right":"left",originY:h>x?"bottom":"top"}}function T(c){return c.originX==="center"&&c.originY==="center"}function P(c,C){var y=C.getPointByOrigin("center","center"),l=-C.angle,h=M(y,c,l),u=h.originX,p=h.originY,D=C.getPointByOrigin(u,p),g=C.left-(y.x-D.x),x=C.top-(y.y-D.y);C.set({originX:u,originY:p,left:g,top:x}),C.setCoords()}function k(c,C){var y=C.startPoint,l=-C.angle,h=M(y,c,l),u=h.originX,p=h.originY;C.setPositionByOrigin(y,u,p),C.setCoords()}function R(c){var C=c.type,y=c.scaleX,l=c.scaleY,h=i[C],u=c[h.w]*y,p=c[h.h]*l;if(c.isRegular){var D=Math.max(y,l);u=c[h.w]*D,p=c[h.h]*D}var g={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};g[h.w]=u,g[h.h]=p,c.set(g)}function b(c,C){var y=C.type,l=C.strokeWidth,h=C.startPoint,u=I[y],p=i[y],D=C.type==="triangle",g={},x=Math.abs(h.x-c.x)/u,E=Math.abs(h.y-c.y)/u;x>l&&(x-=l/u),E>l&&(E-=l/u),C.isRegular&&(x=E=Math.max(x,E),D&&(E=Math.sqrt(3)/2*x)),g[p.w]=x,g[p.h]=E,C.set(g)}o.exports={setOrigins:function(C){var y=C.getPointByOrigin("left","top"),l=C.getPointByOrigin("right","top"),h=C.getPointByOrigin("right","bottom"),u=C.getPointByOrigin("left","bottom");C.origins={lt:y,rt:l,rb:h,lb:u}},resize:function(C,y,l){T(C)&&(P(y,C),a(C)),l?R(C,y):b(y,C),k(y,C)},adjustOriginToCenter:function(C){var y=C.getPointByOrigin("center","center"),l=C.originX,h=C.originY,u=C.getPointByOrigin(l,h),p=C.left+(y.x-u.x),D=C.top+(y.y-u.y);C.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:p,top:D}),C.setCoords()}}},2221:function(o,I,i){i(5454),i(9173);var a=i(7545);o.exports=a.Array.from},5078:function(o,I,i){i(8118);var a=i(7545);o.exports=a.Array.isArray},6135:function(o,I,i){i(9106);var a=i(5607);o.exports=a("Array").concat},9510:function(o,I,i){i(1710);var a=i(5607);o.exports=a("Array").fill},3971:function(o,I,i){i(3436);var a=i(5607);o.exports=a("Array").filter},98:function(o,I,i){i(9823);var a=i(5607);o.exports=a("Array").forEach},2089:function(o,I,i){i(2276);var a=i(5607);o.exports=a("Array").indexOf},6209:function(o,I,i){i(3838);var a=i(5607);o.exports=a("Array").map},2671:function(o,I,i){i(5818);var a=i(5607);o.exports=a("Array").slice},1375:function(o,I,i){i(2178);var a=i(5607);o.exports=a("Array").splice},3528:function(o,I,i){i(665);var a=i(5607);o.exports=a("Function").bind},5739:function(o,I,i){i(8939),i(5454);var a=i(8703);o.exports=a},278:function(o,I,i){var a=i(3528),M=Function.prototype;o.exports=function(T){var P=T.bind;return T===M||T instanceof Function&&P===M.bind?a:P}},1484:function(o,I,i){var a=i(6135),M=Array.prototype;o.exports=function(T){var P=T.concat;return T===M||T instanceof Array&&P===M.concat?a:P}},7731:function(o,I,i){var a=i(9510),M=Array.prototype;o.exports=function(T){var P=T.fill;return T===M||T instanceof Array&&P===M.fill?a:P}},3669:function(o,I,i){var a=i(3971),M=Array.prototype;o.exports=function(T){var P=T.filter;return T===M||T instanceof Array&&P===M.filter?a:P}},2604:function(o,I,i){var a=i(2089),M=Array.prototype;o.exports=function(T){var P=T.indexOf;return T===M||T instanceof Array&&P===M.indexOf?a:P}},263:function(o,I,i){var a=i(6209),M=Array.prototype;o.exports=function(T){var P=T.map;return T===M||T instanceof Array&&P===M.map?a:P}},7663:function(o,I,i){var a=i(2671),M=Array.prototype;o.exports=function(T){var P=T.slice;return T===M||T instanceof Array&&P===M.slice?a:P}},5063:function(o,I,i){var a=i(1375),M=Array.prototype;o.exports=function(T){var P=T.splice;return T===M||T instanceof Array&&P===M.splice?a:P}},6813:function(o,I,i){var a=i(3842),M=String.prototype;o.exports=function(T){var P=T.trim;return typeof T=="string"||T===M||T instanceof String&&P===M.trim?a:P}},6285:function(o,I,i){i(2666);var a=i(7545);o.exports=a.Number.parseInt},3213:function(o,I,i){i(3113);var a=i(7545),M=a.Object;o.exports=function(P,k){return M.create(P,k)}},3512:function(o,I,i){i(297);var a=i(7545),M=a.Object,T=o.exports=function(k,R,b){return M.defineProperty(k,R,b)};M.defineProperty.sham&&(T.sham=!0)},8168:function(o,I,i){i(9234);var a=i(7545);o.exports=a.Object.getPrototypeOf},8651:function(o,I,i){i(2647);var a=i(7545);o.exports=a.Object.keys},3083:function(o,I,i){i(3222);var a=i(7545);o.exports=a.Object.setPrototypeOf},2987:function(o,I,i){i(4859);var a=i(7545);o.exports=a.parseFloat},2239:function(o,I,i){i(5706);var a=i(7545);o.exports=a.parseInt},3154:function(o,I,i){i(4242),i(8939),i(6663),i(9021),i(7884),i(8885),i(1868),i(5454);var a=i(7545);o.exports=a.Promise},6577:function(o,I,i){i(5397);var a=i(7545);o.exports=a.Reflect.construct},3842:function(o,I,i){i(957);var a=i(5607);o.exports=a("String").trim},5008:function(o,I,i){i(9106),i(6663),i(6187),i(9781),i(492),i(6681),i(9594),i(3665),i(9017),i(1250),i(9786),i(503),i(6565),i(9322),i(3610),i(6886),i(3514),i(8671),i(8556),i(1367);var a=i(7545);o.exports=a.Symbol},994:function(o,I,i){i(8939),i(6663),i(5454),i(3665);var a=i(9207);o.exports=a.f("iterator")},2813:function(o,I,i){var a=i(3822);o.exports=a},8664:function(o,I,i){var a=i(1434);o.exports=a},1457:function(o,I,i){var a=i(7710);o.exports=a},2937:function(o,I,i){var a=i(4741);o.exports=a},9297:function(o,I,i){var a=i(4963);o.exports=a},8026:function(o,I,i){var a=i(7820);o.exports=a},2044:function(o,I,i){var a=i(8980);o.exports=a},2214:function(o,I,i){var a=i(6672);o.exports=a},9256:function(o,I,i){var a=i(2285);i(177),i(9031),i(6658),i(1875),i(8658),i(4592),i(6680),o.exports=a},5659:function(o,I,i){var a=i(8535);o.exports=a},6235:function(o,I,i){var a=i(6447),M=i(9288);o.exports=function(T){if(a(T))return T;throw TypeError(M(T)+" is not a function")}},1404:function(o,I,i){var a=i(2091),M=i(9288);o.exports=function(T){if(a(T))return T;throw TypeError(M(T)+" is not a constructor")}},7757:function(o,I,i){var a=i(6447);o.exports=function(M){if(typeof M=="object"||a(M))return M;throw TypeError("Can't set "+String(M)+" as a prototype")}},7423:function(o){o.exports=function(){}},6961:function(o){o.exports=function(I,i,a){if(I instanceof i)return I;throw TypeError("Incorrect "+(a?a+" ":"")+"invocation")}},1138:function(o,I,i){var a=i(5744);o.exports=function(M){if(a(M))return M;throw TypeError(String(M)+" is not an object")}},2724:function(o,I,i){"use strict";var a=i(1795),M=i(7739),T=i(4104);o.exports=function(k){for(var R=a(this),b=T(R),c=arguments.length,C=M(c>1?arguments[1]:void 0,b),y=c>2?arguments[2]:void 0,l=y===void 0?b:M(y,b);l>C;)R[C++]=k;return R}},7397:function(o,I,i){"use strict";var a=i(454).forEach,M=i(424),T=M("forEach");o.exports=T?[].forEach:function(k){return a(this,k,arguments.length>1?arguments[1]:void 0)}},841:function(o,I,i){"use strict";var a=i(8043),M=i(1795),T=i(1635),P=i(6109),k=i(2091),R=i(4104),b=i(9361),c=i(1669),C=i(8703);o.exports=function(l){var h=M(l),u=k(this),p=arguments.length,D=p>1?arguments[1]:void 0,g=D!==void 0;g&&(D=a(D,p>2?arguments[2]:void 0,2));var x=C(h),E=0,_,O,F,B,W,H;if(x&&!(this==Array&&P(x)))for(B=c(h,x),W=B.next,O=u?new this:[];!(F=W.call(B)).done;E++)H=g?T(B,D,[F.value,E],!0):F.value,b(O,E,H);else for(_=R(h),O=u?new this(_):Array(_);_>E;E++)H=g?D(h[E],E):h[E],b(O,E,H);return O.length=E,O}},8180:function(o,I,i){var a=i(101),M=i(7739),T=i(4104),P=function(k){return function(R,b,c){var C=a(R),y=T(C),l=M(c,y),h;if(k&&b!=b){for(;y>l;)if(h=C[l++],h!=h)return!0}else for(;y>l;l++)if((k||l in C)&&C[l]===b)return k||l||0;return!k&&-1}};o.exports={includes:P(!0),indexOf:P(!1)}},454:function(o,I,i){var a=i(8043),M=i(2202),T=i(1795),P=i(4104),k=i(1321),R=[].push,b=function(c){var C=c==1,y=c==2,l=c==3,h=c==4,u=c==6,p=c==7,D=c==5||u;return function(g,x,E,_){for(var O=T(g),F=M(O),B=a(x,E,3),W=P(F),H=0,Y=_||k,oe=C?Y(g,W):y||p?Y(g,0):void 0,ne,be;W>H;H++)if((D||H in F)&&(ne=F[H],be=B(ne,H,O),c))if(C)oe[H]=be;else if(be)switch(c){case 3:return!0;case 5:return ne;case 6:return H;case 2:R.call(oe,ne)}else switch(c){case 4:return!1;case 7:R.call(oe,ne)}return u?-1:l||h?h:oe}};o.exports={forEach:b(0),map:b(1),filter:b(2),some:b(3),every:b(4),find:b(5),findIndex:b(6),filterReject:b(7)}},242:function(o,I,i){var a=i(6192),M=i(8182),T=i(4218),P=M("species");o.exports=function(k){return T>=51||!a(function(){var R=[],b=R.constructor={};return b[P]=function(){return{foo:1}},R[k](Boolean).foo!==1})}},424:function(o,I,i){"use strict";var a=i(6192);o.exports=function(M,T){var P=[][M];return!!P&&a(function(){P.call(null,T||function(){throw 1},1)})}},3712:function(o,I,i){var a=i(4770),M=i(2091),T=i(5744),P=i(8182),k=P("species");o.exports=function(R){var b;return a(R)&&(b=R.constructor,M(b)&&(b===Array||a(b.prototype))?b=void 0:T(b)&&(b=b[k],b===null&&(b=void 0))),b===void 0?Array:b}},1321:function(o,I,i){var a=i(3712);o.exports=function(M,T){return new(a(M))(T===0?0:T)}},1635:function(o,I,i){var a=i(1138),M=i(6639);o.exports=function(T,P,k,R){try{return R?P(a(k)[0],k[1]):P(k)}catch(b){M(T,"throw",b)}}},9770:function(o,I,i){var a=i(8182),M=a("iterator"),T=!1;try{var P=0,k={next:function(){return{done:!!P++}},return:function(){T=!0}};k[M]=function(){return this},Array.from(k,function(){throw 2})}catch{}o.exports=function(R,b){if(!b&&!T)return!1;var c=!1;try{var C={};C[M]=function(){return{next:function(){return{done:c=!0}}}},R(C)}catch{}return c}},9272:function(o){var I={}.toString;o.exports=function(i){return I.call(i).slice(8,-1)}},4696:function(o,I,i){var a=i(3471),M=i(6447),T=i(9272),P=i(8182),k=P("toStringTag"),R=T(function(){return arguments}())=="Arguments",b=function(c,C){try{return c[C]}catch{}};o.exports=a?T:function(c){var C,y,l;return c===void 0?"Undefined":c===null?"Null":typeof(y=b(C=Object(c),k))=="string"?y:R?T(C):(l=T(C))=="Object"&&M(C.callee)?"Arguments":l}},4635:function(o,I,i){var a=i(6192);o.exports=!a(function(){function M(){}return M.prototype.constructor=null,Object.getPrototypeOf(new M)!==M.prototype})},5148:function(o,I,i){"use strict";var a=i(4413).IteratorPrototype,M=i(2853),T=i(774),P=i(1284),k=i(7771),R=function(){return this};o.exports=function(b,c,C){var y=c+" Iterator";return b.prototype=M(a,{next:T(1,C)}),P(b,y,!1,!0),k[y]=R,b}},8711:function(o,I,i){var a=i(69),M=i(2760),T=i(774);o.exports=a?function(P,k,R){return M.f(P,k,T(1,R))}:function(P,k,R){return P[k]=R,P}},774:function(o){o.exports=function(I,i){return{enumerable:!(I&1),configurable:!(I&2),writable:!(I&4),value:i}}},9361:function(o,I,i){"use strict";var a=i(77),M=i(2760),T=i(774);o.exports=function(P,k,R){var b=a(k);b in P?M.f(P,b,T(0,R)):P[b]=R}},7218:function(o,I,i){"use strict";var a=i(3085),M=i(5546),T=i(2282),P=i(6447),k=i(5148),R=i(9341),b=i(4469),c=i(1284),C=i(8711),y=i(9482),l=i(8182),h=i(7771),u=i(4413),p=T.PROPER,D=T.CONFIGURABLE,g=u.IteratorPrototype,x=u.BUGGY_SAFARI_ITERATORS,E=l("iterator"),_="keys",O="values",F="entries",B=function(){return this};o.exports=function(W,H,Y,oe,ne,be,Z){k(Y,H,oe);var me=function(G){if(G===ne&&te)return te;if(!x&&G in Ce)return Ce[G];switch(G){case _:return function(){return new Y(this,G)};case O:return function(){return new Y(this,G)};case F:return function(){return new Y(this,G)}}return function(){return new Y(this)}},V=H+" Iterator",Le=!1,Ce=W.prototype,ze=Ce[E]||Ce["@@iterator"]||ne&&Ce[ne],te=!x&&ze||me(ne),ae=H=="Array"&&Ce.entries||ze,q,$,de;if(ae&&(q=R(ae.call(new W)),q!==Object.prototype&&q.next&&(!M&&R(q)!==g&&(b?b(q,g):P(q[E])||y(q,E,B)),c(q,V,!0,!0),M&&(h[V]=B))),p&&ne==O&&ze&&ze.name!==O&&(!M&&D?C(Ce,"name",O):(Le=!0,te=function(){return ze.call(this)})),ne)if($={values:me(O),keys:be?te:me(_),entries:me(F)},Z)for(de in $)(x||Le||!(de in Ce))&&y(Ce,de,$[de]);else a({target:H,proto:!0,forced:x||Le},$);return(!M||Z)&&Ce[E]!==te&&y(Ce,E,te,{name:ne}),h[H]=te,$}},1488:function(o,I,i){var a=i(7545),M=i(4500),T=i(9207),P=i(2760).f;o.exports=function(k){var R=a.Symbol||(a.Symbol={});M(R,k)||P(R,k,{value:T.f(k)})}},69:function(o,I,i){var a=i(6192);o.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(o,I,i){var a=i(8576),M=i(5744),T=a.document,P=M(T)&&M(T.createElement);o.exports=function(k){return P?T.createElement(k):{}}},7365:function(o){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(o){o.exports=typeof window=="object"},9347:function(o,I,i){var a=i(8989),M=i(8576);o.exports=/ipad|iphone|ipod/i.test(a)&&M.Pebble!==void 0},9536:function(o,I,i){var a=i(8989);o.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(a)},224:function(o,I,i){var a=i(9272),M=i(8576);o.exports=a(M.process)=="process"},5914:function(o,I,i){var a=i(8989);o.exports=/web0s(?!.*chrome)/i.test(a)},8989:function(o,I,i){var a=i(150);o.exports=a("navigator","userAgent")||""},4218:function(o,I,i){var a=i(8576),M=i(8989),T=a.process,P=a.Deno,k=T&&T.versions||P&&P.version,R=k&&k.v8,b,c;R?(b=R.split("."),c=b[0]<4?1:b[0]+b[1]):M&&(b=M.match(/Edge\/(\d+)/),(!b||b[1]>=74)&&(b=M.match(/Chrome\/(\d+)/),b&&(c=b[1]))),o.exports=c&&+c},5607:function(o,I,i){var a=i(7545);o.exports=function(M){return a[M+"Prototype"]}},2952:function(o){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(o,I,i){"use strict";var a=i(8576),M=i(6447),T=i(5141).f,P=i(9245),k=i(7545),R=i(8043),b=i(8711),c=i(4500),C=function(y){var l=function(h,u,p){if(this instanceof y){switch(arguments.length){case 0:return new y;case 1:return new y(h);case 2:return new y(h,u)}return new y(h,u,p)}return y.apply(this,arguments)};return l.prototype=y.prototype,l};o.exports=function(y,l){var h=y.target,u=y.global,p=y.stat,D=y.proto,g=u?a:p?a[h]:(a[h]||{}).prototype,x=u?k:k[h]||b(k,h,{})[h],E=x.prototype,_,O,F,B,W,H,Y,oe,ne;for(B in l)_=P(u?B:h+(p?".":"#")+B,y.forced),O=!_&&g&&c(g,B),H=x[B],O&&(y.noTargetGet?(ne=T(g,B),Y=ne&&ne.value):Y=g[B]),W=O&&Y?Y:l[B],!(O&&typeof H==typeof W)&&(y.bind&&O?oe=R(W,a):y.wrap&&O?oe=C(W):D&&M(W)?oe=R(Function.call,W):oe=W,(y.sham||W&&W.sham||H&&H.sham)&&b(oe,"sham",!0),b(x,B,oe),D&&(F=h+"Prototype",c(k,F)||b(k,F,{}),b(k[F],B,W),y.real&&E&&!E[B]&&b(E,B,W)))}},6192:function(o){o.exports=function(I){try{return!!I()}catch{return!0}}},8043:function(o,I,i){var a=i(6235);o.exports=function(M,T,P){if(a(M),T===void 0)return M;switch(P){case 0:return function(){return M.call(T)};case 1:return function(k){return M.call(T,k)};case 2:return function(k,R){return M.call(T,k,R)};case 3:return function(k,R,b){return M.call(T,k,R,b)}}return function(){return M.apply(T,arguments)}}},6782:function(o,I,i){"use strict";var a=i(6235),M=i(5744),T=[].slice,P={},k=function(R,b,c){if(!(b in P)){for(var C=[],y=0;y<b;y++)C[y]="a["+y+"]";P[b]=Function("C,a","return new C("+C.join(",")+")")}return P[b](R,c)};o.exports=Function.bind||function(b){var c=a(this),C=T.call(arguments,1),y=function(){var h=C.concat(T.call(arguments));return this instanceof y?k(c,h.length,h):c.apply(b,h)};return M(c.prototype)&&(y.prototype=c.prototype),y}},2282:function(o,I,i){var a=i(69),M=i(4500),T=Function.prototype,P=a&&Object.getOwnPropertyDescriptor,k=M(T,"name"),R=k&&(function(){}).name==="something",b=k&&(!a||a&&P(T,"name").configurable);o.exports={EXISTS:k,PROPER:R,CONFIGURABLE:b}},150:function(o,I,i){var a=i(7545),M=i(8576),T=i(6447),P=function(k){return T(k)?k:void 0};o.exports=function(k,R){return arguments.length<2?P(a[k])||P(M[k]):a[k]&&a[k][R]||M[k]&&M[k][R]}},8703:function(o,I,i){var a=i(4696),M=i(5037),T=i(7771),P=i(8182),k=P("iterator");o.exports=function(R){if(R!=null)return M(R,k)||M(R,"@@iterator")||T[a(R)]}},1669:function(o,I,i){var a=i(6235),M=i(1138),T=i(8703);o.exports=function(P,k){var R=arguments.length<2?T(P):k;if(a(R))return M(R.call(P));throw TypeError(String(P)+" is not iterable")}},5037:function(o,I,i){var a=i(6235);o.exports=function(M,T){var P=M[T];return P==null?void 0:a(P)}},8576:function(o,I,i){var a=function(M){return M&&M.Math==Math&&M};o.exports=a(typeof globalThis=="object"&&globalThis)||a(typeof window=="object"&&window)||a(typeof self=="object"&&self)||a(typeof i.g=="object"&&i.g)||function(){return this}()||Function("return this")()},4500:function(o,I,i){var a=i(1795),M={}.hasOwnProperty;o.exports=Object.hasOwn||function(P,k){return M.call(a(P),k)}},4535:function(o){o.exports={}},3681:function(o,I,i){var a=i(8576);o.exports=function(M,T){var P=a.console;P&&P.error&&(arguments.length===1?P.error(M):P.error(M,T))}},7403:function(o,I,i){var a=i(150);o.exports=a("document","documentElement")},188:function(o,I,i){var a=i(69),M=i(6192),T=i(7449);o.exports=!a&&!M(function(){return Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(o,I,i){var a=i(6192),M=i(9272),T="".split;o.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(P){return M(P)=="String"?T.call(P,""):Object(P)}:Object},9516:function(o,I,i){var a=i(6447),M=i(6434),T=Function.toString;a(M.inspectSource)||(M.inspectSource=function(P){return T.call(P)}),o.exports=M.inspectSource},273:function(o,I,i){var a=i(5744),M=i(8711);o.exports=function(T,P){a(P)&&"cause"in P&&M(T,"cause",T.cause)}},3326:function(o,I,i){var a=i(8921),M=i(8576),T=i(5744),P=i(8711),k=i(4500),R=i(6434),b=i(9766),c=i(4535),C="Object already initialized",y=M.WeakMap,l,h,u,p=function(F){return u(F)?h(F):l(F,{})},D=function(F){return function(B){var W;if(!T(B)||(W=h(B)).type!==F)throw TypeError("Incompatible receiver, "+F+" required");return W}};if(a||R.state){var g=R.state||(R.state=new y),x=g.get,E=g.has,_=g.set;l=function(F,B){if(E.call(g,F))throw new TypeError(C);return B.facade=F,_.call(g,F,B),B},h=function(F){return x.call(g,F)||{}},u=function(F){return E.call(g,F)}}else{var O=b("state");c[O]=!0,l=function(F,B){if(k(F,O))throw new TypeError(C);return B.facade=F,P(F,O,B),B},h=function(F){return k(F,O)?F[O]:{}},u=function(F){return k(F,O)}}o.exports={set:l,get:h,has:u,enforce:p,getterFor:D}},6109:function(o,I,i){var a=i(8182),M=i(7771),T=a("iterator"),P=Array.prototype;o.exports=function(k){return k!==void 0&&(M.Array===k||P[T]===k)}},4770:function(o,I,i){var a=i(9272);o.exports=Array.isArray||function(T){return a(T)=="Array"}},6447:function(o){o.exports=function(I){return typeof I=="function"}},2091:function(o,I,i){var a=i(6192),M=i(6447),T=i(4696),P=i(150),k=i(9516),R=[],b=P("Reflect","construct"),c=/^\s*(?:class|function)\b/,C=c.exec,y=!c.exec(function(){}),l=function(u){if(!M(u))return!1;try{return b(Object,R,u),!0}catch{return!1}},h=function(u){if(!M(u))return!1;switch(T(u)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return y||!!C.call(c,k(u))};o.exports=!b||a(function(){var u;return l(l.call)||!l(Object)||!l(function(){u=!0})||u})?h:l},9245:function(o,I,i){var a=i(6192),M=i(6447),T=/#|\.prototype\./,P=function(C,y){var l=R[k(C)];return l==c?!0:l==b?!1:M(y)?a(y):!!y},k=P.normalize=function(C){return String(C).replace(T,".").toLowerCase()},R=P.data={},b=P.NATIVE="N",c=P.POLYFILL="P";o.exports=P},5744:function(o,I,i){var a=i(6447);o.exports=function(M){return typeof M=="object"?M!==null:a(M)}},5546:function(o){o.exports=!0},3236:function(o,I,i){var a=i(6447),M=i(150),T=i(615);o.exports=T?function(P){return typeof P=="symbol"}:function(P){var k=M("Symbol");return a(k)&&Object(P)instanceof k}},3442:function(o,I,i){var a=i(1138),M=i(6109),T=i(4104),P=i(8043),k=i(1669),R=i(8703),b=i(6639),c=function(C,y){this.stopped=C,this.result=y};o.exports=function(C,y,l){var h=l&&l.that,u=!!(l&&l.AS_ENTRIES),p=!!(l&&l.IS_ITERATOR),D=!!(l&&l.INTERRUPTED),g=P(y,h,1+u+D),x,E,_,O,F,B,W,H=function(oe){return x&&b(x,"normal",oe),new c(!0,oe)},Y=function(oe){return u?(a(oe),D?g(oe[0],oe[1],H):g(oe[0],oe[1])):D?g(oe,H):g(oe)};if(p)x=C;else{if(E=R(C),!E)throw TypeError(String(C)+" is not iterable");if(M(E)){for(_=0,O=T(C);O>_;_++)if(F=Y(C[_]),F&&F instanceof c)return F;return new c(!1)}x=k(C,E)}for(B=x.next;!(W=B.call(x)).done;){try{F=Y(W.value)}catch(oe){b(x,"throw",oe)}if(typeof F=="object"&&F&&F instanceof c)return F}return new c(!1)}},6639:function(o,I,i){var a=i(1138),M=i(5037);o.exports=function(T,P,k){var R,b;a(T);try{if(R=M(T,"return"),!R){if(P==="throw")throw k;return k}R=R.call(T)}catch(c){b=!0,R=c}if(P==="throw")throw k;if(b)throw R;return a(R),k}},4413:function(o,I,i){"use strict";var a=i(6192),M=i(6447),T=i(2853),P=i(9341),k=i(9482),R=i(8182),b=i(5546),c=R("iterator"),C=!1,y,l,h;[].keys&&(h=[].keys(),"next"in h?(l=P(P(h)),l!==Object.prototype&&(y=l)):C=!0);var u=y==null||a(function(){var p={};return y[c].call(p)!==p});u?y={}:b&&(y=T(y)),M(y[c])||k(y,c,function(){return this}),o.exports={IteratorPrototype:y,BUGGY_SAFARI_ITERATORS:C}},7771:function(o){o.exports={}},4104:function(o,I,i){var a=i(8445);o.exports=function(M){return a(M.length)}},2950:function(o,I,i){var a=i(8576),M=i(5141).f,T=i(7160).set,P=i(9536),k=i(9347),R=i(5914),b=i(224),c=a.MutationObserver||a.WebKitMutationObserver,C=a.document,y=a.process,l=a.Promise,h=M(a,"queueMicrotask"),u=h&&h.value,p,D,g,x,E,_,O,F;u||(p=function(){var B,W;for(b&&(B=y.domain)&&B.exit();D;){W=D.fn,D=D.next;try{W()}catch(H){throw D?x():g=void 0,H}}g=void 0,B&&B.enter()},!P&&!b&&!R&&c&&C?(E=!0,_=C.createTextNode(""),new c(p).observe(_,{characterData:!0}),x=function(){_.data=E=!E}):!k&&l&&l.resolve?(O=l.resolve(void 0),O.constructor=l,F=O.then,x=function(){F.call(O,p)}):b?x=function(){y.nextTick(p)}:x=function(){T.call(a,p)}),o.exports=u||function(B){var W={fn:B,next:void 0};g&&(g.next=W),D||(D=W,x()),g=W}},4471:function(o,I,i){var a=i(8576);o.exports=a.Promise},3045:function(o,I,i){var a=i(4218),M=i(6192);o.exports=!!Object.getOwnPropertySymbols&&!M(function(){var T=Symbol();return!String(T)||!(Object(T)instanceof Symbol)||!Symbol.sham&&a&&a<41})},4551:function(o,I,i){var a=i(6192),M=i(8182),T=i(5546),P=M("iterator");o.exports=!a(function(){var k=new URL("b?a=1&b=2&c=3","http://a"),R=k.searchParams,b="";return k.pathname="c%20d",R.forEach(function(c,C){R.delete("b"),b+=C+c}),T&&!k.toJSON||!R.sort||k.href!=="http://a/c%20d?a=1&c=3"||R.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!R[P]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||b!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8921:function(o,I,i){var a=i(8576),M=i(6447),T=i(9516),P=a.WeakMap;o.exports=M(P)&&/native code/.test(T(P))},9438:function(o,I,i){"use strict";var a=i(6235),M=function(T){var P,k;this.promise=new T(function(R,b){if(P!==void 0||k!==void 0)throw TypeError("Bad Promise constructor");P=R,k=b}),this.resolve=a(P),this.reject=a(k)};o.exports.f=function(T){return new M(T)}},15:function(o,I,i){var a=i(8576),M=i(6192),T=i(4845),P=i(4277).trim,k=i(1450),R=a.parseFloat,b=a.Symbol,c=b&&b.iterator,C=1/R(k+"-0")!==-1/0||c&&!M(function(){R(Object(c))});o.exports=C?function(l){var h=P(T(l)),u=R(h);return u===0&&h.charAt(0)=="-"?-0:u}:R},2558:function(o,I,i){var a=i(8576),M=i(6192),T=i(4845),P=i(4277).trim,k=i(1450),R=a.parseInt,b=a.Symbol,c=b&&b.iterator,C=/^[+-]?0[Xx]/,y=R(k+"08")!==8||R(k+"0x16")!==22||c&&!M(function(){R(Object(c))});o.exports=y?function(h,u){var p=P(T(h));return R(p,u>>>0||(C.test(p)?16:10))}:R},2503:function(o,I,i){"use strict";var a=i(69),M=i(6192),T=i(7653),P=i(4750),k=i(6007),R=i(1795),b=i(2202),c=Object.assign,C=Object.defineProperty;o.exports=!c||M(function(){if(a&&c({b:1},c(C({},"a",{enumerable:!0,get:function(){C(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var y={},l={},h=Symbol(),u="abcdefghijklmnopqrst";return y[h]=7,u.split("").forEach(function(p){l[p]=p}),c({},y)[h]!=7||T(c({},l)).join("")!=u})?function(l,h){for(var u=R(l),p=arguments.length,D=1,g=P.f,x=k.f;p>D;)for(var E=b(arguments[D++]),_=g?T(E).concat(g(E)):T(E),O=_.length,F=0,B;O>F;)B=_[F++],(!a||x.call(E,B))&&(u[B]=E[B]);return u}:c},2853:function(o,I,i){var a=i(1138),M=i(1187),T=i(2952),P=i(4535),k=i(7403),R=i(7449),b=i(9766),c=">",C="<",y="prototype",l="script",h=b("IE_PROTO"),u=function(){},p=function(_){return C+l+c+_+C+"/"+l+c},D=function(_){_.write(p("")),_.close();var O=_.parentWindow.Object;return _=null,O},g=function(){var _=R("iframe"),O="java"+l+":",F;return _.style.display="none",k.appendChild(_),_.src=String(O),F=_.contentWindow.document,F.open(),F.write(p("document.F=Object")),F.close(),F.F},x,E=function(){try{x=new ActiveXObject("htmlfile")}catch{}E=typeof document<"u"?document.domain&&x?D(x):g():D(x);for(var _=T.length;_--;)delete E[y][T[_]];return E()};P[h]=!0,o.exports=Object.create||function(O,F){var B;return O!==null?(u[y]=a(O),B=new u,u[y]=null,B[h]=O):B=E(),F===void 0?B:M(B,F)}},1187:function(o,I,i){var a=i(69),M=i(2760),T=i(1138),P=i(7653);o.exports=a?Object.defineProperties:function(R,b){T(R);for(var c=P(b),C=c.length,y=0,l;C>y;)M.f(R,l=c[y++],b[l]);return R}},2760:function(o,I,i){var a=i(69),M=i(188),T=i(1138),P=i(77),k=Object.defineProperty;I.f=a?k:function(b,c,C){if(T(b),c=P(c),T(C),M)try{return k(b,c,C)}catch{}if("get"in C||"set"in C)throw TypeError("Accessors not supported");return"value"in C&&(b[c]=C.value),b}},5141:function(o,I,i){var a=i(69),M=i(6007),T=i(774),P=i(101),k=i(77),R=i(4500),b=i(188),c=Object.getOwnPropertyDescriptor;I.f=a?c:function(y,l){if(y=P(y),l=k(l),b)try{return c(y,l)}catch{}if(R(y,l))return T(!M.f.call(y,l),y[l])}},4052:function(o,I,i){var a=i(101),M=i(2092).f,T={}.toString,P=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],k=function(R){try{return M(R)}catch{return P.slice()}};o.exports.f=function(b){return P&&T.call(b)=="[object Window]"?k(b):M(a(b))}},2092:function(o,I,i){var a=i(7934),M=i(2952),T=M.concat("length","prototype");I.f=Object.getOwnPropertyNames||function(k){return a(k,T)}},4750:function(o,I){I.f=Object.getOwnPropertySymbols},9341:function(o,I,i){var a=i(4500),M=i(6447),T=i(1795),P=i(9766),k=i(4635),R=P("IE_PROTO"),b=Object.prototype;o.exports=k?Object.getPrototypeOf:function(c){var C=T(c);if(a(C,R))return C[R];var y=C.constructor;return M(y)&&C instanceof y?y.prototype:C instanceof Object?b:null}},7934:function(o,I,i){var a=i(4500),M=i(101),T=i(8180).indexOf,P=i(4535);o.exports=function(k,R){var b=M(k),c=0,C=[],y;for(y in b)!a(P,y)&&a(b,y)&&C.push(y);for(;R.length>c;)a(b,y=R[c++])&&(~T(C,y)||C.push(y));return C}},7653:function(o,I,i){var a=i(7934),M=i(2952);o.exports=Object.keys||function(P){return a(P,M)}},6007:function(o,I){"use strict";var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,M=a&&!i.call({1:2},1);I.f=M?function(P){var k=a(this,P);return!!k&&k.enumerable}:i},4469:function(o,I,i){var a=i(1138),M=i(7757);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var T=!1,P={},k;try{k=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,k.call(P,[]),T=P instanceof Array}catch{}return function(b,c){return a(b),M(c),T?k.call(b,c):b.__proto__=c,b}}():void 0)},158:function(o,I,i){"use strict";var a=i(3471),M=i(4696);o.exports=a?{}.toString:function(){return"[object "+M(this)+"]"}},380:function(o,I,i){var a=i(6447),M=i(5744);o.exports=function(T,P){var k,R;if(P==="string"&&a(k=T.toString)&&!M(R=k.call(T))||a(k=T.valueOf)&&!M(R=k.call(T))||P!=="string"&&a(k=T.toString)&&!M(R=k.call(T)))return R;throw TypeError("Can't convert object to primitive value")}},7545:function(o){o.exports={}},892:function(o){o.exports=function(I){try{return{error:!1,value:I()}}catch(i){return{error:!0,value:i}}}},9126:function(o,I,i){var a=i(1138),M=i(5744),T=i(9438);o.exports=function(P,k){if(a(P),M(k)&&k.constructor===P)return k;var R=T.f(P),b=R.resolve;return b(k),R.promise}},533:function(o,I,i){var a=i(9482);o.exports=function(M,T,P){for(var k in T)P&&P.unsafe&&M[k]?M[k]=T[k]:a(M,k,T[k],P);return M}},9482:function(o,I,i){var a=i(8711);o.exports=function(M,T,P,k){k&&k.enumerable?M[T]=P:a(M,T,P)}},3209:function(o){o.exports=function(I){if(I==null)throw TypeError("Can't call method on "+I);return I}},7613:function(o,I,i){var a=i(8576);o.exports=function(M,T){try{Object.defineProperty(a,M,{value:T,configurable:!0,writable:!0})}catch{a[M]=T}return T}},3656:function(o,I,i){"use strict";var a=i(150),M=i(2760),T=i(8182),P=i(69),k=T("species");o.exports=function(R){var b=a(R),c=M.f;P&&b&&!b[k]&&c(b,k,{configurable:!0,get:function(){return this}})}},1284:function(o,I,i){var a=i(3471),M=i(2760).f,T=i(8711),P=i(4500),k=i(158),R=i(8182),b=R("toStringTag");o.exports=function(c,C,y,l){if(c){var h=y?c:c.prototype;P(h,b)||M(h,b,{configurable:!0,value:C}),l&&!a&&T(h,"toString",k)}}},9766:function(o,I,i){var a=i(8717),M=i(2759),T=a("keys");o.exports=function(P){return T[P]||(T[P]=M(P))}},6434:function(o,I,i){var a=i(8576),M=i(7613),T="__core-js_shared__",P=a[T]||M(T,{});o.exports=P},8717:function(o,I,i){var a=i(5546),M=i(6434);(o.exports=function(T,P){return M[T]||(M[T]=P!==void 0?P:{})})("versions",[]).push({version:"3.18.2",mode:a?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(o,I,i){var a=i(1138),M=i(1404),T=i(8182),P=T("species");o.exports=function(k,R){var b=a(k).constructor,c;return b===void 0||(c=a(b)[P])==null?R:M(c)}},863:function(o,I,i){var a=i(1941),M=i(4845),T=i(3209),P=function(k){return function(R,b){var c=M(T(R)),C=a(b),y=c.length,l,h;return C<0||C>=y?k?"":void 0:(l=c.charCodeAt(C),l<55296||l>56319||C+1===y||(h=c.charCodeAt(C+1))<56320||h>57343?k?c.charAt(C):l:k?c.slice(C,C+2):(l-55296<<10)+(h-56320)+65536)}};o.exports={codeAt:P(!1),charAt:P(!0)}},7977:function(o){"use strict";var I=2147483647,i=36,a=1,M=26,T=38,P=700,k=72,R=128,b="-",c=/[^\0-\u007E]/,C=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",l=i-a,h=Math.floor,u=String.fromCharCode,p=function(E){for(var _=[],O=0,F=E.length;O<F;){var B=E.charCodeAt(O++);if(B>=55296&&B<=56319&&O<F){var W=E.charCodeAt(O++);(W&64512)==56320?_.push(((B&1023)<<10)+(W&1023)+65536):(_.push(B),O--)}else _.push(B)}return _},D=function(E){return E+22+75*(E<26)},g=function(E,_,O){var F=0;for(E=O?h(E/P):E>>1,E+=h(E/_);E>l*M>>1;F+=i)E=h(E/l);return h(F+(l+1)*E/(E+T))},x=function(E){var _=[];E=p(E);var O=E.length,F=R,B=0,W=k,H,Y;for(H=0;H<E.length;H++)Y=E[H],Y<128&&_.push(u(Y));var oe=_.length,ne=oe;for(oe&&_.push(b);ne<O;){var be=I;for(H=0;H<E.length;H++)Y=E[H],Y>=F&&Y<be&&(be=Y);var Z=ne+1;if(be-F>h((I-B)/Z))throw RangeError(y);for(B+=(be-F)*Z,F=be,H=0;H<E.length;H++){if(Y=E[H],Y<F&&++B>I)throw RangeError(y);if(Y==F){for(var me=B,V=i;;V+=i){var Le=V<=W?a:V>=W+M?M:V-W;if(me<Le)break;var Ce=me-Le,ze=i-Le;_.push(u(D(Le+Ce%ze))),me=h(Ce/ze)}_.push(u(D(me))),W=g(B,Z,ne==oe),B=0,++ne}}++B,++F}return _.join("")};o.exports=function(E){var _=[],O=E.toLowerCase().replace(C,".").split("."),F,B;for(F=0;F<O.length;F++)B=O[F],_.push(c.test(B)?"xn--"+x(B):B);return _.join(".")}},6815:function(o,I,i){var a=i(2282).PROPER,M=i(6192),T=i(1450),P="\u200B\x85\u180E";o.exports=function(k){return M(function(){return!!T[k]()||P[k]()!==P||a&&T[k].name!==k})}},4277:function(o,I,i){var a=i(3209),M=i(4845),T=i(1450),P="["+T+"]",k=RegExp("^"+P+P+"*"),R=RegExp(P+P+"*$"),b=function(c){return function(C){var y=M(a(C));return c&1&&(y=y.replace(k,"")),c&2&&(y=y.replace(R,"")),y}};o.exports={start:b(1),end:b(2),trim:b(3)}},7160:function(o,I,i){var a=i(8576),M=i(6447),T=i(6192),P=i(8043),k=i(7403),R=i(7449),b=i(9536),c=i(224),C=a.setImmediate,y=a.clearImmediate,l=a.process,h=a.MessageChannel,u=a.Dispatch,p=0,D={},g="onreadystatechange",x,E,_,O;try{x=a.location}catch{}var F=function(Y){if(D.hasOwnProperty(Y)){var oe=D[Y];delete D[Y],oe()}},B=function(Y){return function(){F(Y)}},W=function(Y){F(Y.data)},H=function(Y){a.postMessage(String(Y),x.protocol+"//"+x.host)};(!C||!y)&&(C=function(oe){for(var ne=[],be=arguments.length,Z=1;be>Z;)ne.push(arguments[Z++]);return D[++p]=function(){(M(oe)?oe:Function(oe)).apply(void 0,ne)},E(p),p},y=function(oe){delete D[oe]},c?E=function(Y){l.nextTick(B(Y))}:u&&u.now?E=function(Y){u.now(B(Y))}:h&&!b?(_=new h,O=_.port2,_.port1.onmessage=W,E=P(O.postMessage,O,1)):a.addEventListener&&M(a.postMessage)&&!a.importScripts&&x&&x.protocol!=="file:"&&!T(H)?(E=H,a.addEventListener("message",W,!1)):g in R("script")?E=function(Y){k.appendChild(R("script"))[g]=function(){k.removeChild(this),F(Y)}}:E=function(Y){setTimeout(B(Y),0)}),o.exports={set:C,clear:y}},7739:function(o,I,i){var a=i(1941),M=Math.max,T=Math.min;o.exports=function(P,k){var R=a(P);return R<0?M(R+k,0):T(R,k)}},101:function(o,I,i){var a=i(2202),M=i(3209);o.exports=function(T){return a(M(T))}},1941:function(o){var I=Math.ceil,i=Math.floor;o.exports=function(a){var M=+a;return M!==M||M===0?0:(M>0?i:I)(M)}},8445:function(o,I,i){var a=i(1941),M=Math.min;o.exports=function(T){return T>0?M(a(T),9007199254740991):0}},1795:function(o,I,i){var a=i(3209);o.exports=function(M){return Object(a(M))}},7888:function(o,I,i){var a=i(5744),M=i(3236),T=i(5037),P=i(380),k=i(8182),R=k("toPrimitive");o.exports=function(b,c){if(!a(b)||M(b))return b;var C=T(b,R),y;if(C){if(c===void 0&&(c="default"),y=C.call(b,c),!a(y)||M(y))return y;throw TypeError("Can't convert object to primitive value")}return c===void 0&&(c="number"),P(b,c)}},77:function(o,I,i){var a=i(7888),M=i(3236);o.exports=function(T){var P=a(T,"string");return M(P)?P:String(P)}},3471:function(o,I,i){var a=i(8182),M=a("toStringTag"),T={};T[M]="z",o.exports=String(T)==="[object z]"},4845:function(o,I,i){var a=i(4696);o.exports=function(M){if(a(M)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(M)}},9288:function(o){o.exports=function(I){try{return String(I)}catch{return"Object"}}},2759:function(o){var I=0,i=Math.random();o.exports=function(a){return"Symbol("+String(a===void 0?"":a)+")_"+(++I+i).toString(36)}},615:function(o,I,i){var a=i(3045);o.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(o,I,i){var a=i(8182);I.f=a},8182:function(o,I,i){var a=i(8576),M=i(8717),T=i(4500),P=i(2759),k=i(3045),R=i(615),b=M("wks"),c=a.Symbol,C=R?c:c&&c.withoutSetter||P;o.exports=function(y){return(!T(b,y)||!(k||typeof b[y]=="string"))&&(k&&T(c,y)?b[y]=c[y]:b[y]=C("Symbol."+y)),b[y]}},1450:function(o){o.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},4242:function(o,I,i){"use strict";var a=i(3085),M=i(9341),T=i(4469),P=i(2853),k=i(8711),R=i(774),b=i(273),c=i(3442),C=i(4845),y=function(h,u){var p=this,D=arguments.length>2?arguments[2]:void 0;if(!(p instanceof y))return new y(h,u,D);T&&(p=T(new Error(void 0),M(p))),u!==void 0&&k(p,"message",C(u)),b(p,D);var g=[];return c(h,g.push,{that:g}),k(p,"errors",g),p};y.prototype=P(Error.prototype,{constructor:R(5,y),message:R(5,""),name:R(5,"AggregateError")}),a({global:!0},{AggregateError:y})},9106:function(o,I,i){"use strict";var a=i(3085),M=i(6192),T=i(4770),P=i(5744),k=i(1795),R=i(4104),b=i(9361),c=i(1321),C=i(242),y=i(8182),l=i(4218),h=y("isConcatSpreadable"),u=9007199254740991,p="Maximum allowed index exceeded",D=l>=51||!M(function(){var _=[];return _[h]=!1,_.concat()[0]!==_}),g=C("concat"),x=function(_){if(!P(_))return!1;var O=_[h];return O!==void 0?!!O:T(_)},E=!D||!g;a({target:"Array",proto:!0,forced:E},{concat:function(O){var F=k(this),B=c(F,0),W=0,H,Y,oe,ne,be;for(H=-1,oe=arguments.length;H<oe;H++)if(be=H===-1?F:arguments[H],x(be)){if(ne=R(be),W+ne>u)throw TypeError(p);for(Y=0;Y<ne;Y++,W++)Y in be&&b(B,W,be[Y])}else{if(W>=u)throw TypeError(p);b(B,W++,be)}return B.length=W,B}})},1710:function(o,I,i){var a=i(3085),M=i(2724),T=i(7423);a({target:"Array",proto:!0},{fill:M}),T("fill")},3436:function(o,I,i){"use strict";var a=i(3085),M=i(454).filter,T=i(242),P=T("filter");a({target:"Array",proto:!0,forced:!P},{filter:function(R){return M(this,R,arguments.length>1?arguments[1]:void 0)}})},9823:function(o,I,i){"use strict";var a=i(3085),M=i(7397);a({target:"Array",proto:!0,forced:[].forEach!=M},{forEach:M})},9173:function(o,I,i){var a=i(3085),M=i(841),T=i(9770),P=!T(function(k){Array.from(k)});a({target:"Array",stat:!0,forced:P},{from:M})},2276:function(o,I,i){"use strict";var a=i(3085),M=i(8180).indexOf,T=i(424),P=[].indexOf,k=!!P&&1/[1].indexOf(1,-0)<0,R=T("indexOf");a({target:"Array",proto:!0,forced:k||!R},{indexOf:function(c){return k?P.apply(this,arguments)||0:M(this,c,arguments.length>1?arguments[1]:void 0)}})},8118:function(o,I,i){var a=i(3085),M=i(4770);a({target:"Array",stat:!0},{isArray:M})},8939:function(o,I,i){"use strict";var a=i(101),M=i(7423),T=i(7771),P=i(3326),k=i(7218),R="Array Iterator",b=P.set,c=P.getterFor(R);o.exports=k(Array,"Array",function(C,y){b(this,{type:R,target:a(C),index:0,kind:y})},function(){var C=c(this),y=C.target,l=C.kind,h=C.index++;return!y||h>=y.length?(C.target=void 0,{value:void 0,done:!0}):l=="keys"?{value:h,done:!1}:l=="values"?{value:y[h],done:!1}:{value:[h,y[h]],done:!1}},"values"),T.Arguments=T.Array,M("keys"),M("values"),M("entries")},3838:function(o,I,i){"use strict";var a=i(3085),M=i(454).map,T=i(242),P=T("map");a({target:"Array",proto:!0,forced:!P},{map:function(R){return M(this,R,arguments.length>1?arguments[1]:void 0)}})},5818:function(o,I,i){"use strict";var a=i(3085),M=i(4770),T=i(2091),P=i(5744),k=i(7739),R=i(4104),b=i(101),c=i(9361),C=i(8182),y=i(242),l=y("slice"),h=C("species"),u=[].slice,p=Math.max;a({target:"Array",proto:!0,forced:!l},{slice:function(g,x){var E=b(this),_=R(E),O=k(g,_),F=k(x===void 0?_:x,_),B,W,H;if(M(E)&&(B=E.constructor,T(B)&&(B===Array||M(B.prototype))?B=void 0:P(B)&&(B=B[h],B===null&&(B=void 0)),B===Array||B===void 0))return u.call(E,O,F);for(W=new(B===void 0?Array:B)(p(F-O,0)),H=0;O<F;O++,H++)O in E&&c(W,H,E[O]);return W.length=H,W}})},2178:function(o,I,i){"use strict";var a=i(3085),M=i(7739),T=i(1941),P=i(4104),k=i(1795),R=i(1321),b=i(9361),c=i(242),C=c("splice"),y=Math.max,l=Math.min,h=9007199254740991,u="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!C},{splice:function(D,g){var x=k(this),E=P(x),_=M(D,E),O=arguments.length,F,B,W,H,Y,oe;if(O===0?F=B=0:O===1?(F=0,B=E-_):(F=O-2,B=l(y(T(g),0),E-_)),E+F-B>h)throw TypeError(u);for(W=R(x,B),H=0;H<B;H++)Y=_+H,Y in x&&b(W,H,x[Y]);if(W.length=B,F<B){for(H=_;H<E-B;H++)Y=H+B,oe=H+F,Y in x?x[oe]=x[Y]:delete x[oe];for(H=E;H>E-B+F;H--)delete x[H-1]}else if(F>B)for(H=E-B;H>_;H--)Y=H+B-1,oe=H+F-1,Y in x?x[oe]=x[Y]:delete x[oe];for(H=0;H<F;H++)x[H+_]=arguments[H+2];return x.length=E-B+F,W}})},665:function(o,I,i){var a=i(3085),M=i(6782);a({target:"Function",proto:!0},{bind:M})},8671:function(o,I,i){var a=i(8576),M=i(1284);M(a.JSON,"JSON",!0)},8556:function(){},2666:function(o,I,i){var a=i(3085),M=i(2558);a({target:"Number",stat:!0,forced:Number.parseInt!=M},{parseInt:M})},3113:function(o,I,i){var a=i(3085),M=i(69),T=i(2853);a({target:"Object",stat:!0,sham:!M},{create:T})},297:function(o,I,i){var a=i(3085),M=i(69),T=i(2760);a({target:"Object",stat:!0,forced:!M,sham:!M},{defineProperty:T.f})},9234:function(o,I,i){var a=i(3085),M=i(6192),T=i(1795),P=i(9341),k=i(4635),R=M(function(){P(1)});a({target:"Object",stat:!0,forced:R,sham:!k},{getPrototypeOf:function(c){return P(T(c))}})},2647:function(o,I,i){var a=i(3085),M=i(1795),T=i(7653),P=i(6192),k=P(function(){T(1)});a({target:"Object",stat:!0,forced:k},{keys:function(b){return T(M(b))}})},3222:function(o,I,i){var a=i(3085),M=i(4469);a({target:"Object",stat:!0},{setPrototypeOf:M})},6663:function(){},4859:function(o,I,i){var a=i(3085),M=i(15);a({global:!0,forced:parseFloat!=M},{parseFloat:M})},5706:function(o,I,i){var a=i(3085),M=i(2558);a({global:!0,forced:parseInt!=M},{parseInt:M})},7884:function(o,I,i){"use strict";var a=i(3085),M=i(6235),T=i(9438),P=i(892),k=i(3442);a({target:"Promise",stat:!0},{allSettled:function(b){var c=this,C=T.f(c),y=C.resolve,l=C.reject,h=P(function(){var u=M(c.resolve),p=[],D=0,g=1;k(b,function(x){var E=D++,_=!1;p.push(void 0),g++,u.call(c,x).then(function(O){_||(_=!0,p[E]={status:"fulfilled",value:O},--g||y(p))},function(O){_||(_=!0,p[E]={status:"rejected",reason:O},--g||y(p))})}),--g||y(p)});return h.error&&l(h.value),C.promise}})},8885:function(o,I,i){"use strict";var a=i(3085),M=i(6235),T=i(150),P=i(9438),k=i(892),R=i(3442),b="No one promise resolved";a({target:"Promise",stat:!0},{any:function(C){var y=this,l=P.f(y),h=l.resolve,u=l.reject,p=k(function(){var D=M(y.resolve),g=[],x=0,E=1,_=!1;R(C,function(O){var F=x++,B=!1;g.push(void 0),E++,D.call(y,O).then(function(W){B||_||(_=!0,h(W))},function(W){B||_||(B=!0,g[F]=W,--E||u(new(T("AggregateError"))(g,b)))})}),--E||u(new(T("AggregateError"))(g,b))});return p.error&&u(p.value),l.promise}})},1868:function(o,I,i){"use strict";var a=i(3085),M=i(5546),T=i(4471),P=i(6192),k=i(150),R=i(6447),b=i(4743),c=i(9126),C=i(9482),y=!!T&&P(function(){T.prototype.finally.call({then:function(){}},function(){})});if(a({target:"Promise",proto:!0,real:!0,forced:y},{finally:function(h){var u=b(this,k("Promise")),p=R(h);return this.then(p?function(D){return c(u,h()).then(function(){return D})}:h,p?function(D){return c(u,h()).then(function(){throw D})}:h)}}),!M&&R(T)){var l=k("Promise").prototype.finally;T.prototype.finally!==l&&C(T.prototype,"finally",l,{unsafe:!0})}},9021:function(o,I,i){"use strict";var a=i(3085),M=i(5546),T=i(8576),P=i(150),k=i(4471),R=i(9482),b=i(533),c=i(4469),C=i(1284),y=i(3656),l=i(6235),h=i(6447),u=i(5744),p=i(6961),D=i(9516),g=i(3442),x=i(9770),E=i(4743),_=i(7160).set,O=i(2950),F=i(9126),B=i(3681),W=i(9438),H=i(892),Y=i(3326),oe=i(9245),ne=i(8182),be=i(2957),Z=i(224),me=i(4218),V=ne("species"),Le="Promise",Ce=Y.get,ze=Y.set,te=Y.getterFor(Le),ae=k&&k.prototype,q=k,$=ae,de=T.TypeError,G=T.document,X=T.process,J=W.f,K=J,ve=!!(G&&G.createEvent&&T.dispatchEvent),he=h(T.PromiseRejectionEvent),Se="unhandledrejection",xe="rejectionhandled",De=0,le=1,ee=2,re=1,ce=2,fe=!1,ye,Ne,Ve,He,Ie=oe(Le,function(){var _e=D(q),Ae=_e!==String(q);if(!Ae&&me===66||M&&!$.finally)return!0;if(me>=51&&/native code/.test(_e))return!1;var Be=new q(function(Re){Re(1)}),Ue=function(Re){Re(function(){},function(){})},Ye=Be.constructor={};return Ye[V]=Ue,fe=Be.then(function(){})instanceof Ue,fe?!Ae&&be&&!he:!0}),We=Ie||!x(function(_e){q.all(_e).catch(function(){})}),Xe=function(_e){var Ae;return u(_e)&&h(Ae=_e.then)?Ae:!1},rt=function(_e,Ae){if(!_e.notified){_e.notified=!0;var Be=_e.reactions;O(function(){for(var Ue=_e.value,Ye=_e.state==le,Re=0;Be.length>Re;){var Vt=Be[Re++],Yt=Ye?Vt.ok:Vt.fail,Ge=Vt.resolve,Ee=Vt.reject,Rt=Vt.domain,St,Et,In;try{Yt?(Ye||(_e.rejection===ce&&ct(_e),_e.rejection=re),Yt===!0?St=Ue:(Rt&&Rt.enter(),St=Yt(Ue),Rt&&(Rt.exit(),In=!0)),St===Vt.promise?Ee(de("Promise-chain cycle")):(Et=Xe(St))?Et.call(St,Ge,Ee):Ge(St)):Ee(Ue)}catch(hn){Rt&&!In&&Rt.exit(),Ee(hn)}}_e.reactions=[],_e.notified=!1,Ae&&!_e.rejection&&xt(_e)})}},Lt=function(_e,Ae,Be){var Ue,Ye;ve?(Ue=G.createEvent("Event"),Ue.promise=Ae,Ue.reason=Be,Ue.initEvent(_e,!1,!0),T.dispatchEvent(Ue)):Ue={promise:Ae,reason:Be},!he&&(Ye=T["on"+_e])?Ye(Ue):_e===Se&&B("Unhandled promise rejection",Be)},xt=function(_e){_.call(T,function(){var Ae=_e.facade,Be=_e.value,Ue=wt(_e),Ye;if(Ue&&(Ye=H(function(){Z?X.emit("unhandledRejection",Be,Ae):Lt(Se,Ae,Be)}),_e.rejection=Z||wt(_e)?ce:re,Ye.error))throw Ye.value})},wt=function(_e){return _e.rejection!==re&&!_e.parent},ct=function(_e){_.call(T,function(){var Ae=_e.facade;Z?X.emit("rejectionHandled",Ae):Lt(xe,Ae,_e.value)})},_t=function(_e,Ae,Be){return function(Ue){_e(Ae,Ue,Be)}},Ut=function(_e,Ae,Be){_e.done||(_e.done=!0,Be&&(_e=Be),_e.value=Ae,_e.state=ee,rt(_e,!0))},tn=function(_e,Ae,Be){if(!_e.done){_e.done=!0,Be&&(_e=Be);try{if(_e.facade===Ae)throw de("Promise can't be resolved itself");var Ue=Xe(Ae);Ue?O(function(){var Ye={done:!1};try{Ue.call(Ae,_t(tn,Ye,_e),_t(Ut,Ye,_e))}catch(Re){Ut(Ye,Re,_e)}}):(_e.value=Ae,_e.state=le,rt(_e,!1))}catch(Ye){Ut({done:!1},Ye,_e)}}};if(Ie&&(q=function(Ae){p(this,q,Le),l(Ae),ye.call(this);var Be=Ce(this);try{Ae(_t(tn,Be),_t(Ut,Be))}catch(Ue){Ut(Be,Ue)}},$=q.prototype,ye=function(Ae){ze(this,{type:Le,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:De,value:void 0})},ye.prototype=b($,{then:function(Ae,Be){var Ue=te(this),Ye=J(E(this,q));return Ye.ok=h(Ae)?Ae:!0,Ye.fail=h(Be)&&Be,Ye.domain=Z?X.domain:void 0,Ue.parent=!0,Ue.reactions.push(Ye),Ue.state!=De&&rt(Ue,!1),Ye.promise},catch:function(_e){return this.then(void 0,_e)}}),Ne=function(){var _e=new ye,Ae=Ce(_e);this.promise=_e,this.resolve=_t(tn,Ae),this.reject=_t(Ut,Ae)},W.f=J=function(_e){return _e===q||_e===Ve?new Ne(_e):K(_e)},!M&&h(k)&&ae!==Object.prototype)){He=ae.then,fe||(R(ae,"then",function(Ae,Be){var Ue=this;return new q(function(Ye,Re){He.call(Ue,Ye,Re)}).then(Ae,Be)},{unsafe:!0}),R(ae,"catch",$.catch,{unsafe:!0}));try{delete ae.constructor}catch{}c&&c(ae,$)}a({global:!0,wrap:!0,forced:Ie},{Promise:q}),C(q,Le,!1,!0),y(Le),Ve=P(Le),a({target:Le,stat:!0,forced:Ie},{reject:function(Ae){var Be=J(this);return Be.reject.call(void 0,Ae),Be.promise}}),a({target:Le,stat:!0,forced:M||Ie},{resolve:function(Ae){return F(M&&this===Ve?q:this,Ae)}}),a({target:Le,stat:!0,forced:We},{all:function(Ae){var Be=this,Ue=J(Be),Ye=Ue.resolve,Re=Ue.reject,Vt=H(function(){var Yt=l(Be.resolve),Ge=[],Ee=0,Rt=1;g(Ae,function(St){var Et=Ee++,In=!1;Ge.push(void 0),Rt++,Yt.call(Be,St).then(function(hn){In||(In=!0,Ge[Et]=hn,--Rt||Ye(Ge))},Re)}),--Rt||Ye(Ge)});return Vt.error&&Re(Vt.value),Ue.promise},race:function(Ae){var Be=this,Ue=J(Be),Ye=Ue.reject,Re=H(function(){var Vt=l(Be.resolve);g(Ae,function(Yt){Vt.call(Be,Yt).then(Ue.resolve,Ye)})});return Re.error&&Ye(Re.value),Ue.promise}})},5397:function(o,I,i){var a=i(3085),M=i(150),T=i(1404),P=i(1138),k=i(5744),R=i(2853),b=i(6782),c=i(6192),C=M("Reflect","construct"),y=c(function(){function u(){}return!(C(function(){},[],u)instanceof u)}),l=!c(function(){C(function(){})}),h=y||l;a({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(p,D){T(p),P(D);var g=arguments.length<3?p:T(arguments[2]);if(l&&!y)return C(p,D,g);if(p==g){switch(D.length){case 0:return new p;case 1:return new p(D[0]);case 2:return new p(D[0],D[1]);case 3:return new p(D[0],D[1],D[2]);case 4:return new p(D[0],D[1],D[2],D[3])}var x=[null];return x.push.apply(x,D),new(b.apply(p,x))}var E=g.prototype,_=R(k(E)?E:Object.prototype),O=Function.apply.call(p,_,D);return k(O)?O:_}})},1367:function(){},5454:function(o,I,i){"use strict";var a=i(863).charAt,M=i(4845),T=i(3326),P=i(7218),k="String Iterator",R=T.set,b=T.getterFor(k);P(String,"String",function(c){R(this,{type:k,string:M(c),index:0})},function(){var C=b(this),y=C.string,l=C.index,h;return l>=y.length?{value:void 0,done:!0}:(h=a(y,l),C.index+=h.length,{value:h,done:!1})})},957:function(o,I,i){"use strict";var a=i(3085),M=i(4277).trim,T=i(6815);a({target:"String",proto:!0,forced:T("trim")},{trim:function(){return M(this)}})},9781:function(o,I,i){var a=i(1488);a("asyncIterator")},492:function(){},6681:function(o,I,i){var a=i(1488);a("hasInstance")},9594:function(o,I,i){var a=i(1488);a("isConcatSpreadable")},3665:function(o,I,i){var a=i(1488);a("iterator")},6187:function(o,I,i){"use strict";var a=i(3085),M=i(8576),T=i(150),P=i(5546),k=i(69),R=i(3045),b=i(6192),c=i(4500),C=i(4770),y=i(6447),l=i(5744),h=i(3236),u=i(1138),p=i(1795),D=i(101),g=i(77),x=i(4845),E=i(774),_=i(2853),O=i(7653),F=i(2092),B=i(4052),W=i(4750),H=i(5141),Y=i(2760),oe=i(6007),ne=i(9482),be=i(8717),Z=i(9766),me=i(4535),V=i(2759),Le=i(8182),Ce=i(9207),ze=i(1488),te=i(1284),ae=i(3326),q=i(454).forEach,$=Z("hidden"),de="Symbol",G="prototype",X=Le("toPrimitive"),J=ae.set,K=ae.getterFor(de),ve=Object[G],he=M.Symbol,Se=T("JSON","stringify"),xe=H.f,De=Y.f,le=B.f,ee=oe.f,re=be("symbols"),ce=be("op-symbols"),fe=be("string-to-symbol-registry"),ye=be("symbol-to-string-registry"),Ne=be("wks"),Ve=M.QObject,He=!Ve||!Ve[G]||!Ve[G].findChild,Ie=k&&b(function(){return _(De({},"a",{get:function(){return De(this,"a",{value:7}).a}})).a!=7})?function(_e,Ae,Be){var Ue=xe(ve,Ae);Ue&&delete ve[Ae],De(_e,Ae,Be),Ue&&_e!==ve&&De(ve,Ae,Ue)}:De,We=function(_e,Ae){var Be=re[_e]=_(he[G]);return J(Be,{type:de,tag:_e,description:Ae}),k||(Be.description=Ae),Be},Xe=function(Ae,Be,Ue){Ae===ve&&Xe(ce,Be,Ue),u(Ae);var Ye=g(Be);return u(Ue),c(re,Ye)?(Ue.enumerable?(c(Ae,$)&&Ae[$][Ye]&&(Ae[$][Ye]=!1),Ue=_(Ue,{enumerable:E(0,!1)})):(c(Ae,$)||De(Ae,$,E(1,{})),Ae[$][Ye]=!0),Ie(Ae,Ye,Ue)):De(Ae,Ye,Ue)},rt=function(Ae,Be){u(Ae);var Ue=D(Be),Ye=O(Ue).concat(_t(Ue));return q(Ye,function(Re){(!k||xt.call(Ue,Re))&&Xe(Ae,Re,Ue[Re])}),Ae},Lt=function(Ae,Be){return Be===void 0?_(Ae):rt(_(Ae),Be)},xt=function(Ae){var Be=g(Ae),Ue=ee.call(this,Be);return this===ve&&c(re,Be)&&!c(ce,Be)?!1:Ue||!c(this,Be)||!c(re,Be)||c(this,$)&&this[$][Be]?Ue:!0},wt=function(Ae,Be){var Ue=D(Ae),Ye=g(Be);if(!(Ue===ve&&c(re,Ye)&&!c(ce,Ye))){var Re=xe(Ue,Ye);return Re&&c(re,Ye)&&!(c(Ue,$)&&Ue[$][Ye])&&(Re.enumerable=!0),Re}},ct=function(Ae){var Be=le(D(Ae)),Ue=[];return q(Be,function(Ye){!c(re,Ye)&&!c(me,Ye)&&Ue.push(Ye)}),Ue},_t=function(Ae){var Be=Ae===ve,Ue=le(Be?ce:D(Ae)),Ye=[];return q(Ue,function(Re){c(re,Re)&&(!Be||c(ve,Re))&&Ye.push(re[Re])}),Ye};if(R||(he=function(){if(this instanceof he)throw TypeError("Symbol is not a constructor");var Ae=!arguments.length||arguments[0]===void 0?void 0:x(arguments[0]),Be=V(Ae),Ue=function(Ye){this===ve&&Ue.call(ce,Ye),c(this,$)&&c(this[$],Be)&&(this[$][Be]=!1),Ie(this,Be,E(1,Ye))};return k&&He&&Ie(ve,Be,{configurable:!0,set:Ue}),We(Be,Ae)},ne(he[G],"toString",function(){return K(this).tag}),ne(he,"withoutSetter",function(_e){return We(V(_e),_e)}),oe.f=xt,Y.f=Xe,H.f=wt,F.f=B.f=ct,W.f=_t,Ce.f=function(_e){return We(Le(_e),_e)},k&&(De(he[G],"description",{configurable:!0,get:function(){return K(this).description}}),P||ne(ve,"propertyIsEnumerable",xt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!R,sham:!R},{Symbol:he}),q(O(Ne),function(_e){ze(_e)}),a({target:de,stat:!0,forced:!R},{for:function(_e){var Ae=x(_e);if(c(fe,Ae))return fe[Ae];var Be=he(Ae);return fe[Ae]=Be,ye[Be]=Ae,Be},keyFor:function(Ae){if(!h(Ae))throw TypeError(Ae+" is not a symbol");if(c(ye,Ae))return ye[Ae]},useSetter:function(){He=!0},useSimple:function(){He=!1}}),a({target:"Object",stat:!0,forced:!R,sham:!k},{create:Lt,defineProperty:Xe,defineProperties:rt,getOwnPropertyDescriptor:wt}),a({target:"Object",stat:!0,forced:!R},{getOwnPropertyNames:ct,getOwnPropertySymbols:_t}),a({target:"Object",stat:!0,forced:b(function(){W.f(1)})},{getOwnPropertySymbols:function(Ae){return W.f(p(Ae))}}),Se){var Ut=!R||b(function(){var _e=he();return Se([_e])!="[null]"||Se({a:_e})!="{}"||Se(Object(_e))!="{}"});a({target:"JSON",stat:!0,forced:Ut},{stringify:function(Ae,Be,Ue){for(var Ye=[Ae],Re=1,Vt;arguments.length>Re;)Ye.push(arguments[Re++]);if(Vt=Be,!(!l(Be)&&Ae===void 0||h(Ae)))return C(Be)||(Be=function(Yt,Ge){if(y(Vt)&&(Ge=Vt.call(this,Yt,Ge)),!h(Ge))return Ge}),Ye[1]=Be,Se.apply(null,Ye)}})}if(!he[G][X]){var tn=he[G].valueOf;ne(he[G],X,function(){return tn.apply(this,arguments)})}te(he,de),me[$]=!0},1250:function(o,I,i){var a=i(1488);a("matchAll")},9017:function(o,I,i){var a=i(1488);a("match")},9786:function(o,I,i){var a=i(1488);a("replace")},503:function(o,I,i){var a=i(1488);a("search")},6565:function(o,I,i){var a=i(1488);a("species")},9322:function(o,I,i){var a=i(1488);a("split")},3610:function(o,I,i){var a=i(1488);a("toPrimitive")},6886:function(o,I,i){var a=i(1488);a("toStringTag")},3514:function(o,I,i){var a=i(1488);a("unscopables")},177:function(o,I,i){var a=i(1488);a("asyncDispose")},9031:function(o,I,i){var a=i(1488);a("dispose")},6658:function(o,I,i){var a=i(1488);a("matcher")},1875:function(o,I,i){var a=i(1488);a("metadata")},8658:function(o,I,i){var a=i(1488);a("observable")},4592:function(o,I,i){var a=i(1488);a("patternMatch")},6680:function(o,I,i){var a=i(1488);a("replaceAll")},162:function(o,I,i){i(8939);var a=i(7365),M=i(8576),T=i(4696),P=i(8711),k=i(7771),R=i(8182),b=R("toStringTag");for(var c in a){var C=M[c],y=C&&C.prototype;y&&T(y)!==b&&P(y,b,c),k[c]=k.Array}},2906:function(o,I,i){var a=i(3085),M=i(8576),T=i(6447),P=i(8989),k=[].slice,R=/MSIE .\./.test(P),b=function(c){return function(C,y){var l=arguments.length>2,h=l?k.call(arguments,2):void 0;return c(l?function(){(T(C)?C:Function(C)).apply(this,h)}:C,y)}};a({global:!0,bind:!0,forced:R},{setTimeout:b(M.setTimeout),setInterval:b(M.setInterval)})},9336:function(o,I,i){"use strict";i(8939);var a=i(3085),M=i(150),T=i(4551),P=i(9482),k=i(533),R=i(1284),b=i(5148),c=i(3326),C=i(6961),y=i(6447),l=i(4500),h=i(8043),u=i(4696),p=i(1138),D=i(5744),g=i(4845),x=i(2853),E=i(774),_=i(1669),O=i(8703),F=i(8182),B=M("fetch"),W=M("Request"),H=W&&W.prototype,Y=M("Headers"),oe=F("iterator"),ne="URLSearchParams",be=ne+"Iterator",Z=c.set,me=c.getterFor(ne),V=c.getterFor(be),Le=/\+/g,Ce=Array(4),ze=function(le){return Ce[le-1]||(Ce[le-1]=RegExp("((?:%[\\da-f]{2}){"+le+"})","gi"))},te=function(le){try{return decodeURIComponent(le)}catch{return le}},ae=function(le){var ee=le.replace(Le," "),re=4;try{return decodeURIComponent(ee)}catch{for(;re;)ee=ee.replace(ze(re--),te);return ee}},q=/[!'()~]|%20/g,$={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},de=function(le){return $[le]},G=function(le){return encodeURIComponent(le).replace(q,de)},X=function(le,ee){if(ee)for(var re=ee.split("&"),ce=0,fe,ye;ce<re.length;)fe=re[ce++],fe.length&&(ye=fe.split("="),le.push({key:ae(ye.shift()),value:ae(ye.join("="))}))},J=function(le){this.entries.length=0,X(this.entries,le)},K=function(le,ee){if(le<ee)throw TypeError("Not enough arguments")},ve=b(function(ee,re){Z(this,{type:be,iterator:_(me(ee).entries),kind:re})},"Iterator",function(){var ee=V(this),re=ee.kind,ce=ee.iterator.next(),fe=ce.value;return ce.done||(ce.value=re==="keys"?fe.key:re==="values"?fe.value:[fe.key,fe.value]),ce}),he=function(){C(this,he,ne);var ee=arguments.length>0?arguments[0]:void 0,re=this,ce=[],fe,ye,Ne,Ve,He,Ie,We,Xe,rt;if(Z(re,{type:ne,entries:ce,updateURL:function(){},updateSearchParams:J}),ee!==void 0)if(D(ee))if(fe=O(ee),fe)for(ye=_(ee,fe),Ne=ye.next;!(Ve=Ne.call(ye)).done;){if(He=_(p(Ve.value)),Ie=He.next,(We=Ie.call(He)).done||(Xe=Ie.call(He)).done||!Ie.call(He).done)throw TypeError("Expected sequence with length 2");ce.push({key:g(We.value),value:g(Xe.value)})}else for(rt in ee)l(ee,rt)&&ce.push({key:rt,value:g(ee[rt])});else X(ce,typeof ee=="string"?ee.charAt(0)==="?"?ee.slice(1):ee:g(ee))},Se=he.prototype;if(k(Se,{append:function(ee,re){K(arguments.length,2);var ce=me(this);ce.entries.push({key:g(ee),value:g(re)}),ce.updateURL()},delete:function(le){K(arguments.length,1);for(var ee=me(this),re=ee.entries,ce=g(le),fe=0;fe<re.length;)re[fe].key===ce?re.splice(fe,1):fe++;ee.updateURL()},get:function(ee){K(arguments.length,1);for(var re=me(this).entries,ce=g(ee),fe=0;fe<re.length;fe++)if(re[fe].key===ce)return re[fe].value;return null},getAll:function(ee){K(arguments.length,1);for(var re=me(this).entries,ce=g(ee),fe=[],ye=0;ye<re.length;ye++)re[ye].key===ce&&fe.push(re[ye].value);return fe},has:function(ee){K(arguments.length,1);for(var re=me(this).entries,ce=g(ee),fe=0;fe<re.length;)if(re[fe++].key===ce)return!0;return!1},set:function(ee,re){K(arguments.length,1);for(var ce=me(this),fe=ce.entries,ye=!1,Ne=g(ee),Ve=g(re),He=0,Ie;He<fe.length;He++)Ie=fe[He],Ie.key===Ne&&(ye?fe.splice(He--,1):(ye=!0,Ie.value=Ve));ye||fe.push({key:Ne,value:Ve}),ce.updateURL()},sort:function(){var ee=me(this),re=ee.entries,ce=re.slice(),fe,ye,Ne;for(re.length=0,Ne=0;Ne<ce.length;Ne++){for(fe=ce[Ne],ye=0;ye<Ne;ye++)if(re[ye].key>fe.key){re.splice(ye,0,fe);break}ye===Ne&&re.push(fe)}ee.updateURL()},forEach:function(ee){for(var re=me(this).entries,ce=h(ee,arguments.length>1?arguments[1]:void 0,3),fe=0,ye;fe<re.length;)ye=re[fe++],ce(ye.value,ye.key,this)},keys:function(){return new ve(this,"keys")},values:function(){return new ve(this,"values")},entries:function(){return new ve(this,"entries")}},{enumerable:!0}),P(Se,oe,Se.entries,{name:"entries"}),P(Se,"toString",function(){for(var ee=me(this).entries,re=[],ce=0,fe;ce<ee.length;)fe=ee[ce++],re.push(G(fe.key)+"="+G(fe.value));return re.join("&")},{enumerable:!0}),R(he,ne),a({global:!0,forced:!T},{URLSearchParams:he}),!T&&y(Y)){var xe=function(le){if(D(le)){var ee=le.body,re;if(u(ee)===ne)return re=le.headers?new Y(le.headers):new Y,re.has("content-type")||re.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),x(le,{body:E(0,String(ee)),headers:E(0,re)})}return le};if(y(B)&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(ee){return B(ee,arguments.length>1?xe(arguments[1]):{})}}),y(W)){var De=function(ee){return C(this,De,"Request"),new W(ee,arguments.length>1?xe(arguments[1]):{})};H.constructor=De,De.prototype=H,a({global:!0,forced:!0},{Request:De})}}o.exports={URLSearchParams:he,getState:me}},4948:function(o,I,i){"use strict";i(5454);var a=i(3085),M=i(69),T=i(4551),P=i(8576),k=i(1187),R=i(9482),b=i(6961),c=i(4500),C=i(2503),y=i(841),l=i(863).codeAt,h=i(7977),u=i(4845),p=i(1284),D=i(9336),g=i(3326),x=P.URL,E=D.URLSearchParams,_=D.getState,O=g.set,F=g.getterFor("URL"),B=Math.floor,W=Math.pow,H="Invalid authority",Y="Invalid scheme",oe="Invalid host",ne="Invalid port",be=/[A-Za-z]/,Z=/[\d+-.A-Za-z]/,me=/\d/,V=/^0x/i,Le=/^[0-7]+$/,Ce=/^\d+$/,ze=/^[\dA-Fa-f]+$/,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ae=/[\0\t\n\r #/:<>?@[\\\]^|]/,q=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,$=/[\t\n\r]/g,de,G=function(Q,Te){var Me,ke,Fe;if(Te.charAt(0)=="["){if(Te.charAt(Te.length-1)!="]"||(Me=J(Te.slice(1,-1)),!Me))return oe;Q.host=Me}else if(re(Q)){if(Te=h(Te),te.test(Te)||(Me=X(Te),Me===null))return oe;Q.host=Me}else{if(ae.test(Te))return oe;for(Me="",ke=y(Te),Fe=0;Fe<ke.length;Fe++)Me+=le(ke[Fe],he);Q.host=Me}},X=function(Q){var Te=Q.split("."),Me,ke,Fe,lt,Ze,it,Ft;if(Te.length&&Te[Te.length-1]==""&&Te.pop(),Me=Te.length,Me>4)return Q;for(ke=[],Fe=0;Fe<Me;Fe++){if(lt=Te[Fe],lt=="")return Q;if(Ze=10,lt.length>1&&lt.charAt(0)=="0"&&(Ze=V.test(lt)?16:8,lt=lt.slice(Ze==8?1:2)),lt==="")it=0;else{if(!(Ze==10?Ce:Ze==8?Le:ze).test(lt))return Q;it=parseInt(lt,Ze)}ke.push(it)}for(Fe=0;Fe<Me;Fe++)if(it=ke[Fe],Fe==Me-1){if(it>=W(256,5-Me))return null}else if(it>255)return null;for(Ft=ke.pop(),Fe=0;Fe<ke.length;Fe++)Ft+=ke[Fe]*W(256,3-Fe);return Ft},J=function(Q){var Te=[0,0,0,0,0,0,0,0],Me=0,ke=null,Fe=0,lt,Ze,it,Ft,Jt,bn,Pe,Kt=function(){return Q.charAt(Fe)};if(Kt()==":"){if(Q.charAt(1)!=":")return;Fe+=2,Me++,ke=Me}for(;Kt();){if(Me==8)return;if(Kt()==":"){if(ke!==null)return;Fe++,Me++,ke=Me;continue}for(lt=Ze=0;Ze<4&&ze.test(Kt());)lt=lt*16+parseInt(Kt(),16),Fe++,Ze++;if(Kt()=="."){if(Ze==0||(Fe-=Ze,Me>6))return;for(it=0;Kt();){if(Ft=null,it>0)if(Kt()=="."&&it<4)Fe++;else return;if(!me.test(Kt()))return;for(;me.test(Kt());){if(Jt=parseInt(Kt(),10),Ft===null)Ft=Jt;else{if(Ft==0)return;Ft=Ft*10+Jt}if(Ft>255)return;Fe++}Te[Me]=Te[Me]*256+Ft,it++,(it==2||it==4)&&Me++}if(it!=4)return;break}else if(Kt()==":"){if(Fe++,!Kt())return}else if(Kt())return;Te[Me++]=lt}if(ke!==null)for(bn=Me-ke,Me=7;Me!=0&&bn>0;)Pe=Te[Me],Te[Me--]=Te[ke+bn-1],Te[ke+--bn]=Pe;else if(Me!=8)return;return Te},K=function(Q){for(var Te=null,Me=1,ke=null,Fe=0,lt=0;lt<8;lt++)Q[lt]!==0?(Fe>Me&&(Te=ke,Me=Fe),ke=null,Fe=0):(ke===null&&(ke=lt),++Fe);return Fe>Me&&(Te=ke,Me=Fe),Te},ve=function(Q){var Te,Me,ke,Fe;if(typeof Q=="number"){for(Te=[],Me=0;Me<4;Me++)Te.unshift(Q%256),Q=B(Q/256);return Te.join(".")}else if(typeof Q=="object"){for(Te="",ke=K(Q),Me=0;Me<8;Me++)Fe&&Q[Me]===0||(Fe&&(Fe=!1),ke===Me?(Te+=Me?":":"::",Fe=!0):(Te+=Q[Me].toString(16),Me<7&&(Te+=":")));return"["+Te+"]"}return Q},he={},Se=C({},he,{" ":1,'"':1,"<":1,">":1,"`":1}),xe=C({},Se,{"#":1,"?":1,"{":1,"}":1}),De=C({},xe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),le=function(Q,Te){var Me=l(Q,0);return Me>32&&Me<127&&!c(Te,Q)?Q:encodeURIComponent(Q)},ee={ftp:21,file:null,http:80,https:443,ws:80,wss:443},re=function(Q){return c(ee,Q.scheme)},ce=function(Q){return Q.username!=""||Q.password!=""},fe=function(Q){return!Q.host||Q.cannotBeABaseURL||Q.scheme=="file"},ye=function(Q,Te){var Me;return Q.length==2&&be.test(Q.charAt(0))&&((Me=Q.charAt(1))==":"||!Te&&Me=="|")},Ne=function(Q){var Te;return Q.length>1&&ye(Q.slice(0,2))&&(Q.length==2||(Te=Q.charAt(2))==="/"||Te==="\\"||Te==="?"||Te==="#")},Ve=function(Q){var Te=Q.path,Me=Te.length;Me&&(Q.scheme!="file"||Me!=1||!ye(Te[0],!0))&&Te.pop()},He=function(Q){return Q==="."||Q.toLowerCase()==="%2e"},Ie=function(Q){return Q=Q.toLowerCase(),Q===".."||Q==="%2e."||Q===".%2e"||Q==="%2e%2e"},We={},Xe={},rt={},Lt={},xt={},wt={},ct={},_t={},Ut={},tn={},_e={},Ae={},Be={},Ue={},Ye={},Re={},Vt={},Yt={},Ge={},Ee={},Rt={},St=function(Q,Te,Me,ke){var Fe=Me||We,lt=0,Ze="",it=!1,Ft=!1,Jt=!1,bn,Pe,Kt,En;for(Me||(Q.scheme="",Q.username="",Q.password="",Q.host=null,Q.port=null,Q.path=[],Q.query=null,Q.fragment=null,Q.cannotBeABaseURL=!1,Te=Te.replace(q,"")),Te=Te.replace($,""),bn=y(Te);lt<=bn.length;){switch(Pe=bn[lt],Fe){case We:if(Pe&&be.test(Pe))Ze+=Pe.toLowerCase(),Fe=Xe;else{if(Me)return Y;Fe=rt;continue}break;case Xe:if(Pe&&(Z.test(Pe)||Pe=="+"||Pe=="-"||Pe=="."))Ze+=Pe.toLowerCase();else if(Pe==":"){if(Me&&(re(Q)!=c(ee,Ze)||Ze=="file"&&(ce(Q)||Q.port!==null)||Q.scheme=="file"&&!Q.host))return;if(Q.scheme=Ze,Me){re(Q)&&ee[Q.scheme]==Q.port&&(Q.port=null);return}Ze="",Q.scheme=="file"?Fe=Ue:re(Q)&&ke&&ke.scheme==Q.scheme?Fe=Lt:re(Q)?Fe=_t:bn[lt+1]=="/"?(Fe=xt,lt++):(Q.cannotBeABaseURL=!0,Q.path.push(""),Fe=Ge)}else{if(Me)return Y;Ze="",Fe=rt,lt=0;continue}break;case rt:if(!ke||ke.cannotBeABaseURL&&Pe!="#")return Y;if(ke.cannotBeABaseURL&&Pe=="#"){Q.scheme=ke.scheme,Q.path=ke.path.slice(),Q.query=ke.query,Q.fragment="",Q.cannotBeABaseURL=!0,Fe=Rt;break}Fe=ke.scheme=="file"?Ue:wt;continue;case Lt:if(Pe=="/"&&bn[lt+1]=="/")Fe=Ut,lt++;else{Fe=wt;continue}break;case xt:if(Pe=="/"){Fe=tn;break}else{Fe=Yt;continue}case wt:if(Q.scheme=ke.scheme,Pe==de)Q.username=ke.username,Q.password=ke.password,Q.host=ke.host,Q.port=ke.port,Q.path=ke.path.slice(),Q.query=ke.query;else if(Pe=="/"||Pe=="\\"&&re(Q))Fe=ct;else if(Pe=="?")Q.username=ke.username,Q.password=ke.password,Q.host=ke.host,Q.port=ke.port,Q.path=ke.path.slice(),Q.query="",Fe=Ee;else if(Pe=="#")Q.username=ke.username,Q.password=ke.password,Q.host=ke.host,Q.port=ke.port,Q.path=ke.path.slice(),Q.query=ke.query,Q.fragment="",Fe=Rt;else{Q.username=ke.username,Q.password=ke.password,Q.host=ke.host,Q.port=ke.port,Q.path=ke.path.slice(),Q.path.pop(),Fe=Yt;continue}break;case ct:if(re(Q)&&(Pe=="/"||Pe=="\\"))Fe=Ut;else if(Pe=="/")Fe=tn;else{Q.username=ke.username,Q.password=ke.password,Q.host=ke.host,Q.port=ke.port,Fe=Yt;continue}break;case _t:if(Fe=Ut,Pe!="/"||Ze.charAt(lt+1)!="/")continue;lt++;break;case Ut:if(Pe!="/"&&Pe!="\\"){Fe=tn;continue}break;case tn:if(Pe=="@"){it&&(Ze="%40"+Ze),it=!0,Kt=y(Ze);for(var wo=0;wo<Kt.length;wo++){var zs=Kt[wo];if(zs==":"&&!Jt){Jt=!0;continue}var Hs=le(zs,De);Jt?Q.password+=Hs:Q.username+=Hs}Ze=""}else if(Pe==de||Pe=="/"||Pe=="?"||Pe=="#"||Pe=="\\"&&re(Q)){if(it&&Ze=="")return H;lt-=y(Ze).length+1,Ze="",Fe=_e}else Ze+=Pe;break;case _e:case Ae:if(Me&&Q.scheme=="file"){Fe=Re;continue}else if(Pe==":"&&!Ft){if(Ze=="")return oe;if(En=G(Q,Ze),En)return En;if(Ze="",Fe=Be,Me==Ae)return}else if(Pe==de||Pe=="/"||Pe=="?"||Pe=="#"||Pe=="\\"&&re(Q)){if(re(Q)&&Ze=="")return oe;if(Me&&Ze==""&&(ce(Q)||Q.port!==null))return;if(En=G(Q,Ze),En)return En;if(Ze="",Fe=Vt,Me)return;continue}else Pe=="["?Ft=!0:Pe=="]"&&(Ft=!1),Ze+=Pe;break;case Be:if(me.test(Pe))Ze+=Pe;else if(Pe==de||Pe=="/"||Pe=="?"||Pe=="#"||Pe=="\\"&&re(Q)||Me){if(Ze!=""){var _o=parseInt(Ze,10);if(_o>65535)return ne;Q.port=re(Q)&&_o===ee[Q.scheme]?null:_o,Ze=""}if(Me)return;Fe=Vt;continue}else return ne;break;case Ue:if(Q.scheme="file",Pe=="/"||Pe=="\\")Fe=Ye;else if(ke&&ke.scheme=="file")if(Pe==de)Q.host=ke.host,Q.path=ke.path.slice(),Q.query=ke.query;else if(Pe=="?")Q.host=ke.host,Q.path=ke.path.slice(),Q.query="",Fe=Ee;else if(Pe=="#")Q.host=ke.host,Q.path=ke.path.slice(),Q.query=ke.query,Q.fragment="",Fe=Rt;else{Ne(bn.slice(lt).join(""))||(Q.host=ke.host,Q.path=ke.path.slice(),Ve(Q)),Fe=Yt;continue}else{Fe=Yt;continue}break;case Ye:if(Pe=="/"||Pe=="\\"){Fe=Re;break}ke&&ke.scheme=="file"&&!Ne(bn.slice(lt).join(""))&&(ye(ke.path[0],!0)?Q.path.push(ke.path[0]):Q.host=ke.host),Fe=Yt;continue;case Re:if(Pe==de||Pe=="/"||Pe=="\\"||Pe=="?"||Pe=="#"){if(!Me&&ye(Ze))Fe=Yt;else if(Ze==""){if(Q.host="",Me)return;Fe=Vt}else{if(En=G(Q,Ze),En)return En;if(Q.host=="localhost"&&(Q.host=""),Me)return;Ze="",Fe=Vt}continue}else Ze+=Pe;break;case Vt:if(re(Q)){if(Fe=Yt,Pe!="/"&&Pe!="\\")continue}else if(!Me&&Pe=="?")Q.query="",Fe=Ee;else if(!Me&&Pe=="#")Q.fragment="",Fe=Rt;else if(Pe!=de&&(Fe=Yt,Pe!="/"))continue;break;case Yt:if(Pe==de||Pe=="/"||Pe=="\\"&&re(Q)||!Me&&(Pe=="?"||Pe=="#")){if(Ie(Ze)?(Ve(Q),Pe!="/"&&!(Pe=="\\"&&re(Q))&&Q.path.push("")):He(Ze)?Pe!="/"&&!(Pe=="\\"&&re(Q))&&Q.path.push(""):(Q.scheme=="file"&&!Q.path.length&&ye(Ze)&&(Q.host&&(Q.host=""),Ze=Ze.charAt(0)+":"),Q.path.push(Ze)),Ze="",Q.scheme=="file"&&(Pe==de||Pe=="?"||Pe=="#"))for(;Q.path.length>1&&Q.path[0]==="";)Q.path.shift();Pe=="?"?(Q.query="",Fe=Ee):Pe=="#"&&(Q.fragment="",Fe=Rt)}else Ze+=le(Pe,xe);break;case Ge:Pe=="?"?(Q.query="",Fe=Ee):Pe=="#"?(Q.fragment="",Fe=Rt):Pe!=de&&(Q.path[0]+=le(Pe,he));break;case Ee:!Me&&Pe=="#"?(Q.fragment="",Fe=Rt):Pe!=de&&(Pe=="'"&&re(Q)?Q.query+="%27":Pe=="#"?Q.query+="%23":Q.query+=le(Pe,he));break;case Rt:Pe!=de&&(Q.fragment+=le(Pe,Se));break}lt++}},Et=function(Te){var Me=b(this,Et,"URL"),ke=arguments.length>1?arguments[1]:void 0,Fe=u(Te),lt=O(Me,{type:"URL"}),Ze,it;if(ke!==void 0){if(ke instanceof Et)Ze=F(ke);else if(it=St(Ze={},u(ke)),it)throw TypeError(it)}if(it=St(lt,Fe,null,Ze),it)throw TypeError(it);var Ft=lt.searchParams=new E,Jt=_(Ft);Jt.updateSearchParams(lt.query),Jt.updateURL=function(){lt.query=String(Ft)||null},M||(Me.href=hn.call(Me),Me.origin=zt.call(Me),Me.protocol=Jn.call(Me),Me.username=Tt.call(Me),Me.password=Rs.call(Me),Me.host=Ls.call(Me),Me.hostname=js.call(Me),Me.port=Eo.call(Me),Me.pathname=Fs.call(Me),Me.search=lr.call(Me),Me.searchParams=ai.call(Me),Me.hash=br.call(Me))},In=Et.prototype,hn=function(){var Q=F(this),Te=Q.scheme,Me=Q.username,ke=Q.password,Fe=Q.host,lt=Q.port,Ze=Q.path,it=Q.query,Ft=Q.fragment,Jt=Te+":";return Fe!==null?(Jt+="//",ce(Q)&&(Jt+=Me+(ke?":"+ke:"")+"@"),Jt+=ve(Fe),lt!==null&&(Jt+=":"+lt)):Te=="file"&&(Jt+="//"),Jt+=Q.cannotBeABaseURL?Ze[0]:Ze.length?"/"+Ze.join("/"):"",it!==null&&(Jt+="?"+it),Ft!==null&&(Jt+="#"+Ft),Jt},zt=function(){var Q=F(this),Te=Q.scheme,Me=Q.port;if(Te=="blob")try{return new Et(Te.path[0]).origin}catch{return"null"}return Te=="file"||!re(Q)?"null":Te+"://"+ve(Q.host)+(Me!==null?":"+Me:"")},Jn=function(){return F(this).scheme+":"},Tt=function(){return F(this).username},Rs=function(){return F(this).password},Ls=function(){var Q=F(this),Te=Q.host,Me=Q.port;return Te===null?"":Me===null?ve(Te):ve(Te)+":"+Me},js=function(){var Q=F(this).host;return Q===null?"":ve(Q)},Eo=function(){var Q=F(this).port;return Q===null?"":String(Q)},Fs=function(){var Q=F(this),Te=Q.path;return Q.cannotBeABaseURL?Te[0]:Te.length?"/"+Te.join("/"):""},lr=function(){var Q=F(this).query;return Q?"?"+Q:""},ai=function(){return F(this).searchParams},br=function(){var Q=F(this).fragment;return Q?"#"+Q:""},xn=function(Q,Te){return{get:Q,set:Te,configurable:!0,enumerable:!0}};if(M&&k(In,{href:xn(hn,function(Q){var Te=F(this),Me=u(Q),ke=St(Te,Me);if(ke)throw TypeError(ke);_(Te.searchParams).updateSearchParams(Te.query)}),origin:xn(zt),protocol:xn(Jn,function(Q){var Te=F(this);St(Te,u(Q)+":",We)}),username:xn(Tt,function(Q){var Te=F(this),Me=y(u(Q));if(!fe(Te)){Te.username="";for(var ke=0;ke<Me.length;ke++)Te.username+=le(Me[ke],De)}}),password:xn(Rs,function(Q){var Te=F(this),Me=y(u(Q));if(!fe(Te)){Te.password="";for(var ke=0;ke<Me.length;ke++)Te.password+=le(Me[ke],De)}}),host:xn(Ls,function(Q){var Te=F(this);Te.cannotBeABaseURL||St(Te,u(Q),_e)}),hostname:xn(js,function(Q){var Te=F(this);Te.cannotBeABaseURL||St(Te,u(Q),Ae)}),port:xn(Eo,function(Q){var Te=F(this);fe(Te)||(Q=u(Q),Q==""?Te.port=null:St(Te,Q,Be))}),pathname:xn(Fs,function(Q){var Te=F(this);Te.cannotBeABaseURL||(Te.path=[],St(Te,u(Q),Vt))}),search:xn(lr,function(Q){var Te=F(this);Q=u(Q),Q==""?Te.query=null:(Q.charAt(0)=="?"&&(Q=Q.slice(1)),Te.query="",St(Te,Q,Ee)),_(Te.searchParams).updateSearchParams(Te.query)}),searchParams:xn(ai),hash:xn(br,function(Q){var Te=F(this);if(Q=u(Q),Q==""){Te.fragment=null;return}Q.charAt(0)=="#"&&(Q=Q.slice(1)),Te.fragment="",St(Te,Q,Rt)})}),R(In,"toJSON",function(){return hn.call(this)},{enumerable:!0}),R(In,"toString",function(){return hn.call(this)},{enumerable:!0}),x){var Mo=x.createObjectURL,Bs=x.revokeObjectURL;Mo&&R(Et,"createObjectURL",function(Te){return Mo.apply(x,arguments)}),Bs&&R(Et,"revokeObjectURL",function(Te){return Bs.apply(x,arguments)})}p(Et,"URL"),a({global:!0,forced:!T,sham:!M},{URL:Et})},9801:function(){},3822:function(o,I,i){var a=i(2221);o.exports=a},1434:function(o,I,i){var a=i(5078);o.exports=a},6899:function(o,I,i){var a=i(98);o.exports=a},7710:function(o,I,i){var a=i(5739);i(162),o.exports=a},4486:function(o,I,i){var a=i(278);o.exports=a},4877:function(o,I,i){var a=i(1484);o.exports=a},7178:function(o,I,i){var a=i(7731);o.exports=a},5603:function(o,I,i){var a=i(3669);o.exports=a},1206:function(o,I,i){i(162);var a=i(6899),M=i(4696),T=Array.prototype,P={DOMTokenList:!0,NodeList:!0};o.exports=function(k){var R=k.forEach;return k===T||k instanceof Array&&R===T.forEach||P.hasOwnProperty(M(k))?a:R}},6174:function(o,I,i){var a=i(2604);o.exports=a},57:function(o,I,i){var a=i(263);o.exports=a},4741:function(o,I,i){var a=i(7663);o.exports=a},8368:function(o,I,i){var a=i(5063);o.exports=a},3739:function(o,I,i){var a=i(6813);o.exports=a},172:function(o,I,i){var a=i(6285);o.exports=a},4963:function(o,I,i){var a=i(3213);o.exports=a},7820:function(o,I,i){var a=i(3512);o.exports=a},8980:function(o,I,i){var a=i(8168);o.exports=a},5636:function(o,I,i){var a=i(8651);o.exports=a},6672:function(o,I,i){var a=i(3083);o.exports=a},5059:function(o,I,i){var a=i(2987);o.exports=a},3969:function(o,I,i){var a=i(2239);o.exports=a},6618:function(o,I,i){var a=i(3154);i(162),o.exports=a},5279:function(o,I,i){var a=i(6577);o.exports=a},9562:function(o,I,i){i(2906);var a=i(7545);o.exports=a.setTimeout},2285:function(o,I,i){var a=i(5008);i(162),o.exports=a},8535:function(o,I,i){var a=i(994);i(162),o.exports=a},652:function(o,I,i){var a=i(5668);o.exports=a},5668:function(o,I,i){i(4948),i(9801),i(9336);var a=i(7545);o.exports=a.URL},2534:function(o){"use strict";o.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(o){"use strict";o.exports=e},4960:function(){},6759:function(){},6272:function(){}},n={};function r(o){var I=n[o];if(I!==void 0)return I.exports;var i=n[o]={exports:{}};return t[o](i,i.exports,r),i.exports}(function(){r.n=function(o){var I=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(I,{a:I}),I}})(),function(){r.d=function(o,I){for(var i in I)r.o(I,i)&&!r.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:I[i]})}}(),function(){r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){r.o=function(o,I){return Object.prototype.hasOwnProperty.call(o,I)}}();var s={};return function(){"use strict";r.d(s,{default:function(){return VD}});var o=r(9131),I=r.n(o),i=r(1899),a=r.n(i),M=r(6562),T=r.n(M),P=r(1734),k=r.n(P),R=r(8005),b=r.n(R),c=r(6065),C=r.n(c),y=r(4496),l=r.n(y);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(N){var S=this;do{if(Element.prototype.matches.call(S,N))return S;S=S.parentElement||S.parentNode}while(S!==null&&S.nodeType===1);return null});"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(N){"use strict";if("Element"in N){var S="classList",f="prototype",v=N.Element[f],d=Object,m=I()(String[f])||function(){return this.replace(/^\s+|\s+$/g,"")},w=a()(Array[f])||function(se){for(var pe=0,ue=this.length;pe<ue;pe++)if(pe in this&&this[pe]===se)return pe;return-1},A=function(pe,ue){this.name=pe,this.code=DOMException[pe],this.message=ue},j=function(pe,ue){if(ue==="")throw new A("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(ue))throw new A("INVALID_CHARACTER_ERR","The token must not contain space characters.");return w.call(pe,ue)},L=function(pe){for(var ue=m.call(pe.getAttribute("class")||""),ge=ue?ue.split(/\s+/):[],Oe=0,Je=ge.length;Oe<Je;Oe++)this.push(ge[Oe]);this._updateClassName=function(){pe.setAttribute("class",this.toString())}},z=L[f]=[],U=function(){return new L(this)};if(A[f]=Error[f],z.item=function(se){return this[se]||null},z.contains=function(se){return~j(this,se+"")},z.add=function(){var se=arguments,pe=0,ue=se.length,ge,Oe=!1;do ge=se[pe]+"",~j(this,ge)||(this.push(ge),Oe=!0);while(++pe<ue);Oe&&this._updateClassName()},z.remove=function(){var se=arguments,pe=0,ue=se.length,ge,Oe=!1,Je;do for(ge=se[pe]+"",Je=j(this,ge);~Je;){var qe;T()(qe=this).call(qe,Je,1),Oe=!0,Je=j(this,ge)}while(++pe<ue);Oe&&this._updateClassName()},z.toggle=function(se,pe){var ue=this.contains(se),ge=ue?pe!==!0&&"remove":pe!==!1&&"add";return ge&&this[ge](se),pe===!0||pe===!1?pe:!ue},z.replace=function(se,pe){var ue=j(se+"");if(~ue){var ge;T()(ge=this).call(ge,ue,1,pe),this._updateClassName()}},z.toString=function(){return this.join(" ")},k()){var ie={get:U,enumerable:!0,configurable:!0};try{k()(v,S,ie)}catch(se){(se.number===void 0||se.number===-2146823252)&&(ie.enumerable=!1,k()(v,S,ie))}}else d[f].__defineGetter__&&v.__defineGetter__(S,U)}}(self),function(){"use strict";var N=document.createElement("_");if(N.classList.add("c1","c2"),!N.classList.contains("c2")){var S=function(d){var m=DOMTokenList.prototype[d];DOMTokenList.prototype[d]=function(w){var A,j=arguments.length;for(A=0;A<j;A++)w=arguments[A],m.call(this,w)}};S("add"),S("remove")}if(N.classList.toggle("c3",!1),N.classList.contains("c3")){var f=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(v,d){return 1 in arguments&&!this.contains(v)==!d?d:f.call(this,v)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(v,d){var m=this.toString().split(" "),w=a()(m).call(m,v+"");~w&&(m=b()(m).call(m,w),this.remove.apply(this,m),this.add(d),this.add.apply(this,b()(m).call(m,1)))}),N=null}());(function(){"use strict";if(typeof window<"u"&&window.addEventListener){var N=C()(null),S,f,v=function(){clearTimeout(f),f=l()(S,100)},d=function(){},m=function(){var z;window.addEventListener("resize",v,!1),window.addEventListener("orientationchange",v,!1),window.MutationObserver?(z=new MutationObserver(v),z.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),d=function(){try{z.disconnect(),window.removeEventListener("resize",v,!1),window.removeEventListener("orientationchange",v,!1)}catch{}}):(document.documentElement.addEventListener("DOMSubtreeModified",v,!1),d=function(){document.documentElement.removeEventListener("DOMSubtreeModified",v,!1),window.removeEventListener("resize",v,!1),window.removeEventListener("orientationchange",v,!1)})},w=function(z){function U(ue){var ge;return ue.protocol!==void 0?ge=ue:(ge=document.createElement("a"),ge.href=ue),ge.protocol.replace(/:/g,"")+ge.host}var ie,se,pe;return window.XMLHttpRequest&&(ie=new XMLHttpRequest,se=U(location),pe=U(z),ie.withCredentials===void 0&&pe!==""&&pe!==se?ie=XDomainRequest||void 0:ie=XMLHttpRequest),ie},A="http://www.w3.org/1999/xlink";S=function(){var z,U,ie="",se,pe,ue,ge=0,Oe,Je,qe,tt,je;function Mt(){ge-=1,ge===0&&(d(),m())}function an(Xt){return function(){N[Xt.base]!==!0&&(Xt.useEl.setAttributeNS(A,"xlink:href","#"+Xt.hash),Xt.useEl.hasAttribute("href")&&Xt.useEl.setAttribute("href","#"+Xt.hash))}}function Tn(Xt){return function(){var Wr=document.body,Gr=document.createElement("x"),Mn;Xt.onload=null,Gr.innerHTML=Xt.responseText,Mn=Gr.getElementsByTagName("svg")[0],Mn&&(Mn.setAttribute("aria-hidden","true"),Mn.style.position="absolute",Mn.style.width=0,Mn.style.height=0,Mn.style.overflow="hidden",Wr.insertBefore(Mn,Wr.firstChild)),Mt()}}function Kn(Xt){return function(){Xt.onerror=null,Xt.ontimeout=null,Mt()}}for(d(),tt=document.getElementsByTagName("use"),ue=0;ue<tt.length;ue+=1){try{U=tt[ue].getBoundingClientRect()}catch{U=!1}pe=tt[ue].getAttribute("href")||tt[ue].getAttributeNS(A,"href")||tt[ue].getAttribute("xlink:href"),pe&&pe.split?qe=pe.split("#"):qe=["",""],z=qe[0],se=qe[1],Oe=U&&U.left===0&&U.right===0&&U.top===0&&U.bottom===0,U&&U.width===0&&U.height===0&&!Oe?(ie&&!z.length&&se&&!document.getElementById(se)&&(z=ie),tt[ue].hasAttribute("href")&&tt[ue].setAttributeNS(A,"xlink:href",pe),z.length&&(je=N[z],je!==!0&&l()(an({useEl:tt[ue],base:z,hash:se}),0),je===void 0&&(Je=w(z),Je!==void 0&&(je=new Je,N[z]=je,je.onload=Tn(je),je.onerror=Kn(je),je.ontimeout=Kn(je),je.open("GET",z),je.send(),ge+=1)))):Oe?z.length&&N[z]&&l()(an({useEl:tt[ue],base:z,hash:se}),0):N[z]===void 0?N[z]=!0:N[z].onload&&(N[z].abort(),delete N[z].onload,N[z]=!0)}tt="",ge+=1,Mt()};var j;j=function(){window.removeEventListener("load",j,!1),f=l()(S,0)},document.readyState!=="complete"?window.addEventListener("load",j,!1):j()}})();var h=r(1845);function u(N,S){(S==null||S>N.length)&&(S=N.length);for(var f=0,v=new Array(S);f<S;f++)v[f]=N[f];return v}function p(N){if(h(N))return u(N)}var D=r(184),g=r(662),x=r(7172);function E(N){if(typeof D<"u"&&g(N)!=null||N["@@iterator"]!=null)return x(N)}var _=r(711);function O(N,S){var f;if(N){if(typeof N=="string")return u(N,S);var v=_(f=Object.prototype.toString.call(N)).call(f,8,-1);if(v==="Object"&&N.constructor&&(v=N.constructor.name),v==="Map"||v==="Set")return x(N);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return u(N,S)}}function F(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B(N){return p(N)||E(N)||O(N)||F()}var W=r(7077);function H(N,S,f){return S in N?W(N,S,{value:f,enumerable:!0,configurable:!0,writable:!0}):N[S]=f,N}function Y(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function oe(N,S){for(var f=0;f<S.length;f++){var v=S[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),W(N,v.key,v)}}function ne(N,S,f){return S&&oe(N.prototype,S),f&&oe(N,f),N}var be=r(4426),Z=r.n(be),me=r(9406),V=r.n(me),Le=r(8189),Ce=r.n(Le),ze=r(3972),te=r.n(ze),ae=r(2777),q=r(961),$=r.n(q),de=r(5695),G=r.n(de),X=r(8592),J=r.n(X),K=r(9052),ve=r.n(K),he=r(2560),Se=r.n(he),xe=r(2461),De=r.n(xe);function le(N){if(h(N))return N}function ee(N,S){var f=N==null?null:typeof D<"u"&&g(N)||N["@@iterator"];if(f!=null){var v=[],d=!0,m=!1,w,A;try{for(f=f.call(N);!(d=(w=f.next()).done)&&(v.push(w.value),!(S&&v.length===S));d=!0);}catch(j){m=!0,A=j}finally{try{!d&&f.return!=null&&f.return()}finally{if(m)throw A}}return v}}function re(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(N,S){return le(N)||ee(N,S)||O(N,S)||re()}var fe=r(6397),ye=r.n(fe),Ne=r(7636),Ve=r.n(Ne),He=r(789),Ie=r.n(He),We=r(4729),Xe=r.n(We),rt=r(1610),Lt=r.n(rt),xt=r(3053),wt=r.n(xt),ct,_t=["zoomIn","zoomOut","hand"],Ut=["history","undo","redo","reset"],tn=["delete","deleteAll"],_e=V()(ct=[]).call(ct,_t,Ut,tn),Ae={FILTER:"filter",COLOR:"color"},Be=["rect","circle","triangle"],Ue={CROPZONE:"cropzone"},Ye={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},Re=Ft("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),Vt={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},Yt={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Ge={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},Ee={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_CREATED:"objectCreated",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur",IMAGE_RESIZED:"imageResized"},Rt={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},St={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},Et=Ft("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),In={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},hn={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},zt={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},Jn={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},Tt={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidDrawingMode:"This operation is not supported in the drawing mode.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noActiveObject:"There is no active object.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",rotation:"The current angle is same the old angle.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},Rs={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},Ls={realTimeEvent:!0,min:-360,max:360,value:0},js={min:5,max:30,value:12},Eo={realTimeEvent:!0,min:2,max:300,value:3},Fs={realTimeEvent:!0,min:10,max:100,value:50},lr={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},ai={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},br={realTimeEvent:!0,min:32,max:4088,value:800},xn=2,Mo="tui-image-editor-",Bs=Math.min,Q=Math.max,Te=!1,Me=0;function ke(N){return N.__fe_id||(Me+=1,N.__fe_id=Me),N.__fe_id}function Fe(N){return!lt(N?.__fe_id)}function lt(N){return isUndefined(N)||N===null}function Ze(N){return typeof N=="function"}function it(N,S,f){if(S>f){var v=[f,S];S=v[0],f=v[1]}return Q(S,Bs(N,f))}function Ft(){for(var N={},S=arguments.length,f=new Array(S),v=0;v<S;v++)f[v]=arguments[v];return J()(f,function(d){N[d]=d}),N}function Jt(N){var S="";return forEach(N,function(f,v){var d;S+=_concatInstanceProperty(d="".concat(v,": ")).call(d,f,";")}),S}function bn(N,S){var f={},v=S.length,d=0,m;for(d=0;d<v;d+=1)m=S[d],f[m]=N[m];return f}function Pe(N){return ye()(N,10)}function Kt(N){return N.replace(/-([a-z])/g,function(S,f){return f.toUpperCase()})}function En(){return!!(window.File&&window.FileList&&window.FileReader)}function wo(N,S){var f,v,d;if(N.length===4){var m;N=V()(m="".concat(N)).call(m,b()(N).call(N,1,4))}var w=ye()(b()(N).call(N,1,3),16),A=ye()(b()(N).call(N,3,5),16),j=ye()(b()(N).call(N,5,7),16),L=S||1;return V()(f=V()(v=V()(d="rgba(".concat(w,", ")).call(d,A,", ")).call(v,j,", ")).call(f,L,")")}function zs(){Te||(Te=!0,Xe()("image-editor","UA-129999381-1"))}function Hs(N,S){var f=document.getElementsByTagName("head"),v=ce(f,1),d=v[0],m=document.createElement("link"),w=encodeURIComponent(N);S&&(m.id=S),m.setAttribute("rel","stylesheet"),m.setAttribute("type","text/css"),m.setAttribute("href","data:text/css;charset=UTF-8,".concat(w)),d.appendChild(m)}function _o(N){return function(S){return N.querySelector(S)}}function IC(N){var S=/data:(image\/.+);base64,/,f="",v,d,m;v=N.replace(S,function(A,j){return f=j,""}),v=atob(v);var w=v.length;for(d=new Uint8Array(w),m=0;m<w;m+=1)d[m]=v.charCodeAt(m);return new Blob([d],{type:f})}function bC(N){return Number(N.toFixed(xn))}function Bn(N){J()(N,function(S,f){N[f]=null})}function Us(){var N,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(S.charAt(0)==="."){var v;return V()(v=".".concat(Mo).concat(f)).call(v,b()(S).call(S,1))}return V()(N="".concat(Mo).concat(f)).call(N,S)}function SC(N,S){var f=S.originX,v=S.originY,d=N.getPointByOrigin(f,v),m=d.x,w=d.y;N.set({left:m,top:w,originX:f,originY:v}),N.setCoords()}function DC(N){var S,f={};return Ve()(S=De()(N)).call(S,function(v){f[N[v]]=v}),f}function nc(N,S){N.customProps=N.customProps||{},$()(N.customProps,S)}function To(N,S){var f={};return Se()(S)&&(S=[S]),J()(S,function(v){f[v]=N.customProps[v]}),f}function xC(N){return N.charAt(0).toUpperCase()+b()(N).call(N,1)}function Vs(N,S){return a()(N).call(N,S)>=0}function Yf(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Lt()(N,"type")||Ae.COLOR}function rc(N){var S=Ie()(N),f=S===void 0?{}:S;return f.source?Ae.FILTER:Ae.COLOR}function Xf(N){return wt()(N.get("type"),Be)>=0}function ic(N){if(Vs(Be,N))return"Shape";switch(N){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return $f(N)}}function EC(N){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=S.useAlpha,v=f===void 0?!0:f,d=S.mode,m=Ye.VINTAGE,w=Ye.REMOVE_COLOR,A=Ye.BLEND_COLOR,j=Ye.SEPIA2,L=Ye.COLOR_FILTER,z=Ye.REMOVE_WHITE,U=Ye.BLEND,ie;switch(N){case m:ie=j;break;case w:ie=v?L:z;break;case A:ie=d==="add"?U:d;break;default:ie=N}return $f(ie)}function MC(N){var S=Ge.LOAD_IMAGE;return typeof N=="string"?S===N:S===N.name}function wC(N){var S,f,v=Ge.FLIP_IMAGE,d=Ge.ROTATE_IMAGE,m=Ge.ADD_TEXT,w=Ge.APPLY_FILTER,A=Ge.REMOVE_FILTER,j=Ge.CHANGE_SHAPE,L=Ge.CHANGE_ICON_COLOR,z=Ge.CHANGE_TEXT_STYLE,U=Ge.CLEAR_OBJECTS,ie=Ge.ADD_IMAGE_OBJECT,se=Ge.REMOVE_OBJECT,pe=Ge.RESIZE_IMAGE,ue=N.name,ge=N.args,Oe;switch(ue){case v:Oe={name:ue,detail:ge[1]==="reset"?ge[1]:b()(S=ge[1]).call(S,4)};break;case d:Oe={name:ue,detail:ge[2]};break;case w:Oe={name:St.APPLY_FILTER,detail:EC(ge[1],ge[2])};break;case A:Oe={name:St.REMOVE_FILTER,detail:"Remove"};break;case j:Oe={name:St.CHANGE_SHAPE,detail:"Change"};break;case L:Oe={name:St.CHANGE_ICON_COLOR,detail:"Change"};break;case z:Oe={name:St.CHANGE_TEXT_STYLE,detail:"Change"};break;case se:Oe={name:St.REMOVE_OBJECT,detail:ge[2]};break;case U:Oe={name:St.CLEAR_OBJECTS,detail:"All"};break;case ie:Oe={name:St.ADD_IMAGE_OBJECT,detail:"Add"};break;case m:Oe={name:St.ADD_TEXT};break;case pe:Oe={name:St.RESIZE,detail:V()(f="".concat(~~ge[1].width,"x")).call(f,~~ge[1].height)};break;default:Oe={name:ue};break}return ge[1]==="mask"&&(Oe={name:St.LOAD_MASK_IMAGE,detail:"Apply"}),Oe}function _C(N){return N==="top"?"bottom":N==="left"?"right":N==="right"?"left":"top"}function $f(N){return N.replace(/[a-z]/,function(S){return S.toUpperCase()})}function TC(N){var S=N.left,f=N.top,v=N.width,d=N.height,m=ai.LEFT,w=ai.TOP,A=ai.WIDTH,j=ai.HEIGHT;return S===m&&f===w&&v===A&&d===j}var AC=Ft("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),Zf={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},OC={UN_IMPLEMENTATION:function(S){return Zf.UN_IMPLEMENTATION+S},NO_COMPONENT_NAME:function(){return Zf.NO_COMPONENT_NAME}},Ws={types:$()({},AC),create:function(S){S=S.toLowerCase();for(var f=OC[S],v=arguments.length,d=new Array(v>1?v-1:0),m=1;m<v;m++)d[m-1]=arguments[m];return f.apply(void 0,d)}},Qf=Ws.create,Jf=Ws.types,NC=function(){function N(S,f){Y(this,N),this.name=S.name,this.args=f,this.execute=S.execute,this.undo=S.undo,this.executeCallback=S.executeCallback||null,this.undoCallback=S.undoCallback||null,this.undoData={}}return ne(N,[{key:"execute",value:function(){throw new Error(Qf(Jf.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(Qf(Jf.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return De()(this.undoData).length>0}},{key:"setUndoData",value:function(f,v,d){return v&&(f=v),d?v||(v=f):($()(this.undoData,f),v=null),v}},{key:"setExecuteCallback",value:function(f){return this.executeCallback=f,this}},{key:"setUndoCallback",value:function(f){return this.undoCallback=f,this}}]),N}(),PC=NC,Kf={};function kC(N){var S=Kf[N];if(S){for(var f=arguments.length,v=new Array(f>1?f-1:0),d=1;d<f;d++)v[d-1]=arguments[d];return new PC(S,v)}return null}function RC(N){Kf[N.name]=N}var Ht={create:kC,register:RC},qf=function(){function N(){Y(this,N),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return ne(N,[{key:"_invokeExecution",value:function(f){var v=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var m=f.args;return m||(m=[]),f.execute.apply(f,B(m)).then(function(w){return v._isSilent||(v.pushUndoStack(f),v.fire(d?Ee.AFTER_REDO:Ee.EXECUTE_COMMAND,f)),v.unlock(),Ze(f.executeCallback)&&f.executeCallback(w),w}).catch(function(w){return v.unlock(),Ce().reject(w)})}},{key:"_invokeUndo",value:function(f){var v=this;this.lock();var d=f.args;return d||(d=[]),f.undo.apply(f,B(d)).then(function(m){return v.pushRedoStack(f),v.fire(Ee.AFTER_UNDO,f),v.unlock(),Ze(f.undoCallback)&&f.undoCallback(m),m}).catch(function(m){return v.unlock(),Ce().reject(m)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(Ee.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(Ee.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var f=this;this._isSilent=!0;for(var v=arguments.length,d=new Array(v),m=0;m<v;m++)d[m]=arguments[m];return this.execute.apply(this,V()(d).call(d,[this._isSilent])).then(function(){f._isSilent=!1})}},{key:"execute",value:function(){var f=this;if(this._isLocked)return Ce().reject(Tt.isLock);for(var v=arguments.length,d=new Array(v),m=0;m<v;m++)d[m]=arguments[m];var w=d[0];return Se()(w)&&(w=Ht.create.apply(Ht,d)),this._invokeExecution(w).then(function(A){return f.clearRedoStack(),A})}},{key:"undo",value:function(){var f=this._undoStack.pop(),v,d="";if(f&&this._isLocked&&(this.pushUndoStack(f,!0),f=null),f)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),v=this._invokeUndo(f);else{if(d=Tt.undo,this._isLocked){var m;d=V()(m="".concat(d," Because ")).call(m,Tt.isLock)}v=Ce().reject(d)}return v}},{key:"redo",value:function(){var f=this._redoStack.pop(),v,d="";if(f&&this._isLocked&&(this.pushRedoStack(f,!0),f=null),f)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),v=this._invokeExecution(f,!0);else{if(d=Tt.redo,this._isLocked){var m;d=V()(m="".concat(d," Because ")).call(m,Tt.isLock)}v=Ce().reject(d)}return v}},{key:"pushUndoStack",value:function(f,v){this._undoStack.push(f),v||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(f,v){this._redoStack.push(f),v||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),N}();ve().mixin(qf);var LC=qf,jC=r(5214),Hr=r.n(jC),FC=function(N){var S,f,v,d,m,w,A,j=N.locale,L=N.biImage,z=N.commonStyle,U=N.headerStyle,ie=N.loadButtonStyle,se=N.downloadButtonStyle,pe=N.submenuStyle;return V()(S=V()(f=V()(v=V()(d=V()(m=V()(w=V()(A=`
    <div class="tui-image-editor-main-container" style="`.concat(z,`">
        <div class="tui-image-editor-header" style="`)).call(A,U,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(w,L,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(m,ie,`">
                    `)).call(d,j.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(v,se,`">
                    `)).call(f,j.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(S,pe,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)},BC=function(N){var S,f,v,d,m,w=N.locale,A=N.biImage,j=N.loadButtonStyle,L=N.downloadButtonStyle,z=N.menuBarPosition;return V()(S=V()(f=V()(v=V()(d=V()(m=`
    <ul class="tui-image-editor-help-menu `.concat(_C(z),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(m,A,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(d,j,`">
                `)).call(v,w.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(f,L,`">
                `)).call(S,w.localize("Download"),`
            </button>
        </div>
    </div>
`)},zC=r(899),cr=r.n(zC),HC=function(N){var S,f,v,d,m,w,A,j,L,z,U,ie,se,pe,ue,ge,Oe,Je,qe,tt,je,Mt,an,Tn,Kn,Xt,Wr,Gr,Mn,Ks=N.subMenuLabelActive,qs=N.subMenuLabelNormal,ea=N.subMenuRangeTitle,ta=N.submenuPartitionVertical,na=N.submenuPartitionHorizontal,ra=N.submenuCheckbox,ia=N.submenuRangePointer,oa=N.submenuRangeValue,sa=N.submenuColorpickerTitle,aa=N.submenuColorpickerButton,la=N.submenuRangeBar,ca=N.submenuRangeSubbar,ua=N.submenuDisabledRangePointer,da=N.submenuDisabledRangeBar,fa=N.submenuDisabledRangeSubbar,ha=N.submenuIconSize,ga=N.menuIconSize,pa=N.biSize,qn=N.menuIconStyle,li=N.submenuIconStyle;return V()(S=V()(f=V()(v=V()(d=V()(m=V()(w=V()(A=V()(j=V()(L=V()(z=V()(U=V()(ie=V()(se=V()(pe=V()(ue=V()(ge=V()(Oe=V()(Je=V()(qe=V()(tt=V()(je=V()(Mt=V()(an=V()(Tn=V()(Kn=V()(Xt=V()(Wr=V()(Gr=V()(Mn=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(Ks,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(Mn,qs,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call(Gr,ea,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(Wr,ta,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(Xt,na,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(Kn,ra,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(Tn,ia,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(an,la,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(Mt,ca,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(je,ua,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(tt,fa,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(qe,da,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call(Je,oa,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call(Oe,sa,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(ge,aa,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(ue,ga,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(pe,ha,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(se,pa,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(ie,qn.normal.color,`;
        stroke: `)).call(U,qn.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(z,qn.active.color,`;
        stroke: `)).call(L,qn.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(j,qn.hover.color,`;
        stroke: `)).call(A,qn.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(w,qn.disabled.color,`;
        stroke: `)).call(m,qn.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(d,li.normal.color,`;
        stroke: `)).call(v,li.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(f,li.active.color,`;
        stroke: `)).call(S,li.active.color,`;
    }
`)},UC={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},VC=r(2534),WC=function(){function N(S){Y(this,N),this.styles=this._changeToObject($()({},UC,S)),Hs(this._styleMaker()),this._loadDefaultSvgIcon()}return ne(N,[{key:"getStyle",value:function(f){var v=null,d=f.replace(/\..+$/,""),m=this.styles[f];switch(f){case"common.bi":v=this.styles[f].image;break;case"menu.icon":v={active:this.styles["".concat(d,".activeIcon")],normal:this.styles["".concat(d,".normalIcon")],hover:this.styles["".concat(d,".hoverIcon")],disabled:this.styles["".concat(d,".disabledIcon")]};break;case"submenu.icon":v={active:this.styles["".concat(d,".activeIcon")],normal:this.styles["".concat(d,".normalIcon")]};break;case"submenu.label":v={active:this._makeCssText(this.styles["".concat(d,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(d,".normalLabel")])};break;case"submenu.partition":v={vertical:this._makeCssText($()({},m,{borderLeft:"1px solid ".concat(m.color)})),horizontal:this._makeCssText($()({},m,{borderBottom:"1px solid ".concat(m.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":m.backgroundColor=m.color,v=this._makeCssText(m);break;default:v=this._makeCssText(m);break}return v}},{key:"_styleMaker",value:function(){var f=this.getStyle("submenu.label"),v=this.getStyle("submenu.partition");return HC({subMenuLabelActive:f.active,subMenuLabelNormal:f.normal,submenuPartitionVertical:v.vertical,submenuPartitionHorizontal:v.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(f){var v={};return J()(f,function(d,m){var w=m.match(/^(.+)\.([a-z]+)$/i),A=ce(w,3),j=A[1],L=A[2];v[j]||(v[j]={}),v[j][L]=d}),v}},{key:"_makeCssText",value:function(f){var v=this,d=[];return J()(f,function(m,w){var A,j;a()(A=["backgroundImage"]).call(A,w)>-1&&m!=="none"&&(m="url(".concat(m,")")),d.push(V()(j="".concat(v._toUnderScore(w),": ")).call(j,m))}),d.join(";")}},{key:"_toUnderScore",value:function(f){return f.replace(/([A-Z])/g,function(v,d){return"-".concat(d.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var f=new DOMParser,v=VC.replace(/data:image\/svg\+xml;base64,/,""),d=f.parseFromString(atob(v),"text/xml");document.body.appendChild(d.documentElement)}}},{key:"_makeIconClassName",value:function(f,v){var d=v?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),m=d[f],w=m.path,A=m.name;return w&&A?f:"".concat(f," use-default")}},{key:"_makeSvgIconPrefix",value:function(f,v){var d,m=v?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),w=m[f],A=w.path,j=w.name;return A&&j?V()(d="".concat(A,"#")).call(d,j,"-"):"#"}},{key:"_makeSvgItem",value:function(f,v,d){var m=this;return cr()(f).call(f,function(w){var A,j,L=m._makeSvgIconPrefix(w,d),z=m._toUnderScore(v),U=m._makeIconClassName(w,d);return V()(A=V()(j='<use xlink:href="'.concat(L,"ic-")).call(j,z,'" class="')).call(A,U,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(f,v){var d,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return V()(d='<svg class="svg_ic-'.concat(m?"submenu":"menu",'">')).call(d,this._makeSvgItem(f,v,m),"</svg>")}}]),N}(),GC=WC,YC=r(9146),we=r.n(YC),XC=r(6623),eh=r(4230);function oc(N,S){return oc=eh||function(v,d){return v.__proto__=d,v},oc(N,S)}function At(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=XC(S&&S.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),S&&oc(N,S)}var $C=r(3742);function Gs(N){"@babel/helpers - typeof";return typeof D=="function"&&typeof $C=="symbol"?Gs=function(f){return typeof f}:Gs=function(f){return f&&typeof D=="function"&&f.constructor===D&&f!==D.prototype?"symbol":typeof f},Gs(N)}function Dt(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function Ot(N,S){if(S&&(Gs(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dt(N)}var th=r(9856);function Qe(N){return Qe=eh?th:function(f){return f.__proto__||th(f)},Qe(N)}var ZC=r(6092),Ao=r.n(ZC),QC=r(4858),JC=r.n(QC),KC=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],nh=function(){function N(S,f){var v=f.defaultColor,d=v===void 0?"#7e7e7e":v,m=f.toggleDirection,w=m===void 0?"up":m,A=f.usageStatistics;Y(this,N),this.colorpickerElement=S,this.usageStatistics=A,this._show=!1,this._colorpickerElement=S,this._toggleDirection=w,this._makePickerButtonElement(d),this._makePickerLayerElement(S,S.getAttribute("title")),this._color=d,this.picker=JC().create({container:this.pickerElement,preset:KC,color:d,usageStatistics:this.usageStatistics}),this._addEvent()}return ne(N,[{key:"destroy",value:function(){var f=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",J()(this,function(v,d){f[d]=null})}},{key:"color",get:function(){return this._color},set:function(f){this._color=f,this._changeColorElement(f)}},{key:"_changeColorElement",value:function(f){f?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=f):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(f){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",f?this.colorElement.style.backgroundColor=f:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(f,v){var d=document.createElement("label"),m=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",d.innerHTML=v,m.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(m),f.appendChild(this.pickerControl),f.appendChild(this.colorElement),f.appendChild(d)}},{key:"_addEvent",value:function(){var f=this,v;this.picker.on("selectColor",function(d){f._changeColorElement(d.color),f._color=d.color,f.fire("change",d.color)}),this.eventHandler={pickerToggle:Z()(v=this._pickerToggleEventHandler).call(v,this),pickerHide:function(){return f.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(f){var v=f.target,d=v&&this._isElementInColorPickerControl(v);(!d||d&&this._isPaletteButton(v))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),f.stopPropagation()}},{key:"_isPaletteButton",value:function(f){return f.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(f){for(var v=f;v!==document.body&&v;){if(v===this.pickerControl)return!0;v=v.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var f=this.pickerControl.style,v=this._colorpickerElement.clientWidth/2+2,d=this.pickerControl.offsetWidth/2-v,m=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(m=30),f.top="".concat(m,"px"),f.left="-".concat(d,"px")}}]),N}();ve().mixin(nh);var Ur=nh,qC=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,rh=function(){function N(S){var f,v,d,m,w,A,j,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y(this,N),this._value=L.value||0,this.rangeElement=S.slider,this.rangeInputElement=S.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=L.min||0,this._max=L.max||100,this._useDecimal=L.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=L.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:Z()(f=this._startChangingSlide).call(f,this),stopChangingSlide:Z()(v=this._stopChangingSlide).call(v,this),changeSlide:Z()(d=this._changeSlide).call(d,this),changeSlideFinally:Z()(m=this._changeSlideFinally).call(m,this),changeInput:Z()(w=this._changeInput).call(w,this),changeInputFinally:Z()(A=this._changeValueWithInput).call(A,this,!0),changeInputWithArrow:Z()(j=this._changeValueWithInputKeyEvent).call(j,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=L.value,this.trigger("change")}return ne(N,[{key:"destroy",value:function(){var f=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",J()(this,function(v,d){f[d]=null})}},{key:"max",get:function(){return this._max},set:function(f){this._max=f,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(f){this._min=f,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(f){f=this._useDecimal?f:Pe(f);var v=f-this._min,d=v*this.rangeWidth/this._absMax;this.rangeWidth<d&&(d=this.rangeWidth),this.pointer.style.left="".concat(d,"px"),this.subbar.style.right="".concat(this.rangeWidth-d,"px"),this._value=f,this.rangeInputElement&&(this.rangeInputElement.value=f)}},{key:"trigger",value:function(f){this.fire(f,this._value)}},{key:"_getRangeWidth",value:function(){var f=function(d){return Pe(window.getComputedStyle(d,null).width)};return f(this.rangeElement)-f(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(f){var v,d=f.keyCode,m=f.target;if(!(a()(v=[zt.ARROW_UP,zt.ARROW_DOWN]).call(v,d)<0)){var w=Number(m.value);w=this._valueUpDownForKeyEvent(w,d);var A=w<this._min||w>this._max;if(!A){var j=it(w,this._min,this.max);this.value=j,this.fire("change",j,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(f,v){var d=this._useDecimal?.1:1;return v===zt.ARROW_UP?f+=d:v===zt.ARROW_DOWN&&(f-=d),f}},{key:"_changeInput",value:function(f){var v=this;clearTimeout(this._userInputTimer);var d=f.keyCode;if(d<zt.DIGIT_0||d>zt.DIGIT_9){f.preventDefault();return}this._userInputTimer=l()(function(){v._inputSetValue(f.target.value)},350)}},{key:"_inputSetValue",value:function(f){var v=this._useDecimal?Number(f):Pe(f);v=it(v,this._min,this.max),this.value=v,this.fire("change",v,!0)}},{key:"_changeValueWithInput",value:function(f,v){var d,m=v.keyCode,w=v.target;if(!(a()(d=[zt.ARROW_UP,zt.ARROW_DOWN]).call(d,m)>=0)){var A=this._filterForInputText(w.value),j=!A||isNaN(A);w.value=A,j||this._inputSetValue(A)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(f){var v=f.screenX,d=v-this.firstPosition,m=this.firstLeft+d;m=m>this.rangeWidth?this.rangeWidth:m,m=m<0?0:m,this.pointer.style.left="".concat(m,"px"),this.subbar.style.right="".concat(this.rangeWidth-m,"px");var w=m/this.rangeWidth,A=this._absMax*w+this._min,j=this._useDecimal?A:Pe(A),L=this.value!==j;L&&(this.value=j,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(f){if(f.stopPropagation(),f.target.className==="tui-image-editor-range"){var v=f.offsetX,d=v/this.rangeWidth,m=this._absMax*d+this._min;this.pointer.style.left="".concat(d*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-d)*this.rangeWidth,"px"),this.value=m,this.fire("change",m,!0)}}},{key:"_startChangingSlide",value:function(f){this.firstPosition=f.screenX,this.firstLeft=Pe(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(f){return f.replace(qC,"$1$2$3")}}]),N}();ve().mixin(rh);var zn=rh,ih=function(){function N(S,f){var v=f.locale,d=f.name,m=f.makeSvgIcon,w=f.menuBarPosition,A=f.templateHtml,j=f.usageStatistics;Y(this,N),this.subMenuElement=S,this.menuBarPosition=w,this.toggleDirection=w==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=j,this.eventHandler={},this._makeSubMenuElement({locale:v,name:d,makeSvgIcon:m,templateHtml:A})}return ne(N,[{key:"selector",value:function(f){return this.subMenuElement.querySelector(f)}},{key:"colorPickerChangeShow",value:function(f){var v;Ve()(v=this.colorPickerControls).call(v,function(d){f!==d&&d.hide()})}},{key:"getButtonType",value:function(f,v){return f.className.match(RegExp("(".concat(v.join("|"),")")))[0]}},{key:"changeClass",value:function(f,v,d){f.classList.remove(v),f.classList.add(d)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(f){var v=f.locale,d=f.name,m=f.iconStyle,w=f.makeSvgIcon,A=f.templateHtml,j=document.createElement("div");j.className="tui-image-editor-menu-".concat(d),j.innerHTML=A({locale:v,iconStyle:m,makeSvgIcon:w}),this.subMenuElement.appendChild(j)}},{key:"_onStartEditingInputBox",value:function(){this.fire(Ee.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(Ee.INPUT_BOX_EDITING_STOPPED)}}]),N}();ve().mixin(ih);var ur=ih,e0=function(N){var S,f,v,d,m,w,A,j,L=N.locale,z=N.makeSvgIcon;return V()(S=V()(f=V()(v=V()(d=V()(m=V()(w=V()(A=V()(j=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(z(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(j,L.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(A,z(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(w,L.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(m,z(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(d,L.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(v,L.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(f,L.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(S,L.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function t0(N){var S=n0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function n0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var r0={stroke:"#ffbb3b",fill:"",strokeWidth:3},i0=function(N){At(f,N);var S=t0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"shape",makeSvgIcon:A,menuBarPosition:j,templateHtml:e0,usageStatistics:L}),m.type=null,m.options=r0,m._els={shapeSelectButton:m.selector(".tie-shape-button"),shapeColorButton:m.selector(".tie-shape-color-button"),strokeRange:new zn({slider:m.selector(".tie-stroke-range"),input:m.selector(".tie-stroke-range-value")},Eo),fillColorpicker:new Ur(m.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:m.toggleDirection,usageStatistics:m.usageStatistics}),strokeColorpicker:new Ur(m.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:m.toggleDirection,usageStatistics:m.usageStatistics})},m.colorPickerControls.push(m._els.fillColorpicker),m.colorPickerControls.push(m._els.strokeColorpicker),m.colorPickerInputBoxes=[],m.colorPickerInputBoxes.push(m._els.fillColorpicker.colorpickerElement.querySelector(Rt.COLOR_PICKER_INPUT_BOX)),m.colorPickerInputBoxes.push(m._els.strokeColorpicker.colorpickerElement.querySelector(Rt.COLOR_PICKER_INPUT_BOX)),m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),Bn(this)}},{key:"addEvent",value:function(d){var m,w,A,j,L,z,U=this;this.eventHandler.shapeTypeSelected=Z()(m=this._changeShapeHandler).call(m,this),this.actions=d,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",Z()(w=this._changeStrokeRangeHandler).call(w,this)),this._els.fillColorpicker.on("change",Z()(A=this._changeFillColorHandler).call(A,this)),this._els.strokeColorpicker.on("change",Z()(j=this._changeStrokeColorHandler).call(j,this)),this._els.fillColorpicker.on("changeShow",Z()(L=this.colorPickerChangeShow).call(L,this)),this._els.strokeColorpicker.on("changeShow",Z()(z=this.colorPickerChangeShow).call(z,this)),Ao()(this.colorPickerInputBoxes,function(ie){var se,pe;ie.addEventListener(Ee.FOCUS,Z()(se=U._onStartEditingInputBox).call(se,U)),ie.addEventListener(Ee.BLUR,Z()(pe=U._onStopEditingInputBox).call(pe,U))},this)}},{key:"_removeEvent",value:function(){var d=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),Ao()(this.colorPickerInputBoxes,function(m){var w,A;m.removeEventListener(Ee.FOCUS,Z()(w=d._onStartEditingInputBox).call(w,d)),m.removeEventListener(Ee.BLUR,Z()(A=d._onStopEditingInputBox).call(A,d))},this)}},{key:"setShapeStatus",value:function(d){var m=d.strokeWidth,w=d.strokeColor,A=d.fillColor;this._els.strokeRange.value=m,this._els.strokeColorpicker.color=w,this._els.fillColorpicker.color=A,this.options.stroke=w,this.options.fill=A,this.options.strokeWidth=m,this.actions.setDrawingShape(this.type,{strokeWidth:m})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(d){var m=d;m<=0&&(m=Eo.max),this._els.strokeRange.max=m}},{key:"setStrokeValue",value:function(d){this._els.strokeRange.value=d,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(d){var m=d.target.closest(".tui-image-editor-button");if(m){this.actions.stopDrawingMode(),this.actions.discardSelection();var w=this.getButtonType(m,["circle","triangle","rect"]);if(this.type===w){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=w,d.currentTarget.classList.add(w),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(d,m){this.options.strokeWidth=Pe(d),this.actions.changeShape({strokeWidth:d},!m),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(d){d=d||"transparent",this.options.fill=d,this.actions.changeShape({fill:d})}},{key:"_changeStrokeColorHandler",value:function(d){d=d||"transparent",this.options.stroke=d,this.actions.changeShape({stroke:d})}}]),f}(ur),o0=i0,s0=function(N){var S,f,v,d,m,w,A,j,L,z,U,ie,se,pe,ue,ge,Oe,Je=N.locale,qe=N.makeSvgIcon;return V()(S=V()(f=V()(v=V()(d=V()(m=V()(w=V()(A=V()(j=V()(L=V()(z=V()(U=V()(ie=V()(se=V()(pe=V()(ue=V()(ge=V()(Oe=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(qe(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(Oe,Je.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(ge,qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(ue,Je.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(pe,qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(se,Je.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call(ie,qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(U,Je.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(z,qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(L,Je.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(j,qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(A,Je.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(w,qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(m,Je.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(d,qe(["normal","active"],"apply"),`
                <label>
                    `)).call(v,Je.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(f,qe(["normal","active"],"cancel"),`
                <label>
                    `)).call(S,Je.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function a0(N){var S=l0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function l0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var c0=function(N){At(f,N);var S=a0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"crop",makeSvgIcon:A,menuBarPosition:j,templateHtml:s0,usageStatistics:L}),m.status="active",m._els={apply:m.selector(".tie-crop-button .apply"),cancel:m.selector(".tie-crop-button .cancel"),preset:m.selector(".tie-crop-preset-button")},m.defaultPresetButton=m._els.preset.querySelector(".preset-none"),m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),Bn(this)}},{key:"addEvent",value:function(d){var m,w,A,j=Z()(m=this._applyEventHandler).call(m,this),L=Z()(w=this._cancelEventHandler).call(w,this),z=Z()(A=this._cropzonePresetEventHandler).call(A,this);this.eventHandler={apply:j,cancel:L,cropzonePreset:z},this.actions=d,this._els.apply.addEventListener("click",j),this._els.cancel.addEventListener("click",L),this._els.preset.addEventListener("click",z)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(d){var m=d.target.closest(".tui-image-editor-button.preset");if(m){var w=m.className.match(/preset-[^\s]+/),A=ce(w,1),j=A[0];this._setPresetButtonActive(m),this.actions.preset(j)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(d){d?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;J()(this._els.preset.querySelectorAll(".preset"),function(m){m.classList.remove("active")}),d&&d.classList.add("active")}}]),f}(ur),u0=c0,d0=function(N){var S,f,v,d,m,w,A=N.locale,j=N.makeSvgIcon;return V()(S=V()(f=V()(v=V()(d=V()(m=V()(w=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(A.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(w,A.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(m,A.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(d,j(["normal","active"],"apply"),`
                <label>
                    `)).call(v,A.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(f,j(["normal","active"],"cancel"),`
                <label>
                    `)).call(S,A.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function f0(N){var S=h0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function h0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var g0=function(N){At(f,N);var S=f0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"resize",makeSvgIcon:A,menuBarPosition:j,templateHtml:d0,usageStatistics:L}),m.status="active",m._lockState=!1,m._originalDimensions=null,m._els={widthRange:new zn({slider:m.selector(".tie-width-range"),input:m.selector(".tie-width-range-value")},br),heightRange:new zn({slider:m.selector(".tie-height-range"),input:m.selector(".tie-height-range-value")},br),lockAspectRatio:m.selector(".tie-lock-aspect-ratio"),apply:m.selector(".tie-resize-button .apply"),cancel:m.selector(".tie-resize-button .cancel")},m}return ne(f,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var d=this.actions.getCurrentDimensions();this._originalDimensions=d,this.setWidthValue(d.width),this.setHeightValue(d.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(d){this._els.widthRange.min=this.calcMinValue(d.minWidth),this._els.heightRange.min=this.calcMinValue(d.minHeight),this._els.widthRange.max=this.calcMaxValue(d.maxWidth),this._els.heightRange.max=this.calcMaxValue(d.maxHeight)}},{key:"calcMaxValue",value:function(d){return d<=0&&(d=br.max),d}},{key:"calcMinValue",value:function(d){return d<=0&&(d=br.min),d}},{key:"setWidthValue",value:function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=d,m&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=d,m&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),Bn(this)}},{key:"addEvent",value:function(d){var m,w,A,j,L;this._els.widthRange.on("change",Z()(m=this._changeWidthRangeHandler).call(m,this)),this._els.heightRange.on("change",Z()(w=this._changeHeightRangeHandler).call(w,this)),this._els.lockAspectRatio.addEventListener("change",Z()(A=this._changeLockAspectRatio).call(A,this));var z=Z()(j=this._applyEventHandler).call(j,this),U=Z()(L=this._cancelEventHandler).call(L,this);this.eventHandler={apply:z,cancel:U},this.actions=d,this._els.apply.addEventListener("click",z),this._els.cancel.addEventListener("click",U)}},{key:"_changeWidthRangeHandler",value:function(d){this.actions.preview("width",Pe(d),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(d){this.actions.preview("height",Pe(d),this._lockState)}},{key:"_changeLockAspectRatio",value:function(d){this._lockState=d.target.checked,this.actions.lockAspectRatio(this._lockState,br.min,br.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(d){d?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),f}(ur),p0=g0,v0=function(N){var S,f,v,d,m,w=N.locale,A=N.makeSvgIcon;return V()(S=V()(f=V()(v=V()(d=V()(m=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(A(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(m,w.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(d,A(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(v,w.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(f,A(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(S,w.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)};function m0(N){var S=y0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function y0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var C0=function(N){At(f,N);var S=m0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"flip",makeSvgIcon:A,menuBarPosition:j,templateHtml:v0,usageStatistics:L}),m.flipStatus=!1,m._els={flipButton:m.selector(".tie-flip-button")},m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),Bn(this)}},{key:"addEvent",value:function(d){var m;this.eventHandler.changeFlip=Z()(m=this._changeFlip).call(m,this),this._actions=d,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(d){var m=this,w=d.target.closest(".tui-image-editor-button");if(w){var A=this.getButtonType(w,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&A==="resetFlip")return;this._actions.flip(A).then(function(j){var L=m._els.flipButton.classList;m.flipStatus=!1,L.remove("resetFlip"),J()(["flipX","flipY"],function(z){L.remove(z),j[z]&&(L.add(z),L.add("resetFlip"),m.flipStatus=!0)})})}}}]),f}(ur),I0=C0,b0=function(N){var S,f,v=N.locale,d=N.makeSvgIcon;return V()(S=V()(f=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(d(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(f,d(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(S,v.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function S0(N){var S=D0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function D0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var x0=30,E0=-30,M0=function(N){At(f,N);var S=S0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"rotate",makeSvgIcon:A,menuBarPosition:j,templateHtml:b0,usageStatistics:L}),m._value=0,m._els={rotateButton:m.selector(".tie-rotate-button"),rotateRange:new zn({slider:m.selector(".tie-rotate-range"),input:m.selector(".tie-rotate-range-value")},Ls)},m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),Bn(this)}},{key:"setRangeBarAngle",value:function(d,m){var w=m;d==="rotate"&&(w=ye()(this._els.rotateRange.value,10)+m),this._setRangeBarRatio(w)}},{key:"_setRangeBarRatio",value:function(d){this._els.rotateRange.value=d}},{key:"addEvent",value:function(d){var m,w;this.eventHandler.rotationAngleChanged=Z()(m=this._changeRotateForButton).call(m,this),this.actions=d,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",Z()(w=this._changeRotateForRange).call(w,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(d,m){var w=Pe(d);this.actions.setAngle(w,!m),this._value=w}},{key:"_changeRotateForButton",value:function(d){var m=d.target.closest(".tui-image-editor-button"),w=this._els.rotateRange.value;if(m){var A=this.getButtonType(m,["counterclockwise","clockwise"]),j={clockwise:x0,counterclockwise:E0}[A],L=ye()(w,10)+j,z=L>=-360&&L<=360;z&&this.actions.rotate(j)}}}]),f}(ur),w0=M0,_0=function(N){var S,f,v,d,m,w,A,j,L,z,U,ie,se,pe=N.locale,ue=N.makeSvgIcon;return V()(S=V()(f=V()(v=V()(d=V()(m=V()(w=V()(A=V()(j=V()(L=V()(z=V()(U=V()(ie=V()(se=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(ue(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(se,pe.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call(ie,ue(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(U,pe.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(z,ue(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(L,pe.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(j,ue(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(A,pe.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(w,ue(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(m,pe.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(d,ue(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(v,pe.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(f,pe.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(S,pe.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function T0(N){var S=A0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function A0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var O0=function(N){At(f,N);var S=T0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"text",makeSvgIcon:A,menuBarPosition:j,templateHtml:_0,usageStatistics:L}),m.effect={bold:!1,italic:!1,underline:!1},m.align="tie-text-align-left",m._els={textEffectButton:m.selector(".tie-text-effect-button"),textAlignButton:m.selector(".tie-text-align-button"),textColorpicker:new Ur(m.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:m.toggleDirection,usageStatistics:m.usageStatistics}),textRange:new zn({slider:m.selector(".tie-text-range"),input:m.selector(".tie-text-range-value")},Fs)},m.colorPickerInputBox=m._els.textColorpicker.colorpickerElement.querySelector(Rt.COLOR_PICKER_INPUT_BOX),m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),Bn(this)}},{key:"addEvent",value:function(d){var m,w,A,j,L,z,U=Z()(m=this._setTextEffectHandler).call(m,this),ie=Z()(w=this._setTextAlignHandler).call(w,this);this.eventHandler={setTextEffect:U,setTextAlign:ie},this.actions=d,this._els.textEffectButton.addEventListener("click",U),this._els.textAlignButton.addEventListener("click",ie),this._els.textRange.on("change",Z()(A=this._changeTextRnageHandler).call(A,this)),this._els.textColorpicker.on("change",Z()(j=this._changeColorHandler).call(j,this)),this.colorPickerInputBox.addEventListener(Ee.FOCUS,Z()(L=this._onStartEditingInputBox).call(L,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,Z()(z=this._onStopEditingInputBox).call(z,this))}},{key:"_removeEvent",value:function(){var d,m,w=this.eventHandler,A=w.setTextEffect,j=w.setTextAlign;this._els.textEffectButton.removeEventListener("click",A),this._els.textAlignButton.removeEventListener("click",j),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,Z()(d=this._onStartEditingInputBox).call(d,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,Z()(m=this._onStopEditingInputBox).call(m,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(d){this._els.textColorpicker.color=d}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(d){this._els.textRange.value=d}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=Ie()(d),w=d.fontSize,A=d.fontStyle,j=d.fontWeight,L=d.textDecoration,z=d.textAlign;this.textColor=m,this.fontSize=w,this.setEffectState("italic",A),this.setEffectState("bold",j),this.setEffectState("underline",L),this.setAlignState("tie-text-align-".concat(z))}},{key:"setEffectState",value:function(d,m){var w=m==="italic"||m==="bold"||m==="underline",A=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(d));this.effect[d]=w,A.classList[w?"add":"remove"]("active")}},{key:"setAlignState",value:function(d){var m=this._els.textAlignButton;m.classList.remove(this.align),m.classList.add(d),this.align=d}},{key:"_setTextEffectHandler",value:function(d){var m=d.target.closest(".tui-image-editor-button");if(m){var w=m.className.match(/(bold|italic|underline)/),A=ce(w,1),j=A[0],L={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[j];this.effect[j]=!this.effect[j],m.classList.toggle("active"),this.actions.changeTextStyle(L)}}},{key:"_setTextAlignHandler",value:function(d){var m=d.target.closest(".tui-image-editor-button");if(m){var w=this.getButtonType(m,["left","center","right"]),A="tie-text-align-".concat(w);d.currentTarget.classList.remove(this.align),this.align!==A&&d.currentTarget.classList.add(A),this.actions.changeTextStyle({textAlign:w}),this.align=A}}},{key:"_changeTextRnageHandler",value:function(d,m){this.actions.changeTextStyle({fontSize:d},!m)}},{key:"_changeColorHandler",value:function(d){d=d||"transparent",this.actions.changeTextStyle({fill:d})}}]),f}(ur),N0=O0,P0=function(N){var S,f,v,d=N.locale,m=N.makeSvgIcon;return V()(S=V()(f=V()(v=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(m(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(v,d.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(f,m(["normal","active"],"apply"),`
                <label>
                    `)).call(S,d.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)};function k0(N){var S=R0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function R0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var L0=function(N){At(f,N);var S=k0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"mask",makeSvgIcon:A,menuBarPosition:j,templateHtml:P0,usageStatistics:L}),m._els={applyButton:m.selector(".tie-mask-apply"),maskImageButton:m.selector(".tie-mask-image-file")},m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),Bn(this)}},{key:"addEvent",value:function(d){var m,w,A=Z()(m=this._loadMaskFile).call(m,this),j=Z()(w=this._applyMask).call(w,this);this.eventHandler={loadMaskFile:A,applyMask:j},this.actions=d,this._els.maskImageButton.addEventListener("change",A),this._els.applyButton.addEventListener("click",j)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(d){var m;En()||alert("This browser does not support file-api");var w=ce(d.target.files,1),A=w[0];A&&(m=te().createObjectURL(A),this.actions.loadImageFromURL(m,A),this._els.applyButton.classList.add("active"))}}]),f}(ur),j0=L0,F0=function(N){var S,f,v,d,m,w,A,j,L,z,U,ie,se,pe,ue,ge,Oe,Je,qe,tt,je=N.locale,Mt=N.makeSvgIcon;return V()(S=V()(f=V()(v=V()(d=V()(m=V()(w=V()(A=V()(j=V()(L=V()(z=V()(U=V()(ie=V()(se=V()(pe=V()(ue=V()(ge=V()(Oe=V()(Je=V()(qe=V()(tt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(Mt(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(tt,je.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(qe,Mt(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call(Je,je.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call(Oe,Mt(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(ge,je.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(ue,Mt(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(pe,je.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(se,Mt(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call(ie,je.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(U,Mt(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(z,je.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(L,Mt(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(j,je.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(A,Mt(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(w,je.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(m,Mt(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(d,je.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(v,Mt(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(f,je.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(S,je.localize("Color"),`"></div>
        </li>
    </ul>
`)};function B0(N){var S=z0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function z0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var H0=function(N){At(f,N);var S=B0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"icon",makeSvgIcon:A,menuBarPosition:j,templateHtml:F0,usageStatistics:L}),m.iconType=null,m._iconMap={},m._els={registerIconButton:m.selector(".tie-icon-image-file"),addIconButton:m.selector(".tie-icon-add-button"),iconColorpicker:new Ur(m.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:m.toggleDirection,usageStatistics:m.usageStatistics})},m.colorPickerInputBox=m._els.iconColorpicker.colorpickerElement.querySelector(Rt.COLOR_PICKER_INPUT_BOX),m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),Bn(this)}},{key:"addEvent",value:function(d){var m,w,A,j,L,z=Z()(m=this._registerIconHandler).call(m,this),U=Z()(w=this._addIconHandler).call(w,this);this.eventHandler={registerIcon:z,addIcon:U},this.actions=d,this._els.iconColorpicker.on("change",Z()(A=this._changeColorHandler).call(A,this)),this._els.registerIconButton.addEventListener("change",z),this._els.addIconButton.addEventListener("click",U),this.colorPickerInputBox.addEventListener(Ee.FOCUS,Z()(j=this._onStartEditingInputBox).call(j,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,Z()(L=this._onStopEditingInputBox).call(L,this))}},{key:"_removeEvent",value:function(){var d,m;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,Z()(d=this._onStartEditingInputBox).call(d,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,Z()(m=this._onStopEditingInputBox).call(m,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var d=this;J()(Rs,function(m,w){d.actions.registerDefaultIcons(w,m)})}},{key:"setIconPickerColor",value:function(d){this._els.iconColorpicker.color=d}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(d){d=d||"transparent",this.actions.changeColor(d)}},{key:"_addIconHandler",value:function(d){var m=d.target.closest(".tui-image-editor-button");if(m){var w=m.getAttribute("data-icontype"),A=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(w),this.iconType===w?this.changeStandbyMode():(this.actions.addIcon(w,A),this.iconType=w)}}},{key:"_registerIconHandler",value:function(d){var m;En||alert("This browser does not support file-api");var w=ce(d.target.files,1),A=w[0];A&&(m=te().createObjectURL(A),this.actions.registerCustomIcon(m,A))}}]),f}(ur),U0=H0,V0=function(N){var S,f,v,d,m,w=N.locale,A=N.makeSvgIcon;return V()(S=V()(f=V()(v=V()(d=V()(m=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(A(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(m,w.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(d,A(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(v,w.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(f,w.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(S,w.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function W0(N){var S=G0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function G0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var Y0=.7,X0=function(N){At(f,N);var S=W0(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon,j=d.menuBarPosition,L=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"draw",makeSvgIcon:A,menuBarPosition:j,templateHtml:V0,usageStatistics:L}),m._els={lineSelectButton:m.selector(".tie-draw-line-select-button"),drawColorPicker:new Ur(m.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:m.toggleDirection,usageStatistics:m.usageStatistics}),drawRange:new zn({slider:m.selector(".tie-draw-range"),input:m.selector(".tie-draw-range-value")},js)},m.type=null,m.color=m._els.drawColorPicker.color,m.width=m._els.drawRange.value,m.colorPickerInputBox=m._els.drawColorPicker.colorpickerElement.querySelector(Rt.COLOR_PICKER_INPUT_BOX),m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),Bn(this)}},{key:"addEvent",value:function(d){var m,w,A,j,L;this.eventHandler.changeDrawType=Z()(m=this._changeDrawType).call(m,this),this.actions=d,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",Z()(w=this._changeDrawColor).call(w,this)),this._els.drawRange.on("change",Z()(A=this._changeDrawRange).call(A,this)),this.colorPickerInputBox.addEventListener(Ee.FOCUS,Z()(j=this._onStartEditingInputBox).call(j,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,Z()(L=this._onStopEditingInputBox).call(L,this))}},{key:"_removeEvent",value:function(){var d,m;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,Z()(d=this._onStartEditingInputBox).call(d,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,Z()(m=this._onStopEditingInputBox).call(m,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:wo(this.color,Y0)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(d){var m=d.target.closest(".tui-image-editor-button");if(m){var w=this.getButtonType(m,["free","line"]);if(this.actions.discardSelection(),this.type===w){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=w,this._els.lineSelectButton.classList.add(w),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(d){this.color=d||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(d){this.width=d,this.type?this.setDrawMode():this.changeStartMode()}}]),f}(ur),$0=X0,Z0=r(9886),oh=r.n(Z0),Q0=function(N){var S,f,v,d,m,w,A,j,L,z,U,ie,se,pe,ue,ge,Oe=N.locale;return V()(S=V()(f=V()(v=V()(d=V()(m=V()(w=V()(A=V()(j=V()(L=V()(z=V()(U=V()(ie=V()(se=V()(pe=V()(ue=V()(ge=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat(Oe.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(ge,Oe.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(ue,Oe.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(pe,Oe.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(se,Oe.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call(ie,Oe.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(U,Oe.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(z,Oe.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(L,Oe.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(j,Oe.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(A,Oe.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(w,Oe.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(m,Oe.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(d,Oe.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(v,Oe.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(f,Oe.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(S,Oe.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)};function J0(N){var S=K0();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function K0(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var sh="130px",q0=["add","diff","subtract","multiply","screen","lighten","darken"],ah=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],eI={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},lh=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],ch=["filterBlendColor","filterMultiplyColor","filterTintColor"],tI=function(N){At(f,N);var S=J0(f);function f(v,d){var m,w=d.locale,A=d.menuBarPosition,j=d.usageStatistics;return Y(this,f),m=S.call(this,v,{locale:w,name:"filter",menuBarPosition:A,templateHtml:Q0,usageStatistics:j}),m.selectBoxShow=!1,m.checkedMap={},m._makeControlElement(),m}return ne(f,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),Bn(this)}},{key:"_removeEvent",value:function(){var d=this,m;J()(ah,function(w){var A=d.selector(".tie-".concat(w)),j=Kt(w);A.removeEventListener("change",d.eventHandler[j])}),J()(V()(m=[]).call(m,lh,ch),function(w){d._els[w].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),Ao()(this.colorPickerInputBoxes,function(w){var A,j;w.removeEventListener(Ee.FOCUS,Z()(A=d._onStartEditingInputBox).call(A,d)),w.removeEventListener(Ee.BLUR,Z()(j=d._onStopEditingInputBox).call(j,d))},this)}},{key:"_destroyToolInstance",value:function(){var d,m=this;J()(V()(d=[]).call(d,lh,ch),function(w){m._els[w].destroy()})}},{key:"addEvent",value:function(d){var m=this,w,A,j,L=d.applyFilter,z=function(se){var pe;return Z()(pe=m._changeFilterState).call(pe,m,L,se)},U=function(se){return function(pe,ue){return m._changeFilterState(L,se,ue)}};this.eventHandler={changeBlendFilter:z("blend"),blandTypeClick:function(se){return se.stopPropagation()}},J()(ah,function(ie){var se=m.selector(".tie-".concat(ie)),pe=Kt(ie);m.checkedMap[pe]=se,m.eventHandler[pe]=z(pe),se.addEventListener("change",m.eventHandler[pe])}),this._els.removewhiteDistanceRange.on("change",U("removeWhite")),this._els.colorfilterThresholdRange.on("change",U("colorFilter")),this._els.pixelateRange.on("change",U("pixelate")),this._els.noiseRange.on("change",U("noise")),this._els.brightnessRange.on("change",U("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",z("multiply")),this._els.filterTintColor.on("change",z("tint")),this._els.tintOpacity.on("change",U("tint")),this._els.filterMultiplyColor.on("changeShow",Z()(w=this.colorPickerChangeShow).call(w,this)),this._els.filterTintColor.on("changeShow",Z()(A=this.colorPickerChangeShow).call(A,this)),this._els.filterBlendColor.on("changeShow",Z()(j=this.colorPickerChangeShow).call(j,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),Ao()(this.colorPickerInputBoxes,function(ie){var se,pe;ie.addEventListener(Ee.FOCUS,Z()(se=m._onStartEditingInputBox).call(se,m)),ie.addEventListener(Ee.BLUR,Z()(pe=m._onStopEditingInputBox).call(pe,m))},this)}},{key:"setFilterState",value:function(d){var m=d.type,w=d.options,A=d.action,j=this._getFilterNameFromOptions(m,w),L=A==="remove";L||this._setFilterState(j,w),this.checkedMap[j].checked=!L}},{key:"initFilterCheckBoxState",value:function(){J()(this.checkedMap,function(d){d.checked=!1},this)}},{key:"_setFilterState",value:function(d,m){d==="colorFilter"?this._els.colorfilterThresholdRange.value=m.distance:d==="removeWhite"?this._els.removewhiteDistanceRange.value=m.distance:d==="pixelate"?this._els.pixelateRange.value=m.blocksize:d==="brightness"?this._els.brightnessRange.value=m.brightness:d==="noise"?this._els.noiseRange.value=m.noise:d==="tint"?(this._els.tintOpacity.value=m.alpha,this._els.filterTintColor.color=m.color):d==="blend"?this._els.filterBlendColor.color=m.color:d==="multiply"&&(this._els.filterMultiplyColor.color=m.color)}},{key:"_getFilterNameFromOptions",value:function(d,m){var w=d;return d==="removeColor"?w=oh()(m.useAlpha)?"removeWhite":"colorFilter":d==="blendColor"&&(w={add:"blend",multiply:"multiply",tint:"tint"}[m.mode]),w}},{key:"_changeFilterState",value:function(d,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,A=this.checkedMap[m].checked,j=eI[m],L=this.checkedMap[m].closest(".tui-image-editor-checkbox-group");L&&(A?L.classList.remove("tui-image-editor-disabled"):L.classList.add("tui-image-editor-disabled")),d(A,j,this._getFilterOption(m),!w)}},{key:"_getFilterOption",value:function(d){var m={};switch(d){case"removeWhite":m.color="#FFFFFF",m.useAlpha=!1,m.distance=Hr()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":m.color="#FFFFFF",m.distance=Hr()(this._els.colorfilterThresholdRange.value);break;case"pixelate":m.blocksize=Pe(this._els.pixelateRange.value);break;case"noise":m.noise=Pe(this._els.noiseRange.value);break;case"brightness":m.brightness=Hr()(this._els.brightnessRange.value);break;case"blend":m.mode="add",m.color=this._els.filterBlendColor.color,m.mode=this._els.blendType.value;break;case"multiply":m.mode="multiply",m.color=this._els.filterMultiplyColor.color;break;case"tint":m.mode="tint",m.color=this._els.filterTintColor.color,m.alpha=this._els.tintOpacity.value;break;case"blur":m.blur=this._els.blurRange.value;break;default:break}return m}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new zn({slider:this.selector(".tie-removewhite-distance-range")},lr.removewhiteDistanceRange),brightnessRange:new zn({slider:this.selector(".tie-brightness-range")},lr.brightnessRange),noiseRange:new zn({slider:this.selector(".tie-noise-range")},lr.noiseRange),pixelateRange:new zn({slider:this.selector(".tie-pixelate-range")},lr.pixelateRange),colorfilterThresholdRange:new zn({slider:this.selector(".tie-colorfilter-threshold-range")},lr.colorfilterThresholdRange),filterTintColor:new Ur(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new Ur(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new Ur(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:lr.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(Rt.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(Rt.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(Rt.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(d){var m=document.createElement("div"),w=document.createElement("label"),A=document.createElement("div");return A.id="tie-filter-tint-opacity",w.innerHTML="Opacity",m.appendChild(w),m.appendChild(A),d.appendChild(m),d.style.height=sh,new zn({slider:A},lr.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(d){var m=document.createElement("div"),w=document.createElement("select"),A=document.createElement("ul");return m.className="tui-image-editor-selectlist-wrap",A.className="tui-image-editor-selectlist",m.appendChild(w),m.appendChild(A),this._makeSelectOptionList(w),d.appendChild(m),d.style.height=sh,this._drawSelectOptionList(w,A),this._pickerWithSelectboxForAddEvent(w,A),w}},{key:"_drawSelectOptionList",value:function(d,m){var w=d.querySelectorAll("option");J()(w,function(A){var j=document.createElement("li");j.innerHTML=A.innerHTML,j.setAttribute("data-item",A.value),m.appendChild(j)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(d,m){var w=this;m.addEventListener("click",function(A){var j=A.target.getAttribute("data-item"),L=document.createEvent("HTMLEvents");d.querySelector('[value="'.concat(j,'"]')).selected=!0,L.initEvent("change",!0,!0),d.dispatchEvent(L),w.selectBoxShow=!1,m.style.display="none"}),d.addEventListener("mousedown",function(A){A.preventDefault(),w.selectBoxShow=!w.selectBoxShow,m.style.display=w.selectBoxShow?"block":"none",m.setAttribute("data-selectitem",d.value),m.querySelector("[data-item='".concat(d.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(d){J()(q0,function(m){var w=document.createElement("option");w.setAttribute("value",m),w.innerHTML=m.replace(/^[a-z]/,function(A){return A.toUpperCase()}),d.appendChild(w)})}}]),f}(ur),nI=tI,rI=r(4383),iI=r.n(rI),oI=function(){function N(S,f){var v=f.name;Y(this,N),this.name=v,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),S.appendChild(this.panelElement)}return ne(N,[{key:"_makePanelElement",value:function(){var f=document.createElement("div");return f.className="tie-panel-".concat(this.name),f}},{key:"_makeListElement",value:function(){var f=document.createElement("ol");return f.className="".concat(this.name,"-list"),f}},{key:"makeListItemElement",value:function(f){var v=document.createElement("li");return v.innerHTML=f,v.className="".concat(this.name,"-item"),v.setAttribute("data-index",this.items.length),v}},{key:"pushListItemElement",value:function(f){this.listElement.appendChild(f),this.listElement.scrollTop+=f.offsetHeight,this.items.push(f)}},{key:"deleteListItemElement",value:function(f,v){for(var d=this.items,m=f;m<v;m+=1)this.listElement.removeChild(d[m]);T()(d).call(d,f,v-f+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(f,v){this.items[f]&&this.items[f].classList.add(v)}},{key:"removeClass",value:function(f,v){this.items[f]&&this.items[f].classList.remove(v)}},{key:"toggleClass",value:function(f,v){this.items[f]&&this.items[f].classList.toggle(v)}}]),N}(),sI=oI,aI=function(N){var S,f,v,d=N.locale,m=N.makeSvgIcon,w=N.name,A=N.detail;return V()(S=V()(f=V()(v=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(m(["normal","active"],"history-".concat(w.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(v,d.localize(w),`
            `)).call(f,A?"(".concat(d.localize(A),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(S,m(["normal"],"history-check",!0),`
        </div>
    </div>
`)};function lI(N){var S=cI();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function cI(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var uI="history-item",uh="selected-item",dh="disabled-item",dI=function(N){At(f,N);var S=lI(f);function f(v,d){var m,w=d.locale,A=d.makeSvgIcon;return Y(this,f),m=S.call(this,v,{name:"history"}),v.classList.add("enabled"),m.locale=w,m.makeSvgIcon=A,m._eventHandler={},m._historyIndex=m.getListLength(),m}return ne(f,[{key:"add",value:function(d){var m=d.name,w=d.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var A=aI({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:m,detail:w}),j=this.makeListItemElement(A);this.pushListItemElement(j),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var d=this;this._eventHandler.history=function(m){return d._clickHistoryItem(m)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(d){var m=d.target,w=m.closest(".".concat(uI));if(w){var A=iI()(w.getAttribute("data-index"),10);if(A!==this._historyIndex){var j=Math.abs(A-this._historyIndex);A<this._historyIndex?this._actions.undo(j):this._actions.redo(j)}}}},{key:"_selectItem",value:function(d){for(var m=0;m<this.getListLength();m+=1)this.removeClass(m,uh),this.removeClass(m,dh),m>d&&this.addClass(m,dh);this.addClass(d,uh)}},{key:"destroy",value:function(){this.removeEvent(),Bn(this)}},{key:"addEvent",value:function(d){this._actions=d,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),f}(sI),fI=dI,hI=function(){function N(S){Y(this,N),this._locale=S}return ne(N,[{key:"localize",value:function(f){return this._locale[f]||f}}]),N}(),gI=hI,pI={Shape:o0,Crop:u0,Resize:p0,Flip:I0,Rotate:w0,Text:N0,Mask:j0,Icon:U0,Draw:$0,Filter:nI},vI="1300",fh="history",mI="tie-panel-history",Oo="on",No={ZOOM_IN:"zoomIn",HAND:"hand"},hh=function(){function N(S,f,v){Y(this,N),this.options=this._initializeOption(f),this._actions=v,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new gI(this.options.locale),this.theme=new GC(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(S),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return ne(N,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",Bn(this)}},{key:"setUiDefaultSelectionStyle",value:function(f){return $()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},f)}},{key:"resizeEditor",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=f.uiSize,d=f.imageSize,m=d===void 0?this.imageSize:d;m!==this.imageSize&&(this.imageSize=m),v&&this._setUiSize(v);var w=this._getCanvasMaxDimension(),A=w.width,j=w.height,L=this._editorElement.style,z=this.options.menuBarPosition;L.height="".concat(j,"px"),L.width="".concat(A,"px"),this._setEditorPosition(z),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var U=this._selectedElement.classList;z==="top"&&this._selectedElement.offsetWidth<vI?U.add("tui-image-editor-top-optimization"):U.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(f){var v=this._buttonElements[f].classList;v.toggle(Oo),f===No.ZOOM_IN?this._buttonElements[No.HAND].classList.remove(Oo):this._buttonElements[No.ZOOM_IN].classList.remove(Oo)}},{key:"offZoomInButtonStatus",value:function(){var f=this._buttonElements[No.ZOOM_IN].classList;f.remove(Oo)}},{key:"changeHandButtonStatus",value:function(f){var v=this._buttonElements[No.HAND].classList;v[f?"add":"remove"](Oo)}},{key:"changeHelpButtonEnabled",value:function(f,v){var d=this._buttonElements[f].classList;d[v?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(f){return $()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},f)}},{key:"_setUiSize",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,v=this._selectedElement.style;v.width=f.width,v.height=f.height}},{key:"_makeSubMenu",value:function(){var f=this;J()(this.options.menu,function(v){var d,m=pI[v.replace(/^[a-z]/,function(w){return w.toUpperCase()})];f._makeMenuElement(v),f._buttonElements[v]=f._menuBarElement.querySelector(".tie-btn-".concat(v)),f[v]=new m(f._subMenuElement,{locale:f._locale,makeSvgIcon:Z()(d=f.theme.makeMenSvgIconSet).call(d,f.theme),menuBarPosition:f.options.menuBarPosition,usageStatistics:f.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var f,v,d;this.on(Ee.EXECUTE_COMMAND,Z()(f=this._addHistory).call(f,this)),this.on(Ee.AFTER_UNDO,Z()(v=this._selectPrevHistory).call(v,this)),this.on(Ee.AFTER_REDO,Z()(d=this._selectNextHistory).call(d,this))}},{key:"_attachZoomEvent",value:function(){var f=this;this.on(Ee.HAND_STARTED,function(){f.offZoomInButtonStatus(),f.changeHandButtonStatus(!0)}),this.on(Ee.HAND_STOPPED,function(){return f.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(f){var v,d;f.nodeType?d=f:d=document.querySelector(f);var m=_o(d);d.classList.add("tui-image-editor-container"),d.innerHTML=BC({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+FC({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=d,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=m(".tui-image-editor-main"),this._editorElementWrap=m(".tui-image-editor-wrap"),this._editorElement=m(".tui-image-editor"),this._helpMenuBarElement=m(".tui-image-editor-help-menu"),this._menuBarElement=m(".tui-image-editor-menu"),this._subMenuElement=m(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new fI(this._buttonElements[fh],{locale:this._locale,makeSvgIcon:Z()(v=this.theme.makeMenSvgIconSet).call(v,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var f=this;J()(_t,function(v){f.changeHelpButtonEnabled(v,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var f;return V()(f=[]).call(f,B(_t),[""],B(Ut),[""],B(tn))}},{key:"_addHelpMenus",value:function(){var f=this,v=this._makeHelpMenuWithPartition();J()(v,function(d){d?(f._makeMenuElement(d,["normal","disabled","hover"],"help"),f._buttonElements[d]=f._helpMenuBarElement.querySelector(".tie-btn-".concat(d))):f._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var f=document.createElement("li"),v=document.createElement("div");f.className=Us("item"),v.className=Us("icpartition"),f.appendChild(v),this._helpMenuBarElement.appendChild(f)}},{key:"_makeMenuElement",value:function(f){var v,d,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",A=document.createElement("li"),j=this.theme.makeMenSvgIconSet(m,f);this._addTooltipAttribute(A,f),A.className=V()(v=V()(d="tie-btn-".concat(f," ")).call(d,Us("item")," ")).call(v,w),A.innerHTML=j,w==="normal"?this._menuBarElement.appendChild(A):this._helpMenuBarElement.appendChild(A)}},{key:"_addHelpActionEvent",value:function(){var f=this;J()(_e,function(v){f.eventHandler[v]=function(d){return f._actions.main[v](d)},f._buttonElements[v].addEventListener("click",f.eventHandler[v])})}},{key:"_removeHelpActionEvent",value:function(){var f=this;J()(_e,function(v){f._buttonElements[v].removeEventListener("click",f.eventHandler[v])})}},{key:"_addHistory",value:function(f){if(!MC(f)){var v=typeof f=="string"?{name:f}:wC(f);this._historyMenu.add(v)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(f){var v=f.target,d=v.closest(".".concat(mI));if(!d){var m=this._buttonElements[fh].classList;m.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(f,v){f.setAttribute("tooltip-content",this._locale.localize(v.replace(/^[a-z]/g,function(d){return d.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var f=this;this.eventHandler.download=function(){return f._actions.main.download()},J()(this._buttonElements.download,function(v){v.addEventListener("click",f.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var f=this;J()(this._buttonElements.download,function(v){v.removeEventListener("click",f.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var f=this;this.eventHandler.loadImage=function(v){return f._actions.main.load(v.target.files[0])},J()(this._buttonElements.load,function(v){v.addEventListener("change",f.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var f=this;J()(this._buttonElements.load,function(v){v.removeEventListener("change",f.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(f){var v=this;this.eventHandler[f]=function(){return v.changeMenu(f)},this._buttonElements[f].addEventListener("click",this.eventHandler[f])}},{key:"_addSubMenuEvent",value:function(f){var v=this;this[f].addEvent(this._actions[f]),this[f].on(Ee.INPUT_BOX_EDITING_STARTED,function(){return v.fire(Ee.INPUT_BOX_EDITING_STARTED)}),this[f].on(Ee.INPUT_BOX_EDITING_STOPPED,function(){return v.fire(Ee.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var f=this;J()(this.options.menu,function(v){f._addMainMenuEvent(v),f._addSubMenuEvent(v)})}},{key:"_removeMainMenuEvent",value:function(){var f=this;J()(this.options.menu,function(v){f._buttonElements[v].removeEventListener("click",f.eventHandler[v]),f[v].off(Ee.INPUT_BOX_EDITING_STARTED),f[v].off(Ee.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var f=this;J()(this.options.menu,function(v){f[v].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var f=this,v=this._getLoadImage();v.path&&this._actions.main.initLoadImage(v.path,v.name).then(function(){f.activeMenuEvent()}),this._addLoadEvent();var d=document.createElement("div");d.className=Us("grid-visual");var m=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;d.innerHTML=m,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(d)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(f,v,d),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(f,v,d){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),d&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===f&&v?this.submenu=null:(this._buttonElements[f].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(f)),this.submenu=f,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(f)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var f=this._editorContainerElement.style,v=f.maxWidth,d=f.maxHeight,m=Hr()(v),w=Hr()(d);return{width:m,height:w}}},{key:"_setEditorPosition",value:function(f){var v=this._getCanvasMaxDimension(),d=v.width,m=v.height,w=this._editorElement.style,A=0,j=0;this.submenu&&(f==="bottom"?m>this._editorElementWrap.scrollHeight-150?A=(m-this._editorElementWrap.scrollHeight)/2:A=150/2*-1:f==="top"?m>this._editorElementWrap.offsetHeight-150?A=150/2-(m-(this._editorElementWrap.offsetHeight-150))/2:A=150/2:f==="left"?d>this._editorElementWrap.offsetWidth-248?j=248/2-(d-(this._editorElementWrap.offsetWidth-248))/2:j=248/2:f==="right"&&(d>this._editorElementWrap.scrollWidth-248?j=(d-this._editorElementWrap.scrollWidth)/2:j=248/2*-1)),w.top="".concat(A,"px"),w.left="".concat(j,"px")}}]),N}();ve().mixin(hh);var yI=hh,CI=r(381),Ni=r.n(CI),gh=function(){function N(){Y(this,N),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return ne(N,[{key:"imageToSVG",value:function(f,v,d){var m=this;d=this.checkoptions(d),this.loadImage(f,function(w){v(m.imagedataToSVG(m.getImgdata(w),d))},d)}},{key:"imagedataToSVG",value:function(f,v){v=this.checkoptions(v);var d=this.imagedataToTracedata(f,v);return this.getsvgstring(d,v)}},{key:"imageToTracedata",value:function(f,v,d){var m=this;d=this.checkoptions(d),this.loadImage(f,function(w){v(m.imagedataToTracedata(m.getImgdata(w),d))},d)}},{key:"imagedataToTracedata",value:function(f,v){v=this.checkoptions(v);var d=this.colorquantization(f,v),m;if(v.layering===0){m={layers:[],palette:d.palette,width:d.array[0].length-2,height:d.array.length-2};for(var w=0;w<d.palette.length;w+=1){var A=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(d,w),v.pathomit),v),v.ltres,v.qtres);m.layers.push(A)}}else{var j=this.layering(d);v.layercontainerid&&this.drawLayers(j,this.specpalette,v.scale,v.layercontainerid);var L=this.batchpathscan(j,v.pathomit),z=this.batchinternodes(L,v);m={layers:this.batchtracelayers(z,v.ltres,v.qtres),palette:d.palette,width:f.width,height:f.height}}return m}},{key:"checkoptions",value:function(f){f=f||{},typeof f=="string"&&(f=f.toLowerCase(),this.optionpresets[f]?f=this.optionpresets[f]:f={});for(var v=De()(this.optionpresets.default),d=0;d<v.length;d+=1)f.hasOwnProperty(v[d])||(f[v[d]]=this.optionpresets.default[v[d]]);return f}},{key:"colorquantization",value:function(f,v){var d=[],m=0,w,A,j,L=[],z=f.width*f.height,U,ie,se,pe,ue;for(ie=0;ie<f.height+2;ie+=1)for(d[ie]=[],U=0;U<f.width+2;U+=1)d[ie][U]=-1;for(v.pal?ue=v.pal:v.colorsampling===0?ue=this.generatepalette(v.numberofcolors):v.colorsampling===1?ue=this.samplepalette(v.numberofcolors,f):ue=this.samplepalette2(v.numberofcolors,f),v.blurradius>0&&(f=this.blur(f,v.blurradius,v.blurdelta)),pe=0;pe<v.colorquantcycles;pe+=1){if(pe>0)for(se=0;se<ue.length;se+=1)L[se].n>0&&(ue[se]={r:Math.floor(L[se].r/L[se].n),g:Math.floor(L[se].g/L[se].n),b:Math.floor(L[se].b/L[se].n),a:Math.floor(L[se].a/L[se].n)}),L[se].n/z<v.mincolorratio&&pe<v.colorquantcycles-1&&(ue[se]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(U=0;U<ue.length;U+=1)L[U]={r:0,g:0,b:0,a:0,n:0};for(ie=0;ie<f.height;ie+=1)for(U=0;U<f.width;U+=1){for(m=(ie*f.width+U)*4,j=0,A=1024,se=0;se<ue.length;se+=1)w=Math.abs(ue[se].r-f.data[m])+Math.abs(ue[se].g-f.data[m+1])+Math.abs(ue[se].b-f.data[m+2])+Math.abs(ue[se].a-f.data[m+3]),w<A&&(A=w,j=se);L[j].r+=f.data[m],L[j].g+=f.data[m+1],L[j].b+=f.data[m+2],L[j].a+=f.data[m+3],L[j].n+=1,d[ie+1][U+1]=j}}return{array:d,palette:ue}}},{key:"samplepalette",value:function(f,v){for(var d,m=[],w=0;w<f;w+=1)d=Math.floor(Math.random()*v.data.length/4)*4,m.push({r:v.data[d],g:v.data[d+1],b:v.data[d+2],a:v.data[d+3]});return m}},{key:"samplepalette2",value:function(f,v){for(var d,m=[],w=Math.ceil(Math.sqrt(f)),A=Math.ceil(f/w),j=v.width/(w+1),L=v.height/(A+1),z=0;z<A;z+=1)for(var U=0;U<w&&m.length!==f;U+=1)d=Math.floor((z+1)*L*v.width+(U+1)*j)*4,m.push({r:v.data[d],g:v.data[d+1],b:v.data[d+2],a:v.data[d+3]});return m}},{key:"generatepalette",value:function(f){var v=[],d,m,w;if(f<8)for(var A=Math.floor(255/(f-1)),j=0;j<f;j+=1)v.push({r:j*A,g:j*A,b:j*A,a:255});else{var L=Math.floor(Math.pow(f,.3333333333333333)),z=Math.floor(255/(L-1)),U=f-L*L*L;for(d=0;d<L;d+=1)for(m=0;m<L;m+=1)for(w=0;w<L;w+=1)v.push({r:d*z,g:m*z,b:w*z,a:255});for(d=0;d<U;d+=1)v.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return v}},{key:"layering",value:function(f){var v=[],d=0,m=f.array.length,w=f.array[0].length,A,j,L,z,U,ie,se,pe,ue,ge,Oe;for(Oe=0;Oe<f.palette.length;Oe+=1)for(v[Oe]=[],ge=0;ge<m;ge+=1)for(v[Oe][ge]=[],ue=0;ue<w;ue+=1)v[Oe][ge][ue]=0;for(ge=1;ge<m-1;ge+=1)for(ue=1;ue<w-1;ue+=1)d=f.array[ge][ue],A=f.array[ge-1][ue-1]===d?1:0,j=f.array[ge-1][ue]===d?1:0,L=f.array[ge-1][ue+1]===d?1:0,z=f.array[ge][ue-1]===d?1:0,U=f.array[ge][ue+1]===d?1:0,ie=f.array[ge+1][ue-1]===d?1:0,se=f.array[ge+1][ue]===d?1:0,pe=f.array[ge+1][ue+1]===d?1:0,v[d][ge+1][ue+1]=1+U*2+pe*4+se*8,z||(v[d][ge+1][ue]=2+se*4+ie*8),j||(v[d][ge][ue+1]=0+L*2+U*4+8),A||(v[d][ge][ue]=0+j*2+4+z*8);return v}},{key:"layeringstep",value:function(f,v){var d=[],m=f.array.length,w=f.array[0].length,A,j;for(j=0;j<m;j+=1)for(d[j]=[],A=0;A<w;A+=1)d[j][A]=0;for(j=1;j<m;j+=1)for(A=1;A<w;A+=1)d[j][A]=(f.array[j-1][A-1]===v?1:0)+(f.array[j-1][A]===v?2:0)+(f.array[j][A-1]===v?8:0)+(f.array[j][A]===v?4:0);return d}},{key:"pathscan",value:function(f,v){for(var d=[],m=0,w=0,A=0,j=0,L=f[0].length,z=f.length,U=0,ie=!0,se=!1,pe,ue=0;ue<z;ue+=1)for(var ge=0;ge<L;ge+=1)if(f[ue][ge]===4||f[ue][ge]===11)for(A=ge,j=ue,d[m]={},d[m].points=[],d[m].boundingbox=[A,j,A,j],d[m].holechildren=[],ie=!1,w=0,se=f[ue][ge]===11,U=1;!ie;){if(d[m].points[w]={},d[m].points[w].x=A-1,d[m].points[w].y=j-1,d[m].points[w].t=f[j][A],A-1<d[m].boundingbox[0]&&(d[m].boundingbox[0]=A-1),A-1>d[m].boundingbox[2]&&(d[m].boundingbox[2]=A-1),j-1<d[m].boundingbox[1]&&(d[m].boundingbox[1]=j-1),j-1>d[m].boundingbox[3]&&(d[m].boundingbox[3]=j-1),pe=this.pathscan_combined_lookup[f[j][A]][U],f[j][A]=pe[0],U=pe[1],A+=pe[2],j+=pe[3],A-1===d[m].points[0].x&&j-1===d[m].points[0].y)if(ie=!0,d[m].points.length<v)d.pop();else{if(d[m].isholepath=!!se,se){for(var Oe=0,Je=[-1,-1,L+1,z+1],qe=0;qe<m;qe++)!d[qe].isholepath&&this.boundingboxincludes(d[qe].boundingbox,d[m].boundingbox)&&this.boundingboxincludes(Je,d[qe].boundingbox)&&(Oe=qe,Je=d[qe].boundingbox);d[Oe].holechildren.push(m)}m+=1}w+=1}return d}},{key:"boundingboxincludes",value:function(f,v){return f[0]<v[0]&&f[1]<v[1]&&f[2]>v[2]&&f[3]>v[3]}},{key:"batchpathscan",value:function(f,v){var d=[];for(var m in f)f.hasOwnProperty(m)&&(d[m]=this.pathscan(f[m],v));return d}},{key:"internodes",value:function(f,v){var d=[],m=0,w=0,A=0,j=0,L=0,z,U;for(z=0;z<f.length;z+=1)for(d[z]={},d[z].points=[],d[z].boundingbox=f[z].boundingbox,d[z].holechildren=f[z].holechildren,d[z].isholepath=f[z].isholepath,m=f[z].points.length,U=0;U<m;U+=1)w=(U+1)%m,A=(U+2)%m,j=(U-1+m)%m,L=(U-2+m)%m,v.rightangleenhance&&this.testrightangle(f[z],L,j,U,w,A)&&(d[z].points.length>0&&(d[z].points[d[z].points.length-1].linesegment=this.getdirection(d[z].points[d[z].points.length-1].x,d[z].points[d[z].points.length-1].y,f[z].points[U].x,f[z].points[U].y)),d[z].points.push({x:f[z].points[U].x,y:f[z].points[U].y,linesegment:this.getdirection(f[z].points[U].x,f[z].points[U].y,(f[z].points[U].x+f[z].points[w].x)/2,(f[z].points[U].y+f[z].points[w].y)/2)})),d[z].points.push({x:(f[z].points[U].x+f[z].points[w].x)/2,y:(f[z].points[U].y+f[z].points[w].y)/2,linesegment:this.getdirection((f[z].points[U].x+f[z].points[w].x)/2,(f[z].points[U].y+f[z].points[w].y)/2,(f[z].points[w].x+f[z].points[A].x)/2,(f[z].points[w].y+f[z].points[A].y)/2)});return d}},{key:"testrightangle",value:function(f,v,d,m,w,A){return f.points[m].x===f.points[v].x&&f.points[m].x===f.points[d].x&&f.points[m].y===f.points[w].y&&f.points[m].y===f.points[A].y||f.points[m].y===f.points[v].y&&f.points[m].y===f.points[d].y&&f.points[m].x===f.points[w].x&&f.points[m].x===f.points[A].x}},{key:"getdirection",value:function(f,v,d,m){var w=8;return f<d?v<m?w=1:v>m?w=7:w=0:f>d?v<m?w=3:v>m?w=5:w=4:v<m?w=2:v>m?w=6:w=8,w}},{key:"batchinternodes",value:function(f,v){var d=[];for(var m in f)f.hasOwnProperty(m)&&(d[m]=this.internodes(f[m],v));return d}},{key:"tracepath",value:function(f,v,d){var m=0,w,A,j,L={};for(L.segments=[],L.boundingbox=f.boundingbox,L.holechildren=f.holechildren,L.isholepath=f.isholepath;m<f.points.length;){var z;for(w=f.points[m].linesegment,A=-1,j=m+1;(f.points[j].linesegment===w||f.points[j].linesegment===A||A===-1)&&j<f.points.length-1;)f.points[j].linesegment!==w&&A===-1&&(A=f.points[j].linesegment),j+=1;j===f.points.length-1&&(j=0),L.segments=V()(z=L.segments).call(z,this.fitseq(f,v,d,m,j)),j>0?m=j:m=f.points.length}return L}},{key:"fitseq",value:function(f,v,d,m,w){var A;if(w>f.points.length||w<0)return[];var j=m,L=0,z=!0,U,ie,se,pe=w-m;pe<0&&(pe+=f.points.length);for(var ue=(f.points[w].x-f.points[m].x)/pe,ge=(f.points[w].y-f.points[m].y)/pe,Oe=(m+1)%f.points.length,Je;Oe!=w;)Je=Oe-m,Je<0&&(Je+=f.points.length),U=f.points[m].x+ue*Je,ie=f.points[m].y+ge*Je,se=(f.points[Oe].x-U)*(f.points[Oe].x-U)+(f.points[Oe].y-ie)*(f.points[Oe].y-ie),se>v&&(z=!1),se>L&&(j=Oe,L=se),Oe=(Oe+1)%f.points.length;if(z)return[{type:"L",x1:f.points[m].x,y1:f.points[m].y,x2:f.points[w].x,y2:f.points[w].y}];var qe=j;z=!0,L=0;var tt=(qe-m)/pe,je=(1-tt)*(1-tt),Mt=2*(1-tt)*tt,an=tt*tt,Tn=(je*f.points[m].x+an*f.points[w].x-f.points[qe].x)/-Mt,Kn=(je*f.points[m].y+an*f.points[w].y-f.points[qe].y)/-Mt;for(Oe=m+1;Oe!=w;)tt=(Oe-m)/pe,je=(1-tt)*(1-tt),Mt=2*(1-tt)*tt,an=tt*tt,U=je*f.points[m].x+Mt*Tn+an*f.points[w].x,ie=je*f.points[m].y+Mt*Kn+an*f.points[w].y,se=(f.points[Oe].x-U)*(f.points[Oe].x-U)+(f.points[Oe].y-ie)*(f.points[Oe].y-ie),se>d&&(z=!1),se>L&&(j=Oe,L=se),Oe=(Oe+1)%f.points.length;if(z)return[{type:"Q",x1:f.points[m].x,y1:f.points[m].y,x2:Tn,y2:Kn,x3:f.points[w].x,y3:f.points[w].y}];var Xt=qe;return V()(A=this.fitseq(f,v,d,m,Xt)).call(A,this.fitseq(f,v,d,Xt,w))}},{key:"batchtracepaths",value:function(f,v,d){var m=[];for(var w in f)f.hasOwnProperty(w)&&m.push(this.tracepath(f[w],v,d));return m}},{key:"batchtracelayers",value:function(f,v,d){var m=[];for(var w in f)f.hasOwnProperty(w)&&(m[w]=this.batchtracepaths(f[w],v,d));return m}},{key:"roundtodec",value:function(f,v){return Number(f.toFixed(v))}},{key:"svgpathstring",value:function(f,v,d,m){var w,A,j=f.layers[v],L=j[d],z="",U;if(m.linefilter&&L.segments.length<3)return z;if(z=V()(w="<path ".concat(m.desc?V()(A='desc="l '.concat(v," p ")).call(A,d,'" '):"")).call(w,this.tosvgcolorstr(f.palette[v],m),'d="'),m.roundcoords===-1){var ie;for(z+=V()(ie="M ".concat(L.segments[0].x1*m.scale," ")).call(ie,L.segments[0].y1*m.scale," "),U=0;U<L.segments.length;U++){var se,pe;if(z+=V()(se=V()(pe="".concat(L.segments[U].type," ")).call(pe,L.segments[U].x2*m.scale," ")).call(se,L.segments[U].y2*m.scale," "),L.segments[U].hasOwnProperty("x3")){var ue;z+=V()(ue="".concat(L.segments[U].x3*m.scale," ")).call(ue,L.segments[U].y3*m.scale," ")}}z+="Z "}else{var ge;for(z+=V()(ge="M ".concat(this.roundtodec(L.segments[0].x1*m.scale,m.roundcoords)," ")).call(ge,this.roundtodec(L.segments[0].y1*m.scale,m.roundcoords)," "),U=0;U<L.segments.length;U++){var Oe,Je;if(z+=V()(Oe=V()(Je="".concat(L.segments[U].type," ")).call(Je,this.roundtodec(L.segments[U].x2*m.scale,m.roundcoords)," ")).call(Oe,this.roundtodec(L.segments[U].y2*m.scale,m.roundcoords)," "),L.segments[U].hasOwnProperty("x3")){var qe;z+=V()(qe="".concat(this.roundtodec(L.segments[U].x3*m.scale,m.roundcoords)," ")).call(qe,this.roundtodec(L.segments[U].y3*m.scale,m.roundcoords)," ")}}z+="Z "}for(var tt=0;tt<L.holechildren.length;tt++){var je=j[L.holechildren[tt]];if(m.roundcoords===-1){if(je.segments[je.segments.length-1].hasOwnProperty("x3")){var Mt;z+=V()(Mt="M ".concat(je.segments[je.segments.length-1].x3*m.scale," ")).call(Mt,je.segments[je.segments.length-1].y3*m.scale," ")}else{var an;z+=V()(an="M ".concat(je.segments[je.segments.length-1].x2*m.scale," ")).call(an,je.segments[je.segments.length-1].y2*m.scale," ")}for(U=je.segments.length-1;U>=0;U--){var Tn;if(z+="".concat(je.segments[U].type," "),je.segments[U].hasOwnProperty("x3")){var Kn;z+=V()(Kn="".concat(je.segments[U].x2*m.scale," ")).call(Kn,je.segments[U].y2*m.scale," ")}z+=V()(Tn="".concat(je.segments[U].x1*m.scale," ")).call(Tn,je.segments[U].y1*m.scale," ")}}else{if(je.segments[je.segments.length-1].hasOwnProperty("x3")){var Xt;z+=V()(Xt="M ".concat(this.roundtodec(je.segments[je.segments.length-1].x3*m.scale)," ")).call(Xt,this.roundtodec(je.segments[je.segments.length-1].y3*m.scale)," ")}else{var Wr;z+=V()(Wr="M ".concat(this.roundtodec(je.segments[je.segments.length-1].x2*m.scale)," ")).call(Wr,this.roundtodec(je.segments[je.segments.length-1].y2*m.scale)," ")}for(U=je.segments.length-1;U>=0;U--){var Gr;if(z+="".concat(je.segments[U].type," "),je.segments[U].hasOwnProperty("x3")){var Mn;z+=V()(Mn="".concat(this.roundtodec(je.segments[U].x2*m.scale)," ")).call(Mn,this.roundtodec(je.segments[U].y2*m.scale)," ")}z+=V()(Gr="".concat(this.roundtodec(je.segments[U].x1*m.scale)," ")).call(Gr,this.roundtodec(je.segments[U].y1*m.scale)," ")}}z+="Z "}if(z+='" />',m.lcpr||m.qcpr){for(U=0;U<L.segments.length;U++){if(L.segments[U].hasOwnProperty("x3")&&m.qcpr){var Ks,qs,ea,ta,na,ra,ia,oa,sa,aa,la,ca,ua,da;z+=V()(Ks=V()(qs=V()(ea='<circle cx="'.concat(L.segments[U].x2*m.scale,'" cy="')).call(ea,L.segments[U].y2*m.scale,'" r="')).call(qs,m.qcpr,'" fill="cyan" stroke-width="')).call(Ks,m.qcpr*.2,'" stroke="black" />'),z+=V()(ta=V()(na=V()(ra='<circle cx="'.concat(L.segments[U].x3*m.scale,'" cy="')).call(ra,L.segments[U].y3*m.scale,'" r="')).call(na,m.qcpr,'" fill="white" stroke-width="')).call(ta,m.qcpr*.2,'" stroke="black" />'),z+=V()(ia=V()(oa=V()(sa=V()(aa='<line x1="'.concat(L.segments[U].x1*m.scale,'" y1="')).call(aa,L.segments[U].y1*m.scale,'" x2="')).call(sa,L.segments[U].x2*m.scale,'" y2="')).call(oa,L.segments[U].y2*m.scale,'" stroke-width="')).call(ia,m.qcpr*.2,'" stroke="cyan" />'),z+=V()(la=V()(ca=V()(ua=V()(da='<line x1="'.concat(L.segments[U].x2*m.scale,'" y1="')).call(da,L.segments[U].y2*m.scale,'" x2="')).call(ua,L.segments[U].x3*m.scale,'" y2="')).call(ca,L.segments[U].y3*m.scale,'" stroke-width="')).call(la,m.qcpr*.2,'" stroke="cyan" />')}if(!L.segments[U].hasOwnProperty("x3")&&m.lcpr){var fa,ha,ga;z+=V()(fa=V()(ha=V()(ga='<circle cx="'.concat(L.segments[U].x2*m.scale,'" cy="')).call(ga,L.segments[U].y2*m.scale,'" r="')).call(ha,m.lcpr,'" fill="white" stroke-width="')).call(fa,m.lcpr*.2,'" stroke="black" />')}}for(var tt=0;tt<L.holechildren.length;tt++){var je=j[L.holechildren[tt]];for(U=0;U<je.segments.length;U++){if(je.segments[U].hasOwnProperty("x3")&&m.qcpr){var pa,qn,li,Kh,qh,eg,tg,ng,rg,ig,og,sg,ag,lg;z+=V()(pa=V()(qn=V()(li='<circle cx="'.concat(je.segments[U].x2*m.scale,'" cy="')).call(li,je.segments[U].y2*m.scale,'" r="')).call(qn,m.qcpr,'" fill="cyan" stroke-width="')).call(pa,m.qcpr*.2,'" stroke="black" />'),z+=V()(Kh=V()(qh=V()(eg='<circle cx="'.concat(je.segments[U].x3*m.scale,'" cy="')).call(eg,je.segments[U].y3*m.scale,'" r="')).call(qh,m.qcpr,'" fill="white" stroke-width="')).call(Kh,m.qcpr*.2,'" stroke="black" />'),z+=V()(tg=V()(ng=V()(rg=V()(ig='<line x1="'.concat(je.segments[U].x1*m.scale,'" y1="')).call(ig,je.segments[U].y1*m.scale,'" x2="')).call(rg,je.segments[U].x2*m.scale,'" y2="')).call(ng,je.segments[U].y2*m.scale,'" stroke-width="')).call(tg,m.qcpr*.2,'" stroke="cyan" />'),z+=V()(og=V()(sg=V()(ag=V()(lg='<line x1="'.concat(je.segments[U].x2*m.scale,'" y1="')).call(lg,je.segments[U].y2*m.scale,'" x2="')).call(ag,je.segments[U].x3*m.scale,'" y2="')).call(sg,je.segments[U].y3*m.scale,'" stroke-width="')).call(og,m.qcpr*.2,'" stroke="cyan" />')}if(!je.segments[U].hasOwnProperty("x3")&&m.lcpr){var cg,ug,dg;z+=V()(cg=V()(ug=V()(dg='<circle cx="'.concat(je.segments[U].x2*m.scale,'" cy="')).call(dg,je.segments[U].y2*m.scale,'" r="')).call(ug,m.lcpr,'" fill="white" stroke-width="')).call(cg,m.lcpr*.2,'" stroke="black" />')}}}}return z}},{key:"getsvgstring",value:function(f,v){var d,m,w;v=this.checkoptions(v);for(var A=f.width*v.scale,j=f.height*v.scale,L=V()(d="<svg ".concat(v.viewbox?V()(m='viewBox="0 0 '.concat(A," ")).call(m,j,'" '):V()(w='width="'.concat(A,'" height="')).call(w,j,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(d,this.versionnumber,'" >'),z=0;z<f.layers.length;z+=1)for(var U=0;U<f.layers[z].length;U+=1)f.layers[z][U].isholepath||(L+=this.svgpathstring(f,z,U,v));return L+="</svg>",L}},{key:"compareNumbers",value:function(f,v){return f-v}},{key:"torgbastr",value:function(f){var v,d,m;return V()(v=V()(d=V()(m="rgba(".concat(f.r,",")).call(m,f.g,",")).call(d,f.b,",")).call(v,f.a,")")}},{key:"tosvgcolorstr",value:function(f,v){var d,m,w,A,j,L,z;return V()(d=V()(m=V()(w=V()(A=V()(j=V()(L=V()(z='fill="rgb('.concat(f.r,",")).call(z,f.g,",")).call(L,f.b,')" stroke="rgb(')).call(j,f.r,",")).call(A,f.g,",")).call(w,f.b,')" stroke-width="')).call(m,v.strokewidth,'" opacity="')).call(d,f.a/255,'" ')}},{key:"appendSVGString",value:function(f,v){var d;v?(d=document.getElementById(v),d||(d=document.createElement("div"),d.id=v,document.body.appendChild(d))):(d=document.createElement("div"),document.body.appendChild(d)),d.innerHTML+=f}},{key:"blur",value:function(f,v,d){var m,w,A,j,L,z,U,ie,se,pe,ue={width:f.width,height:f.height,data:[]};if(v=Math.floor(v),v<1)return f;v>5&&(v=5),d=Math.abs(d),d>1024&&(d=1024);var ge=this.gks[v-1];for(w=0;w<f.height;w++)for(m=0;m<f.width;m++){for(z=0,U=0,ie=0,se=0,pe=0,A=-v;A<v+1;A++)m+A>0&&m+A<f.width&&(L=(w*f.width+m+A)*4,z+=f.data[L]*ge[A+v],U+=f.data[L+1]*ge[A+v],ie+=f.data[L+2]*ge[A+v],se+=f.data[L+3]*ge[A+v],pe+=ge[A+v]);L=(w*f.width+m)*4,ue.data[L]=Math.floor(z/pe),ue.data[L+1]=Math.floor(U/pe),ue.data[L+2]=Math.floor(ie/pe),ue.data[L+3]=Math.floor(se/pe)}var Oe=new Uint8ClampedArray(ue.data);for(w=0;w<f.height;w++)for(m=0;m<f.width;m++){for(z=0,U=0,ie=0,se=0,pe=0,A=-v;A<v+1;A++)w+A>0&&w+A<f.height&&(L=((w+A)*f.width+m)*4,z+=Oe[L]*ge[A+v],U+=Oe[L+1]*ge[A+v],ie+=Oe[L+2]*ge[A+v],se+=Oe[L+3]*ge[A+v],pe+=ge[A+v]);L=(w*f.width+m)*4,ue.data[L]=Math.floor(z/pe),ue.data[L+1]=Math.floor(U/pe),ue.data[L+2]=Math.floor(ie/pe),ue.data[L+3]=Math.floor(se/pe)}for(w=0;w<f.height;w++)for(m=0;m<f.width;m++)L=(w*f.width+m)*4,j=Math.abs(ue.data[L]-f.data[L])+Math.abs(ue.data[L+1]-f.data[L+1])+Math.abs(ue.data[L+2]-f.data[L+2])+Math.abs(ue.data[L+3]-f.data[L+3]),j>d&&(ue.data[L]=f.data[L],ue.data[L+1]=f.data[L+1],ue.data[L+2]=f.data[L+2],ue.data[L+3]=f.data[L+3]);return ue}},{key:"loadImage",value:function(f,v,d){var m=new Image;d&&d.corsenabled&&(m.crossOrigin="Anonymous"),m.src=f,m.onload=function(){var w=document.createElement("canvas");w.width=m.width,w.height=m.height;var A=w.getContext("2d");A.drawImage(m,0,0),v(w)}}},{key:"getImgdata",value:function(f){var v=f.getContext("2d");return v.getImageData(0,0,f.width,f.height)}},{key:"drawLayers",value:function(f,v,d,m){d=d||1;var w,A,j,L,z,U;m?(U=document.getElementById(m),U||(U=document.createElement("div"),U.id=m,document.body.appendChild(U))):(U=document.createElement("div"),document.body.appendChild(U));for(z in f)if(f.hasOwnProperty(z)){w=f[z][0].length,A=f[z].length;var ie=document.createElement("canvas");ie.width=w*d,ie.height=A*d;var se=ie.getContext("2d");for(L=0;L<A;L+=1)for(j=0;j<w;j+=1)se.fillStyle=this.torgbastr(v[f[z][L][j]%v.length]),se.fillRect(j*d,L*d,d,d);U.appendChild(ie)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),N}(),II={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var S=this,f=function(){S.ui.submenu==="crop"&&(S.stopDrawingMode(),S.ui.changeMenu("crop"))},v=function(z){S.ui.submenu==="rotate"&&S.ui.rotate.setRangeBarAngle("setAngle",z)},d=function(z){S.ui.submenu==="filter"&&Ni()(S.ui).setFilterState(z)},m=function(z){return v(z),d(z),z},w=function(){var z=S._graphics.getZoomMode();S.stopDrawingMode(),z!==hn.ZOOM?(S.startDrawingMode(Et.ZOOM),S._graphics.startZoomInMode()):S._graphics.endZoomInMode()},A=function(){var z=S._graphics.getZoomMode();S.stopDrawingMode(),z!==hn.HAND?(S.startDrawingMode(Et.ZOOM),S._graphics.startHandMode()):S._graphics.endHandMode()},j=function(){Ni()(S.ui)&&Ni()(S.ui).initFilterCheckBoxState()};return $()({initLoadImage:function(z,U){return S.loadImageFromURL(z,U).then(function(ie){f(),S.ui.initializeImgUrl=z,S.ui.resizeEditor({imageSize:ie}),S.clearUndoStack(),S._invoker.fire(Ee.EXECUTE_COMMAND,St.LOAD_IMAGE)})},undo:function(){S.isEmptyUndoStack()||(f(),S.deactivateAll(),S.undo().then(m))},redo:function(){S.isEmptyRedoStack()||(f(),S.deactivateAll(),S.redo().then(m))},reset:function(){f(),S.loadImageFromURL(S.ui.initializeImgUrl,"resetImage").then(function(z){f(),j(),S.ui.resizeEditor({imageSize:z}),S.clearUndoStack(),S._initHistory()})},delete:function(){S.ui.changeHelpButtonEnabled("delete",!1),f(),S.removeActiveObject(),S.activeObjectId=null},deleteAll:function(){f(),S.clearObjects(),S.ui.changeHelpButtonEnabled("delete",!1),S.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(z){En()||alert("This browser does not support file-api"),S.ui.initializeImgUrl=te().createObjectURL(z),S.loadImageFromFile(z).then(function(U){f(),j(),S.clearUndoStack(),S.ui.activeMenuEvent(),S.ui.resizeEditor({imageSize:U}),S._clearHistory(),S._invoker.fire(Ee.EXECUTE_COMMAND,St.LOAD_IMAGE)}).catch(function(U){return Ce().reject(U)})},download:function(){var z=S.toDataURL(),U=S.getImageName(),ie,se,pe;En()&&window.saveAs?(ie=IC(z),se=ie.type.split("/")[1],U.split(".").pop()!==se&&(U+=".".concat(se)),saveAs(ie,U)):(pe=window.open(),pe.document.body.innerHTML="<img src='".concat(z,"'>"))},history:function(z){S.ui.toggleHistoryMenu(z)},zoomIn:function(){S.ui.toggleZoomButtonStatus("zoomIn"),S.deactivateAll(),w()},zoomOut:function(){S._graphics.zoomOut()},hand:function(){S.ui.offZoomInButtonStatus(),S.ui.toggleZoomButtonStatus("hand"),S.deactivateAll(),A()}},this._commonAction())},_iconAction:function(){var S=this;return $()({changeColor:function(v){S.activeObjectId&&S.changeIconColor(S.activeObjectId,v)},addIcon:function(v,d){S.startDrawingMode("ICON"),S.setDrawingIcon(v,d)},cancelAddIcon:function(){S.ui.icon.clearIconType(),S.changeSelectableAll(!0),S.changeCursor("default"),S.stopDrawingMode()},registerDefaultIcons:function(v,d){var m={};m[v]=d,S.registerIcons(m)},registerCustomIcon:function(v,d){var m=new gh;m.imageToSVG(v,function(w){var A=w.match(/path[^>]*d="([^"]*)"/),j=ce(A,2),L=j[1],z={};z[d.name]=L,S.registerIcons(z),S.addIcon(d.name,{left:100,top:100})},gh.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var S=this;return $()({setDrawMode:function(v,d){S.stopDrawingMode(),v==="free"?S.startDrawingMode("FREE_DRAWING",d):S.startDrawingMode("LINE_DRAWING",d)},setColor:function(v){S.setBrush({color:v})}},this._commonAction())},_maskAction:function(){var S=this;return $()({loadImageFromURL:function(v,d){return S.loadImageFromURL(S.toDataURL(),"FilterImage").then(function(){S.addImageObject(v).then(function(){te().revokeObjectURL(d)}),S._invoker.fire(Ee.EXECUTE_COMMAND,St.LOAD_MASK_IMAGE)})},applyFilter:function(){S.applyFilter("mask",{maskObjId:S.activeObjectId})}},this._commonAction())},_textAction:function(){var S=this;return $()({changeTextStyle:function(v,d){S.activeObjectId&&S.changeTextStyle(S.activeObjectId,v,d)}},this._commonAction())},_rotateAction:function(){var S=this;return $()({rotate:function(v,d){S.rotate(v,d),S.ui.resizeEditor(),S.ui.rotate.setRangeBarAngle("rotate",v)},setAngle:function(v,d){S.setAngle(v,d),S.ui.resizeEditor(),S.ui.rotate.setRangeBarAngle("setAngle",v)}},this._commonAction())},_shapeAction:function(){var S=this;return $()({changeShape:function(v,d){S.activeObjectId&&S.changeShape(S.activeObjectId,v,d)},setDrawingShape:function(v){S.setDrawingShape(v)}},this._commonAction())},_cropAction:function(){var S=this;return $()({crop:function(){var v=S.getCropzoneRect();v&&!TC(v)&&S.crop(v).then(function(){S.stopDrawingMode(),S.ui.resizeEditor(),S.ui.changeMenu("crop"),S._invoker.fire(Ee.EXECUTE_COMMAND,St.CROP)}).catch(function(d){return Ce().reject(d)})},cancel:function(){S.stopDrawingMode(),S.ui.changeMenu("crop")},preset:function(v){switch(v){case"preset-square":S.setCropzoneRect(1/1);break;case"preset-3-2":S.setCropzoneRect(3/2);break;case"preset-4-3":S.setCropzoneRect(4/3);break;case"preset-5-4":S.setCropzoneRect(5/4);break;case"preset-7-5":S.setCropzoneRect(7/5);break;case"preset-16-9":S.setCropzoneRect(16/9);break;default:S.setCropzoneRect(),S.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var S=this;return $()({getCurrentDimensions:function(){return S._graphics.getCurrentDimensions()},preview:function(v,d,m){var w=S._graphics.getCurrentDimensions(),A=function(){return w.width/w.height},j={};switch(v){case"width":j.width=d,m?j.height=d/A():j.height=w.height;break;case"height":j.height=d,m?j.width=d*A():j.width=w.width;break;default:j=w}S._graphics.resize(j).then(function(){S.ui.resizeEditor()}),m&&(S.ui.resize.setWidthValue(j.width),S.ui.resize.setHeightValue(j.height))},lockAspectRatio:function(v,d,m){var w=S._graphics.getCurrentDimensions(),A=w.width,j=w.height,L=A/j;if(v)if(A>j){var z=m/L,U=d*L;S.ui.resize.setLimit({minWidth:U>d?U:d,minHeight:d,maxWidth:m,maxHeight:z<m?z:m})}else{var ie=m*L,se=d/L;S.ui.resize.setLimit({minWidth:d,minHeight:se>d?se:d,maxWidth:ie<m?ie:m,maxHeight:m})}else S.ui.resize.setLimit({minWidth:d,minHeight:d,maxWidth:m,maxHeight:m})},resize:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;v||(v=S._graphics.getCurrentDimensions()),S.resize(v).then(function(){S._graphics.setOriginalDimensions(v),S.stopDrawingMode(),S.ui.resizeEditor(),S.ui.changeMenu("resize")}).catch(function(d){return Ce().reject(d)})},reset:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,d=S._graphics.getOriginalDimensions();S.ui.resize.setWidthValue(d.width,!0),S.ui.resize.setHeightValue(d.height,!0),S._graphics.resize(d).then(function(){v||(S.stopDrawingMode(),S.ui.resizeEditor(),S.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var S=this;return $()({flip:function(v){return S[v]()}},this._commonAction())},_filterAction:function(){var S=this;return $()({applyFilter:function(v,d,m,w){v?S.applyFilter(d,m,w):S.hasFilter(d)&&S.removeFilter(d)}},this._commonAction())},setReAction:function(){var S=this;this.on({undoStackChanged:function(v){v?(S.ui.changeHelpButtonEnabled("undo",!0),S.ui.changeHelpButtonEnabled("reset",!0)):(S.ui.changeHelpButtonEnabled("undo",!1),S.ui.changeHelpButtonEnabled("reset",!1)),S.ui.resizeEditor()},redoStackChanged:function(v){v?S.ui.changeHelpButtonEnabled("redo",!0):S.ui.changeHelpButtonEnabled("redo",!1),S.ui.resizeEditor()},objectActivated:function(v){var d,m;S.activeObjectId=v.id,S.ui.changeHelpButtonEnabled("delete",!0),S.ui.changeHelpButtonEnabled("deleteAll",!0),v.type==="cropzone"?S.ui.crop.changeApplyButtonStatus(!0):a()(d=["rect","circle","triangle"]).call(d,v.type)>-1?(S.stopDrawingMode(),S.ui.submenu!=="shape"&&S.ui.changeMenu("shape",!1,!1),S.ui.shape.setShapeStatus({strokeColor:v.stroke,strokeWidth:v.strokeWidth,fillColor:Ie()(v)}),S.ui.shape.setMaxStrokeValue(Math.min(v.width,v.height))):v.type==="path"||v.type==="line"?S.ui.submenu!=="draw"&&(S.ui.changeMenu("draw",!1,!1),S.ui.draw.changeStandbyMode()):a()(m=["i-text","text"]).call(m,v.type)>-1?(S.ui.submenu!=="text"&&S.ui.changeMenu("text",!1,!1),S.ui.text.setTextStyleStateOnAction(v)):v.type==="icon"&&(S.stopDrawingMode(),S.ui.submenu!=="icon"&&S.ui.changeMenu("icon",!1,!1),S.ui.icon.setIconPickerColor(Ie()(v)))},addText:function(v){var d=S.ui.text,m=d.textColor,w=d.fontSize,A=d.fontStyle,j=d.fontWeight,L=d.underline,z="Noto Sans";S.addText("Double Click",{position:v.originPosition,styles:{fill:m,fontSize:w,fontFamily:z,fontStyle:A,fontWeight:j,underline:L}}).then(function(){S.changeCursor("default")})},addObjectAfter:function(v){var d;v.type==="icon"?S.ui.icon.changeStandbyMode():a()(d=["rect","circle","triangle"]).call(d,v.type)>-1&&(S.ui.shape.setMaxStrokeValue(Math.min(v.width,v.height)),S.ui.shape.changeStandbyMode())},objectScaled:function(v){var d,m;if(a()(d=["i-text","text"]).call(d,v.type)>-1)S.ui.text.fontSize=Pe(v.fontSize);else if(a()(m=["rect","circle","triangle"]).call(m,v.type)>=0){var w=v.width,A=v.height,j=S.ui.shape.getStrokeValue();w<j&&S.ui.shape.setStrokeValue(w),A<j&&S.ui.shape.setStrokeValue(A)}},selectionCleared:function(){S.activeObjectId=null,S.ui.submenu==="text"?S.changeCursor("text"):Vs(["draw","crop","resize"],S.ui.submenu)||S.stopDrawingMode()}})},_historyAction:function(){var S=this;return{undo:function(v){return S.undo(v)},redo:function(v){return S.redo(v)}}},_commonAction:function(){var S=this,f,v,d,m,w=Et.TEXT,A=Et.CROPPER,j=Et.SHAPE,L=Et.ZOOM,z=Et.RESIZE;return{modeChange:function(ie){switch(ie){case In.TEXT:S._changeActivateMode(w);break;case In.CROP:S.startDrawingMode(A);break;case In.SHAPE:S._changeActivateMode(j),S.setDrawingShape(S.ui.shape.type,S.ui.shape.options);break;case In.ZOOM:S.startDrawingMode(L);break;case In.RESIZE:S.startDrawingMode(z);break;default:break}},deactivateAll:Z()(f=this.deactivateAll).call(f,this),changeSelectableAll:Z()(v=this.changeSelectableAll).call(v,this),discardSelection:Z()(d=this.discardSelection).call(d,this),stopDrawingMode:Z()(m=this.stopDrawingMode).call(m,this)}},mixin:function(S){$()(S.prototype,this)}},bI=r(602),ph=r.n(bI),SI=r(5573),Ys=r.n(SI),DI=function(){function N(S,f){Y(this,N),this.name=S,this.graphics=f}return ne(N,[{key:"fire",value:function(){for(var f=this.graphics,v=arguments.length,d=new Array(v),m=0;m<v;m++)d[m]=arguments[m];return this.graphics.fire.apply(f,d)}},{key:"setCanvasImage",value:function(f,v){this.graphics.setCanvasImage(f,v)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(f,v){this.graphics.setImageProperties(f,v)}},{key:"setCanvasCssDimension",value:function(f){this.graphics.setCanvasCssDimension(f)}},{key:"setCanvasBackstoreDimension",value:function(f){this.graphics.setCanvasBackstoreDimension(f)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),N}(),Hn=DI;function xI(N){var S=EI();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function EI(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var MI={padding:0,crossOrigin:"Anonymous"},wI=function(N){At(f,N);var S=xI(f);function f(v){return Y(this,f),S.call(this,Re.IMAGE_LOADER,v)}return ne(f,[{key:"load",value:function(d,m){var w=this,A;if(!d&&!m){var j=this.getCanvas();j.backgroundImage=null,j.renderAll(),A=new(Ce())(function(L){w.setCanvasImage("",null),L()})}else A=this._setBackgroundImage(m).then(function(L){return w.setCanvasImage(d,L),w.adjustCanvasDimension(),L});return A}},{key:"_setBackgroundImage",value:function(d){var m=this;return d?new(Ce())(function(w,A){var j=m.getCanvas();j.setBackgroundImage(d,function(){var L=j.backgroundImage;L&&L.getElement()?w(L):A(Tt.loadingImageFailed)},MI)}):Ce().reject(Tt.loadImage)}}]),f}(Hn),_I=wI,TI="tl",AI="tr",OI="mt",NI="ml",PI="mr",kI="mb",RI="bl",LI="br",vh=[TI,AI,OI,NI,PI,kI,RI,LI],sc=function(){};function jI(N){return a()(vh).call(vh,N)>=0}function Xs(N,S){return N>S?"width":"height"}var FI=ae.fabric.util.createClass(ae.fabric.Rect,{initialize:function(S,f,v){f=$()(f,v),f.type="cropzone",this.callSuper("initialize",f),this._addEventHandler(),this.canvas=S,this.options=f},canvasEventDelegation:function(S){var f,v="unregistered",d=this.canvasEventTrigger[S]!==sc;return d?v="registered":a()(f=[Ee.OBJECT_MOVED,Ee.OBJECT_SCALED]).call(f,S)<0&&(v="none"),v},canvasEventRegister:function(S,f){this.canvasEventTrigger[S]=f},_addEventHandler:function(){var S,f,v,d,m;this.canvasEventTrigger=(S={},H(S,Ee.OBJECT_MOVED,sc),H(S,Ee.OBJECT_SCALED,sc),S),this.on({moving:Z()(f=this._onMoving).call(f,this),scaling:Z()(v=this._onScaling).call(v,this)}),ae.fabric.util.addListener(document,"keydown",Z()(d=this._onKeyDown).call(d,this)),ae.fabric.util.addListener(document,"keyup",Z()(m=this._onKeyUp).call(m,this))},_renderCropzone:function(S){var f=7,v=7,d=this.flipX?-1:1,m=this.flipY?-1:1,w=d/this.scaleX,A=m/this.scaleY;S.scale(w,A),this._fillOuterRect(S,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(S),this._strokeBorder(S,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(S,"rgb(0, 0, 0)",{lineDashWidth:f}),this._strokeBorder(S,"rgb(255, 255, 255)",{lineDashWidth:f,lineDashOffset:v})),S.scale(1/w,1/A)},_render:function(S){this.callSuper("_render",S),this._renderCropzone(S)},_fillOuterRect:function(S,f){var v=this._getCoordinates(),d=v.x,m=v.y;S.save(),S.fillStyle=f,S.beginPath(),S.moveTo(d[0]-1,m[0]-1),S.lineTo(d[3]+1,m[0]-1),S.lineTo(d[3]+1,m[3]+1),S.lineTo(d[0]-1,m[3]+1),S.lineTo(d[0]-1,m[0]-1),S.closePath(),S.moveTo(d[1],m[1]),S.lineTo(d[1],m[2]),S.lineTo(d[2],m[2]),S.lineTo(d[2],m[1]),S.lineTo(d[1],m[1]),S.closePath(),Ie()(S).call(S),S.restore()},_fillInnerRect:function(S){var f=this._getCoordinates(),v=f.x,d=f.y,m=this._caculateInnerPosition(v,(v[2]-v[1])/3),w=this._caculateInnerPosition(d,(d[2]-d[1])/3);S.save(),S.strokeStyle="rgba(255, 255, 255, 0.7)",S.lineWidth=this.options.lineWidth,S.beginPath(),S.moveTo(m[0],w[1]),S.lineTo(m[3],w[1]),S.moveTo(m[0],w[2]),S.lineTo(m[3],w[2]),S.moveTo(m[1],w[0]),S.lineTo(m[1],w[3]),S.moveTo(m[2],w[0]),S.lineTo(m[2],w[3]),S.stroke(),S.closePath(),S.restore()},_caculateInnerPosition:function(S,f){var v=[];return v[0]=S[1],v[1]=S[1]+f,v[2]=S[1]+f*2,v[3]=S[2],v},_getCoordinates:function(){var S,f,v=this.canvas,d=this.width,m=this.height,w=this.left,A=this.top,j=d/2,L=m/2,z=v.getHeight(),U=v.getWidth();return{x:cr()(S=[-(j+w),-j,j,j+(U-w-d)]).call(S,Math.ceil),y:cr()(f=[-(L+A),-L,L,L+(z-A-m)]).call(f,Math.ceil)}},_strokeBorder:function(S,f,v){var d=v.lineDashWidth,m=v.lineDashOffset,w=v.lineWidth,A=this.width/2,j=this.height/2;S.save(),S.strokeStyle=f,S.setLineDash&&S.setLineDash([d,d]),m&&(S.lineDashOffset=m),w&&(S.lineWidth=w),S.beginPath(),S.moveTo(-A,-j),S.lineTo(A,-j),S.lineTo(A,j),S.lineTo(-A,j),S.lineTo(-A,-j),S.stroke(),S.restore()},_onMoving:function(){var S=this.height,f=this.width,v=this.left,d=this.top,m=this.canvas.getWidth()-f,w=this.canvas.getHeight()-S;this.left=it(v,0,m),this.top=it(d,0,w),this.canvasEventTrigger[Ee.OBJECT_MOVED](this)},_onScaling:function(S){var f=S.transform.corner,v=this.canvas.getPointer(S.e),d=this._calcScalingSizeFromPointer(v,f);this.scale(1).set(d),this.canvasEventTrigger[Ee.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(S,f){var v=jI(f);return v&&this._resizeCropZone(S,f)},adjustRatioCropzoneSize:function(S){var f=S.width,v=S.height,d=S.leftMaker,m=S.topMaker,w=S.maxWidth,A=S.maxHeight,j=S.scaleTo;if(f=w?it(f,1,w):f,v=A?it(v,1,A):v,!this.presetRatio)return this._withShiftKey&&(f>v?v=f:v>f&&(f=v)),{width:f,height:v,left:d(f),top:m(v)};j==="width"?v=f/this.presetRatio:f=v*this.presetRatio;var L=Math.min(w/f,A/v);if(L<=1){var z,U=cr()(z=[f,v]).call(z,function(se){return se*L}),ie=ce(U,2);f=ie[0],v=ie[1]}return{width:f,height:v,left:d(f),top:m(v)}},_getCropzoneRectInfo:function(){var S=this.canvas,f=S.width,v=S.height,d=this.getBoundingRect(!1,!0),m=d.top,w=d.left,A=d.width,j=d.height;return{rectTop:m,rectLeft:w,rectWidth:A,rectHeight:j,rectRight:w+A,rectBottom:m+j,canvasWidth:f,canvasHeight:v}},_resizeCropZone:function(S,f){var v=S.x,d=S.y,m=this._getCropzoneRectInfo(),w=m.rectWidth,A=m.rectHeight,j=m.rectTop,L=m.rectLeft,z=m.rectBottom,U=m.rectRight,ie=m.canvasWidth,se=m.canvasHeight,pe={tl:{width:U-v,height:z-d,leftMaker:function(ge){return U-ge},topMaker:function(ge){return z-ge},maxWidth:U,maxHeight:z,scaleTo:Xs(L-v,j-d)},tr:{width:v-L,height:z-d,leftMaker:function(){return L},topMaker:function(ge){return z-ge},maxWidth:ie-L,maxHeight:z,scaleTo:Xs(v-U,j-d)},mt:{width:w,height:z-d,leftMaker:function(){return L},topMaker:function(ge){return z-ge},maxWidth:ie-L,maxHeight:z,scaleTo:"height"},ml:{width:U-v,height:A,leftMaker:function(ge){return U-ge},topMaker:function(){return j},maxWidth:U,maxHeight:se-j,scaleTo:"width"},mr:{width:v-L,height:A,leftMaker:function(){return L},topMaker:function(){return j},maxWidth:ie-L,maxHeight:se-j,scaleTo:"width"},mb:{width:w,height:d-j,leftMaker:function(){return L},topMaker:function(){return j},maxWidth:ie-L,maxHeight:se-j,scaleTo:"height"},bl:{width:U-v,height:d-j,leftMaker:function(ge){return U-ge},topMaker:function(){return j},maxWidth:U,maxHeight:se-j,scaleTo:Xs(L-v,d-z)},br:{width:v-L,height:d-j,leftMaker:function(){return L},topMaker:function(){return j},maxWidth:ie-L,maxHeight:se-j,scaleTo:Xs(v-U,d-z)}};return this.adjustRatioCropzoneSize(pe[f])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(S){var f=S.keyCode;f===zt.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(S){var f=S.keyCode;f===zt.SHIFT&&(this._withShiftKey=!1)}}),BI=FI;function zI(N){var S=HI();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function HI(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var UI=10,VI={presetRatio:null,top:-10,left:-10,height:1,width:1},WI=function(N){At(f,N);var S=zI(f);function f(v){var d,m,w,A,j,L;return Y(this,f),L=S.call(this,Re.CROPPER,v),L._cropzone=null,L._startX=null,L._startY=null,L._withShiftKey=!1,L._listeners={keydown:Z()(d=L._onKeyDown).call(d,Dt(L)),keyup:Z()(m=L._onKeyUp).call(m,Dt(L)),mousedown:Z()(w=L._onFabricMouseDown).call(w,Dt(L)),mousemove:Z()(A=L._onFabricMouseMove).call(A,Dt(L)),mouseup:Z()(j=L._onFabricMouseUp).call(j,Dt(L))},L}return ne(f,[{key:"start",value:function(){if(!this._cropzone){var d=this.getCanvas();d.forEachObject(function(m){m.evented=!1}),this._cropzone=new BI(d,$()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},Yt,this.graphics.cropSelectionStyle)),d.discardActiveObject(),d.add(this._cropzone),d.on("mouse:down",this._listeners.mousedown),d.selection=!1,d.defaultCursor="crosshair",ae.fabric.util.addListener(document,"keydown",this._listeners.keydown),ae.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var d=this.getCanvas(),m=this._cropzone;m&&(d.remove(m),d.selection=!0,d.defaultCursor="default",d.off("mouse:down",this._listeners.mousedown),d.forEachObject(function(w){w.evented=!0}),this._cropzone=null,ae.fabric.util.removeListener(document,"keydown",this._listeners.keydown),ae.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(d){this._cropzone&&this._cropzone.set({visible:d})}},{key:"_onFabricMouseDown",value:function(d){var m=this.getCanvas();if(!d.target){m.selection=!1;var w=m.getPointer(d.e);this._startX=w.x,this._startY=w.y,m.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(d){var m=this.getCanvas(),w=m.getPointer(d.e),A=w.x,j=w.y,L=this._cropzone;Math.abs(A-this._startX)+Math.abs(j-this._startY)>UI&&(m.remove(L),L.set(this._calcRectDimensionFromPoint(A,j,L.presetRatio)),m.add(L),m.setActiveObject(L))}},{key:"_calcRectDimensionFromPoint",value:function(d,m){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,A=this.getCanvas(),j=A.getWidth(),L=A.getHeight(),z=this._startX,U=this._startY,ie=it(d,0,z),se=it(m,0,U),pe=it(d,z,j)-ie,ue=it(m,U,L)-se;return this._withShiftKey&&!w?(pe>ue?ue=pe:ue>pe&&(pe=ue),z>=d&&(ie=z-pe),U>=m&&(se=U-ue)):w&&(ue=pe/w,z>=d&&(ie=it(z-pe,0,j)),U>=m&&(se=it(U-ue,0,L)),se+ue>L&&(ue=L-se,pe=ue*w,z>=d&&(ie=it(z-pe,0,j)),U>=m&&(se=it(U-ue,0,L)))),{left:ie,top:se,width:pe,height:ue}}},{key:"_onFabricMouseUp",value:function(){var d=this._cropzone,m=this._listeners,w=this.getCanvas();w.setActiveObject(d),w.off({"mouse:move":m.mousemove,"mouse:up":m.mouseup})}},{key:"getCroppedImageData",value:function(d){var m=this.getCanvas(),w=m.contains(this._cropzone);if(!d)return null;w&&m.remove(this._cropzone);var A={imageName:this.getImageName(),url:m.toDataURL(d)};return w&&m.add(this._cropzone),A}},{key:"getCropzoneRect",value:function(){var d=this._cropzone;return d.isValid()?{left:d.left,top:d.top,width:d.width,height:d.height}:null}},{key:"setCropzoneRect",value:function(d){var m=this.getCanvas(),w=this._cropzone;m.discardActiveObject(),m.selection=!1,m.remove(w),w.set(d?this._getPresetPropertiesForCropSize(d):VI),m.add(w),m.selection=!0,d&&m.setActiveObject(w)}},{key:"_getPresetPropertiesForCropSize",value:function(d){var m,w,A=this.getCanvas(),j=A.getWidth(),L=A.getHeight(),z=j>=L?j:L,U=function(je,Mt){return je>Mt?Mt/je:1},ie=z*d,se=z,pe=U(ie,j),ue=cr()(m=[ie,se]).call(m,function(tt){return tt*pe}),ge=ce(ue,2);ie=ge[0],se=ge[1];var Oe=U(se,L),Je=cr()(w=[ie,se]).call(w,function(tt){return bC(tt*Oe)}),qe=ce(Je,2);return ie=qe[0],se=qe[1],{presetRatio:d,top:(L-se)/2,left:(j-ie)/2,width:ie,height:se}}},{key:"_onKeyDown",value:function(d){d.keyCode===zt.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(d){d.keyCode===zt.SHIFT&&(this._withShiftKey=!1)}}]),f}(Hn),GI=WI;function YI(N){var S=XI();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function XI(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var $I=function(N){At(f,N);var S=YI(f);function f(v){return Y(this,f),S.call(this,Re.FLIP,v)}return ne(f,[{key:"getCurrentSetting",value:function(){var d=this.getCanvasImage();return{flipX:d.flipX,flipY:d.flipY}}},{key:"set",value:function(d){var m=this.getCurrentSetting(),w=m.flipX!==d.flipX,A=m.flipY!==d.flipY;return!w&&!A?Ce().reject(Tt.flip):($()(m,d),this.setImageProperties(m,!0),this._invertAngle(w,A),this._flipObjects(w,A),Ce().resolve({flipX:m.flipX,flipY:m.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(d,m){var w=this.getCanvasImage(),A=w.angle;d&&(A*=-1),m&&(A*=-1),w.rotate(Hr()(A)).setCoords()}},{key:"_flipObjects",value:function(d,m){var w=this.getCanvas();d&&w.forEachObject(function(A){A.set({angle:Hr()(A.angle*-1),flipX:!A.flipX,left:w.width-A.left}).setCoords()}),m&&w.forEachObject(function(A){A.set({angle:Hr()(A.angle*-1),flipY:!A.flipY,top:w.height-A.top}).setCoords()}),w.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var d=this.getCurrentSetting();return this.set({flipX:!d.flipX,flipY:d.flipY})}},{key:"flipY",value:function(){var d=this.getCurrentSetting();return this.set({flipX:d.flipX,flipY:!d.flipY})}}]),f}(Hn),ZI=$I;function QI(N){var S=JI();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function JI(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var KI=function(N){At(f,N);var S=QI(f);function f(v){return Y(this,f),S.call(this,Re.ROTATION,v)}return ne(f,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(d){var m=this.getCurrentAngle()%360;d%=360;var w=this.getCanvasImage(),A=w.getCenterPoint();w.set({angle:d}).setCoords(),this.adjustCanvasDimension();var j=w.getCenterPoint();return this._rotateForEachObject(A,j,d-m),Ce().resolve(d)}},{key:"_rotateForEachObject",value:function(d,m,w){var A=this.getCanvas(),j={x:d.x-m.x,y:d.y-m.y};A.forEachObject(function(L){var z=L.getCenterPoint(),U=ae.fabric.util.degreesToRadians(w),ie=ae.fabric.util.rotatePoint(z,d,U);L.set({left:ie.x-j.x,top:ie.y-j.y,angle:(L.angle+w)%360}),L.setCoords()}),A.renderAll()}},{key:"rotate",value:function(d){var m=this.getCurrentAngle();return this.setAngle(m+d)}}]),f}(Hn),qI=KI;function eb(N){var S=tb();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function tb(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var nb=function(N){At(f,N);var S=eb(f);function f(v){var d;return Y(this,f),d=S.call(this,Re.FREE_DRAWING,v),d.width=12,d.oColor=new ae.fabric.Color("rgba(0, 0, 0, 0.5)"),d}return ne(f,[{key:"start",value:function(d){var m=this.getCanvas();m.isDrawingMode=!0,this.setBrush(d)}},{key:"setBrush",value:function(d){var m=this.getCanvas().freeDrawingBrush;d=d||{},this.width=d.width||this.width,d.color&&(this.oColor=new ae.fabric.Color(d.color)),m.width=this.width,m.color=this.oColor.toRgba()}},{key:"end",value:function(){var d=this.getCanvas();d.isDrawingMode=!1}}]),f}(Hn),rb=nb,mh=30,ib=2.7,ob=1.7,yh=180,sb=ae.fabric.util.createClass(ae.fabric.Line,{type:"line",initialize:function(S){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",S,f),this.arrowType=f.arrowType},_render:function(S){var f=this.calcLinePoints(),v=f.x1,d=f.y1,m=f.x2,w=f.y2,A={fromX:v,fromY:d,toX:m,toY:w};this.ctx=S,S.lineWidth=this.strokeWidth,this._renderBasicLinePath(A),this._drawDecoratorPath(A),this._renderStroke(S)},_renderBasicLinePath:function(S){var f=S.fromX,v=S.fromY,d=S.toX,m=S.toY;this.ctx.beginPath(),this.ctx.moveTo(f,v),this.ctx.lineTo(d,m)},_drawDecoratorPath:function(S){this._drawDecoratorPathType("head",S),this._drawDecoratorPathType("tail",S)},_drawDecoratorPathType:function(S,f){switch(this.arrowType[S]){case"triangle":this._drawTrianglePath(S,f);break;case"chevron":this._drawChevronPath(S,f);break;default:break}},_drawTrianglePath:function(S,f){var v=this.ctx.lineWidth*ob;this._drawChevronPath(S,f,v),this.ctx.closePath()},_drawChevronPath:function(S,f,v){var d=this,m=f.fromX,w=f.fromY,A=f.toX,j=f.toY,L=this.ctx;v||(v=this.ctx.lineWidth*ib);var z=S==="head"?[m,w]:[A,j],U=ce(z,2),ie=U[0],se=U[1],pe=S==="head"?[A,j]:[m,w],ue=ce(pe,2),ge=ue[0],Oe=ue[1],Je=Math.atan2(Oe-se,ge-ie)*yh/Math.PI,qe=function(je){return d.getRotatePosition(v,je,{x:ie,y:se})};L.moveTo.apply(L,B(qe(Je+mh))),L.lineTo(ie,se),L.lineTo.apply(L,B(qe(Je-mh)))},getRotatePosition:function(S,f,v){var d=f*Math.PI/yh,m=v.x,w=v.y;return[S*Math.cos(d)+m,S*Math.sin(d)+w]}}),ab=sb;function lb(N){var S=cb();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function cb(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var ub=function(N){At(f,N);var S=lb(f);function f(v){var d,m,w,A;return Y(this,f),A=S.call(this,Re.LINE,v),A._width=12,A._oColor=new ae.fabric.Color("rgba(0, 0, 0, 0.5)"),A._listeners={mousedown:Z()(d=A._onFabricMouseDown).call(d,Dt(A)),mousemove:Z()(m=A._onFabricMouseMove).call(m,Dt(A)),mouseup:Z()(w=A._onFabricMouseUp).call(w,Dt(A))},A}return ne(f,[{key:"setHeadOption",value:function(d){var m=d.arrowType,w=m===void 0?{head:null,tail:null}:m;this._arrowType=w}},{key:"start",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=this.getCanvas();m.defaultCursor="crosshair",m.selection=!1,this.setHeadOption(d),this.setBrush(d),m.forEachObject(function(w){w.set({evented:!1})}),m.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(d){var m=this.getCanvas().freeDrawingBrush;d=d||{},this._width=d.width||this._width,d.color&&(this._oColor=new ae.fabric.Color(d.color)),m.width=this._width,m.color=this._oColor.toRgba()}},{key:"end",value:function(){var d=this.getCanvas();d.defaultCursor="default",d.selection=!0,d.forEachObject(function(m){m.set({evented:!0})}),d.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(d){var m=this.getCanvas(),w=m.getPointer(d.e),A=w.x,j=w.y,L=[A,j,A,j];this._line=new ab(L,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(Jn.SELECTION_STYLE),m.add(this._line),m.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(Ee.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(d){var m=this.getCanvas(),w=m.getPointer(d.e);this._line.set({x2:w.x,y2:w.y}),this._line.setCoords(),m.renderAll()}},{key:"_onFabricMouseUp",value:function(){var d=this.getCanvas();this.fire(Ee.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,d.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var d=this.graphics.createObjectProperties(this._line),m=this._line,w=m.x1,A=m.x2,j=m.y1,L=m.y2;return $()({},d,{startPosition:{x:w,y:j},endPosition:{x:A,y:L}})}}]),f}(Hn),db=ub;function fb(N){var S=hb();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function hb(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var gb={fill:"#000000",left:0,top:0},pb={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},vb=500,mb=function(N){At(f,N);var S=fb(f);function f(v){var d,m,w,A,j,L;return Y(this,f),L=S.call(this,Re.TEXT,v),L._defaultStyles=gb,L._isSelected=!1,L._selectedObj={},L._editingObj={},L._listeners={mousedown:Z()(d=L._onFabricMouseDown).call(d,Dt(L)),select:Z()(m=L._onFabricSelect).call(m,Dt(L)),selectClear:Z()(w=L._onFabricSelectClear).call(w,Dt(L)),scaling:Z()(A=L._onFabricScaling).call(A,Dt(L)),textChanged:Z()(j=L._onFabricTextChanged).call(j,Dt(L))},L._textarea=null,L._ratio=1,L._lastClickTime=new Date().getTime(),L._editingObjInfos={},L.isPrevEditing=!1,L}return ne(f,[{key:"start",value:function(){var d=this,m=this.getCanvas();m.selection=!1,m.defaultCursor="text",m.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),m.forEachObject(function(w){w.type==="i-text"&&d.adjustOriginPosition(w,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var d=this,m=this.getCanvas();m.selection=!0,m.defaultCursor="default",m.forEachObject(function(w){w.type==="i-text"&&(w.text===""?m.remove(w):d.adjustOriginPosition(w,"end"))}),m.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(d,m){var w="center",A="center";m==="start"&&(w="left",A="top");var j=d.getPointByOrigin(w,A),L=j.x,z=j.y;d.set({left:L,top:z,originX:w,originY:A}),d.setCoords()}},{key:"add",value:function(d,m){var w=this;return new(Ce())(function(A){var j,L=w.getCanvas(),z=null,U=Jn.SELECTION_STYLE,ie=w._defaultStyles;w._setInitPos(m.position),m.styles&&(ie=$()(ie,m.styles)),oh()(m.autofocus)||(m.autofocus=!0),z=new ae.fabric.IText(d,ie),U=$()({},U,{originX:"left",originY:"top"}),z.set(U),z.on({mouseup:Z()(j=w._onFabricMouseUp).call(j,w)}),L.add(z),m.autofocus&&(z.enterEditing(),z.selectAll()),L.getActiveObject()||L.setActiveObject(z),w.isPrevEditing=!0,A(w.graphics.createObjectProperties(z))})}},{key:"change",value:function(d,m){var w=this;return new(Ce())(function(A){d.set("text",m),w.getCanvas().renderAll(),A()})}},{key:"setStyle",value:function(d,m){var w=this;return new(Ce())(function(A){J()(m,function(j,L){d[L]===j&&L!=="fontSize"&&(m[L]=pb[L]||"")},w),"textDecoration"in m&&$()(m,w._getTextDecorationAdaptObject(m.textDecoration)),d.set(m),w.getCanvas().renderAll(),A()})}},{key:"getText",value:function(d){return d.text}},{key:"setSelectedInfo",value:function(d,m){this._selectedObj=d,this._isSelected=m}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var d=this.getCanvasElement(),m=ye()(d.style.maxWidth,10),w=d.width;this._ratio=w/m}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(d){return{underline:d==="underline",linethrough:d==="line-through",overline:d==="overline"}}},{key:"_setInitPos",value:function(d){d=d||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=d.x,this._defaultStyles.top=d.y}},{key:"_onInput",value:function(){var d=this.getCanvasRatio(),m=this._editingObj,w=this._textarea.style;w.width="".concat(Math.ceil(m.width/d),"px"),w.height="".concat(Math.ceil(m.height/d),"px")}},{key:"_onKeyDown",value:function(){var d=this,m=this.getCanvasRatio(),w=this._editingObj,A=this._textarea.style;l()(function(){w.text(d._textarea.value),A.width="".concat(Math.ceil(w.width/m),"px"),A.height="".concat(Math.ceil(w.height/m),"px")},0)}},{key:"_onBlur",value:function(){var d=this.getCanvasRatio(),m=this._editingObj,w=this._editingObjInfos,A=this._textarea.value,j=m.width/d-w.width/d,L=m.height/d-w.height/d;if(d===1&&(j/=2,L/=2),this._textarea.style.display="none",m.set({left:w.left+j,top:w.top+L}),A.length){this.getCanvas().add(m);var z={id:ke(m),type:m.type,text:A};this.fire(Ee.TEXT_CHANGED,z)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(d){var m=d.target;m.fontSize=m.fontSize*m.scaleY,m.scaleX=1,m.scaleY=1}},{key:"_onFabricTextChanged",value:function(d){this.fire(Ee.TEXT_CHANGED,d.target)}},{key:"_onFabricSelectClear",value:function(d){var m=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(d.target,!1),m&&m.text===""&&this.getCanvas().remove(m)}},{key:"_onFabricSelect",value:function(d){this.isPrevEditing=!0,this.setSelectedInfo(d.target,!0)}},{key:"_onFabricMouseDown",value:function(d){var m=d.target;if(!(m&&!m.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(d)}}},{key:"_fireAddText",value:function(d){var m=d.target,w=d.e||{},A=this.getCanvas().getPointer(w);m||this.fire(Ee.ADD_TEXT,{originPosition:{x:A.x,y:A.y},clientPosition:{x:w.clientX||0,y:w.clientY||0}})}},{key:"_onFabricMouseUp",value:function(d){var m=d.target,w=new Date().getTime();this._isDoubleClick(w)&&!m.isEditing&&m.enterEditing(),m.isEditing&&this.fire(Ee.TEXT_EDITING),this._lastClickTime=w}},{key:"_isDoubleClick",value:function(d){return d-this._lastClickTime<vb}}]),f}(Hn),yb=mb;function Cb(N){var S=Ib();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function Ib(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var bb={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},Sb=function(N){At(f,N);var S=Cb(f);function f(v){var d,m,w,A;return Y(this,f),A=S.call(this,Re.ICON,v),A._oColor="#000000",A._pathMap=bb,A._type=null,A._iconColor=null,A._handlers={mousedown:Z()(d=A._onFabricMouseDown).call(d,Dt(A)),mousemove:Z()(m=A._onFabricMouseMove).call(m,Dt(A)),mouseup:Z()(w=A._onFabricMouseUp).call(w,Dt(A))},A}return ne(f,[{key:"setStates",value:function(d,m){this._type=d,this._iconColor=m}},{key:"start",value:function(){var d=this.getCanvas();d.selection=!1,d.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var d=this.getCanvas();d.selection=!0,d.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(d,m){var w=this;return new(Ce())(function(A,j){var L=w.getCanvas(),z=w._pathMap[d],U=Jn.SELECTION_STYLE,ie=z?w._createIcon(z):null;w._icon=ie,ie||j(Tt.invalidParameters),ie.set($()({type:"icon",fill:w._oColor},U,m,w.graphics.controlStyle)),L.add(ie).setActiveObject(ie),A(w.graphics.createObjectProperties(ie))})}},{key:"registerPaths",value:function(d){var m=this;J()(d,function(w,A){m._pathMap[A]=w},this)}},{key:"setColor",value:function(d,m){this._oColor=d,m&&m.get("type")==="icon"&&(m.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(d){return Ie()(d)}},{key:"_createIcon",value:function(d){return new ae.fabric.Path(d)}},{key:"_onFabricMouseDown",value:function(d){var m=this,w=this.getCanvas();this._startPoint=w.getPointer(d.e);var A=this._startPoint,j=A.x,L=A.y;this.add(this._type,{left:j,top:L,fill:this._iconColor}).then(function(){m.fire(Ee.ADD_OBJECT,m.graphics.createObjectProperties(m._icon)),w.on("mouse:move",m._handlers.mousemove),w.on("mouse:up",m._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(d){var m=this.getCanvas();if(this._icon){var w=m.getPointer(d.e),A=(w.x-this._startPoint.x)/this._icon.width,j=(w.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(A*2),scaleY:Math.abs(j*2)}),this._icon.setCoords(),m.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var d=this.getCanvas();this.fire(Ee.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,d.off("mouse:down",this._handlers.mousedown),d.off("mouse:move",this._handlers.mousemove),d.off("mouse:up",this._handlers.mouseup)}}]),f}(Hn),Db=Sb,xb=ae.fabric.util.createClass(ae.fabric.Image.filters.BlendImage,{applyTo:function(S){if(this.mask){var f=S.canvasEl,v=f.width,d=f.height,m=this._createCanvasOfMask(v,d),w=f.getContext("2d"),A=m.getContext("2d"),j=w.getImageData(0,0,v,d);this._drawMask(A,f,w),this._mapData(A,j,v,d),S.imageData=j}},_createCanvasOfMask:function(S,f){var v=ae.fabric.util.createCanvasElement();return v.width=S,v.height=f,v},_drawMask:function(S){var f=this.mask,v=f.getElement(),d=f.angle,m=f.left,w=f.scaleX,A=f.scaleY,j=f.top;S.save(),S.translate(m,j),S.rotate(d*Math.PI/180),S.scale(w,A),S.drawImage(v,-v.width/2,-v.height/2),S.restore()},_mapData:function(S,f,v,d){for(var m=f.data,w=f.height,A=f.width,j=m,L=A*w*4,z=S.getImageData(0,0,v,d).data,U=0;U<L;U+=4)j[U+3]=z[U]}}),Eb=xb,Mb=ae.fabric.util.createClass(ae.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),wb=Mb,_b=ae.fabric.util.createClass(ae.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),Tb=_b,Ab=ae.fabric.util.createClass(ae.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(S){S||(S={}),this.color=S.color||"#FFFFFF",this.threshold=S.threshold||45,this.x=S.x||null,this.y=S.y||null},applyTo:function(S){var f=S.canvasEl,v=f.getContext("2d"),d=v.getImageData(0,0,f.width,f.height),m=d.data,w=this.threshold,A=ae.fabric.Color.sourceFromHex(this.color),j,L;for(this.x&&this.y&&(A=this._getColor(d,this.x,this.y)),j=0,L=m.length;j<L;j+=4)this._isOutsideThreshold(m[j],A[0],w)||this._isOutsideThreshold(m[j+1],A[1],w)||this._isOutsideThreshold(m[j+2],A[2],w)||(m[j]=m[j+1]=m[j+2]=m[j+3]=0);v.putImageData(d,0,0)},_isOutsideThreshold:function(S,f,v){var d=S-f;return Math.abs(d)>v},_getColor:function(S,f,v){var d=[0,0,0,0],m=S.data,w=S.width,A=4,j=(w*v+f)*A;return d[0]=m[j],d[1]=m[j+1],d[2]=m[j+2],d[3]=m[j+3],d}}),Ob=Ab;function Nb(N){var S=Pb();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function Pb(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var $s=ae.fabric.Image.filters;$s.Mask=Eb,$s.Sharpen=wb,$s.Emboss=Tb,$s.ColorFilter=Ob;var kb=function(N){At(f,N);var S=Nb(f);function f(v){return Y(this,f),S.call(this,Re.FILTER,v)}return ne(f,[{key:"add",value:function(d,m){var w=this;return new(Ce())(function(A,j){var L=w._getSourceImage(),z=w.getCanvas(),U=w._getFilter(L,d);U||(U=w._createFilter(L,d,m)),U||j(Tt.invalidParameters),w._changeFilterValues(U,m),w._apply(L,function(){z.renderAll(),A({type:d,action:"add",options:m})})})}},{key:"remove",value:function(d){var m=this;return new(Ce())(function(w,A){var j=m._getSourceImage(),L=m.getCanvas(),z=m.getOptions(d);j.filters.length||A(Tt.unsupportedOperation),m._removeFilter(j,d),m._apply(j,function(){L.renderAll(),w({type:d,action:"remove",options:z})})})}},{key:"hasFilter",value:function(d){return!!this._getFilter(this._getSourceImage(),d)}},{key:"getOptions",value:function(d){var m=this._getSourceImage(),w=this._getFilter(m,d);return w?$()({},w.options):null}},{key:"_changeFilterValues",value:function(d,m){J()(m,function(w,A){G()(d[A])||(d[A]=w)}),J()(d.options,function(w,A){G()(m[A])||(d.options[A]=m[A])})}},{key:"_apply",value:function(d,m){d.filters.push();var w=d.applyFilters();w&&m()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(d,m,w){var A,j=this._getFabricFilterType(m),L=ae.fabric.Image.filters[j];return L&&(A=new L(w),A.options=w,d.filters.push(A)),A}},{key:"_getFilter",value:function(d,m){var w=null;if(d){var A=this._getFabricFilterType(m),j=d.filters.length,L,z;for(z=0;z<j;z+=1)if(L=d.filters[z],L.type===A){w=L;break}}return w}},{key:"_removeFilter",value:function(d,m){var w,A=this._getFabricFilterType(m);d.filters=Ni()(w=d.filters).call(w,function(j){return j.type!==A})}},{key:"_getFabricFilterType",value:function(d){return d.charAt(0).toUpperCase()+b()(d).call(d,1)}}]),f}(Hn),Rb=kb,Lb=r(1801),Sr=r.n(Lb),Ch={pixelate:"blocksize",blur:"blur"},ac={x:"width",y:"height"},jb=DC(Ch),Po=null;function Zs(N){var S=To(N,"patternSourceCanvas"),f=S.patternSourceCanvas,v=f.getObjects(),d=ce(v,1),m=d[0];return m}function Fb(N){var S=N.angle,f=N.flipX,v=N.flipY,d=Zs(N),m=Qb(N),w=m.right,A=m.bottom,j=m.width,L=m.height,z=(j-N.width)/2,U=(L-N.height)/2,ie=N.left-N.width/2-z,se=N.top-N.height/2-U,pe=j/2-z,ue=L/2-U,ge=Math.max(j,L)+Math.max(z,U),Oe=Bb({shapeObj:N,left:pe,top:ue,width:j,height:L,cropX:ie,cropY:se,flipX:f,flipY:v,right:w,bottom:A}),Je=ce(Oe,4);pe=Je[0],ue=Je[1],j=Je[2],L=Je[3],d.set({angle:f===v?-S:S,left:pe,top:ue,width:j,height:L,cropX:ie,cropY:se,flipX:f,flipY:v}),nc(d,{fillImageMaxSize:ge})}function lc(N){var S;return cr()(S=N.filters).call(S,function(f){var v=De()(f),d=ce(v,1),m=d[0];return H({},jb[m],f[m])})}function Bb(N){var S=N.shapeObj,f=N.left,v=N.top,d=N.width,m=N.height,w=N.cropX,A=N.cropY,j=N.flipX,L=N.flipY,z=N.right,U=N.bottom,ie=function(tt,je,Mt,an){return Wb({type:tt,outDistance:je,shapeObj:S,flipX:j,flipY:L,left:Mt,top:an})},se=d,pe=m,ue=Hb(ie,{left:f,top:v,width:d,height:m,cropX:w,cropY:A}),ge=ce(ue,4);f=ge[0],v=ge[1],d=ge[2],m=ge[3];var Oe=zb(ie,{left:f,top:v,insideCanvasRealImageWidth:d,insideCanvasRealImageHeight:m,right:z,bottom:U,cropX:w,cropY:A,originalWidth:se,originalHeight:pe}),Je=ce(Oe,4);return f=Je[0],v=Je[1],d=Je[2],m=Je[3],[f,v,d,m]}function zb(N,S){var f=S.left,v=S.top,d=S.insideCanvasRealImageWidth,m=S.insideCanvasRealImageHeight,w=S.right,A=S.bottom,j=S.cropX,L=S.cropY,z=S.originalWidth,U=S.originalHeight,ie=d,se=m,pe=Po,ue=pe.width,ge=pe.height;w>ue&&j>0&&(ie=z-Math.abs(w-ue)),A>ge&&L>0&&(se=U-Math.abs(A-ge));var Oe={x:(d-ie)/2,y:(m-se)/2};return J()(["x","y"],function(Je){var qe=Oe[Je];if(qe>0){var tt=N(Je,qe,f,v),je=ce(tt,2);f=je[0],v=je[1]}}),[f,v,ie,se]}function Hb(N,S){var f=S.left,v=S.top,d=S.width,m=S.height,w=S.cropX,A=S.cropY,j={width:d,height:m};return J()(["x","y"],function(L){var z=L==="x"?w:A,U=j[ac[L]],ie=Po[ac[L]];if(U>ie){var se=(U-ie)/2;j[ac[L]]=ie;var pe=N(L,se,f,v),ue=ce(pe,2);f=ue[0],v=ue[1]}if(z<0){var ge=N(L,z,f,v),Oe=ce(ge,2);f=Oe[0],v=Oe[1]}}),[f,v,j.width,j.height]}function Ih(N,S,f){var v=bh(N),d=Dh(v,N.angle,S);f.add(d);var m={fill:new ae.fabric.Pattern({source:f.getElement(),repeat:"no-repeat"})};return nc(m,{patternSourceCanvas:f}),m}function Ub(N){var S=N.getObjects(),f=ce(S,1),v=f[0],d=To(v,"fillImageMaxSize"),m=d.fillImageMaxSize;m=Math.max(1,m),N.setDimensions({width:m,height:m}),N.renderAll()}function Vb(N,S){var f=To(N,"patternSourceCanvas"),v=f.patternSourceCanvas,d=v.getObjects(),m=ce(d,1),w=m[0],A=lc(w);v.remove(w);var j=bh(S,!0),L=Dh(j,S.angle,A);v.add(L)}function bh(N){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!Po||S)&&(Po=N.toCanvasElement()),Po}function Wb(N){var S=N.type,f=N.shapeObj,v=N.outDistance,d=N.left,m=N.top,w=N.flipX,A=N.flipY,j=Sh(f),L=[[1,2],[0,3],[0,3],[1,2]],z=Yb(S,j,L),U=Xb(S,j,z),ie=z.startPointIndex,se=Gb({outDistance:v,startPointIndex:ie,flipX:w,flipY:A,reatAngles:U});return[d+se.left,m+se.top]}function Gb(N){var S=N.outDistance,f=N.startPointIndex,v=N.flipX,d=N.flipY,m=N.reatAngles,w=S*Math.cos(m[0]*Math.PI/180),A=S*Math.cos(m[1]*Math.PI/180),j=f===2||f===3,L={top:j?w:A,left:j?A:w};return $b(f,v,d)&&(L.left=L.left*-1),Zb(f,v,d)&&(L.top=L.top*-1),L}function Yb(N,S,f){var v=0,d=0;J()(S,function(j,L){j[N]<v&&(v=j[N],d=L)});var m=ce(f[d],2),w=m[0],A=m[1];return{startPointIndex:d,endPointIndex1:w,endPointIndex2:A}}function Xb(N,S,f){var v,d=f.startPointIndex,m=f.endPointIndex1,w=f.endPointIndex2,A=N==="x"?180:270;return cr()(v=[m,w]).call(v,function(j){var L=S[d],z=S[j],U=L.y-z.y,ie=L.x-z.x;return Math.atan2(U,ie)*180/Math.PI-A})}function $b(N,S,f){return(!S&&f||!S&&!f)&&N===0||(S&&f||S&&!f)&&N===1||(!S&&!f||!S&&f)&&N===2||(S&&!f||S&&f)&&N===3}function Zb(N,S,f){return(S&&!f||!S&&!f)&&N===0||(!S&&!f||S&&!f)&&N===1||(S&&f||!S&&f)&&N===2||(!S&&f||S&&f)&&N===3}function Sh(N){return[N.getPointByOrigin("left","top"),N.getPointByOrigin("right","top"),N.getPointByOrigin("left","bottom"),N.getPointByOrigin("right","bottom")]}function Qb(N){var S=Sh(N),f=ce(S,4),v=f[0],d=v.x,m=v.y,w=f[1],A=w.x,j=w.y,L=f[2],z=L.x,U=L.y,ie=f[3],se=ie.x,pe=ie.y,ue=Math.min(d,A,z,se),ge=Math.min(m,j,U,pe),Oe=Math.max(d,A,z,se),Je=Math.max(m,j,U,pe);return{left:ue,top:ge,right:Oe,bottom:Je,width:Oe-ue,height:Je-ge}}function Dh(N,S,f){var v,d=new ae.fabric.Image(N);return J()($().apply(void 0,V()(v=[{}]).call(v,B(f))),function(m,w){var A=xC(w),j=new ae.fabric.Image.filters[A](H({},Ch[w],m));d.filters.push(j)}),d.applyFilters(),nc(d,{originalAngle:S,fillImageMaxSize:Math.max(d.width,d.height)}),Sr().adjustOriginToCenter(d),d}function Jb(N){var S=Kb();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function Kb(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var xh=$()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},Vt),qb="rect",eS=20,tS=20;function Eh(N,S,f){var v=Ie()(N),d=Yf(Ie()(N)),m=v;v.color&&(m=v.color);var w=null;if(d==="filter"){var A=f();w=Ih(S,Ni()(v),A)}else w={fill:m};return $()({},N,w)}var nS=function(N){At(f,N);var S=Jb(f);function f(v){var d,m,w,A,j,L;return Y(this,f),L=S.call(this,Re.SHAPE,v),L._shapeObj=null,L._type=qb,L._options=$()({},xh),L._isSelected=!1,L._startPoint={},L._withShiftKey=!1,L._handlers={mousedown:Z()(d=L._onFabricMouseDown).call(d,Dt(L)),mousemove:Z()(m=L._onFabricMouseMove).call(m,Dt(L)),mouseup:Z()(w=L._onFabricMouseUp).call(w,Dt(L)),keydown:Z()(A=L._onKeyDown).call(A,Dt(L)),keyup:Z()(j=L._onKeyUp).call(j,Dt(L))},L}return ne(f,[{key:"start",value:function(){var d=this.getCanvas();this._isSelected=!1,d.defaultCursor="crosshair",d.selection=!1,d.uniformScaling=!0,d.on({"mouse:down":this._handlers.mousedown}),ae.fabric.util.addListener(document,"keydown",this._handlers.keydown),ae.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var d=this.getCanvas();this._isSelected=!1,d.defaultCursor="default",d.selection=!0,d.uniformScaling=!1,d.off({"mouse:down":this._handlers.mousedown}),ae.fabric.util.removeListener(document,"keydown",this._handlers.keydown),ae.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(d,m){this._type=d,m&&(this._options=$()(this._options,m))}},{key:"add",value:function(d,m){var w=this;return new(Ce())(function(A){var j=w.getCanvas(),L=w._extendOptions(m),z=w._createInstance(d,L),U=w.graphics.createObjectProperties(z);w._bindEventOnShape(z),j.add(z).setActiveObject(z),w._resetPositionFillFilter(z),A(U)})}},{key:"change",value:function(d,m){var w=this;return new(Ce())(function(A,j){Xf(d)||j(Tt.unsupportedType);var L=Yf(Ie()(m))==="filter",z=w.graphics,U=z.canvasImage,ie=z.createStaticCanvas;d.set(L?Eh(m,U,ie):m),L&&w._resetPositionFillFilter(d),w.getCanvas().renderAll(),A()})}},{key:"makeFillPropertyForUserEvent",value:function(d){var m=rc(d),w={};if(m===Ae.FILTER){var A=Zs(d),j=lc(A);w.type=m,w.filter=j}else w.type=Ae.COLOR,w.color=Ie()(d)||"transparent";return w}},{key:"processForCopiedObject",value:function(d,m){if(this._bindEventOnShape(d),rc(d)==="filter"){var w=Zs(m),A=lc(w),j=this.graphics.createStaticCanvas();d.set(Ih(this.graphics.canvasImage,A,j)),this._resetPositionFillFilter(d)}}},{key:"_createInstance",value:function(d,m){var w;switch(d){case"rect":w=new ae.fabric.Rect(m);break;case"circle":w=new ae.fabric.Ellipse($()({type:"circle"},m));break;case"triangle":w=new ae.fabric.Triangle(m);break;default:w={}}return w}},{key:"_extendOptions",value:function(d){var m=Jn.SELECTION_STYLE,w=this.graphics,A=w.canvasImage,j=w.createStaticCanvas;return d=$()({},xh,this._options,m,d),Eh(d,A,j)}},{key:"_bindEventOnShape",value:function(d){var m=this,w=this.getCanvas();d.on({added:function(){m._shapeObj=this,Sr().setOrigins(m._shapeObj)},selected:function(){m._isSelected=!0,m._shapeObj=this,w.uniformScaling=!0,w.defaultCursor="default",Sr().setOrigins(m._shapeObj)},deselected:function(){m._isSelected=!1,m._shapeObj=null,w.defaultCursor="crosshair",w.uniformScaling=!1},modified:function(){var j=m._shapeObj;Sr().adjustOriginToCenter(j),Sr().setOrigins(j)},modifiedInGroup:function(j){m._fillFilterRePositionInGroupSelection(d,j)},moving:function(){m._resetPositionFillFilter(this)},rotating:function(){m._resetPositionFillFilter(this)},scaling:function(j){var L=w.getPointer(j.e),z=m._shapeObj;w.setCursor("crosshair"),Sr().resize(z,L,!0),m._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(d){if(d.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var m=this.getCanvas();this._startPoint=m.getPointer(d.e),m.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(d){var m=this,w=this.getCanvas(),A=w.getPointer(d.e),j=this._startPoint.x,L=this._startPoint.y,z=j-A.x,U=L-A.y,ie=this._shapeObj;ie?(this._shapeObj.set({isRegular:this._withShiftKey}),Sr().resize(ie,A),w.renderAll(),this._resetPositionFillFilter(ie)):this.add(this._type,{left:j,top:L,width:z,height:U}).then(function(se){m.fire(Ee.ADD_OBJECT,se)})}},{key:"_onFabricMouseUp",value:function(){var d=this,m=this.getCanvas(),w=this._startPoint.x,A=this._startPoint.y,j=this._shapeObj;j?j&&(Sr().adjustOriginToCenter(j),this.fire(Ee.OBJECT_ADDED,this.graphics.createObjectProperties(j))):this.add(this._type,{left:w,top:A,width:eS,height:tS}).then(function(L){d.fire(Ee.ADD_OBJECT,L)}),m.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(d){d.keyCode===zt.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(d){d.keyCode===zt.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(d){if(rc(d)==="filter"){var m=To(d,"patternSourceCanvas"),w=m.patternSourceCanvas,A=Zs(d),j=To(A,"originalAngle"),L=j.originalAngle;this.graphics.canvasImage.angle!==L&&Vb(d,this.graphics.canvasImage);var z=d.originX,U=d.originY;Sr().adjustOriginToCenter(d),d.width*=d.scaleX,d.height*=d.scaleY,d.rx*=d.scaleX,d.ry*=d.scaleY,d.scaleX=1,d.scaleY=1,Fb(d),SC(d,{originX:z,originY:U}),Ub(w)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(d,m){(m.scaleX!==1||m.scaleY!==1)&&m.addWithUpdate();var w=d.angle,A=d.left,j=d.top;ae.fabric.util.addTransformToObject(d,m.calcTransformMatrix()),this._resetPositionFillFilter(d),d.set({angle:w,left:A,top:j})}}]),f}(Hn);function rS(N){var S=iS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function iS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var cc=10,Mh={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},uc={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},dc={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},Qs=1,wh=Ee.ZOOM_CHANGED,oS=Ee.ADD_TEXT,sS=Ee.TEXT_EDITING,aS=Ee.OBJECT_MODIFIED,_h=Ee.KEY_DOWN,Th=Ee.KEY_UP,lS=Ee.HAND_STARTED,cS=Ee.HAND_STOPPED,uS=function(N){At(f,N);var S=rS(f);function f(v){var d,m,w,A,j,L,z,U,ie,se,pe,ue,ge;Y(this,f),ge=S.call(this,Re.ZOOM,v),ge.zoomArea=null,ge._startPoint=null,ge._centerPoints=[],ge.zoomLevel=Qs,ge.zoomMode=hn.DEFAULT,ge._listeners={startZoom:Z()(d=ge._onMouseDownWithZoomMode).call(d,Dt(ge)),moveZoom:Z()(m=ge._onMouseMoveWithZoomMode).call(m,Dt(ge)),stopZoom:Z()(w=ge._onMouseUpWithZoomMode).call(w,Dt(ge)),startHand:Z()(A=ge._onMouseDownWithHandMode).call(A,Dt(ge)),moveHand:Z()(j=ge._onMouseMoveWithHandMode).call(j,Dt(ge)),stopHand:Z()(L=ge._onMouseUpWithHandMode).call(L,Dt(ge)),zoomChanged:Z()(z=ge._changeScrollState).call(z,Dt(ge)),keydown:Z()(U=ge._startHandModeWithSpaceBar).call(U,Dt(ge)),keyup:Z()(ie=ge._endHandModeWithSpaceBar).call(ie,Dt(ge))};var Oe=ge.getCanvas();return ge.aspectRatio=Oe.width/Oe.height,ge._verticalScroll=new ae.fabric.Rect(Mh),ge._horizontalScroll=new ae.fabric.Rect(Mh),Oe.on(wh,ge._listeners.zoomChanged),ge.graphics.on(oS,Z()(se=ge._startTextEditingHandler).call(se,Dt(ge))),ge.graphics.on(sS,Z()(pe=ge._startTextEditingHandler).call(pe,Dt(ge))),ge.graphics.on(aS,Z()(ue=ge._stopTextEditingHandler).call(ue,Dt(ge))),ge}return ne(f,[{key:"attachKeyboardZoomEvents",value:function(){ae.fabric.util.addListener(document,_h,this._listeners.keydown),ae.fabric.util.addListener(document,Th,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){ae.fabric.util.removeListener(document,_h,this._listeners.keydown),ae.fabric.util.removeListener(document,Th,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(d){this.withSpace||this.isTextEditing||d.keyCode===zt.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(d){d.keyCode===zt.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=hn.ZOOM;var d=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new ae.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),d.discardActiveObject(),d.add(this.zoomArea),d.on("mouse:down",this._listeners.startZoom),d.selection=!1,d.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=hn.DEFAULT;var d=this.getCanvas(),m=this._listeners,w=m.startZoom,A=m.moveZoom,j=m.stopZoom;d.selection=!0,d.defaultCursor="auto",d.off({"mouse:down":w,"mouse:move":A,"mouse:up":j}),this._changeObjectsEventedState(!0),d.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=hn.HAND;var d=this.getCanvas();this._changeObjectsEventedState(!1),d.discardActiveObject(),d.off("mouse:down",this._listeners.startHand),d.on("mouse:down",this._listeners.startHand),d.selection=!1,d.defaultCursor="grab",d.fire(lS)}},{key:"endHandMode",value:function(){this.zoomMode=hn.DEFAULT;var d=this.getCanvas();this._changeObjectsEventedState(!0),d.off("mouse:down",this._listeners.startHand),d.selection=!0,d.defaultCursor="auto",this._startHandPoint=null,d.fire(cS)}},{key:"_onMouseDownWithZoomMode",value:function(d){var m=d.target,w=d.e;if(!m){var A=this.getCanvas();A.selection=!1,this._startPoint=A.getPointer(w),this.zoomArea.set({width:0,height:0});var j=this._listeners,L=j.moveZoom,z=j.stopZoom;A.on({"mouse:move":L,"mouse:up":z})}}},{key:"_onMouseMoveWithZoomMode",value:function(d){var m=d.e,w=this.getCanvas(),A=w.getPointer(m),j=A.x,L=A.y,z=this.zoomArea,U=this._startPoint,ie=Math.abs(j-U.x),se=Math.abs(L-U.y);ie+se>cc&&(w.remove(z),z.set(this._calcRectDimensionFromPoint(j,L)),w.add(z))}},{key:"_calcRectDimensionFromPoint",value:function(d,m){var w=this.getCanvas(),A=w.getWidth(),j=w.getHeight(),L=this._startPoint,z=L.x,U=L.y,ie=Math.min,se=ie(z,d),pe=ie(U,m),ue=it(d,z,A)-se,ge=it(m,U,j)-pe;return{left:se,top:pe,width:ue,height:ge}}},{key:"_onMouseUpWithZoomMode",value:function(){var d=this.zoomLevel,m=this.zoomArea,w=this._listeners,A=w.moveZoom,j=w.stopZoom,L=this.getCanvas(),z=this._getCenterPoint(),U=z.x,ie=z.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:U,y:ie,prevZoomLevel:d,zoomLevel:d+1}),d+=1,L.zoomToPoint({x:U,y:ie},d),this._fireZoomChanged(L,d),this.zoomLevel=d),L.off({"mouse:move":A,"mouse:up":j}),L.remove(m),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var d=this.zoomArea,m=d.left,w=d.top,A=d.width,j=d.height,L=this._startPoint,z=L.x,U=L.y,ie=this.aspectRatio;return A<cc&&j<cc?{x:z,y:U}:A>j?{x:m+ie*j/2,y:w+j/2}:{x:m+A/2,y:w+A/ie/2}}},{key:"zoom",value:function(d){for(var m=d.x,w=d.y,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,j=this.getCanvas(),L=this._centerPoints,z=L.length-1;z>=0&&!(L[z].zoomLevel<A);z-=1){var U=L.pop(),ie=U.x,se=U.y,pe=U.prevZoomLevel;j.zoomToPoint({x:ie,y:se},pe),this.zoomLevel=pe}j.zoomToPoint({x:m,y:w},A),this._isDefaultZoomLevel(A)||this._centerPoints.push({x:m,y:w,zoomLevel:A,prevZoomLevel:this.zoomLevel}),this.zoomLevel=A,this._fireZoomChanged(j,A)}},{key:"zoomOut",value:function(){var d=this._centerPoints;if(d.length){var m=this.getCanvas(),w=d.pop(),A=w.x,j=w.y,L=w.prevZoomLevel;this._isDefaultZoomLevel(L)?m.setViewportTransform([1,0,0,1,0,0]):m.zoomToPoint({x:A,y:j},L),this.zoomLevel=L,this._fireZoomChanged(m,this.zoomLevel)}}},{key:"resetZoom",value:function(){var d=this.getCanvas();d.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=Qs,this._centerPoints=[],this._fireZoomChanged(d,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(d){var m=d.x,w=d.y,A=this._centerPoints;if(A.length){var j=this.getCanvas(),L=this.zoomLevel,z=A.pop(),U=z.x,ie=z.y,se=z.prevZoomLevel,pe=U-m,ue=ie-w;j.zoomToPoint({x:U,y:ie},se),j.zoomToPoint({x:pe,y:ue},L),A.push({x:pe,y:ue,prevZoomLevel:se,zoomLevel:L}),this._fireZoomChanged(j,L)}}},{key:"_onMouseDownWithHandMode",value:function(d){var m=d.target,w=d.e;if(!m){var A=this.getCanvas();if(!(this.zoomLevel<=Qs)){A.selection=!1,this._startHandPoint=A.getPointer(w);var j=this._listeners,L=j.moveHand,z=j.stopHand;A.on({"mouse:move":L,"mouse:up":z})}}}},{key:"_onMouseMoveWithHandMode",value:function(d){var m=d.e,w=this.getCanvas(),A=w.getPointer(m),j=A.x,L=A.y,z=j-this._startHandPoint.x,U=L-this._startHandPoint.y;this._movePointOfZoom({x:z,y:U})}},{key:"_onMouseUpWithHandMode",value:function(){var d=this.getCanvas(),m=this._listeners,w=m.moveHand,A=m.stopHand;d.off({"mouse:move":w,"mouse:up":A}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(d){var m=d.viewport,w=d.zoomLevel,A=this.getCanvas();if(A.remove(this._verticalScroll),A.remove(this._horizontalScroll),!this._isDefaultZoomLevel(w)){var j=A.width,L=A.height,z=m.tl,U=m.tr,ie=m.bl,se=U.x-z.x,pe=ie.y-z.y,ue=se*se/j,ge=pe*dc.SIZE,Oe=it(z.x+z.x/j*se,z.x,U.x-ue),Je=pe*dc.MARGIN,qe=pe*dc.BORDER_RADIUS;this._horizontalScroll.set({left:Oe,top:ie.y-ge-Je,width:ue,height:ge,rx:qe,ry:qe});var tt=se*uc.SIZE,je=pe*pe/L,Mt=it(z.y+z.y/L*pe,U.y,ie.y-je),an=se*uc.MARGIN,Tn=se*uc.BORDER_RADIUS;this._verticalScroll.set({left:U.x-tt-an,top:Mt,width:tt,height:je,rx:Tn,ry:Tn}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,m=this.getCanvas();m.forEachObject(function(w){w.evented=d})}},{key:"_addScrollBar",value:function(){var d=this,m=this.getCanvas();m.add(this._horizontalScroll),m.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=l()(function(){m.remove(d._horizontalScroll),m.remove(d._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(d){return d===Qs}},{key:"_fireZoomChanged",value:function(d,m){d.fire(wh,{viewport:d.calcViewportBoundaries(),zoomLevel:m})}},{key:"mode",get:function(){return this.zoomMode}}]),f}(Hn),dS=uS,Ah=Ws.create,Oh=Ws.types,fS=function(){function N(S){Y(this,N),this.name=S}return ne(N,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(Ah(Oh.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(Ah(Oh.UN_IMPLEMENTATION,"stop"))}}]),N}(),Vr=fS;function hS(N){var S=gS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function gS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var pS=function(N){At(f,N);var S=hS(f);function f(){return Y(this,f),S.call(this,Et.CROPPER)}return ne(f,[{key:"start",value:function(d){var m=d.getComponent(Re.CROPPER);m.start()}},{key:"end",value:function(d){var m=d.getComponent(Re.CROPPER);m.end()}}]),f}(Vr),vS=pS;function mS(N){var S=yS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function yS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var CS=function(N){At(f,N);var S=mS(f);function f(){return Y(this,f),S.call(this,Et.FREE_DRAWING)}return ne(f,[{key:"start",value:function(d,m){var w=d.getComponent(Re.FREE_DRAWING);w.start(m)}},{key:"end",value:function(d){var m=d.getComponent(Re.FREE_DRAWING);m.end()}}]),f}(Vr),IS=CS;function bS(N){var S=SS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function SS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var DS=function(N){At(f,N);var S=bS(f);function f(){return Y(this,f),S.call(this,Et.LINE_DRAWING)}return ne(f,[{key:"start",value:function(d,m){var w=d.getComponent(Re.LINE);w.start(m)}},{key:"end",value:function(d){var m=d.getComponent(Re.LINE);m.end()}}]),f}(Vr),xS=DS;function ES(N){var S=MS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function MS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var wS=function(N){At(f,N);var S=ES(f);function f(){return Y(this,f),S.call(this,Et.SHAPE)}return ne(f,[{key:"start",value:function(d){var m=d.getComponent(Re.SHAPE);m.start()}},{key:"end",value:function(d){var m=d.getComponent(Re.SHAPE);m.end()}}]),f}(Vr),_S=wS;function TS(N){var S=AS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function AS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var OS=function(N){At(f,N);var S=TS(f);function f(){return Y(this,f),S.call(this,Et.TEXT)}return ne(f,[{key:"start",value:function(d){var m=d.getComponent(Re.TEXT);m.start()}},{key:"end",value:function(d){var m=d.getComponent(Re.TEXT);m.end()}}]),f}(Vr),NS=OS;function PS(N){var S=kS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function kS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var RS=function(N){At(f,N);var S=PS(f);function f(){return Y(this,f),S.call(this,Et.ICON)}return ne(f,[{key:"start",value:function(d){var m=d.getComponent(Re.ICON);m.start()}},{key:"end",value:function(d){var m=d.getComponent(Re.ICON);m.end()}}]),f}(Vr),LS=RS;function jS(N){var S=FS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function FS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var BS=function(N){At(f,N);var S=jS(f);function f(){return Y(this,f),S.call(this,Et.ZOOM)}return ne(f,[{key:"start",value:function(d){var m=d.getComponent(Re.ZOOM);m.start()}},{key:"end",value:function(d){var m=d.getComponent(Re.ZOOM);m.end()}}]),f}(Vr),zS=BS,Nh=null;function Ph(N){Nh=N}function HS(){return Nh}function fc(N,S){var f;if(N.type==="activeSelection"){var v;f=cr()(v=N.getObjects()).call(v,function(d){var m=d.angle,w=d.left,A=d.top,j=d.scaleX,L=d.scaleY,z=d.width,U=d.height;ae.fabric.util.addTransformToObject(d,N.calcTransformMatrix());var ie=S(d);return d.set({angle:m,left:w,top:A,width:z,height:U,scaleX:j,scaleY:L}),ie})}else f=[S(N)];return f}function hc(N,S,f){return f?{id:N,width:S.width,height:S.height,top:S.top,left:S.left,angle:S.angle,scaleX:S.scaleX,scaleY:S.scaleY}:$()({id:N},S)}function US(N){var S=VS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function VS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var WS=function(N){At(f,N);var S=US(f);function f(v){var d;return Y(this,f),d=S.call(this,Re.RESIZE,v),d._dimensions=null,d._originalDimensions=null,d}return ne(f,[{key:"getCurrentDimensions",value:function(){var d=this.getCanvasImage();if(!this._dimensions&&d){var m=d.width,w=d.height;this._dimensions={width:m,height:w}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(d){this._originalDimensions=d}},{key:"resize",value:function(d){var m=this.getCanvasImage(),w=m.width,A=m.height,j=m.scaleX,L=m.scaleY,z=d.width,U=d.height,ie={scaleX:z?z/w:j,scaleY:U?U/A:L};return(j!==ie.scaleX||L!==ie.scaleY)&&(m.set(ie).setCoords(),this._dimensions={width:m.width*m.scaleX,height:m.height*m.scaleY}),this.adjustCanvasDimensionBase(),Ce().resolve()}},{key:"start",value:function(){var d=this.getCurrentDimensions();this.setOriginalDimensions(d)}},{key:"end",value:function(){}}]),f}(Hn),GS=WS;function YS(N){var S=XS();return function(){var v=Qe(N),d;if(S){var m=Qe(this).constructor;d=we()(v,arguments,m)}else d=v.apply(this,arguments);return Ot(this,d)}}function XS(){if(typeof Reflect>"u"||!we()||we().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(we()(Boolean,[],function(){})),!0}catch{return!1}}var $S=function(N){At(f,N);var S=YS(f);function f(){return Y(this,f),S.call(this,Et.RESIZE)}return ne(f,[{key:"start",value:function(d){var m=d.getComponent(Re.RESIZE);m.start()}},{key:"end",value:function(d){var m=d.getComponent(Re.RESIZE);m.end()}}]),f}(Vr),ZS=$S,QS=1e3,JS=800,Js=10,KS={cssOnly:!0},qS={backstoreOnly:!0},kh=function(){function N(S){var f,v,d,m,w,A,j,L,z,U,ie,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=se.cssMaxWidth,ue=se.cssMaxHeight;Y(this,N),this.canvasImage=null,this.cssMaxWidth=pe||QS,this.cssMaxHeight=ue||JS,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=Et.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:Z()(f=this._onMouseDown).call(f,this),onObjectAdded:Z()(v=this._onObjectAdded).call(v,this),onObjectRemoved:Z()(d=this._onObjectRemoved).call(d,this),onObjectMoved:Z()(m=this._onObjectMoved).call(m,this),onObjectScaled:Z()(w=this._onObjectScaled).call(w,this),onObjectModified:Z()(A=this._onObjectModified).call(A,this),onObjectRotated:Z()(j=this._onObjectRotated).call(j,this),onObjectSelected:Z()(L=this._onObjectSelected).call(L,this),onPathCreated:Z()(z=this._onPathCreated).call(z,this),onSelectionCleared:Z()(U=this._onSelectionCleared).call(U,this),onSelectionCreated:Z()(ie=this._onSelectionCreated).call(ie,this)},this._setObjectCachingToFalse(),this._setCanvasElement(S),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return ne(N,[{key:"destroy",value:function(){var f=this._canvas.wrapperEl;this._canvas.clear(),f.parentNode.removeChild(f),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var f=this.getComponent(Re.ZOOM);f.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var f=this.getComponent(Re.ZOOM);f.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(f){var v,d=[];ph()(f)?d=f:d.push(f),(v=this._canvas).add.apply(v,B(d))}},{key:"contains",value:function(f){return this._canvas.contains(f)}},{key:"getObjects",value:function(){var f;return b()(f=this._canvas.getObjects()).call(f)}},{key:"getObject",value:function(f){return this._objects[f]}},{key:"remove",value:function(f){this._canvas.remove(f)}},{key:"removeAll",value:function(f){var v,d=this._canvas,m=b()(v=d.getObjects()).call(v);return d.remove.apply(d,B(this._canvas.getObjects())),f&&d.clear(),m}},{key:"removeObjectById",value:function(f){var v=[],d=this._canvas,m=this.getObject(f),w=m&&m.isType("group")&&!m.isEmpty();return w?(d.discardActiveObject(),m.forEachObject(function(A){v.push(A),d.remove(A)})):d.contains(m)&&(v.push(m),d.remove(m)),v}},{key:"getObjectId",value:function(f){var v=null;for(v in this._objects)if(this._objects.hasOwnProperty(v)&&f===this._objects[v])return v;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var f=this.getActiveObject(),v=f.type,d=f.left,m=f.top,w=v==="activeSelection";if(w){var A=new ae.fabric.Group(B(f.getObjects()),{left:d,top:m});return this._addFabricObject(A)}return this.getObjectId(f)}},{key:"isReadyRemoveObject",value:function(){var f=this.getActiveObject();return f&&!f.isEditing}},{key:"getActiveObjects",value:function(){var f=this._canvas._activeObject;return f&&f.type==="activeSelection"?f:null}},{key:"getActiveSelectionFromObjects",value:function(f){var v=this.getCanvas();return new ae.fabric.ActiveSelection(f,{canvas:v})}},{key:"setActiveObject",value:function(f){this._canvas.setActiveObject(f)}},{key:"setCropSelectionStyle",value:function(f){this.cropSelectionStyle=f}},{key:"getComponent",value:function(f){return this._componentMap[f]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(f,v){if(this._isSameDrawingMode(f))return!0;this.stopDrawingMode();var d=this._getDrawingModeInstance(f);return d&&d.start&&(d.start(this,v),this._drawingMode=f),!!d}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(Et.NORMAL)){var f=this._getDrawingModeInstance(this.getDrawingMode());f&&f.end&&f.end(this),this._drawingMode=Et.NORMAL}}},{key:"zoom",value:function(f,v){var d=f.x,m=f.y,w=this.getComponent(Re.ZOOM);w.zoom({x:d,y:m},v)}},{key:"getZoomMode",value:function(){var f=this.getComponent(Re.ZOOM);return f.mode}},{key:"startZoomInMode",value:function(){var f=this.getComponent(Re.ZOOM);f.startZoomInMode()}},{key:"endZoomInMode",value:function(){var f=this.getComponent(Re.ZOOM);f.endZoomInMode()}},{key:"zoomOut",value:function(){var f=this.getComponent(Re.ZOOM);f.zoomOut()}},{key:"startHandMode",value:function(){var f=this.getComponent(Re.ZOOM);f.startHandMode()}},{key:"endHandMode",value:function(){var f=this.getComponent(Re.ZOOM);f.endHandMode()}},{key:"resetZoom",value:function(){var f=this.getComponent(Re.ZOOM);f.resetZoom()}},{key:"toDataURL",value:function(f){var v=this.getComponent(Re.CROPPER);v.changeVisibility(!1);var d=this._canvas&&this._canvas.toDataURL(f);return v.changeVisibility(!0),d}},{key:"setCanvasImage",value:function(f,v){v&&ke(v),this.imageName=f,this.canvasImage=v}},{key:"setCssMaxDimension",value:function(f){this.cssMaxWidth=f.width||this.cssMaxWidth,this.cssMaxHeight=f.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;f||(f=this.canvasImage);var v=f.getBoundingRect(),d=v.width,m=v.height,w=this._calcMaxDimension(d,m);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(w.width,"px"),"max-height":"".concat(w.height,"px")}),this.setCanvasBackstoreDimension({width:d,height:m}),this._canvas.centerObject(f)}},{key:"setCanvasCssDimension",value:function(f){this._canvas.setDimensions(f,KS)}},{key:"setCanvasBackstoreDimension",value:function(f){this._canvas.setDimensions(f,qS)}},{key:"setImageProperties",value:function(f,v){var d=this.canvasImage;d&&(d.set(f).setCoords(),v&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(f){var v,d=this,m=Z()(v=this._callbackAfterLoadingImageObject).call(v,this);return new(Ce())(function(w){ae.fabric.Image.fromURL(f,function(A){m(A),w(d.createObjectProperties(A))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(Re.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(f){this.getComponent(Re.CROPPER).setCropzoneRect(f)}},{key:"getCroppedImageData",value:function(f){return this.getComponent(Re.CROPPER).getCroppedImageData(f)}},{key:"setBrush",value:function(f){var v=this._drawingMode,d=Re.FREE_DRAWING;v===Et.LINE_DRAWING&&(d=Re.LINE),this.getComponent(d).setBrush(f)}},{key:"setDrawingShape",value:function(f,v){this.getComponent(Re.SHAPE).setStates(f,v)}},{key:"setIconStyle",value:function(f,v){this.getComponent(Re.ICON).setStates(f,v)}},{key:"registerPaths",value:function(f){this.getComponent(Re.ICON).registerPaths(f)}},{key:"changeCursor",value:function(f){var v=this.getCanvas();v.defaultCursor=f,v.renderAll()}},{key:"hasFilter",value:function(f){return this.getComponent(Re.FILTER).hasFilter(f)}},{key:"setSelectionStyle",value:function(f){$()(Jn.SELECTION_STYLE,f)}},{key:"setObjectProperties",value:function(f,v){var d=this.getObject(f),m=$()({},v);return d.set(m),d.setCoords(),this.getCanvas().renderAll(),m}},{key:"getObjectProperties",value:function(f,v){var d=this.getObject(f),m={};return Se()(v)?m[v]=d[v]:ph()(v)?Ao()(v,function(w){m[w]=d[w]}):Ys()(v,function(w,A){m[A]=d[A]}),m}},{key:"getObjectPosition",value:function(f,v,d){var m=this.getObject(f);return m?m.getPointByOrigin(v,d):null}},{key:"setObjectPosition",value:function(f,v){var d=this.getObject(f),m=v.x,w=v.y,A=v.originX,j=v.originY;if(!d)return!1;var L=d.getPointByOrigin(A,j),z=d.getPointByOrigin("center","center"),U=z.x-L.x,ie=z.y-L.y;return d.set({left:m+U,top:w+ie}),d.setCoords(),!0}},{key:"getCanvasSize",value:function(){var f=this.getCanvasImage();return{width:f?f.width:0,height:f?f.height:0}}},{key:"createStaticCanvas",value:function(){var f=new ae.fabric.StaticCanvas;return f.set({enableRetinaScaling:!1}),f}},{key:"_getDrawingModeInstance",value:function(f){return this._drawingModeMap[f]}},{key:"_setObjectCachingToFalse",value:function(){ae.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(f){var v,d;f.nodeType?v=f:v=document.querySelector(f),v.nodeName.toUpperCase()!=="CANVAS"&&(d=document.createElement("canvas"),v.appendChild(d)),this._canvas=new ae.fabric.Canvas(d,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new vS),this._register(this._drawingModeMap,new IS),this._register(this._drawingModeMap,new xS),this._register(this._drawingModeMap,new _S),this._register(this._drawingModeMap,new NS),this._register(this._drawingModeMap,new LS),this._register(this._drawingModeMap,new zS),this._register(this._drawingModeMap,new ZS)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new _I(this)),this._register(this._componentMap,new GI(this)),this._register(this._componentMap,new ZI(this)),this._register(this._componentMap,new qI(this)),this._register(this._componentMap,new rb(this)),this._register(this._componentMap,new db(this)),this._register(this._componentMap,new yb(this)),this._register(this._componentMap,new Db(this)),this._register(this._componentMap,new Rb(this)),this._register(this._componentMap,new nS(this)),this._register(this._componentMap,new dS(this)),this._register(this._componentMap,new GS(this))}},{key:"_register",value:function(f,v){f[v.getName()]=v}},{key:"_isSameDrawingMode",value:function(f){return this.getDrawingMode()===f}},{key:"_calcMaxDimension",value:function(f,v){var d=this.cssMaxWidth/f,m=this.cssMaxHeight/v,w=Math.min(f,this.cssMaxWidth),A=Math.min(v,this.cssMaxHeight);return d<1&&d<m?(w=f*d,A=v*d):m<1&&m<d&&(w=f*m,A=v*m),{width:Math.floor(w),height:Math.floor(A)}}},{key:"_callbackAfterLoadingImageObject",value:function(f){var v=this.getCanvasImage().getCenterPoint();f.set(Jn.SELECTION_STYLE),f.set({left:v.x,top:v.y,crossOrigin:"Anonymous"}),this.getCanvas().add(f).setActiveObject(f)}},{key:"_attachCanvasEvents",value:function(){var f=this._canvas,v=this._handler;f.on({"mouse:down":v.onMouseDown,"object:added":v.onObjectAdded,"object:removed":v.onObjectRemoved,"object:moving":v.onObjectMoved,"object:scaling":v.onObjectScaled,"object:modified":v.onObjectModified,"object:rotating":v.onObjectRotated,"path:created":v.onPathCreated,"selection:cleared":v.onSelectionCleared,"selection:created":v.onSelectionCreated,"selection:updated":v.onObjectSelected})}},{key:"_onMouseDown",value:function(f){var v=this,d=f.e,m=f.target,w=this._canvas.getPointer(d);if(m){var A=m.type,j=fc(m,function(L){return hc(v.getObjectId(L),L,A==="activeSelection")});Ph(j)}this.fire(Ee.MOUSE_DOWN,d,w)}},{key:"_onObjectAdded",value:function(f){var v=f.target;v.isType("cropzone")||this._addFabricObject(v)}},{key:"_onObjectRemoved",value:function(f){var v=f.target;this._removeFabricObject(ke(v))}},{key:"_onObjectMoved",value:function(f){var v=this;this._lazyFire(Ee.OBJECT_MOVED,function(d){return v.createObjectProperties(d)},f.target)}},{key:"_onObjectScaled",value:function(f){var v=this;this._lazyFire(Ee.OBJECT_SCALED,function(d){return v.createObjectProperties(d)},f.target)}},{key:"_onObjectModified",value:function(f){var v=f.target;if(v.type==="activeSelection"){var d=v.getObjects();Ve()(d).call(d,function(m){return m.fire("modifiedInGroup",v)})}this.fire(Ee.OBJECT_MODIFIED,v,this.getObjectId(v))}},{key:"_onObjectRotated",value:function(f){var v=this;this._lazyFire(Ee.OBJECT_ROTATED,function(d){return v.createObjectProperties(d)},f.target)}},{key:"_lazyFire",value:function(f,v,d){var m=this,w=d&&d.canvasEventDelegation,A=w?d.canvasEventDelegation(f):"none";A==="unregistered"&&d.canvasEventRegister(f,function(j){m.fire(f,v(j))}),A==="none"&&this.fire(f,v(d))}},{key:"_onObjectSelected",value:function(f){var v=f.target,d=this.createObjectProperties(v);this.fire(Ee.OBJECT_ACTIVATED,d)}},{key:"_onPathCreated",value:function(f){var v=f.path.getCenterPoint(),d=v.x,m=v.y;f.path.set($()({left:d,top:m},Jn.SELECTION_STYLE));var w=this.createObjectProperties(f.path);this.fire(Ee.ADD_OBJECT,w)}},{key:"_onSelectionCleared",value:function(){this.fire(Ee.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(f){var v=f.target,d=this.createObjectProperties(v);this.fire(Ee.OBJECT_ACTIVATED,d),this.fire(Ee.SELECTION_CREATED,f.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(f){this._canvas.forEachObject(function(v){v.selectable=f,v.hoverCursor=f?"move":"crosshair"})}},{key:"createObjectProperties",value:function(f){var v=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],d={id:ke(f),type:f.type};if($()(d,bn(f,v)),Vs(["i-text","text"],f.type))$()(d,this._createTextProperties(f,d));else if(Vs(["rect","triangle","circle"],f.type)){var m=this.getComponent(Re.SHAPE);$()(d,{fill:m.makeFillPropertyForUserEvent(f)})}return d}},{key:"_createTextProperties",value:function(f){var v=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],d={};return $()(d,bn(f,v)),d}},{key:"_addFabricObject",value:function(f){var v=ke(f);return this._objects[v]=f,v}},{key:"_removeFabricObject",value:function(f){delete this._objects[f]}},{key:"resetTargetObjectForCopyPaste",value:function(){var f=this.getActiveObject();f&&(this.targetObjectForCopyPaste=f)}},{key:"pasteObject",value:function(){var f=this;if(!this.targetObjectForCopyPaste)return Ce().resolve([]);var v=this.targetObjectForCopyPaste,d=v.type==="activeSelection",m=d?v.getObjects():[v],w=null;return this.discardSelection(),this._cloneObject(m).then(function(A){if(A.length>1)w=f.getActiveSelectionFromObjects(A);else{var j=ce(A,1);w=j[0]}f.targetObjectForCopyPaste=w,f.setActiveObject(w)})}},{key:"_cloneObject",value:function(f){var v=this,d=cr()(f).call(f,function(m){return v._cloneObjectItem(m)});return Ce().all(d)}},{key:"_cloneObjectItem",value:function(f){var v=this;return this._copyFabricObjectForPaste(f).then(function(d){var m=v.createObjectProperties(d);return v.add(d),v.fire(Ee.ADD_OBJECT,m),d})}},{key:"_copyFabricObjectForPaste",value:function(f){var v=this,d=function(w,A){return A?w-Js:w+Js};return this._copyFabricObject(f).then(function(m){var w=m.left,A=m.top,j=m.width,L=m.height,z=v.getCanvasSize(),U=z.width,ie=z.height,se=w+j/2,pe=A+L/2;return m.set($()({left:d(w,se+Js>U),top:d(A,pe+Js>ie)},Jn.SELECTION_STYLE)),m})}},{key:"_copyFabricObject",value:function(f){var v=this;return new(Ce())(function(d){f.clone(function(m){var w=v.getComponent(Re.SHAPE);Xf(m)&&w.processForCopiedObject(m,f),d(m)})})}},{key:"getCurrentDimensions",value:function(){var f=this.getComponent(Re.RESIZE);return f.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var f=this.getComponent(Re.RESIZE);return f.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(f){var v=this.getComponent(Re.RESIZE);v.setOriginalDimensions(f)}},{key:"resize",value:function(f){var v=this.getComponent(Re.RESIZE);return v.resize(f)}}]),N}();ve().mixin(kh);var eD=kh,tD=Ee.MOUSE_DOWN,nD=Ee.OBJECT_MOVED,rD=Ee.OBJECT_SCALED,iD=Ee.OBJECT_ACTIVATED,oD=Ee.OBJECT_ROTATED,Rh=Ee.OBJECT_ADDED,sD=Ee.OBJECT_MODIFIED,aD=Ee.ADD_TEXT,lD=Ee.ADD_OBJECT,cD=Ee.TEXT_EDITING,uD=Ee.TEXT_CHANGED,dD=Ee.ICON_CREATE_RESIZE,fD=Ee.ICON_CREATE_END,Lh=Ee.SELECTION_CLEARED,jh=Ee.SELECTION_CREATED,hD=Ee.ADD_OBJECT_AFTER,gc=function(){function N(S,f){var v,d,m,w,A,j,L,z,U,ie,se,pe,ue,ge,Oe,Je;if(Y(this,N),f=$()({includeUI:!1,usageStatistics:!0},f),this.mode=null,this.activeObjectId=null,f.includeUI){var qe=f.includeUI;qe.usageStatistics=f.usageStatistics,this.ui=new yI(S,qe,this.getActions()),f=this.ui.setUiDefaultSelectionStyle(f)}this._invoker=new LC,this._graphics=new eD(this.ui?this.ui.getEditorArea():S,{cssMaxWidth:f.cssMaxWidth,cssMaxHeight:f.cssMaxHeight}),this._handlers={keydown:Z()(v=this._onKeyDown).call(v,this),mousedown:Z()(d=this._onMouseDown).call(d,this),objectActivated:Z()(m=this._onObjectActivated).call(m,this),objectMoved:Z()(w=this._onObjectMoved).call(w,this),objectScaled:Z()(A=this._onObjectScaled).call(A,this),objectRotated:Z()(j=this._onObjectRotated).call(j,this),objectAdded:Z()(L=this._onObjectAdded).call(L,this),objectModified:Z()(z=this._onObjectModified).call(z,this),createdPath:this._onCreatedPath,addText:Z()(U=this._onAddText).call(U,this),addObject:Z()(ie=this._onAddObject).call(ie,this),textEditing:Z()(se=this._onTextEditing).call(se,this),textChanged:Z()(pe=this._onTextChanged).call(pe,this),iconCreateResize:Z()(ue=this._onIconCreateResize).call(ue,this),iconCreateEnd:Z()(ge=this._onIconCreateEnd).call(ge,this),selectionCleared:Z()(Oe=this._selectionCleared).call(Oe,this),selectionCreated:Z()(Je=this._selectionCreated).call(Je,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(f.selectionStyle,{applyCropSelectionStyle:f.applyCropSelectionStyle,applyGroupSelectionStyle:f.applyGroupSelectionStyle}),f.usageStatistics&&zs(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),ae.fabric.enableGLFiltering=!1}return ne(N,[{key:"_attachColorPickerInputBoxEvents",value:function(){var f=this;this.ui.on(Ee.INPUT_BOX_EDITING_STARTED,function(){f.isColorPickerInputBoxEditing=!0}),this.ui.on(Ee.INPUT_BOX_EDITING_STOPPED,function(){f.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(Ee.INPUT_BOX_EDITING_STARTED),this.ui.off(Ee.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(f,v){var d=v.applyCropSelectionStyle,m=v.applyGroupSelectionStyle;f&&this._graphics.setSelectionStyle(f),d&&this._graphics.setCropSelectionStyle(f),m&&this.on("selectionCreated",function(w){w.type==="activeSelection"&&w.set(f)})}},{key:"_attachInvokerEvents",value:function(){var f,v,d=this,m=Ee.UNDO_STACK_CHANGED,w=Ee.REDO_STACK_CHANGED,A=Ee.EXECUTE_COMMAND,j=Ee.AFTER_UNDO,L=Ee.AFTER_REDO,z=Ee.HAND_STARTED,U=Ee.HAND_STOPPED;if(this._invoker.on(m,Z()(f=this.fire).call(f,this,m)),this._invoker.on(w,Z()(v=this.fire).call(v,this,w)),this.ui){var ie=this._graphics.getCanvas();this._invoker.on(A,function(se){return d.ui.fire(A,se)}),this._invoker.on(j,function(se){return d.ui.fire(j,se)}),this._invoker.on(L,function(se){return d.ui.fire(L,se)}),ie.on(z,function(){return d.ui.fire(z)}),ie.on(U,function(){return d.ui.fire(U)})}}},{key:"_attachGraphicsEvents",value:function(){var f;this._graphics.on((f={},H(f,tD,this._handlers.mousedown),H(f,nD,this._handlers.objectMoved),H(f,rD,this._handlers.objectScaled),H(f,oD,this._handlers.objectRotated),H(f,iD,this._handlers.objectActivated),H(f,Rh,this._handlers.objectAdded),H(f,sD,this._handlers.objectModified),H(f,aD,this._handlers.addText),H(f,lD,this._handlers.addObject),H(f,cD,this._handlers.textEditing),H(f,uD,this._handlers.textChanged),H(f,dD,this._handlers.iconCreateResize),H(f,fD,this._handlers.iconCreateEnd),H(f,Lh,this._handlers.selectionCleared),H(f,jh,this._handlers.selectionCreated),f))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(f){var v=f.ctrlKey,d=f.keyCode,m=f.metaKey,w=v||m;w&&(d===zt.C?this._graphics.resetTargetObjectForCopyPaste():d===zt.V?(this._graphics.pasteObject(),this.clearRedoStack()):d===zt.Z?this.undo().catch(function(){}):d===zt.Y&&this.redo().catch(function(){}));var A=d===zt.BACKSPACE||d===zt.DEL,j=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&j&&A&&(f.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var f=this._graphics.getActiveObjectIdForRemove();this.removeObject(f)}},{key:"_onMouseDown",value:function(f,v){this.fire(Ee.MOUSE_DOWN,f,v)}},{key:"_pushAddObjectCommand",value:function(f){var v=Ht.create(Ge.ADD_OBJECT,this._graphics,f);this._invoker.pushUndoStack(v)}},{key:"_pushModifyObjectCommand",value:function(f){var v=this,d=f.type,m=fc(f,function(A){return hc(v._graphics.getObjectId(A),A,d==="activeSelection")}),w=Ht.create(Ge.CHANGE_SELECTION,this._graphics,m);w.execute(this._graphics,m),this._invoker.pushUndoStack(w)}},{key:"_onObjectActivated",value:function(f){this.fire(Ee.OBJECT_ACTIVATED,f)}},{key:"_onObjectMoved",value:function(f){this.fire(Ee.OBJECT_MOVED,f)}},{key:"_onObjectScaled",value:function(f){this.fire(Ee.OBJECT_SCALED,f)}},{key:"_onObjectRotated",value:function(f){this.fire(Ee.OBJECT_ROTATED,f)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Ge.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(f){this._graphics.changeSelectableAll(f)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(f){for(var v,d,m,w=arguments.length,A=new Array(w>1?w-1:0),j=1;j<w;j++)A[j-1]=arguments[j];var L=V()(v=[this._graphics]).call(v,A);return(d=this._invoker).execute.apply(d,V()(m=[f]).call(m,B(L)))}},{key:"executeSilent",value:function(f){for(var v,d,m,w=arguments.length,A=new Array(w>1?w-1:0),j=1;j<w;j++)A[j-1]=arguments[j];var L=V()(v=[this._graphics]).call(v,A);return(d=this._invoker).executeSilent.apply(d,V()(m=[f]).call(m,B(L)))}},{key:"undo",value:function(){for(var f=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,d=Ce().resolve(),m=0;m<v;m+=1)d=d.then(function(){return f._invoker.undo()});return d}},{key:"redo",value:function(){for(var f=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,d=Ce().resolve(),m=0;m<v;m+=1)d=d.then(function(){return f._invoker.redo()});return d}},{key:"zoom",value:function(f){var v=f.x,d=f.y,m=f.zoomLevel;this._graphics.zoom({x:v,y:d},m)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(f,v){if(!f)return Ce().reject(Tt.invalidParameters);var d=te().createObjectURL(f);return v=v||f.name,this.loadImageFromURL(d,v).then(function(m){return te().revokeObjectURL(f),m})}},{key:"loadImageFromURL",value:function(f,v){return!v||!f?Ce().reject(Tt.invalidParameters):this.execute(Ge.LOAD_IMAGE,v,f)}},{key:"addImageObject",value:function(f){return f?this.execute(Ge.ADD_IMAGE_OBJECT,f):Ce().reject(Tt.invalidParameters)}},{key:"startDrawingMode",value:function(f,v){return this._graphics.startDrawingMode(f,v)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(f){var v=this._graphics.getCroppedImageData(f);return v?this.loadImageFromURL(v.url,v.imageName):Ce().reject(Tt.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(f){this._graphics.setCropzoneRect(f)}},{key:"_flip",value:function(f){return this.execute(Ge.FLIP_IMAGE,f)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(f,v,d){var m=null;return d?m=this.executeSilent(Ge.ROTATE_IMAGE,f,v):m=this.execute(Ge.ROTATE_IMAGE,f,v),m}},{key:"rotate",value:function(f,v){return this._rotate("rotate",f,v)}},{key:"setAngle",value:function(f,v){return this._rotate("setAngle",f,v)}},{key:"setBrush",value:function(f){this._graphics.setBrush(f)}},{key:"setDrawingShape",value:function(f,v){this._graphics.setDrawingShape(f,v)}},{key:"setDrawingIcon",value:function(f,v){this._graphics.setIconStyle(f,v)}},{key:"addShape",value:function(f,v){return v=v||{},this._setPositions(v),this.execute(Ge.ADD_SHAPE,f,v)}},{key:"changeShape",value:function(f,v,d){var m=d?"executeSilent":"execute";return this[m](Ge.CHANGE_SHAPE,f,v)}},{key:"addText",value:function(f,v){return f=f||"",v=v||{},this.execute(Ge.ADD_TEXT,f,v)}},{key:"changeText",value:function(f,v){return v=v||"",this.execute(Ge.CHANGE_TEXT,f,v)}},{key:"changeTextStyle",value:function(f,v,d){var m=d?"executeSilent":"execute";return this[m](Ge.CHANGE_TEXT_STYLE,f,v)}},{key:"_changeActivateMode",value:function(f){f!=="ICON"&&this.getDrawingMode()!==f&&this.startDrawingMode(f)}},{key:"_onTextChanged",value:function(f){this.fire(Ee.TEXT_CHANGED,f)}},{key:"_onIconCreateResize",value:function(f){this.fire(Ee.ICON_CREATE_RESIZE,f)}},{key:"_onIconCreateEnd",value:function(f){this.fire(Ee.ICON_CREATE_END,f)}},{key:"_onTextEditing",value:function(){this.fire(Ee.TEXT_EDITING)}},{key:"_onAddText",value:function(f){this.fire(Ee.ADD_TEXT,{originPosition:f.originPosition,clientPosition:f.clientPosition})}},{key:"_onAddObject",value:function(f){var v=this._graphics.getObject(f.id);this._invoker.fire(Ee.EXECUTE_COMMAND,ic(v.type)),this._pushAddObjectCommand(v)}},{key:"_onObjectAdded",value:function(f){this.fire(Rh,f),this.fire(hD,f)}},{key:"_onObjectModified",value:function(f){f.type!==Ue.CROPZONE&&(this._invoker.fire(Ee.EXECUTE_COMMAND,ic(f.type)),this._pushModifyObjectCommand(f))}},{key:"_selectionCleared",value:function(){this.fire(Lh)}},{key:"_selectionCreated",value:function(f){this.fire(jh,f)}},{key:"registerIcons",value:function(f){this._graphics.registerPaths(f)}},{key:"changeCursor",value:function(f){this._graphics.changeCursor(f)}},{key:"addIcon",value:function(f,v){return v=v||{},this._setPositions(v),this.execute(Ge.ADD_ICON,f,v)}},{key:"changeIconColor",value:function(f,v){return this.execute(Ge.CHANGE_ICON_COLOR,f,v)}},{key:"removeObject",value:function(f){var v=this._graphics.getObject(f),d=v.type;return this.execute(Ge.REMOVE_OBJECT,f,ic(d))}},{key:"hasFilter",value:function(f){return this._graphics.hasFilter(f)}},{key:"removeFilter",value:function(f){return this.execute(Ge.REMOVE_FILTER,f)}},{key:"applyFilter",value:function(f,v,d){var m=d?"executeSilent":"execute";return this[m](Ge.APPLY_FILTER,f,v)}},{key:"toDataURL",value:function(f){return this._graphics.toDataURL(f)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(f){return f?this.execute(Ge.RESIZE_CANVAS_DIMENSION,f):Ce().reject(Tt.invalidParameters)}},{key:"destroy",value:function(){var f=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),J()(this,function(v,d){f[d]=null},this)}},{key:"_setPositions",value:function(f){var v=this._graphics.getCenter();G()(f.left)&&(f.left=v.left),G()(f.top)&&(f.top=v.top)}},{key:"setObjectProperties",value:function(f,v){return this.execute(Ge.SET_OBJECT_PROPERTIES,f,v)}},{key:"setObjectPropertiesQuietly",value:function(f,v){this._graphics.setObjectProperties(f,v)}},{key:"getObjectProperties",value:function(f,v){var d=this._graphics.getObject(f);return d?this._graphics.getObjectProperties(f,v):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(f,v,d){return this._graphics.getObjectPosition(f,v,d)}},{key:"setObjectPosition",value:function(f,v){return this.execute(Ge.SET_OBJECT_POSITION,f,v)}},{key:"resize",value:function(f){return this.execute(Ge.RESIZE_IMAGE,f)}}]),N}();II.mixin(gc),ve().mixin(gc);var gD=gc,pD=Re.ICON,vD={name:Ge.ADD_ICON,execute:function(S,f,v){var d=this,m=S.getComponent(pD);return m.add(f,v).then(function(w){return d.undoData.object=S.getObject(w.id),w})},undo:function(S){return S.remove(this.undoData.object),Ce().resolve()}};Ht.register(vD);var T1=null,mD={name:Ge.ADD_IMAGE_OBJECT,execute:function(S,f){var v=this;return S.addImageObject(f).then(function(d){return v.undoData.object=S.getObject(d.id),d})},undo:function(S){return S.remove(this.undoData.object),Ce().resolve()}};Ht.register(mD);var A1=null,yD={name:Ge.ADD_OBJECT,execute:function(S,f){return new(Ce())(function(v,d){S.contains(f)?d(Tt.addedObject):(S.add(f),v(f))})},undo:function(S,f){return new(Ce())(function(v,d){S.contains(f)?(S.remove(f),v(f)):d(Tt.noObject)})}};Ht.register(yD);var O1=null,CD=Re.SHAPE,ID={name:Ge.ADD_SHAPE,execute:function(S,f,v){var d=this,m=S.getComponent(CD);return m.add(f,v).then(function(w){var A=w.id;return d.undoData.object=S.getObject(A),w})},undo:function(S){return S.remove(this.undoData.object),Ce().resolve()}};Ht.register(ID);var N1=null,bD=Re.TEXT,SD={name:Ge.ADD_TEXT,execute:function(S,f,v){var d=this,m=S.getComponent(bD);if(this.undoData.object){var w=this.undoData.object;return new(Ce())(function(A,j){S.contains(w)?j(Tt.redo):(S.add(w),A(w))})}return m.add(f,v).then(function(A){var j=A.id,L=S.getObject(j);return d.undoData.object=L,Ph(fc(L,function(){return hc(j,L,!1)})),A})},undo:function(S){return S.remove(this.undoData.object),Ce().resolve()}};Ht.register(SD);var P1=null,Fh=Re.FILTER,Bh=null;function DD(N,S,f){var v={};return N==="mask"&&(v.object=f.mask),v.options=S,v}var xD={name:Ge.APPLY_FILTER,execute:function(S,f,v,d){var m=S.getComponent(Fh);if(f==="mask"){var w=S.getObject(v.maskObjId);if(!(w&&w.isType("image")))return Ce().reject(Tt.invalidParameters);$()(v,{mask:w}),S.remove(v.mask)}if(!this.isRedo){var A=m.getOptions(f),j=DD(f,A,v);Bh=this.setUndoData(j,Bh,d)}return m.add(f,v)},undo:function(S,f){var v=S.getComponent(Fh);if(f==="mask"){var d=this.undoData.object;return S.add(d),S.setActiveObject(d),v.remove(f)}return this.undoData.options?v.add(f,this.undoData.options):v.remove(f)}};Ht.register(xD);var k1=null,zh=Re.ICON,ED={name:Ge.CHANGE_ICON_COLOR,execute:function(S,f,v){var d=this;return new(Ce())(function(m,w){var A=S.getComponent(zh),j=S.getObject(f);j||w(Tt.noObject),d.undoData.object=j,d.undoData.color=A.getColor(j),A.setColor(v,j),m()})},undo:function(S){var f=S.getComponent(zh),v=this.undoData,d=v.object,m=v.color;return f.setColor(m,d),Ce().resolve()}};Ht.register(ED);var R1=null,Hh=Re.SHAPE,Uh=null;function MD(N,S){var f={object:S,options:{}};return Ys()(N,function(v,d){f.options[d]=S[d]}),f}var wD={name:Ge.CHANGE_SHAPE,execute:function(S,f,v,d){var m=S.getComponent(Hh),w=S.getObject(f);if(!w)return Ce().reject(Tt.noObject);if(!this.isRedo){var A=MD(v,w);Uh=this.setUndoData(A,Uh,d)}return m.change(w,v)},undo:function(S){var f=S.getComponent(Hh),v=this.undoData,d=v.object,m=v.options;return f.change(d,m)}};Ht.register(wD);var L1=null,Vh=Re.TEXT,_D={name:Ge.CHANGE_TEXT,execute:function(S,f,v){var d=S.getComponent(Vh),m=S.getObject(f);return m?(this.undoData.object=m,this.undoData.text=d.getText(m),d.change(m,v)):Ce().reject(Tt.noObject)},undo:function(S){var f=S.getComponent(Vh),v=this.undoData,d=v.object,m=v.text;return f.change(d,m)}};Ht.register(_D);var j1=null,Wh=Re.TEXT,Gh=null;function TD(N,S){var f={object:S,styles:{}};return Ys()(N,function(v,d){var m=S[d];f.styles[d]=m}),f}var AD={name:Ge.CHANGE_TEXT_STYLE,execute:function(S,f,v,d){var m=S.getComponent(Wh),w=S.getObject(f);if(!w)return Ce().reject(Tt.noObject);if(!this.isRedo){var A=TD(v,w);Gh=this.setUndoData(A,Gh,d)}return m.setStyle(w,v)},undo:function(S){var f=S.getComponent(Wh),v=this.undoData,d=v.object,m=v.styles;return f.setStyle(d,m)}};Ht.register(AD);var F1=null,OD={name:Ge.CLEAR_OBJECTS,execute:function(S){var f=this;return new(Ce())(function(v){f.undoData.objects=S.removeAll(),v()})},undo:function(S){return S.add(this.undoData.objects),Ce().resolve()}};Ht.register(OD);var B1=null,Yh=Re.FLIP,ND={name:Ge.FLIP_IMAGE,execute:function(S,f){var v=S.getComponent(Yh);return this.undoData.setting=v.getCurrentSetting(),v[f]()},undo:function(S){var f=S.getComponent(Yh);return f.set(this.undoData.setting)}};Ht.register(ND);var z1=null,Xh=Re.IMAGE_LOADER,PD={name:Ge.LOAD_IMAGE,execute:function(S,f,v){var d,m=S.getComponent(Xh),w=m.getCanvasImage(),A=w?w.width:0,j=w?w.height:0,L=Ni()(d=S.removeAll(!0)).call(d,function(z){return z.type!=="cropzone"});return Ve()(L).call(L,function(z){z.evented=!0}),this.undoData={name:m.getImageName(),image:w,objects:L},m.load(f,v).then(function(z){return{oldWidth:A,oldHeight:j,newWidth:z.width,newHeight:z.height}})},undo:function(S){var f=S.getComponent(Xh),v=this.undoData,d=v.objects,m=v.name,w=v.image;return S.removeAll(!0),S.add(d),f.load(m,w)}};Ht.register(PD);var H1=null,$h=Re.FILTER,kD={name:Ge.REMOVE_FILTER,execute:function(S,f){var v=S.getComponent($h);return this.undoData.options=v.getOptions(f),v.remove(f)},undo:function(S,f){var v=S.getComponent($h),d=this.undoData.options;return v.add(f,d)}};Ht.register(kD);var U1=null,RD={name:Ge.REMOVE_OBJECT,execute:function(S,f){var v=this;return new(Ce())(function(d,m){v.undoData.objects=S.removeObjectById(f),v.undoData.objects.length?d():m(Tt.noObject)})},undo:function(S){return S.add(this.undoData.objects),Ce().resolve()}};Ht.register(RD);var V1=null,LD={name:Ge.RESIZE_CANVAS_DIMENSION,execute:function(S,f){var v=this;return new(Ce())(function(d){v.undoData.size={width:S.cssMaxWidth,height:S.cssMaxHeight},S.setCssMaxDimension(f),S.adjustCanvasDimension(),d()})},undo:function(S){return S.setCssMaxDimension(this.undoData.size),S.adjustCanvasDimension(),Ce().resolve()}};Ht.register(LD);var W1=null,Zh=Re.ROTATION,Qh=null;function jD(N){return{angle:N.getCurrentAngle()}}var FD={name:Ge.ROTATE_IMAGE,execute:function(S,f,v,d){var m=S.getComponent(Zh);if(!this.isRedo){var w=jD(m);Qh=this.setUndoData(w,Qh,d)}return m[f](v)},undo:function(S){var f=S.getComponent(Zh),v=ce(this.args,3),d=v[1],m=v[2];return d==="setAngle"?f[d](this.undoData.angle):f.rotate(-m)}};Ht.register(FD);var G1=null,BD={name:Ge.SET_OBJECT_PROPERTIES,execute:function(S,f,v){var d=this,m=S.getObject(f);return m?(this.undoData.props={},Ys()(v,function(w,A){d.undoData.props[A]=m[A]}),S.setObjectProperties(f,v),Ce().resolve()):Ce().reject(Tt.noObject)},undo:function(S,f){var v=this.undoData.props;return S.setObjectProperties(f,v),Ce().resolve()}};Ht.register(BD);var Y1=null,zD={name:Ge.SET_OBJECT_POSITION,execute:function(S,f,v){var d=S.getObject(f);return d?(this.undoData.objectId=f,this.undoData.props=S.getObjectProperties(f,["left","top"]),S.setObjectPosition(f,v),S.renderAll(),Ce().resolve()):Ce().reject(Tt.noObject)},undo:function(S){var f=this.undoData,v=f.objectId,d=f.props;return S.setObjectProperties(v,d),S.renderAll(),Ce().resolve()}};Ht.register(zD);var X1=null,HD={name:Ge.CHANGE_SELECTION,execute:function(S,f){return this.isRedo?Ve()(f).call(f,function(v){S.setObjectProperties(v.id,v)}):this.undoData=HS(),Ce().resolve()},undo:function(S){var f;return Ve()(f=this.undoData).call(f,function(v){S.setObjectProperties(v.id,v)}),Ce().resolve()}};Ht.register(HD);var $1=null,Jh=Re.RESIZE,UD={name:Ge.RESIZE_IMAGE,execute:function(S,f){var v=S.getComponent(Jh),d=v.getOriginalDimensions();return d||(d=v.getCurrentDimensions()),this.undoData.dimensions=d,v.resize(f)},undo:function(S){var f=S.getComponent(Jh);return f.resize(this.undoData.dimensions)}};Ht.register(UD);var Z1=null,VD=gD}(),s=s.default,s}()})});var mc=null;var vc=1,vg=Symbol("SIGNAL");function Nt(e){let t=mc;return mc=e,t}function mg(){return mc}var yc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qD(e){if(!(Dc(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===vc)){if(!e.producerMustRecompute(e)&&!Ic(e)){e.dirty=!1,e.lastCleanEpoch=vc;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=vc}}function Cc(e){return e&&(e.nextProducerIndex=0),Nt(e)}function yg(e,t){if(Nt(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Dc(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Sc(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Ic(e){xc(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(qD(n),r!==n.version))return!0}return!1}function bc(e){if(xc(e),Dc(e))for(let t=0;t<e.producerNode.length;t++)Sc(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Sc(e,t){if(ex(e),e.liveConsumerNode.length===1&&tx(e))for(let r=0;r<e.producerNode.length;r++)Sc(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],s=e.liveConsumerNode[t];xc(s),s.producerIndexOfThis[r]=t}}function Dc(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function xc(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function ex(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function tx(e){return e.producerNode!==void 0}function nx(){throw new Error}var rx=nx;function Cg(e){rx=e}function et(e){return typeof e=="function"}function Pi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var va=Pi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,s)=>`${s+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ci(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var $t=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(et(r))try{r()}catch(o){t=o instanceof va?o.errors:[o]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let o of s)try{Ig(o)}catch(I){t=t??[],I instanceof va?t=[...t,...I.errors]:t.push(I)}}if(t)throw new va(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Ig(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&ci(n,t)}remove(t){let{_finalizers:n}=this;n&&ci(n,t),t instanceof e&&t._removeParent(this)}};$t.EMPTY=(()=>{let e=new $t;return e.closed=!0,e})();var Ec=$t.EMPTY;function ma(e){return e instanceof $t||e&&"closed"in e&&et(e.remove)&&et(e.add)&&et(e.unsubscribe)}function Ig(e){et(e)?e():e.unsubscribe()}var er={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ki={setTimeout(e,t,...n){let{delegate:r}=ki;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=ki;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function ya(e){ki.setTimeout(()=>{let{onUnhandledError:t}=er;if(t)t(e);else throw e})}function Dr(){}var bg=Mc("C",void 0,void 0);function Sg(e){return Mc("E",void 0,e)}function Dg(e){return Mc("N",e,void 0)}function Mc(e,t,n){return{kind:e,value:t,error:n}}var ui=null;function Ri(e){if(er.useDeprecatedSynchronousErrorHandling){let t=!ui;if(t&&(ui={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=ui;if(ui=null,n)throw r}}else e()}function xg(e){er.useDeprecatedSynchronousErrorHandling&&ui&&(ui.errorThrown=!0,ui.error=e)}var di=class extends $t{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ma(t)&&t.add(this)):this.destination=sx}static create(t,n,r){return new Li(t,n,r)}next(t){this.isStopped?_c(Dg(t),this):this._next(t)}error(t){this.isStopped?_c(Sg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?_c(bg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ix=Function.prototype.bind;function wc(e,t){return ix.call(e,t)}var Tc=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ca(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ca(r)}else Ca(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ca(n)}}},Li=class extends di{constructor(t,n,r){super();let s;if(et(t)||!t)s={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&er.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&wc(t.next,o),error:t.error&&wc(t.error,o),complete:t.complete&&wc(t.complete,o)}):s=t}this.destination=new Tc(s)}};function Ca(e){er.useDeprecatedSynchronousErrorHandling?xg(e):ya(e)}function ox(e){throw e}function _c(e,t){let{onStoppedNotification:n}=er;n&&ki.setTimeout(()=>n(e,t))}var sx={closed:!0,next:Dr,error:ox,complete:Dr};var ji=typeof Symbol=="function"&&Symbol.observable||"@@observable";function An(e){return e}function Ac(...e){return Oc(e)}function Oc(e){return e.length===0?An:e.length===1?e[0]:function(n){return e.reduce((r,s)=>s(r),n)}}var It=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,s){let o=lx(n)?n:new Li(n,r,s);return Ri(()=>{let{operator:I,source:i}=this;o.add(I?I.call(o,i):i?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Eg(r),new r((s,o)=>{let I=new Li({next:i=>{try{n(i)}catch(a){o(a),I.unsubscribe()}},error:o,complete:s});this.subscribe(I)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ji](){return this}pipe(...n){return Oc(n)(this)}toPromise(n){return n=Eg(n),new n((r,s)=>{let o;this.subscribe(I=>o=I,I=>s(I),()=>r(o))})}}return e.create=t=>new e(t),e})();function Eg(e){var t;return(t=e??er.Promise)!==null&&t!==void 0?t:Promise}function ax(e){return e&&et(e.next)&&et(e.error)&&et(e.complete)}function lx(e){return e&&e instanceof di||ax(e)&&ma(e)}function Nc(e){return et(e?.lift)}function mt(e){return t=>{if(Nc(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function bt(e,t,n,r,s){return new Pc(e,t,n,r,s)}var Pc=class extends di{constructor(t,n,r,s,o,I){super(t),this.onFinalize=o,this.shouldUnsubscribe=I,this._next=n?function(i){try{n(i)}catch(a){t.error(a)}}:super._next,this._error=s?function(i){try{s(i)}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(i){t.error(i)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Fi(){return mt((e,t)=>{let n=null;e._refCount++;let r=bt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let s=e._connection,o=n;n=null,s&&(!o||s===o)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Yr=class extends It{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Nc(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new $t;let n=this.getSubject();t.add(this.source.subscribe(bt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=$t.EMPTY)}return t}refCount(){return Fi()(this)}};var Mg=Pi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Zt=(()=>{class e extends It{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ia(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Mg}next(n){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:s,observers:o}=this;return r||s?Ec:(this.currentObservers=null,o.push(n),new $t(()=>{this.currentObservers=null,ci(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:s,isStopped:o}=this;r?n.error(s):o&&n.complete()}asObservable(){let n=new It;return n.source=this,n}}return e.create=(t,n)=>new Ia(t,n),e})(),Ia=class extends Zt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Ec}};var ln=class extends Zt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var kc={now(){return(kc.delegate||Date).now()},delegate:void 0};var ba=class extends $t{constructor(t,n){super()}schedule(t,n=0){return this}};var ko={setInterval(e,t,...n){let{delegate:r}=ko;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=ko;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Sa=class extends ba{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return ko.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ko.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,s;try{this.work(t)}catch(o){r=!0,s=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ci(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Bi=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Bi.now=kc.now;var Da=class extends Bi{constructor(t,n=Bi.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Rc=new Da(Sa),wg=Rc;var Sn=new It(e=>e.complete());function xa(e){return e&&et(e.schedule)}function Lc(e){return e[e.length-1]}function _g(e){return et(Lc(e))?e.pop():void 0}function dr(e){return xa(Lc(e))?e.pop():void 0}function Tg(e,t){return typeof Lc(e)=="number"?e.pop():t}function Og(e,t,n,r){function s(o){return o instanceof n?o:new n(function(I){I(o)})}return new(n||(n=Promise))(function(o,I){function i(T){try{M(r.next(T))}catch(P){I(P)}}function a(T){try{M(r.throw(T))}catch(P){I(P)}}function M(T){T.done?o(T.value):s(T.value).then(i,a)}M((r=r.apply(e,t||[])).next())})}function Ag(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function fi(e){return this instanceof fi?(this.v=e,this):new fi(e)}function Ng(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,o=[];return s={},i("next"),i("throw"),i("return",I),s[Symbol.asyncIterator]=function(){return this},s;function I(R){return function(b){return Promise.resolve(b).then(R,P)}}function i(R,b){r[R]&&(s[R]=function(c){return new Promise(function(C,y){o.push([R,c,C,y])>1||a(R,c)})},b&&(s[R]=b(s[R])))}function a(R,b){try{M(r[R](b))}catch(c){k(o[0][3],c)}}function M(R){R.value instanceof fi?Promise.resolve(R.value.v).then(T,P):k(o[0][2],R)}function T(R){a("next",R)}function P(R){a("throw",R)}function k(R,b){R(b),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Pg(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ag=="function"?Ag(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(I){return new Promise(function(i,a){I=e[o](I),s(i,a,I.done,I.value)})}}function s(o,I,i,a){Promise.resolve(a).then(function(M){o({value:M,done:i})},I)}}var zi=e=>e&&typeof e.length=="number"&&typeof e!="function";function Ea(e){return et(e?.then)}function Ma(e){return et(e[ji])}function wa(e){return Symbol.asyncIterator&&et(e?.[Symbol.asyncIterator])}function _a(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ta=cx();function Aa(e){return et(e?.[Ta])}function Oa(e){return Ng(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:s}=yield fi(n.read());if(s)return yield fi(void 0);yield yield fi(r)}}finally{n.releaseLock()}})}function Na(e){return et(e?.getReader)}function Bt(e){if(e instanceof It)return e;if(e!=null){if(Ma(e))return ux(e);if(zi(e))return dx(e);if(Ea(e))return fx(e);if(wa(e))return kg(e);if(Aa(e))return hx(e);if(Na(e))return gx(e)}throw _a(e)}function ux(e){return new It(t=>{let n=e[ji]();if(et(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dx(e){return new It(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function fx(e){return new It(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,ya)})}function hx(e){return new It(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function kg(e){return new It(t=>{px(e,t).catch(n=>t.error(n))})}function gx(e){return kg(Oa(e))}function px(e,t){var n,r,s,o;return Og(this,void 0,void 0,function*(){try{for(n=Pg(e);r=yield n.next(),!r.done;){let I=r.value;if(t.next(I),t.closed)return}}catch(I){s={error:I}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(s)throw s.error}}t.complete()})}function wn(e,t,n,r=0,s=!1){let o=t.schedule(function(){n(),s?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!s)return o}function Pa(e,t=0){return mt((n,r)=>{n.subscribe(bt(r,s=>wn(r,e,()=>r.next(s),t),()=>wn(r,e,()=>r.complete(),t),s=>wn(r,e,()=>r.error(s),t)))})}function ka(e,t=0){return mt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Rg(e,t){return Bt(e).pipe(ka(t),Pa(t))}function Lg(e,t){return Bt(e).pipe(ka(t),Pa(t))}function jg(e,t){return new It(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Fg(e,t){return new It(n=>{let r;return wn(n,t,()=>{r=e[Ta](),wn(n,t,()=>{let s,o;try{({value:s,done:o}=r.next())}catch(I){n.error(I);return}o?n.complete():n.next(s)},0,!0)}),()=>et(r?.return)&&r.return()})}function Ra(e,t){if(!e)throw new Error("Iterable cannot be null");return new It(n=>{wn(n,t,()=>{let r=e[Symbol.asyncIterator]();wn(n,t,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function Bg(e,t){return Ra(Oa(e),t)}function zg(e,t){if(e!=null){if(Ma(e))return Rg(e,t);if(zi(e))return jg(e,t);if(Ea(e))return Lg(e,t);if(wa(e))return Ra(e,t);if(Aa(e))return Fg(e,t);if(Na(e))return Bg(e,t)}throw _a(e)}function en(e,t){return t?zg(e,t):Bt(e)}function ot(...e){let t=dr(e);return en(e,t)}function Xr(e,t){let n=et(e)?e:()=>e,r=s=>s.error(n());return new It(t?s=>t.schedule(r,0,s):r)}function jc(e){return!!e&&(e instanceof It||et(e.lift)&&et(e.subscribe))}var xr=Pi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Hg(e){return e instanceof Date&&!isNaN(e)}function ut(e,t){return mt((n,r)=>{let s=0;n.subscribe(bt(r,o=>{r.next(e.call(t,o,s++))}))})}var{isArray:vx}=Array;function mx(e,t){return vx(t)?e(...t):e(t)}function La(e){return ut(t=>mx(e,t))}var{isArray:yx}=Array,{getPrototypeOf:Cx,prototype:Ix,keys:bx}=Object;function Ug(e){if(e.length===1){let t=e[0];if(yx(t))return{args:t,keys:null};if(Sx(t)){let n=bx(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Sx(e){return e&&typeof e=="object"&&Cx(e)===Ix}function Vg(e,t){return e.reduce((n,r,s)=>(n[r]=t[s],n),{})}function ja(...e){let t=dr(e),n=_g(e),{args:r,keys:s}=Ug(e);if(r.length===0)return en([],t);let o=new It(Dx(r,t,s?I=>Vg(s,I):An));return n?o.pipe(La(n)):o}function Dx(e,t,n=An){return r=>{Wg(t,()=>{let{length:s}=e,o=new Array(s),I=s,i=s;for(let a=0;a<s;a++)Wg(t,()=>{let M=en(e[a],t),T=!1;M.subscribe(bt(r,P=>{o[a]=P,T||(T=!0,i--),i||r.next(n(o.slice()))},()=>{--I||r.complete()}))},r)},r)}}function Wg(e,t,n){e?wn(n,e,t):t()}function Gg(e,t,n,r,s,o,I,i){let a=[],M=0,T=0,P=!1,k=()=>{P&&!a.length&&!M&&t.complete()},R=c=>M<r?b(c):a.push(c),b=c=>{o&&t.next(c),M++;let C=!1;Bt(n(c,T++)).subscribe(bt(t,y=>{s?.(y),o?R(y):t.next(y)},()=>{C=!0},void 0,()=>{if(C)try{for(M--;a.length&&M<r;){let y=a.shift();I?wn(t,I,()=>b(y)):b(y)}k()}catch(y){t.error(y)}}))};return e.subscribe(bt(t,R,()=>{P=!0,k()})),()=>{i?.()}}function Gt(e,t,n=1/0){return et(t)?Gt((r,s)=>ut((o,I)=>t(r,o,s,I))(Bt(e(r,s))),n):(typeof t=="number"&&(n=t),mt((r,s)=>Gg(r,s,e,n)))}function Ro(e=1/0){return Gt(An,e)}function Yg(){return Ro(1)}function fr(...e){return Yg()(en(e,dr(e)))}function hi(e){return new It(t=>{Bt(e()).subscribe(t)})}var xx=["addListener","removeListener"],Ex=["addEventListener","removeEventListener"],Mx=["on","off"];function Hi(e,t,n,r){if(et(n)&&(r=n,n=void 0),r)return Hi(e,t,n).pipe(La(r));let[s,o]=Tx(e)?Ex.map(I=>i=>e[I](t,i,n)):wx(e)?xx.map(Xg(e,t)):_x(e)?Mx.map(Xg(e,t)):[];if(!s&&zi(e))return Gt(I=>Hi(I,t,n))(Bt(e));if(!s)throw new TypeError("Invalid event target");return new It(I=>{let i=(...a)=>I.next(1<a.length?a:a[0]);return s(i),()=>o(i)})}function Xg(e,t){return n=>r=>e[n](t,r)}function wx(e){return et(e.addListener)&&et(e.removeListener)}function _x(e){return et(e.on)&&et(e.off)}function Tx(e){return et(e.addEventListener)&&et(e.removeEventListener)}function $g(e=0,t,n=wg){let r=-1;return t!=null&&(xa(t)?n=t:r=t),new It(s=>{let o=Hg(e)?+e-n.now():e;o<0&&(o=0);let I=0;return n.schedule(function(){s.closed||(s.next(I++),0<=r?this.schedule(void 0,r):s.complete())},o)})}function Fa(...e){let t=dr(e),n=Tg(e,1/0),r=e;return r.length?r.length===1?Bt(r[0]):Ro(n)(en(r,t)):Sn}var gi=new It(Dr);function cn(e,t){return mt((n,r)=>{let s=0;n.subscribe(bt(r,o=>e.call(t,o,s++)&&r.next(o)))})}function $r(e){return mt((t,n)=>{let r=null,s=!1,o;r=t.subscribe(bt(n,void 0,void 0,I=>{o=Bt(e(I,$r(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Zg(e,t,n,r,s){return(o,I)=>{let i=n,a=t,M=0;o.subscribe(bt(I,T=>{let P=M++;a=i?e(a,T,P):(i=!0,T),r&&I.next(a)},s&&(()=>{i&&I.next(a),I.complete()})))}}function Ui(e,t){return et(t)?Gt(e,t,1):Gt(e,1)}function Qg(e){return new It(t=>e.subscribe(t))}var Ax={connector:()=>new Zt};function Ba(e,t=Ax){let{connector:n}=t;return mt((r,s)=>{let o=n();Bt(e(Qg(o))).subscribe(s),s.add(r.subscribe(o))})}function Zr(e){return mt((t,n)=>{let r=!1;t.subscribe(bt(n,s=>{r=!0,n.next(s)},()=>{r||n.next(e),n.complete()}))})}function on(e){return e<=0?()=>Sn:mt((t,n)=>{let r=0;t.subscribe(bt(n,s=>{++r<=e&&(n.next(s),e<=r&&n.complete())}))})}function Jg(){return mt((e,t)=>{e.subscribe(bt(t,Dr))})}function Lo(e){return ut(()=>e)}function Fc(e,t){return t?n=>fr(t.pipe(on(1),Jg()),n.pipe(Fc(e))):Gt((n,r)=>Bt(e(n,r)).pipe(on(1),Lo(n)))}function Bc(e,t=Rc){let n=$g(e,t);return Fc(()=>n)}function za(e=Ox){return mt((t,n)=>{let r=!1;t.subscribe(bt(n,s=>{r=!0,n.next(s)},()=>r?n.complete():n.error(e())))})}function Ox(){return new xr}function jo(e){return mt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function hr(e,t){let n=arguments.length>=2;return r=>r.pipe(e?cn((s,o)=>e(s,o,r)):An,on(1),n?Zr(t):za(()=>new xr))}function Vi(e){return e<=0?()=>Sn:mt((t,n)=>{let r=[];t.subscribe(bt(n,s=>{r.push(s),e<r.length&&r.shift()},()=>{for(let s of r)n.next(s);n.complete()},void 0,()=>{r=null}))})}function zc(e,t){let n=arguments.length>=2;return r=>r.pipe(e?cn((s,o)=>e(s,o,r)):An,Vi(1),n?Zr(t):za(()=>new xr))}function Kg(e,t){let n=et(e)?e:()=>e;return et(t)?Ba(t,{connector:n}):r=>new Yr(r,n)}function Hc(e){return e?t=>Ba(e)(t):t=>Kg(new Zt)(t)}function Uc(e,t){return mt(Zg(e,t,arguments.length>=2,!0))}function Vc(...e){let t=dr(e);return mt((n,r)=>{(t?fr(e,n,t):fr(e,n)).subscribe(r)})}function gn(e,t){return mt((n,r)=>{let s=null,o=0,I=!1,i=()=>I&&!s&&r.complete();n.subscribe(bt(r,a=>{s?.unsubscribe();let M=0,T=o++;Bt(e(a,T)).subscribe(s=bt(r,P=>r.next(t?t(a,P,T,M++):P),()=>{s=null,i()}))},()=>{I=!0,i()}))})}function Wc(e){return mt((t,n)=>{Bt(e).subscribe(bt(n,()=>n.complete(),Dr)),!n.closed&&t.subscribe(n)})}function sn(e,t,n){let r=et(e)||t||n?{next:e,error:t,complete:n}:e;return r?mt((s,o)=>{var I;(I=r.subscribe)===null||I===void 0||I.call(r);let i=!0;s.subscribe(bt(o,a=>{var M;(M=r.next)===null||M===void 0||M.call(r,a),o.next(a)},()=>{var a;i=!1,(a=r.complete)===null||a===void 0||a.call(r),o.complete()},a=>{var M;i=!1,(M=r.error)===null||M===void 0||M.call(r,a),o.error(a)},()=>{var a,M;i&&((a=r.unsubscribe)===null||a===void 0||a.call(r)),(M=r.finalize)===null||M===void 0||M.call(r)}))}):An}var jp="https://g.co/ng/security#xss",at=class extends Error{constructor(t,n){super(Gu(t,n)),this.code=t}};function Gu(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Yu(e){return{toString:e}.toString()}var Bo=globalThis;function jt(e){for(let t in e)if(e[t]===jt)return t;throw Error("Could not find renamed property on target object.")}function _n(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(_n).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function ru(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var Nx=jt({__forward_ref__:jt});function Fp(e){return e.__forward_ref__=Fp,e.toString=function(){return _n(this())},e}function Vn(e){return Bp(e)?e():e}function Bp(e){return typeof e=="function"&&e.hasOwnProperty(Nx)&&e.__forward_ref__===Fp}function nt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function pl(e){return qg(e,Hp)||qg(e,Up)}function zp(e){return pl(e)!==null}function qg(e,t){return e.hasOwnProperty(t)?e[t]:null}function Px(e){let t=e&&(e[Hp]||e[Up]);return t||null}function ep(e){return e&&(e.hasOwnProperty(tp)||e.hasOwnProperty(kx))?e[tp]:null}var Hp=jt({\u0275prov:jt}),tp=jt({\u0275inj:jt}),Up=jt({ngInjectableDef:jt}),kx=jt({ngInjectorDef:jt}),dt=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=nt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Vp(e){return e&&!!e.\u0275providers}var Rx=jt({\u0275cmp:jt}),Lx=jt({\u0275dir:jt}),jx=jt({\u0275pipe:jt}),Fx=jt({\u0275mod:jt}),Za=jt({\u0275fac:jt}),Fo=jt({__NG_ELEMENT_ID__:jt}),np=jt({__NG_ENV_ID__:jt});function Xu(e){return typeof e=="string"?e:e==null?"":String(e)}function Bx(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Xu(e)}function zx(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new at(-200,e)}function $u(e,t){throw new at(-201,!1)}var pt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(pt||{}),iu;function Wp(){return iu}function Un(e){let t=iu;return iu=e,t}function Gp(e,t,n){let r=pl(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&pt.Optional)return null;if(t!==void 0)return t;$u(e,"Injector")}var Hx={},zo=Hx,Ux="__NG_DI_FLAG__",Qa="ngTempTokenPath",Vx="ngTokenPath",Wx=/\n/gm,Gx="\u0275",rp="__source",Xi;function Yx(){return Xi}function Qr(e){let t=Xi;return Xi=e,t}function Xx(e,t=pt.Default){if(Xi===void 0)throw new at(-203,!1);return Xi===null?Gp(e,void 0,t):Xi.get(e,t&pt.Optional?null:void 0,t)}function ft(e,t=pt.Default){return(Wp()||Xx)(Vn(e),t)}function $e(e,t=pt.Default){return ft(e,vl(t))}function vl(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ou(e){let t=[];for(let n=0;n<e.length;n++){let r=Vn(e[n]);if(Array.isArray(r)){if(r.length===0)throw new at(900,!1);let s,o=pt.Default;for(let I=0;I<r.length;I++){let i=r[I],a=$x(i);typeof a=="number"?a===-1?s=i.token:o|=a:s=i}t.push(ft(s,o))}else t.push(ft(r))}return t}function $x(e){return e[Ux]}function Zx(e,t,n,r){let s=e[Qa];throw t[rp]&&s.unshift(t[rp]),e.message=Qx(`
`+e.message,s,n,r),e[Vx]=s,e[Qa]=null,e}function Qx(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Gx?e.slice(2):e;let s=_n(t);if(Array.isArray(t))s=t.map(_n).join(" -> ");else if(typeof t=="object"){let o=[];for(let I in t)if(t.hasOwnProperty(I)){let i=t[I];o.push(I+":"+(typeof i=="string"?JSON.stringify(i):_n(i)))}s=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace(Wx,`
  `)}`}function Zi(e,t){let n=e.hasOwnProperty(Za);return n?e[Za]:null}function Jx(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],o=t[r];if(n&&(s=n(s),o=n(o)),o!==s)return!1}return!0}function Kx(e){return e.flat(Number.POSITIVE_INFINITY)}function Zu(e,t){e.forEach(n=>Array.isArray(n)?Zu(n,t):t(n))}function Yp(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ja(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function qx(e,t,n,r){let s=e.length;if(s==t)e.push(n,r);else if(s===1)e.push(r,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;){let o=s-2;e[s]=e[o],s--}e[t]=n,e[t+1]=r}}function Xp(e,t,n){let r=Qo(e,t);return r>=0?e[r|1]=n:(r=~r,qx(e,r,t,n)),r}function Gc(e,t){let n=Qo(e,t);if(n>=0)return e[n|1]}function Qo(e,t){return eE(e,t,1)}function eE(e,t,n){let r=0,s=e.length>>n;for(;s!==r;){let o=r+(s-r>>1),I=e[o<<n];if(t===I)return o<<n;I>t?s=o:r=o+1}return~(s<<n)}var Ho={},Er=[],Qi=new dt(""),$p=new dt("",-1),Zp=new dt(""),Ka=class{get(t,n=zo){if(n===zo){let r=new Error(`NullInjectorError: No provider for ${_n(t)}!`);throw r.name="NullInjectorError",r}return n}},Qp=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Qp||{}),vr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(vr||{}),qr=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(qr||{});function tE(e,t,n){let r=e.length;for(;;){let s=e.indexOf(t,n);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let o=t.length;if(s+o===r||e.charCodeAt(s+o)<=32)return s}n=s+1}}function su(e,t,n){let r=0;for(;r<n.length;){let s=n[r];if(typeof s=="number"){if(s!==0)break;r++;let o=n[r++],I=n[r++],i=n[r++];e.setAttribute(t,I,i,o)}else{let o=s,I=n[++r];nE(o)?e.setProperty(t,o,I):e.setAttribute(t,o,I),r++}}return r}function Jp(e){return e===3||e===4||e===6}function nE(e){return e.charCodeAt(0)===64}function Qu(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let s=t[r];typeof s=="number"?n=s:n===0||(n===-1||n===2?ip(e,n,s,null,t[++r]):ip(e,n,s,null,null))}}return e}function ip(e,t,n,r,s){let o=0,I=e.length;if(t===-1)I=-1;else for(;o<e.length;){let i=e[o++];if(typeof i=="number"){if(i===t){I=-1;break}else if(i>t){I=o-1;break}}}for(;o<e.length;){let i=e[o];if(typeof i=="number")break;if(i===n){if(r===null){s!==null&&(e[o+1]=s);return}else if(r===e[o+1]){e[o+2]=s;return}}o++,r!==null&&o++,s!==null&&o++}I!==-1&&(e.splice(I,0,t),o=I+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),s!==null&&e.splice(o++,0,s)}var Kp="ng-template";function rE(e,t,n,r){let s=0;if(r){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&tE(t[s+1].toLowerCase(),n,0)!==-1)return!0}else if(Ju(e))return!1;if(s=t.indexOf(1,s),s>-1){let o;for(;++s<t.length&&typeof(o=t[s])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ju(e){return e.type===4&&e.value!==Kp}function iE(e,t,n){let r=e.type===4&&!n?Kp:e.value;return t===r}function oE(e,t,n){let r=4,s=e.attrs,o=s!==null?lE(s):0,I=!1;for(let i=0;i<t.length;i++){let a=t[i];if(typeof a=="number"){if(!I&&!tr(r)&&!tr(a))return!1;if(I&&tr(a))continue;I=!1,r=a|r&1;continue}if(!I)if(r&4){if(r=2|r&1,a!==""&&!iE(e,a,n)||a===""&&t.length===1){if(tr(r))return!1;I=!0}}else if(r&8){if(s===null||!rE(e,s,a,n)){if(tr(r))return!1;I=!0}}else{let M=t[++i],T=sE(a,s,Ju(e),n);if(T===-1){if(tr(r))return!1;I=!0;continue}if(M!==""){let P;if(T>o?P="":P=s[T+1].toLowerCase(),r&2&&M!==P){if(tr(r))return!1;I=!0}}}}return tr(r)||I}function tr(e){return(e&1)===0}function sE(e,t,n,r){if(t===null)return-1;let s=0;if(r||!n){let o=!1;for(;s<t.length;){let I=t[s];if(I===e)return s;if(I===3||I===6)o=!0;else if(I===1||I===2){let i=t[++s];for(;typeof i=="string";)i=t[++s];continue}else{if(I===4)break;if(I===0){s+=4;continue}}s+=o?1:2}return-1}else return cE(t,e)}function aE(e,t,n=!1){for(let r=0;r<t.length;r++)if(oE(e,t[r],n))return!0;return!1}function lE(e){for(let t=0;t<e.length;t++){let n=e[t];if(Jp(n))return t}return e.length}function cE(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function op(e,t){return e?":not("+t.trim()+")":t}function uE(e){let t=e[0],n=1,r=2,s="",o=!1;for(;n<e.length;){let I=e[n];if(typeof I=="string")if(r&2){let i=e[++n];s+="["+I+(i.length>0?'="'+i+'"':"")+"]"}else r&8?s+="."+I:r&4&&(s+=" "+I);else s!==""&&!tr(I)&&(t+=op(o,s),s=""),r=I,o=o||!tr(r);n++}return s!==""&&(t+=op(o,s)),t}function dE(e){return e.map(uE).join(",")}function fE(e){let t=[],n=[],r=1,s=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")s===2?o!==""&&t.push(o,e[++r]):s===8&&n.push(o);else{if(!tr(s))break;s=o}r++}return{attrs:t,classes:n}}function Yn(e){return Yu(()=>{let t=rv(e),n=qt(Ke({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Qp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||vr.Emulated,styles:e.styles||Er,_:null,schemas:e.schemas||null,tView:null,id:""});iv(n);let r=e.dependencies;return n.directiveDefs=ap(r,!1),n.pipeDefs=ap(r,!0),n.id=pE(n),n})}function hE(e){return mi(e)||qp(e)}function gE(e){return e!==null}function sp(e,t){if(e==null)return Ho;let n={};for(let r in e)if(e.hasOwnProperty(r)){let s=e[r],o,I,i=qr.None;Array.isArray(s)?(i=s[0],o=s[1],I=s[2]??o):(o=s,I=s),t?(n[o]=i!==qr.None?[r,i]:r,t[o]=I):n[o]=r}return n}function Jo(e){return Yu(()=>{let t=rv(e);return iv(t),t})}function mi(e){return e[Rx]||null}function qp(e){return e[Lx]||null}function ev(e){return e[jx]||null}function tv(e){let t=mi(e)||qp(e)||ev(e);return t!==null?t.standalone:!1}function nv(e,t){let n=e[Fx]||null;if(!n&&t===!0)throw new Error(`Type ${_n(e)} does not have '\u0275mod' property.`);return n}function rv(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Ho,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Er,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sp(e.inputs,t),outputs:sp(e.outputs),debugInfo:null}}function iv(e){e.features?.forEach(t=>t(e))}function ap(e,t){if(!e)return null;let n=t?ev:hE;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(gE)}function pE(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let s of n)t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function io(e){return{\u0275providers:e}}function vE(...e){return{\u0275providers:ov(!0,e),\u0275fromNgModule:!0}}function ov(e,...t){let n=[],r=new Set,s,o=I=>{n.push(I)};return Zu(t,I=>{let i=I;au(i,o,[],r)&&(s||=[],s.push(i))}),s!==void 0&&sv(s,o),n}function sv(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:s}=e[n];Ku(s,o=>{t(o,r)})}}function au(e,t,n,r){if(e=Vn(e),!e)return!1;let s=null,o=ep(e),I=!o&&mi(e);if(!o&&!I){let a=e.ngModule;if(o=ep(a),o)s=a;else return!1}else{if(I&&!I.standalone)return!1;s=e}let i=r.has(s);if(I){if(i)return!1;if(r.add(s),I.dependencies){let a=typeof I.dependencies=="function"?I.dependencies():I.dependencies;for(let M of a)au(M,t,n,r)}}else if(o){if(o.imports!=null&&!i){r.add(s);let M;try{Zu(o.imports,T=>{au(T,t,n,r)&&(M||=[],M.push(T))})}finally{}M!==void 0&&sv(M,t)}if(!i){let M=Zi(s)||(()=>new s);t({provide:s,useFactory:M,deps:Er},s),t({provide:Zp,useValue:s,multi:!0},s),t({provide:Qi,useValue:()=>ft(s),multi:!0},s)}let a=o.providers;if(a!=null&&!i){let M=e;Ku(a,T=>{t(T,M)})}}else return!1;return s!==e&&e.providers!==void 0}function Ku(e,t){for(let n of e)Vp(n)&&(n=n.\u0275providers),Array.isArray(n)?Ku(n,t):t(n)}var mE=jt({provide:String,useValue:jt});function av(e){return e!==null&&typeof e=="object"&&mE in e}function yE(e){return!!(e&&e.useExisting)}function CE(e){return!!(e&&e.useFactory)}function lu(e){return typeof e=="function"}var ml=new dt(""),Va={},IE={},Yc;function qu(){return Yc===void 0&&(Yc=new Ka),Yc}var Gn=class{},Uo=class extends Gn{get destroyed(){return this._destroyed}constructor(t,n,r,s){super(),this.parent=n,this.source=r,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uu(t,I=>this.processProvider(I)),this.records.set($p,Wi(void 0,this)),s.has("environment")&&this.records.set(Gn,Wi(void 0,this));let o=this.records.get(ml);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Zp,Er,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Nt(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Nt(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Qr(this),r=Un(void 0),s;try{return t()}finally{Qr(n),Un(r)}}get(t,n=zo,r=pt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(np))return t[np](this);r=vl(r);let s,o=Qr(this),I=Un(void 0);try{if(!(r&pt.SkipSelf)){let a=this.records.get(t);if(a===void 0){let M=ME(t)&&pl(t);M&&this.injectableDefInScope(M)?a=Wi(cu(t),Va):a=null,this.records.set(t,a)}if(a!=null)return this.hydrate(t,a)}let i=r&pt.Self?qu():this.parent;return n=r&pt.Optional&&n===zo?null:n,i.get(t,n)}catch(i){if(i.name==="NullInjectorError"){if((i[Qa]=i[Qa]||[]).unshift(_n(t)),o)throw i;return Zx(i,t,"R3InjectorError",this.source)}else throw i}finally{Un(I),Qr(o)}}resolveInjectorInitializers(){let t=Nt(null),n=Qr(this),r=Un(void 0),s;try{let o=this.get(Qi,Er,pt.Self);for(let I of o)I()}finally{Qr(n),Un(r),Nt(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(_n(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new at(205,!1)}processProvider(t){t=Vn(t);let n=lu(t)?t:Vn(t&&t.provide),r=SE(t);if(!lu(t)&&t.multi===!0){let s=this.records.get(n);s||(s=Wi(void 0,Va,!0),s.factory=()=>ou(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Nt(null);try{return n.value===Va&&(n.value=IE,n.value=n.factory()),typeof n.value=="object"&&n.value&&EE(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Nt(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Vn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function cu(e){let t=pl(e),n=t!==null?t.factory:Zi(e);if(n!==null)return n;if(e instanceof dt)throw new at(204,!1);if(e instanceof Function)return bE(e);throw new at(204,!1)}function bE(e){if(e.length>0)throw new at(204,!1);let n=Px(e);return n!==null?()=>n.factory(e):()=>new e}function SE(e){if(av(e))return Wi(void 0,e.useValue);{let t=DE(e);return Wi(t,Va)}}function DE(e,t,n){let r;if(lu(e)){let s=Vn(e);return Zi(s)||cu(s)}else if(av(e))r=()=>Vn(e.useValue);else if(CE(e))r=()=>e.useFactory(...ou(e.deps||[]));else if(yE(e))r=()=>ft(Vn(e.useExisting));else{let s=Vn(e&&(e.useClass||e.provide));if(xE(e))r=()=>new s(...ou(e.deps));else return Zi(s)||cu(s)}return r}function Wi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function xE(e){return!!e.deps}function EE(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function ME(e){return typeof e=="function"||typeof e=="object"&&e instanceof dt}function uu(e,t){for(let n of e)Array.isArray(n)?uu(n,t):n&&Vp(n)?uu(n.\u0275providers,t):t(n)}function Ar(e,t){e instanceof Uo&&e.assertNotDestroyed();let n,r=Qr(e),s=Un(void 0);try{return t()}finally{Qr(r),Un(s)}}function wE(){return Wp()!==void 0||Yx()!=null}function _E(e){return typeof e=="function"}var Or=0,vt=1,st=2,vn=3,nr=4,ir=5,qa=6,el=7,rr=8,Ji=9,mr=10,mn=11,Vo=12,lp=13,oo=14,yr=15,yi=16,Gi=17,Mr=18,yl=19,lv=20,Jr=21,Xc=22,Wn=23,ei=25,cv=1;var Ci=7,tl=8,Ki=9,On=10,nl=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(nl||{});function Kr(e){return Array.isArray(e)&&typeof e[cv]=="object"}function Nr(e){return Array.isArray(e)&&e[cv]===!0}function uv(e){return(e.flags&4)!==0}function Cl(e){return e.componentOffset>-1}function ed(e){return(e.flags&1)===1}function Ko(e){return!!e.template}function du(e){return(e[st]&512)!==0}var fu=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function dv(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function qo(){return fv}function fv(e){return e.type.prototype.ngOnChanges&&(e.setInput=AE),TE}qo.ngInherit=!0;function TE(){let e=gv(this),t=e?.current;if(t){let n=e.previous;if(n===Ho)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function AE(e,t,n,r,s){let o=this.declaredInputs[r],I=gv(e)||OE(e,{previous:Ho,current:null}),i=I.current||(I.current={}),a=I.previous,M=a[o];i[o]=new fu(M&&M.currentValue,n,a===Ho),dv(e,t,s,n)}var hv="__ngSimpleChanges__";function gv(e){return e[hv]||null}function OE(e,t){return e[hv]=t}var cp=null;var gr=function(e,t,n){cp?.(e,t,n)},pv="svg",NE="math";function Cr(e){for(;Array.isArray(e);)e=e[Or];return e}function PE(e,t){return Cr(t[e])}function Xn(e,t){return Cr(t[e.index])}function vv(e,t){return e.data[t]}function ni(e,t){let n=t[e];return Kr(n)?n:n[Or]}function kE(e){return(e[st]&4)===4}function td(e){return(e[st]&128)===128}function RE(e){return Nr(e[vn])}function rl(e,t){return t==null?null:e[t]}function mv(e){e[Gi]=0}function yv(e){e[st]&1024||(e[st]|=1024,td(e)&&Il(e))}function LE(e,t){for(;e>0;)t=t[oo],e--;return t}function Wo(e){return!!(e[st]&9216||e[Wn]?.dirty)}function hu(e){e[mr].changeDetectionScheduler?.notify(7),e[st]&64&&(e[st]|=1024),Wo(e)&&Il(e)}function Il(e){e[mr].changeDetectionScheduler?.notify(0);let t=Ii(e);for(;t!==null&&!(t[st]&8192||(t[st]|=8192,!td(t)));)t=Ii(t)}function Cv(e,t){if((e[st]&256)===256)throw new at(911,!1);e[Jr]===null&&(e[Jr]=[]),e[Jr].push(t)}function jE(e,t){if(e[Jr]===null)return;let n=e[Jr].indexOf(t);n!==-1&&e[Jr].splice(n,1)}function Ii(e){let t=e[vn];return Nr(t)?t[vn]:t}var yt={lFrame:Tv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Iv=!1;function FE(){return yt.lFrame.elementDepthCount}function BE(){yt.lFrame.elementDepthCount++}function zE(){yt.lFrame.elementDepthCount--}function bv(){return yt.bindingsEnabled}function HE(){return yt.skipHydrationRootTNode!==null}function UE(e){return yt.skipHydrationRootTNode===e}function VE(){yt.skipHydrationRootTNode=null}function Wt(){return yt.lFrame.lView}function or(){return yt.lFrame.tView}function Nn(e){return yt.lFrame.contextLView=e,e[rr]}function Pn(e){return yt.lFrame.contextLView=null,e}function kn(){let e=Sv();for(;e!==null&&e.type===64;)e=e.parent;return e}function Sv(){return yt.lFrame.currentTNode}function WE(){let e=yt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function es(e,t){let n=yt.lFrame;n.currentTNode=e,n.isParent=t}function Dv(){return yt.lFrame.isParent}function GE(){yt.lFrame.isParent=!1}function xv(){return Iv}function up(e){Iv=e}function YE(e){return yt.lFrame.bindingIndex=e}function Ev(){return yt.lFrame.bindingIndex++}function XE(e){let t=yt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function $E(){return yt.lFrame.inI18n}function ZE(e,t){let n=yt.lFrame;n.bindingIndex=n.bindingRootIndex=e,gu(t)}function QE(){return yt.lFrame.currentDirectiveIndex}function gu(e){yt.lFrame.currentDirectiveIndex=e}function JE(e){let t=yt.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Mv(){return yt.lFrame.currentQueryIndex}function nd(e){yt.lFrame.currentQueryIndex=e}function KE(e){let t=e[vt];return t.type===2?t.declTNode:t.type===1?e[ir]:null}function wv(e,t,n){if(n&pt.SkipSelf){let s=t,o=e;for(;s=s.parent,s===null&&!(n&pt.Host);)if(s=KE(o),s===null||(o=o[oo],s.type&10))break;if(s===null)return!1;t=s,e=o}let r=yt.lFrame=_v();return r.currentTNode=t,r.lView=e,!0}function rd(e){let t=_v(),n=e[vt];yt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function _v(){let e=yt.lFrame,t=e===null?null:e.child;return t===null?Tv(e):t}function Tv(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Av(){let e=yt.lFrame;return yt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ov=Av;function id(){let e=Av();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function qE(e){return(yt.lFrame.contextLView=LE(e,yt.lFrame.contextLView))[rr]}function ts(){return yt.lFrame.selectedIndex}function bi(e){yt.lFrame.selectedIndex=e}function Nv(){let e=yt.lFrame;return vv(e.tView,e.selectedIndex)}function Pv(){yt.lFrame.currentNamespace=pv}function eM(){return yt.lFrame.currentNamespace}var kv=!0;function od(){return kv}function sd(e){kv=e}function tM(e,t,n){let{ngOnChanges:r,ngOnInit:s,ngDoCheck:o}=t.type.prototype;if(r){let I=fv(t);(n.preOrderHooks??=[]).push(e,I),(n.preOrderCheckHooks??=[]).push(e,I)}s&&(n.preOrderHooks??=[]).push(0-e,s),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function ad(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:i,ngAfterViewInit:a,ngAfterViewChecked:M,ngOnDestroy:T}=o;I&&(e.contentHooks??=[]).push(-n,I),i&&((e.contentHooks??=[]).push(n,i),(e.contentCheckHooks??=[]).push(n,i)),a&&(e.viewHooks??=[]).push(-n,a),M&&((e.viewHooks??=[]).push(n,M),(e.viewCheckHooks??=[]).push(n,M)),T!=null&&(e.destroyHooks??=[]).push(n,T)}}function Wa(e,t,n){Rv(e,t,3,n)}function Ga(e,t,n,r){(e[st]&3)===n&&Rv(e,t,n,r)}function $c(e,t){let n=e[st];(n&3)===t&&(n&=16383,n+=1,e[st]=n)}function Rv(e,t,n,r){let s=r!==void 0?e[Gi]&65535:0,o=r??-1,I=t.length-1,i=0;for(let a=s;a<I;a++)if(typeof t[a+1]=="number"){if(i=t[a],r!=null&&i>=r)break}else t[a]<0&&(e[Gi]+=65536),(i<o||o==-1)&&(nM(e,n,t,a),e[Gi]=(e[Gi]&4294901760)+a+2),a++}function dp(e,t){gr(4,e,t);let n=Nt(null);try{t.call(e)}finally{Nt(n),gr(5,e,t)}}function nM(e,t,n,r){let s=n[r]<0,o=n[r+1],I=s?-n[r]:n[r],i=e[I];s?e[st]>>14<e[Gi]>>16&&(e[st]&3)===t&&(e[st]+=16384,dp(i,o)):dp(i,o)}var $i=-1,Go=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function rM(e){return e instanceof Go}function iM(e){return(e.flags&8)!==0}function oM(e){return(e.flags&16)!==0}var Zc={},pu=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=vl(r);let s=this.injector.get(t,Zc,r);return s!==Zc||n===Zc?s:this.parentInjector.get(t,n,r)}};function Lv(e){return e!==$i}function il(e){return e&32767}function sM(e){return e>>16}function ol(e,t){let n=sM(e),r=t;for(;n>0;)r=r[oo],n--;return r}var vu=!0;function fp(e){let t=vu;return vu=e,t}var aM=256,jv=aM-1,Fv=5,lM=0,pr={};function cM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fo)&&(r=n[Fo]),r==null&&(r=n[Fo]=lM++);let s=r&jv,o=1<<s;t.data[e+(s>>Fv)]|=o}function Bv(e,t){let n=zv(e,t);if(n!==-1)return n;let r=t[vt];r.firstCreatePass&&(e.injectorIndex=t.length,Qc(r.data,e),Qc(t,null),Qc(r.blueprint,null));let s=ld(e,t),o=e.injectorIndex;if(Lv(s)){let I=il(s),i=ol(s,t),a=i[vt].data;for(let M=0;M<8;M++)t[o+M]=i[I+M]|a[I+M]}return t[o+8]=s,o}function Qc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function zv(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function ld(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;s!==null;){if(r=Gv(s),r===null)return $i;if(n++,s=s[oo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return $i}function uM(e,t,n){cM(e,t,n)}function dM(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,s=0;for(;s<r;){let o=n[s];if(Jp(o))break;if(o===0)s=s+2;else if(typeof o=="number")for(s++;s<r&&typeof n[s]=="string";)s++;else{if(o===t)return n[s+1];s=s+2}}}return null}function Hv(e,t,n){if(n&pt.Optional||e!==void 0)return e;$u(t,"NodeInjector")}function Uv(e,t,n,r){if(n&pt.Optional&&r===void 0&&(r=null),!(n&(pt.Self|pt.Host))){let s=e[Ji],o=Un(void 0);try{return s?s.get(t,r,n&pt.Optional):Gp(t,r,n&pt.Optional)}finally{Un(o)}}return Hv(r,t,n)}function Vv(e,t,n,r=pt.Default,s){if(e!==null){if(t[st]&2048&&!(r&pt.Self)){let I=pM(e,t,n,r,pr);if(I!==pr)return I}let o=Wv(e,t,n,r,pr);if(o!==pr)return o}return Uv(t,n,r,s)}function Wv(e,t,n,r,s){let o=hM(n);if(typeof o=="function"){if(!wv(t,e,r))return r&pt.Host?Hv(s,n,r):Uv(t,n,r,s);try{let I;if(I=o(r),I==null&&!(r&pt.Optional))$u(n);else return I}finally{Ov()}}else if(typeof o=="number"){let I=null,i=zv(e,t),a=$i,M=r&pt.Host?t[yr][ir]:null;for((i===-1||r&pt.SkipSelf)&&(a=i===-1?ld(e,t):t[i+8],a===$i||!gp(r,!1)?i=-1:(I=t[vt],i=il(a),t=ol(a,t)));i!==-1;){let T=t[vt];if(hp(o,i,T.data)){let P=fM(i,t,n,I,r,M);if(P!==pr)return P}a=t[i+8],a!==$i&&gp(r,t[vt].data[i+8]===M)&&hp(o,i,t)?(I=T,i=il(a),t=ol(a,t)):i=-1}}return s}function fM(e,t,n,r,s,o){let I=t[vt],i=I.data[e+8],a=r==null?Cl(i)&&vu:r!=I&&(i.type&3)!==0,M=s&pt.Host&&o===i,T=Ya(i,I,n,a,M);return T!==null?qi(t,I,T,i):pr}function Ya(e,t,n,r,s){let o=e.providerIndexes,I=t.data,i=o&1048575,a=e.directiveStart,M=e.directiveEnd,T=o>>20,P=r?i:i+T,k=s?i+T:M;for(let R=P;R<k;R++){let b=I[R];if(R<a&&n===b||R>=a&&b.type===n)return R}if(s){let R=I[a];if(R&&Ko(R)&&R.type===n)return a}return null}function qi(e,t,n,r){let s=e[n],o=t.data;if(rM(s)){let I=s;I.resolving&&zx(Bx(o[n]));let i=fp(I.canSeeViewProviders);I.resolving=!0;let a,M=I.injectImpl?Un(I.injectImpl):null,T=wv(e,r,pt.Default);try{s=e[n]=I.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&tM(n,o[n],t)}finally{M!==null&&Un(M),fp(i),I.resolving=!1,Ov()}}return s}function hM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Fo)?e[Fo]:void 0;return typeof t=="number"?t>=0?t&jv:gM:t}function hp(e,t,n){let r=1<<e;return!!(n[t+(e>>Fv)]&r)}function gp(e,t){return!(e&pt.Self)&&!(e&pt.Host&&t)}var vi=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Vv(this._tNode,this._lView,t,vl(r),n)}};function gM(){return new vi(kn(),Wt())}function cd(e){return Yu(()=>{let t=e.prototype.constructor,n=t[Za]||mu(t),r=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==r;){let o=s[Za]||mu(s);if(o&&o!==n)return o;s=Object.getPrototypeOf(s)}return o=>new o})}function mu(e){return Bp(e)?()=>{let t=mu(Vn(e));return t&&t()}:Zi(e)}function pM(e,t,n,r,s){let o=e,I=t;for(;o!==null&&I!==null&&I[st]&2048&&!(I[st]&512);){let i=Wv(o,I,n,r|pt.Self,pr);if(i!==pr)return i;let a=o.parent;if(!a){let M=I[lv];if(M){let T=M.get(n,pr,r);if(T!==pr)return T}a=Gv(I),I=I[oo]}o=a}return s}function Gv(e){let t=e[vt],n=t.type;return n===2?t.declTNode:n===1?e[ir]:null}function ud(e){return dM(kn(),e)}function pp(e,t=null,n=null,r){let s=Yv(e,t,n,r);return s.resolveInjectorInitializers(),s}function Yv(e,t=null,n=null,r,s=new Set){let o=[n||Er,vE(e)];return r=r||(typeof e=="object"?void 0:_n(e)),new Uo(o,t||qu(),r||null,s)}var pi=class pi{static create(t,n){if(Array.isArray(t))return pp({name:""},n,t,"");{let r=t.name??"";return pp({name:r},t.parent,t.providers,r)}}};pi.THROW_IF_NOT_FOUND=zo,pi.NULL=new Ka,pi.\u0275prov=nt({token:pi,providedIn:"any",factory:()=>ft($p)}),pi.__NG_ELEMENT_ID__=-1;var wr=pi;var vM=new dt("");vM.__NG_ELEMENT_ID__=e=>{let t=kn();if(t===null)throw new at(204,!1);if(t.type&2)return t.value;if(e&pt.Optional)return null;throw new at(204,!1)};var mM="ngOriginalError";function Jc(e){return e[mM]}var _r=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Jc(t);for(;n&&Jc(n);)n=Jc(n);return n||null}},Xv=new dt("",{providedIn:"root",factory:()=>$e(_r).handleError.bind(void 0)}),$v=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=yM,t.__NG_ENV_ID__=r=>r;let e=t;return e})(),yu=class extends $v{constructor(t){super(),this._lView=t}onDestroy(t){return Cv(this._lView,t),()=>jE(this._lView,t)}};function yM(){return new yu(Wt())}function CM(){return so(kn(),Wt())}function so(e,t){return new ri(Xn(e,t))}var ri=(()=>{let t=class t{constructor(r){this.nativeElement=r}};t.__NG_ELEMENT_ID__=CM;let e=t;return e})();function IM(e){return e instanceof ri?e.nativeElement:e}var ao=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ln(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275prov=nt({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();var Cu=class extends Zt{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,wE()&&(this.destroyRef=$e($v,{optional:!0})??void 0,this.pendingTasks=$e(ao,{optional:!0})??void 0)}emit(t){let n=Nt(null);try{super.next(t)}finally{Nt(n)}}subscribe(t,n,r){let s=t,o=n||(()=>null),I=r;if(t&&typeof t=="object"){let a=t;s=a.next?.bind(a),o=a.error?.bind(a),I=a.complete?.bind(a)}this.__isAsync&&(o=this.wrapInTimeout(o),s&&(s=this.wrapInTimeout(s)),I&&(I=this.wrapInTimeout(I)));let i=super.subscribe({next:s,error:o,complete:I});return t instanceof $t&&t.add(i),i}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},pn=Cu;function bM(){return this._results[Symbol.iterator]()}var Iu=class e{get changes(){return this._changes??=new pn}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=bM)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=Kx(t);(this._changesDetected=!Jx(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Zv(e){return(e.flags&128)===128}var Qv=new Map,SM=0;function DM(){return SM++}function xM(e){Qv.set(e[yl],e)}function EM(e){Qv.delete(e[yl])}var vp="__ngContext__";function Si(e,t){Kr(t)?(e[vp]=t[yl],xM(t)):e[vp]=t}function Jv(e){return qv(e[Vo])}function Kv(e){return qv(e[nr])}function qv(e){for(;e!==null&&!Nr(e);)e=e[nr];return e}var bu;function em(e){bu=e}function MM(){if(bu!==void 0)return bu;if(typeof document<"u")return document;throw new at(210,!1)}var dd=new dt("",{providedIn:"root",factory:()=>wM}),wM="ng",fd=new dt(""),Pr=new dt("",{providedIn:"platform",factory:()=>"unknown"});var hd=new dt("",{providedIn:"root",factory:()=>MM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _M="h",TM="b";var AM=()=>null;function gd(e,t,n=!1){return AM(e,t,n)}var tm=!1,OM=new dt("",{providedIn:"root",factory:()=>tm});var Ha;function NM(){if(Ha===void 0&&(Ha=null,Bo.trustedTypes))try{Ha=Bo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ha}function mp(e){return NM()?.createScriptURL(e)||e}var sl=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jp})`}};function lo(e){return e instanceof sl?e.changingThisBreaksApplicationSecurity:e}function pd(e,t){let n=PM(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${jp})`)}return n===t}function PM(e){return e instanceof sl&&e.getTypeName()||null}var kM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nm(e){return e=String(e),e.match(kM)?e:"unsafe:"+e}var bl=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(bl||{});function ns(e){let t=im();return t?t.sanitize(bl.URL,e)||"":pd(e,"URL")?lo(e):nm(Xu(e))}function RM(e){let t=im();if(t)return mp(t.sanitize(bl.RESOURCE_URL,e)||"");if(pd(e,"ResourceURL"))return mp(lo(e));throw new at(904,!1)}function LM(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?RM:ns}function rm(e,t,n){return LM(t,n)(e)}function im(){let e=Wt();return e&&e[mr].sanitizer}function om(e){return e instanceof Function?e():e}var Tr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Tr||{}),jM;function vd(e,t){return jM(e,t)}function Yi(e,t,n,r,s){if(r!=null){let o,I=!1;Nr(r)?o=r:Kr(r)&&(I=!0,r=r[Or]);let i=Cr(r);e===0&&n!==null?s==null?um(t,n,i):al(t,n,i,s||null,!0):e===1&&n!==null?al(t,n,i,s||null,!0):e===2?KM(t,i,I):e===3&&t.destroyNode(i),o!=null&&ew(t,e,o,n,s)}}function FM(e,t){return e.createText(t)}function sm(e,t,n){return e.createElement(t,n)}function BM(e,t){am(e,t),t[Or]=null,t[ir]=null}function zM(e,t,n,r,s,o){r[Or]=s,r[ir]=t,Sl(e,r,n,1,s,o)}function am(e,t){t[mr].changeDetectionScheduler?.notify(8),Sl(e,t,t[mn],2,null,null)}function HM(e){let t=e[Vo];if(!t)return Kc(e[vt],e);for(;t;){let n=null;if(Kr(t))n=t[Vo];else{let r=t[On];r&&(n=r)}if(!n){for(;t&&!t[nr]&&t!==e;)Kr(t)&&Kc(t[vt],t),t=t[vn];t===null&&(t=e),Kr(t)&&Kc(t[vt],t),n=t&&t[nr]}t=n}}function UM(e,t,n,r){let s=On+r,o=n.length;r>0&&(n[s-1][nr]=t),r<o-On?(t[nr]=n[s],Yp(n,On+r,t)):(n.push(t),t[nr]=null),t[vn]=n;let I=t[yi];I!==null&&n!==I&&lm(I,t);let i=t[Mr];i!==null&&i.insertView(e),hu(t),t[st]|=128}function lm(e,t){let n=e[Ki],r=t[vn];if(Kr(r))e[st]|=nl.HasTransplantedViews;else{let s=r[vn][yr];t[yr]!==s&&(e[st]|=nl.HasTransplantedViews)}n===null?e[Ki]=[t]:n.push(t)}function md(e,t){let n=e[Ki],r=n.indexOf(t);n.splice(r,1)}function Su(e,t){if(e.length<=On)return;let n=On+t,r=e[n];if(r){let s=r[yi];s!==null&&s!==e&&md(s,r),t>0&&(e[n-1][nr]=r[nr]);let o=Ja(e,On+t);BM(r[vt],r);let I=o[Mr];I!==null&&I.detachView(o[vt]),r[vn]=null,r[nr]=null,r[st]&=-129}return r}function cm(e,t){if(!(t[st]&256)){let n=t[mn];n.destroyNode&&Sl(e,t,n,3,null,null),HM(t)}}function Kc(e,t){if(t[st]&256)return;let n=Nt(null);try{t[st]&=-129,t[st]|=256,t[Wn]&&bc(t[Wn]),WM(e,t),VM(e,t),t[vt].type===1&&t[mn].destroy();let r=t[yi];if(r!==null&&Nr(t[vn])){r!==t[vn]&&md(r,t);let s=t[Mr];s!==null&&s.detachView(e)}EM(t)}finally{Nt(n)}}function VM(e,t){let n=e.cleanup,r=t[el];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let I=n[o+3];I>=0?r[I]():r[-I].unsubscribe(),o+=2}else{let I=r[n[o+1]];n[o].call(I)}r!==null&&(t[el]=null);let s=t[Jr];if(s!==null){t[Jr]=null;for(let o=0;o<s.length;o++){let I=s[o];I()}}}function WM(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let s=t[n[r]];if(!(s instanceof Go)){let o=n[r+1];if(Array.isArray(o))for(let I=0;I<o.length;I+=2){let i=s[o[I]],a=o[I+1];gr(4,i,a);try{a.call(i)}finally{gr(5,i,a)}}else{gr(4,s,o);try{o.call(s)}finally{gr(5,s,o)}}}}}function GM(e,t,n){return YM(e,t.parent,n)}function YM(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Or];{let{componentOffset:s}=r;if(s>-1){let{encapsulation:o}=e.data[r.directiveStart+s];if(o===vr.None||o===vr.Emulated)return null}return Xn(r,n)}}function al(e,t,n,r,s){e.insertBefore(t,n,r,s)}function um(e,t,n){e.appendChild(t,n)}function yp(e,t,n,r,s){r!==null?al(e,t,n,r,s):um(e,t,n)}function XM(e,t,n,r){e.removeChild(t,n,r)}function yd(e,t){return e.parentNode(t)}function $M(e,t){return e.nextSibling(t)}function ZM(e,t,n){return JM(e,t,n)}function QM(e,t,n){return e.type&40?Xn(e,n):null}var JM=QM,Cp;function Cd(e,t,n,r){let s=GM(e,r,t),o=t[mn],I=r.parent||t[ir],i=ZM(I,r,t);if(s!=null)if(Array.isArray(n))for(let a=0;a<n.length;a++)yp(o,s,n[a],i,!1);else yp(o,s,n,i,!1);Cp!==void 0&&Cp(o,r,t,n,s)}function Xa(e,t){if(t!==null){let n=t.type;if(n&3)return Xn(t,e);if(n&4)return Du(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Xa(e,r);{let s=e[t.index];return Nr(s)?Du(-1,s):Cr(s)}}else{if(n&32)return vd(t,e)()||Cr(e[t.index]);{let r=dm(e,t);if(r!==null){if(Array.isArray(r))return r[0];let s=Ii(e[yr]);return Xa(s,r)}else return Xa(e,t.next)}}}return null}function dm(e,t){if(t!==null){let r=e[yr][ir],s=t.projection;return r.projection[s]}return null}function Du(e,t){let n=On+e+1;if(n<t.length){let r=t[n],s=r[vt].firstChild;if(s!==null)return Xa(r,s)}return t[Ci]}function KM(e,t,n){let r=yd(e,t);r&&XM(e,r,t,n)}function Id(e,t,n,r,s,o,I){for(;n!=null;){if(n.type===128){n=n.next;continue}let i=r[n.index],a=n.type;if(I&&t===0&&(i&&Si(Cr(i),r),n.flags|=2),(n.flags&32)!==32)if(a&8)Id(e,t,n.child,r,s,o,!1),Yi(t,e,s,i,o);else if(a&32){let M=vd(n,r),T;for(;T=M();)Yi(t,e,s,T,o);Yi(t,e,s,i,o)}else a&16?qM(e,t,r,n,s,o):Yi(t,e,s,i,o);n=I?n.projectionNext:n.next}}function Sl(e,t,n,r,s,o){Id(n,r,e.firstChild,t,s,o,!1)}function qM(e,t,n,r,s,o){let I=n[yr],a=I[ir].projection[r.projection];if(Array.isArray(a))for(let M=0;M<a.length;M++){let T=a[M];Yi(t,e,s,T,o)}else{let M=a,T=I[vn];Zv(r)&&(M.flags|=128),Id(e,t,M,T,s,o,!0)}}function ew(e,t,n,r,s){let o=n[Ci],I=Cr(n);o!==I&&Yi(t,e,r,o,s);for(let i=On;i<n.length;i++){let a=n[i];Sl(a[vt],a,e,t,r,o)}}function tw(e,t,n,r,s){if(t)s?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Tr.DashCase;s==null?e.removeStyle(n,r,o):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),o|=Tr.Important),e.setStyle(n,r,s,o))}}function nw(e,t,n){e.setAttribute(t,"style",n)}function fm(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function hm(e,t,n){let{mergedAttrs:r,classes:s,styles:o}=n;r!==null&&su(e,t,r),s!==null&&fm(e,t,s),o!==null&&nw(e,t,o)}var rs={};function un(e=1){gm(or(),Wt(),ts()+e,!1)}function gm(e,t,n,r){if(!r)if((t[st]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Wa(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ga(t,o,0,n)}bi(n)}function Rn(e,t=pt.Default){let n=Wt();if(n===null)return ft(e,t);let r=kn();return Vv(r,n,Vn(e),t)}function pm(e,t,n,r,s,o){let I=Nt(null);try{let i=null;s&qr.SignalBased&&(i=t[r][vg]),i!==null&&i.transformFn!==void 0&&(o=i.transformFn(o)),s&qr.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,i,o,n,r):dv(t,i,r,o)}finally{Nt(I)}}function rw(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let s=n[r];if(s<0)bi(~s);else{let o=s,I=n[++r],i=n[++r];ZE(I,o);let a=t[o];i(2,a)}}}finally{bi(-1)}}function Dl(e,t,n,r,s,o,I,i,a,M,T){let P=t.blueprint.slice();return P[Or]=s,P[st]=r|4|128|8|64,(M!==null||e&&e[st]&2048)&&(P[st]|=2048),mv(P),P[vn]=P[oo]=e,P[rr]=n,P[mr]=I||e&&e[mr],P[mn]=i||e&&e[mn],P[Ji]=a||e&&e[Ji]||null,P[ir]=o,P[yl]=DM(),P[qa]=T,P[lv]=M,P[yr]=t.type==2?e[yr]:P,P}function xl(e,t,n,r,s){let o=e.data[t];if(o===null)o=iw(e,t,n,r,s),$E()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=s;let I=WE();o.injectorIndex=I===null?-1:I.injectorIndex}return es(o,!0),o}function iw(e,t,n,r,s){let o=Sv(),I=Dv(),i=I?o:o&&o.parent,a=e.data[t]=uw(e,i,n,t,r,s);return e.firstChild===null&&(e.firstChild=a),o!==null&&(I?o.child==null&&a.parent!==null&&(o.child=a):o.next===null&&(o.next=a,a.prev=o)),a}function vm(e,t,n,r){if(n===0)return-1;let s=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function mm(e,t,n,r,s){let o=ts(),I=r&2;try{bi(-1),I&&t.length>ei&&gm(e,t,ei,!1),gr(I?2:0,s),n(r,s)}finally{bi(o),gr(I?3:1,s)}}function ym(e,t,n){if(uv(t)){let r=Nt(null);try{let s=t.directiveStart,o=t.directiveEnd;for(let I=s;I<o;I++){let i=e.data[I];if(i.contentQueries){let a=n[I];i.contentQueries(1,a,I)}}}finally{Nt(r)}}}function Cm(e,t,n){bv()&&(mw(e,t,n,Xn(n,t)),(n.flags&64)===64&&xm(e,t,n))}function Im(e,t,n=Xn){let r=t.localNames;if(r!==null){let s=t.index+1;for(let o=0;o<r.length;o+=2){let I=r[o+1],i=I===-1?n(t,e):e[I];e[s++]=i}}}function bm(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=bd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function bd(e,t,n,r,s,o,I,i,a,M,T){let P=ei+r,k=P+s,R=ow(P,k),b=typeof M=="function"?M():M;return R[vt]={type:e,blueprint:R,template:n,queries:null,viewQuery:i,declTNode:t,data:R.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof I=="function"?I():I,firstChild:null,schemas:a,consts:b,incompleteFirstPass:!1,ssrId:T}}function ow(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:rs);return n}function sw(e,t,n,r){let o=r.get(OM,tm)||n===vr.ShadowDom,I=e.selectRootElement(t,o);return aw(I),I}function aw(e){lw(e)}var lw=()=>null;function cw(e,t,n,r){let s=wm(t);s.push(n),e.firstCreatePass&&_m(e).push(r,s.length-1)}function uw(e,t,n,r,s,o){let I=t?t.injectorIndex:-1,i=0;return HE()&&(i|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:i,providerIndexes:0,value:s,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ip(e,t,n,r,s){for(let o in t){if(!t.hasOwnProperty(o))continue;let I=t[o];if(I===void 0)continue;r??={};let i,a=qr.None;Array.isArray(I)?(i=I[0],a=I[1]):i=I;let M=o;if(s!==null){if(!s.hasOwnProperty(o))continue;M=s[o]}e===0?bp(r,n,M,i,a):bp(r,n,M,i)}return r}function bp(e,t,n,r,s){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],s!==void 0&&o.push(s)}function dw(e,t,n){let r=t.directiveStart,s=t.directiveEnd,o=e.data,I=t.attrs,i=[],a=null,M=null;for(let T=r;T<s;T++){let P=o[T],k=n?n.get(P):null,R=k?k.inputs:null,b=k?k.outputs:null;a=Ip(0,P.inputs,T,a,R),M=Ip(1,P.outputs,T,M,b);let c=a!==null&&I!==null&&!Ju(t)?_w(a,T,I):null;i.push(c)}a!==null&&(a.hasOwnProperty("class")&&(t.flags|=8),a.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=i,t.inputs=a,t.outputs=M}function fw(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function hw(e,t,n,r,s,o,I,i){let a=Xn(t,n),M=t.inputs,T;!i&&M!=null&&(T=M[r])?(Sd(e,n,T,r,s),Cl(t)&&gw(n,t.index)):t.type&3?(r=fw(r),s=I!=null?I(s,t.value||"",r):s,o.setProperty(a,r,s)):t.type&12}function gw(e,t){let n=ni(t,e);n[st]&16||(n[st]|=64)}function Sm(e,t,n,r){if(bv()){let s=r===null?null:{"":-1},o=Cw(e,n),I,i;o===null?I=i=null:[I,i]=o,I!==null&&Dm(e,t,n,I,s,i),s&&Iw(n,r,s)}n.mergedAttrs=Qu(n.mergedAttrs,n.attrs)}function Dm(e,t,n,r,s,o){for(let M=0;M<r.length;M++)uM(Bv(n,t),e,r[M].type);Sw(n,e.data.length,r.length);for(let M=0;M<r.length;M++){let T=r[M];T.providersResolver&&T.providersResolver(T)}let I=!1,i=!1,a=vm(e,t,r.length,null);for(let M=0;M<r.length;M++){let T=r[M];n.mergedAttrs=Qu(n.mergedAttrs,T.hostAttrs),Dw(e,n,t,a,T),bw(a,T,s),T.contentQueries!==null&&(n.flags|=4),(T.hostBindings!==null||T.hostAttrs!==null||T.hostVars!==0)&&(n.flags|=64);let P=T.type.prototype;!I&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),I=!0),!i&&(P.ngOnChanges||P.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),i=!0),a++}dw(e,n,o)}function pw(e,t,n,r,s){let o=s.hostBindings;if(o){let I=e.hostBindingOpCodes;I===null&&(I=e.hostBindingOpCodes=[]);let i=~t.index;vw(I)!=i&&I.push(i),I.push(n,r,o)}}function vw(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function mw(e,t,n,r){let s=n.directiveStart,o=n.directiveEnd;Cl(n)&&xw(t,n,e.data[s+n.componentOffset]),e.firstCreatePass||Bv(n,t),Si(r,t);let I=n.initialInputs;for(let i=s;i<o;i++){let a=e.data[i],M=qi(t,e,i,n);if(Si(M,t),I!==null&&ww(t,i-s,M,a,n,I),Ko(a)){let T=ni(n.index,t);T[rr]=qi(t,e,i,n)}}}function xm(e,t,n){let r=n.directiveStart,s=n.directiveEnd,o=n.index,I=QE();try{bi(o);for(let i=r;i<s;i++){let a=e.data[i],M=t[i];gu(i),(a.hostBindings!==null||a.hostVars!==0||a.hostAttrs!==null)&&yw(a,M)}}finally{bi(-1),gu(I)}}function yw(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Cw(e,t){let n=e.directiveRegistry,r=null,s=null;if(n)for(let o=0;o<n.length;o++){let I=n[o];if(aE(t,I.selectors,!1))if(r||(r=[]),Ko(I))if(I.findHostDirectiveDefs!==null){let i=[];s=s||new Map,I.findHostDirectiveDefs(I,i,s),r.unshift(...i,I);let a=i.length;xu(e,t,a)}else r.unshift(I),xu(e,t,0);else s=s||new Map,I.findHostDirectiveDefs?.(I,r,s),r.push(I)}return r===null?null:[r,s]}function xu(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Iw(e,t,n){if(t){let r=e.localNames=[];for(let s=0;s<t.length;s+=2){let o=n[t[s+1]];if(o==null)throw new at(-301,!1);r.push(t[s],o)}}}function bw(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ko(t)&&(n[""]=e)}}function Sw(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Dw(e,t,n,r,s){e.data[r]=s;let o=s.factory||(s.factory=Zi(s.type,!0)),I=new Go(o,Ko(s),Rn);e.blueprint[r]=I,n[r]=I,pw(e,t,r,vm(e,n,s.hostVars,rs),s)}function xw(e,t,n){let r=Xn(t,e),s=bm(n),o=e[mr].rendererFactory,I=16;n.signals?I=4096:n.onPush&&(I=64);let i=El(e,Dl(e,s,null,I,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=i}function Ew(e,t,n,r,s,o){let I=Xn(e,t);Mw(t[mn],I,o,e.value,n,r,s)}function Mw(e,t,n,r,s,o,I){if(o==null)e.removeAttribute(t,s,n);else{let i=I==null?Xu(o):I(o,r||"",s);e.setAttribute(t,s,i,n)}}function ww(e,t,n,r,s,o){let I=o[t];if(I!==null)for(let i=0;i<I.length;){let a=I[i++],M=I[i++],T=I[i++],P=I[i++];pm(r,n,a,M,T,P)}}function _w(e,t,n){let r=null,s=0;for(;s<n.length;){let o=n[s];if(o===0){s+=4;continue}else if(o===5){s+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let I=e[o];for(let i=0;i<I.length;i+=3)if(I[i]===t){r.push(o,I[i+1],I[i+2],n[s+1]);break}}s+=2}return r}function Em(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Mm(e,t){let n=e.contentQueries;if(n!==null){let r=Nt(null);try{for(let s=0;s<n.length;s+=2){let o=n[s],I=n[s+1];if(I!==-1){let i=e.data[I];nd(o),i.contentQueries(2,t[I],I)}}}finally{Nt(r)}}}function El(e,t){return e[Vo]?e[lp][nr]=t:e[Vo]=t,e[lp]=t,t}function Eu(e,t,n){nd(0);let r=Nt(null);try{t(e,n)}finally{Nt(r)}}function wm(e){return e[el]??=[]}function _m(e){return e.cleanup??=[]}function Tm(e,t){let n=e[Ji],r=n?n.get(_r,null):null;r&&r.handleError(t)}function Sd(e,t,n,r,s){for(let o=0;o<n.length;){let I=n[o++],i=n[o++],a=n[o++],M=t[I],T=e.data[I];pm(T,M,r,i,a,s)}}function Tw(e,t){let n=ni(t,e),r=n[vt];Aw(r,n);let s=n[Or];s!==null&&n[qa]===null&&(n[qa]=gd(s,n[Ji])),Dd(r,n,n[rr])}function Aw(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Dd(e,t,n){rd(t);try{let r=e.viewQuery;r!==null&&Eu(1,r,n);let s=e.template;s!==null&&mm(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Mr]?.finishViewCreation(e),e.staticContentQueries&&Mm(e,t),e.staticViewQueries&&Eu(2,e.viewQuery,n);let o=e.components;o!==null&&Ow(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[st]&=-5,id()}}function Ow(e,t){for(let n=0;n<t.length;n++)Tw(e,t[n])}function Nw(e,t,n,r){let s=Nt(null);try{let o=t.tView,i=e[st]&4096?4096:16,a=Dl(e,o,n,i,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),M=e[t.index];a[yi]=M;let T=e[Mr];return T!==null&&(a[Mr]=T.createEmbeddedView(o)),Dd(o,a,n),a}finally{Nt(s)}}function Sp(e,t){return!t||t.firstChild===null||Zv(e)}function Pw(e,t,n,r=!0){let s=t[vt];if(UM(s,t,e,n),r){let I=Du(n,e),i=t[mn],a=yd(i,e[Ci]);a!==null&&zM(s,e[ir],i,t,a,I)}let o=t[qa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ll(e,t,n,r,s=!1){for(;n!==null;){if(n.type===128){n=s?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(Cr(o)),Nr(o)&&kw(o,r);let I=n.type;if(I&8)ll(e,t,n.child,r);else if(I&32){let i=vd(n,t),a;for(;a=i();)r.push(a)}else if(I&16){let i=dm(t,n);if(Array.isArray(i))r.push(...i);else{let a=Ii(t[yr]);ll(a[vt],a,i,r,!0)}}n=s?n.projectionNext:n.next}return r}function kw(e,t){for(let n=On;n<e.length;n++){let r=e[n],s=r[vt].firstChild;s!==null&&ll(r[vt],r,s,t)}e[Ci]!==e[Or]&&t.push(e[Ci])}var Am=[];function Rw(e){return e[Wn]??Lw(e)}function Lw(e){let t=Am.pop()??Object.create(Fw);return t.lView=e,t}function jw(e){e.lView[Wn]!==e&&(e.lView=null,Am.push(e))}var Fw=qt(Ke({},yc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Il(e.lView)},consumerOnSignalRead(){this.lView[Wn]=this}});function Bw(e){let t=e[Wn]??Object.create(zw);return t.lView=e,t}var zw=qt(Ke({},yc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Ii(e.lView);for(;t&&!Om(t[vt]);)t=Ii(t);t&&yv(t)},consumerOnSignalRead(){this.lView[Wn]=this}});function Om(e){return e.type!==2}var Hw=100;function Nm(e,t=!0,n=0){let r=e[mr],s=r.rendererFactory,o=!1;o||s.begin?.();try{Uw(e,n)}catch(I){throw t&&Tm(e,I),I}finally{o||(s.end?.(),r.inlineEffectRunner?.flush())}}function Uw(e,t){let n=xv();try{up(!0),Mu(e,t);let r=0;for(;Wo(e);){if(r===Hw)throw new at(103,!1);r++,Mu(e,1)}}finally{up(n)}}function Vw(e,t,n,r){let s=t[st];if((s&256)===256)return;let o=!1,I=!1;!o&&t[mr].inlineEffectRunner?.flush(),rd(t);let i=!0,a=null,M=null;o||(Om(e)?(M=Rw(t),a=Cc(M)):mg()===null?(i=!1,M=Bw(t),a=Cc(M)):t[Wn]&&(bc(t[Wn]),t[Wn]=null));try{mv(t),YE(e.bindingStartIndex),n!==null&&mm(e,t,n,2,r);let T=(s&3)===3;if(!o)if(T){let R=e.preOrderCheckHooks;R!==null&&Wa(t,R,null)}else{let R=e.preOrderHooks;R!==null&&Ga(t,R,0,null),$c(t,0)}if(I||Ww(t),Pm(t,0),e.contentQueries!==null&&Mm(e,t),!o)if(T){let R=e.contentCheckHooks;R!==null&&Wa(t,R)}else{let R=e.contentHooks;R!==null&&Ga(t,R,1),$c(t,1)}rw(e,t);let P=e.components;P!==null&&Rm(t,P,0);let k=e.viewQuery;if(k!==null&&Eu(2,k,r),!o)if(T){let R=e.viewCheckHooks;R!==null&&Wa(t,R)}else{let R=e.viewHooks;R!==null&&Ga(t,R,2),$c(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Xc]){for(let R of t[Xc])R();t[Xc]=null}o||(t[st]&=-73)}catch(T){throw o||Il(t),T}finally{M!==null&&(yg(M,a),i&&jw(M)),id()}}function Pm(e,t){for(let n=Jv(e);n!==null;n=Kv(n))for(let r=On;r<n.length;r++){let s=n[r];km(s,t)}}function Ww(e){for(let t=Jv(e);t!==null;t=Kv(t)){if(!(t[st]&nl.HasTransplantedViews))continue;let n=t[Ki];for(let r=0;r<n.length;r++){let s=n[r];yv(s)}}}function Gw(e,t,n){let r=ni(t,e);km(r,n)}function km(e,t){td(e)&&Mu(e,t)}function Mu(e,t){let r=e[vt],s=e[st],o=e[Wn],I=!!(t===0&&s&16);if(I||=!!(s&64&&t===0),I||=!!(s&1024),I||=!!(o?.dirty&&Ic(o)),I||=!1,o&&(o.dirty=!1),e[st]&=-9217,I)Vw(r,e,r.template,e[rr]);else if(s&8192){Pm(e,1);let i=r.components;i!==null&&Rm(e,i,1)}}function Rm(e,t,n){for(let r=0;r<t.length;r++)Gw(e,t[r],n)}function xd(e,t){let n=xv()?64:1088;for(e[mr].changeDetectionScheduler?.notify(t);e;){e[st]|=n;let r=Ii(e);if(du(e)&&!r)return e;e=r}return null}var Di=class{get rootNodes(){let t=this._lView,n=t[vt];return ll(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rr]}set context(t){this._lView[rr]=t}get destroyed(){return(this._lView[st]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[vn];if(Nr(t)){let n=t[tl],r=n?n.indexOf(this):-1;r>-1&&(Su(t,r),Ja(n,r))}this._attachedToViewContainer=!1}cm(this._lView[vt],this._lView)}onDestroy(t){Cv(this._lView,t)}markForCheck(){xd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[st]&=-129}reattach(){hu(this._lView),this._lView[st]|=128}detectChanges(){this._lView[st]|=1024,Nm(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new at(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=du(this._lView),n=this._lView[yi];n!==null&&!t&&md(n,this._lView),am(this._lView[vt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new at(902,!1);this._appRef=t;let n=du(this._lView),r=this._lView[yi];r!==null&&!n&&lm(r,this._lView),hu(this._lView)}},eo=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=$w;let e=t;return e})(),Yw=eo,Xw=class extends Yw{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let s=Nw(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Di(s)}};function $w(){return Ed(kn(),Wt())}function Ed(e,t){return e.type&4?new Xw(t,e,so(e,t)):null}var qj=new RegExp(`^(\\d+)*(${TM}|${_M})*(.*)`);var Zw=()=>null;function Dp(e,t){return Zw(e,t)}var Yo=class{},Md=new dt("",{providedIn:"root",factory:()=>!1});var Lm=new dt(""),wu=class{},cl=class{};function Qw(e){let t=Error(`No component factory found for ${_n(e)}.`);return t[Jw]=e,t}var Jw="ngComponent";var _u=class{resolveComponentFactory(t){throw Qw(t)}},jd=class jd{};jd.NULL=new _u;var to=jd,no=class{},Ml=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>Kw();let e=t;return e})();function Kw(){let e=Wt(),t=kn(),n=ni(t.index,e);return(Kr(n)?n:e)[mn]}var qw=(()=>{let t=class t{};t.\u0275prov=nt({token:t,providedIn:"root",factory:()=>null});let e=t;return e})();var xp=new Set;function wd(e){xp.has(e)||(xp.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function jm(e){let t=!0;return setTimeout(()=>{t&&(t=!1,e())}),typeof Bo.requestAnimationFrame=="function"&&Bo.requestAnimationFrame(()=>{t&&(t=!1,e())}),()=>{t=!1}}function Ep(e){let t=!0;return queueMicrotask(()=>{t&&e()}),()=>{t=!1}}function Mp(...e){}var Qt=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pn(!1),this.onMicrotaskEmpty=new pn(!1),this.onStable=new pn(!1),this.onError=new pn(!1),typeof Zone>"u")throw new at(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&n,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,n_(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new at(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new at(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,s){let o=this._inner,I=o.scheduleEventTask("NgZoneEvent: "+s,t,e_,Mp,Mp);try{return o.runTask(I,n,r)}finally{o.cancelTask(I)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},e_={};function _d(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function t_(e){e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,Zone.root.run(()=>{jm(()=>{e.callbackScheduled=!1,Tu(e),e.isCheckStableRunning=!0,_d(e),e.isCheckStableRunning=!1})}),Tu(e))}function n_(e){let t=()=>{t_(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,o,I,i)=>{if(r_(i))return n.invokeTask(s,o,I,i);try{return wp(e),n.invokeTask(s,o,I,i)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),_p(e)}},onInvoke:(n,r,s,o,I,i,a)=>{try{return wp(e),n.invoke(s,o,I,i,a)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!i_(i)&&t(),_p(e)}},onHasTask:(n,r,s,o)=>{n.hasTask(s,o),r===s&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,Tu(e),_d(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,s,o)=>(n.handleError(s,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function Tu(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function wp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function _p(e){e._nesting--,_d(e)}var Au=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pn,this.onMicrotaskEmpty=new pn,this.onStable=new pn,this.onError=new pn}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,s){return t.apply(n,r)}};function r_(e){return Fm(e,"__ignore_ng_zone__")}function i_(e){return Fm(e,"__scheduler_tick__")}function Fm(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Bm=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of r)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=nt({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Ou(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,o=0;if(t!==null)for(let I=0;I<t.length;I++){let i=t[I];if(typeof i=="number")o=i;else if(o==1)s=ru(s,i);else if(o==2){let a=i,M=t[++I];r=ru(r,a+": "+M+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}var ul=class extends to{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=mi(t);return new Xo(n,this.ngModule)}};function Tp(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let s=e[r];if(s===void 0)continue;let o=Array.isArray(s),I=o?s[0]:s,i=o?s[1]:qr.None;t?n.push({propName:I,templateName:r,isSignal:(i&qr.SignalBased)!==0}):n.push({propName:I,templateName:r})}return n}function o_(e){let t=e.toLowerCase();return t==="svg"?pv:t==="math"?NE:null}var Xo=class extends cl{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Tp(t.inputs,!0);if(n!==null)for(let s of r)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return r}get outputs(){return Tp(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=dE(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,s){let o=Nt(null);try{s=s||this.ngModule;let I=s instanceof Gn?s:s?.injector;I&&this.componentDef.getStandaloneInjector!==null&&(I=this.componentDef.getStandaloneInjector(I)||I);let i=I?new pu(t,I):t,a=i.get(no,null);if(a===null)throw new at(407,!1);let M=i.get(qw,null),T=i.get(Bm,null),P=i.get(Yo,null),k={rendererFactory:a,sanitizer:M,inlineEffectRunner:null,afterRenderEventManager:T,changeDetectionScheduler:P},R=a.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",c=r?sw(R,r,this.componentDef.encapsulation,i):sm(R,b,o_(b)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let y=null;c!==null&&(y=gd(c,i,!0));let l=bd(0,null,null,1,0,null,null,null,null,null,null),h=Dl(null,l,null,C,null,null,k,R,i,null,y);rd(h);let u,p;try{let D=this.componentDef,g,x=null;D.findHostDirectiveDefs?(g=[],x=new Map,D.findHostDirectiveDefs(D,g,x),g.push(D)):g=[D];let E=s_(h,c),_=a_(E,c,D,g,h,k,R);p=vv(l,ei),c&&u_(R,D,c,r),n!==void 0&&d_(p,this.ngContentSelectors,n),u=c_(_,D,g,x,h,[f_]),Dd(l,h,null)}finally{id()}return new Nu(this.componentType,u,so(p,h),h,p)}finally{Nt(o)}}},Nu=class extends wu{constructor(t,n,r,s,o){super(),this.location=r,this._rootLView=s,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Di(s,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,s;if(r!==null&&(s=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;Sd(o[vt],o,s,t,n),this.previousInputValues.set(t,n);let I=ni(this._tNode.index,o);xd(I,1)}}get injector(){return new vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function s_(e,t){let n=e[vt],r=ei;return e[r]=t,xl(n,r,2,"#host",null)}function a_(e,t,n,r,s,o,I){let i=s[vt];l_(r,e,t,I);let a=null;t!==null&&(a=gd(t,s[Ji]));let M=o.rendererFactory.createRenderer(t,n),T=16;n.signals?T=4096:n.onPush&&(T=64);let P=Dl(s,bm(n),null,T,s[e.index],e,o,M,null,null,a);return i.firstCreatePass&&xu(i,e,r.length-1),El(s,P),s[e.index]=P}function l_(e,t,n,r){for(let s of e)t.mergedAttrs=Qu(t.mergedAttrs,s.hostAttrs);t.mergedAttrs!==null&&(Ou(t,t.mergedAttrs,!0),n!==null&&hm(r,n,t))}function c_(e,t,n,r,s,o){let I=kn(),i=s[vt],a=Xn(I,s);Dm(i,s,I,n,null,r);for(let T=0;T<n.length;T++){let P=I.directiveStart+T,k=qi(s,i,P,I);Si(k,s)}xm(i,s,I),a&&Si(a,s);let M=qi(s,i,I.directiveStart+I.componentOffset,I);if(e[rr]=s[rr]=M,o!==null)for(let T of o)T(M,t);return ym(i,I,s),M}function u_(e,t,n,r){if(r)su(e,n,["ng-version","18.1.2"]);else{let{attrs:s,classes:o}=fE(t.selectors[0]);s&&su(e,n,s),o&&o.length>0&&fm(e,n,o.join(" "))}}function d_(e,t,n){let r=e.projection=[];for(let s=0;s<t.length;s++){let o=n[s];r.push(o!=null?Array.from(o):null)}}function f_(){let e=kn();ad(Wt()[vt],e)}var Ei=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=h_;let e=t;return e})();function h_(){let e=kn();return Hm(e,Wt())}var g_=Ei,zm=class extends g_{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return so(this._hostTNode,this._hostLView)}get injector(){return new vi(this._hostTNode,this._hostLView)}get parentInjector(){let t=ld(this._hostTNode,this._hostLView);if(Lv(t)){let n=ol(t,this._hostLView),r=il(t),s=n[vt].data[r+8];return new vi(s,n)}else return new vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Ap(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-On}createEmbeddedView(t,n,r){let s,o;typeof r=="number"?s=r:r!=null&&(s=r.index,o=r.injector);let I=Dp(this._lContainer,t.ssrId),i=t.createEmbeddedViewImpl(n||{},o,I);return this.insertImpl(i,s,Sp(this._hostTNode,I)),i}createComponent(t,n,r,s,o){let I=t&&!_E(t),i;if(I)i=n;else{let b=n||{};i=b.index,r=b.injector,s=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let a=I?t:new Xo(mi(t)),M=r||this.parentInjector;if(!o&&a.ngModule==null){let c=(I?M:this.parentInjector).get(Gn,null);c&&(o=c)}let T=mi(a.componentType??{}),P=Dp(this._lContainer,T?.id??null),k=P?.firstChild??null,R=a.create(M,s,k,o);return this.insertImpl(R.hostView,i,Sp(this._hostTNode,P)),R}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let s=t._lView;if(RE(s)){let i=this.indexOf(t);if(i!==-1)this.detach(i);else{let a=s[vn],M=new zm(a,a[ir],a[vn]);M.detach(M.indexOf(t))}}let o=this._adjustIndex(n),I=this._lContainer;return Pw(I,s,o,r),t.attachToViewContainerRef(),Yp(qc(I),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Ap(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Su(this._lContainer,n);r&&(Ja(qc(this._lContainer),n),cm(r[vt],r))}detach(t){let n=this._adjustIndex(t,-1),r=Su(this._lContainer,n);return r&&Ja(qc(this._lContainer),n)!=null?new Di(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Ap(e){return e[tl]}function qc(e){return e[tl]||(e[tl]=[])}function Hm(e,t){let n,r=t[e.index];return Nr(r)?n=r:(n=Em(r,t,null,e),t[e.index]=n,El(t,n)),v_(n,t,e,r),new zm(n,e,t)}function p_(e,t){let n=e[mn],r=n.createComment(""),s=Xn(t,e),o=yd(n,s);return al(n,o,r,$M(n,s),!1),r}var v_=C_,m_=()=>!1;function y_(e,t,n){return m_(e,t,n)}function C_(e,t,n,r){if(e[Ci])return;let s;n.type&8?s=Cr(r):s=p_(t,n),e[Ci]=s}var Pu=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},ku=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,s=[];for(let o=0;o<r;o++){let I=n.getByIndex(o),i=this.queries[I.indexInDeclarationView];s.push(i.clone())}return new e(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Td(t,n).matches!==null&&this.queries[n].setDirty()}},Ru=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=w_(t):this.predicate=t}},Lu=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let s=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,s);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},ju=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){let o=r[s];this.matchTNodeWithReadOption(t,n,I_(n,o)),this.matchTNodeWithReadOption(t,n,Ya(n,t,o,!1,!1))}else r===eo?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Ya(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let s=this.metadata.read;if(s!==null)if(s===ri||s===Ei||s===eo&&n.type&4)this.addMatch(n.index,-2);else{let o=Ya(n,t,s,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function I_(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function b_(e,t){return e.type&11?so(e,t):e.type&4?Ed(e,t):null}function S_(e,t,n,r){return n===-1?b_(t,e):n===-2?D_(e,t,r):qi(e,e[vt],n,t)}function D_(e,t,n){if(n===ri)return so(t,e);if(n===eo)return Ed(t,e);if(n===Ei)return Hm(t,e)}function Um(e,t,n,r){let s=t[Mr].queries[r];if(s.matches===null){let o=e.data,I=n.matches,i=[];for(let a=0;I!==null&&a<I.length;a+=2){let M=I[a];if(M<0)i.push(null);else{let T=o[M];i.push(S_(t,T,I[a+1],n.metadata.read))}}s.matches=i}return s.matches}function Fu(e,t,n,r){let s=e.queries.getByIndex(n),o=s.matches;if(o!==null){let I=Um(e,t,s,n);for(let i=0;i<o.length;i+=2){let a=o[i];if(a>0)r.push(I[i/2]);else{let M=o[i+1],T=t[-a];for(let P=On;P<T.length;P++){let k=T[P];k[yi]===k[vn]&&Fu(k[vt],k,M,r)}if(T[Ki]!==null){let P=T[Ki];for(let k=0;k<P.length;k++){let R=P[k];Fu(R[vt],R,M,r)}}}}}return r}function x_(e,t){return e[Mr].queries[t].queryList}function E_(e,t,n){let r=new Iu((n&4)===4);return cw(e,t,r,r.destroy),(t[Mr]??=new ku).queries.push(new Pu(r))-1}function M_(e,t,n){let r=or();return r.firstCreatePass&&(__(r,new Ru(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),E_(r,Wt(),t)}function w_(e){return e.split(",").map(t=>t.trim())}function __(e,t,n){e.queries===null&&(e.queries=new Lu),e.queries.track(new ju(t,n))}function Td(e,t){return e.queries.getByIndex(t)}function T_(e,t){let n=e[vt],r=Td(n,t);return r.crossesNgTemplate?Fu(n,e,t,[]):Um(n,e,r,t)}function Ad(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)&&s[3]&&(n[r]=s[3])}e.inputTransforms=n}var ti=class{},$o=class{};var Bu=class extends ti{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ul(this);let s=nv(t);this._bootstrapComponents=om(s.bootstrap),this._r3Injector=Yv(t,n,[{provide:ti,useValue:this},{provide:to,useValue:this.componentFactoryResolver},...r],_n(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},zu=class extends $o{constructor(t){super(),this.moduleType=t}create(t){return new Bu(this.moduleType,t,[])}};var dl=class extends ti{constructor(t){super(),this.componentFactoryResolver=new ul(this),this.instance=null;let n=new Uo([...t.providers,{provide:ti,useValue:this},{provide:to,useValue:this.componentFactoryResolver}],t.parent||qu(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Od(e,t,n=null){return new dl({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function Nd(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function A_(e){return(e.flags&32)===32}function O_(e,t,n,r,s,o,I,i,a){let M=t.consts,T=xl(t,e,4,I||null,i||null);Sm(t,n,T,rl(M,a)),ad(t,T);let P=T.tView=bd(2,T,r,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,M,null);return t.queries!==null&&(t.queries.template(t,T),P.queries=t.queries.embeddedTView(T)),T}function N_(e,t,n,r,s,o,I,i,a,M){let T=n+ei,P=t.firstCreatePass?O_(T,t,e,r,s,o,I,i,a):t.data[T];es(P,!1);let k=P_(t,e,P,n);od()&&Cd(t,e,k,P),Si(k,e);let R=Em(k,e,k,P);return e[T]=R,El(e,R),y_(R,P,e),ed(P)&&Cm(t,e,P),a!=null&&Im(e,P,M),P}function kr(e,t,n,r,s,o,I,i){let a=Wt(),M=or(),T=rl(M.consts,o);return N_(a,M,e,t,n,r,s,T,I,i),kr}var P_=k_;function k_(e,t,n,r){return sd(!0),t[mn].createComment("")}function Pd(e,t,n,r){let s=Wt(),o=Ev();if(Nd(s,o,t)){let I=or(),i=Nv();Ew(i,s,e,t,n,r)}return Pd}function Ua(e,t){return e<<17|t<<2}function xi(e){return e>>17&32767}function R_(e){return(e&2)==2}function L_(e,t){return e&131071|t<<17}function Hu(e){return e|2}function ro(e){return(e&131068)>>2}function eu(e,t){return e&-131069|t<<2}function j_(e){return(e&1)===1}function Uu(e){return e|1}function F_(e,t,n,r,s,o){let I=o?t.classBindings:t.styleBindings,i=xi(I),a=ro(I);e[r]=n;let M=!1,T;if(Array.isArray(n)){let P=n;T=P[1],(T===null||Qo(P,T)>0)&&(M=!0)}else T=n;if(s)if(a!==0){let k=xi(e[i+1]);e[r+1]=Ua(k,i),k!==0&&(e[k+1]=eu(e[k+1],r)),e[i+1]=L_(e[i+1],r)}else e[r+1]=Ua(i,0),i!==0&&(e[i+1]=eu(e[i+1],r)),i=r;else e[r+1]=Ua(a,0),i===0?i=r:e[a+1]=eu(e[a+1],r),a=r;M&&(e[r+1]=Hu(e[r+1])),Op(e,T,r,!0),Op(e,T,r,!1),B_(t,T,e,r,o),I=Ua(i,a),o?t.classBindings=I:t.styleBindings=I}function B_(e,t,n,r,s){let o=s?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Qo(o,t)>=0&&(n[r+1]=Uu(n[r+1]))}function Op(e,t,n,r){let s=e[n+1],o=t===null,I=r?xi(s):ro(s),i=!1;for(;I!==0&&(i===!1||o);){let a=e[I],M=e[I+1];z_(a,t)&&(i=!0,e[I+1]=r?Uu(M):Hu(M)),I=r?xi(M):ro(M)}i&&(e[n+1]=r?Hu(s):Uu(s))}function z_(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Qo(e,t)>=0:!1}var Dn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function H_(e){return e.substring(Dn.key,Dn.keyEnd)}function U_(e){return e.substring(Dn.value,Dn.valueEnd)}function V_(e){return W_(e),Vm(e,fl(e,0,Dn.textEnd))}function Vm(e,t){let n=Dn.textEnd,r=Dn.key=fl(e,t,n);return n===r?-1:(r=Dn.keyEnd=G_(e,r,n),r=Np(e,r,n,58),r=Dn.value=fl(e,r,n),r=Dn.valueEnd=Y_(e,r,n),Np(e,r,n,59))}function W_(e){Dn.key=0,Dn.keyEnd=0,Dn.value=0,Dn.valueEnd=0,Dn.textEnd=e.length}function fl(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function G_(e,t,n){let r;for(;t<n&&((r=e.charCodeAt(t))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)t++;return t}function Np(e,t,n,r){return t=fl(e,t,n),t<n&&t++,t}function Y_(e,t,n){let r=-1,s=-1,o=-1,I=t,i=I;for(;I<n;){let a=e.charCodeAt(I++);if(a===59)return i;a===34||a===39?i=I=Pp(e,a,I,n):t===I-4&&o===85&&s===82&&r===76&&a===40?i=I=Pp(e,41,I,n):a>32&&(i=I),o=s,s=r,r=a&-33}return i}function Pp(e,t,n,r){let s=-1,o=n;for(;o<r;){let I=e.charCodeAt(o++);if(I==t&&s!==92)return o;I==92&&s===92?s=0:s=I}throw new Error}function nn(e,t,n){let r=Wt(),s=Ev();if(Nd(r,s,t)){let o=or(),I=Nv();hw(o,I,r,e,t,r[mn],n,!1)}return nn}function Vu(e,t,n,r,s){let o=t.inputs,I=s?"class":"style";Sd(e,n,o[I],I,r)}function wl(e){$_(Gm,X_,e,!1)}function X_(e,t){for(let n=V_(t);n>=0;n=Vm(t,n))Gm(e,H_(t),U_(t))}function $_(e,t,n,r){let s=or(),o=XE(2);s.firstUpdatePass&&Z_(s,null,o,r);let I=Wt();if(n!==rs&&Nd(I,o,n)){let i=s.data[ts()];if(Ym(i,r)&&!Wm(s,o)){let a=r?i.classesWithoutHost:i.stylesWithoutHost;a!==null&&(n=ru(a,n||"")),Vu(s,i,I,n,r)}else tT(s,i,I,I[mn],I[o+1],I[o+1]=eT(e,t,n),r,o)}}function Wm(e,t){return t>=e.expandoStartIndex}function Z_(e,t,n,r){let s=e.data;if(s[n+1]===null){let o=s[ts()],I=Wm(e,n);Ym(o,r)&&t===null&&!I&&(t=!1),t=Q_(s,o,t,r),F_(s,o,t,n,I,r)}}function Q_(e,t,n,r){let s=JE(e),o=r?t.residualClasses:t.residualStyles;if(s===null)(r?t.classBindings:t.styleBindings)===0&&(n=tu(null,e,t,n,r),n=Zo(n,t.attrs,r),o=null);else{let I=t.directiveStylingLast;if(I===-1||e[I]!==s)if(n=tu(s,e,t,n,r),o===null){let a=J_(e,t,r);a!==void 0&&Array.isArray(a)&&(a=tu(null,e,t,a[1],r),a=Zo(a,t.attrs,r),K_(e,t,r,a))}else o=q_(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function J_(e,t,n){let r=n?t.classBindings:t.styleBindings;if(ro(r)!==0)return e[xi(r)]}function K_(e,t,n,r){let s=n?t.classBindings:t.styleBindings;e[xi(s)]=r}function q_(e,t,n){let r,s=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<s;o++){let I=e[o].hostAttrs;r=Zo(r,I,n)}return Zo(r,t.attrs,n)}function tu(e,t,n,r,s){let o=null,I=n.directiveEnd,i=n.directiveStylingLast;for(i===-1?i=n.directiveStart:i++;i<I&&(o=t[i],r=Zo(r,o.hostAttrs,s),o!==e);)i++;return e!==null&&(n.directiveStylingLast=i),r}function Zo(e,t,n){let r=n?1:2,s=-1;if(t!==null)for(let o=0;o<t.length;o++){let I=t[o];typeof I=="number"?s=I:s===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Xp(e,I,n?!0:t[++o]))}return e===void 0?null:e}function eT(e,t,n){if(n==null||n==="")return Er;let r=[],s=lo(n);if(Array.isArray(s))for(let o=0;o<s.length;o++)e(r,s[o],!0);else if(typeof s=="object")for(let o in s)s.hasOwnProperty(o)&&e(r,o,s[o]);else typeof s=="string"&&t(r,s);return r}function Gm(e,t,n){Xp(e,t,lo(n))}function tT(e,t,n,r,s,o,I,i){s===rs&&(s=Er);let a=0,M=0,T=0<s.length?s[0]:null,P=0<o.length?o[0]:null;for(;T!==null||P!==null;){let k=a<s.length?s[a+1]:void 0,R=M<o.length?o[M+1]:void 0,b=null,c;T===P?(a+=2,M+=2,k!==R&&(b=P,c=R)):P===null||T!==null&&T<P?(a+=2,b=T):(M+=2,b=P,c=R),b!==null&&nT(e,t,n,r,b,c,I,i),T=a<s.length?s[a]:null,P=M<o.length?o[M]:null}}function nT(e,t,n,r,s,o,I,i){if(!(t.type&3))return;let a=e.data,M=a[i+1],T=j_(M)?kp(a,t,n,s,ro(M),I):void 0;if(!hl(T)){hl(o)||R_(M)&&(o=kp(a,null,n,s,i,I));let P=PE(ts(),n);tw(r,I,P,s,o)}}function kp(e,t,n,r,s,o){let I=t===null,i;for(;s>0;){let a=e[s],M=Array.isArray(a),T=M?a[1]:a,P=T===null,k=n[s+1];k===rs&&(k=P?Er:void 0);let R=P?Gc(k,r):T===r?k:void 0;if(M&&!hl(R)&&(R=Gc(a,r)),hl(R)&&(i=R,I))return i;let b=e[s+1];s=I?xi(b):ro(b)}if(t!==null){let a=o?t.residualClasses:t.residualStyles;a!=null&&(i=Gc(a,r))}return i}function hl(e){return e!==void 0}function Ym(e,t){return(e.flags&(t?8:16))!==0}function rT(e,t,n,r,s,o){let I=t.consts,i=rl(I,s),a=xl(t,e,2,r,i);return Sm(t,n,a,rl(I,o)),a.attrs!==null&&Ou(a,a.attrs,!1),a.mergedAttrs!==null&&Ou(a,a.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,a),a}function gt(e,t,n,r){let s=Wt(),o=or(),I=ei+e,i=s[mn],a=o.firstCreatePass?rT(I,o,s,t,n,r):o.data[I],M=iT(o,s,a,i,t,e);s[I]=M;let T=ed(a);return es(a,!0),hm(i,M,a),!A_(a)&&od()&&Cd(o,s,M,a),FE()===0&&Si(M,s),BE(),T&&(Cm(o,s,a),ym(o,a,s)),r!==null&&Im(s,a),gt}function Pt(){let e=kn();Dv()?GE():(e=e.parent,es(e,!1));let t=e;UE(t)&&VE(),zE();let n=or();return n.firstCreatePass&&(ad(n,e),uv(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&iM(t)&&Vu(n,t,Wt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&oM(t)&&Vu(n,t,Wt(),t.stylesWithoutHost,!1),Pt}function dn(e,t,n,r){return gt(e,t,n,r),Pt(),dn}var iT=(e,t,n,r,s,o)=>(sd(!0),sm(r,s,eM()));function $n(){return Wt()}var gl="en-US";var oT=gl;function sT(e){typeof e=="string"&&(oT=e.toLowerCase().replace(/_/g,"-"))}var aT=(e,t,n)=>{};function yn(e,t,n,r){let s=Wt(),o=or(),I=kn();return cT(o,s,s[mn],I,e,t,r),yn}function lT(e,t,n,r){let s=e.cleanup;if(s!=null)for(let o=0;o<s.length-1;o+=2){let I=s[o];if(I===n&&s[o+1]===r){let i=t[el],a=s[o+2];return i.length>a?i[a]:null}typeof I=="string"&&(o+=2)}return null}function cT(e,t,n,r,s,o,I){let i=ed(r),M=e.firstCreatePass&&_m(e),T=t[rr],P=wm(t),k=!0;if(r.type&3||I){let c=Xn(r,t),C=I?I(c):c,y=P.length,l=I?u=>I(Cr(u[r.index])):r.index,h=null;if(!I&&i&&(h=lT(e,t,s,r.index)),h!==null){let u=h.__ngLastListenerFn__||h;u.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,k=!1}else{o=Lp(r,t,T,o),aT(c,s,o);let u=n.listen(C,s,o);P.push(o,u),M&&M.push(s,l,y,y+1)}}else o=Lp(r,t,T,o);let R=r.outputs,b;if(k&&R!==null&&(b=R[s])){let c=b.length;if(c)for(let C=0;C<c;C+=2){let y=b[C],l=b[C+1],p=t[y][l].subscribe(o),D=P.length;P.push(o,p),M&&M.push(s,r.index,D,-(D+1))}}}function Rp(e,t,n,r){let s=Nt(null);try{return gr(6,t,n),n(r)!==!1}catch(o){return Tm(e,o),!1}finally{gr(7,t,n),Nt(s)}}function Lp(e,t,n,r){return function s(o){if(o===Function)return r;let I=e.componentOffset>-1?ni(e.index,t):t;xd(I,5);let i=Rp(t,n,r,o),a=s.__ngNextListenerFn__;for(;a;)i=Rp(t,n,a,o)&&i,a=a.__ngNextListenerFn__;return i}}function rn(e=1){return qE(e)}function ii(e,t,n){M_(e,t,n)}function Rr(e){let t=Wt(),n=or(),r=Mv();nd(r+1);let s=Td(n,r);if(e.dirty&&kE(t)===((s.metadata.flags&2)===2)){if(s.matches===null)e.reset([]);else{let o=T_(t,r);e.reset(o,IM),e.notifyOnChanges()}return!0}return!1}function Lr(){return x_(Wt(),Mv())}function Cn(e,t=""){let n=Wt(),r=or(),s=e+ei,o=r.firstCreatePass?xl(r,s,1,t,null):r.data[s],I=uT(r,n,o,t,e);n[s]=I,od()&&Cd(r,n,I,o),es(o,!1)}var uT=(e,t,n,r,s)=>(sd(!0),FM(t[mn],r));var dT=(()=>{let t=class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let s=ov(!1,r.type),o=s.length>0?Od([s],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=nt({token:t,providedIn:"environment",factory:()=>new t(ft(Gn))});let e=t;return e})();function Zn(e){wd("NgStandalone"),e.getStandaloneInjector=t=>t.get(dT).getOrCreateStandaloneInjector(e)}var _l=(()=>{let t=class t{log(r){console.log(r)}warn(r){console.warn(r)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var Xm=new dt("");function is(e){return!!e&&typeof e.then=="function"}function $m(e){return!!e&&typeof e.subscribe=="function"}var Tl=new dt(""),Zm=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s}),this.appInits=$e(Tl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let I=o();if(is(I))r.push(I);else if($m(I)){let i=new Promise((a,M)=>{I.subscribe({complete:a,error:M})});r.push(i)}}let s=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{s()}).catch(o=>{this.reject(o)}),r.length===0&&s(),this.initialized=!0}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),kd=new dt("");function fT(){Cg(()=>{throw new at(600,!1)})}function hT(e){return e.isBoundToModule}var gT=10;function pT(e,t,n){try{let r=n();return is(r)?r.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var jr=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$e(Xv),this.afterRenderEffectManager=$e(Bm),this.zonelessEnabled=$e(Md),this.externalTestViews=new Set,this.beforeRender=new Zt,this.afterTick=new Zt,this.componentTypes=[],this.components=[],this.isStable=$e(ao).hasPendingTasks.pipe(ut(r=>!r)),this._injector=$e(Gn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,s){let o=r instanceof cl;if(!this._injector.get(Zm).done){let R=!o&&tv(r),b=!1;throw new at(405,b)}let i;o?i=r:i=this._injector.get(to).resolveComponentFactory(r),this.componentTypes.push(i.componentType);let a=hT(i)?void 0:this._injector.get(ti),M=s||i.selector,T=i.create(wr.NULL,[],M,a),P=T.location.nativeElement,k=T.injector.get(Xm,null);return k?.registerApplication(P),T.onDestroy(()=>{this.detachView(T.hostView),nu(this.components,T),k?.unregisterApplication(P)}),this._loadComponent(T),T}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new at(101,!1);let s=Nt(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,Nt(s),this.afterTick.next()}}detectChangesInAttachedViews(r){let s=null;this._injector.destroyed||(s=this._injector.get(no,null,{optional:!0}));let o=0,I=this.afterRenderEffectManager;for(;o<gT;){let i=o===0;if(r||!i){this.beforeRender.next(i);for(let{_lView:a,notifyErrorHandler:M}of this._views)vT(a,M,i,this.zonelessEnabled)}else s?.begin?.(),s?.end?.();if(o++,I.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>Wo(a))&&(I.execute(),!this.allViews.some(({_lView:a})=>Wo(a))))break}}attachView(r){let s=r;this._views.push(s),s.attachToAppRef(this)}detachView(r){let s=r;nu(this._views,s),s.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let s=this._injector.get(kd,[]);[...this._bootstrapListeners,...s].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>nu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new at(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function nu(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function vT(e,t,n,r){if(!n&&!Wo(e))return;Nm(e,t,n&&!r?0:1)}var Wu=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Rd=(()=>{let t=class t{compileModuleSync(r){return new zu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let s=this.compileModuleSync(r),o=nv(r),I=om(o.declarations).reduce((i,a)=>{let M=mi(a);return M&&i.push(new Xo(M)),i},[]);return new Wu(s,I)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var mT=(()=>{let t=class t{constructor(){this.zone=$e(Qt),this.changeDetectionScheduler=$e(Yo),this.applicationRef=$e(jr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),yT=new dt("",{factory:()=>!1});function Qm({ngZoneFactory:e,ignoreChangesOutsideZone:t}){return e??=()=>new Qt(Km()),[{provide:Qt,useFactory:e},{provide:Qi,multi:!0,useFactory:()=>{let n=$e(mT,{optional:!0});return()=>n.initialize()}},{provide:Qi,multi:!0,useFactory:()=>{let n=$e(IT);return()=>{n.initialize()}}},{provide:Xv,useFactory:CT},t===!0?{provide:Lm,useValue:!0}:[]]}function CT(){let e=$e(Qt),t=$e(_r);return n=>e.runOutsideAngular(()=>t.handleError(n))}function Jm(e){let t=e?.ignoreChangesOutsideZone,n=Qm({ngZoneFactory:()=>{let r=Km(e);return r.shouldCoalesceEventChangeDetection&&wd("NgZone_CoalesceEvent"),new Qt(r)},ignoreChangesOutsideZone:t});return io([{provide:yT,useValue:!0},{provide:Md,useValue:!1},n])}function Km(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var IT=(()=>{let t=class t{constructor(){this.subscription=new $t,this.initialized=!1,this.zone=$e(Qt),this.pendingTasks=$e(ao)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Qt.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Qt.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var bT=(()=>{let t=class t{constructor(){this.appRef=$e(jr),this.taskService=$e(ao),this.ngZone=$e(Qt),this.zonelessEnabled=$e(Md),this.disableScheduling=$e(Lm,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $t,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Au||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let s=this.useMicrotaskScheduler?Ep:jm;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=s(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=s(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Qt.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let s=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(s),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ep(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(s)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ST(){return typeof $localize<"u"&&$localize.locale||gl}var Ld=new dt("",{providedIn:"root",factory:()=>$e(Ld,pt.Optional|pt.SkipSelf)||ST()});var qm=new dt("");var $a=null;function DT(e=[],t){return wr.create({name:t,providers:[{provide:ml,useValue:"platform"},{provide:qm,useValue:new Set([()=>$a=null])},...e]})}function xT(e=[]){if($a)return $a;let t=DT(e);return $a=t,fT(),ET(t),t}function ET(e){e.get(fd,null)?.forEach(n=>n())}function ey(){return!1}var os=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=MT;let e=t;return e})();function MT(e){return wT(kn(),Wt(),(e&16)===16)}function wT(e,t,n){if(Cl(e)&&!n){let r=ni(e.index,t);return new Di(r,r)}else if(e.type&175){let r=t[yr];return new Di(r,t)}return null}function ty(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,s=xT(r),o=[Qm({}),{provide:Yo,useExisting:bT},...n||[]],i=new dl({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1}).injector,a=i.get(Qt);return a.run(()=>{i.resolveInjectorInitializers();let M=i.get(_r,null),T;a.runOutsideAngular(()=>{T=a.onError.subscribe({next:R=>{M.handleError(R)}})});let P=()=>i.destroy(),k=s.get(qm);return k.add(P),i.onDestroy(()=>{T.unsubscribe(),k.delete(P)}),pT(M,a,()=>{let R=i.get(Zm);return R.runInitializers(),R.donePromise.then(()=>{let b=i.get(Ld,gl);sT(b||gl);let c=i.get(jr);return t!==void 0&&c.bootstrap(t),c})})})}catch(t){return Promise.reject(t)}}var ny=new dt("");function ss(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var ay=null;function co(){return ay}function ly(e){ay??=e}var Al=class{};var Ln=new dt(""),cy=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:()=>$e(_T),providedIn:"platform"});let e=t;return e})();var _T=(()=>{let t=class t extends cy{constructor(){super(),this._doc=$e(Ln),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return co().getBaseHref(this._doc)}onPopState(r){let s=co().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){let s=co().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,s,o){this._history.pushState(r,s,o)}replaceState(r,s,o){this._history.replaceState(r,s,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function uy(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function ry(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Mi(e){return e&&e[0]!=="?"?"?"+e:e}var uo=(()=>{let t=class t{historyGo(r){throw new Error("")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:()=>$e(dy),providedIn:"root"});let e=t;return e})(),TT=new dt(""),dy=(()=>{let t=class t extends uo{constructor(r,s){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??$e(Ln).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return uy(this._baseHref,r)}path(r=!1){let s=this._platformLocation.pathname+Mi(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${s}${o}`:s}pushState(r,s,o,I){let i=this.prepareExternalUrl(o+Mi(I));this._platformLocation.pushState(r,s,i)}replaceState(r,s,o,I){let i=this.prepareExternalUrl(o+Mi(I));this._platformLocation.replaceState(r,s,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};t.\u0275fac=function(s){return new(s||t)(ft(cy),ft(TT,8))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var as=(()=>{let t=class t{constructor(r){this._subject=new pn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let s=this._locationStrategy.getBaseHref();this._basePath=NT(ry(iy(s))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+Mi(s))}normalize(r){return t.stripTrailingSlash(OT(this._basePath,iy(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,s="",o=null){this._locationStrategy.pushState(o,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Mi(s)),o)}replaceState(r,s="",o=null){this._locationStrategy.replaceState(o,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Mi(s)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}),()=>{let s=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(s,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(o=>o(r,s))}subscribe(r,s,o){return this._subject.subscribe({next:r,error:s,complete:o})}};t.normalizeQueryParams=Mi,t.joinWithSlash=uy,t.stripTrailingSlash=ry,t.\u0275fac=function(s){return new(s||t)(ft(uo))},t.\u0275prov=nt({token:t,factory:()=>AT(),providedIn:"root"});let e=t;return e})();function AT(){return new as(ft(uo))}function OT(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function iy(e){return e.replace(/\/index.html$/,"")}function NT(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function fy(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[s,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===t)return decodeURIComponent(o)}return null}var Nl=(()=>{let t=class t{constructor(r,s){this._viewContainer=r,this._context=new Fd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){oy("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){oy("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,s){return!0}};t.\u0275fac=function(s){return new(s||t)(Rn(Ei),Rn(eo))},t.\u0275dir=Jo({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),Fd=class{constructor(){this.$implicit=null,this.ngIf=null}};function oy(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${_n(t)}'.`)}var Hd="browser",PT="server";function Ud(e){return e===Hd}function Vd(e){return e===PT}var Ol=class{};var Yd=class extends Al{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Xd=class e extends Yd{static makeCurrent(){ly(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=LT();return n==null?null:jT(n)}resetBaseElement(){ls=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return fy(document.cookie,t)}},ls=null;function LT(){return ls=ls||document.querySelector("base"),ls?ls.getAttribute("href"):null}function jT(e){return new URL(e,document.baseURI).pathname}var FT=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})(),Pl=new dt(""),vy=(()=>{let t=class t{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,s,o){return this._findPluginFor(s).addEventListener(r,s,o)}getZone(){return this._zone}_findPluginFor(r){let s=this._eventNameToPlugin.get(r);if(s)return s;if(s=this._plugins.find(I=>I.supports(r)),!s)throw new at(5101,!1);return this._eventNameToPlugin.set(r,s),s}};t.\u0275fac=function(s){return new(s||t)(ft(Pl),ft(Qt))},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})(),cs=class{constructor(t){this._doc=t}},Wd="ng-app-id",my=(()=>{let t=class t{constructor(r,s,o,I={}){this.doc=r,this.appId=s,this.nonce=o,this.platformId=I,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Vd(I),this.resetHostNodes()}addStyles(r){for(let s of r)this.changeUsageCount(s,1)===1&&this.onStyleAdded(s)}removeStyles(r){for(let s of r)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(s=>s.remove()),r.clear());for(let s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let s of this.getAllStyles())this.addStyleToHost(r,s)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let s of this.hostNodes)this.addStyleToHost(s,r)}onStyleRemoved(r){let s=this.styleRef;s.get(r)?.elements?.forEach(o=>o.remove()),s.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Wd}="${this.appId}"]`);if(r?.length){let s=new Map;return r.forEach(o=>{o.textContent!=null&&s.set(o.textContent,o)}),s}return null}changeUsageCount(r,s){let o=this.styleRef;if(o.has(r)){let I=o.get(r);return I.usage+=s,I.usage}return o.set(r,{usage:s,elements:[]}),s}getStyleElement(r,s){let o=this.styleNodesInDOM,I=o?.get(s);if(I?.parentNode===r)return o.delete(s),I.removeAttribute(Wd),I;{let i=this.doc.createElement("style");return this.nonce&&i.setAttribute("nonce",this.nonce),i.textContent=s,this.platformIsServer&&i.setAttribute(Wd,this.appId),r.appendChild(i),i}}addStyleToHost(r,s){let o=this.getStyleElement(r,s),I=this.styleRef,i=I.get(s)?.elements;i?i.push(o):I.set(s,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};t.\u0275fac=function(s){return new(s||t)(ft(Ln),ft(dd),ft(hd,8),ft(Pr))},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})(),Gd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zd=/%COMP%/g,yy="%COMP%",BT=`_nghost-${yy}`,zT=`_ngcontent-${yy}`,HT=!0,UT=new dt("",{providedIn:"root",factory:()=>HT});function VT(e){return zT.replace(Zd,e)}function WT(e){return BT.replace(Zd,e)}function Cy(e,t){return t.map(n=>n.replace(Zd,e))}var hy=(()=>{let t=class t{constructor(r,s,o,I,i,a,M,T=null){this.eventManager=r,this.sharedStylesHost=s,this.appId=o,this.removeStylesOnCompDestroy=I,this.doc=i,this.platformId=a,this.ngZone=M,this.nonce=T,this.rendererByCompId=new Map,this.platformIsServer=Vd(a),this.defaultRenderer=new us(r,i,M,this.platformIsServer)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===vr.ShadowDom&&(s=qt(Ke({},s),{encapsulation:vr.Emulated}));let o=this.getOrCreateRenderer(r,s);return o instanceof kl?o.applyToHost(r):o instanceof ds&&o.applyStyles(),o}getOrCreateRenderer(r,s){let o=this.rendererByCompId,I=o.get(s.id);if(!I){let i=this.doc,a=this.ngZone,M=this.eventManager,T=this.sharedStylesHost,P=this.removeStylesOnCompDestroy,k=this.platformIsServer;switch(s.encapsulation){case vr.Emulated:I=new kl(M,T,s,this.appId,P,i,a,k);break;case vr.ShadowDom:return new $d(M,T,r,s,i,a,this.nonce,k);default:I=new ds(M,T,s,P,i,a,k);break}o.set(s.id,I)}return I}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(s){return new(s||t)(ft(vy),ft(my),ft(dd),ft(UT),ft(Ln),ft(Pr),ft(Qt),ft(hd))},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})(),us=class{constructor(t,n,r,s){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Gd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(gy(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(gy(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new at(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,s){if(s){n=s+":"+n;let o=Gd[s];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let s=Gd[r];s?t.removeAttributeNS(s,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,s){s&(Tr.DashCase|Tr.Important)?t.style.setProperty(n,r,s&Tr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Tr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=co().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function gy(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var $d=class extends us{constructor(t,n,r,s,o,I,i,a){super(t,o,I,a),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let M=Cy(s.id,s.styles);for(let T of M){let P=document.createElement("style");i&&P.setAttribute("nonce",i),P.textContent=T,this.shadowRoot.appendChild(P)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ds=class extends us{constructor(t,n,r,s,o,I,i,a){super(t,o,I,i),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=a?Cy(a,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},kl=class extends ds{constructor(t,n,r,s,o,I,i,a){let M=s+"-"+r.id;super(t,n,r,o,I,i,a,M),this.contentAttr=VT(M),this.hostAttr=WT(M)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},GT=(()=>{let t=class t extends cs{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,o){return r.addEventListener(s,o,!1),()=>this.removeEventListener(r,s,o)}removeEventListener(r,s,o){return r.removeEventListener(s,o)}};t.\u0275fac=function(s){return new(s||t)(ft(Ln))},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})(),YT=(()=>{let t=class t extends cs{constructor(r){super(r),this.delegate=$e(ny,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,s,o){return this.delegate.addEventListener(r,s,o)}removeEventListener(r,s,o){return this.delegate.removeEventListener(r,s,o)}};t.\u0275fac=function(s){return new(s||t)(ft(Ln))},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})(),py=["alt","control","meta","shift"],XT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$T={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},ZT=(()=>{let t=class t extends cs{constructor(r){super(r)}supports(r){return t.parseEventName(r)!=null}addEventListener(r,s,o){let I=t.parseEventName(s),i=t.eventCallback(I.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>co().onAndCancel(r,I.domEventName,i))}static parseEventName(r){let s=r.toLowerCase().split("."),o=s.shift();if(s.length===0||!(o==="keydown"||o==="keyup"))return null;let I=t._normalizeKey(s.pop()),i="",a=s.indexOf("code");if(a>-1&&(s.splice(a,1),i="code."),py.forEach(T=>{let P=s.indexOf(T);P>-1&&(s.splice(P,1),i+=T+".")}),i+=I,s.length!=0||I.length===0)return null;let M={};return M.domEventName=o,M.fullKey=i,M}static matchEventFullKeyCode(r,s){let o=XT[r.key]||r.key,I="";return s.indexOf("code.")>-1&&(o=r.code,I="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),py.forEach(i=>{if(i!==o){let a=$T[i];a(r)&&(I+=i+".")}}),I+=o,I===s)}static eventCallback(r,s,o){return I=>{t.matchEventFullKeyCode(I,r)&&o.runGuarded(()=>s(I))}}static _normalizeKey(r){return r==="esc"?"escape":r}};t.\u0275fac=function(s){return new(s||t)(ft(Ln))},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})();function Iy(e,t){return ty(Ke({rootComponent:e},QT(t)))}function QT(e){return{appProviders:[...tA,...e?.providers??[]],platformProviders:eA}}function JT(){Xd.makeCurrent()}function KT(){return new _r}function qT(){return em(document),document}var eA=[{provide:Pr,useValue:Hd},{provide:fd,useValue:JT,multi:!0},{provide:Ln,useFactory:qT,deps:[]}];var tA=[{provide:ml,useValue:"root"},{provide:_r,useFactory:KT,deps:[]},{provide:Pl,useClass:GT,multi:!0,deps:[Ln,Qt,Pr]},{provide:Pl,useClass:ZT,multi:!0,deps:[Ln]},{provide:Pl,useClass:YT,multi:!0},hy,my,vy,{provide:no,useExisting:hy},{provide:Ol,useClass:FT,deps:[]},[]];var by=(()=>{let t=class t{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};t.\u0275fac=function(s){return new(s||t)(ft(Ln))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ht="primary",ws=Symbol("RouteTitle"),ef=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function mo(e){return new ef(e)}function rA(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let s={};for(let o=0;o<r.length;o++){let I=r[o],i=e[o];if(I[0]===":")s[I.substring(1)]=i;else if(I!==i.path)return null}return{consumed:e.slice(0,r.length),posParams:s}}function iA(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ir(e[n],t[n]))return!1;return!0}function Ir(e,t){let n=e?tf(e):void 0,r=t?tf(t):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let o=0;o<n.length;o++)if(s=n[o],!Ty(e[s],t[s]))return!1;return!0}function tf(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Ty(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((s,o)=>r[o]===s)}else return e===t}function Ay(e){return e.length>0?e[e.length-1]:null}function si(e){return jc(e)?e:is(e)?en(Promise.resolve(e)):ot(e)}var oA={exact:Ny,subset:Py},Oy={exact:sA,subset:aA,ignored:()=>!0};function Sy(e,t,n){return oA[n.paths](e.root,t.root,n.matrixParams)&&Oy[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function sA(e,t){return Ir(e,t)}function Ny(e,t,n){if(!_i(e.segments,t.segments)||!jl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Ny(e.children[r],t.children[r],n))return!1;return!0}function aA(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Ty(e[n],t[n]))}function Py(e,t,n){return ky(e,t,t.segments,n)}function ky(e,t,n,r){if(e.segments.length>n.length){let s=e.segments.slice(0,n.length);return!(!_i(s,n)||t.hasChildren()||!jl(s,n,r))}else if(e.segments.length===n.length){if(!_i(e.segments,n)||!jl(e.segments,n,r))return!1;for(let s in t.children)if(!e.children[s]||!Py(e.children[s],t.children[s],r))return!1;return!0}else{let s=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!_i(e.segments,s)||!jl(e.segments,s,r)||!e.children[ht]?!1:ky(e.children[ht],t,o,r)}}function jl(e,t,n){return t.every((r,s)=>Oy[n](e[s].parameters,r.parameters))}var Br=class{constructor(t=new kt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=mo(this.queryParams),this._queryParamMap}toString(){return uA.serialize(this)}},kt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fl(this)}},wi=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=mo(this.parameters),this._parameterMap}toString(){return Ly(this)}};function lA(e,t){return _i(e,t)&&e.every((n,r)=>Ir(n.parameters,t[r].parameters))}function _i(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function cA(e,t){let n=[];return Object.entries(e.children).forEach(([r,s])=>{r===ht&&(n=n.concat(t(s,r)))}),Object.entries(e.children).forEach(([r,s])=>{r!==ht&&(n=n.concat(t(s,r)))}),n}var _f=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:()=>new ys,providedIn:"root"});let e=t;return e})(),ys=class{parse(t){let n=new rf(t);return new Br(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${fs(t.root,!0)}`,r=hA(t.queryParams),s=typeof t.fragment=="string"?`#${dA(t.fragment)}`:"";return`${n}${r}${s}`}},uA=new ys;function Fl(e){return e.segments.map(t=>Ly(t)).join("/")}function fs(e,t){if(!e.hasChildren())return Fl(e);if(t){let n=e.children[ht]?fs(e.children[ht],!1):"",r=[];return Object.entries(e.children).forEach(([s,o])=>{s!==ht&&r.push(`${s}:${fs(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=cA(e,(r,s)=>s===ht?[fs(e.children[ht],!1)]:[`${s}:${fs(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[ht]!=null?`${Fl(e)}/${n[0]}`:`${Fl(e)}/(${n.join("//")})`}}function Ry(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rl(e){return Ry(e).replace(/%3B/gi,";")}function dA(e){return encodeURI(e)}function nf(e){return Ry(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bl(e){return decodeURIComponent(e)}function Dy(e){return Bl(e.replace(/\+/g,"%20"))}function Ly(e){return`${nf(e.path)}${fA(e.parameters)}`}function fA(e){return Object.entries(e).map(([t,n])=>`;${nf(t)}=${nf(n)}`).join("")}function hA(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(s=>`${Rl(n)}=${Rl(s)}`).join("&"):`${Rl(n)}=${Rl(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var gA=/^[^\/()?;#]+/;function Qd(e){let t=e.match(gA);return t?t[0]:""}var pA=/^[^\/()?;=#]+/;function vA(e){let t=e.match(pA);return t?t[0]:""}var mA=/^[^=?&#]+/;function yA(e){let t=e.match(mA);return t?t[0]:""}var CA=/^[^&#]+/;function IA(e){let t=e.match(CA);return t?t[0]:""}var rf=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ht]=new kt(t,n)),r}parseSegment(){let t=Qd(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new at(4009,!1);return this.capture(t),new wi(Bl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=vA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Qd(this.remaining);s&&(r=s,this.capture(r))}t[Bl(n)]=Bl(r)}parseQueryParam(t){let n=yA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let I=IA(this.remaining);I&&(r=I,this.capture(r))}let s=Dy(n),o=Dy(r);if(t.hasOwnProperty(s)){let I=t[s];Array.isArray(I)||(I=[I],t[s]=I),I.push(o)}else t[s]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qd(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new at(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ht);let I=this.parseChildren();n[o]=Object.keys(I).length===1?I[ht]:new kt([],I),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new at(4011,!1)}};function jy(e){return e.segments.length>0?new kt([],{[ht]:e}):e}function Fy(e){let t={};for(let[r,s]of Object.entries(e.children)){let o=Fy(s);if(r===ht&&o.segments.length===0&&o.hasChildren())for(let[I,i]of Object.entries(o.children))t[I]=i;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new kt(e.segments,t);return bA(n)}function bA(e){if(e.numberOfChildren===1&&e.children[ht]){let t=e.children[ht];return new kt(e.segments.concat(t.segments),t.children)}return e}function Ti(e){return e instanceof Br}function SA(e,t,n=null,r=null){let s=By(e);return zy(s,t,n,r)}function By(e){let t;function n(o){let I={};for(let a of o.children){let M=n(a);I[a.outlet]=M}let i=new kt(o.url,I);return o===e&&(t=i),i}let r=n(e.root),s=jy(r);return t??s}function zy(e,t,n,r){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return Jd(s,s,s,n,r);let o=DA(t);if(o.toRoot())return Jd(s,s,new kt([],{}),n,r);let I=xA(o,s,e),i=I.processChildren?ps(I.segmentGroup,I.index,o.commands):Uy(I.segmentGroup,I.index,o.commands);return Jd(s,I.segmentGroup,i,n,r)}function zl(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Cs(e){return typeof e=="object"&&e!=null&&e.outlets}function Jd(e,t,n,r,s){let o={};r&&Object.entries(r).forEach(([a,M])=>{o[a]=Array.isArray(M)?M.map(T=>`${T}`):`${M}`});let I;e===t?I=n:I=Hy(e,t,n);let i=jy(Fy(I));return new Br(i,o,s)}function Hy(e,t,n){let r={};return Object.entries(e.children).forEach(([s,o])=>{o===t?r[s]=n:r[s]=Hy(o,t,n)}),new kt(e.segments,r)}var Hl=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&zl(r[0]))throw new at(4003,!1);let s=r.find(Cs);if(s&&s!==Ay(r))throw new at(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DA(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Hl(!0,0,e);let t=0,n=!1,r=e.reduce((s,o,I)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let i={};return Object.entries(o.outlets).forEach(([a,M])=>{i[a]=typeof M=="string"?M.split("/"):M}),[...s,{outlets:i}]}if(o.segmentPath)return[...s,o.segmentPath]}return typeof o!="string"?[...s,o]:I===0?(o.split("/").forEach((i,a)=>{a==0&&i==="."||(a==0&&i===""?n=!0:i===".."?t++:i!=""&&s.push(i))}),s):[...s,o]},[]);return new Hl(n,t,r)}var go=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function xA(e,t,n){if(e.isAbsolute)return new go(t,!0,0);if(!n)return new go(t,!1,NaN);if(n.parent===null)return new go(n,!0,0);let r=zl(e.commands[0])?0:1,s=n.segments.length-1+r;return EA(n,s,e.numberOfDoubleDots)}function EA(e,t,n){let r=e,s=t,o=n;for(;o>s;){if(o-=s,r=r.parent,!r)throw new at(4005,!1);s=r.segments.length}return new go(r,!1,s-o)}function MA(e){return Cs(e[0])?e[0].outlets:{[ht]:e}}function Uy(e,t,n){if(e??=new kt([],{}),e.segments.length===0&&e.hasChildren())return ps(e,t,n);let r=wA(e,t,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new kt(e.segments.slice(0,r.pathIndex),{});return o.children[ht]=new kt(e.segments.slice(r.pathIndex),e.children),ps(o,0,s)}else return r.match&&s.length===0?new kt(e.segments,{}):r.match&&!e.hasChildren()?of(e,t,n):r.match?ps(e,0,s):of(e,t,n)}function ps(e,t,n){if(n.length===0)return new kt(e.segments,{});{let r=MA(n),s={};if(Object.keys(r).some(o=>o!==ht)&&e.children[ht]&&e.numberOfChildren===1&&e.children[ht].segments.length===0){let o=ps(e.children[ht],t,n);return new kt(e.segments,o.children)}return Object.entries(r).forEach(([o,I])=>{typeof I=="string"&&(I=[I]),I!==null&&(s[o]=Uy(e.children[o],t,I))}),Object.entries(e.children).forEach(([o,I])=>{r[o]===void 0&&(s[o]=I)}),new kt(e.segments,s)}}function wA(e,t,n){let r=0,s=t,o={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(r>=n.length)return o;let I=e.segments[s],i=n[r];if(Cs(i))break;let a=`${i}`,M=r<n.length-1?n[r+1]:null;if(s>0&&a===void 0)break;if(a&&M&&typeof M=="object"&&M.outlets===void 0){if(!Ey(a,M,I))return o;r+=2}else{if(!Ey(a,{},I))return o;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function of(e,t,n){let r=e.segments.slice(0,t),s=0;for(;s<n.length;){let o=n[s];if(Cs(o)){let a=_A(o.outlets);return new kt(r,a)}if(s===0&&zl(n[0])){let a=e.segments[t];r.push(new wi(a.path,xy(n[0]))),s++;continue}let I=Cs(o)?o.outlets[ht]:`${o}`,i=s<n.length-1?n[s+1]:null;I&&i&&zl(i)?(r.push(new wi(I,xy(i))),s+=2):(r.push(new wi(I,{})),s++)}return new kt(r,{})}function _A(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=of(new kt([],{}),0,r))}),t}function xy(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Ey(e,t,n){return e==n.path&&Ir(t,n.parameters)}var vs="imperative",fn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(fn||{}),Qn=class{constructor(t,n){this.id=t,this.url=n}},Is=class extends Qn{constructor(t,n,r="imperative",s=null){super(t,n),this.type=fn.NavigationStart,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},oi=class extends Qn{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=fn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fn=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Fn||{}),sf=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(sf||{}),Fr=class extends Qn{constructor(t,n,r,s){super(t,n),this.reason=r,this.code=s,this.type=fn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ai=class extends Qn{constructor(t,n,r,s){super(t,n),this.reason=r,this.code=s,this.type=fn.NavigationSkipped}},bs=class extends Qn{constructor(t,n,r,s){super(t,n),this.error=r,this.target=s,this.type=fn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ul=class extends Qn{constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s,this.type=fn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},af=class extends Qn{constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s,this.type=fn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lf=class extends Qn{constructor(t,n,r,s,o){super(t,n),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=o,this.type=fn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cf=class extends Qn{constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s,this.type=fn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uf=class extends Qn{constructor(t,n,r,s){super(t,n),this.urlAfterRedirects=r,this.state=s,this.type=fn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},df=class{constructor(t){this.route=t,this.type=fn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ff=class{constructor(t){this.route=t,this.type=fn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hf=class{constructor(t){this.snapshot=t,this.type=fn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gf=class{constructor(t){this.snapshot=t,this.type=fn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pf=class{constructor(t){this.snapshot=t,this.type=fn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vf=class{constructor(t){this.snapshot=t,this.type=fn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ss=class{},yo=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function TA(e,t){return e.providers&&!e._injector&&(e._injector=Od(e.providers,t,`Route: ${e.path}`)),e._injector??t}function ar(e){return e.outlet||ht}function AA(e,t){let n=e.filter(r=>ar(r)===t);return n.push(...e.filter(r=>ar(r)!==t)),n}function _s(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var mf=class{get injector(){return _s(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Zl(this.rootInjector),this.attachRef=null}},Zl=(()=>{let t=class t{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,s){let o=this.getOrCreateContext(r);o.outlet=s,this.contexts.set(r,o)}onChildOutletDestroyed(r){let s=this.getContext(r);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let s=this.getContext(r);return s||(s=new mf(this.rootInjector),this.contexts.set(r,s)),s}getContext(r){return this.contexts.get(r)||null}};t.\u0275fac=function(s){return new(s||t)(ft(Gn))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Vl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=yf(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=yf(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Cf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return Cf(t,this._root).map(n=>n.value)}};function yf(e,t){if(e===t.value)return t;for(let n of t.children){let r=yf(e,n);if(r)return r}return null}function Cf(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Cf(e,n);if(r.length)return r.unshift(t),r}return[]}var jn=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function ho(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Wl=class extends Vl{constructor(t,n){super(t),this.snapshot=n,Tf(this,t)}toString(){return this.snapshot.toString()}};function Vy(e){let t=OA(e),n=new ln([new wi("",{})]),r=new ln({}),s=new ln({}),o=new ln({}),I=new ln(""),i=new Oi(n,r,o,I,s,ht,e,t.root);return i.snapshot=t.root,new Wl(new jn(i,[]),t)}function OA(e){let t={},n={},r={},s="",o=new po([],t,r,s,n,ht,e,null,{});return new Yl("",new jn(o,[]))}var Oi=class{constructor(t,n,r,s,o,I,i,a){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=o,this.outlet=I,this.component=i,this._futureSnapshot=a,this.title=this.dataSubject?.pipe(ut(M=>M[ws]))??ot(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=s,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ut(t=>mo(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ut(t=>mo(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gl(e,t,n="emptyOnly"){let r,{routeConfig:s}=e;return t!==null&&(n==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:Ke(Ke({},t.params),e.params),data:Ke(Ke({},t.data),e.data),resolve:Ke(Ke(Ke(Ke({},e.data),t.data),s?.data),e._resolvedData)}:r={params:Ke({},e.params),data:Ke({},e.data),resolve:Ke(Ke({},e.data),e._resolvedData??{})},s&&Gy(s)&&(r.resolve[ws]=s.title),r}var po=class{get title(){return this.data?.[ws]}constructor(t,n,r,s,o,I,i,a,M){this.url=t,this.params=n,this.queryParams=r,this.fragment=s,this.data=o,this.outlet=I,this.component=i,this.routeConfig=a,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mo(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Yl=class extends Vl{constructor(t,n){super(n),this.url=t,Tf(this,n)}toString(){return Wy(this._root)}};function Tf(e,t){t.value._routerState=e,t.children.forEach(n=>Tf(e,n))}function Wy(e){let t=e.children.length>0?` { ${e.children.map(Wy).join(", ")} } `:"";return`${e.value}${t}`}function Kd(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ir(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Ir(t.params,n.params)||e.paramsSubject.next(n.params),iA(t.url,n.url)||e.urlSubject.next(n.url),Ir(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function If(e,t){let n=Ir(e.params,t.params)&&lA(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||If(e.parent,t.parent))}function Gy(e){return typeof e.title=="string"||e.title===null}var Af=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ht,this.activateEvents=new pn,this.deactivateEvents=new pn,this.attachEvents=new pn,this.detachEvents=new pn,this.parentContexts=$e(Zl),this.location=$e(Ei),this.changeDetector=$e(os),this.inputBinder=$e(Of,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:s,previousValue:o}=r.name;if(s)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new at(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new at(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new at(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new at(4013,!1);this._activatedRoute=r;let o=this.location,i=r.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,M=new bf(r,a,o.injector);this.activated=o.createComponent(i,{index:o.length,injector:M,environmentInjector:s}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=Jo({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qo]});let e=t;return e})(),bf=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Oi?this.route:t===Zl?this.childContexts:this.parent.get(t,n)}},Of=new dt("");function NA(e,t,n){let r=Ds(e,t._root,n?n._root:void 0);return new Wl(r,t)}function Ds(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let s=PA(e,t,n);return new jn(r,s)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let I=o.route;return I.value._futureSnapshot=t.value,I.children=t.children.map(i=>Ds(e,i)),I}}let r=kA(t.value),s=t.children.map(o=>Ds(e,o));return new jn(r,s)}}function PA(e,t,n){return t.children.map(r=>{for(let s of n.children)if(e.shouldReuseRoute(r.value,s.value.snapshot))return Ds(e,r,s);return Ds(e,r)})}function kA(e){return new Oi(new ln(e.url),new ln(e.params),new ln(e.queryParams),new ln(e.fragment),new ln(e.data),e.outlet,e.component,e)}var xs=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},Yy="ngNavigationCancelingError";function Xl(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Ti(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=Xy(!1,Fn.Redirect);return s.url=n,s.navigationBehaviorOptions=r,s}function Xy(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Yy]=!0,n.cancellationCode=t,n}function RA(e){return $y(e)&&Ti(e.url)}function $y(e){return!!e&&e[Yy]}var LA=(e,t,n,r)=>ut(s=>(new Sf(t,s.targetRouterState,s.currentRouterState,n,r).activate(e),s)),Sf=class{constructor(t,n,r,s,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Kd(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let s=ho(n);t.children.forEach(o=>{let I=o.value.outlet;this.deactivateRoutes(o,s[I],r),delete s[I]}),Object.values(s).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let s=t.value,o=n?n.value:null;if(s===o)if(s.component){let I=r.getContext(s.outlet);I&&this.deactivateChildRoutes(t,n,I.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),s=r&&t.value.component?r.children:n,o=ho(t);for(let I of Object.values(o))this.deactivateRouteAndItsChildren(I,s);if(r&&r.outlet){let I=r.outlet.detach(),i=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:I,route:t,contexts:i})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),s=r&&t.value.component?r.children:n,o=ho(t);for(let I of Object.values(o))this.deactivateRouteAndItsChildren(I,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let s=ho(n);t.children.forEach(o=>{this.activateRoutes(o,s[o.value.outlet],r),this.forwardEvent(new vf(o.value.snapshot))}),t.children.length&&this.forwardEvent(new gf(t.value.snapshot))}activateRoutes(t,n,r){let s=t.value,o=n?n.value:null;if(Kd(s),s===o)if(s.component){let I=r.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,I.children)}else this.activateChildRoutes(t,n,r);else if(s.component){let I=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let i=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),I.children.onOutletReAttached(i.contexts),I.attachRef=i.componentRef,I.route=i.route.value,I.outlet&&I.outlet.attach(i.componentRef,i.route.value),Kd(i.route.value),this.activateChildRoutes(t,null,I.children)}else I.attachRef=null,I.route=s,I.outlet&&I.outlet.activateWith(s,I.injector),this.activateChildRoutes(t,null,I.children)}else this.activateChildRoutes(t,null,r)}},$l=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},vo=class{constructor(t,n){this.component=t,this.route=n}};function jA(e,t,n){let r=e._root,s=t?t._root:null;return hs(r,s,n,[r.value])}function FA(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Io(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!zp(e)?e:t.get(e):r}function hs(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let o=ho(t);return e.children.forEach(I=>{BA(I,o[I.value.outlet],n,r.concat([I.value]),s),delete o[I.value.outlet]}),Object.entries(o).forEach(([I,i])=>ms(i,n.getContext(I),s)),s}function BA(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,I=t?t.value:null,i=n?n.getContext(e.value.outlet):null;if(I&&o.routeConfig===I.routeConfig){let a=zA(I,o,o.routeConfig.runGuardsAndResolvers);a?s.canActivateChecks.push(new $l(r)):(o.data=I.data,o._resolvedData=I._resolvedData),o.component?hs(e,t,i?i.children:null,r,s):hs(e,t,n,r,s),a&&i&&i.outlet&&i.outlet.isActivated&&s.canDeactivateChecks.push(new vo(i.outlet.component,I))}else I&&ms(t,i,s),s.canActivateChecks.push(new $l(r)),o.component?hs(e,null,i?i.children:null,r,s):hs(e,null,n,r,s);return s}function zA(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!_i(e.url,t.url);case"pathParamsOrQueryParamsChange":return!_i(e.url,t.url)||!Ir(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!If(e,t)||!Ir(e.queryParams,t.queryParams);case"paramsChange":default:return!If(e,t)}}function ms(e,t,n){let r=ho(e),s=e.value;Object.entries(r).forEach(([o,I])=>{s.component?t?ms(I,t.children.getContext(o),n):ms(I,null,n):ms(I,t,n)}),s.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new vo(t.outlet.component,s)):n.canDeactivateChecks.push(new vo(null,s)):n.canDeactivateChecks.push(new vo(null,s))}function Ts(e){return typeof e=="function"}function HA(e){return typeof e=="boolean"}function UA(e){return e&&Ts(e.canLoad)}function VA(e){return e&&Ts(e.canActivate)}function WA(e){return e&&Ts(e.canActivateChild)}function GA(e){return e&&Ts(e.canDeactivate)}function YA(e){return e&&Ts(e.canMatch)}function Zy(e){return e instanceof xr||e?.name==="EmptyError"}var Ll=Symbol("INITIAL_VALUE");function Co(){return gn(e=>ja(e.map(t=>t.pipe(on(1),Vc(Ll)))).pipe(ut(t=>{for(let n of t)if(n!==!0){if(n===Ll)return Ll;if(n===!1||XA(n))return n}return!0}),cn(t=>t!==Ll),on(1)))}function XA(e){return Ti(e)||e instanceof xs}function $A(e,t){return Gt(n=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:o,canDeactivateChecks:I}}=n;return I.length===0&&o.length===0?ot(qt(Ke({},n),{guardsResult:!0})):ZA(I,r,s,e).pipe(Gt(i=>i&&HA(i)?QA(r,o,e,t):ot(i)),ut(i=>qt(Ke({},n),{guardsResult:i})))})}function ZA(e,t,n,r){return en(e).pipe(Gt(s=>tO(s.component,s.route,n,t,r)),hr(s=>s!==!0,!0))}function QA(e,t,n,r){return en(t).pipe(Ui(s=>fr(KA(s.route.parent,r),JA(s.route,r),eO(e,s.path,n),qA(e,s.route,n))),hr(s=>s!==!0,!0))}function JA(e,t){return e!==null&&t&&t(new pf(e)),ot(!0)}function KA(e,t){return e!==null&&t&&t(new hf(e)),ot(!0)}function qA(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return ot(!0);let s=r.map(o=>hi(()=>{let I=_s(t)??n,i=Io(o,I),a=VA(i)?i.canActivate(t,e):Ar(I,()=>i(t,e));return si(a).pipe(hr())}));return ot(s).pipe(Co())}function eO(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(I=>FA(I)).filter(I=>I!==null).map(I=>hi(()=>{let i=I.guards.map(a=>{let M=_s(I.node)??n,T=Io(a,M),P=WA(T)?T.canActivateChild(r,e):Ar(M,()=>T(r,e));return si(P).pipe(hr())});return ot(i).pipe(Co())}));return ot(o).pipe(Co())}function tO(e,t,n,r,s){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return ot(!0);let I=o.map(i=>{let a=_s(t)??s,M=Io(i,a),T=GA(M)?M.canDeactivate(e,t,n,r):Ar(a,()=>M(e,t,n,r));return si(T).pipe(hr())});return ot(I).pipe(Co())}function nO(e,t,n,r){let s=t.canLoad;if(s===void 0||s.length===0)return ot(!0);let o=s.map(I=>{let i=Io(I,e),a=UA(i)?i.canLoad(t,n):Ar(e,()=>i(t,n));return si(a)});return ot(o).pipe(Co(),Qy(r))}function Qy(e){return Ac(sn(t=>{if(typeof t!="boolean")throw Xl(e,t)}),ut(t=>t===!0))}function rO(e,t,n,r){let s=t.canMatch;if(!s||s.length===0)return ot(!0);let o=s.map(I=>{let i=Io(I,e),a=YA(i)?i.canMatch(t,n):Ar(e,()=>i(t,n));return si(a)});return ot(o).pipe(Co(),Qy(r))}var Es=class{constructor(t){this.segmentGroup=t||null}},Ms=class extends Error{constructor(t){super(),this.urlTree=t}};function fo(e){return Xr(new Es(e))}function iO(e){return Xr(new at(4e3,!1))}function oO(e){return Xr(Xy(!1,Fn.GuardRejected))}var Df=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],s=n.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return ot(r);if(s.numberOfChildren>1||!s.children[ht])return iO(`${t.redirectTo}`);s=s.children[ht]}}applyRedirectCommands(t,n,r,s,o){if(typeof n!="string"){let i=n,{queryParams:a,fragment:M,routeConfig:T,url:P,outlet:k,params:R,data:b,title:c}=s,C=Ar(o,()=>i({params:R,data:b,queryParams:a,fragment:M,routeConfig:T,url:P,outlet:k,title:c}));if(C instanceof Br)throw new Ms(C);n=C}let I=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Ms(I);return I}applyRedirectCreateUrlTree(t,n,r,s){let o=this.createSegmentGroup(t,n.root,r,s);return new Br(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([s,o])=>{if(typeof o=="string"&&o[0]===":"){let i=o.substring(1);r[s]=n[i]}else r[s]=o}),r}createSegmentGroup(t,n,r,s){let o=this.createSegments(t,n.segments,r,s),I={};return Object.entries(n.children).forEach(([i,a])=>{I[i]=this.createSegmentGroup(t,a,r,s)}),new kt(o,I)}createSegments(t,n,r,s){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,s):this.findOrReturn(o,r))}findPosParam(t,n,r){let s=r[n.path.substring(1)];if(!s)throw new at(4001,!1);return s}findOrReturn(t,n){let r=0;for(let s of n){if(s.path===t.path)return n.splice(r),s;r++}return t}},xf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sO(e,t,n,r,s){let o=Nf(e,t,n);return o.matched?(r=TA(t,r),rO(r,t,n,s).pipe(ut(I=>I===!0?o:Ke({},xf)))):ot(o)}function Nf(e,t,n){if(t.path==="**")return aO(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?Ke({},xf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(t.matcher||rA)(n,e,t);if(!s)return Ke({},xf);let o={};Object.entries(s.posParams??{}).forEach(([i,a])=>{o[i]=a.path});let I=s.consumed.length>0?Ke(Ke({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:I,positionalParamSegments:s.posParams??{}}}function aO(e){return{matched:!0,parameters:e.length>0?Ay(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function My(e,t,n,r){return n.length>0&&uO(e,n,r)?{segmentGroup:new kt(t,cO(r,new kt(n,e.children))),slicedSegments:[]}:n.length===0&&dO(e,n,r)?{segmentGroup:new kt(e.segments,lO(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new kt(e.segments,e.children),slicedSegments:n}}function lO(e,t,n,r){let s={};for(let o of n)if(Ql(e,t,o)&&!r[ar(o)]){let I=new kt([],{});s[ar(o)]=I}return Ke(Ke({},r),s)}function cO(e,t){let n={};n[ht]=t;for(let r of e)if(r.path===""&&ar(r)!==ht){let s=new kt([],{});n[ar(r)]=s}return n}function uO(e,t,n){return n.some(r=>Ql(e,t,r)&&ar(r)!==ht)}function dO(e,t,n){return n.some(r=>Ql(e,t,r))}function Ql(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function fO(e,t,n,r){return ar(e)!==r&&(r===ht||!Ql(t,n,e))?!1:Nf(t,e,n).matched}function hO(e,t,n){return t.length===0&&!e.children[n]}var Ef=class{};function gO(e,t,n,r,s,o,I="emptyOnly"){return new Mf(e,t,n,r,s,I,o).recognize()}var pO=31,Mf=class{constructor(t,n,r,s,o,I,i){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=s,this.urlTree=o,this.paramsInheritanceStrategy=I,this.urlSerializer=i,this.applyRedirects=new Df(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new at(4002,`'${t.segmentGroup}'`)}recognize(){let t=My(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ut(({children:n,rootSnapshot:r})=>{let s=new jn(r,n),o=new Yl("",s),I=SA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return I.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(I),{state:o,tree:I}}))}match(t){let n=new po([],Object.freeze({}),Object.freeze(Ke({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ht,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,ht,n).pipe(ut(r=>({children:r,rootSnapshot:n})),$r(r=>{if(r instanceof Ms)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Es?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,s,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,s,!0,o).pipe(ut(I=>I instanceof jn?[I]:[]))}processChildren(t,n,r,s){let o=[];for(let I of Object.keys(r.children))I==="primary"?o.unshift(I):o.push(I);return en(o).pipe(Ui(I=>{let i=r.children[I],a=AA(n,I);return this.processSegmentGroup(t,a,i,I,s)}),Uc((I,i)=>(I.push(...i),I)),Zr(null),zc(),Gt(I=>{if(I===null)return fo(r);let i=Jy(I);return vO(i),ot(i)}))}processSegment(t,n,r,s,o,I,i){return en(n).pipe(Ui(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,s,o,I,i).pipe($r(M=>{if(M instanceof Es)return ot(null);throw M}))),hr(a=>!!a),$r(a=>{if(Zy(a))return hO(r,s,o)?ot(new Ef):fo(r);throw a}))}processSegmentAgainstRoute(t,n,r,s,o,I,i,a){return fO(r,s,o,I)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,r,o,I,a):this.allowRedirects&&i?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,r,o,I,a):fo(s):fo(s)}expandSegmentAgainstRouteUsingRedirect(t,n,r,s,o,I,i){let{matched:a,parameters:M,consumedSegments:T,positionalParamSegments:P,remainingSegments:k}=Nf(n,s,o);if(!a)return fo(n);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>pO&&(this.allowRedirects=!1));let R=new po(o,M,Object.freeze(Ke({},this.urlTree.queryParams)),this.urlTree.fragment,wy(s),ar(s),s.component??s._loadedComponent??null,s,_y(s)),b=Gl(R,i,this.paramsInheritanceStrategy);R.params=Object.freeze(b.params),R.data=Object.freeze(b.data);let c=this.applyRedirects.applyRedirectCommands(T,s.redirectTo,P,R,t);return this.applyRedirects.lineralizeSegments(s,c).pipe(Gt(C=>this.processSegment(t,r,n,C.concat(k),I,!1,i)))}matchSegmentAgainstRoute(t,n,r,s,o,I){let i=sO(n,r,s,t,this.urlSerializer);return r.path==="**"&&(n.children={}),i.pipe(gn(a=>a.matched?(t=r._injector??t,this.getChildConfig(t,r,s).pipe(gn(({routes:M})=>{let T=r._loadedInjector??t,{parameters:P,consumedSegments:k,remainingSegments:R}=a,b=new po(k,P,Object.freeze(Ke({},this.urlTree.queryParams)),this.urlTree.fragment,wy(r),ar(r),r.component??r._loadedComponent??null,r,_y(r)),c=Gl(b,I,this.paramsInheritanceStrategy);b.params=Object.freeze(c.params),b.data=Object.freeze(c.data);let{segmentGroup:C,slicedSegments:y}=My(n,k,R,M);if(y.length===0&&C.hasChildren())return this.processChildren(T,M,C,b).pipe(ut(h=>new jn(b,h)));if(M.length===0&&y.length===0)return ot(new jn(b,[]));let l=ar(r)===o;return this.processSegment(T,M,C,y,l?ht:o,!0,b).pipe(ut(h=>new jn(b,h instanceof jn?[h]:[])))}))):fo(n)))}getChildConfig(t,n,r){return n.children?ot({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?ot({routes:n._loadedRoutes,injector:n._loadedInjector}):nO(t,n,r,this.urlSerializer).pipe(Gt(s=>s?this.configLoader.loadChildren(t,n).pipe(sn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):oO(n))):ot({routes:[],injector:t})}};function vO(e){e.sort((t,n)=>t.value.outlet===ht?-1:n.value.outlet===ht?1:t.value.outlet.localeCompare(n.value.outlet))}function mO(e){let t=e.value.routeConfig;return t&&t.path===""}function Jy(e){let t=[],n=new Set;for(let r of e){if(!mO(r)){t.push(r);continue}let s=t.find(o=>r.value.routeConfig===o.value.routeConfig);s!==void 0?(s.children.push(...r.children),n.add(s)):t.push(r)}for(let r of n){let s=Jy(r.children);t.push(new jn(r.value,s))}return t.filter(r=>!n.has(r))}function wy(e){return e.data||{}}function _y(e){return e.resolve||{}}function yO(e,t,n,r,s,o){return Gt(I=>gO(e,t,n,r,I.extractedUrl,s,o).pipe(ut(({state:i,tree:a})=>qt(Ke({},I),{targetSnapshot:i,urlAfterRedirects:a}))))}function CO(e,t){return Gt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=n;if(!s.length)return ot(n);let o=new Set(s.map(a=>a.route)),I=new Set;for(let a of o)if(!I.has(a))for(let M of Ky(a))I.add(M);let i=0;return en(I).pipe(Ui(a=>o.has(a)?IO(a,r,e,t):(a.data=Gl(a,a.parent,e).resolve,ot(void 0))),sn(()=>i++),Vi(1),Gt(a=>i===I.size?ot(n):Sn))})}function Ky(e){let t=e.children.map(n=>Ky(n)).flat();return[e,...t]}function IO(e,t,n,r){let s=e.routeConfig,o=e._resolve;return s?.title!==void 0&&!Gy(s)&&(o[ws]=s.title),bO(o,e,t,r).pipe(ut(I=>(e._resolvedData=I,e.data=Gl(e,e.parent,n).resolve,null)))}function bO(e,t,n,r){let s=tf(e);if(s.length===0)return ot({});let o={};return en(s).pipe(Gt(I=>SO(e[I],t,n,r).pipe(hr(),sn(i=>{if(i instanceof xs)throw Xl(new ys,i);o[I]=i}))),Vi(1),Lo(o),$r(I=>Zy(I)?Sn:Xr(I)))}function SO(e,t,n,r){let s=_s(t)??r,o=Io(e,s),I=o.resolve?o.resolve(t,n):Ar(s,()=>o(t,n));return si(I)}function qd(e){return gn(t=>{let n=e(t);return n?en(n).pipe(ut(()=>t)):ot(t)})}var qy=(()=>{let t=class t{buildTitle(r){let s,o=r.root;for(;o!==void 0;)s=this.getResolvedTitleForRoute(o)??s,o=o.children.find(I=>I.outlet===ht);return s}getResolvedTitleForRoute(r){return r.data[ws]}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:()=>$e(DO),providedIn:"root"});let e=t;return e})(),DO=(()=>{let t=class t extends qy{constructor(r){super(),this.title=r}updateTitle(r){let s=this.buildTitle(r);s!==void 0&&this.title.setTitle(s)}};t.\u0275fac=function(s){return new(s||t)(ft(by))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Pf=new dt("",{providedIn:"root",factory:()=>({})}),xO=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Yn({type:t,selectors:[["ng-component"]],standalone:!0,features:[Zn],decls:1,vars:0,template:function(s,o){s&1&&dn(0,"router-outlet")},dependencies:[Af],encapsulation:2});let e=t;return e})();function kf(e){let t=e.children&&e.children.map(kf),n=t?qt(Ke({},e),{children:t}):Ke({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ht&&(n.component=xO),n}var Rf=new dt(""),EO=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$e(Rd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ot(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let s=si(r.loadComponent()).pipe(ut(eC),sn(I=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=I}),jo(()=>{this.componentLoaders.delete(r)})),o=new Yr(s,()=>new Zt).pipe(Fi());return this.componentLoaders.set(r,o),o}loadChildren(r,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return ot({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let I=MO(s,this.compiler,r,this.onLoadEndListener).pipe(jo(()=>{this.childrenLoaders.delete(s)})),i=new Yr(I,()=>new Zt).pipe(Fi());return this.childrenLoaders.set(s,i),i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function MO(e,t,n,r){return si(e.loadChildren()).pipe(ut(eC),Gt(s=>s instanceof $o||Array.isArray(s)?ot(s):en(t.compileModuleAsync(s))),ut(s=>{r&&r(e);let o,I,i=!1;return Array.isArray(s)?(I=s,i=!0):(o=s.create(n).injector,I=o.get(Rf,[],{optional:!0,self:!0}).flat()),{routes:I.map(kf),injector:o}}))}function wO(e){return e&&typeof e=="object"&&"default"in e}function eC(e){return wO(e)?e.default:e}var Lf=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:()=>$e(_O),providedIn:"root"});let e=t;return e})(),_O=(()=>{let t=class t{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,s){return r}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),TO=new dt("");var AO=new dt(""),OO=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Zt,this.transitionAbortSubject=new Zt,this.configLoader=$e(EO),this.environmentInjector=$e(Gn),this.urlSerializer=$e(_f),this.rootContexts=$e(Zl),this.location=$e(as),this.inputBindingEnabled=$e(Of,{optional:!0})!==null,this.titleStrategy=$e(qy),this.options=$e(Pf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$e(Lf),this.createViewTransition=$e(TO,{optional:!0}),this.navigationErrorHandler=$e(AO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ot(void 0),this.rootComponentType=null;let r=o=>this.events.next(new df(o)),s=o=>this.events.next(new ff(o));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let s=++this.navigationId;this.transitions?.next(qt(Ke(Ke({},this.transitions.value),r),{id:s}))}setupNavigations(r,s,o){return this.transitions=new ln({id:0,currentUrlTree:s,currentRawUrl:s,extractedUrl:this.urlHandlingStrategy.extract(s),urlAfterRedirects:this.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:vs,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(cn(I=>I.id!==0),ut(I=>qt(Ke({},I),{extractedUrl:this.urlHandlingStrategy.extract(I.rawUrl)})),gn(I=>{let i=!1,a=!1;return ot(I).pipe(gn(M=>{if(this.navigationId>I.id)return this.cancelNavigationTransition(I,"",Fn.SupersededByNewNavigation),Sn;this.currentTransition=I,this.currentNavigation={id:M.id,initialUrl:M.rawUrl,extractedUrl:M.extractedUrl,targetBrowserUrl:typeof M.extras.browserUrl=="string"?this.urlSerializer.parse(M.extras.browserUrl):M.extras.browserUrl,trigger:M.source,extras:M.extras,previousNavigation:this.lastSuccessfulNavigation?qt(Ke({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let T=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),P=M.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!T&&P!=="reload"){let k="";return this.events.next(new Ai(M.id,this.urlSerializer.serialize(M.rawUrl),k,sf.IgnoredSameUrlNavigation)),M.resolve(!1),Sn}if(this.urlHandlingStrategy.shouldProcessUrl(M.rawUrl))return ot(M).pipe(gn(k=>{let R=this.transitions?.getValue();return this.events.next(new Is(k.id,this.urlSerializer.serialize(k.extractedUrl),k.source,k.restoredState)),R!==this.transitions?.getValue()?Sn:Promise.resolve(k)}),yO(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),sn(k=>{I.targetSnapshot=k.targetSnapshot,I.urlAfterRedirects=k.urlAfterRedirects,this.currentNavigation=qt(Ke({},this.currentNavigation),{finalUrl:k.urlAfterRedirects});let R=new Ul(k.id,this.urlSerializer.serialize(k.extractedUrl),this.urlSerializer.serialize(k.urlAfterRedirects),k.targetSnapshot);this.events.next(R)}));if(T&&this.urlHandlingStrategy.shouldProcessUrl(M.currentRawUrl)){let{id:k,extractedUrl:R,source:b,restoredState:c,extras:C}=M,y=new Is(k,this.urlSerializer.serialize(R),b,c);this.events.next(y);let l=Vy(this.rootComponentType).snapshot;return this.currentTransition=I=qt(Ke({},M),{targetSnapshot:l,urlAfterRedirects:R,extras:qt(Ke({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=R,ot(I)}else{let k="";return this.events.next(new Ai(M.id,this.urlSerializer.serialize(M.extractedUrl),k,sf.IgnoredByUrlHandlingStrategy)),M.resolve(!1),Sn}}),sn(M=>{let T=new af(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot);this.events.next(T)}),ut(M=>(this.currentTransition=I=qt(Ke({},M),{guards:jA(M.targetSnapshot,M.currentSnapshot,this.rootContexts)}),I)),$A(this.environmentInjector,M=>this.events.next(M)),sn(M=>{if(I.guardsResult=M.guardsResult,M.guardsResult&&typeof M.guardsResult!="boolean")throw Xl(this.urlSerializer,M.guardsResult);let T=new lf(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot,!!M.guardsResult);this.events.next(T)}),cn(M=>M.guardsResult?!0:(this.cancelNavigationTransition(M,"",Fn.GuardRejected),!1)),qd(M=>{if(M.guards.canActivateChecks.length)return ot(M).pipe(sn(T=>{let P=new cf(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(P)}),gn(T=>{let P=!1;return ot(T).pipe(CO(this.paramsInheritanceStrategy,this.environmentInjector),sn({next:()=>P=!0,complete:()=>{P||this.cancelNavigationTransition(T,"",Fn.NoDataFromResolver)}}))}),sn(T=>{let P=new uf(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(P)}))}),qd(M=>{let T=P=>{let k=[];P.routeConfig?.loadComponent&&!P.routeConfig._loadedComponent&&k.push(this.configLoader.loadComponent(P.routeConfig).pipe(sn(R=>{P.component=R}),ut(()=>{})));for(let R of P.children)k.push(...T(R));return k};return ja(T(M.targetSnapshot.root)).pipe(Zr(null),on(1))}),qd(()=>this.afterPreactivation()),gn(()=>{let{currentSnapshot:M,targetSnapshot:T}=I,P=this.createViewTransition?.(this.environmentInjector,M.root,T.root);return P?en(P).pipe(ut(()=>I)):ot(I)}),ut(M=>{let T=NA(r.routeReuseStrategy,M.targetSnapshot,M.currentRouterState);return this.currentTransition=I=qt(Ke({},M),{targetRouterState:T}),this.currentNavigation.targetRouterState=T,I}),sn(()=>{this.events.next(new Ss)}),LA(this.rootContexts,r.routeReuseStrategy,M=>this.events.next(M),this.inputBindingEnabled),on(1),sn({next:M=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new oi(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects))),this.titleStrategy?.updateTitle(M.targetRouterState.snapshot),M.resolve(!0)},complete:()=>{i=!0}}),Wc(this.transitionAbortSubject.pipe(sn(M=>{throw M}))),jo(()=>{!i&&!a&&this.cancelNavigationTransition(I,"",Fn.SupersededByNewNavigation),this.currentTransition?.id===I.id&&(this.currentNavigation=null,this.currentTransition=null)}),$r(M=>{if(a=!0,$y(M))this.events.next(new Fr(I.id,this.urlSerializer.serialize(I.extractedUrl),M.message,M.cancellationCode)),RA(M)?this.events.next(new yo(M.url,M.navigationBehaviorOptions)):I.resolve(!1);else{let T=new bs(I.id,this.urlSerializer.serialize(I.extractedUrl),M,I.targetSnapshot??void 0);try{let P=Ar(this.environmentInjector,()=>this.navigationErrorHandler?.(T));if(P instanceof xs){let{message:k,cancellationCode:R}=Xl(this.urlSerializer,P);this.events.next(new Fr(I.id,this.urlSerializer.serialize(I.extractedUrl),k,R)),this.events.next(new yo(P.redirectTo,P.navigationBehaviorOptions))}else{this.events.next(T);let k=r.errorHandler(M);I.resolve(!!k)}}catch(P){this.options.resolveNavigationPromiseOnError?I.resolve(!1):I.reject(P)}}return Sn}))}))}cancelNavigationTransition(r,s,o){let I=new Fr(r.id,this.urlSerializer.serialize(r.extractedUrl),s,o);this.events.next(I),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),s=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==s?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function NO(e){return e!==vs}var PO=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:()=>$e(kO),providedIn:"root"});let e=t;return e})(),wf=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},kO=(()=>{let t=class t extends wf{};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=cd(t)))(o||t)}})(),t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),tC=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:()=>$e(RO),providedIn:"root"});let e=t;return e})(),RO=(()=>{let t=class t extends tC{constructor(){super(...arguments),this.location=$e(as),this.urlSerializer=$e(_f),this.options=$e(Pf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$e(Lf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Br,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Vy(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(s=>{s.type==="popstate"&&r(s.url,s.state)})}handleRouterEvent(r,s){if(r instanceof Is)this.stateMemento=this.createStateMemento();else if(r instanceof Ai)this.rawUrlTree=s.initialUrl;else if(r instanceof Ul){if(this.urlUpdateStrategy==="eager"&&!s.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl);this.setBrowserUrl(s.targetBrowserUrl??o,s)}}else r instanceof Ss?(this.currentUrlTree=s.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl),this.routerState=s.targetRouterState,this.urlUpdateStrategy==="deferred"&&!s.extras.skipLocationChange&&this.setBrowserUrl(s.targetBrowserUrl??this.rawUrlTree,s)):r instanceof Fr&&(r.code===Fn.GuardRejected||r.code===Fn.NoDataFromResolver)?this.restoreHistory(s):r instanceof bs?this.restoreHistory(s,!0):r instanceof oi&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,s){let o=r instanceof Br?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||s.extras.replaceUrl){let I=this.browserPageId,i=Ke(Ke({},s.extras.state),this.generateNgRouterState(s.id,I));this.location.replaceState(o,"",i)}else{let I=Ke(Ke({},s.extras.state),this.generateNgRouterState(s.id,this.browserPageId+1));this.location.go(o,"",I)}}restoreHistory(r,s=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,I=this.currentPageId-o;I!==0?this.location.historyGo(I):this.currentUrlTree===r.finalUrl&&I===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,s){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}};t.\u0275fac=(()=>{let r;return function(o){return(r||(r=cd(t)))(o||t)}})(),t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),gs=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(gs||{});function LO(e,t){e.events.pipe(cn(n=>n instanceof oi||n instanceof Fr||n instanceof bs||n instanceof Ai),ut(n=>n instanceof oi||n instanceof Ai?gs.COMPLETE:(n instanceof Fr?n.code===Fn.Redirect||n.code===Fn.SupersededByNewNavigation:!1)?gs.REDIRECTING:gs.FAILED),cn(n=>n!==gs.REDIRECTING),on(1)).subscribe(()=>{t()})}function jO(e){throw e}var FO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jf=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=$e(_l),this.stateManager=$e(tC),this.options=$e(Pf,{optional:!0})||{},this.pendingTasks=$e(ao),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$e(OO),this.urlSerializer=$e(_f),this.location=$e(as),this.urlHandlingStrategy=$e(Lf),this._events=new Zt,this.errorHandler=this.options.errorHandler||jO,this.navigated=!1,this.routeReuseStrategy=$e(PO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$e(Rf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$e(Of,{optional:!0}),this.eventsSubscription=new $t,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(s=>{try{let o=this.navigationTransitions.currentTransition,I=this.navigationTransitions.currentNavigation;if(o!==null&&I!==null){if(this.stateManager.handleRouterEvent(s,I),s instanceof Fr&&s.code!==Fn.Redirect&&s.code!==Fn.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof oi)this.navigated=!0;else if(s instanceof yo){let i=s.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(s.url,o.currentRawUrl),M=Ke({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||NO(o.source)},i);this.scheduleNavigation(a,vs,null,M,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}HO(s)&&this._events.next(s)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,s)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",s)},0)})}navigateToSyncWithBrowser(r,s,o){let I={replaceUrl:!0},i=o?.navigationId?o:null;if(o){let M=Ke({},o);delete M.navigationId,delete M.\u0275routerPageId,Object.keys(M).length!==0&&(I.state=M)}let a=this.parseUrl(r);this.scheduleNavigation(a,s,i,I)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(kf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,s={}){let{relativeTo:o,queryParams:I,fragment:i,queryParamsHandling:a,preserveFragment:M}=s,T=M?this.currentUrlTree.fragment:i,P=null;switch(a){case"merge":P=Ke(Ke({},this.currentUrlTree.queryParams),I);break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=I||null}P!==null&&(P=this.removeEmptyProps(P));let k;try{let R=o?o.snapshot:this.routerState.snapshot.root;k=By(R)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),k=this.currentUrlTree.root}return zy(k,r,P,T??null)}navigateByUrl(r,s={skipLocationChange:!1}){let o=Ti(r)?r:this.parseUrl(r),I=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(I,vs,null,s)}navigate(r,s={skipLocationChange:!1}){return zO(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,s){let o;if(s===!0?o=Ke({},FO):s===!1?o=Ke({},BO):o=s,Ti(r))return Sy(this.currentUrlTree,r,o);let I=this.parseUrl(r);return Sy(this.currentUrlTree,I,o)}removeEmptyProps(r){return Object.entries(r).reduce((s,[o,I])=>(I!=null&&(s[o]=I),s),{})}scheduleNavigation(r,s,o,I,i){if(this.disposed)return Promise.resolve(!1);let a,M,T;i?(a=i.resolve,M=i.reject,T=i.promise):T=new Promise((k,R)=>{a=k,M=R});let P=this.pendingTasks.add();return LO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(P))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:I,resolve:a,reject:M,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(k=>Promise.reject(k))}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function zO(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new at(4008,!1)}function HO(e){return!(e instanceof Ss)&&!(e instanceof yo)}var Jl=(()=>{let t=class t{constructor(r,s,o,I,i,a){this.router=r,this.route=s,this.tabIndexAttribute=o,this.renderer=I,this.el=i,this.locationStrategy=a,this.href=null,this.onChanges=new Zt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let M=i.nativeElement.tagName?.toLowerCase();this.isAnchorElement=M==="a"||M==="area",this.isAnchorElement?this.subscription=r.events.subscribe(T=>{T instanceof oi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ti(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,s,o,I,i){let a=this.urlTree;if(a===null||this.isAnchorElement&&(r!==0||s||o||I||i||typeof this.target=="string"&&this.target!="_self"))return!0;let M={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,M),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let s=this.href===null?null:rm(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",s)}applyAttributeValue(r,s){let o=this.renderer,I=this.el.nativeElement;s!==null?o.setAttribute(I,r,s):o.removeAttribute(I,r)}get urlTree(){return this.routerLinkInput===null?null:Ti(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(s){return new(s||t)(Rn(jf),Rn(Oi),ud("tabindex"),Rn(Ml),Rn(ri),Rn(uo))},t.\u0275dir=Jo({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(s,o){s&1&&yn("click",function(i){return o.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),s&2&&Pd("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ss],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ss],replaceUrl:[2,"replaceUrl","replaceUrl",ss],routerLink:"routerLink"},standalone:!0,features:[Ad,qo]});let e=t;return e})();var UO=new dt("");function nC(e,...t){return io([{provide:Rf,multi:!0,useValue:e},[],{provide:Oi,useFactory:VO,deps:[jf]},{provide:kd,multi:!0,useFactory:WO},t.map(n=>n.\u0275providers)])}function VO(e){return e.routerState.root}function WO(){let e=$e(wr);return t=>{let n=e.get(jr);if(t!==n.components[0])return;let r=e.get(jf),s=e.get(GO);e.get(YO)===1&&r.initialNavigation(),e.get(XO,null,pt.Optional)?.setUpPreloading(),e.get(UO,null,pt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var GO=new dt("",{factory:()=>new Zt}),YO=new dt("",{providedIn:"root",factory:()=>1});var XO=new dt("");var rC=(()=>{class e{title="test-pwa";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Yn({type:e,selectors:[["app-root"]],standalone:!0,features:[Zn],decls:5,vars:0,consts:[[1,"app"],[1,"app__title"]],template:function(r,s){r&1&&(gt(0,"div",0)(1,"div",1)(2,"span"),Cn(3,"Demo app Angular + PWA"),Pt()(),dn(4,"router-outlet"),Pt())},dependencies:[Af],styles:[".app[_ngcontent-%COMP%]{margin:0 auto;width:100%;max-width:400px}.app__title[_ngcontent-%COMP%]{margin-top:30px;font-weight:700;font-size:24px;text-align:center;margin-bottom:20px}"]})}return e})();var oC=KD(iC());var $O=["tuiRef"],bo=(()=>{class e{_tuiImageEditor;_tuiRef;_createImageEditor(n){this._tuiImageEditor=new oC.default(this._tuiRef.nativeElement,{includeUI:{loadImage:{path:n,name:"SampleImage"},initMenu:"filter",menuBarPosition:"bottom"},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}),this._tuiImageEditor.loadImageFromURL("","My example picture")}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Yn({type:e,selectors:[["app-edit-photo"]],viewQuery:function(r,s){if(r&1&&ii($O,5),r&2){let o;Rr(o=Lr())&&(s._tuiRef=o.first)}},standalone:!0,features:[Zn],decls:3,vars:0,consts:[["tuiRef",""],[2,"height","1000px !important"]],template:function(r,s){r&1&&(gt(0,"div",1,0),dn(2,"canvas"),Pt())}})}return e})();var sC=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Yn({type:e,selectors:[["app-camera-icon"]],standalone:!0,features:[Zn],decls:5,vars:0,consts:[[1,"icon"],["fill","#F4B389","height","30px","width","30px","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 487 487",0,"xml","space","preserve"],["d",`M308.1,277.95c0,35.7-28.9,64.6-64.6,64.6s-64.6-28.9-64.6-64.6s28.9-64.6,64.6-64.6S308.1,242.25,308.1,277.95z
                 M440.3,116.05c25.8,0,46.7,20.9,46.7,46.7v122.4v103.8c0,27.5-22.3,49.8-49.8,49.8H49.8c-27.5,0-49.8-22.3-49.8-49.8v-103.9
                v-122.3l0,0c0-25.8,20.9-46.7,46.7-46.7h93.4l4.4-18.6c6.7-28.8,32.4-49.2,62-49.2h74.1c29.6,0,55.3,20.4,62,49.2l4.3,18.6H440.3z
                 M97.4,183.45c0-12.9-10.5-23.4-23.4-23.4c-13,0-23.5,10.5-23.5,23.4s10.5,23.4,23.4,23.4C86.9,206.95,97.4,196.45,97.4,183.45z
                 M358.7,277.95c0-63.6-51.6-115.2-115.2-115.2s-115.2,51.6-115.2,115.2s51.6,115.2,115.2,115.2S358.7,341.55,358.7,277.95z`]],template:function(r,s){r&1&&(gt(0,"div",0),Pv(),gt(1,"svg",1)(2,"g")(3,"g"),dn(4,"path",2),Pt()()()())},styles:[".icon[_ngcontent-%COMP%]{width:fit-content;height:fit-content}"]})}return e})();var aC=(()=>{class e{constructor(){}requestPermission(){"Notification"in window&&Notification.requestPermission().then(n=>{console.log(n==="granted"?"Permission granted":"Permission denied")})}showNotification(n,r){"Notification"in window&&Notification.permission==="granted"&&new Notification(n,r)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=nt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Os="Service workers are disabled or not supported by this browser";function QO(e){return hi(()=>Xr(new Error(e)))}var So=class{constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=QO(Os);else{let r=Hi(t,"controllerchange").pipe(ut(()=>t.controller)),s=hi(()=>ot(t.controller)),o=fr(s,r);this.worker=o.pipe(cn(T=>!!T)),this.registration=this.worker.pipe(gn(()=>t.getRegistration()));let M=Hi(t,"message").pipe(ut(T=>T.data)).pipe(cn(T=>T&&T.type)).pipe(Hc());M.connect(),this.events=M}}postMessage(t,n){return this.worker.pipe(on(1),sn(r=>{r.postMessage(Ke({action:t},n))})).toPromise().then(()=>{})}postMessageWithOperation(t,n,r){let s=this.waitForOperationCompleted(r),o=this.postMessage(t,n);return Promise.all([o,s]).then(([,I])=>I)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let n;return typeof t=="string"?n=r=>r.type===t:n=r=>t.includes(r.type),this.events.pipe(cn(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(on(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(cn(n=>n.nonce===t),on(1),ut(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Hf=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,this.pushManager=null,this.subscriptionChanges=new Zt,!r.isEnabled){this.messages=gi,this.notificationClicks=gi,this.subscription=gi;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ut(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ut(o=>o.data)),this.pushManager=this.sw.registration.pipe(ut(o=>o.pushManager));let s=this.pushManager.pipe(gn(o=>o.getSubscription()));this.subscription=Fa(s,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Os));let s={userVisibleOnly:!0},o=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),I=new Uint8Array(new ArrayBuffer(o.length));for(let i=0;i<o.length;i++)I[i]=o.charCodeAt(i);return s.applicationServerKey=I,this.pushManager.pipe(gn(i=>i.subscribe(s)),on(1)).toPromise().then(i=>(this.subscriptionChanges.next(i),i))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Os));let r=s=>{if(s===null)throw new Error("Not subscribed to push notifications.");return s.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(on(1),gn(r)).toPromise()}decodeBase64(r){return atob(r)}};t.\u0275fac=function(s){return new(s||t)(ft(So))},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})(),JO=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=gi,this.unrecoverable=gi;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Os));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Os));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};t.\u0275fac=function(s){return new(s||t)(ft(So))},t.\u0275prov=nt({token:t,factory:t.\u0275fac});let e=t;return e})();var lC=new dt("");function KO(e,t,n,r){return()=>{if(!(Ud(r)&&"serviceWorker"in navigator&&n.enabled!==!1))return;let s=e.get(Qt),o=e.get(jr);s.runOutsideAngular(()=>{let i=navigator.serviceWorker,a=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",a),o.onDestroy(()=>{i.removeEventListener("controllerchange",a)})});let I;if(typeof n.registrationStrategy=="function")I=n.registrationStrategy();else{let[i,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(i){case"registerImmediately":I=ot(null);break;case"registerWithDelay":I=cC(+a[0]||0);break;case"registerWhenStable":I=a[0]?Fa(uC(e),cC(+a[0])):uC(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}s.runOutsideAngular(()=>I.pipe(on(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(i=>console.error("Service worker registration failed with:",i))))}}function cC(e){return ot(null).pipe(Bc(e))}function uC(e){return e.get(jr).isStable.pipe(cn(n=>n))}function qO(e,t){return new So(Ud(t)&&e.enabled!==!1?navigator.serviceWorker:void 0)}var As=class{};function dC(e,t={}){return io([Hf,JO,{provide:lC,useValue:e},{provide:As,useValue:t},{provide:So,useFactory:qO,deps:[As,Pr]},{provide:Tl,useFactory:KO,deps:[wr,lC,As,Pr],multi:!0}])}var fC=(()=>{class e{swPush;VAPID_PUBLIC_KEY="qh3HCeFKlOw3yQoDeq3kh0ZQ4KqrsZ4BILtj5UlBqxI";constructor(n){this.swPush=n}subscribeToNotifications(){this.swPush.requestSubscription({serverPublicKey:this.VAPID_PUBLIC_KEY}).then(n=>{console.log("Subscription received: ",n)}).catch(n=>console.error("Could not subscribe to notifications",n))}listenForNotifications(){this.swPush.messages.subscribe(n=>{console.log("Received message: ",n)}),this.swPush.notificationClicks.subscribe(({action:n,notification:r})=>{console.log("Action: ",n),console.log("Notification: ",r)})}static \u0275fac=function(r){return new(r||e)(ft(Hf))};static \u0275prov=nt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var n1=["videoElement"],r1=["canvas"];function i1(e,t){if(e&1){let n=$n();gt(0,"div",8),yn("click",function(){Nn(n);let s=rn(2);return Pn(s.startCamera())}),gt(1,"span"),Cn(2,"Start Camera"),Pt()()}}function o1(e,t){if(e&1){let n=$n();gt(0,"div",8),yn("click",function(){Nn(n);let s=rn(2);return Pn(s.stopCamera())}),gt(1,"span"),Cn(2,"Stop Camera"),Pt()()}}function s1(e,t){if(e&1){let n=$n();gt(0,"div",17),yn("click",function(){Nn(n);let s=rn(3);return Pn(s.startCamera())}),dn(1,"app-camera-icon"),Pt()}}function a1(e,t){if(e&1&&(gt(0,"div",13),kr(1,s1,2,0,"div",14),dn(2,"video",15,0)(4,"canvas",16,1),Pt()),e&2){let n=rn(2);un(),nn("ngIf",!n.currentStream)}}function l1(e,t){if(e&1){let n=$n();gt(0,"div",7)(1,"div",8),yn("click",function(){Nn(n);let s=rn(2);return Pn(s.takePicture())}),gt(2,"span"),Cn(3,"Take Picture"),Pt()()()}}function c1(e,t){if(e&1&&(gt(0,"div",7),dn(1,"img",18),Pt()),e&2){let n=rn(2);un(),nn("src",n.image,ns)}}function u1(e,t){if(e&1){let n=$n();gt(0,"div",8),yn("click",function(){Nn(n);let s=rn(2);return Pn(s.onEdit())}),gt(1,"span"),Cn(2,"Edit"),Pt()()}}function d1(e,t){if(e&1){let n=$n();gt(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),yn("click",function(){Nn(n);let s=rn();return Pn(s.notify())}),gt(4,"span"),Cn(5,"Send Notification"),Pt()()(),gt(6,"div",7)(7,"div",9)(8,"span"),Cn(9,"Test Capacitor"),Pt()()(),gt(10,"div",7),kr(11,i1,3,0,"div",10)(12,o1,3,0,"div",10),gt(13,"div",8),yn("click",function(){Nn(n);let s=rn();return Pn(s.switchCamera())}),gt(14,"span"),Cn(15,"Switch Camera"),Pt()()(),kr(16,a1,6,1,"div",11)(17,l1,4,0,"div",12)(18,c1,2,1,"div",12)(19,u1,3,0,"div",10),Pt()()}if(e&2){let n=rn();un(11),nn("ngIf",!n.currentStream),un(),nn("ngIf",n.currentStream),un(4),nn("ngIf",n.image.length===0),un(),nn("ngIf",n.currentStream),un(),nn("ngIf",n.image.length),un(),nn("ngIf",n.image.length)}}function f1(e,t){if(e&1){let n=$n();gt(0,"div",19),yn("click",function(){Nn(n);let s=rn();return Pn(s.onBack())}),gt(1,"span"),Cn(2,"Back"),Pt()()}}function h1(e,t){if(e&1&&(gt(0,"div"),dn(1,"app-edit-photo"),Pt()),e&2){let n=rn();wl(n.isEdit?"height: 1000px !important":"")}}var Uf=(()=>{class e{notificationService;pushService;constructor(n,r){this.notificationService=n,this.pushService=r}image="";deferredPrompt;showInstallButton=!1;currentStream=null;isFrontCamera=!0;isEdit=!1;videoElement;canvas;editPhotoComponent;ngOnInit(){this.notificationService.requestPermission(),this.pushService.subscribeToNotifications(),this.pushService.listenForNotifications()}ngAfterViewInit(){}notify(){this.notificationService.showNotification("Notificare PWA",{body:"Bommmba !!!!!!"})}installPWA(){this.showInstallButton=!1,this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(n=>{n.outcome==="accepted"?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),this.deferredPrompt=null})}startCamera(){return Ct(this,null,function*(){this.image="",this.stopCamera();let n={video:{facingMode:this.isFrontCamera?"user":"environment"}};try{this.currentStream=yield navigator.mediaDevices.getUserMedia(n),this.videoElement.nativeElement.srcObject=this.currentStream,this.videoElement.nativeElement.play()}catch(r){console.error("Error accessing camera:",r)}})}switchCamera(){this.isFrontCamera=!this.isFrontCamera,this.startCamera()}stopCamera(){this.currentStream&&(this.currentStream.getTracks().forEach(n=>n.stop()),this.currentStream=null,this.videoElement.nativeElement.srcObject=null)}takePicture(){let n=this.videoElement.nativeElement,r=this.canvas.nativeElement,s=r.getContext("2d");s&&(r.width=n.videoWidth,r.height=n.videoHeight,s.drawImage(n,0,0,r.width,r.height),this.image=r.toDataURL("image/png"),this.stopCamera())}downloadImage(n){let r=document.createElement("a");r.href=n,r.download="picture.png",r.click()}onBack(){location.reload()}onEdit(){this.isEdit=!0,setTimeout(()=>{console.log(this.editPhotoComponent),this.editPhotoComponent._createImageEditor(this.image)},100)}static \u0275fac=function(r){return new(r||e)(Rn(aC),Rn(fC))};static \u0275cmp=Yn({type:e,selectors:[["app-home"]],viewQuery:function(r,s){if(r&1&&(ii(n1,5),ii(r1,5),ii(bo,5)),r&2){let o;Rr(o=Lr())&&(s.videoElement=o.first),Rr(o=Lr())&&(s.canvas=o.first),Rr(o=Lr())&&(s.editPhotoComponent=o.first)}},standalone:!0,features:[Zn],decls:3,vars:3,consts:[["videoElement",""],["canvas",""],["class","demo-app",4,"ngIf"],["style","margin-bottom: 10px","class","button",3,"click",4,"ngIf"],[3,"style",4,"ngIf"],[1,"demo-app"],[1,"demo-app__content"],[1,"demo-app__content__item"],[1,"button",3,"click"],["routerLink","/capacitor",1,"button"],["class","button",3,"click",4,"ngIf"],["class","demo-app__content__item demo-app__content__item--camera",4,"ngIf"],["class","demo-app__content__item",4,"ngIf"],[1,"demo-app__content__item","demo-app__content__item--camera"],["class","camera-icon",3,"click",4,"ngIf"],["autoplay",""],[2,"display","none"],[1,"camera-icon",3,"click"],["alt","",3,"src"],[1,"button",2,"margin-bottom","10px",3,"click"]],template:function(r,s){r&1&&kr(0,d1,20,6,"div",2)(1,f1,3,0,"div",3)(2,h1,2,2,"div",4),r&2&&(nn("ngIf",!s.isEdit),un(),nn("ngIf",s.isEdit),un(),nn("ngIf",s.isEdit))},dependencies:[Jl,Nl,sC,bo],styles:[".demo-app[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.demo-app__title[_ngcontent-%COMP%]{margin-top:30px;font-weight:700;font-size:24px;text-align:center}.demo-app__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.demo-app__content__item[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px}.demo-app__content__item[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:270px;background-color:#282828}.demo-app__content__item--camera[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;cursor:pointer}.demo-app__content__item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:270px;margin:auto}.camera-icon[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:1}.tui-image-editor-container[_ngcontent-%COMP%]{height:1000px!important}"]})}return e})();var g1=e=>{let t=new Map;t.set("web",{name:"web"});let n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},r=(o,I)=>{n.platforms.set(o,I)},s=o=>{n.platforms.has(o)&&(n.currentPlatform=n.platforms.get(o))};return n.addPlatform=r,n.setPlatform=s,n},p1=e=>e.CapacitorPlatforms=g1(e),pC=p1(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),G4=pC.addPlatform,Y4=pC.setPlatform;var Ns=function(e){return e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE",e}(Ns||{}),zr=class extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}},v1=e=>{var t,n;return e?.androidBridge?"android":!((n=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},m1=e=>{var t,n,r,s,o;let I=e.CapacitorCustomPlatform||null,i=e.Capacitor||{},a=i.Plugins=i.Plugins||{},M=e.CapacitorPlatforms,T=()=>I!==null?I.name:v1(e),P=((t=M?.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||T,k=()=>P()!=="web",R=((n=M?.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||k,b=g=>{let x=u.get(g);return!!(x?.platforms.has(P())||y(g))},c=((r=M?.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||b,C=g=>{var x;return(x=i.PluginHeaders)===null||x===void 0?void 0:x.find(E=>E.name===g)},y=((s=M?.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||C,l=g=>e.console.error(g),h=(g,x,E)=>Promise.reject(`${E} does not have an implementation of "${x}".`),u=new Map,p=(g,x={})=>{let E=u.get(g);if(E)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),E.proxy;let _=P(),O=y(g),F,B=()=>Ct(void 0,null,function*(){return!F&&_ in x?F=typeof x[_]=="function"?F=yield x[_]():F=x[_]:I!==null&&!F&&"web"in x&&(F=typeof x.web=="function"?F=yield x.web():F=x.web),F}),W=(Z,me)=>{var V,Le;if(O){let Ce=O?.methods.find(ze=>me===ze.name);if(Ce)return Ce.rtype==="promise"?ze=>i.nativePromise(g,me.toString(),ze):(ze,te)=>i.nativeCallback(g,me.toString(),ze,te);if(Z)return(V=Z[me])===null||V===void 0?void 0:V.bind(Z)}else{if(Z)return(Le=Z[me])===null||Le===void 0?void 0:Le.bind(Z);throw new zr(`"${g}" plugin is not implemented on ${_}`,Ns.Unimplemented)}},H=Z=>{let me,V=(...Le)=>{let Ce=B().then(ze=>{let te=W(ze,Z);if(te){let ae=te(...Le);return me=ae?.remove,ae}else throw new zr(`"${g}.${Z}()" is not implemented on ${_}`,Ns.Unimplemented)});return Z==="addListener"&&(Ce.remove=()=>Ct(void 0,null,function*(){return me()})),Ce};return V.toString=()=>`${Z.toString()}() { [capacitor code] }`,Object.defineProperty(V,"name",{value:Z,writable:!1,configurable:!1}),V},Y=H("addListener"),oe=H("removeListener"),ne=(Z,me)=>{let V=Y({eventName:Z},me),Le=()=>Ct(void 0,null,function*(){let ze=yield V;oe({eventName:Z,callbackId:ze},me)}),Ce=new Promise(ze=>V.then(()=>ze({remove:Le})));return Ce.remove=()=>Ct(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Le()}),Ce},be=new Proxy({},{get(Z,me){switch(me){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return O?ne:Y;case"removeListener":return oe;default:return H(me)}}});return a[g]=be,u.set(g,{name:g,proxy:be,platforms:new Set([...Object.keys(x),...O?[_]:[]])}),be},D=((o=M?.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||p;return i.convertFileSrc||(i.convertFileSrc=g=>g),i.getPlatform=P,i.handleError=l,i.isNativePlatform=R,i.isPluginAvailable=c,i.pluginMethodNoop=h,i.registerPlugin=D,i.Exception=zr,i.DEBUG=!!i.DEBUG,i.isLoggingEnabled=!!i.isLoggingEnabled,i.platform=i.getPlatform(),i.isNative=i.isNativePlatform(),i},y1=e=>e.Capacitor=m1(e),ec=y1(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),tc=ec.registerPlugin,X4=ec.Plugins;var Do=class{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);let o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(t);let I=()=>Ct(this,null,function*(){return this.removeListener(t,n)});return Promise.resolve({remove:I})}removeAllListeners(){return Ct(this,null,function*(){this.listeners={};for(let t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}})}notifyListeners(t,n,r){let s=this.listeners[t];if(!s){if(r){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}s.forEach(o=>o(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new ec.Exception(t,Ns.Unimplemented)}unavailable(t="not available"){return new ec.Exception(t,Ns.Unavailable)}removeListener(t,n){return Ct(this,null,function*(){let r=this.listeners[t];if(!r)return;let s=r.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])})}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){let n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}};var hC=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),gC=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),Vf=class extends Do{getCookies(){return Ct(this,null,function*(){let t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[s,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=gC(s).trim(),o=gC(o).trim(),n[s]=o}),n})}setCookie(t){return Ct(this,null,function*(){try{let n=hC(t.key),r=hC(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),I=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${o}; ${I};`}catch(n){return Promise.reject(n)}})}deleteCookie(t){return Ct(this,null,function*(){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})}clearCookies(){return Ct(this,null,function*(){try{let t=document.cookie.split(";")||[];for(let n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}})}clearAllCookies(){return Ct(this,null,function*(){try{yield this.clearCookies()}catch(t){return Promise.reject(t)}})}},$4=tc("CapacitorCookies",{web:()=>new Vf}),C1=e=>Ct(void 0,null,function*(){return new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let s=r.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(e)})}),I1=(e={})=>{let t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,o,I)=>(s[o]=e[t[I]],s),{})},b1=(e,t=!0)=>e?Object.entries(e).reduce((r,s)=>{let[o,I]=s,i,a;return Array.isArray(I)?(a="",I.forEach(M=>{i=t?encodeURIComponent(M):M,a+=`${o}=${i}&`}),a.slice(0,-1)):(i=t?encodeURIComponent(I):I,a=`${o}=${i}`),`${r}&${a}`},"").substr(1):null,S1=(e,t={})=>{let n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=I1(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){let o=new URLSearchParams;for(let[I,i]of Object.entries(e.data||{}))o.set(I,i);n.body=o.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){let o=new FormData;if(e.data instanceof FormData)e.data.forEach((i,a)=>{o.append(a,i)});else for(let i of Object.keys(e.data))o.append(i,e.data[i]);n.body=o;let I=new Headers(n.headers);I.delete("content-type"),n.headers=I}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n},Wf=class extends Do{request(t){return Ct(this,null,function*(){let n=S1(t,t.webFetchExtra),r=b1(t.params,t.shouldEncodeUrlParams),s=r?`${t.url}?${r}`:t.url,o=yield fetch(s,n),I=o.headers.get("content-type")||"",{responseType:i="text"}=o.ok?t:{};I.includes("application/json")&&(i="json");let a,M;switch(i){case"arraybuffer":case"blob":M=yield o.blob(),a=yield C1(M);break;case"json":a=yield o.json();break;case"document":case"text":default:a=yield o.text()}let T={};return o.headers.forEach((P,k)=>{T[k]=P}),{data:a,headers:T,status:o.status,url:o.url}})}get(t){return Ct(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))})}post(t){return Ct(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))})}put(t){return Ct(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))})}patch(t){return Ct(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))})}delete(t){return Ct(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))})}},Z4=tc("CapacitorHttp",{web:()=>new Wf});var xo=function(e){return e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS",e}(xo||{}),Ps=function(e){return e.Rear="REAR",e.Front="FRONT",e}(Ps||{}),Gf=function(e){return e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl",e}(Gf||{});var ks=class extends Do{getPhoto(t){return Ct(this,null,function*(){return new Promise((n,r)=>Ct(this,null,function*(){if(t.webUseInput||t.source===xo.Photos)this.fileInputExperience(t,n,r);else if(t.source===xo.Prompt){let s=document.querySelector("pwa-action-sheet");s||(s=document.createElement("pwa-action-sheet"),document.body.appendChild(s)),s.header=t.promptLabelHeader||"Photo",s.cancelable=!1,s.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],s.addEventListener("onSelection",o=>Ct(this,null,function*(){o.detail===0?this.fileInputExperience(t,n,r):this.cameraExperience(t,n,r)}))}else this.cameraExperience(t,n,r)}))})}pickImages(t){return Ct(this,null,function*(){return new Promise((n,r)=>Ct(this,null,function*(){this.multipleFileInputExperience(n,r)}))})}cameraExperience(t,n,r){return Ct(this,null,function*(){if(customElements.get("pwa-camera-modal")){let s=document.createElement("pwa-camera-modal");s.facingMode=t.direction===Ps.Front?"user":"environment",document.body.appendChild(s);try{yield s.componentOnReady(),s.addEventListener("onPhoto",o=>Ct(this,null,function*(){let I=o.detail;I===null?r(new zr("User cancelled photos app")):I instanceof Error?r(I):n(yield this._getCameraPhoto(I,t)),s.dismiss(),document.body.removeChild(s)})),s.present()}catch{this.fileInputExperience(t,n,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,n,r)})}fileInputExperience(t,n,r){let s=document.querySelector("#_capacitor-camera-input"),o=()=>{var I;(I=s.parentNode)===null||I===void 0||I.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input",s.type="file",s.hidden=!0,document.body.appendChild(s),s.addEventListener("change",I=>{let i=s.files[0],a="jpeg";if(i.type==="image/png"?a="png":i.type==="image/gif"&&(a="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){let M=new FileReader;M.addEventListener("load",()=>{if(t.resultType==="dataUrl")n({dataUrl:M.result,format:a});else if(t.resultType==="base64"){let T=M.result.split(",")[1];n({base64String:T,format:a})}o()}),M.readAsDataURL(i)}else n({webPath:URL.createObjectURL(i),format:a}),o()}),s.addEventListener("cancel",I=>{r(new zr("User cancelled photos app")),o()})),s.accept="image/*",s.capture=!0,t.source===xo.Photos||t.source===xo.Prompt?s.removeAttribute("capture"):t.direction===Ps.Front?s.capture="user":t.direction===Ps.Rear&&(s.capture="environment"),s.click()}multipleFileInputExperience(t,n){let r=document.querySelector("#_capacitor-camera-input-multiple"),s=()=>{var o;(o=r.parentNode)===null||o===void 0||o.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",o=>{let I=[];for(let i=0;i<r.files.length;i++){let a=r.files[i],M="jpeg";a.type==="image/png"?M="png":a.type==="image/gif"&&(M="gif"),I.push({webPath:URL.createObjectURL(a),format:M})}t({photos:I}),s()}),r.addEventListener("cancel",o=>{n(new zr("User cancelled photos app")),s()})),r.accept="image/*",r.click()}_getCameraPhoto(t,n){return new Promise((r,s)=>{let o=new FileReader,I=t.type.split("/")[1];n.resultType==="uri"?r({webPath:URL.createObjectURL(t),format:I,saved:!1}):(o.readAsDataURL(t),o.onloadend=()=>{let i=o.result;n.resultType==="dataUrl"?r({dataUrl:i,format:I,saved:!1}):r({base64String:i.split(",")[1],format:I,saved:!1})},o.onerror=i=>{s(i)})})}checkPermissions(){return Ct(this,null,function*(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}})}requestPermissions(){return Ct(this,null,function*(){throw this.unimplemented("Not implemented on web.")})}pickLimitedLibraryPhotos(){return Ct(this,null,function*(){throw this.unavailable("Not implemented on web.")})}getLimitedLibraryPhotos(){return Ct(this,null,function*(){throw this.unavailable("Not implemented on web.")})}},tB=new ks;var vC=tc("Camera",{web:()=>new ks});function D1(e,t){if(e&1&&(gt(0,"div",4),dn(1,"img",8),Pt()),e&2){let n=rn(2);un(),nn("src",n.picture,ns)}}function x1(e,t){if(e&1){let n=$n();gt(0,"div",4)(1,"div",6),yn("click",function(){Nn(n);let s=rn(2);return Pn(s.onEdit())}),gt(2,"span"),Cn(3,"Edit"),Pt()()()}}function E1(e,t){if(e&1){let n=$n();gt(0,"div",3)(1,"div",4)(2,"div",5)(3,"span"),Cn(4,"Back home"),Pt()()(),gt(5,"div",4)(6,"div",6),yn("click",function(){Nn(n);let s=rn();return Pn(s.onCamera())}),gt(7,"span"),Cn(8,"Take picture"),Pt()()(),kr(9,D1,2,1,"div",7)(10,x1,4,0,"div",7),Pt()}if(e&2){let n=rn();un(9),nn("ngIf",n.picture==null?null:n.picture.length),un(),nn("ngIf",n.picture==null?null:n.picture.length)}}function M1(e,t){if(e&1){let n=$n();gt(0,"div",9),yn("click",function(){Nn(n);let s=rn();return Pn(s.onBack())}),gt(1,"span"),Cn(2,"Back"),Pt()()}}function w1(e,t){if(e&1&&(gt(0,"div"),dn(1,"app-edit-photo"),Pt()),e&2){let n=rn();wl(n.isEdit?"height: 1000px !important":"")}}var mC=(()=>{class e{picture;isEdit=!1;editPhotoComponent;onCamera(){return Ct(this,null,function*(){let n=yield vC.getPhoto({quality:100,allowEditing:!1,resultType:Gf.DataUrl});this.picture=n.dataUrl})}onEdit(){this.isEdit=!0,setTimeout(()=>{this.editPhotoComponent._createImageEditor(this.picture)},100)}onBack(){location.reload()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Yn({type:e,selectors:[["app-capacitor"]],viewQuery:function(r,s){if(r&1&&ii(bo,5),r&2){let o;Rr(o=Lr())&&(s.editPhotoComponent=o.first)}},standalone:!0,features:[Zn],decls:3,vars:3,consts:[["class","capacitor",4,"ngIf"],["style","margin-bottom: 10px","class","button",3,"click",4,"ngIf"],[3,"style",4,"ngIf"],[1,"capacitor"],[1,"capacitor__item"],["routerLink","/home",1,"button"],[1,"button",3,"click"],["class","capacitor__item",4,"ngIf"],["alt","",3,"src"],[1,"button",2,"margin-bottom","10px",3,"click"]],template:function(r,s){r&1&&kr(0,E1,11,2,"div",0)(1,M1,3,0,"div",1)(2,w1,2,2,"div",2),r&2&&(nn("ngIf",!s.isEdit),un(),nn("ngIf",s.isEdit),un(),nn("ngIf",s.isEdit))},dependencies:[Jl,Nl,bo],styles:[".capacitor[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.capacitor__item[_ngcontent-%COMP%]{margin:auto;width:100%;display:flex}.capacitor__item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:270px;margin:auto}"]})}return e})();var yC=[{path:"home",component:Uf},{path:"capacitor",component:mC},{path:"**",component:Uf}];var CC={providers:[Jm({eventCoalescing:!0}),nC(yC),dC("ngsw-worker.js",{enabled:!ey(),registrationStrategy:"registerWhenStable:30000"})]};function _1(){let e="en";document.documentElement.lang=e}_1();Iy(rC,CC).catch(e=>console.error(e));
