var pI=Object.create;var na=Object.defineProperty,vI=Object.defineProperties,mI=Object.getOwnPropertyDescriptor,yI=Object.getOwnPropertyDescriptors,CI=Object.getOwnPropertyNames,zu=Object.getOwnPropertySymbols,II=Object.getPrototypeOf,Uu=Object.prototype.hasOwnProperty,bI=Object.prototype.propertyIsEnumerable;var Hu=(e,t,a)=>t in e?na(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,mn=(e,t)=>{for(var a in t||={})Uu.call(t,a)&&Hu(e,a,t[a]);if(zu)for(var a of zu(t))bI.call(t,a)&&Hu(e,a,t[a]);return e},ii=(e,t)=>vI(e,yI(t));var Vu=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var SI=(e,t,a,d)=>{if(t&&typeof t=="object"||typeof t=="function")for(let D of CI(t))!Uu.call(e,D)&&D!==a&&na(e,D,{get:()=>t[D],enumerable:!(d=mI(t,D))||d.enumerable});return e};var DI=(e,t,a)=>(a=e!=null?pI(II(e)):{},SI(t||!e||!e.__esModule?na(a,"default",{value:e,enumerable:!0}):a,e));var ia=(e,t,a)=>new Promise((d,D)=>{var y=u=>{try{c(a.next(u))}catch(w){D(w)}},x=u=>{try{c(a.throw(u))}catch(w){D(w)}},c=u=>u.done?d(u.value):Promise.resolve(u.value).then(y,x);c((a=a.apply(e,t)).next())});var yc=Vu((Hs,mc)=>{"use strict";(function(t,a){typeof Hs=="object"&&typeof mc=="object"?mc.exports=a():typeof define=="function"&&define.amd?define([],a):typeof Hs=="object"?Hs.colorPicker=a():(t.tui=t.tui||{},t.tui.colorPicker=a())})(window,function(){return function(e){var t={};function a(d){if(t[d])return t[d].exports;var D=t[d]={i:d,l:!1,exports:{}};return e[d].call(D.exports,D,D.exports,a),D.l=!0,D.exports}return a.m=e,a.c=t,a.d=function(d,D,y){a.o(d,D)||Object.defineProperty(d,D,{enumerable:!0,get:y})},a.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},a.t=function(d,D){if(D&1&&(d=a(d)),D&8||D&4&&typeof d=="object"&&d&&d.__esModule)return d;var y=Object.create(null);if(a.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:d}),D&2&&typeof d!="string")for(var x in d)a.d(y,x,(function(c){return d[c]}).bind(null,x));return y},a.n=function(d){var D=d&&d.__esModule?function(){return d.default}:function(){return d};return a.d(D,"a",D),D},a.o=function(d,D){return Object.prototype.hasOwnProperty.call(d,D)},a.p="dist",a(a.s=33)}([function(e,t,a){"use strict";function d(D,y){var x=Object.prototype.hasOwnProperty,c,u,w,N;for(w=1,N=arguments.length;w<N;w+=1){c=arguments[w];for(u in c)x.call(c,u)&&(D[u]=c[u])}return D}e.exports=d},function(e,t,a){"use strict";function d(D){return D instanceof Array}e.exports=d},function(e,t,a){"use strict";var d=a(1),D=a(6),y=a(7);function x(c,u,w){d(c)?D(c,u,w):y(c,u,w)}e.exports=x},function(e,t,a){"use strict";function d(D){return D===void 0}e.exports=d},function(e,t,a){"use strict";var d=a(22),D=a(2),y=a(6),x=a(7),c=a(37),u=0,w={getLength:function(N){var L=0;return x(N,function(){L+=1}),L},map:function(N,L,F){var R=[];return D(N,function(){R.push(L.apply(F||null,arguments))}),R},filter:function(N,L,F){var R=[];return y(N,function(C){L.apply(F||null,arguments)&&R.push(C)}),R},generateId:function(){return u+=1,u},isOldBrowser:function(){return d.msie&&d.version<9}(),sendHostName:function(){c("color-picker","UA-129987462-1")}};e.exports=w},function(e,t,a){"use strict";var d=a(1);function D(y,x,c){var u,w;if(c=c||0,!d(x))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(x,y,c);for(w=x.length,u=c;c>=0&&u<w;u+=1)if(x[u]===y)return u;return-1}e.exports=D},function(e,t,a){"use strict";function d(D,y,x){var c=0,u=D.length;for(x=x||null;c<u&&y.call(x,D[c],c,D)!==!1;c+=1);}e.exports=d},function(e,t,a){"use strict";function d(D,y,x){var c;x=x||null;for(c in D)if(D.hasOwnProperty(c)&&y.call(x,D[c],c,D)===!1)break}e.exports=d},function(e,t,a){"use strict";var d=a(39),D=a(13),y=a(41),x=a(3),c=a(9),u=a(19),w=a(4);function N(L,F){var R=w.generateId();L=L||{},x(F)&&(F=c.appendHTMLElement("div")),d(F,"tui-view-"+R),this.id=R,this.container=F,this.childs=new u(function(C){return C.id}),this.parent=null}N.prototype.addChild=function(L,F){F&&F.call(L,this),L.parent=this,this.childs.add(L)},N.prototype.removeChild=function(L,F){var R=y(L)?this.childs.items[L]:L;F&&F.call(R,this),this.childs.remove(R.id)},N.prototype.render=function(){this.childs.each(function(L){L.render()})},N.prototype.recursive=function(L,F){D(L)&&(F||L(this),this.childs.each(function(R){R.recursive(L)}))},N.prototype.resize=function(){for(var L=Array.prototype.slice.call(arguments),F=this.parent;F;)D(F._onResize)&&F._onResize.apply(F,L),F=F.parent},N.prototype._beforeDestroy=function(){},N.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},N.prototype.destroy=function(L){this.childs&&(this.childs.each(function(F){F.destroy(!0),F._destroy()}),this.childs.clear()),!L&&this._destroy()},N.prototype.getViewBound=function(){var L=this.container.getBoundingClientRect();return{x:L.left,y:L.top,width:L.right-L.left,height:L.bottom-L.top}},e.exports=N},function(e,t,a){"use strict";var d={appendHTMLElement:function(D,y,x){var c=document.createElement(D);return c.className=x||"",y?y.appendChild(c):document.body.appendChild(c),c}};e.exports=d},function(e,t,a){"use strict";var d=a(0),D=a(20),y=a(11),x=a(21),c=a(1),u=a(13),w=a(2),N=/\s+/g;function L(){this.events=null,this.contexts=null}L.mixin=function(F){d(F.prototype,L.prototype)},L.prototype._getHandlerItem=function(F,R){var C={handler:F};return R&&(C.context=R),C},L.prototype._safeEvent=function(F){var R=this.events,C;return R||(R=this.events={}),F&&(C=R[F],C||(C=[],R[F]=C),R=C),R},L.prototype._safeContext=function(){var F=this.contexts;return F||(F=this.contexts=[]),F},L.prototype._indexOfContext=function(F){for(var R=this._safeContext(),C=0;R[C];){if(F===R[C][0])return C;C+=1}return-1},L.prototype._memorizeContext=function(F){var R,C;D(F)&&(R=this._safeContext(),C=this._indexOfContext(F),C>-1?R[C][1]+=1:R.push([F,1]))},L.prototype._forgetContext=function(F){var R,C;D(F)&&(R=this._safeContext(),C=this._indexOfContext(F),C>-1&&(R[C][1]-=1,R[C][1]<=0&&R.splice(C,1)))},L.prototype._bindEvent=function(F,R,C){var s=this._safeEvent(F);this._memorizeContext(C),s.push(this._getHandlerItem(R,C))},L.prototype.on=function(F,R,C){var s=this;y(F)?(F=F.split(N),w(F,function(m){s._bindEvent(m,R,C)})):x(F)&&(C=R,w(F,function(m,v){s.on(v,m,C)}))},L.prototype.once=function(F,R,C){var s=this;if(x(F)){C=R,w(F,function(v,n){s.once(n,v,C)});return}function m(){R.apply(C,arguments),s.off(F,m,C)}this.on(F,m,C)},L.prototype._spliceMatches=function(F,R){var C=0,s;if(c(F))for(s=F.length;C<s;C+=1)R(F[C])===!0&&(F.splice(C,1),s-=1,C-=1)},L.prototype._matchHandler=function(F){var R=this;return function(C){var s=F===C.handler;return s&&R._forgetContext(C.context),s}},L.prototype._matchContext=function(F){var R=this;return function(C){var s=F===C.context;return s&&R._forgetContext(C.context),s}},L.prototype._matchHandlerAndContext=function(F,R){var C=this;return function(s){var m=F===s.handler,v=R===s.context,n=m&&v;return n&&C._forgetContext(s.context),n}},L.prototype._offByEventName=function(F,R){var C=this,s=u(R),m=C._matchHandler(R);F=F.split(N),w(F,function(v){var n=C._safeEvent(v);s?C._spliceMatches(n,m):(w(n,function(l){C._forgetContext(l.context)}),C.events[v]=[])})},L.prototype._offByHandler=function(F){var R=this,C=this._matchHandler(F);w(this._safeEvent(),function(s){R._spliceMatches(s,C)})},L.prototype._offByObject=function(F,R){var C=this,s;this._indexOfContext(F)<0?w(F,function(m,v){C.off(v,m)}):y(R)?(s=this._matchContext(F),C._spliceMatches(this._safeEvent(R),s)):u(R)?(s=this._matchHandlerAndContext(R,F),w(this._safeEvent(),function(m){C._spliceMatches(m,s)})):(s=this._matchContext(F),w(this._safeEvent(),function(m){C._spliceMatches(m,s)}))},L.prototype.off=function(F,R){y(F)?this._offByEventName(F,R):arguments.length?u(F)?this._offByHandler(F):x(F)&&this._offByObject(F,R):(this.events={},this.contexts=[])},L.prototype.fire=function(F){this.invoke.apply(this,arguments)},L.prototype.invoke=function(F){var R,C,s,m;if(!this.hasListener(F))return!0;for(R=this._safeEvent(F),C=Array.prototype.slice.call(arguments,1),s=0;R[s];){if(m=R[s],m.handler.apply(m.context,C)===!1)return!1;s+=1}return!0},L.prototype.hasListener=function(F){return this.getListenerLength(F)>0},L.prototype.getListenerLength=function(F){var R=this._safeEvent(F);return R.length},e.exports=L},function(e,t,a){"use strict";function d(D){return typeof D=="string"||D instanceof String}e.exports=d},function(e,t,a){"use strict";var d=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,D={leadingZero:function(y,x){var c="",u=0;if((y+"").length>x)return y+"";for(;u<x-1;u+=1)c+="0";return(c+y).slice(x*-1)},isValidRGB:function(y){return d.test(y)},hexToRGB:function(y){var x,c,u;return D.isValidRGB(y)?(y=y.substring(1),x=parseInt(y.substr(0,2),16),c=parseInt(y.substr(2,2),16),u=parseInt(y.substr(4,2),16),[x,c,u]):!1},rgbToHEX:function(y,x,c){var u="#"+D.leadingZero(y.toString(16),2)+D.leadingZero(x.toString(16),2)+D.leadingZero(c.toString(16),2);return D.isValidRGB(u)?u:!1},rgbToHSV:function(y,x,c){var u,w,N,L,F,R;if(y/=255,x/=255,c/=255,u=Math.max(y,x,c),w=Math.min(y,x,c),F=u,R=u-w,L=u===0?0:R/u,u===w)N=0;else{switch(u){case y:N=(x-c)/R+(x<c?6:0);break;case x:N=(c-y)/R+2;break;case c:N=(y-x)/R+4;break}N/=6}return[Math.round(N*360),Math.round(L*100),Math.round(F*100)]},hsvToRGB:function(y,x,c){var u,w,N,L,F,R,C,s;if(y=Math.max(0,Math.min(360,y)),x=Math.max(0,Math.min(100,x)),c=Math.max(0,Math.min(100,c)),x/=100,c/=100,x===0)return u=w=N=c,[Math.round(u*255),Math.round(w*255),Math.round(N*255)];switch(y/=60,L=Math.floor(y),F=y-L,R=c*(1-x),C=c*(1-x*F),s=c*(1-x*(1-F)),L){case 0:u=c,w=s,N=R;break;case 1:u=C,w=c,N=R;break;case 2:u=R,w=c,N=s;break;case 3:u=R,w=C,N=c;break;case 4:u=s,w=R,N=c;break;default:u=c,w=R,N=C;break}return[Math.round(u*255),Math.round(w*255),Math.round(N*255)]}};e.exports=D},function(e,t,a){"use strict";function d(D){return D instanceof Function}e.exports=d},function(e,t,a){"use strict";var d=a(11),D=a(2),y=a(26);function x(w,N,L,F){if(d(N)){D(N.split(/\s+/g),function(R){c(w,R,L,F)});return}D(N,function(R,C){c(w,C,R,L)})}function c(w,N,L,F){function R(C){L.call(F||w,C||window.event)}"addEventListener"in w?w.addEventListener(N,R):"attachEvent"in w&&w.attachEvent("on"+N,R),u(w,N,L,R)}function u(w,N,L,F){var R=y(w,N),C=!1;D(R,function(s){return s.handler===L?(C=!0,!1):!0}),C||R.push({handler:L,wrappedHandler:F})}e.exports=x},function(e,t,a){"use strict";function d(D){if(D.preventDefault){D.preventDefault();return}D.returnValue=!1}e.exports=d},function(e,t,a){"use strict";function d(D){return D.replace(/([A-Z])/g,function(y){return"-"+y.toLowerCase()})}e.exports=d},function(e,t,a){"use strict";var d=a(11),D=a(2),y=a(26);function x(w,N,L){if(d(N)){D(N.split(/\s+/g),function(F){c(w,F,L)});return}D(N,function(F,R){c(w,R,F)})}function c(w,N,L){var F=y(w,N),R;L?(D(F,function(C,s){return L===C.handler?(u(w,N,C.wrappedHandler),R=s,!1):!0}),F.splice(R,1)):(D(F,function(C){u(w,N,C.wrappedHandler)}),F.splice(0,F.length))}function u(w,N,L){"removeEventListener"in w?w.removeEventListener(N,L):"detachEvent"in w&&w.detachEvent("on"+N,L)}e.exports=x},function(e,t,a){"use strict";var d=a(50);function D(y,x){var c=d(x.prototype);c.constructor=y,y.prototype=c}e.exports=D},function(e,t,a){"use strict";var d=a(6),D=a(7),y=a(0),x=a(1),c=a(20),u=a(13),w=a(21),N=a(4),L=Array.prototype.slice;function F(R){this.items={},this.length=0,u(R)&&(this.getItemID=R)}F.and=function(R){var C;return R=L.call(arguments),C=R.length,function(s){for(var m=0;m<C;m+=1)if(!R[m].call(null,s))return!1;return!0}},F.or=function(R){var C;return R=L.call(arguments),C=R.length,function(s){for(var m=1,v=R[0].call(null,s);m<C;m+=1)v=v||R[m].call(null,s);return v}},F.merge=function(R){var C={},s=new F(R.getItemID);return d(arguments,function(m){y(C,m.items)}),s.items=C,s.length=N.getLength(s.items),s},F.prototype.getItemID=function(R){return R._id+""},F.prototype.add=function(R){var C,s;if(arguments.length>1){d(L.call(arguments),function(m){this.add(m)},this);return}C=this.getItemID(R),s=this.items,s[C]||(this.length+=1),s[C]=R},F.prototype.remove=function(R){var C=[],s,m;return this.length?arguments.length>1?(C=N.map(L.call(arguments),function(v){return this.remove(v)},this),C):(s=this.items,w(R)&&(R=this.getItemID(R)),s[R]?(this.length-=1,m=s[R],delete s[R],m):C):C},F.prototype.clear=function(){this.items={},this.length=0},F.prototype.has=function(R){var C,s;return this.length?(C=u(R),s=!1,C?this.each(function(m){return R(m)===!0?(s=!0,!1):!0}):(R=w(R)?this.getItemID(R):R,s=c(this.items[R])),s):!1},F.prototype.doWhenHas=function(R,C,s){var m=this.items[R];c(m)&&C.call(s||this,m)},F.prototype.find=function(R){var C=new F;return this.hasOwnProperty("getItemID")&&(C.getItemID=this.getItemID),this.each(function(s){R(s)===!0&&C.add(s)}),C},F.prototype.groupBy=function(R,C){var s={},m=u(R),v=this.getItemID,n,l;if(x(R)){if(d(R,function(r){s[r+""]=new F(v)}),!C)return s;R=C,m=!0}return this.each(function(r){m?l=R(r):(l=r[R],u(l)&&(l=l.apply(r))),n=s[l],n||(n=s[l]=new F(v)),n.add(r)}),s},F.prototype.single=function(){var R;return this.each(function(C){return R=C,!1},this),R},F.prototype.sort=function(R){var C=[];return this.each(function(s){C.push(s)}),u(R)&&(C=C.sort(R)),C},F.prototype.each=function(R,C){D(this.items,R,C||this)},F.prototype.toArray=function(){return this.length?N.map(this.items,function(R){return R}):[]},e.exports=F},function(e,t,a){"use strict";var d=a(3),D=a(36);function y(x){return!d(x)&&!D(x)}e.exports=y},function(e,t,a){"use strict";function d(D){return D===Object(D)}e.exports=d},function(e,t,a){"use strict";var d={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};typeof window<"u"&&window.navigator&&D();function D(){var y=window.navigator,x=y.appName.replace(/\s/g,"_"),c=y.userAgent,u=/MSIE\s([0-9]+[.0-9]*)/,w=/Trident.*rv:11\./,N=/Edge\/(\d+)\./,L={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},F,R,C={Microsoft_Internet_Explorer:function(){var m=c.match(u);m?(d.msie=!0,d.version=parseFloat(m[1])):d.others=!0},Netscape:function(){var m=!1;if(w.exec(c))d.msie=!0,d.version=11,m=!0;else if(N.exec(c))d.edge=!0,d.version=c.match(N)[1],m=!0;else for(F in L)if(L.hasOwnProperty(F)&&(R=c.match(L[F]),R&&R.length>1)){d[F]=m=!0,d.version=parseFloat(R[1]||0);break}m||(d.others=!0)}},s=C[x];s&&C[x]()}e.exports=d},function(e,t,a){"use strict";var d=a(3);function D(y){return!y||!y.className?"":d(y.className.baseVal)?y.className:y.className.baseVal}e.exports=D},function(e,t,a){"use strict";(function(d){var D=a(10),y=a(42),x=a(44),c=a(47),u=a(28),w=a(17),N=a(14),L=a(15),F=a(0);function R(C,s){N(s,"mousedown",this._onMouseDown,this),this.options=F({distance:10},C),this.container=s,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}R.prototype.destroy=function(){w(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},R.prototype._toggleDragEvent=function(C){var s=this.container;C?(y(s),N(window,"dragstart",L),N(d.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(x(s),w(window,"dragstart",L),w(d.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},R.prototype._getEventData=function(C){return{target:u(C),originEvent:C}},R.prototype._onMouseDown=function(C){c(C)===0&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(C),this._toggleDragEvent(!0))},R.prototype._onMouseMove=function(C){var s=this.options.distance;if(L(C),this._isMoved=!0,this._distance<s){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData))){this._toggleDragEvent(!1);return}this.fire("drag",this._getEventData(C))},R.prototype._onMouseUp=function(C){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(C));return}this.fire("click",this._getEventData(C))},D.mixin(R),e.exports=R}).call(this,a(25))},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}e.exports=a},function(e,t,a){"use strict";var d="_feEventKey";function D(y,x){var c=y[d],u;return c||(c=y[d]={}),u=c[x],u||(u=c[x]=[]),u}e.exports=D},function(e,t,a){"use strict";function d(D){var y=document.documentElement.style,x,c;for(x=0,c=D.length;x<c;x+=1)if(D[x]in y)return D[x];return!1}e.exports=d},function(e,t,a){"use strict";function d(D){return D.target||D.srcElement}e.exports=d},function(e,t,a){"use strict";var d=a(10),D=a(28),y=a(17),x=a(14),c=a(30),u=a(0),w=a(18),N=a(9),L=a(12),F=a(8),R=a(51);function C(s,m){this.options=u({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},s),m=N.appendHTMLElement("div",m,this.options.cssPrefix+"palette-container"),F.call(this,s,m)}w(C,F),C.prototype._onClick=function(s){var m=this.options,v=D(s),n={};if(c(v,m.cssPrefix+"palette-button")){n.color=v.value,this.fire("_selectColor",n);return}c(v,m.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},C.prototype._onChange=function(s){var m=this.options,v=D(s),n={};c(v,m.cssPrefix+"palette-hex")&&(n.color=v.value,this.fire("_selectColor",n))},C.prototype._beforeDestroy=function(){this._toggleEvent(!1)},C.prototype._toggleEvent=function(s){var m=this.options,v=this.container,n=s?x:y,l;n(v,"click",this._onClick,this),l=v.querySelector("."+m.cssPrefix+"palette-hex",v),l&&n(l,"change",this._onChange,this)},C.prototype.render=function(s){var m=this.options,v="";this._toggleEvent(!1),v=R({cssPrefix:m.cssPrefix,preset:m.preset,detailTxt:m.detailTxt,color:s,isValidRGB:L.isValidRGB,getItemClass:function(n){return n?"":" "+m.cssPrefix+"color-transparent"},isSelected:function(n){return n===s?" "+m.cssPrefix+"selected":""}}),this.container.innerHTML=v,this._toggleEvent(!0)},d.mixin(C),e.exports=C},function(e,t,a){"use strict";var d=a(5),D=a(23);function y(x,c){var u;return x.classList?x.classList.contains(c):(u=D(x).split(/\s+/),d(c,u)>-1)}e.exports=y},function(e,t,a){"use strict";var d=a(10),D=a(53),y=a(54),x=a(30),c=a(0),u=a(18),w=a(9),N=a(32),L=a(12),F=a(8),R=a(24),C=a(57),s=-7,m=112,v=-3,n=115,l=359.99;function r(h,b){b=w.appendHTMLElement("div",b,h.cssPrefix+"slider-container"),b.style.display="none",F.call(this,h,b),this.options=c({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},h),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new R({distance:0},b),this.colorSliderPosLimitRange=[s,m],this.huebarPosLimitRange=[v,n],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}u(r,F),r.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},r.prototype.toggle=function(h){this.container.style.display=h?"block":"none"},r.prototype.isVisible=function(){return this.container.style.display==="block"},r.prototype.render=function(h){var b=this.container,f=this.options,S=C.layout,E,_;L.isValidRGB(h)&&(S=S.replace(/{{slider}}/,C.slider),S=S.replace(/{{huebar}}/,C.huebar),S=S.replace(/{{cssPrefix}}/g,f.cssPrefix),S=S.replace(/{{id}}/g,f.id),this.container.innerHTML=S,this.sliderSvgElement=b.querySelector("."+f.cssPrefix+"svg-slider"),this.huebarSvgElement=b.querySelector("."+f.cssPrefix+"svg-huebar"),this.sliderHandleElement=b.querySelector("."+f.cssPrefix+"slider-handle"),this.huebarHandleElement=b.querySelector("."+f.cssPrefix+"huebar-handle"),this.baseColorElement=b.querySelector("."+f.cssPrefix+"slider-basecolor"),E=L.hexToRGB(h),_=L.rgbToHSV.apply(null,E),this.moveHue(_[0],!0),this.moveSaturationAndValue(_[1],_[2],!0))},r.prototype._setColorSliderPosMax=function(){var h=this.sliderSvgElement.getClientRects()[0];h&&(this.colorSliderPosLimitRange[1]=h.height-10)},r.prototype._moveColorSliderHandle=function(h,b,f){var S=this.sliderHandleElement,E;b=Math.max(this.colorSliderPosLimitRange[0],b),b=Math.min(this.colorSliderPosLimitRange[1],b),h=Math.max(this.colorSliderPosLimitRange[0],h),h=Math.min(this.colorSliderPosLimitRange[1],h),N.setTranslateXY(S,h,b),E=b>50?"white":"black",N.setStrokeColor(S,E),f||this.fire("_selectColor",{color:L.rgbToHEX.apply(null,this.getRGB())})},r.prototype.moveSaturationAndValue=function(h,b,f){var S,E,_,O;h=h||0,b=b||0,S=Math.abs(this.colorSliderPosLimitRange[0]),E=this.colorSliderPosLimitRange[1],_=h*E/100-S,O=E-b*E/100-S,this._moveColorSliderHandle(_,O,f)},r.prototype._moveColorSliderByPosition=function(h,b){var f=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(h+f,b+f)},r.prototype.getSaturationAndValue=function(){var h=Math.abs(this.colorSliderPosLimitRange[0]),b=h+this.colorSliderPosLimitRange[1],f=N.getTranslateXY(this.sliderHandleElement),S,E;return S=(f[1]+h)/b*100,E=100-(f[0]+h)/b*100,[S,E]},r.prototype._setHueBarPosMax=function(){var h=this.huebarSvgElement.getClientRects()[0];h&&(this.huebarPosLimitRange[1]=h.height-7)},r.prototype._moveHueHandle=function(h,b){var f=this.huebarHandleElement,S=this.baseColorElement,E,_;h=Math.max(this.huebarPosLimitRange[0],h),h=Math.min(this.huebarPosLimitRange[1],h),N.setTranslateY(f,h),E=L.hsvToRGB(this.getHue(),100,100),_=L.rgbToHEX.apply(null,E),N.setGradientColorStop(S,_),b||this.fire("_selectColor",{color:L.rgbToHEX.apply(null,this.getRGB())})},r.prototype.moveHue=function(h,b){var f=0,S,E;S=Math.abs(this.huebarPosLimitRange[0]),E=S+this.huebarPosLimitRange[1],h=h||0,f=E*h/l-S,this._moveHueHandle(f,b)},r.prototype._moveHueByPosition=function(h){var b=this.huebarPosLimitRange[0];this._moveHueHandle(h+b)},r.prototype.getHue=function(){var h=this.huebarHandleElement,b=N.getTranslateXY(h),f,S;return f=Math.abs(this.huebarPosLimitRange[0]),S=f+this.huebarPosLimitRange[1],(b[0]+f)*l/S},r.prototype.getHSV=function(){var h=this.getSaturationAndValue(),b=this.getHue();return[b].concat(h)},r.prototype.getRGB=function(){return L.hsvToRGB.apply(null,this.getHSV())},r.prototype._prepareColorSliderForMouseEvent=function(h){var b=this.options,f=y(h.target,"."+b.cssPrefix+"slider-part"),S;return S=this._dragDataCache={isColorSlider:x(f,b.cssPrefix+"slider-left"),parentElement:f},S},r.prototype._onClick=function(h){var b=this._prepareColorSliderForMouseEvent(h),f=D(h.originEvent,b.parentElement);b.isColorSlider?this._moveColorSliderByPosition(f[0],f[1]):this._moveHueByPosition(f[1]),this._dragDataCache=null},r.prototype._onDragStart=function(h){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(h)},r.prototype._onDrag=function(h){var b=this._dragDataCache,f=D(h.originEvent,b.parentElement);b.isColorSlider?this._moveColorSliderByPosition(f[0],f[1]):this._moveHueByPosition(f[1])},r.prototype._onDragEnd=function(){this._dragDataCache=null},d.mixin(r),e.exports=r},function(e,t,a){"use strict";var d=a(4).isOldBrowser,D=/[\.\-0-9]+/g,y=-6,x={getTranslateXY:function(c){var u;return d?(u=c.style,[parseFloat(u.top),parseFloat(u.left)]):(u=c.getAttribute("transform"),u?(u=u.match(D),[parseFloat(u[1]),parseFloat(u[0])]):[0,0])},setTranslateXY:function(c,u,w){d?(c.style.left=u+"px",c.style.top=w+"px"):c.setAttribute("transform","translate("+u+","+w+")")},setTranslateY:function(c,u){d?c.style.top=u+"px":c.setAttribute("transform","translate("+y+","+u+")")},setStrokeColor:function(c,u){d?c.strokecolor=u:c.setAttribute("stroke",u)},setGradientColorStop:function(c,u){d?c.color=u:c.setAttribute("stop-color",u)}};e.exports=x},function(e,t,a){a(34),e.exports=a(35)},function(e,t,a){},function(e,t,a){"use strict";var d=a(19),D=a(8),y=a(24),x=a(48),c=a(29),u=a(31),w=a(12),N=a(32),L={Collection:d,View:D,Drag:y,create:x,Palette:c,Slider:u,colorutil:w,svgvml:N};e.exports=L},function(e,t,a){"use strict";function d(D){return D===null}e.exports=d},function(e,t,a){"use strict";var d=a(3),D=a(38),y=7*24*60*60*1e3;function x(u){var w=new Date().getTime();return w-u>y}function c(u,w){var N="https://www.google-analytics.com/collect",L=location.hostname,F="event",R="use",C="TOAST UI "+u+" for "+L+": Statistics",s=window.localStorage.getItem(C);!d(window.tui)&&window.tui.usageStatistics===!1||s&&!x(s)||(window.localStorage.setItem(C,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&D(N,{v:1,t:F,tid:w,cid:L,dp:L,dh:u,el:u,ec:R})},1e3))}e.exports=c},function(e,t,a){"use strict";var d=a(7);function D(y,x){var c=document.createElement("img"),u="";return d(x,function(w,N){u+="&"+N+"="+w}),u=u.substring(1),c.src=y+"?"+u,c.style.display="none",document.body.appendChild(c),document.body.removeChild(c),c}e.exports=D},function(e,t,a){"use strict";var d=a(2),D=a(5),y=a(23),x=a(40);function c(u){var w=Array.prototype.slice.call(arguments,1),N=u.classList,L=[],F;if(N){d(w,function(R){u.classList.add(R)});return}F=y(u),F&&(w=[].concat(F.split(/\s+/),w)),d(w,function(R){D(R,L)<0&&L.push(R)}),x(u,L)}e.exports=c},function(e,t,a){"use strict";var d=a(1),D=a(3);function y(x,c){if(c=d(c)?c.join(" "):c,c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),D(x.className.baseVal)){x.className=c;return}x.className.baseVal=c}e.exports=y},function(e,t,a){"use strict";function d(D){return typeof D=="number"||D instanceof Number}e.exports=d},function(e,t,a){"use strict";var d=a(14),D=a(15),y=a(43),x=a(27),c="onselectstart"in document,u="prevUserSelect",w=x(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function N(L){L||(L=document),c?d(L,"selectstart",D):(L=L===document?document.documentElement:L,y(L,u,L.style[w]),L.style[w]="none")}e.exports=N},function(e,t,a){"use strict";var d=a(16);function D(y,x,c){if(y.dataset){y.dataset[x]=c;return}y.setAttribute("data-"+d(x),c)}e.exports=D},function(e,t,a){"use strict";var d=a(17),D=a(15),y=a(45),x=a(46),c=a(27),u="onselectstart"in document,w="prevUserSelect",N=c(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function L(F){F||(F=document),u?d(F,"selectstart",D):(F=F===document?document.documentElement:F,F.style[N]=y(F,w)||"auto",x(F,w))}e.exports=L},function(e,t,a){"use strict";var d=a(16);function D(y,x){return y.dataset?y.dataset[x]:y.getAttribute("data-"+d(x))}e.exports=D},function(e,t,a){"use strict";var d=a(16);function D(y,x){if(y.dataset){delete y.dataset[x];return}y.removeAttribute("data-"+d(x))}e.exports=D},function(e,t,a){"use strict";var d=a(22),D=a(5),y=["0","1","3","5","7"],x=["2","6"],c=["4"];function u(N){return d.msie&&d.version<=8?w(N):N.button}function w(N){var L=String(N.button);return D(L,y)>-1?0:D(L,x)>-1?2:D(L,c)>-1?1:null}e.exports=u},function(e,t,a){"use strict";var d=a(10),D=a(0),y=a(4),x=a(12),c=a(49),u=a(29),w=a(31),N=0;function L(){return N+=1,N}function F(R){var C;if(!(this instanceof F))return new F(R);if(R=this.options=D({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:L(),usageStatistics:!0},R),!R.container)throw new Error("ColorPicker(): need container option.");C=this.layout=new c(R,R.container),this.palette=new u(R,C.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new w(R,C.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),C.addChild(this.palette),C.addChild(this.slider),this.render(R.color),R.usageStatistics&&y.sendHostName()}F.prototype._onSelectColorInPalette=function(R){var C=R.color,s=this.options;if(!x.isValidRGB(C)&&C!==""){this.render();return}this.fire("selectColor",{color:C,origin:"palette"}),s.color!==C&&(s.color=C,this.render(C))},F.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},F.prototype._onSelectColorInSlider=function(R){var C=R.color,s=this.options;this.fire("selectColor",{color:C,origin:"slider"}),s.color!==C&&(s.color=C,this.palette.render(C))},F.prototype.setColor=function(R){if(!x.isValidRGB(R))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=R,this.render(R)},F.prototype.getColor=function(){return this.options.color},F.prototype.toggle=function(R){this.layout.container.style.display=R?"block":"none"},F.prototype.render=function(R){this.layout.render(R||this.options.color)},F.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},d.mixin(F),e.exports=F},function(e,t,a){"use strict";var d=a(0),D=a(18),y=a(9),x=a(8);function c(u,w){this.options=d({cssPrefix:"tui-colorpicker-"},u),w=y.appendHTMLElement("div",w,this.options.cssPrefix+"container"),x.call(this,u,w),this.render()}D(c,x),c.prototype.render=function(u){this.recursive(function(w){w.render(u)},!0)},e.exports=c},function(e,t,a){"use strict";function d(D){function y(){}return y.prototype=D,new y}e.exports=d},function(e,t,a){"use strict";var d=a(52);e.exports=function(D){var y=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),x=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",y,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join(`
`);return d(x,D)}},function(e,t,a){"use strict";var d=a(5),D=a(2),y=a(1),x=a(11),c=a(0),u=/{{\s?|\s?}}/g,w=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,N=/\[\s?|\s?\]/,L=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,F=/\./,R=/^["']\w+["']$/,C=/"|'/g,s=/^-?\d+\.?\d*$/,m=2,v={if:b,each:f,with:S},n="a".split(/a/).length===3,l=function(){return n?function(H,Y){return H.split(Y)}:function(H,Y){var se=[],ne=0,be,K;for(Y.global||(Y=new RegExp(Y,"g")),be=Y.exec(H);be!==null;)K=be.index,se.push(H.slice(ne,K)),ne=K+be[0].length,be=Y.exec(H);return se.push(H.slice(ne)),se}}();function r(H,Y){var se,ne=Y[H];return H==="true"?ne=!0:H==="false"?ne=!1:R.test(H)?ne=H.replace(C,""):w.test(H)?(se=H.split(N),ne=r(se[0],Y)[r(se[1],Y)]):L.test(H)?(se=H.split(F),ne=r(se[0],Y)[se[1]]):s.test(H)&&(ne=parseFloat(H)),ne}function h(H,Y){var se=[H],ne=[],be=0,K=0;return D(Y,function(Ce,W){Ce.indexOf("if")===0?be+=1:Ce==="/if"?be-=1:!be&&(Ce.indexOf("elseif")===0||Ce==="else")&&(se.push(Ce==="else"?["true"]:Ce.split(" ").slice(1)),ne.push(Y.slice(K,W)),K=W+1)}),ne.push(Y.slice(K)),{exps:se,sourcesInsideIf:ne}}function b(H,Y,se){var ne=h(H,Y),be=!1,K="";return D(ne.exps,function(Ce,W){return be=O(Ce,se),be&&(K=B(ne.sourcesInsideIf[W],se)),!be}),K}function f(H,Y,se){var ne=O(H,se),be=y(ne)?"@index":"@key",K={},Ce="";return D(ne,function(W,Be){K[be]=Be,K["@this"]=W,c(se,K),Ce+=B(Y.slice(),se)}),Ce}function S(H,Y,se){var ne=d("as",H),be=H[ne+1],K=O(H.slice(0,ne),se),Ce={};return Ce[be]=K,B(Y,c(se,Ce))||""}function E(H,Y,se){var ne=H.splice(Y+1,se-Y);return ne.pop(),ne}function _(H,Y,se){for(var ne=v[H],be=1,K=0,Ce,W=K+m,Be=Y[W];be&&x(Be);)Be.indexOf(H)===0?be+=1:Be.indexOf("/"+H)===0&&(be-=1,Ce=W),W+=m,Be=Y[W];if(be)throw Error(H+" needs {{/"+H+"}} expression.");return Y[K]=ne(Y[K].split(" ").slice(1),E(Y,K,Ce),se),Y}function O(H,Y){var se=r(H[0],Y);return se instanceof Function?j(se,H.slice(1),Y):se}function j(H,Y,se){var ne=[];return D(Y,function(be){ne.push(r(be,se))}),H.apply(null,ne)}function B(H,Y){for(var se=1,ne=H[se],be,K,Ce;x(ne);)be=ne.split(" "),K=be[0],v[K]?(Ce=_(K,H.splice(se,H.length-se),Y),H=H.concat(Ce)):H[se]=O(be,Y),se+=m,ne=H[se];return H.join("")}function V(H,Y){return B(l(H,u),Y)}e.exports=V},function(e,t,a){"use strict";var d=a(1);function D(y,x){var c=d(y),u=c?y[0]:y.clientX,w=c?y[1]:y.clientY,N;return x?(N=x.getBoundingClientRect(),[u-N.left-x.clientLeft,w-N.top-x.clientTop]):[u,w]}e.exports=D},function(e,t,a){"use strict";var d=a(55);function D(y,x){var c=y.parentNode;if(d(y,x))return y;for(;c&&c!==document;){if(d(c,x))return c;c=c.parentNode}return null}e.exports=D},function(e,t,a){"use strict";var d=a(5),D=a(56),y=Element.prototype,x=y.matches||y.webkitMatchesSelector||y.mozMatchesSelector||y.msMatchesSelector||function(u){var w=this.document||this.ownerDocument;return d(this,D(w.querySelectorAll(u)))>-1};function c(u,w){return x.call(u,w)}e.exports=c},function(e,t,a){"use strict";var d=a(6);function D(y){var x;try{x=Array.prototype.slice.call(y)}catch{x=[],d(y,function(u){x.push(u)})}return x}e.exports=D},function(e,t,a){"use strict";(function(d){var D=a(4).isOldBrowser,y=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join(`
`),x=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join(`
`),c=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join(`
`),u=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join(`
`),w=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join(`
`);D&&d.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),e.exports={layout:y,slider:D?c:x,huebar:D?w:u}}).call(this,a(25))}])})});var zg=Vu((Us,Cc)=>{"use strict";(function(t,a){typeof Us=="object"&&typeof Cc=="object"?Cc.exports=a(yc()):typeof define=="function"&&define.amd?define(["tui-color-picker"],a):typeof Us=="object"?Us.tui=a(yc()):(t.tui=t.tui||{},t.tui.ImageEditor=a(t.tui.colorPicker))})(self,function(e){return function(){var t={2777:function(y,x,c){var u=u||{version:"4.6.0"};if(x.fabric=u,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?u.document=document:u.document=document.implementation.createHTMLDocument(""),u.window=window;else{var w=c(4960),N=new w.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;u.document=N.document,u.jsdomImplForWrapper=c(6759).implForWrapper,u.nodeCanvas=c(6272).Canvas,u.window=N,DOMParser=u.window.DOMParser}u.isTouchSupported="ontouchstart"in u.window||"ontouchstart"in u.document||u.window&&u.window.navigator&&u.window.navigator.maxTouchPoints>0,u.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",u.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],u.DPI=96,u.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",u.commaWsp="(?:\\s+,?\\s*|,\\s*)",u.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,u.reNonWord=/[ \n\.,;!\?\-]/,u.fontPaths={},u.iMatrix=[1,0,0,1,0,0],u.svgNS="http://www.w3.org/2000/svg",u.perfLimitSizeTotal=2097152,u.maxCacheSideLimit=4096,u.minCacheSideLimit=256,u.charWidthsCache={},u.textureSize=2048,u.disableStyleCopyPaste=!1,u.enableGLFiltering=!0,u.devicePixelRatio=u.window.devicePixelRatio||u.window.webkitDevicePixelRatio||u.window.mozDevicePixelRatio||1,u.browserShadowBlurConstant=1,u.arcToSegmentsCache={},u.boundsOfCurveCache={},u.cachesBoundsOfCurve=!0,u.forceGLPutImageData=!1,u.initFilterBackend=function(){if(u.enableGLFiltering&&u.isWebglSupported&&u.isWebglSupported(u.textureSize))return console.log("max texture size: "+u.maxTextureSize),new u.WebglFilterBackend({tileSize:u.textureSize});if(u.Canvas2dFilterBackend)return new u.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=u),function(){function C(r,h){if(this.__eventListeners[r]){var b=this.__eventListeners[r];h?b[b.indexOf(h)]=!1:u.util.array.fill(b,!1)}}function s(r,h){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var b in r)this.on(b,r[b]);else this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(h);return this}function m(r,h){var b=(function(){h.apply(this,arguments),this.off(r,b)}).bind(this);this.on(r,b)}function v(r,h){if(arguments.length===1)for(var b in r)m.call(this,b,r[b]);else m.call(this,r,h);return this}function n(r,h){if(!this.__eventListeners)return this;if(arguments.length===0)for(r in this.__eventListeners)C.call(this,r);else if(arguments.length===1&&typeof arguments[0]=="object")for(var b in r)C.call(this,b,r[b]);else C.call(this,r,h);return this}function l(r,h){if(!this.__eventListeners)return this;var b=this.__eventListeners[r];if(!b)return this;for(var f=0,S=b.length;f<S;f++)b[f]&&b[f].call(this,h||{});return this.__eventListeners[r]=b.filter(function(E){return E!==!1}),this}u.Observable={fire:l,on:s,once:v,off:n}}(),u.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var C=0,s=arguments.length;C<s;C++)this._onObjectAdded(arguments[C]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(C,s,m){var v=this._objects;return m?v[s]=C:v.splice(s,0,C),this._onObjectAdded&&this._onObjectAdded(C),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var C=this._objects,s,m=!1,v=0,n=arguments.length;v<n;v++)s=C.indexOf(arguments[v]),s!==-1&&(m=!0,C.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[v]));return this.renderOnAddRemove&&m&&this.requestRenderAll(),this},forEachObject:function(C,s){for(var m=this.getObjects(),v=0,n=m.length;v<n;v++)C.call(s,m[v],v,m);return this},getObjects:function(C){return typeof C>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===C})},item:function(C){return this._objects[C]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(C,s){return this._objects.indexOf(C)>-1?!0:s?this._objects.some(function(m){return typeof m.contains=="function"&&m.contains(C,!0)}):!1},complexity:function(){return this._objects.reduce(function(C,s){return C+=s.complexity?s.complexity():0,C},0)}},u.CommonMethods={_setOptions:function(C){for(var s in C)this.set(s,C[s])},_initGradient:function(C,s){C&&C.colorStops&&!(C instanceof u.Gradient)&&this.set(s,new u.Gradient(C))},_initPattern:function(C,s,m){C&&C.source&&!(C instanceof u.Pattern)?this.set(s,new u.Pattern(C,m)):m&&m()},_setObject:function(C){for(var s in C)this._set(s,C[s])},set:function(C,s){return typeof C=="object"?this._setObject(C):this._set(C,s),this},_set:function(C,s){this[C]=s},toggle:function(C){var s=this.get(C);return typeof s=="boolean"&&this.set(C,!s),this},get:function(C){return this[C]}},function(C){var s=Math.sqrt,m=Math.atan2,v=Math.pow,n=Math.PI/180,l=Math.PI/2;u.util={cos:function(r){if(r===0)return 1;r<0&&(r=-r);var h=r/l;switch(h){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},sin:function(r){if(r===0)return 0;var h=r/l,b=1;switch(r<0&&(b=-1),h){case 1:return b;case 2:return 0;case 3:return-b}return Math.sin(r)},removeFromArray:function(r,h){var b=r.indexOf(h);return b!==-1&&r.splice(b,1),r},getRandomInt:function(r,h){return Math.floor(Math.random()*(h-r+1))+r},degreesToRadians:function(r){return r*n},radiansToDegrees:function(r){return r/n},rotatePoint:function(r,h,b){var f=new u.Point(r.x-h.x,r.y-h.y),S=u.util.rotateVector(f,b);return new u.Point(S.x,S.y).addEquals(h)},rotateVector:function(r,h){var b=u.util.sin(h),f=u.util.cos(h),S=r.x*f-r.y*b,E=r.x*b+r.y*f;return{x:S,y:E}},transformPoint:function(r,h,b){return b?new u.Point(h[0]*r.x+h[2]*r.y,h[1]*r.x+h[3]*r.y):new u.Point(h[0]*r.x+h[2]*r.y+h[4],h[1]*r.x+h[3]*r.y+h[5])},makeBoundingBoxFromPoints:function(r,h){if(h)for(var b=0;b<r.length;b++)r[b]=u.util.transformPoint(r[b],h);var f=[r[0].x,r[1].x,r[2].x,r[3].x],S=u.util.array.min(f),E=u.util.array.max(f),_=E-S,O=[r[0].y,r[1].y,r[2].y,r[3].y],j=u.util.array.min(O),B=u.util.array.max(O),V=B-j;return{left:S,top:j,width:_,height:V}},invertTransform:function(r){var h=1/(r[0]*r[3]-r[1]*r[2]),b=[h*r[3],-h*r[1],-h*r[2],h*r[0]],f=u.util.transformPoint({x:r[4],y:r[5]},b,!0);return b[4]=-f.x,b[5]=-f.y,b},toFixed:function(r,h){return parseFloat(Number(r).toFixed(h))},parseUnit:function(r,h){var b=/\D{0,2}$/.exec(r),f=parseFloat(r);switch(h||(h=u.Text.DEFAULT_SVG_FONT_SIZE),b[0]){case"mm":return f*u.DPI/25.4;case"cm":return f*u.DPI/2.54;case"in":return f*u.DPI;case"pt":return f*u.DPI/72;case"pc":return f*u.DPI/72*12;case"em":return f*h;default:return f}},falseFunction:function(){return!1},getKlass:function(r,h){return r=u.util.string.camelize(r.charAt(0).toUpperCase()+r.slice(1)),u.util.resolveNamespace(h)[r]},getSvgAttributes:function(r){var h=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":h=h.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":h=h.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":h=h.concat(["offset","stop-color","stop-opacity"]);break}return h},resolveNamespace:function(r){if(!r)return u;var h=r.split("."),b=h.length,f,S=C||u.window;for(f=0;f<b;++f)S=S[h[f]];return S},loadImage:function(r,h,b,f){if(!r){h&&h.call(b,r);return}var S=u.util.createImage(),E=function(){h&&h.call(b,S,!1),S=S.onload=S.onerror=null};S.onload=E,S.onerror=function(){u.log("Error loading "+S.src),h&&h.call(b,null,!0),S=S.onload=S.onerror=null},r.indexOf("data")!==0&&f!==void 0&&f!==null&&(S.crossOrigin=f),r.substring(0,14)==="data:image/svg"&&(S.onload=null,u.util.loadImageInDom(S,E)),S.src=r},loadImageInDom:function(r,h){var b=u.document.createElement("div");b.style.width=b.style.height="1px",b.style.left=b.style.top="-100%",b.style.position="absolute",b.appendChild(r),u.document.querySelector("body").appendChild(b),r.onload=function(){h(),b.parentNode.removeChild(b),b=null}},enlivenObjects:function(r,h,b,f){r=r||[];var S=[],E=0,_=r.length;function O(){++E===_&&h&&h(S.filter(function(j){return j}))}if(!_){h&&h(S);return}r.forEach(function(j,B){if(!j||!j.type){O();return}var V=u.util.getKlass(j.type,b);V.fromObject(j,function(H,Y){Y||(S[B]=H),f&&f(j,H,Y),O()})})},enlivenPatterns:function(r,h){r=r||[];function b(){++S===E&&h&&h(f)}var f=[],S=0,E=r.length;if(!E){h&&h(f);return}r.forEach(function(_,O){_&&_.source?new u.Pattern(_,function(j){f[O]=j,b()}):(f[O]=_,b())})},groupSVGElements:function(r,h,b){var f;return r&&r.length===1?r[0]:(h&&(h.width&&h.height?h.centerPoint={x:h.width/2,y:h.height/2}:(delete h.width,delete h.height)),f=new u.Group(r,h),typeof b<"u"&&(f.sourcePath=b),f)},populateWithProperties:function(r,h,b){if(b&&Object.prototype.toString.call(b)==="[object Array]")for(var f=0,S=b.length;f<S;f++)b[f]in r&&(h[b[f]]=r[b[f]])},drawDashedLine:function(r,h,b,f,S,E){var _=f-h,O=S-b,j=s(_*_+O*O),B=m(O,_),V=E.length,H=0,Y=!0;for(r.save(),r.translate(h,b),r.moveTo(0,0),r.rotate(B),h=0;j>h;)h+=E[H++%V],h>j&&(h=j),r[Y?"lineTo":"moveTo"](h,0),Y=!Y;r.restore()},createCanvasElement:function(){return u.document.createElement("canvas")},copyCanvasElement:function(r){var h=u.util.createCanvasElement();return h.width=r.width,h.height=r.height,h.getContext("2d").drawImage(r,0,0),h},toDataURL:function(r,h,b){return r.toDataURL("image/"+h,b)},createImage:function(){return u.document.createElement("img")},multiplyTransformMatrices:function(r,h,b){return[r[0]*h[0]+r[2]*h[1],r[1]*h[0]+r[3]*h[1],r[0]*h[2]+r[2]*h[3],r[1]*h[2]+r[3]*h[3],b?0:r[0]*h[4]+r[2]*h[5]+r[4],b?0:r[1]*h[4]+r[3]*h[5]+r[5]]},qrDecompose:function(r){var h=m(r[1],r[0]),b=v(r[0],2)+v(r[1],2),f=s(b),S=(r[0]*r[3]-r[2]*r[1])/f,E=m(r[0]*r[2]+r[1]*r[3],b);return{angle:h/n,scaleX:f,scaleY:S,skewX:E/n,skewY:0,translateX:r[4],translateY:r[5]}},calcRotateMatrix:function(r){if(!r.angle)return u.iMatrix.concat();var h=u.util.degreesToRadians(r.angle),b=u.util.cos(h),f=u.util.sin(h);return[b,f,-f,b,0,0]},calcDimensionsMatrix:function(r){var h=typeof r.scaleX>"u"?1:r.scaleX,b=typeof r.scaleY>"u"?1:r.scaleY,f=[r.flipX?-h:h,0,0,r.flipY?-b:b,0,0],S=u.util.multiplyTransformMatrices,E=u.util.degreesToRadians;return r.skewX&&(f=S(f,[1,0,Math.tan(E(r.skewX)),1],!0)),r.skewY&&(f=S(f,[1,Math.tan(E(r.skewY)),0,1],!0)),f},composeMatrix:function(r){var h=[1,0,0,1,r.translateX||0,r.translateY||0],b=u.util.multiplyTransformMatrices;return r.angle&&(h=b(h,u.util.calcRotateMatrix(r))),(r.scaleX!==1||r.scaleY!==1||r.skewX||r.skewY||r.flipX||r.flipY)&&(h=b(h,u.util.calcDimensionsMatrix(r))),h},resetObjectTransform:function(r){r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},saveObjectTransform:function(r){return{scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}},isTransparent:function(r,h,b,f){f>0&&(h>f?h-=f:h=0,b>f?b-=f:b=0);var S=!0,E,_,O=r.getImageData(h,b,f*2||1,f*2||1),j=O.data.length;for(E=3;E<j&&(_=O.data[E],S=_<=0,S!==!1);E+=4);return O=null,S},parsePreserveAspectRatioAttribute:function(r){var h="meet",b="Mid",f="Mid",S=r.split(" "),E;return S&&S.length&&(h=S.pop(),h!=="meet"&&h!=="slice"?(E=h,h="meet"):S.length&&(E=S.pop())),b=E!=="none"?E.slice(1,4):"none",f=E!=="none"?E.slice(5,8):"none",{meetOrSlice:h,alignX:b,alignY:f}},clearFabricFontCache:function(r){r=(r||"").toLowerCase(),r?u.charWidthsCache[r]&&delete u.charWidthsCache[r]:u.charWidthsCache={}},limitDimsByArea:function(r,h){var b=Math.sqrt(h*r),f=Math.floor(h/b);return{x:Math.floor(b),y:f}},capValue:function(r,h,b){return Math.max(r,Math.min(h,b))},findScaleToFit:function(r,h){return Math.min(h.width/r.width,h.height/r.height)},findScaleToCover:function(r,h){return Math.max(h.width/r.width,h.height/r.height)},matrixToSVG:function(r){return"matrix("+r.map(function(h){return u.util.toFixed(h,u.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(r,h){var b=u.util.invertTransform(h),f=u.util.multiplyTransformMatrices(b,r.calcOwnMatrix());u.util.applyTransformToObject(r,f)},addTransformToObject:function(r,h){u.util.applyTransformToObject(r,u.util.multiplyTransformMatrices(h,r.calcOwnMatrix()))},applyTransformToObject:function(r,h){var b=u.util.qrDecompose(h),f=new u.Point(b.translateX,b.translateY);r.flipX=!1,r.flipY=!1,r.set("scaleX",b.scaleX),r.set("scaleY",b.scaleY),r.skewX=b.skewX,r.skewY=b.skewY,r.angle=b.angle,r.setPositionByOrigin(f,"center","center")},sizeAfterTransform:function(r,h,b){var f=r/2,S=h/2,E=[{x:-f,y:-S},{x:f,y:-S},{x:-f,y:S},{x:f,y:S}],_=u.util.calcDimensionsMatrix(b),O=u.util.makeBoundingBoxFromPoints(E,_);return{x:O.width,y:O.height}}}}(x),function(){var C=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},m={m:"l",M:"L"};function v(q,Z,fe,G,X,J,Q,ve,he,Se,xe){var De=u.util.cos(q),ae=u.util.sin(q),ee=u.util.cos(Z),ie=u.util.sin(Z),ce=fe*X*ee-G*J*ie+Q,de=G*X*ee+fe*J*ie+ve,me=Se+he*(-fe*X*ae-G*J*De),Ne=xe+he*(-G*X*ae+fe*J*De),Ve=ce+he*(fe*X*ie+G*J*ee),He=de+he*(G*X*ie-fe*J*ee);return["C",me,Ne,Ve,He,ce,de]}function n(q,Z,fe,G,X,J,Q){var ve=Math.PI,he=Q*ve/180,Se=u.util.sin(he),xe=u.util.cos(he),De=0,ae=0;fe=Math.abs(fe),G=Math.abs(G);var ee=-xe*q*.5-Se*Z*.5,ie=-xe*Z*.5+Se*q*.5,ce=fe*fe,de=G*G,me=ie*ie,Ne=ee*ee,Ve=ce*de-ce*me-de*Ne,He=0;if(Ve<0){var ye=Math.sqrt(1-Ve/(ce*de));fe*=ye,G*=ye}else He=(X===J?-1:1)*Math.sqrt(Ve/(ce*me+de*Ne));var We=He*fe*ie/G,Xe=-He*G*ee/fe,qe=xe*We-Se*Xe+q*.5,Et=Se*We+xe*Xe+Z*.5,ut=l(1,0,(ee-We)/fe,(ie-Xe)/G),pt=l((ee-We)/fe,(ie-Xe)/G,(-ee-We)/fe,(-ie-Xe)/G);J===0&&pt>0?pt-=2*ve:J===1&&pt<0&&(pt+=2*ve);for(var rt=Math.ceil(Math.abs(pt/ve*2)),vt=[],Nt=pt/rt,Ht=8/3*Math.sin(Nt/4)*Math.sin(Nt/4)/Math.sin(Nt/2),we=ut+Nt,Ae=0;Ae<rt;Ae++)vt[Ae]=v(ut,we,xe,Se,fe,G,qe,Et,Ht,De,ae),De=vt[Ae][5],ae=vt[Ae][6],ut=we,we+=Nt;return vt}function l(q,Z,fe,G){var X=Math.atan2(Z,q),J=Math.atan2(G,fe);return J>=X?J-X:2*Math.PI-(X-J)}function r(q,Z,fe,G,X,J,Q,ve){var he;if(u.cachesBoundsOfCurve&&(he=C.call(arguments),u.boundsOfCurveCache[he]))return u.boundsOfCurveCache[he];var Se=Math.sqrt,xe=Math.min,De=Math.max,ae=Math.abs,ee=[],ie=[[],[]],ce,de,me,Ne,Ve,He,ye,We;de=6*q-12*fe+6*X,ce=-3*q+9*fe-9*X+3*Q,me=3*fe-3*q;for(var Xe=0;Xe<2;++Xe){if(Xe>0&&(de=6*Z-12*G+6*J,ce=-3*Z+9*G-9*J+3*ve,me=3*G-3*Z),ae(ce)<1e-12){if(ae(de)<1e-12)continue;Ne=-me/de,0<Ne&&Ne<1&&ee.push(Ne);continue}ye=de*de-4*me*ce,!(ye<0)&&(We=Se(ye),Ve=(-de+We)/(2*ce),0<Ve&&Ve<1&&ee.push(Ve),He=(-de-We)/(2*ce),0<He&&He<1&&ee.push(He))}for(var qe,Et,ut=ee.length,pt=ut,rt;ut--;)Ne=ee[ut],rt=1-Ne,qe=rt*rt*rt*q+3*rt*rt*Ne*fe+3*rt*Ne*Ne*X+Ne*Ne*Ne*Q,ie[0][ut]=qe,Et=rt*rt*rt*Z+3*rt*rt*Ne*G+3*rt*Ne*Ne*J+Ne*Ne*Ne*ve,ie[1][ut]=Et;ie[0][pt]=q,ie[1][pt]=Z,ie[0][pt+1]=Q,ie[1][pt+1]=ve;var vt=[{x:xe.apply(null,ie[0]),y:xe.apply(null,ie[1])},{x:De.apply(null,ie[0]),y:De.apply(null,ie[1])}];return u.cachesBoundsOfCurve&&(u.boundsOfCurveCache[he]=vt),vt}function h(q,Z,fe){for(var G=fe[1],X=fe[2],J=fe[3],Q=fe[4],ve=fe[5],he=fe[6],Se=fe[7],xe=n(he-q,Se-Z,G,X,Q,ve,J),De=0,ae=xe.length;De<ae;De++)xe[De][1]+=q,xe[De][2]+=Z,xe[De][3]+=q,xe[De][4]+=Z,xe[De][5]+=q,xe[De][6]+=Z;return xe}function b(q){var Z=0,fe=0,G=q.length,X=0,J=0,Q,ve,he,Se=[],xe,De,ae;for(ve=0;ve<G;++ve){switch(he=!1,Q=q[ve].slice(0),Q[0]){case"l":Q[0]="L",Q[1]+=Z,Q[2]+=fe;case"L":Z=Q[1],fe=Q[2];break;case"h":Q[1]+=Z;case"H":Q[0]="L",Q[2]=fe,Z=Q[1];break;case"v":Q[1]+=fe;case"V":Q[0]="L",fe=Q[1],Q[1]=Z,Q[2]=fe;break;case"m":Q[0]="M",Q[1]+=Z,Q[2]+=fe;case"M":Z=Q[1],fe=Q[2],X=Q[1],J=Q[2];break;case"c":Q[0]="C",Q[1]+=Z,Q[2]+=fe,Q[3]+=Z,Q[4]+=fe,Q[5]+=Z,Q[6]+=fe;case"C":De=Q[3],ae=Q[4],Z=Q[5],fe=Q[6];break;case"s":Q[0]="S",Q[1]+=Z,Q[2]+=fe,Q[3]+=Z,Q[4]+=fe;case"S":xe==="C"?(De=2*Z-De,ae=2*fe-ae):(De=Z,ae=fe),Z=Q[3],fe=Q[4],Q[0]="C",Q[5]=Q[3],Q[6]=Q[4],Q[3]=Q[1],Q[4]=Q[2],Q[1]=De,Q[2]=ae,De=Q[3],ae=Q[4];break;case"q":Q[0]="Q",Q[1]+=Z,Q[2]+=fe,Q[3]+=Z,Q[4]+=fe;case"Q":De=Q[1],ae=Q[2],Z=Q[3],fe=Q[4];break;case"t":Q[0]="T",Q[1]+=Z,Q[2]+=fe;case"T":xe==="Q"?(De=2*Z-De,ae=2*fe-ae):(De=Z,ae=fe),Q[0]="Q",Z=Q[1],fe=Q[2],Q[1]=De,Q[2]=ae,Q[3]=Z,Q[4]=fe;break;case"a":Q[0]="A",Q[6]+=Z,Q[7]+=fe;case"A":he=!0,Se=Se.concat(h(Z,fe,Q)),Z=Q[6],fe=Q[7];break;case"z":case"Z":Z=X,fe=J;break;default:}he||Se.push(Q),xe=Q[0]}return Se}function f(q,Z,fe,G){return Math.sqrt((fe-q)*(fe-q)+(G-Z)*(G-Z))}function S(q){return q*q*q}function E(q){return 3*q*q*(1-q)}function _(q){return 3*q*(1-q)*(1-q)}function O(q){return(1-q)*(1-q)*(1-q)}function j(q,Z,fe,G,X,J,Q,ve){return function(he){var Se=S(he),xe=E(he),De=_(he),ae=O(he);return{x:Q*Se+X*xe+fe*De+q*ae,y:ve*Se+J*xe+G*De+Z*ae}}}function B(q,Z,fe,G,X,J,Q,ve){return function(he){var Se=1-he,xe=3*Se*Se*(fe-q)+6*Se*he*(X-fe)+3*he*he*(Q-X),De=3*Se*Se*(G-Z)+6*Se*he*(J-G)+3*he*he*(ve-J);return Math.atan2(De,xe)}}function V(q){return q*q}function H(q){return 2*q*(1-q)}function Y(q){return(1-q)*(1-q)}function se(q,Z,fe,G,X,J){return function(Q){var ve=V(Q),he=H(Q),Se=Y(Q);return{x:X*ve+fe*he+q*Se,y:J*ve+G*he+Z*Se}}}function ne(q,Z,fe,G,X,J){return function(Q){var ve=1-Q,he=2*ve*(fe-q)+2*Q*(X-fe),Se=2*ve*(G-Z)+2*Q*(J-G);return Math.atan2(Se,he)}}function be(q,Z,fe){var G={x:Z,y:fe},X,J=0,Q;for(Q=1;Q<=100;Q+=1)X=q(Q/100),J+=f(G.x,G.y,X.x,X.y),G=X;return J}function K(q,Z){for(var fe=0,G=0,X=q.iterator,J={x:q.x,y:q.y},Q,ve,he=.01,Se=q.angleFinder,xe;G<Z&&fe<=1&&he>1e-4;)Q=X(fe),xe=fe,ve=f(J.x,J.y,Q.x,Q.y),ve+G>Z?(he/=2,fe-=he):(J=Q,fe+=he,G+=ve);return Q.angle=Se(xe),Q}function Ce(q){for(var Z=0,fe=q.length,G,X=0,J=0,Q=0,ve=0,he=[],Se,xe,De,ae=0;ae<fe;ae++){switch(G=q[ae],xe={x:X,y:J,command:G[0]},G[0]){case"M":xe.length=0,Q=X=G[1],ve=J=G[2];break;case"L":xe.length=f(X,J,G[1],G[2]),X=G[1],J=G[2];break;case"C":Se=j(X,J,G[1],G[2],G[3],G[4],G[5],G[6]),De=B(X,J,G[1],G[2],G[3],G[4],G[5],G[6]),xe.iterator=Se,xe.angleFinder=De,xe.length=be(Se,X,J),X=G[5],J=G[6];break;case"Q":Se=se(X,J,G[1],G[2],G[3],G[4]),De=ne(X,J,G[1],G[2],G[3],G[4]),xe.iterator=Se,xe.angleFinder=De,xe.length=be(Se,X,J),X=G[3],J=G[4];break;case"Z":case"z":xe.destX=Q,xe.destY=ve,xe.length=f(X,J,Q,ve),X=Q,J=ve;break}Z+=xe.length,he.push(xe)}return he.push({length:Z,x:X,y:J}),he}function W(q,Z,fe){fe||(fe=Ce(q));for(var G=0;Z-fe[G].length>0&&G<fe.length-2;)Z-=fe[G].length,G++;var X=fe[G],J=Z/X.length,Q=X.command,ve=q[G],he;switch(Q){case"M":return{x:X.x,y:X.y,angle:0};case"Z":case"z":return he=new u.Point(X.x,X.y).lerp(new u.Point(X.destX,X.destY),J),he.angle=Math.atan2(X.destY-X.y,X.destX-X.x),he;case"L":return he=new u.Point(X.x,X.y).lerp(new u.Point(ve[1],ve[2]),J),he.angle=Math.atan2(ve[2]-X.y,ve[1]-X.x),he;case"C":return K(X,Z);case"Q":return K(X,Z)}}function Be(q){var Z=[],fe=[],G,X,J=u.rePathCommand,Q="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",ve="("+Q+")"+u.commaWsp,he="([01])"+u.commaWsp+"?",Se=ve+"?"+ve+"?"+ve+he+he+ve+"?("+Q+")",xe=new RegExp(Se,"g"),De,ae,ee;if(!q||!q.match)return Z;ee=q.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ie=0,ce,de=ee.length;ie<de;ie++){G=ee[ie],ae=G.slice(1).trim(),fe.length=0;var me=G.charAt(0);if(ce=[me],me.toLowerCase()==="a")for(var Ne;Ne=xe.exec(ae);)for(var Ve=1;Ve<Ne.length;Ve++)fe.push(Ne[Ve]);else for(;De=J.exec(ae);)fe.push(De[0]);for(var Ve=0,He=fe.length;Ve<He;Ve++)X=parseFloat(fe[Ve]),isNaN(X)||ce.push(X);var ye=s[me.toLowerCase()],We=m[me]||me;if(ce.length-1>ye)for(var Xe=1,qe=ce.length;Xe<qe;Xe+=ye)Z.push([me].concat(ce.slice(Xe,Xe+ye))),me=We;else Z.push(ce)}return Z}function Ie(q,Z){var fe=[],G,X=new u.Point(q[0].x,q[0].y),J=new u.Point(q[1].x,q[1].y),Q=q.length,ve=1,he=0,Se=Q>2;for(Z=Z||0,Se&&(ve=q[2].x<J.x?-1:q[2].x===J.x?0:1,he=q[2].y<J.y?-1:q[2].y===J.y?0:1),fe.push(["M",X.x-ve*Z,X.y-he*Z]),G=1;G<Q;G++){if(!X.eq(J)){var xe=X.midPointFrom(J);fe.push(["Q",X.x,X.y,xe.x,xe.y])}X=q[G],G+1<q.length&&(J=q[G+1])}return Se&&(ve=X.x>q[G-2].x?1:X.x===q[G-2].x?0:-1,he=X.y>q[G-2].y?1:X.y===q[G-2].y?0:-1),fe.push(["L",X.x+ve*Z,X.y+he*Z]),fe}function ze(q,Z,fe){return fe&&(Z=u.util.multiplyTransformMatrices(Z,[1,0,0,1,-fe.x,-fe.y])),q.map(function(G){for(var X=G.slice(0),J={},Q=1;Q<G.length-1;Q+=2)J.x=G[Q],J.y=G[Q+1],J=u.util.transformPoint(J,Z),X[Q]=J.x,X[Q+1]=J.y;return X})}function te(q,Z,fe,G,X,J,Q,ve,he){for(var Se=0,xe=0,De,ae=[],ee=n(ve-q,he-Z,fe,G,J,Q,X),ie=0,ce=ee.length;ie<ce;ie++)De=r(Se,xe,ee[ie][1],ee[ie][2],ee[ie][3],ee[ie][4],ee[ie][5],ee[ie][6]),ae.push({x:De[0].x+q,y:De[0].y+Z}),ae.push({x:De[1].x+q,y:De[1].y+Z}),Se=ee[ie][5],xe=ee[ie][6];return ae}function le(q,Z,fe,G){G=G.slice(0).unshift("X");var X=h(Z,fe,G);X.forEach(function(J){q.bezierCurveTo.apply(q,J.slice(1))})}u.util.joinPath=function(q){return q.map(function(Z){return Z.join(" ")}).join(" ")},u.util.parsePath=Be,u.util.makePathSimpler=b,u.util.getSmoothPathFromPoints=Ie,u.util.getPathSegmentsInfo=Ce,u.util.getBoundsOfCurve=r,u.util.getPointOnPath=W,u.util.transformPath=ze,u.util.fromArcToBeizers=h,u.util.getBoundsOfArc=te,u.util.drawArc=le}(),function(){var C=Array.prototype.slice;function s(r,h){for(var b=C.call(arguments,2),f=[],S=0,E=r.length;S<E;S++)f[S]=b.length?r[S][h].apply(r[S],b):r[S][h].call(r[S]);return f}function m(r,h){return l(r,h,function(b,f){return b>=f})}function v(r,h){return l(r,h,function(b,f){return b<f})}function n(r,h){for(var b=r.length;b--;)r[b]=h;return r}function l(r,h,b){if(!(!r||r.length===0)){var f=r.length-1,S=h?r[f][h]:r[f];if(h)for(;f--;)b(r[f][h],S)&&(S=r[f][h]);else for(;f--;)b(r[f],S)&&(S=r[f]);return S}}u.util.array={fill:n,invoke:s,min:v,max:m}}(),function(){function C(m,v,n){if(n)if(!u.isLikelyNode&&v instanceof Element)m=v;else if(v instanceof Array){m=[];for(var l=0,r=v.length;l<r;l++)m[l]=C({},v[l],n)}else if(v&&typeof v=="object")for(var h in v)h==="canvas"||h==="group"?m[h]=null:v.hasOwnProperty(h)&&(m[h]=C({},v[h],n));else m=v;else for(var h in v)m[h]=v[h];return m}function s(m,v){return C({},m,v)}u.util.object={extend:C,clone:s},u.util.object.extend(u.util,u.Observable)}(),function(){function C(l){return l.replace(/-+(.)?/g,function(r,h){return h?h.toUpperCase():""})}function s(l,r){return l.charAt(0).toUpperCase()+(r?l.slice(1):l.slice(1).toLowerCase())}function m(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function v(l){var r=0,h,b=[];for(r=0,h;r<l.length;r++)(h=n(l,r))!==!1&&b.push(h);return b}function n(l,r){var h=l.charCodeAt(r);if(isNaN(h))return"";if(h<55296||h>57343)return l.charAt(r);if(55296<=h&&h<=56319){if(l.length<=r+1)throw"High surrogate without following low surrogate";var b=l.charCodeAt(r+1);if(56320>b||b>57343)throw"High surrogate without following low surrogate";return l.charAt(r)+l.charAt(r+1)}if(r===0)throw"Low surrogate without preceding high surrogate";var f=l.charCodeAt(r-1);if(55296>f||f>56319)throw"Low surrogate without preceding high surrogate";return!1}u.util.string={camelize:C,capitalize:s,escapeXml:m,graphemeSplit:v}}(),function(){var C=Array.prototype.slice,s=function(){},m=function(){for(var h in{toString:1})if(h==="toString")return!1;return!0}(),v=function(h,b,f){for(var S in b)S in h.prototype&&typeof h.prototype[S]=="function"&&(b[S]+"").indexOf("callSuper")>-1?h.prototype[S]=function(E){return function(){var _=this.constructor.superclass;this.constructor.superclass=f;var O=b[E].apply(this,arguments);if(this.constructor.superclass=_,E!=="initialize")return O}}(S):h.prototype[S]=b[S],m&&(b.toString!==Object.prototype.toString&&(h.prototype.toString=b.toString),b.valueOf!==Object.prototype.valueOf&&(h.prototype.valueOf=b.valueOf))};function n(){}function l(h){for(var b=null,f=this;f.constructor.superclass;){var S=f.constructor.superclass.prototype[h];if(f[h]!==S){b=S;break}f=f.constructor.superclass.prototype}return b?arguments.length>1?b.apply(this,C.call(arguments,1)):b.call(this):console.log("tried to callSuper "+h+", method not found in prototype chain",this)}function r(){var h=null,b=C.call(arguments,0);typeof b[0]=="function"&&(h=b.shift());function f(){this.initialize.apply(this,arguments)}f.superclass=h,f.subclasses=[],h&&(n.prototype=h.prototype,f.prototype=new n,h.subclasses.push(f));for(var S=0,E=b.length;S<E;S++)v(f,b[S],h);return f.prototype.initialize||(f.prototype.initialize=s),f.prototype.constructor=f,f.prototype.callSuper=l,f}u.util.createClass=r}(),function(){var C=!!u.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];u.util.addListener=function(v,n,l,r){v&&v.addEventListener(n,l,C?!1:r)},u.util.removeListener=function(v,n,l,r){v&&v.removeEventListener(n,l,C?!1:r)};function m(v){var n=v.changedTouches;return n&&n[0]?n[0]:v}u.util.getPointer=function(v){var n=v.target,l=u.util.getScrollLeftTop(n),r=m(v);return{x:r.clientX+l.left,y:r.clientY+l.top}},u.util.isTouchEvent=function(v){return s.indexOf(v.type)>-1||v.pointerType==="touch"}}(),function(){function C(r,h){var b=r.style;if(!b)return r;if(typeof h=="string")return r.style.cssText+=";"+h,h.indexOf("opacity")>-1?l(r,h.match(/opacity:\s*(\d?\.?\d*)/)[1]):r;for(var f in h)if(f==="opacity")l(r,h[f]);else{var S=f==="float"||f==="cssFloat"?typeof b.styleFloat>"u"?"cssFloat":"styleFloat":f;b[S]=h[f]}return r}var s=u.document.createElement("div"),m=typeof s.style.opacity=="string",v=typeof s.style.filter=="string",n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(r){return r};m?l=function(r,h){return r.style.opacity=h,r}:v&&(l=function(r,h){var b=r.style;return r.currentStyle&&!r.currentStyle.hasLayout&&(b.zoom=1),n.test(b.filter)?(h=h>=.9999?"":"alpha(opacity="+h*100+")",b.filter=b.filter.replace(n,h)):b.filter+=" alpha(opacity="+h*100+")",r}),u.util.setStyle=C}(),function(){var C=Array.prototype.slice;function s(O){return typeof O=="string"?u.document.getElementById(O):O}var m,v=function(O){return C.call(O,0)};try{m=v(u.document.childNodes)instanceof Array}catch{}m||(v=function(O){for(var j=new Array(O.length),B=O.length;B--;)j[B]=O[B];return j});function n(O,j){var B=u.document.createElement(O);for(var V in j)V==="class"?B.className=j[V]:V==="for"?B.htmlFor=j[V]:B.setAttribute(V,j[V]);return B}function l(O,j){O&&(" "+O.className+" ").indexOf(" "+j+" ")===-1&&(O.className+=(O.className?" ":"")+j)}function r(O,j,B){return typeof j=="string"&&(j=n(j,B)),O.parentNode&&O.parentNode.replaceChild(j,O),j.appendChild(O),j}function h(O){for(var j=0,B=0,V=u.document.documentElement,H=u.document.body||{scrollLeft:0,scrollTop:0};O&&(O.parentNode||O.host)&&(O=O.parentNode||O.host,O===u.document?(j=H.scrollLeft||V.scrollLeft||0,B=H.scrollTop||V.scrollTop||0):(j+=O.scrollLeft||0,B+=O.scrollTop||0),!(O.nodeType===1&&O.style.position==="fixed")););return{left:j,top:B}}function b(O){var j,B=O&&O.ownerDocument,V={left:0,top:0},H={left:0,top:0},Y,se={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!B)return H;for(var ne in se)H[se[ne]]+=parseInt(f(O,ne),10)||0;return j=B.documentElement,typeof O.getBoundingClientRect<"u"&&(V=O.getBoundingClientRect()),Y=h(O),{left:V.left+Y.left-(j.clientLeft||0)+H.left,top:V.top+Y.top-(j.clientTop||0)+H.top}}var f;u.document.defaultView&&u.document.defaultView.getComputedStyle?f=function(O,j){var B=u.document.defaultView.getComputedStyle(O,null);return B?B[j]:void 0}:f=function(O,j){var B=O.style[j];return!B&&O.currentStyle&&(B=O.currentStyle[j]),B},function(){var O=u.document.documentElement.style,j="userSelect"in O?"userSelect":"MozUserSelect"in O?"MozUserSelect":"WebkitUserSelect"in O?"WebkitUserSelect":"KhtmlUserSelect"in O?"KhtmlUserSelect":"";function B(H){return typeof H.onselectstart<"u"&&(H.onselectstart=u.util.falseFunction),j?H.style[j]="none":typeof H.unselectable=="string"&&(H.unselectable="on"),H}function V(H){return typeof H.onselectstart<"u"&&(H.onselectstart=null),j?H.style[j]="":typeof H.unselectable=="string"&&(H.unselectable=""),H}u.util.makeElementUnselectable=B,u.util.makeElementSelectable=V}();function S(O){var j=u.jsdomImplForWrapper(O);return j._canvas||j._image}function E(O){if(u.isLikelyNode){var j=u.jsdomImplForWrapper(O);j&&(j._image=null,j._canvas=null,j._currentSrc=null,j._attributes=null,j._classList=null)}}function _(O,j){O.imageSmoothingEnabled=O.imageSmoothingEnabled||O.webkitImageSmoothingEnabled||O.mozImageSmoothingEnabled||O.msImageSmoothingEnabled||O.oImageSmoothingEnabled,O.imageSmoothingEnabled=j}u.util.setImageSmoothing=_,u.util.getById=s,u.util.toArray=v,u.util.addClass=l,u.util.makeElement=n,u.util.wrapElement=r,u.util.getScrollLeftTop=h,u.util.getElementOffset=b,u.util.getNodeCanvas=S,u.util.cleanUpJsdomNode=E}(),function(){function C(v,n){return v+(/\?/.test(v)?"&":"?")+n}function s(){}function m(v,n){n||(n={});var l=n.method?n.method.toUpperCase():"GET",r=n.onComplete||function(){},h=new u.window.XMLHttpRequest,b=n.body||n.parameters;return h.onreadystatechange=function(){h.readyState===4&&(r(h),h.onreadystatechange=s)},l==="GET"&&(b=null,typeof n.parameters=="string"&&(v=C(v,n.parameters))),h.open(l,v,!0),(l==="POST"||l==="PUT")&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(b),h}u.util.request=m}(),u.log=console.log,u.warn=console.warn,function(){function C(){return!1}function s(h,b,f,S){return-f*Math.cos(h/S*(Math.PI/2))+f+b}function m(h){var b=!1;return l(function(f){h||(h={});var S=f||+new Date,E=h.duration||500,_=S+E,O,j=h.onChange||C,B=h.abort||C,V=h.onComplete||C,H=h.easing||s,Y="startValue"in h?h.startValue:0,se="endValue"in h?h.endValue:100,ne=h.byValue||se-Y;h.onStart&&h.onStart(),function be(K){O=K||+new Date;var Ce=O>_?E:O-S,W=Ce/E,Be=H(Ce,Y,ne,E),Ie=Math.abs((Be-Y)/ne);if(!b){if(B(Be,Ie,W)){V(se,1,1);return}if(O>_){j(se,1,1),V(se,1,1);return}else j(Be,Ie,W),l(be)}}(S)}),function(){b=!0}}var v=u.window.requestAnimationFrame||u.window.webkitRequestAnimationFrame||u.window.mozRequestAnimationFrame||u.window.oRequestAnimationFrame||u.window.msRequestAnimationFrame||function(h){return u.window.setTimeout(h,1e3/60)},n=u.window.cancelAnimationFrame||u.window.clearTimeout;function l(){return v.apply(u.window,arguments)}function r(){return n.apply(u.window,arguments)}u.util.animate=m,u.util.requestAnimFrame=l,u.util.cancelAnimFrame=r}(),function(){function C(m,v,n){var l="rgba("+parseInt(m[0]+n*(v[0]-m[0]),10)+","+parseInt(m[1]+n*(v[1]-m[1]),10)+","+parseInt(m[2]+n*(v[2]-m[2]),10);return l+=","+(m&&v?parseFloat(m[3]+n*(v[3]-m[3])):1),l+=")",l}function s(m,v,n,l){var r=new u.Color(m).getSource(),h=new u.Color(v).getSource(),b=l.onComplete,f=l.onChange;return l=l||{},u.util.animate(u.util.object.extend(l,{duration:n||500,startValue:r,endValue:h,byValue:h,easing:function(S,E,_,O){var j=l.colorEasing?l.colorEasing(S,O):1-Math.cos(S/O*(Math.PI/2));return C(E,_,j)},onComplete:function(S,E,_){if(b)return b(C(h,h,0),E,_)},onChange:function(S,E,_){if(f){if(Array.isArray(S))return f(C(S,S,0),E,_);f(S,E,_)}}}))}u.util.animateColor=s}(),function(){function C(te,le,q,Z){return te<Math.abs(le)?(te=le,Z=q/4):le===0&&te===0?Z=q/(2*Math.PI)*Math.asin(1):Z=q/(2*Math.PI)*Math.asin(le/te),{a:te,c:le,p:q,s:Z}}function s(te,le,q){return te.a*Math.pow(2,10*(le-=1))*Math.sin((le*q-te.s)*(2*Math.PI)/te.p)}function m(te,le,q,Z){return q*((te=te/Z-1)*te*te+1)+le}function v(te,le,q,Z){return te/=Z/2,te<1?q/2*te*te*te+le:q/2*((te-=2)*te*te+2)+le}function n(te,le,q,Z){return q*(te/=Z)*te*te*te+le}function l(te,le,q,Z){return-q*((te=te/Z-1)*te*te*te-1)+le}function r(te,le,q,Z){return te/=Z/2,te<1?q/2*te*te*te*te+le:-q/2*((te-=2)*te*te*te-2)+le}function h(te,le,q,Z){return q*(te/=Z)*te*te*te*te+le}function b(te,le,q,Z){return q*((te=te/Z-1)*te*te*te*te+1)+le}function f(te,le,q,Z){return te/=Z/2,te<1?q/2*te*te*te*te*te+le:q/2*((te-=2)*te*te*te*te+2)+le}function S(te,le,q,Z){return-q*Math.cos(te/Z*(Math.PI/2))+q+le}function E(te,le,q,Z){return q*Math.sin(te/Z*(Math.PI/2))+le}function _(te,le,q,Z){return-q/2*(Math.cos(Math.PI*te/Z)-1)+le}function O(te,le,q,Z){return te===0?le:q*Math.pow(2,10*(te/Z-1))+le}function j(te,le,q,Z){return te===Z?le+q:q*(-Math.pow(2,-10*te/Z)+1)+le}function B(te,le,q,Z){return te===0?le:te===Z?le+q:(te/=Z/2,te<1?q/2*Math.pow(2,10*(te-1))+le:q/2*(-Math.pow(2,-10*--te)+2)+le)}function V(te,le,q,Z){return-q*(Math.sqrt(1-(te/=Z)*te)-1)+le}function H(te,le,q,Z){return q*Math.sqrt(1-(te=te/Z-1)*te)+le}function Y(te,le,q,Z){return te/=Z/2,te<1?-q/2*(Math.sqrt(1-te*te)-1)+le:q/2*(Math.sqrt(1-(te-=2)*te)+1)+le}function se(te,le,q,Z){var fe=1.70158,G=0,X=q;if(te===0)return le;if(te/=Z,te===1)return le+q;G||(G=Z*.3);var J=C(X,q,G,fe);return-s(J,te,Z)+le}function ne(te,le,q,Z){var fe=1.70158,G=0,X=q;if(te===0)return le;if(te/=Z,te===1)return le+q;G||(G=Z*.3);var J=C(X,q,G,fe);return J.a*Math.pow(2,-10*te)*Math.sin((te*Z-J.s)*(2*Math.PI)/J.p)+J.c+le}function be(te,le,q,Z){var fe=1.70158,G=0,X=q;if(te===0)return le;if(te/=Z/2,te===2)return le+q;G||(G=Z*.44999999999999996);var J=C(X,q,G,fe);return te<1?-.5*s(J,te,Z)+le:J.a*Math.pow(2,-10*(te-=1))*Math.sin((te*Z-J.s)*(2*Math.PI)/J.p)*.5+J.c+le}function K(te,le,q,Z,fe){return fe===void 0&&(fe=1.70158),q*(te/=Z)*te*((fe+1)*te-fe)+le}function Ce(te,le,q,Z,fe){return fe===void 0&&(fe=1.70158),q*((te=te/Z-1)*te*((fe+1)*te+fe)+1)+le}function W(te,le,q,Z,fe){return fe===void 0&&(fe=1.70158),te/=Z/2,te<1?q/2*(te*te*(((fe*=1.525)+1)*te-fe))+le:q/2*((te-=2)*te*(((fe*=1.525)+1)*te+fe)+2)+le}function Be(te,le,q,Z){return q-Ie(Z-te,0,q,Z)+le}function Ie(te,le,q,Z){return(te/=Z)<.36363636363636365?q*(7.5625*te*te)+le:te<.7272727272727273?q*(7.5625*(te-=.5454545454545454)*te+.75)+le:te<.9090909090909091?q*(7.5625*(te-=.8181818181818182)*te+.9375)+le:q*(7.5625*(te-=.9545454545454546)*te+.984375)+le}function ze(te,le,q,Z){return te<Z/2?Be(te*2,0,q,Z)*.5+le:Ie(te*2-Z,0,q,Z)*.5+q*.5+le}u.util.ease={easeInQuad:function(te,le,q,Z){return q*(te/=Z)*te+le},easeOutQuad:function(te,le,q,Z){return-q*(te/=Z)*(te-2)+le},easeInOutQuad:function(te,le,q,Z){return te/=Z/2,te<1?q/2*te*te+le:-q/2*(--te*(te-2)-1)+le},easeInCubic:function(te,le,q,Z){return q*(te/=Z)*te*te+le},easeOutCubic:m,easeInOutCubic:v,easeInQuart:n,easeOutQuart:l,easeInOutQuart:r,easeInQuint:h,easeOutQuint:b,easeInOutQuint:f,easeInSine:S,easeOutSine:E,easeInOutSine:_,easeInExpo:O,easeOutExpo:j,easeInOutExpo:B,easeInCirc:V,easeOutCirc:H,easeInOutCirc:Y,easeInElastic:se,easeOutElastic:ne,easeInOutElastic:be,easeInBack:K,easeOutBack:Ce,easeInOutBack:W,easeInBounce:Be,easeOutBounce:Ie,easeInOutBounce:ze}}(),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.extend,v=s.util.object.clone,n=s.util.toFixed,l=s.util.parseUnit,r=s.util.multiplyTransformMatrices,h=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],b=["symbol","image","marker","pattern","view","svg"],f=["pattern","defs","symbol","metadata","clipPath","mask","desc"],S=["symbol","g","a","svg","clipPath","defs"],E={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},O="font-size",j="clip-path";s.svgValidTagNamesRegEx=H(h),s.svgViewBoxElementsRegEx=H(b),s.svgInvalidAncestorsRegEx=H(f),s.svgValidParentsRegEx=H(S),s.cssRules={},s.gradientDefs={},s.clipPaths={};function B(G){return G in E?E[G]:G}function V(G,X,J,Q){var ve=Object.prototype.toString.call(X)==="[object Array]",he;if((G==="fill"||G==="stroke")&&X==="none")X="";else{if(G==="strokeUniform")return X==="non-scaling-stroke";if(G==="strokeDashArray")X==="none"?X=null:X=X.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(G==="transformMatrix")J&&J.transformMatrix?X=r(J.transformMatrix,s.parseTransformAttribute(X)):X=s.parseTransformAttribute(X);else if(G==="visible")X=X!=="none"&&X!=="hidden",J&&J.visible===!1&&(X=!1);else if(G==="opacity")X=parseFloat(X),J&&typeof J.opacity<"u"&&(X*=J.opacity);else if(G==="textAnchor")X=X==="start"?"left":X==="end"?"right":"center";else if(G==="charSpacing")he=l(X,Q)/Q*1e3;else if(G==="paintFirst"){var Se=X.indexOf("fill"),xe=X.indexOf("stroke"),X="fill";(Se>-1&&xe>-1&&xe<Se||Se===-1&&xe>-1)&&(X="stroke")}else{if(G==="href"||G==="xlink:href"||G==="font")return X;if(G==="imageSmoothing")return X==="optimizeQuality";he=ve?X.map(l):l(X,Q)}}return!ve&&isNaN(he)?X:he}function H(G){return new RegExp("^("+G.join("|")+")\\b","i")}function Y(G){for(var X in _)if(!(typeof G[_[X]]>"u"||G[X]==="")){if(typeof G[X]>"u"){if(!s.Object.prototype[X])continue;G[X]=s.Object.prototype[X]}if(G[X].indexOf("url(")!==0){var J=new s.Color(G[X]);G[X]=J.setAlpha(n(J.getAlpha()*G[_[X]],2)).toRgba()}}return G}function se(G,X){var J,Q=[],ve,he,Se;for(he=0,Se=X.length;he<Se;he++)J=X[he],ve=G.getElementsByTagName(J),Q=Q.concat(Array.prototype.slice.call(ve));return Q}s.parseTransformAttribute=function(){function G(ye,We){var Xe=s.util.cos(We[0]),qe=s.util.sin(We[0]),Et=0,ut=0;We.length===3&&(Et=We[1],ut=We[2]),ye[0]=Xe,ye[1]=qe,ye[2]=-qe,ye[3]=Xe,ye[4]=Et-(Xe*Et-qe*ut),ye[5]=ut-(qe*Et+Xe*ut)}function X(ye,We){var Xe=We[0],qe=We.length===2?We[1]:We[0];ye[0]=Xe,ye[3]=qe}function J(ye,We,Xe){ye[Xe]=Math.tan(s.util.degreesToRadians(We[0]))}function Q(ye,We){ye[4]=We[0],We.length===2&&(ye[5]=We[1])}var ve=s.iMatrix,he=s.reNum,Se=s.commaWsp,xe="(?:(skewX)\\s*\\(\\s*("+he+")\\s*\\))",De="(?:(skewY)\\s*\\(\\s*("+he+")\\s*\\))",ae="(?:(rotate)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+")"+Se+"("+he+"))?\\s*\\))",ee="(?:(scale)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+"))?\\s*\\))",ie="(?:(translate)\\s*\\(\\s*("+he+")(?:"+Se+"("+he+"))?\\s*\\))",ce="(?:(matrix)\\s*\\(\\s*("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")"+Se+"("+he+")\\s*\\))",de="(?:"+ce+"|"+ie+"|"+ee+"|"+ae+"|"+xe+"|"+De+")",me="(?:"+de+"(?:"+Se+"*"+de+")*)",Ne="^\\s*(?:"+me+"?)\\s*$",Ve=new RegExp(Ne),He=new RegExp(de,"g");return function(ye){var We=ve.concat(),Xe=[];if(!ye||ye&&!Ve.test(ye))return We;ye.replace(He,function(Et){var ut=new RegExp(de).exec(Et).filter(function(vt){return!!vt}),pt=ut[1],rt=ut.slice(2).map(parseFloat);switch(pt){case"translate":Q(We,rt);break;case"rotate":rt[0]=s.util.degreesToRadians(rt[0]),G(We,rt);break;case"scale":X(We,rt);break;case"skewX":J(We,rt,2);break;case"skewY":J(We,rt,1);break;case"matrix":We=rt;break}Xe.push(We.concat()),We=ve.concat()});for(var qe=Xe[0];Xe.length>1;)Xe.shift(),qe=s.util.multiplyTransformMatrices(qe,Xe[0]);return qe}}();function ne(G,X){var J,Q;G.replace(/;\s*$/,"").split(";").forEach(function(ve){var he=ve.split(":");J=he[0].trim().toLowerCase(),Q=he[1].trim(),X[J]=Q})}function be(G,X){var J,Q;for(var ve in G)typeof G[ve]>"u"||(J=ve.toLowerCase(),Q=G[ve],X[J]=Q)}function K(G,X){var J={};for(var Q in s.cssRules[X])if(Ce(G,Q.split(" ")))for(var ve in s.cssRules[X][Q])J[ve]=s.cssRules[X][Q][ve];return J}function Ce(G,X){var J,Q=!0;return J=Be(G,X.pop()),J&&X.length&&(Q=W(G,X)),J&&Q&&X.length===0}function W(G,X){for(var J,Q=!0;G.parentNode&&G.parentNode.nodeType===1&&X.length;)Q&&(J=X.pop()),G=G.parentNode,Q=Be(G,J);return X.length===0}function Be(G,X){var J=G.nodeName,Q=G.getAttribute("class"),ve=G.getAttribute("id"),he,Se;if(he=new RegExp("^"+J,"i"),X=X.replace(he,""),ve&&X.length&&(he=new RegExp("#"+ve+"(?![a-zA-Z\\-]+)","i"),X=X.replace(he,"")),Q&&X.length)for(Q=Q.split(" "),Se=Q.length;Se--;)he=new RegExp("\\."+Q[Se]+"(?![a-zA-Z\\-]+)","i"),X=X.replace(he,"");return X.length===0}function Ie(G,X){var J;if(G.getElementById&&(J=G.getElementById(X)),J)return J;var Q,ve,he,Se=G.getElementsByTagName("*");for(ve=0,he=Se.length;ve<he;ve++)if(Q=Se[ve],X===Q.getAttribute("id"))return Q}function ze(G){for(var X=se(G,["use","svg:use"]),J=0;X.length&&J<X.length;){var Q=X[J],ve=Q.getAttribute("xlink:href")||Q.getAttribute("href");if(ve===null)return;var he=ve.substr(1),Se=Q.getAttribute("x")||0,xe=Q.getAttribute("y")||0,De=Ie(G,he).cloneNode(!0),ae=(De.getAttribute("transform")||"")+" translate("+Se+", "+xe+")",ee,ie=X.length,ce,de,me,Ne,Ve=s.svgNS;if(le(De),/^svg$/i.test(De.nodeName)){var He=De.ownerDocument.createElementNS(Ve,"g");for(de=0,me=De.attributes,Ne=me.length;de<Ne;de++)ce=me.item(de),He.setAttributeNS(Ve,ce.nodeName,ce.nodeValue);for(;De.firstChild;)He.appendChild(De.firstChild);De=He}for(de=0,me=Q.attributes,Ne=me.length;de<Ne;de++)ce=me.item(de),!(ce.nodeName==="x"||ce.nodeName==="y"||ce.nodeName==="xlink:href"||ce.nodeName==="href")&&(ce.nodeName==="transform"?ae=ce.nodeValue+" "+ae:De.setAttribute(ce.nodeName,ce.nodeValue));De.setAttribute("transform",ae),De.setAttribute("instantiated_by_use","1"),De.removeAttribute("id"),ee=Q.parentNode,ee.replaceChild(De,Q),X.length===ie&&J++}}var te=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function le(G){if(!s.svgViewBoxElementsRegEx.test(G.nodeName))return{};var X=G.getAttribute("viewBox"),J=1,Q=1,ve=0,he=0,Se,xe,De,ae,ee=G.getAttribute("width"),ie=G.getAttribute("height"),ce=G.getAttribute("x")||0,de=G.getAttribute("y")||0,me=G.getAttribute("preserveAspectRatio")||"",Ne=!X||!(X=X.match(te)),Ve=!ee||!ie||ee==="100%"||ie==="100%",He=Ne&&Ve,ye={},We="",Xe=0,qe=0;if(ye.width=0,ye.height=0,ye.toBeParsed=He,Ne&&(ce||de)&&G.parentNode&&G.parentNode.nodeName!=="#document"&&(We=" translate("+l(ce)+" "+l(de)+") ",De=(G.getAttribute("transform")||"")+We,G.setAttribute("transform",De),G.removeAttribute("x"),G.removeAttribute("y")),He)return ye;if(Ne)return ye.width=l(ee),ye.height=l(ie),ye;if(ve=-parseFloat(X[1]),he=-parseFloat(X[2]),Se=parseFloat(X[3]),xe=parseFloat(X[4]),ye.minX=ve,ye.minY=he,ye.viewBoxWidth=Se,ye.viewBoxHeight=xe,Ve?(ye.width=Se,ye.height=xe):(ye.width=l(ee),ye.height=l(ie),J=ye.width/Se,Q=ye.height/xe),me=s.util.parsePreserveAspectRatioAttribute(me),me.alignX!=="none"&&(me.meetOrSlice==="meet"&&(Q=J=J>Q?Q:J),me.meetOrSlice==="slice"&&(Q=J=J>Q?J:Q),Xe=ye.width-Se*J,qe=ye.height-xe*J,me.alignX==="Mid"&&(Xe/=2),me.alignY==="Mid"&&(qe/=2),me.alignX==="Min"&&(Xe=0),me.alignY==="Min"&&(qe=0)),J===1&&Q===1&&ve===0&&he===0&&ce===0&&de===0)return ye;if((ce||de)&&G.parentNode.nodeName!=="#document"&&(We=" translate("+l(ce)+" "+l(de)+") "),De=We+" matrix("+J+" 0 0 "+Q+" "+(ve*J+Xe)+" "+(he*Q+qe)+") ",G.nodeName==="svg"){for(ae=G.ownerDocument.createElementNS(s.svgNS,"g");G.firstChild;)ae.appendChild(G.firstChild);G.appendChild(ae)}else ae=G,ae.removeAttribute("x"),ae.removeAttribute("y"),De=ae.getAttribute("transform")+De;return ae.setAttribute("transform",De),ye}function q(G,X){for(;G&&(G=G.parentNode);)if(G.nodeName&&X.test(G.nodeName.replace("svg:",""))&&!G.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(G,X,J,Q){if(G){ze(G);var ve=s.Object.__uid++,he,Se,xe=le(G),De=s.util.toArray(G.getElementsByTagName("*"));if(xe.crossOrigin=Q&&Q.crossOrigin,xe.svgUid=ve,De.length===0&&s.isLikelyNode){De=G.selectNodes('//*[name(.)!="svg"]');var ae=[];for(he=0,Se=De.length;he<Se;he++)ae[he]=De[he];De=ae}var ee=De.filter(function(ce){return le(ce),s.svgValidTagNamesRegEx.test(ce.nodeName.replace("svg:",""))&&!q(ce,s.svgInvalidAncestorsRegEx)});if(!ee||ee&&!ee.length){X&&X([],{});return}var ie={};De.filter(function(ce){return ce.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ce){var de=ce.getAttribute("id");ie[de]=s.util.toArray(ce.getElementsByTagName("*")).filter(function(me){return s.svgValidTagNamesRegEx.test(me.nodeName.replace("svg:",""))})}),s.gradientDefs[ve]=s.getGradientDefs(G),s.cssRules[ve]=s.getCSSRules(G),s.clipPaths[ve]=ie,s.parseElements(ee,function(ce,de){X&&(X(ce,xe,de,De),delete s.gradientDefs[ve],delete s.cssRules[ve],delete s.clipPaths[ve])},v(xe),J,Q)}};function Z(G,X){var J=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Q="xlink:href",ve=X.getAttribute(Q).substr(1),he=Ie(G,ve);if(he&&he.getAttribute(Q)&&Z(G,he),J.forEach(function(xe){he&&!X.hasAttribute(xe)&&he.hasAttribute(xe)&&X.setAttribute(xe,he.getAttribute(xe))}),!X.children.length)for(var Se=he.cloneNode(!0);Se.firstChild;)X.appendChild(Se.firstChild);X.removeAttribute(Q)}var fe=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");m(s,{parseFontDeclaration:function(G,X){var J=G.match(fe);if(J){var Q=J[1],ve=J[3],he=J[4],Se=J[5],xe=J[6];Q&&(X.fontStyle=Q),ve&&(X.fontWeight=isNaN(parseFloat(ve))?ve:parseFloat(ve)),he&&(X.fontSize=l(he)),xe&&(X.fontFamily=xe),Se&&(X.lineHeight=Se==="normal"?1:Se)}},getGradientDefs:function(G){var X=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],J=se(G,X),Q,ve=0,he={};for(ve=J.length;ve--;)Q=J[ve],Q.getAttribute("xlink:href")&&Z(G,Q),he[Q.getAttribute("id")]=Q;return he},parseAttributes:function(G,X,J){if(G){var Q,ve={},he,Se;typeof J>"u"&&(J=G.getAttribute("svgUid")),G.parentNode&&s.svgValidParentsRegEx.test(G.parentNode.nodeName)&&(ve=s.parseAttributes(G.parentNode,X,J));var xe=X.reduce(function(me,Ne){return Q=G.getAttribute(Ne),Q&&(me[Ne]=Q),me},{}),De=m(K(G,J),s.parseStyleAttribute(G));xe=m(xe,De),De[j]&&G.setAttribute(j,De[j]),he=Se=ve.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,xe[O]&&(xe[O]=he=l(xe[O],Se));var ae,ee,ie={};for(var ce in xe)ae=B(ce),ee=V(ae,xe[ce],ve,he),ie[ae]=ee;ie&&ie.font&&s.parseFontDeclaration(ie.font,ie);var de=m(ve,ie);return s.svgValidParentsRegEx.test(G.nodeName)?de:Y(de)}},parseElements:function(G,X,J,Q,ve){new s.ElementsParser(G,X,J,Q,ve).parse()},parseStyleAttribute:function(G){var X={},J=G.getAttribute("style");return J&&(typeof J=="string"?ne(J,X):be(J,X)),X},parsePointsAttribute:function(G){if(!G)return null;G=G.replace(/,/g," ").trim(),G=G.split(/\s+/);var X=[],J,Q;for(J=0,Q=G.length;J<Q;J+=2)X.push({x:parseFloat(G[J]),y:parseFloat(G[J+1])});return X},getCSSRules:function(G){var X=G.getElementsByTagName("style"),J,Q,ve={},he;for(J=0,Q=X.length;J<Q;J++){var Se=X[J].textContent;Se=Se.replace(/\/\*[\s\S]*?\*\//g,""),Se.trim()!==""&&(he=Se.match(/[^{]*\{[\s\S]*?\}/g),he=he.map(function(xe){return xe.trim()}),he.forEach(function(xe){var De=xe.match(/([\s\S]*?)\s*\{([^}]*)\}/),ae={},ee=De[2].trim(),ie=ee.replace(/;$/,"").split(/\s*;\s*/);for(J=0,Q=ie.length;J<Q;J++){var ce=ie[J].split(/\s*:\s*/),de=ce[0],me=ce[1];ae[de]=me}xe=De[1],xe.split(",").forEach(function(Ne){Ne=Ne.replace(/^svg/i,"").trim(),Ne!==""&&(ve[Ne]?s.util.object.extend(ve[Ne],ae):ve[Ne]=s.util.object.clone(ae))})}))}return ve},loadSVGFromURL:function(G,X,J,Q){G=G.replace(/^\n\s*/,"").trim(),new s.util.request(G,{method:"get",onComplete:ve});function ve(he){var Se=he.responseXML;if(!Se||!Se.documentElement)return X&&X(null),!1;s.parseSVGDocument(Se.documentElement,function(xe,De,ae,ee){X&&X(xe,De,ae,ee)},J,Q)}},loadSVGFromString:function(G,X,J,Q){var ve=new s.window.DOMParser,he=ve.parseFromString(G.trim(),"text/xml");s.parseSVGDocument(he.documentElement,function(Se,xe,De,ae){X(Se,xe,De,ae)},J,Q)}})}(x),u.ElementsParser=function(C,s,m,v,n,l){this.elements=C,this.callback=s,this.options=m,this.reviver=v,this.svgUid=m&&m.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(C){C.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},C.createObjects=function(){var s=this;this.elements.forEach(function(m,v){m.setAttribute("svgUid",s.svgUid),s.createObject(m,v)})},C.findTag=function(s){return u[u.util.string.capitalize(s.tagName.replace("svg:",""))]},C.createObject=function(s,m){var v=this.findTag(s);if(v&&v.fromElement)try{v.fromElement(s,this.createCallback(m,s),this.options)}catch(n){u.log(n)}else this.checkIfDone()},C.createCallback=function(s,m){var v=this;return function(n){var l;v.resolveGradient(n,m,"fill"),v.resolveGradient(n,m,"stroke"),n instanceof u.Image&&n._originalElement&&(l=n.parsePreserveAspectRatioAttribute(m)),n._removeTransformMatrix(l),v.resolveClipPath(n,m),v.reviver&&v.reviver(m,n),v.instances[s]=n,v.checkIfDone()}},C.extractPropertyDefinition=function(s,m,v){var n=s[m],l=this.regexUrl;if(l.test(n)){l.lastIndex=0;var r=l.exec(n)[1];return l.lastIndex=0,u[v][this.svgUid][r]}},C.resolveGradient=function(s,m,v){var n=this.extractPropertyDefinition(s,v,"gradientDefs");if(n){var l=m.getAttribute(v+"-opacity"),r=u.Gradient.fromElement(n,s,l,this.options);s.set(v,r)}},C.createClipPathCallback=function(s,m){return function(v){v._removeTransformMatrix(),v.fillRule=v.clipRule,m.push(v)}},C.resolveClipPath=function(s,m){var v=this.extractPropertyDefinition(s,"clipPath","clipPaths"),n,l,r,h,b,f;if(v){h=[],r=u.util.invertTransform(s.calcTransformMatrix());for(var S=v[0].parentNode,E=m;E.parentNode&&E.getAttribute("clip-path")!==s.clipPath;)E=E.parentNode;E.parentNode.appendChild(S);for(var _=0;_<v.length;_++)n=v[_],l=this.findTag(n),l.fromElement(n,this.createClipPathCallback(s,h),this.options);h.length===1?v=h[0]:v=new u.Group(h),b=u.util.multiplyTransformMatrices(r,v.calcTransformMatrix()),v.clipPath&&this.resolveClipPath(v,E);var f=u.util.qrDecompose(b);v.flipX=!1,v.flipY=!1,v.set("scaleX",f.scaleX),v.set("scaleY",f.scaleY),v.angle=f.angle,v.skewX=f.skewX,v.skewY=0,v.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),s.clipPath=v}else delete s.clipPath},C.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(u.ElementsParser.prototype),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=m;function m(v,n){this.x=v,this.y=n}m.prototype={type:"point",constructor:m,add:function(v){return new m(this.x+v.x,this.y+v.y)},addEquals:function(v){return this.x+=v.x,this.y+=v.y,this},scalarAdd:function(v){return new m(this.x+v,this.y+v)},scalarAddEquals:function(v){return this.x+=v,this.y+=v,this},subtract:function(v){return new m(this.x-v.x,this.y-v.y)},subtractEquals:function(v){return this.x-=v.x,this.y-=v.y,this},scalarSubtract:function(v){return new m(this.x-v,this.y-v)},scalarSubtractEquals:function(v){return this.x-=v,this.y-=v,this},multiply:function(v){return new m(this.x*v,this.y*v)},multiplyEquals:function(v){return this.x*=v,this.y*=v,this},divide:function(v){return new m(this.x/v,this.y/v)},divideEquals:function(v){return this.x/=v,this.y/=v,this},eq:function(v){return this.x===v.x&&this.y===v.y},lt:function(v){return this.x<v.x&&this.y<v.y},lte:function(v){return this.x<=v.x&&this.y<=v.y},gt:function(v){return this.x>v.x&&this.y>v.y},gte:function(v){return this.x>=v.x&&this.y>=v.y},lerp:function(v,n){return typeof n>"u"&&(n=.5),n=Math.max(Math.min(1,n),0),new m(this.x+(v.x-this.x)*n,this.y+(v.y-this.y)*n)},distanceFrom:function(v){var n=this.x-v.x,l=this.y-v.y;return Math.sqrt(n*n+l*l)},midPointFrom:function(v){return this.lerp(v)},min:function(v){return new m(Math.min(this.x,v.x),Math.min(this.y,v.y))},max:function(v){return new m(Math.max(this.x,v.x),Math.max(this.y,v.y))},toString:function(){return this.x+","+this.y},setXY:function(v,n){return this.x=v,this.y=n,this},setX:function(v){return this.x=v,this},setY:function(v){return this.y=v,this},setFromPoint:function(v){return this.x=v.x,this.y=v.y,this},swap:function(v){var n=this.x,l=this.y;this.x=v.x,this.y=v.y,v.x=n,v.y=l},clone:function(){return new m(this.x,this.y)}}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function m(v){this.status=v,this.points=[]}s.Intersection=m,s.Intersection.prototype={constructor:m,appendPoint:function(v){return this.points.push(v),this},appendPoints:function(v){return this.points=this.points.concat(v),this}},s.Intersection.intersectLineLine=function(v,n,l,r){var h,b=(r.x-l.x)*(v.y-l.y)-(r.y-l.y)*(v.x-l.x),f=(n.x-v.x)*(v.y-l.y)-(n.y-v.y)*(v.x-l.x),S=(r.y-l.y)*(n.x-v.x)-(r.x-l.x)*(n.y-v.y);if(S!==0){var E=b/S,_=f/S;0<=E&&E<=1&&0<=_&&_<=1?(h=new m("Intersection"),h.appendPoint(new s.Point(v.x+E*(n.x-v.x),v.y+E*(n.y-v.y)))):h=new m}else b===0||f===0?h=new m("Coincident"):h=new m("Parallel");return h},s.Intersection.intersectLinePolygon=function(v,n,l){var r=new m,h=l.length,b,f,S,E;for(E=0;E<h;E++)b=l[E],f=l[(E+1)%h],S=m.intersectLineLine(v,n,b,f),r.appendPoints(S.points);return r.points.length>0&&(r.status="Intersection"),r},s.Intersection.intersectPolygonPolygon=function(v,n){var l=new m,r=v.length,h;for(h=0;h<r;h++){var b=v[h],f=v[(h+1)%r],S=m.intersectLinePolygon(b,f,n);l.appendPoints(S.points)}return l.points.length>0&&(l.status="Intersection"),l},s.Intersection.intersectPolygonRectangle=function(v,n,l){var r=n.min(l),h=n.max(l),b=new s.Point(h.x,r.y),f=new s.Point(r.x,h.y),S=m.intersectLinePolygon(r,b,v),E=m.intersectLinePolygon(b,h,v),_=m.intersectLinePolygon(h,f,v),O=m.intersectLinePolygon(f,r,v),j=new m;return j.appendPoints(S.points),j.appendPoints(E.points),j.appendPoints(_.points),j.appendPoints(O.points),j.points.length>0&&(j.status="Intersection"),j}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function m(n){n?this._tryParsingColor(n):this.setSource([0,0,0,1])}s.Color=m,s.Color.prototype={_tryParsingColor:function(n){var l;n in m.colorNameMap&&(n=m.colorNameMap[n]),n==="transparent"&&(l=[255,255,255,0]),l||(l=m.sourceFromHex(n)),l||(l=m.sourceFromRgb(n)),l||(l=m.sourceFromHsl(n)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(n,l,r){n/=255,l/=255,r/=255;var h,b,f,S=s.util.array.max([n,l,r]),E=s.util.array.min([n,l,r]);if(f=(S+E)/2,S===E)h=b=0;else{var _=S-E;switch(b=f>.5?_/(2-S-E):_/(S+E),S){case n:h=(l-r)/_+(l<r?6:0);break;case l:h=(r-n)/_+2;break;case r:h=(n-l)/_+4;break}h/=6}return[Math.round(h*360),Math.round(b*100),Math.round(f*100)]},getSource:function(){return this._source},setSource:function(n){this._source=n},toRgb:function(){var n=this.getSource();return"rgb("+n[0]+","+n[1]+","+n[2]+")"},toRgba:function(){var n=this.getSource();return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"},toHsl:function(){var n=this.getSource(),l=this._rgbToHsl(n[0],n[1],n[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var n=this.getSource(),l=this._rgbToHsl(n[0],n[1],n[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+n[3]+")"},toHex:function(){var n=this.getSource(),l,r,h;return l=n[0].toString(16),l=l.length===1?"0"+l:l,r=n[1].toString(16),r=r.length===1?"0"+r:r,h=n[2].toString(16),h=h.length===1?"0"+h:h,l.toUpperCase()+r.toUpperCase()+h.toUpperCase()},toHexa:function(){var n=this.getSource(),l;return l=Math.round(n[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(n){var l=this.getSource();return l[3]=n,this.setSource(l),this},toGrayscale:function(){var n=this.getSource(),l=parseInt((n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),10),r=n[3];return this.setSource([l,l,l,r]),this},toBlackWhite:function(n){var l=this.getSource(),r=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),h=l[3];return n=n||127,r=Number(r)<Number(n)?0:255,this.setSource([r,r,r,h]),this},overlayWith:function(n){n instanceof m||(n=new m(n));var l=[],r=this.getAlpha(),h=.5,b=this.getSource(),f=n.getSource(),S;for(S=0;S<3;S++)l.push(Math.round(b[S]*(1-h)+f[S]*h));return l[3]=r,this.setSource(l),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function v(n,l,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?n+(l-n)*6*r:r<.5?l:r<.6666666666666666?n+(l-n)*(.6666666666666666-r)*6:n}s.Color.fromRgb=function(n){return m.fromSource(m.sourceFromRgb(n))},s.Color.sourceFromRgb=function(n){var l=n.match(m.reRGBa);if(l){var r=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),h=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),b=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(r,10),parseInt(h,10),parseInt(b,10),l[4]?parseFloat(l[4]):1]}},s.Color.fromRgba=m.fromRgb,s.Color.fromHsl=function(n){return m.fromSource(m.sourceFromHsl(n))},s.Color.sourceFromHsl=function(n){var l=n.match(m.reHSLa);if(l){var r=(parseFloat(l[1])%360+360)%360/360,h=parseFloat(l[2])/(/%$/.test(l[2])?100:1),b=parseFloat(l[3])/(/%$/.test(l[3])?100:1),f,S,E;if(h===0)f=S=E=b;else{var _=b<=.5?b*(h+1):b+h-b*h,O=b*2-_;f=v(O,_,r+.3333333333333333),S=v(O,_,r),E=v(O,_,r-.3333333333333333)}return[Math.round(f*255),Math.round(S*255),Math.round(E*255),l[4]?parseFloat(l[4]):1]}},s.Color.fromHsla=m.fromHsl,s.Color.fromHex=function(n){return m.fromSource(m.sourceFromHex(n))},s.Color.sourceFromHex=function(n){if(n.match(m.reHex)){var l=n.slice(n.indexOf("#")+1),r=l.length===3||l.length===4,h=l.length===8||l.length===4,b=r?l.charAt(0)+l.charAt(0):l.substring(0,2),f=r?l.charAt(1)+l.charAt(1):l.substring(2,4),S=r?l.charAt(2)+l.charAt(2):l.substring(4,6),E=h?r?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(b,16),parseInt(f,16),parseInt(S,16),parseFloat((parseInt(E,16)/255).toFixed(2))]}},s.Color.fromSource=function(n){var l=new m;return l.setSource(n),l}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=["e","se","s","sw","w","nw","n","ne","e"],v=["ns","nesw","ew","nwse"],n={},l="left",r="top",h="right",b="bottom",f="center",S={top:b,bottom:r,left:h,right:l,center:f},E=s.util.radiansToDegrees,_=Math.sign||function(ae){return(ae>0)-(ae<0)||+ae};function O(ae,ee){var ie=ae.angle+E(Math.atan2(ee.y,ee.x))+360;return Math.round(ie%360/45)}function j(ae,ee){var ie=ee.transform.target,ce=ie.canvas,de=s.util.object.clone(ee);de.target=ie,ce&&ce.fire("object:"+ae,de),ie.fire(ae,ee)}function B(ae,ee){var ie=ee.canvas,ce=ie.uniScaleKey,de=ae[ce];return ie.uniformScaling&&!de||!ie.uniformScaling&&de}function V(ae){return ae.originX===f&&ae.originY===f}function H(ae,ee,ie){var ce=ae.lockScalingX,de=ae.lockScalingY;return!!(ce&&de||!ee&&(ce||de)&&ie||ce&&ee==="x"||de&&ee==="y")}function Y(ae,ee,ie){var ce="not-allowed",de=B(ae,ie),me="";if(ee.x!==0&&ee.y===0?me="x":ee.x===0&&ee.y!==0&&(me="y"),H(ie,me,de))return ce;var Ne=O(ie,ee);return m[Ne]+"-resize"}function se(ae,ee,ie){var ce="not-allowed";if(ee.x!==0&&ie.lockSkewingY||ee.y!==0&&ie.lockSkewingX)return ce;var de=O(ie,ee)%4;return v[de]+"-resize"}function ne(ae,ee,ie){return ae[ie.canvas.altActionKey]?n.skewCursorStyleHandler(ae,ee,ie):n.scaleCursorStyleHandler(ae,ee,ie)}function be(ae,ee,ie){var ce=ae[ie.canvas.altActionKey];if(ee.x===0)return ce?"skewX":"scaleY";if(ee.y===0)return ce?"skewY":"scaleX"}function K(ae,ee,ie){return ie.lockRotation?"not-allowed":ee.cursorStyle}function Ce(ae,ee,ie,ce){return{e:ae,transform:ee,pointer:{x:ie,y:ce}}}function W(ae){return function(ee,ie,ce,de){var me=ie.target,Ne=me.getCenterPoint(),Ve=me.translateToOriginPoint(Ne,ie.originX,ie.originY),He=ae(ee,ie,ce,de);return me.setPositionByOrigin(Ve,ie.originX,ie.originY),He}}function Be(ae,ee){return function(ie,ce,de,me){var Ne=ee(ie,ce,de,me);return Ne&&j(ae,Ce(ie,ce,de,me)),Ne}}function Ie(ae,ee,ie,ce,de){var me=ae.target,Ne=me.controls[ae.corner],Ve=me.canvas.getZoom(),He=me.padding/Ve,ye=me.toLocalPoint(new s.Point(ce,de),ee,ie);return ye.x>=He&&(ye.x-=He),ye.x<=-He&&(ye.x+=He),ye.y>=He&&(ye.y-=He),ye.y<=He&&(ye.y+=He),ye.x-=Ne.offsetX,ye.y-=Ne.offsetY,ye}function ze(ae){return ae.flipX!==ae.flipY}function te(ae,ee,ie,ce,de){if(ae[ee]!==0){var me=ae._getTransformedDimensions()[ce],Ne=de/me*ae[ie];ae.set(ie,Ne)}}function le(ae,ee,ie,ce){var de=ee.target,me=de._getTransformedDimensions(0,de.skewY),Ne=Ie(ee,ee.originX,ee.originY,ie,ce),Ve=Math.abs(Ne.x*2)-me.x,He=de.skewX,ye;Ve<2?ye=0:(ye=E(Math.atan2(Ve/de.scaleX,me.y/de.scaleY)),ee.originX===l&&ee.originY===b&&(ye=-ye),ee.originX===h&&ee.originY===r&&(ye=-ye),ze(de)&&(ye=-ye));var We=He!==ye;if(We){var Xe=de._getTransformedDimensions().y;de.set("skewX",ye),te(de,"skewY","scaleY","y",Xe)}return We}function q(ae,ee,ie,ce){var de=ee.target,me=de._getTransformedDimensions(de.skewX,0),Ne=Ie(ee,ee.originX,ee.originY,ie,ce),Ve=Math.abs(Ne.y*2)-me.y,He=de.skewY,ye;Ve<2?ye=0:(ye=E(Math.atan2(Ve/de.scaleY,me.x/de.scaleX)),ee.originX===l&&ee.originY===b&&(ye=-ye),ee.originX===h&&ee.originY===r&&(ye=-ye),ze(de)&&(ye=-ye));var We=He!==ye;if(We){var Xe=de._getTransformedDimensions().x;de.set("skewY",ye),te(de,"skewX","scaleX","x",Xe)}return We}function Z(ae,ee,ie,ce){var de=ee.target,me=de.skewX,Ne,Ve=ee.originY;if(de.lockSkewingX)return!1;if(me===0){var He=Ie(ee,f,f,ie,ce);He.x>0?Ne=l:Ne=h}else me>0&&(Ne=Ve===r?l:h),me<0&&(Ne=Ve===r?h:l),ze(de)&&(Ne=Ne===l?h:l);ee.originX=Ne;var ye=Be("skewing",W(le));return ye(ae,ee,ie,ce)}function fe(ae,ee,ie,ce){var de=ee.target,me=de.skewY,Ne,Ve=ee.originX;if(de.lockSkewingY)return!1;if(me===0){var He=Ie(ee,f,f,ie,ce);He.y>0?Ne=r:Ne=b}else me>0&&(Ne=Ve===l?r:b),me<0&&(Ne=Ve===l?b:r),ze(de)&&(Ne=Ne===r?b:r);ee.originY=Ne;var ye=Be("skewing",W(q));return ye(ae,ee,ie,ce)}function G(ae,ee,ie,ce){var de=ee,me=de.target,Ne=me.translateToOriginPoint(me.getCenterPoint(),de.originX,de.originY);if(me.lockRotation)return!1;var Ve=Math.atan2(de.ey-Ne.y,de.ex-Ne.x),He=Math.atan2(ce-Ne.y,ie-Ne.x),ye=E(He-Ve+de.theta),We=!0;if(me.snapAngle>0){var Xe=me.snapAngle,qe=me.snapThreshold||Xe,Et=Math.ceil(ye/Xe)*Xe,ut=Math.floor(ye/Xe)*Xe;Math.abs(ye-ut)<qe?ye=ut:Math.abs(ye-Et)<qe&&(ye=Et)}return ye<0&&(ye=360+ye),ye%=360,We=me.angle!==ye,me.angle=ye,We}function X(ae,ee,ie,ce,de){de=de||{};var me=ee.target,Ne=me.lockScalingX,Ve=me.lockScalingY,He=de.by,ye,We,Xe,qe,Et=B(ae,me),ut=H(me,He,Et),pt,rt,vt=ee.gestureScale;if(ut)return!1;if(vt)We=ee.scaleX*vt,Xe=ee.scaleY*vt;else{if(ye=Ie(ee,ee.originX,ee.originY,ie,ce),pt=He!=="y"?_(ye.x):1,rt=He!=="x"?_(ye.y):1,ee.signX||(ee.signX=pt),ee.signY||(ee.signY=rt),me.lockScalingFlip&&(ee.signX!==pt||ee.signY!==rt))return!1;if(qe=me._getTransformedDimensions(),Et&&!He){var Nt=Math.abs(ye.x)+Math.abs(ye.y),Ht=ee.original,we=Math.abs(qe.x*Ht.scaleX/me.scaleX)+Math.abs(qe.y*Ht.scaleY/me.scaleY),Ae=Nt/we;We=Ht.scaleX*Ae,Xe=Ht.scaleY*Ae}else We=Math.abs(ye.x*me.scaleX/qe.x),Xe=Math.abs(ye.y*me.scaleY/qe.y);V(ee)&&(We*=2,Xe*=2),ee.signX!==pt&&He!=="y"&&(ee.originX=S[ee.originX],We*=-1,ee.signX=pt),ee.signY!==rt&&He!=="x"&&(ee.originY=S[ee.originY],Xe*=-1,ee.signY=rt)}var Fe=me.scaleX,Ue=me.scaleY;return He?(He==="x"&&me.set("scaleX",We),He==="y"&&me.set("scaleY",Xe)):(!Ne&&me.set("scaleX",We),!Ve&&me.set("scaleY",Xe)),Fe!==me.scaleX||Ue!==me.scaleY}function J(ae,ee,ie,ce){return X(ae,ee,ie,ce)}function Q(ae,ee,ie,ce){return X(ae,ee,ie,ce,{by:"x"})}function ve(ae,ee,ie,ce){return X(ae,ee,ie,ce,{by:"y"})}function he(ae,ee,ie,ce){return ae[ee.target.canvas.altActionKey]?n.skewHandlerX(ae,ee,ie,ce):n.scalingY(ae,ee,ie,ce)}function Se(ae,ee,ie,ce){return ae[ee.target.canvas.altActionKey]?n.skewHandlerY(ae,ee,ie,ce):n.scalingX(ae,ee,ie,ce)}function xe(ae,ee,ie,ce){var de=ee.target,me=Ie(ee,ee.originX,ee.originY,ie,ce),Ne=de.strokeWidth/(de.strokeUniform?de.scaleX:1),Ve=V(ee)?2:1,He=de.width,ye=Math.abs(me.x*Ve/de.scaleX)-Ne;return de.set("width",Math.max(ye,0)),He!==ye}function De(ae,ee,ie,ce){var de=ee.target,me=ie-ee.offsetX,Ne=ce-ee.offsetY,Ve=!de.get("lockMovementX")&&de.left!==me,He=!de.get("lockMovementY")&&de.top!==Ne;return Ve&&de.set("left",me),He&&de.set("top",Ne),(Ve||He)&&j("moving",Ce(ae,ee,ie,ce)),Ve||He}n.scaleCursorStyleHandler=Y,n.skewCursorStyleHandler=se,n.scaleSkewCursorStyleHandler=ne,n.rotationWithSnapping=Be("rotating",W(G)),n.scalingEqually=Be("scaling",W(J)),n.scalingX=Be("scaling",W(Q)),n.scalingY=Be("scaling",W(ve)),n.scalingYOrSkewingX=he,n.scalingXOrSkewingY=Se,n.changeWidth=Be("resizing",W(xe)),n.skewHandlerX=Z,n.skewHandlerY=fe,n.dragHandler=De,n.scaleOrSkewActionName=be,n.rotationStyleHandler=K,n.fireEvent=j,n.wrapWithFixedAnchor=W,n.wrapWithFireEvent=Be,n.getLocalPoint=Ie,s.controlsUtils=n}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.degreesToRadians,v=s.controlsUtils;function n(r,h,b,f,S){f=f||{};var E=this.sizeX||f.cornerSize||S.cornerSize,_=this.sizeY||f.cornerSize||S.cornerSize,O=typeof f.transparentCorners<"u"?f.transparentCorners:S.transparentCorners,j=O?"stroke":"fill",B=!O&&(f.cornerStrokeColor||S.cornerStrokeColor),V=h,H=b,Y;r.save(),r.fillStyle=f.cornerColor||S.cornerColor,r.strokeStyle=f.cornerStrokeColor||S.cornerStrokeColor,E>_?(Y=E,r.scale(1,_/E),H=b*E/_):_>E?(Y=_,r.scale(E/_,1),V=h*_/E):Y=E,r.lineWidth=1,r.beginPath(),r.arc(V,H,Y/2,0,2*Math.PI,!1),r[j](),B&&r.stroke(),r.restore()}function l(r,h,b,f,S){f=f||{};var E=this.sizeX||f.cornerSize||S.cornerSize,_=this.sizeY||f.cornerSize||S.cornerSize,O=typeof f.transparentCorners<"u"?f.transparentCorners:S.transparentCorners,j=O?"stroke":"fill",B=!O&&(f.cornerStrokeColor||S.cornerStrokeColor),V=E/2,H=_/2;r.save(),r.fillStyle=f.cornerColor||S.cornerColor,r.strokeStyle=f.cornerStrokeColor||S.cornerStrokeColor,r.lineWidth=1,r.translate(h,b),r.rotate(m(S.angle)),r[j+"Rect"](-V,-H,E,_),B&&r.strokeRect(-V,-H,E,_),r.restore()}v.renderCircleControl=n,v.renderSquareControl=l}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});function m(v){for(var n in v)this[n]=v[n]}s.Control=m,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(v,n){return n.cursorStyle},getActionName:function(v,n){return n.actionName},getVisibility:function(v,n){var l=v._controlsVisibility;return l&&typeof l[n]<"u"?l[n]:this.visible},setVisibility:function(v){this.visible=v},positionHandler:function(v,n){var l=s.util.transformPoint({x:this.x*v.x+this.offsetX,y:this.y*v.y+this.offsetY},n);return l},calcCornerCoords:function(v,n,l,r,h){var b,f,S,E,_=h?this.touchSizeX:this.sizeX,O=h?this.touchSizeY:this.sizeY;if(_&&O&&_!==O){var j=Math.atan2(O,_),B=Math.sqrt(_*_+O*O)/2,V=j-s.util.degreesToRadians(v),H=Math.PI/2-j-s.util.degreesToRadians(v);b=B*s.util.cos(V),f=B*s.util.sin(V),S=B*s.util.cos(H),E=B*s.util.sin(H)}else{var Y=_&&O?_:n;B=Y*.7071067812;var V=s.util.degreesToRadians(45-v);b=S=B*s.util.cos(V),f=E=B*s.util.sin(V)}return{tl:{x:l-E,y:r-S},tr:{x:l+b,y:r-f},bl:{x:l-b,y:r+f},br:{x:l+E,y:r+S}}},render:function(v,n,l,r,h){switch(r=r||{},r.cornerStyle||h.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,v,n,l,r,h);break;default:s.controlsUtils.renderSquareControl.call(this,v,n,l,r,h)}}}}(x),function(){function C(l,r){var h=l.getAttribute("style"),b=l.getAttribute("offset")||0,f,S,E,_;if(b=parseFloat(b)/(/%$/.test(b)?100:1),b=b<0?0:b>1?1:b,h){var O=h.split(/\s*;\s*/);for(O[O.length-1]===""&&O.pop(),_=O.length;_--;){var j=O[_].split(/\s*:\s*/),B=j[0].trim(),V=j[1].trim();B==="stop-color"?f=V:B==="stop-opacity"&&(E=V)}}return f||(f=l.getAttribute("stop-color")||"rgb(0,0,0)"),E||(E=l.getAttribute("stop-opacity")),f=new u.Color(f),S=f.getAlpha(),E=isNaN(parseFloat(E))?1:parseFloat(E),E*=S*r,{offset:b,color:f.toRgb(),opacity:E}}function s(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function m(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var v=u.util.object.clone;u.Gradient=u.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var r,h=this;Object.keys(l).forEach(function(b){h[b]=l[b]}),this.id?this.id+="_"+u.Object.__uid++:this.id=u.Object.__uid++,r={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(r.r1=l.coords.r1||0,r.r2=l.coords.r2||0),this.coords=r,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var r in l){var h=new u.Color(l[r]);this.colorStops.push({offset:parseFloat(r),color:h.toRgb(),opacity:h.getAlpha()})}return this},toObject:function(l){var r={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return u.util.populateWithProperties(this,r,l),r},toSVG:function(l,S){var h=v(this.coords,!0),b,f,S=S||{},E,_,O=v(this.colorStops,!0),j=h.r1>h.r2,B=this.gradientTransform?this.gradientTransform.concat():u.iMatrix.concat(),V=-this.offsetX,H=-this.offsetY,Y=!!S.additionalTransform,se=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(O.sort(function(W,Be){return W.offset-Be.offset}),se==="objectBoundingBox"?(V/=l.width,H/=l.height):(V+=l.width/2,H+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(V-=l.pathOffset.x,H-=l.pathOffset.y),B[4]-=V,B[5]-=H,_='id="SVGID_'+this.id+'" gradientUnits="'+se+'"',_+=' gradientTransform="'+(Y?S.additionalTransform+" ":"")+u.util.matrixToSVG(B)+'" ',this.type==="linear"?E=["<linearGradient ",_,' x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,`">
`]:this.type==="radial"&&(E=["<radialGradient ",_,' cx="',j?h.x1:h.x2,'" cy="',j?h.y1:h.y2,'" r="',j?h.r1:h.r2,'" fx="',j?h.x2:h.x1,'" fy="',j?h.y2:h.y1,`">
`]),this.type==="radial"){if(j)for(O=O.concat(),O.reverse(),b=0,f=O.length;b<f;b++)O[b].offset=1-O[b].offset;var ne=Math.min(h.r1,h.r2);if(ne>0){var be=Math.max(h.r1,h.r2),K=ne/be;for(b=0,f=O.length;b<f;b++)O[b].offset+=K*(1-O[b].offset)}}for(b=0,f=O.length;b<f;b++){var Ce=O[b];E.push("<stop ",'offset="',Ce.offset*100+"%",'" style="stop-color:',Ce.color,typeof Ce.opacity<"u"?";stop-opacity: "+Ce.opacity:";",`"/>
`)}return E.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),E.join("")},toLive:function(l){var r,h=u.util.object.clone(this.coords),b,f;if(this.type){for(this.type==="linear"?r=l.createLinearGradient(h.x1,h.y1,h.x2,h.y2):this.type==="radial"&&(r=l.createRadialGradient(h.x1,h.y1,h.r1,h.x2,h.y2,h.r2)),b=0,f=this.colorStops.length;b<f;b++){var S=this.colorStops[b].color,E=this.colorStops[b].opacity,_=this.colorStops[b].offset;typeof E<"u"&&(S=new u.Color(S).setAlpha(E).toRgba()),r.addColorStop(_,S)}return r}}}),u.util.object.extend(u.Gradient,{fromElement:function(l,r,h,b){var f=parseFloat(h)/(/%$/.test(h)?100:1);f=f<0?0:f>1?1:f,isNaN(f)&&(f=1);var S=l.getElementsByTagName("stop"),E,_=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",O=l.getAttribute("gradientTransform")||"",j=[],B,V,H=0,Y=0,se;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(E="linear",B=s(l)):(E="radial",B=m(l)),V=S.length;V--;)j.push(C(S[V],f));se=u.parseTransformAttribute(O),n(r,B,b,_),_==="pixels"&&(H=-r.left,Y=-r.top);var ne=new u.Gradient({id:l.getAttribute("id"),type:E,coords:B,colorStops:j,gradientUnits:_,gradientTransform:se,offsetX:H,offsetY:Y});return ne}});function n(l,r,h,b){var f,S;Object.keys(r).forEach(function(E){f=r[E],f==="Infinity"?S=1:f==="-Infinity"?S=0:(S=parseFloat(r[E],10),typeof f=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(f)&&(S*=.01,b==="pixels"&&((E==="x1"||E==="x2"||E==="r2")&&(S*=h.viewBoxWidth||h.width),(E==="y1"||E==="y2")&&(S*=h.viewBoxHeight||h.height)))),r[E]=S})}}(),function(){"use strict";var C=u.util.toFixed;u.Pattern=u.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,m){if(s||(s={}),this.id=u.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){m&&m(this);return}else{var v=this;this.source=u.util.createImage(),u.util.loadImage(s.source,function(n,l){v.source=n,m&&m(v,l)},null,this.crossOrigin)}},toObject:function(s){var m=u.Object.NUM_FRACTION_DIGITS,v,n;return typeof this.source.src=="string"?v=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(v=this.source.toDataURL()),n={type:"pattern",source:v,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:C(this.offsetX,m),offsetY:C(this.offsetY,m),patternTransform:this.patternTransform?this.patternTransform.concat():null},u.util.populateWithProperties(this,n,s),n},toSVG:function(s){var m=typeof this.source=="function"?this.source():this.source,v=m.width/s.width,n=m.height/s.height,l=this.offsetX/s.width,r=this.offsetY/s.height,h="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(n=1,r&&(n+=Math.abs(r))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(v=1,l&&(v+=Math.abs(l))),m.src?h=m.src:m.toDataURL&&(h=m.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+r+'" width="'+v+'" height="'+n+`">
<image x="0" y="0" width="`+m.width+'" height="'+m.height+'" xlink:href="'+h+`"></image>
</pattern>
`},setOptions:function(s){for(var m in s)this[m]=s[m]},toLive:function(s){var m=this.source;return!m||typeof m.src<"u"&&(!m.complete||m.naturalWidth===0||m.naturalHeight===0)?"":s.createPattern(m,this.repeat)}})}(),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(v){typeof v=="string"&&(v=this._parseShadow(v));for(var n in v)this[n]=v[n];this.id=s.Object.__uid++},_parseShadow:function(v){var n=v.trim(),l=s.Shadow.reOffsetsAndBlur.exec(n)||[],r=n.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(v){var n=40,l=40,r=s.Object.NUM_FRACTION_DIGITS,h=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-v.angle)),b=20,f=new s.Color(this.color);return v.width&&v.height&&(n=m((Math.abs(h.x)+this.blur)/v.width,r)*100+b,l=m((Math.abs(h.y)+this.blur)/v.height,r)*100+b),v.flipX&&(h.x*=-1),v.flipY&&(h.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+n+'%" width="'+(100+2*n)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+m(this.blur?this.blur/2:0,r)+`"></feGaussianBlur>
	<feOffset dx="`+m(h.x,r)+'" dy="'+m(h.y,r)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+f.toRgb()+'" flood-opacity="'+f.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var v={},n=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==n[l]&&(v[l]=this[l])},this),v}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(x),function(){"use strict";if(u.StaticCanvas){u.warn("fabric.StaticCanvas is already defined.");return}var C=u.util.object.extend,s=u.util.getElementOffset,m=u.util.removeFromArray,v=u.util.toFixed,n=u.util.transformPoint,l=u.util.invertTransform,r=u.util.getNodeCanvas,h=u.util.createCanvasElement,b=new Error("Could not initialize `canvas` element");u.StaticCanvas=u.util.createClass(u.CommonMethods,{initialize:function(f,S){S||(S={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(f,S)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:u.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(f,S){var E=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(f),this._initOptions(S),this.interactive||this._initRetinaScaling(),S.overlayImage&&this.setOverlayImage(S.overlayImage,E),S.backgroundImage&&this.setBackgroundImage(S.backgroundImage,E),S.backgroundColor&&this.setBackgroundColor(S.backgroundColor,E),S.overlayColor&&this.setOverlayColor(S.overlayColor,E),this.calcOffset()},_isRetinaScaling:function(){return u.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?u.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var f=u.devicePixelRatio;this.__initRetinaScaling(f,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(f,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(f,S,E){S.setAttribute("width",this.width*f),S.setAttribute("height",this.height*f),E.scale(f,f)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(f,S,E){return this.__setBgOverlayImage("overlayImage",f,S,E)},setBackgroundImage:function(f,S,E){return this.__setBgOverlayImage("backgroundImage",f,S,E)},setOverlayColor:function(f,S){return this.__setBgOverlayColor("overlayColor",f,S)},setBackgroundColor:function(f,S){return this.__setBgOverlayColor("backgroundColor",f,S)},__setBgOverlayImage:function(f,S,E,_){return typeof S=="string"?u.util.loadImage(S,function(O,j){if(O){var B=new u.Image(O,_);this[f]=B,B.canvas=this}E&&E(O,j)},this,_&&_.crossOrigin):(_&&S.setOptions(_),this[f]=S,S&&(S.canvas=this),E&&E(S,!1)),this},__setBgOverlayColor:function(f,S,E){return this[f]=S,this._initGradient(S,f),this._initPattern(S,f,E),this},_createCanvasElement:function(){var f=h();if(!f||(f.style||(f.style={}),typeof f.getContext>"u"))throw b;return f},_initOptions:function(f){var S=this.lowerCanvasEl;this._setOptions(f),this.width=this.width||parseInt(S.width,10)||0,this.height=this.height||parseInt(S.height,10)||0,this.lowerCanvasEl.style&&(S.width=this.width,S.height=this.height,S.style.width=this.width+"px",S.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(f){f&&f.getContext?this.lowerCanvasEl=f:this.lowerCanvasEl=u.util.getById(f)||this._createCanvasElement(),u.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(f,S){return this.setDimensions({width:f},S)},setHeight:function(f,S){return this.setDimensions({height:f},S)},setDimensions:function(f,S){var E;S=S||{};for(var _ in f)E=f[_],S.cssOnly||(this._setBackstoreDimension(_,f[_]),E+="px",this.hasLostContext=!0),S.backstoreOnly||this._setCssDimension(_,E);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),S.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(f,S){return this.lowerCanvasEl[f]=S,this.upperCanvasEl&&(this.upperCanvasEl[f]=S),this.cacheCanvasEl&&(this.cacheCanvasEl[f]=S),this[f]=S,this},_setCssDimension:function(f,S){return this.lowerCanvasEl.style[f]=S,this.upperCanvasEl&&(this.upperCanvasEl.style[f]=S),this.wrapperEl&&(this.wrapperEl.style[f]=S),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(f){var S=this._activeObject,E=this.backgroundImage,_=this.overlayImage,O,j,B;for(this.viewportTransform=f,j=0,B=this._objects.length;j<B;j++)O=this._objects[j],O.group||O.setCoords(!0);return S&&S.setCoords(),E&&E.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(f,S){var E=f,_=this.viewportTransform.slice(0);f=n(f,l(this.viewportTransform)),_[0]=S,_[3]=S;var O=n(f,_);return _[4]+=E.x-O.x,_[5]+=E.y-O.y,this.setViewportTransform(_)},setZoom:function(f){return this.zoomToPoint(new u.Point(0,0),f),this},absolutePan:function(f){var S=this.viewportTransform.slice(0);return S[4]=-f.x,S[5]=-f.y,this.setViewportTransform(S)},relativePan:function(f){return this.absolutePan(new u.Point(-f.x-this.viewportTransform[4],-f.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(f){this.stateful&&f.setupState(),f._set("canvas",this),f.setCoords(),this.fire("object:added",{target:f}),f.fire("added")},_onObjectRemoved:function(f){this.fire("object:removed",{target:f}),f.fire("removed"),delete f.canvas},clearContext:function(f){return f.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var f=this.contextContainer;return this.renderCanvas(f,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=u.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var f={},S=this.width,E=this.height,_=l(this.viewportTransform);return f.tl=n({x:0,y:0},_),f.br=n({x:S,y:E},_),f.tr=new u.Point(f.br.x,f.tl.y),f.bl=new u.Point(f.tl.x,f.br.y),this.vptCoords=f,f},cancelRequestedRender:function(){this.isRendering&&(u.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(f,S){var E=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(f),u.util.setImageSmoothing(f,this.imageSmoothingEnabled),this.fire("before:render",{ctx:f}),this._renderBackground(f),f.save(),f.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._renderObjects(f,S),f.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(f)),this._renderOverlay(f),this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),this.fire("after:render",{ctx:f})},drawClipPathOnCanvas:function(f){var S=this.viewportTransform,E=this.clipPath;f.save(),f.transform(S[0],S[1],S[2],S[3],S[4],S[5]),f.globalCompositeOperation="destination-in",E.transform(f),f.scale(1/E.zoomX,1/E.zoomY),f.drawImage(E._cacheCanvas,-E.cacheTranslationX,-E.cacheTranslationY),f.restore()},_renderObjects:function(f,S){var E,_;for(E=0,_=S.length;E<_;++E)S[E]&&S[E].render(f)},_renderBackgroundOrOverlay:function(f,S){var E=this[S+"Color"],_=this[S+"Image"],O=this.viewportTransform,j=this[S+"Vpt"];if(!(!E&&!_)){if(E){f.save(),f.beginPath(),f.moveTo(0,0),f.lineTo(this.width,0),f.lineTo(this.width,this.height),f.lineTo(0,this.height),f.closePath(),f.fillStyle=E.toLive?E.toLive(f,this):E,j&&f.transform(O[0],O[1],O[2],O[3],O[4],O[5]),f.transform(1,0,0,1,E.offsetX||0,E.offsetY||0);var B=E.gradientTransform||E.patternTransform;B&&f.transform(B[0],B[1],B[2],B[3],B[4],B[5]),f.fill(),f.restore()}_&&(f.save(),j&&f.transform(O[0],O[1],O[2],O[3],O[4],O[5]),_.render(f),f.restore())}},_renderBackground:function(f){this._renderBackgroundOrOverlay(f,"background")},_renderOverlay:function(f){this._renderBackgroundOrOverlay(f,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(f){return this._centerObject(f,new u.Point(this.getCenter().left,f.getCenterPoint().y))},centerObjectV:function(f){return this._centerObject(f,new u.Point(f.getCenterPoint().x,this.getCenter().top))},centerObject:function(f){var S=this.getCenter();return this._centerObject(f,new u.Point(S.left,S.top))},viewportCenterObject:function(f){var S=this.getVpCenter();return this._centerObject(f,S)},viewportCenterObjectH:function(f){var S=this.getVpCenter();return this._centerObject(f,new u.Point(S.x,f.getCenterPoint().y)),this},viewportCenterObjectV:function(f){var S=this.getVpCenter();return this._centerObject(f,new u.Point(f.getCenterPoint().x,S.y))},getVpCenter:function(){var f=this.getCenter(),S=l(this.viewportTransform);return n({x:f.left,y:f.top},S)},_centerObject:function(f,S){return f.setPositionByOrigin(S,"center","center"),f.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(f){return this.toDatalessObject(f)},toObject:function(f){return this._toObjectMethod("toObject",f)},toDatalessObject:function(f){return this._toObjectMethod("toDatalessObject",f)},_toObjectMethod:function(f,S){var E=this.clipPath,_={version:u.version,objects:this._toObjects(f,S)};return E&&!E.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,f,S)),C(_,this.__serializeBgOverlay(f,S)),u.util.populateWithProperties(this,_,S),_},_toObjects:function(f,S){return this._objects.filter(function(E){return!E.excludeFromExport}).map(function(E){return this._toObject(E,f,S)},this)},_toObject:function(f,S,E){var _;this.includeDefaultValues||(_=f.includeDefaultValues,f.includeDefaultValues=!1);var O=f[S](E);return this.includeDefaultValues||(f.includeDefaultValues=_),O},__serializeBgOverlay:function(f,S){var E={},_=this.backgroundImage,O=this.overlayImage,j=this.backgroundColor,B=this.overlayColor;return j&&j.toObject?j.excludeFromExport||(E.background=j.toObject(S)):j&&(E.background=j),B&&B.toObject?B.excludeFromExport||(E.overlay=B.toObject(S)):B&&(E.overlay=B),_&&!_.excludeFromExport&&(E.backgroundImage=this._toObject(_,f,S)),O&&!O.excludeFromExport&&(E.overlayImage=this._toObject(O,f,S)),E},svgViewportTransformation:!0,toSVG:function(f,S){f||(f={}),f.reviver=S;var E=[];return this._setSVGPreamble(E,f),this._setSVGHeader(E,f),this.clipPath&&E.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(E,"background"),this._setSVGBgOverlayImage(E,"backgroundImage",S),this._setSVGObjects(E,S),this.clipPath&&E.push(`</g>
`),this._setSVGBgOverlayColor(E,"overlay"),this._setSVGBgOverlayImage(E,"overlayImage",S),E.push("</svg>"),E.join("")},_setSVGPreamble:function(f,S){S.suppressPreamble||f.push('<?xml version="1.0" encoding="',S.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(f,S){var E=S.width||this.width,_=S.height||this.height,O,j='viewBox="0 0 '+this.width+" "+this.height+'" ',B=u.Object.NUM_FRACTION_DIGITS;S.viewBox?j='viewBox="'+S.viewBox.x+" "+S.viewBox.y+" "+S.viewBox.width+" "+S.viewBox.height+'" ':this.svgViewportTransformation&&(O=this.viewportTransform,j='viewBox="'+v(-O[4]/O[0],B)+" "+v(-O[5]/O[3],B)+" "+v(this.width/O[0],B)+" "+v(this.height/O[3],B)+'" '),f.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',E,'" ','height="',_,'" ',j,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",u.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(S),`</defs>
`)},createSVGClipPathMarkup:function(f){var S=this.clipPath;return S?(S.clipPathId="CLIPPATH_"+u.Object.__uid++,'<clipPath id="'+S.clipPathId+`" >
`+this.clipPath.toClipPathSVG(f.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var f=this,S=["background","overlay"].map(function(E){var _=f[E+"Color"];if(_&&_.toLive){var O=f[E+"Vpt"],j=f.viewportTransform,B={width:f.width/(O?j[0]:1),height:f.height/(O?j[3]:1)};return _.toSVG(B,{additionalTransform:O?u.util.matrixToSVG(j):""})}});return S.join("")},createSVGFontFacesMarkup:function(){var f="",S={},E,_,O,j,B,V,H,Y,se,ne=u.fontPaths,be=[];for(this._objects.forEach(function Ce(W){be.push(W),W._objects&&W._objects.forEach(Ce)}),Y=0,se=be.length;Y<se;Y++)if(E=be[Y],_=E.fontFamily,!(E.type.indexOf("text")===-1||S[_]||!ne[_])&&(S[_]=!0,!!E.styles)){O=E.styles;for(B in O){j=O[B];for(H in j)V=j[H],_=V.fontFamily,!S[_]&&ne[_]&&(S[_]=!0)}}for(var K in S)f+=[`		@font-face {
`,"			font-family: '",K,`';
`,"			src: url('",ne[K],`');
`,`		}
`].join("");return f&&(f=['	<style type="text/css">',`<![CDATA[
`,f,"]]>",`</style>
`].join("")),f},_setSVGObjects:function(f,S){var E,_,O,j=this._objects;for(_=0,O=j.length;_<O;_++)E=j[_],!E.excludeFromExport&&this._setSVGObject(f,E,S)},_setSVGObject:function(f,S,E){f.push(S.toSVG(E))},_setSVGBgOverlayImage:function(f,S,E){this[S]&&!this[S].excludeFromExport&&this[S].toSVG&&f.push(this[S].toSVG(E))},_setSVGBgOverlayColor:function(f,S){var E=this[S+"Color"],_=this.viewportTransform,O=this.width,j=this.height;if(E)if(E.toLive){var B=E.repeat,V=u.util.invertTransform(_),H=this[S+"Vpt"],Y=H?u.util.matrixToSVG(V):"";f.push('<rect transform="'+Y+" translate(",O/2,",",j/2,')"',' x="',E.offsetX-O/2,'" y="',E.offsetY-j/2,'" ','width="',B==="repeat-y"||B==="no-repeat"?E.source.width:O,'" height="',B==="repeat-x"||B==="no-repeat"?E.source.height:j,'" fill="url(#SVGID_'+E.id+')"',`></rect>
`)}else f.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',E,'"',`></rect>
`)},sendToBack:function(f){if(!f)return this;var S=this._activeObject,E,_,O;if(f===S&&f.type==="activeSelection")for(O=S._objects,E=O.length;E--;)_=O[E],m(this._objects,_),this._objects.unshift(_);else m(this._objects,f),this._objects.unshift(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(f){if(!f)return this;var S=this._activeObject,E,_,O;if(f===S&&f.type==="activeSelection")for(O=S._objects,E=0;E<O.length;E++)_=O[E],m(this._objects,_),this._objects.push(_);else m(this._objects,f),this._objects.push(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(f,S){if(!f)return this;var E=this._activeObject,_,O,j,B,V,H=0;if(f===E&&f.type==="activeSelection")for(V=E._objects,_=0;_<V.length;_++)O=V[_],j=this._objects.indexOf(O),j>0+H&&(B=j-1,m(this._objects,O),this._objects.splice(B,0,O)),H++;else j=this._objects.indexOf(f),j!==0&&(B=this._findNewLowerIndex(f,j,S),m(this._objects,f),this._objects.splice(B,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(f,S,E){var _,O;if(E)for(_=S,O=S-1;O>=0;--O){var j=f.intersectsWithObject(this._objects[O])||f.isContainedWithinObject(this._objects[O])||this._objects[O].isContainedWithinObject(f);if(j){_=O;break}}else _=S-1;return _},bringForward:function(f,S){if(!f)return this;var E=this._activeObject,_,O,j,B,V,H=0;if(f===E&&f.type==="activeSelection")for(V=E._objects,_=V.length;_--;)O=V[_],j=this._objects.indexOf(O),j<this._objects.length-1-H&&(B=j+1,m(this._objects,O),this._objects.splice(B,0,O)),H++;else j=this._objects.indexOf(f),j!==this._objects.length-1&&(B=this._findNewUpperIndex(f,j,S),m(this._objects,f),this._objects.splice(B,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(f,S,E){var _,O,j;if(E)for(_=S,O=S+1,j=this._objects.length;O<j;++O){var B=f.intersectsWithObject(this._objects[O])||f.isContainedWithinObject(this._objects[O])||this._objects[O].isContainedWithinObject(f);if(B){_=O;break}}else _=S+1;return _},moveTo:function(f,S){return m(this._objects,f),this._objects.splice(S,0,f),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(u.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(f){f.dispose&&f.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),u.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),C(u.StaticCanvas.prototype,u.Observable),C(u.StaticCanvas.prototype,u.Collection),C(u.StaticCanvas.prototype,u.DataURLExporter),C(u.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(f){var S=h();if(!S||!S.getContext)return null;var E=S.getContext("2d");if(!E)return null;switch(f){case"setLineDash":return typeof E.setLineDash<"u";default:return null}}}),u.StaticCanvas.prototype.toJSON=u.StaticCanvas.prototype.toObject,u.isLikelyNode&&(u.StaticCanvas.prototype.createPNGStream=function(){var f=r(this.lowerCanvasEl);return f&&f.createPNGStream()},u.StaticCanvas.prototype.createJPEGStream=function(f){var S=r(this.lowerCanvasEl);return S&&S.createJPEGStream(f)})}(),u.BaseBrush=u.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var C=this.canvas.contextTop;C.strokeStyle=this.color,C.lineWidth=this.width,C.lineCap=this.strokeLineCap,C.miterLimit=this.strokeMiterLimit,C.lineJoin=this.strokeLineJoin,C.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(C){var s=this.canvas.viewportTransform;C.save(),C.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var C=this.canvas,s=this.shadow,m=C.contextTop,v=C.getZoom();C&&C._isRetinaScaling()&&(v*=u.devicePixelRatio),m.shadowColor=s.color,m.shadowBlur=s.blur*v,m.shadowOffsetX=s.offsetX*v,m.shadowOffsetY=s.offsetY*v}},needsFullRender:function(){var C=new u.Color(this.color);return C.getAlpha()<1||!!this.shadow},_resetShadow:function(){var C=this.canvas.contextTop;C.shadowColor="",C.shadowBlur=C.shadowOffsetX=C.shadowOffsetY=0},_isOutSideCanvas:function(C){return C.x<0||C.x>this.canvas.getWidth()||C.y<0||C.y>this.canvas.getHeight()}}),function(){u.PencilBrush=u.util.createClass(u.BaseBrush,{decimate:.4,initialize:function(C){this.canvas=C,this._points=[]},_drawSegment:function(C,s,m){var v=s.midPointFrom(m);return C.quadraticCurveTo(s.x,s.y,v.x,v.y),v},onMouseDown:function(C,s){this.canvas._isMainEvent(s.e)&&(this._prepareForDrawing(C),this._captureDrawingPath(C),this._render())},onMouseMove:function(C,s){if(this.canvas._isMainEvent(s.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(C))&&this._captureDrawingPath(C)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var m=this._points,v=m.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,m[v-2],m[v-1],!0),n.stroke(),n.restore()}},onMouseUp:function(C){return this.canvas._isMainEvent(C.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(C){var s=new u.Point(C.x,C.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(C){return this._points.length>1&&C.eq(this._points[this._points.length-1])?!1:(this._points.push(C),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(C){var s=new u.Point(C.x,C.y);return this._addPoint(s)},_render:function(){var C=this.canvas.contextTop,s,m,v=this._points[0],n=this._points[1];if(this._saveAndTransform(C),C.beginPath(),this._points.length===2&&v.x===n.x&&v.y===n.y){var l=this.width/1e3;v=new u.Point(v.x,v.y),n=new u.Point(n.x,n.y),v.x-=l,n.x+=l}for(C.moveTo(v.x,v.y),s=1,m=this._points.length;s<m;s++)this._drawSegment(C,v,n),v=this._points[s],n=this._points[s+1];C.lineTo(v.x,v.y),C.stroke(),C.restore()},convertPointsToSVGPath:function(C){var s=this.width/1e3;return u.util.getSmoothPathFromPoints(C,s)},_isEmptySVGPath:function(C){var s=u.util.joinPath(C);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(C){var s=new u.Path(C,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new u.Shadow(this.shadow)),s},decimatePoints:function(C,s){if(C.length<=2)return C;var m=this.canvas.getZoom(),v=Math.pow(s/m,2),n,l=C.length-1,r=C[0],h=[r],b;for(n=1;n<l-1;n++)b=Math.pow(r.x-C[n].x,2)+Math.pow(r.y-C[n].y,2),b>=v&&(r=C[n],h.push(r));return h.push(C[l]),h},_finalizeAndAddPath:function(){var C=this.canvas.contextTop;C.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var m=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.requestRenderAll(),m.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:m})}})}(),u.CircleBrush=u.util.createClass(u.BaseBrush,{width:10,initialize:function(C){this.canvas=C,this.points=[]},drawDot:function(C){var s=this.addPoint(C),m=this.canvas.contextTop;this._saveAndTransform(m),this.dot(m,s),m.restore()},dot:function(C,s){C.fillStyle=s.fill,C.beginPath(),C.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),C.closePath(),C.fill()},onMouseDown:function(C){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(C)},_render:function(){var C=this.canvas.contextTop,s,m,v=this.points;for(this._saveAndTransform(C),s=0,m=v.length;s<m;s++)this.dot(C,v[s]);C.restore()},onMouseMove:function(C){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(C)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(C),this._render()):this.drawDot(C))},onMouseUp:function(){var C=this.canvas.renderOnAddRemove,s,m;this.canvas.renderOnAddRemove=!1;var v=[];for(s=0,m=this.points.length;s<m;s++){var n=this.points[s],l=new u.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&(l.shadow=new u.Shadow(this.shadow)),v.push(l)}var r=new u.Group(v);r.canvas=this.canvas,this.canvas.fire("before:path:created",{path:r}),this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=C,this.canvas.requestRenderAll()},addPoint:function(C){var s=new u.Point(C.x,C.y),m=u.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,v=new u.Color(this.color).setAlpha(u.util.getRandomInt(0,100)/100).toRgba();return s.radius=m,s.fill=v,this.points.push(s),s}}),u.SprayBrush=u.util.createClass(u.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(C){this.canvas=C,this.sprayChunks=[]},onMouseDown:function(C){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(C),this.render(this.sprayChunkPoints)},onMouseMove:function(C){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(C)||(this.addSprayChunk(C),this.render(this.sprayChunkPoints))},onMouseUp:function(){var C=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],m=0,v=this.sprayChunks.length;m<v;m++)for(var n=this.sprayChunks[m],l=0,r=n.length;l<r;l++){var h=new u.Rect({width:n[l].width,height:n[l].width,left:n[l].x+1,top:n[l].y+1,originX:"center",originY:"center",fill:this.color});s.push(h)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var b=new u.Group(s);this.shadow&&b.set("shadow",new u.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:b}),this.canvas.add(b),this.canvas.fire("path:created",{path:b}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=C,this.canvas.requestRenderAll()},_getOptimizedRects:function(C){var s={},m,v,n;for(v=0,n=C.length;v<n;v++)m=C[v].left+""+C[v].top,s[m]||(s[m]=C[v]);var l=[];for(m in s)l.push(s[m]);return l},render:function(C){var s=this.canvas.contextTop,m,v;for(s.fillStyle=this.color,this._saveAndTransform(s),m=0,v=C.length;m<v;m++){var n=C[m];typeof n.opacity<"u"&&(s.globalAlpha=n.opacity),s.fillRect(n.x,n.y,n.width,n.width)}s.restore()},_render:function(){var C=this.canvas.contextTop,s,m;for(C.fillStyle=this.color,this._saveAndTransform(C),s=0,m=this.sprayChunks.length;s<m;s++)this.render(this.sprayChunks[s]);C.restore()},addSprayChunk:function(C){this.sprayChunkPoints=[];var s,m,v,n=this.width/2,l;for(l=0;l<this.density;l++){s=u.util.getRandomInt(C.x-n,C.x+n),m=u.util.getRandomInt(C.y-n,C.y+n),this.dotWidthVariance?v=u.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):v=this.dotWidth;var r=new u.Point(s,m);r.width=v,this.randomOpacity&&(r.opacity=u.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),u.PatternBrush=u.util.createClass(u.PencilBrush,{getPatternSrc:function(){var C=20,s=5,m=u.util.createCanvasElement(),v=m.getContext("2d");return m.width=m.height=C+s,v.fillStyle=this.color,v.beginPath(),v.arc(C/2,C/2,C/2,0,Math.PI*2,!1),v.closePath(),v.fill(),m},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(C){var s=this.callSuper("createPath",C),m=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new u.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-m.x,offsetY:-m.y}),s}}),function(){var C=u.util.getPointer,s=u.util.degreesToRadians,m=u.util.isTouchEvent;u.Canvas=u.util.createClass(u.StaticCanvas,{initialize:function(n,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(n,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=u.PencilBrush&&new u.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var n=this.getActiveObjects(),l,r,h;if(n.length>0&&!this.preserveObjectStacking){r=[],h=[];for(var b=0,f=this._objects.length;b<f;b++)l=this._objects[b],n.indexOf(l)===-1?r.push(l):h.push(l);n.length>1&&(this._activeObject._objects=h),r.push.apply(r,h)}else r=this._objects;return r},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var n=this.contextContainer;return this.renderCanvas(n,this._chooseObjectsToRender()),this},renderTopLayer:function(n){n.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(n),this.contextTopDirty=!0),n.restore()},renderTop:function(){var n=this.contextTop;return this.clearContext(n),this.renderTopLayer(n),this.fire("after:render"),this},_normalizePointer:function(n,l){var r=n.calcTransformMatrix(),h=u.util.invertTransform(r),b=this.restorePointerVpt(l);return u.util.transformPoint(b,h)},isTargetTransparent:function(n,l,r){if(n.shouldCache()&&n._cacheCanvas&&n!==this._activeObject){var h=this._normalizePointer(n,{x:l,y:r}),b=Math.max(n.cacheTranslationX+h.x*n.zoomX,0),f=Math.max(n.cacheTranslationY+h.y*n.zoomY,0),O=u.util.isTransparent(n._cacheContext,Math.round(b),Math.round(f),this.targetFindTolerance);return O}var S=this.contextCache,E=n.selectionBackgroundColor,_=this.viewportTransform;n.selectionBackgroundColor="",this.clearContext(S),S.save(),S.transform(_[0],_[1],_[2],_[3],_[4],_[5]),n.render(S),S.restore(),n.selectionBackgroundColor=E;var O=u.util.isTransparent(S,l,r,this.targetFindTolerance);return O},_isSelectionKeyPressed:function(n){var l=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?l=!!this.selectionKey.find(function(r){return n[r]===!0}):l=n[this.selectionKey],l},_shouldClearSelection:function(n,l){var r=this.getActiveObjects(),h=this._activeObject;return!l||l&&h&&r.length>1&&r.indexOf(l)===-1&&h!==l&&!this._isSelectionKeyPressed(n)||l&&!l.evented||l&&!l.selectable&&h&&h!==l},_shouldCenterTransform:function(n,l,r){if(n){var h;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?h=this.centeredScaling||n.centeredScaling:l==="rotate"&&(h=this.centeredRotation||n.centeredRotation),h?!r:r}},_getOriginFromCorner:function(n,l){var r={x:n.originX,y:n.originY};return l==="ml"||l==="tl"||l==="bl"?r.x="right":(l==="mr"||l==="tr"||l==="br")&&(r.x="left"),l==="tl"||l==="mt"||l==="tr"?r.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(r.y="top"),r},_getActionFromCorner:function(n,l,r,h){if(!l||!n)return"drag";var b=h.controls[l];return b.getActionName(r,b,h)},_setupCurrentTransform:function(n,l,r){if(l){var h=this.getPointer(n),b=l.__corner,f=l.controls[b],S=r&&b?f.getActionHandler(n,l,f):u.controlsUtils.dragHandler,E=this._getActionFromCorner(r,b,n,l),_=this._getOriginFromCorner(l,b),O=n[this.centeredKey],j={target:l,action:E,actionHandler:S,corner:b,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:h.x-l.left,offsetY:h.y-l.top,originX:_.x,originY:_.y,ex:h.x,ey:h.y,lastX:h.x,lastY:h.y,theta:s(l.angle),width:l.width*l.scaleX,shiftKey:n.shiftKey,altKey:O,original:u.util.saveObjectTransform(l)};this._shouldCenterTransform(l,E,O)&&(j.originX="center",j.originY="center"),j.original.originX=_.x,j.original.originY=_.y,this._currentTransform=j,this._beforeTransform(n)}},setCursor:function(n){this.upperCanvasEl.style.cursor=n},_drawSelection:function(n){var l=this._groupSelector,r=new u.Point(l.ex,l.ey),h=u.util.transformPoint(r,this.viewportTransform),b=new u.Point(l.ex+l.left,l.ey+l.top),f=u.util.transformPoint(b,this.viewportTransform),S=Math.min(h.x,f.x),E=Math.min(h.y,f.y),_=Math.max(h.x,f.x),O=Math.max(h.y,f.y),j=this.selectionLineWidth/2;this.selectionColor&&(n.fillStyle=this.selectionColor,n.fillRect(S,E,_-S,O-E)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(n.lineWidth=this.selectionLineWidth,n.strokeStyle=this.selectionBorderColor,S+=j,E+=j,_-=j,O-=j,u.Object.prototype._setLineDash.call(this,n,this.selectionDashArray),n.strokeRect(S,E,_-S,O-E))},findTarget:function(n,l){if(!this.skipTargetFind){var r=!0,h=this.getPointer(n,r),b=this._activeObject,f=this.getActiveObjects(),S,E,_=m(n),O=f.length>1&&!l||f.length===1;if(this.targets=[],O&&b._findTargetCorner(h,_)||f.length>1&&!l&&b===this._searchPossibleTargets([b],h))return b;if(f.length===1&&b===this._searchPossibleTargets([b],h))if(this.preserveObjectStacking)S=b,E=this.targets,this.targets=[];else return b;var j=this._searchPossibleTargets(this._objects,h);return n[this.altSelectionKey]&&j&&S&&j!==S&&(j=S,this.targets=E),j}},_checkTarget:function(n,l,r){if(l&&l.visible&&l.evented&&l.containsPoint(n))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var h=this.isTargetTransparent(l,r.x,r.y);if(!h)return!0}else return!0},_searchPossibleTargets:function(n,l){for(var r,h=n.length,b;h--;){var f=n[h],S=f.group?this._normalizePointer(f.group,l):l;if(this._checkTarget(S,f,l)){r=n[h],r.subTargetCheck&&r instanceof u.Group&&(b=this._searchPossibleTargets(r._objects,l),b&&this.targets.push(b));break}}return r},restorePointerVpt:function(n){return u.util.transformPoint(n,u.util.invertTransform(this.viewportTransform))},getPointer:function(n,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var r=C(n),h=this.upperCanvasEl,b=h.getBoundingClientRect(),f=b.width||0,S=b.height||0,E;(!f||!S)&&("top"in b&&"bottom"in b&&(S=Math.abs(b.top-b.bottom)),"right"in b&&"left"in b&&(f=Math.abs(b.right-b.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,l||(r=this.restorePointerVpt(r));var _=this.getRetinaScaling();return _!==1&&(r.x/=_,r.y/=_),f===0||S===0?E={width:1,height:1}:E={width:h.width/f,height:h.height/S},{x:r.x*E.width,y:r.y*E.height}},_createUpperCanvas:function(){var n=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,r=this.upperCanvasEl;r?r.className="":(r=this._createCanvasElement(),this.upperCanvasEl=r),u.util.addClass(r,"upper-canvas "+n),this.wrapperEl.appendChild(r),this._copyCanvasStyle(l,r),this._applyCanvasStyle(r),this.contextTop=r.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=u.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),u.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),u.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(n){var l=this.width||n.width,r=this.height||n.height;u.util.setStyle(n,{position:"absolute",width:l+"px",height:r+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),n.width=l,n.height=r,u.util.makeElementUnselectable(n)},_copyCanvasStyle:function(n,l){l.style.cssText=n.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var n=this._activeObject;return n?n.type==="activeSelection"&&n._objects?n._objects.slice(0):[n]:[]},_onObjectRemoved:function(n){n===this._activeObject&&(this.fire("before:selection:cleared",{target:n}),this._discardActiveObject(),this.fire("selection:cleared",{target:n}),n.fire("deselected")),n===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",n)},_fireSelectionEvents:function(n,l){var r=!1,h=this.getActiveObjects(),b=[],f=[];n.forEach(function(S){h.indexOf(S)===-1&&(r=!0,S.fire("deselected",{e:l,target:S}),f.push(S))}),h.forEach(function(S){n.indexOf(S)===-1&&(r=!0,S.fire("selected",{e:l,target:S}),b.push(S))}),n.length>0&&h.length>0?r&&this.fire("selection:updated",{e:l,selected:b,deselected:f,updated:b[0]||f[0],target:this._activeObject}):h.length>0?this.fire("selection:created",{e:l,selected:b,target:this._activeObject}):n.length>0&&this.fire("selection:cleared",{e:l,deselected:f})},setActiveObject:function(n,l){var r=this.getActiveObjects();return this._setActiveObject(n,l),this._fireSelectionEvents(r,l),this},_setActiveObject:function(n,l){return this._activeObject===n||!this._discardActiveObject(l,n)||n.onSelect({e:l})?!1:(this._activeObject=n,!0)},_discardActiveObject:function(n,l){var r=this._activeObject;if(r){if(r.onDeselect({e:n,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(n){var l=this.getActiveObjects(),r=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:r,e:n}),this._discardActiveObject(n),this._fireSelectionEvents(l,n),this},dispose:function(){var n=this.wrapperEl;return this.removeListeners(),n.removeChild(this.upperCanvasEl),n.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){u.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),n.parentNode&&n.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,u.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(n){var l=this._activeObject;l&&l._renderControls(n)},_toObject:function(n,l,r){var h=this._realizeGroupTransformOnObject(n),b=this.callSuper("_toObject",n,l,r);return this._unwindGroupTransformOnObject(n,h),b},_realizeGroupTransformOnObject:function(n){if(n.group&&n.group.type==="activeSelection"&&this._activeObject===n.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],r={};return l.forEach(function(h){r[h]=n[h]}),u.util.addTransformToObject(n,this._activeObject.calcOwnMatrix()),r}else return null},_unwindGroupTransformOnObject:function(n,l){l&&n.set(l)},_setSVGObject:function(n,l,r){var h=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",n,l,r),this._unwindGroupTransformOnObject(l,h)},setViewportTransform:function(n){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),u.StaticCanvas.prototype.setViewportTransform.call(this,n)}});for(var v in u.StaticCanvas)v!=="prototype"&&(u.Canvas[v]=u.StaticCanvas[v])}(),function(){var C=u.util.addListener,s=u.util.removeListener,m=3,v=2,n=1,l={passive:!1};function r(h,b){return h.button&&h.button===b-1}u.util.object.extend(u.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(C,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(h,b){var f=this.upperCanvasEl,S=this._getEventPrefix();h(u.window,"resize",this._onResize),h(f,S+"down",this._onMouseDown),h(f,S+"move",this._onMouseMove,l),h(f,S+"out",this._onMouseOut),h(f,S+"enter",this._onMouseEnter),h(f,"wheel",this._onMouseWheel),h(f,"contextmenu",this._onContextMenu),h(f,"dblclick",this._onDoubleClick),h(f,"dragover",this._onDragOver),h(f,"dragenter",this._onDragEnter),h(f,"dragleave",this._onDragLeave),h(f,"drop",this._onDrop),this.enablePointerEvents||h(f,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&b in eventjs&&(eventjs[b](f,"gesture",this._onGesture),eventjs[b](f,"drag",this._onDrag),eventjs[b](f,"orientation",this._onOrientationChange),eventjs[b](f,"shake",this._onShake),eventjs[b](f,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var h=this._getEventPrefix();s(u.document,h+"up",this._onMouseUp),s(u.document,"touchend",this._onTouchEnd,l),s(u.document,h+"move",this._onMouseMove,l),s(u.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(h,b){this.__onTransformGesture&&this.__onTransformGesture(h,b)},_onDrag:function(h,b){this.__onDrag&&this.__onDrag(h,b)},_onMouseWheel:function(h){this.__onMouseWheel(h)},_onMouseOut:function(h){var b=this._hoveredTarget;this.fire("mouse:out",{target:b,e:h}),this._hoveredTarget=null,b&&b.fire("mouseout",{e:h});var f=this;this._hoveredTargets.forEach(function(S){f.fire("mouse:out",{target:b,e:h}),S&&b.fire("mouseout",{e:h})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(S){S.isEditing&&S.hiddenTextarea.focus()})},_onMouseEnter:function(h){!this._currentTransform&&!this.findTarget(h)&&(this.fire("mouse:over",{target:null,e:h}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(h,b){this.__onOrientationChange&&this.__onOrientationChange(h,b)},_onShake:function(h,b){this.__onShake&&this.__onShake(h,b)},_onLongPress:function(h,b){this.__onLongPress&&this.__onLongPress(h,b)},_onDragOver:function(h){h.preventDefault();var b=this._simpleEventHandler("dragover",h);this._fireEnterLeaveEvents(b,h)},_onContextMenu:function(h){return this.stopContextMenu&&(h.stopPropagation(),h.preventDefault()),!1},_onDoubleClick:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"dblclick"),this._resetTransformEventData(h)},getPointerId:function(h){var b=h.changedTouches;return b?b[0]&&b[0].identifier:this.enablePointerEvents?h.pointerId:-1},_isMainEvent:function(h){return h.isPrimary===!0?!0:h.isPrimary===!1?!1:h.type==="touchend"&&h.touches.length===0?!0:h.changedTouches?h.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(h){h.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(h)),this.__onMouseDown(h),this._resetTransformEventData();var b=this.upperCanvasEl,f=this._getEventPrefix();C(u.document,"touchend",this._onTouchEnd,l),C(u.document,"touchmove",this._onMouseMove,l),s(b,f+"down",this._onMouseDown)},_onMouseDown:function(h){this.__onMouseDown(h),this._resetTransformEventData();var b=this.upperCanvasEl,f=this._getEventPrefix();s(b,f+"move",this._onMouseMove,l),C(u.document,f+"up",this._onMouseUp),C(u.document,f+"move",this._onMouseMove,l)},_onTouchEnd:function(h){if(!(h.touches.length>0)){this.__onMouseUp(h),this._resetTransformEventData(),this.mainTouchId=null;var b=this._getEventPrefix();s(u.document,"touchend",this._onTouchEnd,l),s(u.document,"touchmove",this._onMouseMove,l);var f=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){C(f.upperCanvasEl,b+"down",f._onMouseDown),f._willAddMouseDown=0},400)}},_onMouseUp:function(h){this.__onMouseUp(h),this._resetTransformEventData();var b=this.upperCanvasEl,f=this._getEventPrefix();this._isMainEvent(h)&&(s(u.document,f+"up",this._onMouseUp),s(u.document,f+"move",this._onMouseMove,l),C(b,f+"move",this._onMouseMove,l))},_onMouseMove:function(h){!this.allowTouchScrolling&&h.preventDefault&&h.preventDefault(),this.__onMouseMove(h)},_onResize:function(){this.calcOffset()},_shouldRender:function(h){var b=this._activeObject;return!!b!=!!h||b&&h&&b!==h?!0:(b&&b.isEditing,!1)},__onMouseUp:function(h){var b,f=this._currentTransform,S=this._groupSelector,E=!1,_=!S||S.left===0&&S.top===0;if(this._cacheTransformEventData(h),b=this._target,this._handleEvent(h,"up:before"),r(h,m)){this.fireRightClick&&this._handleEvent(h,"up",m,_);return}if(r(h,v)){this.fireMiddleClick&&this._handleEvent(h,"up",v,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(h);return}if(this._isMainEvent(h)){if(f&&(this._finalizeCurrentTransform(h),E=f.actionPerformed),!_){var O=b===this._activeObject;this._maybeGroupObjects(h),E||(E=this._shouldRender(b)||!O&&b===this._activeObject)}if(b){if(b.selectable&&b!==this._activeObject&&b.activeOn==="up")this.setActiveObject(b,h),E=!0;else{var j=b._findTargetCorner(this.getPointer(h,!0),u.util.isTouchEvent(h)),B=b.controls[j],V=B&&B.getMouseUpHandler(h,b,B);if(V){var H=this.getPointer(h);V(h,f,H.x,H.y)}}b.isMoving=!1}this._setCursorFromEvent(h,b),this._handleEvent(h,"up",n,_),this._groupSelector=null,this._currentTransform=null,b&&(b.__corner=0),E?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(h,b){var f=this.findTarget(b),S=this.targets,E={e:b,target:f,subTargets:S};if(this.fire(h,E),f&&f.fire(h,E),!S)return f;for(var _=0;_<S.length;_++)S[_].fire(h,E);return f},_handleEvent:function(h,b,f,S){var E=this._target,_=this.targets||[],O={e:h,target:E,subTargets:_,button:f||n,isClick:S||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};b==="up"&&(O.currentTarget=this.findTarget(h),O.currentSubTargets=this.targets),this.fire("mouse:"+b,O),E&&E.fire("mouse"+b,O);for(var j=0;j<_.length;j++)_[j].fire("mouse"+b,O)},_finalizeCurrentTransform:function(h){var b=this._currentTransform,f=b.target,S,E={e:h,target:f,transform:b,action:b.action};f._scaling&&(f._scaling=!1),f.setCoords(),(b.actionPerformed||this.stateful&&f.hasStateChanged())&&(b.actionPerformed&&(S=this._addEventOptions(E,b),this._fire(S,E)),this._fire("modified",E))},_addEventOptions:function(h,b){var f,S;switch(b.action){case"scaleX":f="scaled",S="x";break;case"scaleY":f="scaled",S="y";break;case"skewX":f="skewed",S="x";break;case"skewY":f="skewed",S="y";break;case"scale":f="scaled",S="equally";break;case"rotate":f="rotated";break;case"drag":f="moved";break}return h.by=S,f},_onMouseDownInDrawingMode:function(h){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(h).requestRenderAll();var b=this.getPointer(h);this.freeDrawingBrush.onMouseDown(b,{e:h,pointer:b}),this._handleEvent(h,"down")},_onMouseMoveInDrawingMode:function(h){if(this._isCurrentlyDrawing){var b=this.getPointer(h);this.freeDrawingBrush.onMouseMove(b,{e:h,pointer:b})}this.setCursor(this.freeDrawingCursor),this._handleEvent(h,"move")},_onMouseUpInDrawingMode:function(h){var b=this.getPointer(h);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:h,pointer:b}),this._handleEvent(h,"up")},__onMouseDown:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"down:before");var b=this._target;if(r(h,m)){this.fireRightClick&&this._handleEvent(h,"down",m);return}if(r(h,v)){this.fireMiddleClick&&this._handleEvent(h,"down",v);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(h);return}if(this._isMainEvent(h)&&!this._currentTransform){var f=this._pointer;this._previousPointer=f;var S=this._shouldRender(b),E=this._shouldGroup(h,b);if(this._shouldClearSelection(h,b)?this.discardActiveObject(h):E&&(this._handleGrouping(h,b),b=this._activeObject),this.selection&&(!b||!b.selectable&&!b.isEditing&&b!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),b){var _=b===this._activeObject;b.selectable&&b.activeOn==="down"&&this.setActiveObject(b,h);var O=b._findTargetCorner(this.getPointer(h,!0),u.util.isTouchEvent(h));if(b.__corner=O,b===this._activeObject&&(O||!E)){this._setupCurrentTransform(h,b,_);var j=b.controls[O],f=this.getPointer(h),B=j&&j.getMouseDownHandler(h,b,j);B&&B(h,this._currentTransform,f.x,f.y)}}this._handleEvent(h,"down"),(S||E)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(h){this._resetTransformEventData(),this._pointer=this.getPointer(h,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(h)||null},_beforeTransform:function(h){var b=this._currentTransform;this.stateful&&b.target.saveState(),this.fire("before:transform",{e:h,transform:b})},__onMouseMove:function(h){this._handleEvent(h,"move:before"),this._cacheTransformEventData(h);var b,f;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(h);return}if(this._isMainEvent(h)){var S=this._groupSelector;S?(f=this._absolutePointer,S.left=f.x-S.ex,S.top=f.y-S.ey,this.renderTop()):this._currentTransform?this._transformObject(h):(b=this.findTarget(h)||null,this._setCursorFromEvent(h,b),this._fireOverOutEvents(b,h)),this._handleEvent(h,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(h,b){var f=this._hoveredTarget,S=this._hoveredTargets,E=this.targets,_=Math.max(S.length,E.length);this.fireSyntheticInOutEvents(h,b,{oldTarget:f,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var O=0;O<_;O++)this.fireSyntheticInOutEvents(E[O],b,{oldTarget:S[O],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=h,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(h,b){var f=this._draggedoverTarget,S=this._hoveredTargets,E=this.targets,_=Math.max(S.length,E.length);this.fireSyntheticInOutEvents(h,b,{oldTarget:f,evtOut:"dragleave",evtIn:"dragenter"});for(var O=0;O<_;O++)this.fireSyntheticInOutEvents(E[O],b,{oldTarget:S[O],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=h},fireSyntheticInOutEvents:function(h,b,f){var S,E,_=f.oldTarget,O,j,B=_!==h,V=f.canvasEvtIn,H=f.canvasEvtOut;B&&(S={e:b,target:h,previousTarget:_},E={e:b,target:_,nextTarget:h}),j=h&&B,O=_&&B,O&&(H&&this.fire(H,E),_.fire(f.evtOut,E)),j&&(V&&this.fire(V,S),h.fire(f.evtIn,S))},__onMouseWheel:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"wheel"),this._resetTransformEventData()},_transformObject:function(h){var b=this.getPointer(h),f=this._currentTransform;f.reset=!1,f.shiftKey=h.shiftKey,f.altKey=h[this.centeredKey],this._performTransformAction(h,f,b),f.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(h,b,f){var S=f.x,E=f.y,_=b.action,O=!1,j=b.actionHandler;j&&(O=j(h,b,S,E)),_==="drag"&&O&&(b.target.isMoving=!0,this.setCursor(b.target.moveCursor||this.moveCursor)),b.actionPerformed=b.actionPerformed||O},_fire:u.controlsUtils.fireEvent,_setCursorFromEvent:function(h,b){if(!b)return this.setCursor(this.defaultCursor),!1;var f=b.hoverCursor||this.hoverCursor,S=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,E=(!S||!S.contains(b))&&b._findTargetCorner(this.getPointer(h,!0));E?this.setCursor(this.getCornerCursor(E,b,h)):(b.subTargetCheck&&this.targets.concat().reverse().map(function(_){f=_.hoverCursor||f}),this.setCursor(f))},getCornerCursor:function(h,b,f){var S=b.controls[h];return S.cursorStyleHandler(f,S,b)}})}(),function(){var C=Math.min,s=Math.max;u.util.object.extend(u.Canvas.prototype,{_shouldGroup:function(m,v){var n=this._activeObject;return n&&this._isSelectionKeyPressed(m)&&v&&v.selectable&&this.selection&&(n!==v||n.type==="activeSelection")&&!v.onSelect({e:m})},_handleGrouping:function(m,v){var n=this._activeObject;n.__corner||v===n&&(v=this.findTarget(m,!0),!v||!v.selectable)||(n&&n.type==="activeSelection"?this._updateActiveSelection(v,m):this._createActiveSelection(v,m))},_updateActiveSelection:function(m,v){var n=this._activeObject,l=n._objects.slice(0);n.contains(m)?(n.removeWithUpdate(m),this._hoveredTarget=m,this._hoveredTargets=this.targets.concat(),n.size()===1&&this._setActiveObject(n.item(0),v)):(n.addWithUpdate(m),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,v)},_createActiveSelection:function(m,v){var n=this.getActiveObjects(),l=this._createGroup(m);this._hoveredTarget=l,this._setActiveObject(l,v),this._fireSelectionEvents(n,v)},_createGroup:function(m){var v=this._objects,n=v.indexOf(this._activeObject)<v.indexOf(m),l=n?[this._activeObject,m]:[m,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new u.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(m){var v=this._collectObjects(m),n;v.length===1?this.setActiveObject(v[0],m):v.length>1&&(n=new u.ActiveSelection(v.reverse(),{canvas:this}),this.setActiveObject(n,m))},_collectObjects:function(m){for(var v=[],n,l=this._groupSelector.ex,r=this._groupSelector.ey,h=l+this._groupSelector.left,b=r+this._groupSelector.top,f=new u.Point(C(l,h),C(r,b)),S=new u.Point(s(l,h),s(r,b)),E=!this.selectionFullyContained,_=l===h&&r===b,O=this._objects.length;O--&&(n=this._objects[O],!(!(!n||!n.selectable||!n.visible)&&(E&&n.intersectsWithRect(f,S,!0)||n.isContainedWithinRect(f,S,!0)||E&&n.containsPoint(f,null,!0)||E&&n.containsPoint(S,null,!0))&&(v.push(n),_))););return v.length>1&&(v=v.filter(function(j){return!j.onSelect({e:m})})),v},_maybeGroupObjects:function(m){this.selection&&this._groupSelector&&this._groupSelectedObjects(m),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){u.util.object.extend(u.StaticCanvas.prototype,{toDataURL:function(C){C||(C={});var s=C.format||"png",m=C.quality||1,v=(C.multiplier||1)*(C.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(v,C);return u.util.toDataURL(n,s,m)},toCanvasElement:function(C,s){C=C||1,s=s||{};var m=(s.width||this.width)*C,v=(s.height||this.height)*C,n=this.getZoom(),l=this.width,r=this.height,h=n*C,b=this.viewportTransform,f=(b[4]-(s.left||0))*C,S=(b[5]-(s.top||0))*C,E=this.interactive,_=[h,0,0,h,f,S],O=this.enableRetinaScaling,j=u.util.createCanvasElement(),B=this.contextTop;return j.width=m,j.height=v,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=m,this.height=v,this.calcViewportBoundaries(),this.renderCanvas(j.getContext("2d"),this._objects),this.viewportTransform=b,this.width=l,this.height=r,this.calcViewportBoundaries(),this.interactive=E,this.enableRetinaScaling=O,this.contextTop=B,j}})}(),u.util.object.extend(u.StaticCanvas.prototype,{loadFromJSON:function(C,s,m){if(C){var v=typeof C=="string"?JSON.parse(C):u.util.object.clone(C),n=this,l=v.clipPath,r=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete v.clipPath,this._enlivenObjects(v.objects,function(h){n.clear(),n._setBgOverlay(v,function(){l?n._enlivenObjects([l],function(b){n.clipPath=b[0],n.__setupCanvas.call(n,v,h,r,s)}):n.__setupCanvas.call(n,v,h,r,s)})},m),this}},__setupCanvas:function(C,s,m,v){var n=this;s.forEach(function(l,r){n.insertAt(l,r)}),this.renderOnAddRemove=m,delete C.objects,delete C.backgroundImage,delete C.overlayImage,delete C.background,delete C.overlay,this._setOptions(C),this.renderAll(),v&&v()},_setBgOverlay:function(C,s){var m={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!C.backgroundImage&&!C.overlayImage&&!C.background&&!C.overlay){s&&s();return}var v=function(){m.backgroundImage&&m.overlayImage&&m.backgroundColor&&m.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",C.backgroundImage,m,v),this.__setBgOverlay("overlayImage",C.overlayImage,m,v),this.__setBgOverlay("backgroundColor",C.background,m,v),this.__setBgOverlay("overlayColor",C.overlay,m,v)},__setBgOverlay:function(C,s,m,v){var n=this;if(!s){m[C]=!0,v&&v();return}C==="backgroundImage"||C==="overlayImage"?u.util.enlivenObjects([s],function(l){n[C]=l[0],m[C]=!0,v&&v()}):this["set"+u.util.string.capitalize(C,!0)](s,function(){m[C]=!0,v&&v()})},_enlivenObjects:function(C,s,m){if(!C||C.length===0){s&&s([]);return}u.util.enlivenObjects(C,function(v){s&&s(v)},null,m)},_toDataURL:function(C,s){this.clone(function(m){s(m.toDataURL(C))})},_toDataURLWithMultiplier:function(C,s,m){this.clone(function(v){m(v.toDataURLWithMultiplier(C,s))})},clone:function(C,s){var m=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(v){v.loadFromJSON(m,function(){C&&C(v)})})},cloneWithoutData:function(C){var s=u.util.createCanvasElement();s.width=this.width,s.height=this.height;var m=new u.Canvas(s);this.backgroundImage?(m.setBackgroundImage(this.backgroundImage.src,function(){m.renderAll(),C&&C(m)}),m.backgroundImageOpacity=this.backgroundImageOpacity,m.backgroundImageStretch=this.backgroundImageStretch):C&&C(m)}}),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.extend,v=s.util.object.clone,n=s.util.toFixed,l=s.util.string.capitalize,r=s.util.degreesToRadians,h=!s.isLikelyNode,b=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:h,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(f){f&&this.setOptions(f)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(f){var S=s.perfLimitSizeTotal,E=f.width,_=f.height,O=s.maxCacheSideLimit,j=s.minCacheSideLimit;if(E<=O&&_<=O&&E*_<=S)return E<j&&(f.width=j),_<j&&(f.height=j),f;var B=E/_,V=s.util.limitDimsByArea(B,S),H=s.util.capValue,Y=H(j,V.x,O),se=H(j,V.y,O);return E>Y&&(f.zoomX/=E/Y,f.width=Y,f.capped=!0),_>se&&(f.zoomY/=_/se,f.height=se,f.capped=!0),f},_getCacheCanvasDimensions:function(){var f=this.getTotalObjectScaling(),S=this._getTransformedDimensions(0,0),E=S.x*f.scaleX/this.scaleX,_=S.y*f.scaleY/this.scaleY;return{width:E+b,height:_+b,zoomX:f.scaleX,zoomY:f.scaleY,x:E,y:_}},_updateCacheCanvas:function(){var f=this.canvas;if(this.noScaleCache&&f&&f._currentTransform){var S=f._currentTransform.target,E=f._currentTransform.action;if(this===S&&E.slice&&E.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,O=this._limitCacheSize(this._getCacheCanvasDimensions()),j=s.minCacheSideLimit,B=O.width,V=O.height,H,Y,se=O.zoomX,ne=O.zoomY,be=B!==this.cacheWidth||V!==this.cacheHeight,K=this.zoomX!==se||this.zoomY!==ne,Ce=be||K,W=0,Be=0,Ie=!1;if(be){var ze=this._cacheCanvas.width,te=this._cacheCanvas.height,le=B>ze||V>te,q=(B<ze*.9||V<te*.9)&&ze>j&&te>j;Ie=le||q,le&&!O.capped&&(B>j||V>j)&&(W=B*.1,Be=V*.1)}return this instanceof s.Text&&this.path&&(Ce=!0,Ie=!0,W+=this.getHeightOfLine(0)*this.zoomX,Be+=this.getHeightOfLine(0)*this.zoomY),Ce?(Ie?(_.width=Math.ceil(B+W),_.height=Math.ceil(V+Be)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),H=O.x/2,Y=O.y/2,this.cacheTranslationX=Math.round(_.width/2-H)+H,this.cacheTranslationY=Math.round(_.height/2-Y)+Y,this.cacheWidth=B,this.cacheHeight=V,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(se,ne),this.zoomX=se,this.zoomY=ne,!0):!1},setOptions:function(f){this._setOptions(f),this._initGradient(f.fill,"fill"),this._initGradient(f.stroke,"stroke"),this._initPattern(f.fill,"fill"),this._initPattern(f.stroke,"stroke")},transform:function(f){var S=this.group&&!this.group._transformDone||this.group&&this.canvas&&f===this.canvas.contextTop,E=this.calcTransformMatrix(!S);f.transform(E[0],E[1],E[2],E[3],E[4],E[5])},toObject:function(f){var S=s.Object.NUM_FRACTION_DIGITS,E={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:n(this.left,S),top:n(this.top,S),width:n(this.width,S),height:n(this.height,S),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,S),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:n(this.strokeMiterLimit,S),scaleX:n(this.scaleX,S),scaleY:n(this.scaleY,S),angle:n(this.angle,S),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,S),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:n(this.skewX,S),skewY:n(this.skewY,S)};return this.clipPath&&!this.clipPath.excludeFromExport&&(E.clipPath=this.clipPath.toObject(f),E.clipPath.inverted=this.clipPath.inverted,E.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,E,f),this.includeDefaultValues||(E=this._removeDefaultValues(E)),E},toDatalessObject:function(f){return this.toObject(f)},_removeDefaultValues:function(f){var S=s.util.getKlass(f.type).prototype,E=S.stateProperties;return E.forEach(function(_){if(!(_==="left"||_==="top")){f[_]===S[_]&&delete f[_];var O=Object.prototype.toString.call(f[_])==="[object Array]"&&Object.prototype.toString.call(S[_])==="[object Array]";O&&f[_].length===0&&S[_].length===0&&delete f[_]}}),f},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var f=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(f.scaleX),scaleY:Math.abs(f.scaleY)}},getTotalObjectScaling:function(){var f=this.getObjectScaling(),S=f.scaleX,E=f.scaleY;if(this.canvas){var _=this.canvas.getZoom(),O=this.canvas.getRetinaScaling();S*=_*O,E*=_*O}return{scaleX:S,scaleY:E}},getObjectOpacity:function(){var f=this.opacity;return this.group&&(f*=this.group.getObjectOpacity()),f},_set:function(f,S){var E=f==="scaleX"||f==="scaleY",_=this[f]!==S,O=!1;return E&&(S=this._constrainScale(S)),f==="scaleX"&&S<0?(this.flipX=!this.flipX,S*=-1):f==="scaleY"&&S<0?(this.flipY=!this.flipY,S*=-1):f==="shadow"&&S&&!(S instanceof s.Shadow)?S=new s.Shadow(S):f==="dirty"&&this.group&&this.group.set("dirty",S),this[f]=S,_&&(O=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(f)>-1?(this.dirty=!0,O&&this.group.set("dirty",!0)):O&&this.stateProperties.indexOf(f)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(f){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(f.save(),this._setupCompositeOperation(f),this.drawSelectionBackground(f),this.transform(f),this._setOpacity(f),this._setShadow(f,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(f)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(f),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),f.restore())},renderCache:function(f){f=f||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,f.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(f){var S=this.clipPath;if(f.save(),S.inverted?f.globalCompositeOperation="destination-out":f.globalCompositeOperation="destination-in",S.absolutePositioned){var E=s.util.invertTransform(this.calcTransformMatrix());f.transform(E[0],E[1],E[2],E[3],E[4],E[5])}S.transform(f),f.scale(1/S.zoomX,1/S.zoomY),f.drawImage(S._cacheCanvas,-S.cacheTranslationX,-S.cacheTranslationY),f.restore()},drawObject:function(f,S){var E=this.fill,_=this.stroke;S?(this.fill="black",this.stroke="",this._setClippingProperties(f)):this._renderBackground(f),this._render(f),this._drawClipPath(f),this.fill=E,this.stroke=_},_drawClipPath:function(f){var S=this.clipPath;S&&(S.canvas=this.canvas,S.shouldCache(),S._transformDone=!0,S.renderCache({forClipping:!0}),this.drawClipPathOnCache(f))},drawCacheOnCanvas:function(f){f.scale(1/this.zoomX,1/this.zoomY),f.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(f){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!f&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!f){var S=this.cacheWidth/this.zoomX,E=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-S/2,-E/2,S,E)}return!0}return!1},_renderBackground:function(f){if(this.backgroundColor){var S=this._getNonTransformedDimensions();f.fillStyle=this.backgroundColor,f.fillRect(-S.x/2,-S.y/2,S.x,S.y),this._removeShadow(f)}},_setOpacity:function(f){this.group&&!this.group._transformDone?f.globalAlpha=this.getObjectOpacity():f.globalAlpha*=this.opacity},_setStrokeStyles:function(f,S){var E=S.stroke;E&&(f.lineWidth=S.strokeWidth,f.lineCap=S.strokeLineCap,f.lineDashOffset=S.strokeDashOffset,f.lineJoin=S.strokeLineJoin,f.miterLimit=S.strokeMiterLimit,E.toLive?E.gradientUnits==="percentage"||E.gradientTransform||E.patternTransform?this._applyPatternForTransformedGradient(f,E):(f.strokeStyle=E.toLive(f,this),this._applyPatternGradientTransform(f,E)):f.strokeStyle=S.stroke)},_setFillStyles:function(f,S){var E=S.fill;E&&(E.toLive?(f.fillStyle=E.toLive(f,this),this._applyPatternGradientTransform(f,S.fill)):f.fillStyle=E)},_setClippingProperties:function(f){f.globalAlpha=1,f.strokeStyle="transparent",f.fillStyle="#000000"},_setLineDash:function(f,S){!S||S.length===0||(1&S.length&&S.push.apply(S,S),f.setLineDash(S))},_renderControls:function(f,S){var E=this.getViewportTransform(),_=this.calcTransformMatrix(),O,j,B;S=S||{},j=typeof S.hasBorders<"u"?S.hasBorders:this.hasBorders,B=typeof S.hasControls<"u"?S.hasControls:this.hasControls,_=s.util.multiplyTransformMatrices(E,_),O=s.util.qrDecompose(_),f.save(),f.translate(O.translateX,O.translateY),f.lineWidth=1*this.borderScaleFactor,this.group||(f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),f.rotate(r(O.angle)),S.forActiveSelection||this.group?j&&this.drawBordersInGroup(f,O,S):j&&this.drawBorders(f,S),B&&this.drawControls(f,S),f.restore()},_setShadow:function(f){if(this.shadow){var S=this.shadow,E=this.canvas,_,O=E&&E.viewportTransform[0]||1,j=E&&E.viewportTransform[3]||1;S.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),E&&E._isRetinaScaling()&&(O*=s.devicePixelRatio,j*=s.devicePixelRatio),f.shadowColor=S.color,f.shadowBlur=S.blur*s.browserShadowBlurConstant*(O+j)*(_.scaleX+_.scaleY)/4,f.shadowOffsetX=S.offsetX*O*_.scaleX,f.shadowOffsetY=S.offsetY*j*_.scaleY}},_removeShadow:function(f){this.shadow&&(f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0)},_applyPatternGradientTransform:function(f,S){if(!S||!S.toLive)return{offsetX:0,offsetY:0};var E=S.gradientTransform||S.patternTransform,_=-this.width/2+S.offsetX||0,O=-this.height/2+S.offsetY||0;return S.gradientUnits==="percentage"?f.transform(this.width,0,0,this.height,_,O):f.transform(1,0,0,1,_,O),E&&f.transform(E[0],E[1],E[2],E[3],E[4],E[5]),{offsetX:_,offsetY:O}},_renderPaintInOrder:function(f){this.paintFirst==="stroke"?(this._renderStroke(f),this._renderFill(f)):(this._renderFill(f),this._renderStroke(f))},_render:function(){},_renderFill:function(f){this.fill&&(f.save(),this._setFillStyles(f,this),this.fillRule==="evenodd"?f.fill("evenodd"):f.fill(),f.restore())},_renderStroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(f),f.save(),this.strokeUniform&&this.group){var S=this.getObjectScaling();f.scale(1/S.scaleX,1/S.scaleY)}else this.strokeUniform&&f.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(f,this.strokeDashArray),this._setStrokeStyles(f,this),f.stroke(),f.restore()}},_applyPatternForTransformedGradient:function(f,S){var E=this._limitCacheSize(this._getCacheCanvasDimensions()),_=s.util.createCanvasElement(),O,j=this.canvas.getRetinaScaling(),B=E.x/this.scaleX/j,V=E.y/this.scaleY/j;_.width=B,_.height=V,O=_.getContext("2d"),O.beginPath(),O.moveTo(0,0),O.lineTo(B,0),O.lineTo(B,V),O.lineTo(0,V),O.closePath(),O.translate(B/2,V/2),O.scale(E.zoomX/this.scaleX/j,E.zoomY/this.scaleY/j),this._applyPatternGradientTransform(O,S),O.fillStyle=S.toLive(f),O.fill(),f.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),f.scale(j*this.scaleX/E.zoomX,j*this.scaleY/E.zoomY),f.strokeStyle=O.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var f=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",f.scaleX),this.set("scaleY",f.scaleY),this.angle=f.angle,this.skewX=f.skewX,this.skewY=0}},_removeTransformMatrix:function(f){var S=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),S=s.util.transformPoint(S,this.transformMatrix)),this.transformMatrix=null,f&&(this.scaleX*=f.scaleX,this.scaleY*=f.scaleY,this.cropX=f.cropX,this.cropY=f.cropY,S.x+=f.offsetLeft,S.y+=f.offsetTop,this.width=f.width,this.height=f.height),this.setPositionByOrigin(S,"center","center")},clone:function(f,S){var E=this.toObject(S);this.constructor.fromObject?this.constructor.fromObject(E,f):s.Object._fromObject("Object",E,f)},cloneAsImage:function(f,S){var E=this.toCanvasElement(S);return f&&f(new s.Image(E)),this},toCanvasElement:function(f){f||(f={});var S=s.util,E=S.saveObjectTransform(this),_=this.group,O=this.shadow,j=Math.abs,B=(f.multiplier||1)*(f.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,f.withoutTransform&&S.resetObjectTransform(this),f.withoutShadow&&(this.shadow=null);var V=s.util.createCanvasElement(),H=this.getBoundingRect(!0,!0),Y=this.shadow,se,ne={x:0,y:0},be,K,Ce;Y&&(be=Y.blur,Y.nonScaling?se={scaleX:1,scaleY:1}:se=this.getObjectScaling(),ne.x=2*Math.round(j(Y.offsetX)+be)*j(se.scaleX),ne.y=2*Math.round(j(Y.offsetY)+be)*j(se.scaleY)),K=H.width+ne.x,Ce=H.height+ne.y,V.width=Math.ceil(K),V.height=Math.ceil(Ce);var W=new s.StaticCanvas(V,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});f.format==="jpeg"&&(W.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(W.width/2,W.height/2),"center","center");var Be=this.canvas;W.add(this);var Ie=W.toCanvasElement(B||1,f);return this.shadow=O,this.set("canvas",Be),_&&(this.group=_),this.set(E).setCoords(),W._objects=[],W.dispose(),W=null,Ie},toDataURL:function(f){return f||(f={}),s.util.toDataURL(this.toCanvasElement(f),f.format||"png",f.quality||1)},isType:function(f){return this.type===f},complexity:function(){return 1},toJSON:function(f){return this.toObject(f)},rotate:function(f){var S=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return S&&this._setOriginToCenter(),this.set("angle",f),S&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(f,S){S=S||this.canvas.getPointer(f);var E=new s.Point(S.x,S.y),_=this._getLeftTopCoords();return this.angle&&(E=s.util.rotatePoint(E,_,r(-this.angle))),{x:E.x-_.x,y:E.y-_.y}},_setupCompositeOperation:function(f){this.globalCompositeOperation&&(f.globalCompositeOperation=this.globalCompositeOperation)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),m(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object._fromObject=function(f,S,E,_){var O=s[f];S=v(S,!0),s.util.enlivenPatterns([S.fill,S.stroke],function(j){typeof j[0]<"u"&&(S.fill=j[0]),typeof j[1]<"u"&&(S.stroke=j[1]),s.util.enlivenObjects([S.clipPath],function(B){S.clipPath=B[0];var V=_?new O(S[_],S):new O(S);E&&E(V)})})},s.Object.__uid=0)}(x),function(){var C=u.util.degreesToRadians,s={left:-.5,center:0,right:.5},m={top:-.5,center:0,bottom:.5};u.util.object.extend(u.Object.prototype,{translateToGivenOrigin:function(v,n,l,r,h){var b=v.x,f=v.y,S,E,_;return typeof n=="string"?n=s[n]:n-=.5,typeof r=="string"?r=s[r]:r-=.5,S=r-n,typeof l=="string"?l=m[l]:l-=.5,typeof h=="string"?h=m[h]:h-=.5,E=h-l,(S||E)&&(_=this._getTransformedDimensions(),b=v.x+S*_.x,f=v.y+E*_.y),new u.Point(b,f)},translateToCenterPoint:function(v,n,l){var r=this.translateToGivenOrigin(v,n,l,"center","center");return this.angle?u.util.rotatePoint(r,v,C(this.angle)):r},translateToOriginPoint:function(v,n,l){var r=this.translateToGivenOrigin(v,"center","center",n,l);return this.angle?u.util.rotatePoint(r,v,C(this.angle)):r},getCenterPoint:function(){var v=new u.Point(this.left,this.top);return this.translateToCenterPoint(v,this.originX,this.originY)},getPointByOrigin:function(v,n){var l=this.getCenterPoint();return this.translateToOriginPoint(l,v,n)},toLocalPoint:function(v,n,l){var r=this.getCenterPoint(),h,b;return typeof n<"u"&&typeof l<"u"?h=this.translateToGivenOrigin(r,"center","center",n,l):h=new u.Point(this.left,this.top),b=new u.Point(v.x,v.y),this.angle&&(b=u.util.rotatePoint(b,r,-C(this.angle))),b.subtractEquals(h)},setPositionByOrigin:function(v,n,l){var r=this.translateToCenterPoint(v,n,l),h=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",h.x),this.set("top",h.y)},adjustPosition:function(v){var n=C(this.angle),l=this.getScaledWidth(),r=u.util.cos(n)*l,h=u.util.sin(n)*l,b,f;typeof this.originX=="string"?b=s[this.originX]:b=this.originX-.5,typeof v=="string"?f=s[v]:f=v-.5,this.left+=r*(f-b),this.top+=h*(f-b),this.setCoords(),this.originX=v},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var v=this.getCenterPoint();this.originX="center",this.originY="center",this.left=v.x,this.top=v.y},_resetOrigin:function(){var v=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=v.x,this.top=v.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function C(l){return[new u.Point(l.tl.x,l.tl.y),new u.Point(l.tr.x,l.tr.y),new u.Point(l.br.x,l.br.y),new u.Point(l.bl.x,l.bl.y)]}var s=u.util,m=s.degreesToRadians,v=s.multiplyTransformMatrices,n=s.transformPoint;s.object.extend(u.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,r){return r?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,r){return C(this._getCoords(l,r))},intersectsWithRect:function(l,r,h,b){var f=this.getCoords(h,b),S=u.Intersection.intersectPolygonRectangle(f,l,r);return S.status==="Intersection"},intersectsWithObject:function(l,r,h){var b=u.Intersection.intersectPolygonPolygon(this.getCoords(r,h),l.getCoords(r,h));return b.status==="Intersection"||l.isContainedWithinObject(this,r,h)||this.isContainedWithinObject(l,r,h)},isContainedWithinObject:function(l,r,h){for(var b=this.getCoords(r,h),f=r?l.aCoords:l.lineCoords,S=0,E=l._getImageLines(f);S<4;S++)if(!l.containsPoint(b[S],E))return!1;return!0},isContainedWithinRect:function(l,r,h,b){var f=this.getBoundingRect(h,b);return f.left>=l.x&&f.left+f.width<=r.x&&f.top>=l.y&&f.top+f.height<=r.y},containsPoint:function(l,S,h,b){var f=this._getCoords(h,b),S=S||this._getImageLines(f),E=this._findCrossPoints(l,S);return E!==0&&E%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var r=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br,b=this.getCoords(!0,l);return b.some(function(f){return f.x<=h.x&&f.x>=r.x&&f.y<=h.y&&f.y>=r.y})||this.intersectsWithRect(r,h,!0,l)?!0:this._containsCenterOfCanvas(r,h,l)},_containsCenterOfCanvas:function(l,r,h){var b={x:(l.x+r.x)/2,y:(l.y+r.y)/2};return!!this.containsPoint(b,null,!0,h)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var r=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;if(this.intersectsWithRect(r,h,!0,l))return!0;var b=this.getCoords(!0,l).every(function(f){return(f.x>=h.x||f.x<=r.x)&&(f.y>=h.y||f.y<=r.y)});return b&&this._containsCenterOfCanvas(r,h,l)},_getImageLines:function(l){var r={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return r},_findCrossPoints:function(l,r){var h,b,f,S,E,_=0,O;for(var j in r)if(O=r[j],!(O.o.y<l.y&&O.d.y<l.y)&&!(O.o.y>=l.y&&O.d.y>=l.y)&&(O.o.x===O.d.x&&O.o.x>=l.x?E=O.o.x:(h=0,b=(O.d.y-O.o.y)/(O.d.x-O.o.x),f=l.y-h*l.x,S=O.o.y-b*O.o.x,E=-(f-S)/(h-b)),E>=l.x&&(_+=1),_===2))break;return _},getBoundingRect:function(l,r){var h=this.getCoords(l,r);return s.makeBoundingBoxFromPoints(h)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,r){var h=this.getBoundingRect(r).width/this.getScaledWidth();return this.scale(l/this.width/h)},scaleToHeight:function(l,r){var h=this.getBoundingRect(r).height/this.getScaledHeight();return this.scale(l/this.height/h)},calcCoords:function(l){return l?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var l=this.getViewportTransform(),r=this.padding,h=m(this.angle),b=s.cos(h),f=s.sin(h),S=b*r,E=f*r,_=S+E,O=S-E,j=this.calcACoords(),B={tl:n(j.tl,l),tr:n(j.tr,l),bl:n(j.bl,l),br:n(j.br,l)};return r&&(B.tl.x-=O,B.tl.y-=_,B.tr.x+=_,B.tr.y-=O,B.bl.x-=_,B.bl.y+=O,B.br.x+=O,B.br.y+=_),B},calcOCoords:function(){var l=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),h=this.getViewportTransform(),b=v(h,r),f=v(b,l),f=v(f,[1/h[0],0,0,1/h[3],0,0]),S=this._calculateCurrentDimensions(),E={};return this.forEachControl(function(_,O,j){E[O]=_.positionHandler(S,f,j)}),E},calcACoords:function(){var l=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),h=v(r,l),b=this._getTransformedDimensions(),f=b.x/2,S=b.y/2;return{tl:n({x:-f,y:-S},h),tr:n({x:f,y:-S},h),bl:n({x:-f,y:S},h),br:n({x:f,y:S},h)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var r="_",h="";return!l&&this.group&&(h=this.group.transformMatrixKey(l)+r),h+this.top+r+this.left+r+this.scaleX+r+this.scaleY+r+this.skewX+r+this.skewY+r+this.angle+r+this.originX+r+this.originY+r+this.width+r+this.height+r+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var r=this.calcOwnMatrix();if(l||!this.group)return r;var h=this.transformMatrixKey(l),b=this.matrixCache||(this.matrixCache={});return b.key===h?b.value:(this.group&&(r=v(this.group.calcTransformMatrix(!1),r)),b.key=h,b.value=r,r)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),r=this.ownMatrixCache||(this.ownMatrixCache={});if(r.key===l)return r.value;var h=this._calcTranslateMatrix(),b={angle:this.angle,translateX:h[4],translateY:h[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return r.key=l,r.value=s.composeMatrix(b),r.value},_calcDimensionsTransformMatrix:function(l,r,h){return s.calcDimensionsMatrix({skewX:l,skewY:r,scaleX:this.scaleX*(h&&this.flipX?-1:1),scaleY:this.scaleY*(h&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var l=this.strokeWidth,r=this.width+l,h=this.height+l;return{x:r,y:h}},_getTransformedDimensions:function(l,r){typeof l>"u"&&(l=this.skewX),typeof r>"u"&&(r=this.skewY);var h,b,f,S=l===0&&r===0;if(this.strokeUniform?(b=this.width,f=this.height):(h=this._getNonTransformedDimensions(),b=h.x,f=h.y),S)return this._finalizeDimensions(b*this.scaleX,f*this.scaleY);var E=s.sizeAfterTransform(b,f,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:r});return this._finalizeDimensions(E.x,E.y)},_finalizeDimensions:function(l,r){return this.strokeUniform?{x:l+this.strokeWidth,y:r+this.strokeWidth}:{x:l,y:r}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),r=this._getTransformedDimensions(),h=n(r,l,!0);return h.scalarAdd(2*this.padding)}})}(),u.util.object.extend(u.Object.prototype,{sendToBack:function(){return this.group?u.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?u.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(C){return this.group?u.StaticCanvas.prototype.sendBackwards.call(this.group,this,C):this.canvas&&this.canvas.sendBackwards(this,C),this},bringForward:function(C){return this.group?u.StaticCanvas.prototype.bringForward.call(this.group,this,C):this.canvas&&this.canvas.bringForward(this,C),this},moveTo:function(C){return this.group&&this.group.type!=="activeSelection"?u.StaticCanvas.prototype.moveTo.call(this.group,this,C):this.canvas&&this.canvas.moveTo(this,C),this}}),function(){function C(m,v){if(v){if(v.toLive)return m+": url(#SVGID_"+v.id+"); ";var n=new u.Color(v),l=m+": "+n.toRgb()+"; ",r=n.getAlpha();return r!==1&&(l+=m+"-opacity: "+r.toString()+"; "),l}else return m+": none; "}var s=u.util.toFixed;u.util.object.extend(u.Object.prototype,{getSvgStyles:function(m){var v=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",b=this.strokeLineJoin?this.strokeLineJoin:"miter",f=this.strokeMiterLimit?this.strokeMiterLimit:"4",S=typeof this.opacity<"u"?this.opacity:"1",E=this.visible?"":" visibility: hidden;",_=m?"":this.getSvgFilter(),O=C("fill",this.fill),j=C("stroke",this.stroke);return[j,"stroke-width: ",n,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",b,"; ","stroke-miterlimit: ",f,"; ",O,"fill-rule: ",v,"; ","opacity: ",S,";",_,E].join("")},getSvgSpanStyles:function(m,v){var n="; ",r=m.fontFamily?"font-family: "+(m.fontFamily.indexOf("'")===-1&&m.fontFamily.indexOf('"')===-1?"'"+m.fontFamily+"'":m.fontFamily)+n:"",l=m.strokeWidth?"stroke-width: "+m.strokeWidth+n:"",r=r,h=m.fontSize?"font-size: "+m.fontSize+"px"+n:"",b=m.fontStyle?"font-style: "+m.fontStyle+n:"",f=m.fontWeight?"font-weight: "+m.fontWeight+n:"",S=m.fill?C("fill",m.fill):"",E=m.stroke?C("stroke",m.stroke):"",_=this.getSvgTextDecoration(m),O=m.deltaY?"baseline-shift: "+-m.deltaY+"; ":"";return _&&(_="text-decoration: "+_+n),[E,l,r,h,b,f,_,S,O,v?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(m){return["overline","underline","line-through"].filter(function(v){return m[v.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(m,v){var n=m?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+u.util.matrixToSVG(n);return l+(v||"")+'" '},_setSVGBg:function(m){if(this.backgroundColor){var v=u.Object.NUM_FRACTION_DIGITS;m.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,v),'" y="',s(-this.height/2,v),'" width="',s(this.width,v),'" height="',s(this.height,v),`"></rect>
`)}},toSVG:function(m){return this._createBaseSVGMarkup(this._toSVG(m),{reviver:m})},toClipPathSVG:function(m){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(m),{reviver:m})},_createBaseClipPathSVGMarkup:function(m,v){v=v||{};var n=v.reviver,l=v.additionalTransform||"",r=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),h=m.indexOf("COMMON_PARTS");return m[h]=r,n?n(m.join("")):m.join("")},_createBaseSVGMarkup:function(m,v){v=v||{};var n=v.noStyle,l=v.reviver,r=n?"":'style="'+this.getSvgStyles()+'" ',h=v.withShadow?'style="'+this.getSvgFilter()+'" ':"",b=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",S=b&&b.absolutePositioned,E=this.stroke,_=this.fill,O=this.shadow,j,B=[],V,H=m.indexOf("COMMON_PARTS"),Y=v.additionalTransform;return b&&(b.clipPathId="CLIPPATH_"+u.Object.__uid++,V='<clipPath id="'+b.clipPathId+`" >
`+b.toClipPathSVG(l)+`</clipPath>
`),S&&B.push("<g ",h,this.getSvgCommons(),` >
`),B.push("<g ",this.getSvgTransform(!1),S?"":h+this.getSvgCommons(),` >
`),j=[r,f,n?"":this.addPaintOrder()," ",Y?'transform="'+Y+'" ':""].join(""),m[H]=j,_&&_.toLive&&B.push(_.toSVG(this)),E&&E.toLive&&B.push(E.toSVG(this)),O&&B.push(O.toSVG(this)),b&&B.push(V),B.push(m.join("")),B.push(`</g>
`),S&&B.push(`</g>
`),l?l(B.join("")):B.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var C=u.util.object.extend,s="stateProperties";function m(n,l,r){var h={},b=!0;r.forEach(function(f){h[f]=n[f]}),C(n[l],h,b)}function v(n,l,r){if(n===l)return!0;if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(var h=0,b=n.length;h<b;h++)if(!v(n[h],l[h]))return!1;return!0}else if(n&&typeof n=="object"){var f=Object.keys(n),S;if(!l||typeof l!="object"||!r&&f.length!==Object.keys(l).length)return!1;for(var h=0,b=f.length;h<b;h++)if(S=f[h],!(S==="canvas"||S==="group")&&!v(n[S],l[S]))return!1;return!0}}u.util.object.extend(u.Object.prototype,{hasStateChanged:function(n){n=n||s;var l="_"+n;return Object.keys(this[l]).length<this[n].length?!0:!v(this[l],this,!0)},saveState:function(n){var l=n&&n.propertySet||s,r="_"+l;return this[r]?(m(this,r,this[l]),n&&n.stateProperties&&m(this,r,n.stateProperties),this):this.setupState(n)},setupState:function(n){n=n||{};var l=n.propertySet||s;return n.propertySet=l,this["_"+l]={},this.saveState(n),this}})}(),function(){var C=u.util.degreesToRadians;u.util.object.extend(u.Object.prototype,{_findTargetCorner:function(s,m){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var v=s.x,n=s.y,l,r,h=Object.keys(this.oCoords),b=h.length-1,f;for(this.__corner=0;b>=0;b--)if(f=h[b],!!this.isControlVisible(f)&&(r=this._getImageLines(m?this.oCoords[f].touchCorner:this.oCoords[f].corner),l=this._findCrossPoints({x:v,y:n},r),l!==0&&l%2===1))return this.__corner=f,f;return!1},forEachControl:function(s){for(var m in this.controls)s(this.controls[m],m,this)},_setCornerCoords:function(){var s=this.oCoords;for(var m in s){var v=this.controls[m];s[m].corner=v.calcCornerCoords(this.angle,this.cornerSize,s[m].x,s[m].y,!1),s[m].touchCorner=v.calcCornerCoords(this.angle,this.touchCornerSize,s[m].x,s[m].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var m=this.getCenterPoint(),v=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return s.translate(m.x,m.y),s.scale(1/n[0],1/n[3]),s.rotate(C(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-v.x/2,-v.y/2,v.x,v.y),s.restore(),this},drawBorders:function(s,m){m=m||{};var v=this._calculateCurrentDimensions(),n=this.borderScaleFactor,l=v.x+n,r=v.y+n,h=typeof m.hasControls<"u"?m.hasControls:this.hasControls,b=!1;return s.save(),s.strokeStyle=m.borderColor||this.borderColor,this._setLineDash(s,m.borderDashArray||this.borderDashArray),s.strokeRect(-l/2,-r/2,l,r),h&&(s.beginPath(),this.forEachControl(function(f,S,E){f.withConnection&&f.getVisibility(E,S)&&(b=!0,s.moveTo(f.x*l,f.y*r),s.lineTo(f.x*l+f.offsetX,f.y*r+f.offsetY))}),b&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,m,v){v=v||{};var n=u.util.sizeAfterTransform(this.width,this.height,m),l=this.strokeWidth,r=this.strokeUniform,h=this.borderScaleFactor,b=n.x+l*(r?this.canvas.getZoom():m.scaleX)+h,f=n.y+l*(r?this.canvas.getZoom():m.scaleY)+h;return s.save(),this._setLineDash(s,v.borderDashArray||this.borderDashArray),s.strokeStyle=v.borderColor||this.borderColor,s.strokeRect(-b/2,-f/2,b,f),s.restore(),this},drawControls:function(s,m){m=m||{},s.save();var v=this.canvas.getRetinaScaling(),n,l;return s.setTransform(v,0,0,v,0,0),s.strokeStyle=s.fillStyle=m.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=m.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,m.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl(function(r,h,b){l=b.oCoords[h],r.getVisibility(b,h)&&(n&&(l=u.util.transformPoint(l,n)),r.render(s,l.x,l.y,m,b))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,m){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=m,this},setControlsVisibility:function(s){s||(s={});for(var m in s)this.setControlVisible(m,s[m]);return this},onDeselect:function(){},onSelect:function(){}})}(),u.util.object.extend(u.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(C,s){s=s||{};var m=function(){},v=s.onComplete||m,n=s.onChange||m,l=this;return u.util.animate({startValue:C.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(r){C.set("left",r),l.requestRenderAll(),n()},onComplete:function(){C.setCoords(),v()}}),this},fxCenterObjectV:function(C,s){s=s||{};var m=function(){},v=s.onComplete||m,n=s.onChange||m,l=this;return u.util.animate({startValue:C.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(r){C.set("top",r),l.requestRenderAll(),n()},onComplete:function(){C.setCoords(),v()}}),this},fxRemove:function(C,s){s=s||{};var m=function(){},v=s.onComplete||m,n=s.onChange||m,l=this;return u.util.animate({startValue:C.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(r){C.set("opacity",r),l.requestRenderAll(),n()},onComplete:function(){l.remove(C),v()}}),this}}),u.util.object.extend(u.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var C=[],s,m;for(s in arguments[0])C.push(s);for(var v=0,n=C.length;v<n;v++)s=C[v],m=v!==n-1,this._animate(s,arguments[0][s],arguments[1],m)}else this._animate.apply(this,arguments);return this},_animate:function(C,s,m,v){var n=this,l;s=s.toString(),m?m=u.util.object.clone(m):m={},~C.indexOf(".")&&(l=C.split("."));var r=n.colorProperties.indexOf(C)>-1||l&&n.colorProperties.indexOf(l[1])>-1,h=l?this.get(l[0])[l[1]]:this.get(C);"from"in m||(m.from=h),r||(~s.indexOf("=")?s=h+parseFloat(s.replace("=","")):s=parseFloat(s));var b={startValue:m.from,endValue:s,byValue:m.by,easing:m.easing,duration:m.duration,abort:m.abort&&function(f,S,E){return m.abort.call(n,f,S,E)},onChange:function(f,S,E){l?n[l[0]][l[1]]=f:n.set(C,f),!v&&m.onChange&&m.onChange(f,S,E)},onComplete:function(f,S,E){v||(n.setCoords(),m.onComplete&&m.onComplete(f,S,E))}};return r?u.util.animateColor(b.startValue,b.endValue,b.duration,b):u.util.animate(b)}}),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.extend,v=s.util.object.clone,n={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(r,h){r||(r=[0,0,0,0]),this.callSuper("initialize",h),this.set("x1",r[0]),this.set("y1",r[1]),this.set("x2",r[2]),this.set("y2",r[3]),this._setWidthHeight(h)},_setWidthHeight:function(r){r||(r={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in r?r.left:this._getLeftToOriginX(),this.top="top"in r?r.top:this._getTopToOriginY()},_set:function(r,h){return this.callSuper("_set",r,h),typeof n[r]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(r){r.beginPath();var h=this.calcLinePoints();r.moveTo(h.x1,h.y1),r.lineTo(h.x2,h.y2),r.lineWidth=this.strokeWidth;var b=r.strokeStyle;r.strokeStyle=this.stroke||r.fillStyle,this.stroke&&this._renderStroke(r),r.strokeStyle=b},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(r){return m(this.callSuper("toObject",r),this.calcLinePoints())},_getNonTransformedDimensions:function(){var r=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(r.y-=this.strokeWidth),this.height===0&&(r.x-=this.strokeWidth)),r},calcLinePoints:function(){var r=this.x1<=this.x2?-1:1,h=this.y1<=this.y2?-1:1,b=r*this.width*.5,f=h*this.height*.5,S=r*this.width*-.5,E=h*this.height*-.5;return{x1:b,x2:S,y1:f,y2:E}},_toSVG:function(){var r=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(r,h,b){b=b||{};var f=s.parseAttributes(r,s.Line.ATTRIBUTE_NAMES),S=[f.x1||0,f.y1||0,f.x2||0,f.y2||0];h(new s.Line(S,m(f,b)))},s.Line.fromObject=function(r,h){function b(S){delete S.points,h&&h(S)}var f=v(r,!0);f.points=[r.x1,r.y1,r.x2,r.y2],s.Object._fromObject("Line",f,b,"points")};function l(r,h){var b=r.origin,f=r.axis1,S=r.axis2,E=r.dimension,_=h.nearest,O=h.center,j=h.farthest;return function(){switch(this.get(b)){case _:return Math.min(this.get(f),this.get(S));case O:return Math.min(this.get(f),this.get(S))+.5*this.get(E);case j:return Math.max(this.get(f),this.get(S))}}}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=Math.PI;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:m*2,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(n,l){return this.callSuper("_set",n,l),n==="radius"&&this.setRadius(l),this},toObject:function(n){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(n))},_toSVG:function(){var n,l=0,r=0,h=(this.endAngle-this.startAngle)%(2*m);if(h===0)n=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+r+'" ','r="',this.radius,`" />
`];else{var b=s.util.cos(this.startAngle)*this.radius,f=s.util.sin(this.startAngle)*this.radius,S=s.util.cos(this.endAngle)*this.radius,E=s.util.sin(this.endAngle)*this.radius,_=h>m?"1":"0";n=['<path d="M '+b+" "+f," A "+this.radius+" "+this.radius," 0 ",+_+" 1"," "+S+" "+E,'" ',"COMMON_PARTS",` />
`]}return n},_render:function(n){n.beginPath(),n.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(n)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(n){return this.radius=n,this.set("width",n*2).set("height",n*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(n,l){var r=s.parseAttributes(n,s.Circle.ATTRIBUTE_NAMES);if(!v(r))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,l(new s.Circle(r))};function v(n){return"radius"in n&&n.radius>=0}s.Circle.fromObject=function(n,l){s.Object._fromObject("Circle",n,l)}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(m){var v=this.width/2,n=this.height/2;m.beginPath(),m.moveTo(-v,n),m.lineTo(0,-n),m.lineTo(v,n),m.closePath(),this._renderPaintInOrder(m)},_toSVG:function(){var m=this.width/2,v=this.height/2,n=[-m+" "+v,"0 "+-v,m+" "+v].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),s.Triangle.fromObject=function(m,v){return s.Object._fromObject("Triangle",m,v)}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(v){this.callSuper("initialize",v),this.set("rx",v&&v.rx||0),this.set("ry",v&&v.ry||0)},_set:function(v,n){switch(this.callSuper("_set",v,n),v){case"rx":this.rx=n,this.set("width",n*2);break;case"ry":this.ry=n,this.set("height",n*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(v){return this.callSuper("toObject",["rx","ry"].concat(v))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(v){v.beginPath(),v.save(),v.transform(1,0,0,this.ry/this.rx,0,0),v.arc(0,0,this.rx,0,m,!1),v.restore(),this._renderPaintInOrder(v)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(v,n){var l=s.parseAttributes(v,s.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,n(new s.Ellipse(l))},s.Ellipse.fromObject=function(v,n){s.Object._fromObject("Ellipse",v,n)}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(v){this.callSuper("initialize",v),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(v){var n=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,h=this.height,b=-this.width/2,f=-this.height/2,S=n!==0||l!==0,E=1-.5522847498;v.beginPath(),v.moveTo(b+n,f),v.lineTo(b+r-n,f),S&&v.bezierCurveTo(b+r-E*n,f,b+r,f+E*l,b+r,f+l),v.lineTo(b+r,f+h-l),S&&v.bezierCurveTo(b+r,f+h-E*l,b+r-E*n,f+h,b+r-n,f+h),v.lineTo(b+n,f+h),S&&v.bezierCurveTo(b+E*n,f+h,b,f+h-E*l,b,f+h-l),v.lineTo(b,f+l),S&&v.bezierCurveTo(b,f+E*l,b+E*n,f,b+n,f),v.closePath(),this._renderPaintInOrder(v)},toObject:function(v){return this.callSuper("toObject",["rx","ry"].concat(v))},_toSVG:function(){var v=-this.width/2,n=-this.height/2;return["<rect ","COMMON_PARTS",'x="',v,'" y="',n,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(v,n,l){if(!v)return n(null);l=l||{};var r=s.parseAttributes(v,s.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0,r.height=r.height||0,r.width=r.width||0;var h=new s.Rect(m(l?s.util.object.clone(l):{},r));h.visible=h.visible&&h.width>0&&h.height>0,n(h)},s.Rect.fromObject=function(v,n){return s.Object._fromObject("Rect",v,n)}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.extend,v=s.util.array.min,n=s.util.array.max,l=s.util.toFixed;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(r,h){h=h||{},this.points=r||[],this.callSuper("initialize",h),this._setPositionDimensions(h)},_setPositionDimensions:function(r){var h=this._calcDimensions(r),b;this.width=h.width,this.height=h.height,r.fromSVG||(b=this.translateToGivenOrigin({x:h.left-this.strokeWidth/2,y:h.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof r.left>"u"&&(this.left=r.fromSVG?h.left:b.x),typeof r.top>"u"&&(this.top=r.fromSVG?h.top:b.y),this.pathOffset={x:h.left+this.width/2,y:h.top+this.height/2}},_calcDimensions:function(){var r=this.points,h=v(r,"x")||0,b=v(r,"y")||0,f=n(r,"x")||0,S=n(r,"y")||0,E=f-h,_=S-b;return{left:h,top:b,width:E,height:_}},toObject:function(r){return m(this.callSuper("toObject",r),{points:this.points.concat()})},_toSVG:function(){for(var r=[],h=this.pathOffset.x,b=this.pathOffset.y,f=s.Object.NUM_FRACTION_DIGITS,S=0,E=this.points.length;S<E;S++)r.push(l(this.points[S].x-h,f),",",l(this.points[S].y-b,f)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',r.join(""),`" />
`]},commonRender:function(r){var h,b=this.points.length,f=this.pathOffset.x,S=this.pathOffset.y;if(!b||isNaN(this.points[b-1].y))return!1;r.beginPath(),r.moveTo(this.points[0].x-f,this.points[0].y-S);for(var E=0;E<b;E++)h=this.points[E],r.lineTo(h.x-f,h.y-S);return!0},_render:function(r){this.commonRender(r)&&this._renderPaintInOrder(r)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(r){return function(h,b,f){if(!h)return b(null);f||(f={});var S=s.parsePointsAttribute(h.getAttribute("points")),E=s.parseAttributes(h,s[r].ATTRIBUTE_NAMES);E.fromSVG=!0,b(new s[r](S,m(E,f)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(r,h){return s.Object._fromObject("Polyline",r,h,"points")}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_render:function(m){this.commonRender(m)&&(m.closePath(),this._renderPaintInOrder(m))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(m,v){s.Object._fromObject("Polygon",m,v,"points")}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.array.min,v=s.util.array.max,n=s.util.object.extend,l=Object.prototype.toString,r=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(h,b){b=b||{},this.callSuper("initialize",b),h||(h=[]);var f=l.call(h)==="[object Array]";this.path=s.util.makePathSimpler(f?h:s.util.parsePath(h)),this.path&&s.Polyline.prototype._setPositionDimensions.call(this,b)},_renderPathCommands:function(h){var b,f=0,S=0,E=0,_=0,O=0,j=0,B=-this.pathOffset.x,V=-this.pathOffset.y;h.beginPath();for(var H=0,Y=this.path.length;H<Y;++H)switch(b=this.path[H],b[0]){case"L":E=b[1],_=b[2],h.lineTo(E+B,_+V);break;case"M":E=b[1],_=b[2],f=E,S=_,h.moveTo(E+B,_+V);break;case"C":E=b[5],_=b[6],O=b[3],j=b[4],h.bezierCurveTo(b[1]+B,b[2]+V,O+B,j+V,E+B,_+V);break;case"Q":h.quadraticCurveTo(b[1]+B,b[2]+V,b[3]+B,b[4]+V),E=b[3],_=b[4],O=b[1],j=b[2];break;case"z":case"Z":E=f,_=S,h.closePath();break}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return n(this.callSuper("toObject",h),{path:this.path.map(function(b){return b.slice()})})},toDatalessObject:function(h){var b=this.toObject(["sourcePath"].concat(h));return b.sourcePath&&delete b.path,b},_toSVG:function(){var h=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',h,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var h=s.Object.NUM_FRACTION_DIGITS;return" translate("+r(-this.pathOffset.x,h)+", "+r(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var b=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:b})},toSVG:function(h){var b=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:b})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var h=[],b=[],f,S=0,E=0,_=0,O=0,j,B=0,V=this.path.length;B<V;++B){switch(f=this.path[B],f[0]){case"L":_=f[1],O=f[2],j=[];break;case"M":_=f[1],O=f[2],S=_,E=O,j=[];break;case"C":j=s.util.getBoundsOfCurve(_,O,f[1],f[2],f[3],f[4],f[5],f[6]),_=f[5],O=f[6];break;case"Q":j=s.util.getBoundsOfCurve(_,O,f[1],f[2],f[1],f[2],f[3],f[4]),_=f[3],O=f[4];break;case"z":case"Z":_=S,O=E;break}j.forEach(function(Ce){h.push(Ce.x),b.push(Ce.y)}),h.push(_),b.push(O)}var H=m(h)||0,Y=m(b)||0,se=v(h)||0,ne=v(b)||0,be=se-H,K=ne-Y;return{left:H,top:Y,width:be,height:K}}}),s.Path.fromObject=function(h,b){if(typeof h.sourcePath=="string"){var f=h.sourcePath;s.loadSVGFromURL(f,function(S){var E=S[0];E.setOptions(h),b&&b(E)})}else s.Object._fromObject("Path",h,b,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(h,b,f){var S=s.parseAttributes(h,s.Path.ATTRIBUTE_NAMES);S.fromSVG=!0,b(new s.Path(S.d,n(S,f)))}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.array.min,v=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(n,l,r){l=l||{},this._objects=[],r&&this.callSuper("initialize",l),this._objects=n||[];for(var h=this._objects.length;h--;)this._objects[h].group=this;if(r)this._updateObjectsACoords();else{var b=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),b||this._calcBounds(),this._updateObjectsCoords(b),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var n=!0,l=this._objects.length;l--;)this._objects[l].setCoords(n)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),r=this._objects.length;r--;)this._updateObjectCoords(this._objects[r],l)},_updateObjectCoords:function(n,l){var r=n.left,h=n.top,b=!0;n.set({left:r-l.x,top:h-l.y}),n.group=this,n.setCoords(b)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(n){var l=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),n&&(l&&s.util.removeTransformFromObject(n,this.group.calcTransformMatrix()),this._objects.push(n),n.group=this,n._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(n){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(n),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(n){this.dirty=!0,n.group=this,n._set("canvas",this.canvas)},_onObjectRemoved:function(n){this.dirty=!0,delete n.group},_set:function(n,l){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(n,l);if(n==="canvas")for(;r--;)this._objects[r]._set(n,l);s.Object.prototype._set.call(this,n,l)},toObject:function(n){var l=this.includeDefaultValues,r=this._objects.filter(function(b){return!b.excludeFromExport}).map(function(b){var f=b.includeDefaultValues;b.includeDefaultValues=l;var S=b.toObject(n);return b.includeDefaultValues=f,S}),h=s.Object.prototype.toObject.call(this,n);return h.objects=r,h},toDatalessObject:function(n){var l,r=this.sourcePath;if(r)l=r;else{var h=this.includeDefaultValues;l=this._objects.map(function(f){var S=f.includeDefaultValues;f.includeDefaultValues=h;var E=f.toDatalessObject(n);return f.includeDefaultValues=S,E})}var b=s.Object.prototype.toDatalessObject.call(this,n);return b.objects=l,b},render:function(n){this._transformDone=!0,this.callSuper("render",n),this._transformDone=!1},shouldCache:function(){var n=s.Object.prototype.shouldCache.call(this);if(n){for(var l=0,r=this._objects.length;l<r;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return n},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var n=0,l=this._objects.length;n<l;n++)if(this._objects[n].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(n){for(var l=0,r=this._objects.length;l<r;l++)this._objects[l].render(n);this._drawClipPath(n)},isCacheDirty:function(n){if(this.callSuper("isCacheDirty",n))return!0;if(!this.statefullCache)return!1;for(var l=0,r=this._objects.length;l<r;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var h=this.cacheWidth/this.zoomX,b=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-b/2,h,b)}return!0}return!1},_restoreObjectsState:function(){var n=this.calcOwnMatrix();return this._objects.forEach(function(l){s.util.addTransformToObject(l,n),delete l.group,l.setCoords()}),this},realizeTransform:function(n,l){return s.util.addTransformToObject(n,l),n},destroy:function(){return this._objects.forEach(function(n){n.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var n=this._objects,l=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var h=new s.ActiveSelection([]);return h.set(r),h.type="activeSelection",l.remove(this),n.forEach(function(b){b.group=h,b.dirty=!0,l.add(b)}),h.canvas=l,h._objects=n,l._activeObject=h,h.setCoords(),h}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var n=!0;return this.forEachObject(function(l){l.setCoords(n)}),this},_calcBounds:function(n){for(var l=[],r=[],h,b,f,S=["tr","br","bl","tl"],E=0,_=this._objects.length,O,j=S.length;E<_;++E){for(h=this._objects[E],f=h.calcACoords(),O=0;O<j;O++)b=S[O],l.push(f[b].x),r.push(f[b].y);h.aCoords=f}this._getBounds(l,r,n)},_getBounds:function(n,l,r){var h=new s.Point(m(n),m(l)),b=new s.Point(v(n),v(l)),f=h.y||0,S=h.x||0,E=b.x-h.x||0,_=b.y-h.y||0;this.width=E,this.height=_,r||this.setPositionByOrigin({x:S,y:f},"left","top")},_toSVG:function(n){for(var l=["<g ","COMMON_PARTS",` >
`],r=0,h=this._objects.length;r<h;r++)l.push("		",this._objects[r].toSVG(n));return l.push(`</g>
`),l},getSvgStyles:function(){var n=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[n,this.getSvgFilter(),l].join("")},toClipPathSVG:function(n){for(var l=[],r=0,h=this._objects.length;r<h;r++)l.push("	",this._objects[r].toClipPathSVG(n));return this._createBaseClipPathSVGMarkup(l,{reviver:n})}}),s.Group.fromObject=function(n,l){var r=n.objects,h=s.util.object.clone(n,!0);if(delete h.objects,typeof r=="string"){s.loadSVGFromURL(r,function(b){var f=s.util.groupSVGElements(b,n,r);f.set(h),l&&l(f)});return}s.util.enlivenObjects(r,function(b){s.util.enlivenObjects([n.clipPath],function(f){var S=s.util.object.clone(n,!0);S.clipPath=f[0],delete S.objects,l&&l(new s.Group(b,S,!0))})})})}(x),function(C){"use strict";var s=C.fabric||(C.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(m,v){v=v||{},this._objects=m||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;v.originX&&(this.originX=v.originX),v.originY&&(this.originY=v.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,v),this.setCoords()},toGroup:function(){var m=this._objects.concat();this._objects=[];var v=s.Object.prototype.toObject.call(this),n=new s.Group([]);if(delete v.type,n.set(v),m.forEach(function(r){r.canvas.remove(r),r.group=n}),n._objects=m,!this.canvas)return n;var l=this.canvas;return l.add(n),l._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(m,v,n){m.save(),m.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",m,v),n=n||{},typeof n.hasControls>"u"&&(n.hasControls=!1),n.forActiveSelection=!0;for(var l=0,r=this._objects.length;l<r;l++)this._objects[l]._renderControls(m,n);m.restore()}}),s.ActiveSelection.fromObject=function(m,v){s.util.enlivenObjects(m.objects,function(n){delete m.objects,v&&v(new s.ActiveSelection(n,m,!0))})})}(x),function(C){"use strict";var s=u.util.object.extend;if(C.fabric||(C.fabric={}),C.fabric.Image){u.warn("fabric.Image is already defined.");return}u.Image=u.util.createClass(u.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:u.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:u.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(m,v){v||(v={}),this.filters=[],this.cacheKey="texture"+u.Object.__uid++,this.callSuper("initialize",v),this._initElement(m,v)},getElement:function(){return this._element||{}},setElement:function(m,v){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=m,this._originalElement=m,this._initConfig(v),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(m){var v=u.filterBackend;v&&v.evictCachesForKey&&v.evictCachesForKey(m)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(m){u.util.cleanUpJsdomNode(this[m]),this[m]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var m=this.getElement();return{width:m.naturalWidth||m.width,height:m.naturalHeight||m.height}},_stroke:function(m){if(!(!this.stroke||this.strokeWidth===0)){var v=this.width/2,n=this.height/2;m.beginPath(),m.moveTo(-v,-n),m.lineTo(v,-n),m.lineTo(v,n),m.lineTo(-v,n),m.lineTo(-v,-n),m.closePath()}},toObject:function(m){var v=[];this.filters.forEach(function(l){l&&v.push(l.toObject())});var n=s(this.callSuper("toObject",["cropX","cropY"].concat(m)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:v});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var m=[],v=[],n,l=this._element,r=-this.width/2,h=-this.height/2,b="",f="";if(!l)return[];if(this.hasCrop()){var S=u.Object.__uid++;m.push('<clipPath id="imageCrop_'+S+`">
`,'	<rect x="'+r+'" y="'+h+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),b=' clip-path="url(#imageCrop_'+S+')" '}if(this.imageSmoothing||(f='" image-rendering="optimizeSpeed'),v.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',h-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,f,'"',b,`></image>
`),this.stroke||this.strokeDashArray){var E=this.fill;this.fill=null,n=["	<rect ",'x="',r,'" y="',h,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=E}return this.paintFirst!=="fill"?m=m.concat(n,v):m=m.concat(v,n),m},getSrc:function(m){var v=m?this._element:this._originalElement;return v?v.toDataURL?v.toDataURL():this.srcFromAttribute?v.getAttribute("src"):v.src:this.src||""},setSrc:function(m,v,n){return u.util.loadImage(m,function(l,r){this.setElement(l,n),this._setWidthHeight(),v&&v(this,r)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var m=this.resizeFilter,v=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),l=n.scaleX,r=n.scaleY,h=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!m||l>v&&r>v){this._element=h,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=r;return}u.filterBackend||(u.filterBackend=u.initFilterBackend());var b=u.util.createCanvasElement(),f=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,S=h.width,E=h.height;b.width=S,b.height=E,this._element=b,this._lastScaleX=m.scaleX=l,this._lastScaleY=m.scaleY=r,u.filterBackend.applyFilters([m],h,S,E,this._element,f),this._filterScalingX=b.width/this._originalElement.width,this._filterScalingY=b.height/this._originalElement.height},applyFilters:function(m){if(m=m||this.filters||[],m=m.filter(function(h){return h&&!h.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),m.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var v=this._originalElement,n=v.naturalWidth||v.width,l=v.naturalHeight||v.height;if(this._element===this._originalElement){var r=u.util.createCanvasElement();r.width=n,r.height=l,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,l),this._lastScaleX=1,this._lastScaleY=1;return u.filterBackend||(u.filterBackend=u.initFilterBackend()),u.filterBackend.applyFilters(m,this._originalElement,n,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(m){u.util.setImageSmoothing(m,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(m),this._renderPaintInOrder(m)},drawCacheOnCanvas:function(m){u.util.setImageSmoothing(m,this.imageSmoothing),u.Object.prototype.drawCacheOnCanvas.call(this,m)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(m){var v=this._element;if(v){var n=this._filterScalingX,l=this._filterScalingY,r=this.width,h=this.height,b=Math.min,f=Math.max,S=f(this.cropX,0),E=f(this.cropY,0),_=v.naturalWidth||v.width,O=v.naturalHeight||v.height,j=S*n,B=E*l,V=b(r*n,_-j),H=b(h*l,O-B),Y=-r/2,se=-h/2,ne=b(r,_/n-S),be=b(h,O/l-E);v&&m.drawImage(v,j,B,V,H,Y,se,ne,be)}},_needsResize:function(){var m=this.getTotalObjectScaling();return m.scaleX!==this._lastScaleX||m.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(m,v){this.setElement(u.util.getById(m),v),u.util.addClass(this.getElement(),u.Image.CSS_CANVAS)},_initConfig:function(m){m||(m={}),this.setOptions(m),this._setWidthHeight(m)},_initFilters:function(m,v){m&&m.length?u.util.enlivenObjects(m,function(n){v&&v(n)},"fabric.Image.filters"):v&&v()},_setWidthHeight:function(m){m||(m={});var v=this.getElement();this.width=m.width||v.naturalWidth||v.width||0,this.height=m.height||v.naturalHeight||v.height||0},parsePreserveAspectRatioAttribute:function(){var m=u.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),v=this._element.width,n=this._element.height,l=1,r=1,h=0,b=0,f=0,S=0,E,_=this.width,O=this.height,j={width:_,height:O};return m&&(m.alignX!=="none"||m.alignY!=="none")?(m.meetOrSlice==="meet"&&(l=r=u.util.findScaleToFit(this._element,j),E=(_-v*l)/2,m.alignX==="Min"&&(h=-E),m.alignX==="Max"&&(h=E),E=(O-n*r)/2,m.alignY==="Min"&&(b=-E),m.alignY==="Max"&&(b=E)),m.meetOrSlice==="slice"&&(l=r=u.util.findScaleToCover(this._element,j),E=v-_/l,m.alignX==="Mid"&&(f=E/2),m.alignX==="Max"&&(f=E),E=n-O/r,m.alignY==="Mid"&&(S=E/2),m.alignY==="Max"&&(S=E),v=_/l,n=O/r)):(l=_/v,r=O/n),{width:v,height:n,scaleX:l,scaleY:r,offsetLeft:h,offsetTop:b,cropX:f,cropY:S}}}),u.Image.CSS_CANVAS="canvas-img",u.Image.prototype.getSvgSrc=u.Image.prototype.getSrc,u.Image.fromObject=function(m,v){var n=u.util.object.clone(m);u.util.loadImage(n.src,function(l,r){if(r){v&&v(null,!0);return}u.Image.prototype._initFilters.call(n,n.filters,function(h){n.filters=h||[],u.Image.prototype._initFilters.call(n,[n.resizeFilter],function(b){n.resizeFilter=b[0],u.util.enlivenObjects([n.clipPath],function(f){n.clipPath=f[0];var S=new u.Image(l,n);v(S,!1)})})})},null,n.crossOrigin)},u.Image.fromURL=function(m,v,n){u.util.loadImage(m,function(l,r){v&&v(new u.Image(l,n),r)},null,n&&n.crossOrigin)},u.Image.ATTRIBUTE_NAMES=u.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),u.Image.fromElement=function(m,v,n){var l=u.parseAttributes(m,u.Image.ATTRIBUTE_NAMES);u.Image.fromURL(l["xlink:href"],v,s(n?u.util.object.clone(n):{},l))}}(x),u.util.object.extend(u.Object.prototype,{_getAngleValueForStraighten:function(){var C=this.angle%360;return C>0?Math.round((C-1)/90)*90:Math.round(C/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(C){C=C||{};var s=function(){},m=C.onComplete||s,v=C.onChange||s,n=this;return u.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){n.rotate(l),v()},onComplete:function(){n.setCoords(),m()}}),this}}),u.util.object.extend(u.StaticCanvas.prototype,{straightenObject:function(C){return C.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(C){return C.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function C(m,v){var n="precision "+v+` float;
void main(){}`,l=m.createShader(m.FRAGMENT_SHADER);return m.shaderSource(l,n),m.compileShader(l),!!m.getShaderParameter(l,m.COMPILE_STATUS)}u.isWebglSupported=function(m){if(u.isLikelyNode)return!1;m=m||u.WebglFilterBackend.prototype.tileSize;var v=document.createElement("canvas"),n=v.getContext("webgl")||v.getContext("experimental-webgl"),l=!1;if(n){u.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),l=u.maxTextureSize>=m;for(var r=["highp","mediump","lowp"],h=0;h<3;h++)if(C(n,r[h])){u.webGlPrecision=r[h];break}}return this.isSupported=l,l},u.WebglFilterBackend=s;function s(m){m&&m.tileSize&&(this.tileSize=m.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(m,v){this.dispose(),this.createWebGLCanvas(m,v),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(m,v)},chooseFastestCopyGLTo2DMethod:function(m,v){var n=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var r=typeof ArrayBuffer<"u",h=typeof Uint8ClampedArray<"u";if(n&&l&&r&&h){var b=u.util.createCanvasElement(),f=new ArrayBuffer(m*v*4);if(u.forceGLPutImageData){this.imageBuffer=f,this.copyGLTo2D=R;return}var S={imageBuffer:f,destinationWidth:m,destinationHeight:v,targetCanvas:b},E,_,O;b.width=m,b.height=v,E=window.performance.now(),F.call(S,this.gl,S),_=window.performance.now()-E,E=window.performance.now(),R.call(S,this.gl,S),O=window.performance.now()-E,_>O?(this.imageBuffer=f,this.copyGLTo2D=R):this.copyGLTo2D=F}},createWebGLCanvas:function(m,v){var n=u.util.createCanvasElement();n.width=m,n.height=v;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=n.getContext("webgl",l);r||(r=n.getContext("experimental-webgl",l)),r&&(r.clearColor(0,0,0,0),this.canvas=n,this.gl=r)},applyFilters:function(m,v,n,l,r,h){var b=this.gl,f;h&&(f=this.getCachedTexture(h,v));var S={originalWidth:v.width||v.originalWidth,originalHeight:v.height||v.originalHeight,sourceWidth:n,sourceHeight:l,destinationWidth:n,destinationHeight:l,context:b,sourceTexture:this.createTexture(b,n,l,!f&&v),targetTexture:this.createTexture(b,n,l),originalTexture:f||this.createTexture(b,n,l,!f&&v),passes:m.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},E=b.createFramebuffer();return b.bindFramebuffer(b.FRAMEBUFFER,E),m.forEach(function(_){_&&_.applyTo(S)}),L(S),this.copyGLTo2D(b,S),b.bindTexture(b.TEXTURE_2D,null),b.deleteTexture(S.sourceTexture),b.deleteTexture(S.targetTexture),b.deleteFramebuffer(E),r.getContext("2d").setTransform(1,0,0,1,0,0),S},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(m,v,n,l){var r=m.createTexture();return m.bindTexture(m.TEXTURE_2D,r),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),l?m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,l):m.texImage2D(m.TEXTURE_2D,0,m.RGBA,v,n,0,m.RGBA,m.UNSIGNED_BYTE,null),r},getCachedTexture:function(m,v){if(this.textureCache[m])return this.textureCache[m];var n=this.createTexture(this.gl,v.width,v.height,v);return this.textureCache[m]=n,n},evictCachesForKey:function(m){this.textureCache[m]&&(this.gl.deleteTexture(this.textureCache[m]),delete this.textureCache[m])},copyGLTo2D:F,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var m=this.gl,v={renderer:"",vendor:""};if(!m)return v;var n=m.getExtension("WEBGL_debug_renderer_info");if(n){var l=m.getParameter(n.UNMASKED_RENDERER_WEBGL),r=m.getParameter(n.UNMASKED_VENDOR_WEBGL);l&&(v.renderer=l.toLowerCase()),r&&(v.vendor=r.toLowerCase())}return this.gpuInfo=v,v}}}();function L(C){var s=C.targetCanvas,m=s.width,v=s.height,n=C.destinationWidth,l=C.destinationHeight;(m!==n||v!==l)&&(s.width=n,s.height=l)}function F(C,s){var m=C.canvas,v=s.targetCanvas,n=v.getContext("2d");n.translate(0,v.height),n.scale(1,-1);var l=m.height-v.height;n.drawImage(m,0,l,v.width,v.height,0,0,v.width,v.height)}function R(C,s){var m=s.targetCanvas,v=m.getContext("2d"),n=s.destinationWidth,l=s.destinationHeight,r=n*l*4,h=new Uint8Array(this.imageBuffer,0,r),b=new Uint8ClampedArray(this.imageBuffer,0,r);C.readPixels(0,0,n,l,C.RGBA,C.UNSIGNED_BYTE,h);var f=new ImageData(b,n,l);v.putImageData(f,0,0)}(function(){"use strict";var C=function(){};u.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:C,dispose:C,clearWebGLCaches:C,resources:{},applyFilters:function(m,v,n,l,r){var h=r.getContext("2d");h.drawImage(v,0,0,n,l);var b=h.getImageData(0,0,n,l),f=h.getImageData(0,0,n,l),S={sourceWidth:n,sourceHeight:l,imageData:b,originalEl:v,originalImageData:f,canvasEl:r,ctx:h,filterBackend:this};return m.forEach(function(E){E.applyTo(S)}),(S.imageData.width!==n||S.imageData.height!==l)&&(r.width=S.imageData.width,r.height=S.imageData.height),h.putImageData(S.imageData,0,0),S}}})(),u.Image=u.Image||{},u.Image.filters=u.Image.filters||{},u.Image.filters.BaseFilter=u.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(C){C&&this.setOptions(C)},setOptions:function(C){for(var s in C)this[s]=C[s]},createProgram:function(C,s,m){s=s||this.fragmentSource,m=m||this.vertexSource,u.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+u.webGlPrecision+" float"));var v=C.createShader(C.VERTEX_SHADER);if(C.shaderSource(v,m),C.compileShader(v),!C.getShaderParameter(v,C.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+C.getShaderInfoLog(v));var n=C.createShader(C.FRAGMENT_SHADER);if(C.shaderSource(n,s),C.compileShader(n),!C.getShaderParameter(n,C.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+C.getShaderInfoLog(n));var l=C.createProgram();if(C.attachShader(l,v),C.attachShader(l,n),C.linkProgram(l),!C.getProgramParameter(l,C.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+C.getProgramInfoLog(l));var r=this.getAttributeLocations(C,l),h=this.getUniformLocations(C,l)||{};return h.uStepW=C.getUniformLocation(l,"uStepW"),h.uStepH=C.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:r,uniformLocations:h}},getAttributeLocations:function(C,s){return{aPosition:C.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(C,s,m){var v=s.aPosition,n=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,n),C.enableVertexAttribArray(v),C.vertexAttribPointer(v,2,C.FLOAT,!1,0,0),C.bufferData(C.ARRAY_BUFFER,m,C.STATIC_DRAW)},_setupFrameBuffer:function(C){var s=C.context,m,v;C.passes>1?(m=C.destinationWidth,v=C.destinationHeight,(C.sourceWidth!==m||C.sourceHeight!==v)&&(s.deleteTexture(C.targetTexture),C.targetTexture=C.filterBackend.createTexture(s,m,v)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,C.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(C){C.passes--,C.pass++;var s=C.targetTexture;C.targetTexture=C.sourceTexture,C.sourceTexture=s},isNeutralState:function(){var C=this.mainParameter,s=u.Image.filters[this.type].prototype;if(C)if(Array.isArray(s[C])){for(var m=s[C].length;m--;)if(this[C][m]!==s[C][m])return!1;return!0}else return s[C]===this[C];else return!1},applyTo:function(C){C.webgl?(this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C)):this.applyTo2d(C)},retrieveShader:function(C){return C.programCache.hasOwnProperty(this.type)||(C.programCache[this.type]=this.createProgram(C.context)),C.programCache[this.type]},applyToWebGL:function(C){var s=C.context,m=this.retrieveShader(C);C.pass===0&&C.originalTexture?s.bindTexture(s.TEXTURE_2D,C.originalTexture):s.bindTexture(s.TEXTURE_2D,C.sourceTexture),s.useProgram(m.program),this.sendAttributeData(s,m.attributeLocations,C.aPosition),s.uniform1f(m.uniformLocations.uStepW,1/C.sourceWidth),s.uniform1f(m.uniformLocations.uStepH,1/C.sourceHeight),this.sendUniformData(s,m.uniformLocations),s.viewport(0,0,C.destinationWidth,C.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(C,s,m){C.activeTexture(m),C.bindTexture(C.TEXTURE_2D,s),C.activeTexture(C.TEXTURE0)},unbindAdditionalTexture:function(C,s){C.activeTexture(s),C.bindTexture(C.TEXTURE_2D,null),C.activeTexture(C.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(C){this[this.mainParameter]=C},sendUniformData:function(){},createHelpLayer:function(C){if(!C.helpLayer){var s=document.createElement("canvas");s.width=C.sourceWidth,s.height=C.sourceHeight,C.helpLayer=s}},toObject:function(){var C={type:this.type},s=this.mainParameter;return s&&(C[s]=this[s]),C},toJSON:function(){return this.toObject()}}),u.Image.filters.BaseFilter.fromObject=function(C,s){var m=new u.Image.filters[C.type](C);return s&&s(m),m},function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.ColorMatrix=v(m.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(n){this.callSuper("initialize",n),this.matrix=this.matrix.slice(0)},applyTo2d:function(n){var l=n.imageData,r=l.data,h=r.length,b=this.matrix,f,S,E,_,O,j=this.colorsOnly;for(O=0;O<h;O+=4)f=r[O],S=r[O+1],E=r[O+2],j?(r[O]=f*b[0]+S*b[1]+E*b[2]+b[4]*255,r[O+1]=f*b[5]+S*b[6]+E*b[7]+b[9]*255,r[O+2]=f*b[10]+S*b[11]+E*b[12]+b[14]*255):(_=r[O+3],r[O]=f*b[0]+S*b[1]+E*b[2]+_*b[3]+b[4]*255,r[O+1]=f*b[5]+S*b[6]+E*b[7]+_*b[8]+b[9]*255,r[O+2]=f*b[10]+S*b[11]+E*b[12]+_*b[13]+b[14]*255,r[O+3]=f*b[15]+S*b[16]+E*b[17]+_*b[18]+b[19]*255)},getUniformLocations:function(n,l){return{uColorMatrix:n.getUniformLocation(l,"uColorMatrix"),uConstants:n.getUniformLocation(l,"uConstants")}},sendUniformData:function(n,l){var r=this.matrix,h=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],b=[r[4],r[9],r[14],r[19]];n.uniformMatrix4fv(l.uColorMatrix,!1,h),n.uniform4fv(l.uConstants,b)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Brightness=v(m.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(n){if(this.brightness!==0){var l=n.imageData,r=l.data,h,b=r.length,f=Math.round(this.brightness*255);for(h=0;h<b;h+=4)r[h]=r[h]+f,r[h+1]=r[h+1]+f,r[h+2]=r[h+2]+f}},getUniformLocations:function(n,l){return{uBrightness:n.getUniformLocation(l,"uBrightness")}},sendUniformData:function(n,l){n.uniform1f(l.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.extend,v=s.Image.filters,n=s.util.createClass;v.Convolute=n(v.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var r=Math.sqrt(this.matrix.length),h=this.type+"_"+r+"_"+(this.opaque?1:0),b=this.fragmentSource[h];return l.programCache.hasOwnProperty(h)||(l.programCache[h]=this.createProgram(l.context,b)),l.programCache[h]},applyTo2d:function(l){var r=l.imageData,h=r.data,b=this.matrix,f=Math.round(Math.sqrt(b.length)),S=Math.floor(f/2),E=r.width,_=r.height,O=l.ctx.createImageData(E,_),j=O.data,B=this.opaque?1:0,V,H,Y,se,ne,be,K,Ce,W,Be,Ie,ze,te;for(Ie=0;Ie<_;Ie++)for(Be=0;Be<E;Be++){for(ne=(Ie*E+Be)*4,V=0,H=0,Y=0,se=0,te=0;te<f;te++)for(ze=0;ze<f;ze++)K=Ie+te-S,be=Be+ze-S,!(K<0||K>=_||be<0||be>=E)&&(Ce=(K*E+be)*4,W=b[te*f+ze],V+=h[Ce]*W,H+=h[Ce+1]*W,Y+=h[Ce+2]*W,B||(se+=h[Ce+3]*W));j[ne]=V,j[ne+1]=H,j[ne+2]=Y,B?j[ne+3]=h[ne+3]:j[ne+3]=se}l.imageData=O},getUniformLocations:function(l,r){return{uMatrix:l.getUniformLocation(r,"uMatrix"),uOpaque:l.getUniformLocation(r,"uOpaque"),uHalfSize:l.getUniformLocation(r,"uHalfSize"),uSize:l.getUniformLocation(r,"uSize")}},sendUniformData:function(l,r){l.uniform1fv(r.uMatrix,this.matrix)},toObject:function(){return m(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Grayscale=v(m.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(n){var l=n.imageData,r=l.data,h,b=r.length,f,S=this.mode;for(h=0;h<b;h+=4)S==="average"?f=(r[h]+r[h+1]+r[h+2])/3:S==="lightness"?f=(Math.min(r[h],r[h+1],r[h+2])+Math.max(r[h],r[h+1],r[h+2]))/2:S==="luminosity"&&(f=.21*r[h]+.72*r[h+1]+.07*r[h+2]),r[h]=f,r[h+1]=f,r[h+2]=f},retrieveShader:function(n){var l=this.type+"_"+this.mode;if(!n.programCache.hasOwnProperty(l)){var r=this.fragmentSource[this.mode];n.programCache[l]=this.createProgram(n.context,r)}return n.programCache[l]},getUniformLocations:function(n,l){return{uMode:n.getUniformLocation(l,"uMode")}},sendUniformData:function(n,l){var r=1;n.uniform1i(l.uMode,r)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Invert=v(m.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(n){var l=n.imageData,r=l.data,h,b=r.length;for(h=0;h<b;h+=4)r[h]=255-r[h],r[h+1]=255-r[h+1],r[h+2]=255-r[h+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(n,l){return{uInvert:n.getUniformLocation(l,"uInvert")}},sendUniformData:function(n,l){n.uniform1i(l.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.extend,v=s.Image.filters,n=s.util.createClass;v.Noise=n(v.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var r=l.imageData,h=r.data,b,f=h.length,S=this.noise,E;for(b=0,f=h.length;b<f;b+=4)E=(.5-Math.random())*S,h[b]+=E,h[b+1]+=E,h[b+2]+=E}},getUniformLocations:function(l,r){return{uNoise:l.getUniformLocation(r,"uNoise"),uSeed:l.getUniformLocation(r,"uSeed")}},sendUniformData:function(l,r){l.uniform1f(r.uNoise,this.noise/255),l.uniform1f(r.uSeed,Math.random())},toObject:function(){return m(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Pixelate=v(m.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(n){var l=n.imageData,r=l.data,h=l.height,b=l.width,f,S,E,_,O,j,B,V,H,Y,se;for(S=0;S<h;S+=this.blocksize)for(E=0;E<b;E+=this.blocksize)for(f=S*4*b+E*4,_=r[f],O=r[f+1],j=r[f+2],B=r[f+3],Y=Math.min(S+this.blocksize,h),se=Math.min(E+this.blocksize,b),V=S;V<Y;V++)for(H=E;H<se;H++)f=V*4*b+H*4,r[f]=_,r[f+1]=O,r[f+2]=j,r[f+3]=B},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(n,l){return{uBlocksize:n.getUniformLocation(l,"uBlocksize"),uStepW:n.getUniformLocation(l,"uStepW"),uStepH:n.getUniformLocation(l,"uStepH")}},sendUniformData:function(n,l){n.uniform1f(l.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.extend,v=s.Image.filters,n=s.util.createClass;v.RemoveColor=n(v.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var r=l.imageData,h=r.data,b,f=this.distance*255,S,E,_,O=new s.Color(this.color).getSource(),j=[O[0]-f,O[1]-f,O[2]-f],B=[O[0]+f,O[1]+f,O[2]+f];for(b=0;b<h.length;b+=4)S=h[b],E=h[b+1],_=h[b+2],S>j[0]&&E>j[1]&&_>j[2]&&S<B[0]&&E<B[1]&&_<B[2]&&(h[b+3]=0)},getUniformLocations:function(l,r){return{uLow:l.getUniformLocation(r,"uLow"),uHigh:l.getUniformLocation(r,"uHigh")}},sendUniformData:function(l,r){var h=new s.Color(this.color).getSource(),b=parseFloat(this.distance),f=[0+h[0]/255-b,0+h[1]/255-b,0+h[2]/255-b,1],S=[h[0]/255+b,h[1]/255+b,h[2]/255+b,1];l.uniform4fv(r.uLow,f),l.uniform4fv(r.uHigh,S)},toObject:function(){return m(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in n)m[l]=v(m.ColorMatrix,{type:l,matrix:n[l],mainParameter:!1,colorsOnly:!0}),s.Image.filters[l].fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric,m=s.Image.filters,v=s.util.createClass;m.BlendColor=v(m.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(n){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[n]+`}
}`},retrieveShader:function(n){var l=this.type+"_"+this.mode,r;return n.programCache.hasOwnProperty(l)||(r=this.buildSource(this.mode),n.programCache[l]=this.createProgram(n.context,r)),n.programCache[l]},applyTo2d:function(n){var l=n.imageData,r=l.data,h=r.length,b,f,S,E,_,O,j,B=1-this.alpha;j=new s.Color(this.color).getSource(),b=j[0]*this.alpha,f=j[1]*this.alpha,S=j[2]*this.alpha;for(var V=0;V<h;V+=4)switch(E=r[V],_=r[V+1],O=r[V+2],this.mode){case"multiply":r[V]=E*b/255,r[V+1]=_*f/255,r[V+2]=O*S/255;break;case"screen":r[V]=255-(255-E)*(255-b)/255,r[V+1]=255-(255-_)*(255-f)/255,r[V+2]=255-(255-O)*(255-S)/255;break;case"add":r[V]=E+b,r[V+1]=_+f,r[V+2]=O+S;break;case"diff":case"difference":r[V]=Math.abs(E-b),r[V+1]=Math.abs(_-f),r[V+2]=Math.abs(O-S);break;case"subtract":r[V]=E-b,r[V+1]=_-f,r[V+2]=O-S;break;case"darken":r[V]=Math.min(E,b),r[V+1]=Math.min(_,f),r[V+2]=Math.min(O,S);break;case"lighten":r[V]=Math.max(E,b),r[V+1]=Math.max(_,f),r[V+2]=Math.max(O,S);break;case"overlay":r[V]=b<128?2*E*b/255:255-2*(255-E)*(255-b)/255,r[V+1]=f<128?2*_*f/255:255-2*(255-_)*(255-f)/255,r[V+2]=S<128?2*O*S/255:255-2*(255-O)*(255-S)/255;break;case"exclusion":r[V]=b+E-2*b*E/255,r[V+1]=f+_-2*f*_/255,r[V+2]=S+O-2*S*O/255;break;case"tint":r[V]=b+E*B,r[V+1]=f+_*B,r[V+2]=S+O*B}},getUniformLocations:function(n,l){return{uColor:n.getUniformLocation(l,"uColor")}},sendUniformData:function(n,l){var r=new s.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,n.uniform4fv(l.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric,m=s.Image.filters,v=s.util.createClass;m.BlendImage=v(m.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(n){var l=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return n.programCache.hasOwnProperty(l)||(n.programCache[l]=this.createProgram(n.context,r)),n.programCache[l]},applyToWebGL:function(n){var l=n.context,r=this.createTexture(n.filterBackend,this.image);this.bindAdditionalTexture(l,r,l.TEXTURE1),this.callSuper("applyToWebGL",n),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(n,l){return n.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var n=this.image,l=n._element.width,r=n._element.height;return[1/n.scaleX,0,0,0,1/n.scaleY,0,-n.left/l,-n.top/r,1]},applyTo2d:function(n){var l=n.imageData,r=n.filterBackend.resources,h=l.data,b=h.length,f=l.width,S=l.height,E,_,O,j,B,V,H,Y,se,ne,be=this.image,K;r.blendImage||(r.blendImage=s.util.createCanvasElement()),se=r.blendImage,ne=se.getContext("2d"),se.width!==f||se.height!==S?(se.width=f,se.height=S):ne.clearRect(0,0,f,S),ne.setTransform(be.scaleX,0,0,be.scaleY,be.left,be.top),ne.drawImage(be._element,0,0,f,S),K=ne.getImageData(0,0,f,S).data;for(var Ce=0;Ce<b;Ce+=4)switch(B=h[Ce],V=h[Ce+1],H=h[Ce+2],Y=h[Ce+3],E=K[Ce],_=K[Ce+1],O=K[Ce+2],j=K[Ce+3],this.mode){case"multiply":h[Ce]=B*E/255,h[Ce+1]=V*_/255,h[Ce+2]=H*O/255,h[Ce+3]=Y*j/255;break;case"mask":h[Ce+3]=j;break}},getUniformLocations:function(n,l){return{uTransformMatrix:n.getUniformLocation(l,"uTransformMatrix"),uImage:n.getUniformLocation(l,"uImage")}},sendUniformData:function(n,l){var r=this.calculateMatrix();n.uniform1i(l.uImage,1),n.uniformMatrix3fv(l.uTransformMatrix,!1,r)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(n,l){s.Image.fromObject(n.image,function(r){var h=s.util.object.clone(n);h.image=r,l(new s.Image.filters.BlendImage(h))})}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=Math.pow,v=Math.floor,n=Math.sqrt,l=Math.abs,r=Math.round,h=Math.sin,b=Math.ceil,f=s.Image.filters,S=s.util.createClass;f.Resize=S(f.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(E,_){return{uDelta:E.getUniformLocation(_,"uDelta"),uTaps:E.getUniformLocation(_,"uTaps")}},sendUniformData:function(E,_){E.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),E.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(E){var _=this.getFilterWindow(),O=this.type+"_"+_;if(!E.programCache.hasOwnProperty(O)){var j=this.generateShader(_);E.programCache[O]=this.createProgram(E.context,j)}return E.programCache[O]},getFilterWindow:function(){var E=this.tempScale;return Math.ceil(this.lanczosLobes/E)},getTaps:function(){for(var E=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,O=this.getFilterWindow(),j=new Array(O),B=1;B<=O;B++)j[B-1]=E(B*_);return j},generateShader:function(j){for(var _=new Array(j),O=this.fragmentSourceTOP,j,B=1;B<=j;B++)_[B-1]=B+".0 * uDelta";return O+="uniform float uTaps["+j+`];
`,O+=`void main() {
`,O+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,O+=`  float sum = 1.0;
`,_.forEach(function(V,H){O+="  color += texture2D(uTexture, vTexCoord + "+V+") * uTaps["+H+`];
`,O+="  color += texture2D(uTexture, vTexCoord - "+V+") * uTaps["+H+`];
`,O+="  sum += 2.0 * uTaps["+H+`];
`}),O+=`  gl_FragColor = color / sum;
`,O+="}",O},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(E){E.webgl?(E.passes++,this.width=E.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=E.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),E.destinationWidth=this.dW,this._setupFrameBuffer(E),this.applyToWebGL(E),this._swapTextures(E),E.sourceWidth=E.destinationWidth,this.height=E.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),E.destinationHeight=this.dH,this._setupFrameBuffer(E),this.applyToWebGL(E),this._swapTextures(E),E.sourceHeight=E.destinationHeight):this.applyTo2d(E)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(E){return function(_){if(_>=E||_<=-E)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var O=_/E;return h(_)/_*h(O)/O}},applyTo2d:function(E){var _=E.imageData,O=this.scaleX,j=this.scaleY;this.rcpScaleX=1/O,this.rcpScaleY=1/j;var B=_.width,V=_.height,H=r(B*O),Y=r(V*j),se;this.resizeType==="sliceHack"?se=this.sliceByTwo(E,B,V,H,Y):this.resizeType==="hermite"?se=this.hermiteFastResize(E,B,V,H,Y):this.resizeType==="bilinear"?se=this.bilinearFiltering(E,B,V,H,Y):this.resizeType==="lanczos"&&(se=this.lanczosResize(E,B,V,H,Y)),E.imageData=se},sliceByTwo:function(E,_,O,j,B){var V=E.imageData,H=.5,Y=!1,se=!1,ne=_*H,be=O*H,K=s.filterBackend.resources,Ce,W,Be=0,Ie=0,ze=_,te=0;for(K.sliceByTwo||(K.sliceByTwo=document.createElement("canvas")),Ce=K.sliceByTwo,(Ce.width<_*1.5||Ce.height<O)&&(Ce.width=_*1.5,Ce.height=O),W=Ce.getContext("2d"),W.clearRect(0,0,_*1.5,O),W.putImageData(V,0,0),j=v(j),B=v(B);!Y||!se;)_=ne,O=be,j<v(ne*H)?ne=v(ne*H):(ne=j,Y=!0),B<v(be*H)?be=v(be*H):(be=B,se=!0),W.drawImage(Ce,Be,Ie,_,O,ze,te,ne,be),Be=ze,Ie=te,te+=be;return W.getImageData(Be,Ie,j,B)},lanczosResize:function(E,_,O,j,B){function V(q){var Z,fe,G,X,J,Q,ve,he,Se,xe,De;for(te.x=(q+.5)*be,le.x=v(te.x),Z=0;Z<B;Z++){for(te.y=(Z+.5)*K,le.y=v(te.y),J=0,Q=0,ve=0,he=0,Se=0,fe=le.x-Be;fe<=le.x+Be;fe++)if(!(fe<0||fe>=_)){xe=v(1e3*l(fe-te.x)),ze[xe]||(ze[xe]={});for(var ae=le.y-Ie;ae<=le.y+Ie;ae++)ae<0||ae>=O||(De=v(1e3*l(ae-te.y)),ze[xe][De]||(ze[xe][De]=ne(n(m(xe*Ce,2)+m(De*W,2))/1e3)),G=ze[xe][De],G>0&&(X=(ae*_+fe)*4,J+=G,Q+=G*H[X],ve+=G*H[X+1],he+=G*H[X+2],Se+=G*H[X+3]))}X=(Z*j+q)*4,se[X]=Q/J,se[X+1]=ve/J,se[X+2]=he/J,se[X+3]=Se/J}return++q<j?V(q):Y}var H=E.imageData.data,Y=E.ctx.createImageData(j,B),se=Y.data,ne=this.lanczosCreate(this.lanczosLobes),be=this.rcpScaleX,K=this.rcpScaleY,Ce=2/this.rcpScaleX,W=2/this.rcpScaleY,Be=b(be*this.lanczosLobes/2),Ie=b(K*this.lanczosLobes/2),ze={},te={},le={};return V(0)},bilinearFiltering:function(E,_,O,j,B){var V,H,Y,se,ne,be,K,Ce,W,Be,Ie,ze,te=0,le,q=this.rcpScaleX,Z=this.rcpScaleY,fe=4*(_-1),G=E.imageData,X=G.data,J=E.ctx.createImageData(j,B),Q=J.data;for(K=0;K<B;K++)for(Ce=0;Ce<j;Ce++)for(ne=v(q*Ce),be=v(Z*K),W=q*Ce-ne,Be=Z*K-be,le=4*(be*_+ne),Ie=0;Ie<4;Ie++)V=X[le+Ie],H=X[le+4+Ie],Y=X[le+fe+Ie],se=X[le+fe+4+Ie],ze=V*(1-W)*(1-Be)+H*W*(1-Be)+Y*Be*(1-W)+se*W*Be,Q[te++]=ze;return J},hermiteFastResize:function(E,_,O,j,B){for(var V=this.rcpScaleX,H=this.rcpScaleY,Y=b(V/2),se=b(H/2),ne=E.imageData,be=ne.data,K=E.ctx.createImageData(j,B),Ce=K.data,W=0;W<B;W++)for(var Be=0;Be<j;Be++){for(var Ie=(Be+W*j)*4,ze=0,te=0,le=0,q=0,Z=0,fe=0,G=0,X=(W+.5)*H,J=v(W*H);J<(W+1)*H;J++)for(var Q=l(X-(J+.5))/se,ve=(Be+.5)*V,he=Q*Q,Se=v(Be*V);Se<(Be+1)*V;Se++){var xe=l(ve-(Se+.5))/Y,De=n(he+xe*xe);De>1&&De<-1||(ze=2*De*De*De-3*De*De+1,ze>0&&(xe=4*(Se+J*_),G+=ze*be[xe+3],le+=ze,be[xe+3]<255&&(ze=ze*be[xe+3]/250),q+=ze*be[xe],Z+=ze*be[xe+1],fe+=ze*be[xe+2],te+=ze))}Ce[Ie]=q/te,Ce[Ie+1]=Z/te,Ce[Ie+2]=fe/te,Ce[Ie+3]=G/le}return K},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Contrast=v(m.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(n){if(this.contrast!==0){var l=n.imageData,r,b,h=l.data,b=h.length,f=Math.floor(this.contrast*255),S=259*(f+255)/(255*(259-f));for(r=0;r<b;r+=4)h[r]=S*(h[r]-128)+128,h[r+1]=S*(h[r+1]-128)+128,h[r+2]=S*(h[r+2]-128)+128}},getUniformLocations:function(n,l){return{uContrast:n.getUniformLocation(l,"uContrast")}},sendUniformData:function(n,l){n.uniform1f(l.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Saturation=v(m.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(n){if(this.saturation!==0){var l=n.imageData,r=l.data,h=r.length,b=-this.saturation,f,S;for(f=0;f<h;f+=4)S=Math.max(r[f],r[f+1],r[f+2]),r[f]+=S!==r[f]?(S-r[f])*b:0,r[f+1]+=S!==r[f+1]?(S-r[f+1])*b:0,r[f+2]+=S!==r[f+2]?(S-r[f+2])*b:0}},getUniformLocations:function(n,l){return{uSaturation:n.getUniformLocation(l,"uSaturation")}},sendUniformData:function(n,l){n.uniform1f(l.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Vibrance=v(m.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(n){if(this.vibrance!==0){var l=n.imageData,r=l.data,h=r.length,b=-this.vibrance,f,S,E,_;for(f=0;f<h;f+=4)S=Math.max(r[f],r[f+1],r[f+2]),E=(r[f]+r[f+1]+r[f+2])/3,_=Math.abs(S-E)*2/255*b,r[f]+=S!==r[f]?(S-r[f])*_:0,r[f+1]+=S!==r[f+1]?(S-r[f+1])*_:0,r[f+2]+=S!==r[f+2]?(S-r[f+2])*_:0}},getUniformLocations:function(n,l){return{uVibrance:n.getUniformLocation(l,"uVibrance")}},sendUniformData:function(n,l){n.uniform1f(l.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Blur=v(m.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(n){n.webgl?(this.aspectRatio=n.sourceWidth/n.sourceHeight,n.passes++,this._setupFrameBuffer(n),this.horizontal=!0,this.applyToWebGL(n),this._swapTextures(n),this._setupFrameBuffer(n),this.horizontal=!1,this.applyToWebGL(n),this._swapTextures(n)):this.applyTo2d(n)},applyTo2d:function(n){n.imageData=this.simpleBlur(n)},simpleBlur:function(n){var l=n.filterBackend.resources,r,h,b=n.imageData.width,f=n.imageData.height;l.blurLayer1||(l.blurLayer1=s.util.createCanvasElement(),l.blurLayer2=s.util.createCanvasElement()),r=l.blurLayer1,h=l.blurLayer2,(r.width!==b||r.height!==f)&&(h.width=r.width=b,h.height=r.height=f);var S=r.getContext("2d"),E=h.getContext("2d"),_=15,O,j,B,V,H=this.blur*.06*.5;for(S.putImageData(n.imageData,0,0),E.clearRect(0,0,b,f),V=-_;V<=_;V++)O=(Math.random()-.5)/4,j=V/_,B=H*j*b+O,E.globalAlpha=1-Math.abs(j),E.drawImage(r,B,O),S.drawImage(h,0,0),E.globalAlpha=1,E.clearRect(0,0,h.width,h.height);for(V=-_;V<=_;V++)O=(Math.random()-.5)/4,j=V/_,B=H*j*f+O,E.globalAlpha=1-Math.abs(j),E.drawImage(r,O,B),S.drawImage(h,0,0),E.globalAlpha=1,E.clearRect(0,0,h.width,h.height);n.ctx.drawImage(r,0,0);var Y=n.ctx.getImageData(0,0,r.width,r.height);return S.globalAlpha=1,S.clearRect(0,0,r.width,r.height),Y},getUniformLocations:function(n,l){return{delta:n.getUniformLocation(l,"uDelta")}},sendUniformData:function(n,l){var r=this.chooseRightDelta();n.uniform2fv(l.delta,r)},chooseRightDelta:function(){var n=1,l=[0,0],r;return this.horizontal?this.aspectRatio>1&&(n=1/this.aspectRatio):this.aspectRatio<1&&(n=this.aspectRatio),r=n*this.blur*.12,this.horizontal?l[0]=r:l[1]=r,l}}),m.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Gamma=v(m.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(n){this.gamma=[1,1,1],m.BaseFilter.prototype.initialize.call(this,n)},applyTo2d:function(n){var l=n.imageData,r=l.data,h=this.gamma,b=r.length,f=1/h[0],S=1/h[1],E=1/h[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,b=256;_<b;_++)this.rVals[_]=Math.pow(_/255,f)*255,this.gVals[_]=Math.pow(_/255,S)*255,this.bVals[_]=Math.pow(_/255,E)*255;for(_=0,b=r.length;_<b;_+=4)r[_]=this.rVals[r[_]],r[_+1]=this.gVals[r[_+1]],r[_+2]=this.bVals[r[_+2]]},getUniformLocations:function(n,l){return{uGamma:n.getUniformLocation(l,"uGamma")}},sendUniformData:function(n,l){n.uniform3fv(l.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.Composed=v(m.BaseFilter,{type:"Composed",subFilters:[],initialize:function(n){this.callSuper("initialize",n),this.subFilters=this.subFilters.slice(0)},applyTo:function(n){n.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(n)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(n){return n.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(n){return!n.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(n,l){var r=n.subFilters||[],h=r.map(function(f){return new s.Image.filters[f.type](f)}),b=new s.Image.filters.Composed({subFilters:h});return l&&l(b),b}}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.Image.filters,v=s.util.createClass;m.HueRotation=v(m.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var n=this.rotation*Math.PI,l=s.util.cos(n),r=s.util.sin(n),h=1/3,b=Math.sqrt(h)*r,f=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+f/3,this.matrix[1]=h*f-b,this.matrix[2]=h*f+b,this.matrix[5]=h*f+b,this.matrix[6]=l+h*f,this.matrix[7]=h*f-b,this.matrix[10]=h*f-b,this.matrix[11]=h*f+b,this.matrix[12]=l+h*f},isNeutralState:function(n){return this.calculateMatrix(),m.BaseFilter.prototype.isNeutralState.call(this,n)},applyTo:function(n){this.calculateMatrix(),m.BaseFilter.prototype.applyTo.call(this,n)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(x),function(C){"use strict";var s=C.fabric||(C.fabric={}),m=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var v="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(v),cacheProperties:s.Object.prototype.cacheProperties.concat(v),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(n,l){this.styles=l?l.styles||{}:{},this.text=n,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var n=this.path;n&&(n.segmentsInfo=s.util.getPathSegmentsInfo(n.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var n=this._splitTextIntoLines(this.text);return this.textLines=n.lines,this._textLines=n.graphemeLines,this._unwrappedTextLines=n._unwrappedLines,this._text=n.graphemeText,n},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var n,l,r,h,b,f,S,E=0,_=this._textLines.length;E<_;E++)if(!(this.textAlign!=="justify"&&(E===_-1||this.isEndOfWrapping(E)))&&(h=0,b=this._textLines[E],l=this.getLineWidth(E),l<this.width&&(S=this.textLines[E].match(this._reSpacesAndTabs)))){r=S.length,n=(this.width-l)/r;for(var O=0,j=b.length;O<=j;O++)f=this.__charBounds[E][O],this._reSpaceAndTab.test(b[O])?(f.width+=n,f.kernedWidth+=n,f.left+=h,h+=n):f.left+=h}},isEndOfWrapping:function(n){return n===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var n=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return n.width+=l*n.zoomX,n.height+=l*n.zoomY,n},_render:function(n){var l=this.path;l&&!l.isNotVisible()&&l._render(n),this._setTextStyles(n),this._renderTextLinesBackground(n),this._renderTextDecoration(n,"underline"),this._renderText(n),this._renderTextDecoration(n,"overline"),this._renderTextDecoration(n,"linethrough")},_renderText:function(n){this.paintFirst==="stroke"?(this._renderTextStroke(n),this._renderTextFill(n)):(this._renderTextFill(n),this._renderTextStroke(n))},_setTextStyles:function(n,l,r){n.textBaseline="alphabetic",n.font=this._getFontDeclaration(l,r)},calcTextWidth:function(){for(var n=this.getLineWidth(0),l=1,r=this._textLines.length;l<r;l++){var h=this.getLineWidth(l);h>n&&(n=h)}return n},_renderTextLine:function(n,l,r,h,b,f){this._renderChars(n,l,r,h,b,f)},_renderTextLinesBackground:function(n){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,r,h=n.fillStyle,b,f,S=this._getLeftOffset(),E=this._getTopOffset(),_=0,O=0,j,B,V=this.path,H,Y=0,se=this._textLines.length;Y<se;Y++){if(l=this.getHeightOfLine(Y),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Y)){E+=l;continue}b=this._textLines[Y],r=this._getLineLeftOffset(Y),O=0,_=0,f=this.getValueOfPropertyAt(Y,0,"textBackgroundColor");for(var ne=0,be=b.length;ne<be;ne++)j=this.__charBounds[Y][ne],B=this.getValueOfPropertyAt(Y,ne,"textBackgroundColor"),V?(n.save(),n.translate(j.renderLeft,j.renderTop),n.rotate(j.angle),n.fillStyle=B,B&&n.fillRect(-j.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),j.width,l/this.lineHeight),n.restore()):B!==f?(H=S+r+_,this.direction==="rtl"&&(H=this.width-H-O),n.fillStyle=f,f&&n.fillRect(H,E,O,l/this.lineHeight),_=j.left,O=j.width,f=B):O+=j.kernedWidth;B&&!V&&(H=S+r+_,this.direction==="rtl"&&(H=this.width-H-O),n.fillStyle=B,n.fillRect(H,E,O,l/this.lineHeight)),E+=l}n.fillStyle=h,this._removeShadow(n)}},getFontCache:function(n){var l=n.fontFamily.toLowerCase();s.charWidthsCache[l]||(s.charWidthsCache[l]={});var r=s.charWidthsCache[l],h=n.fontStyle.toLowerCase()+"_"+(n.fontWeight+"").toLowerCase();return r[h]||(r[h]={}),r[h]},_measureChar:function(n,l,r,h){var b=this.getFontCache(l),f=this._getFontDeclaration(l),S=this._getFontDeclaration(h),E=r+n,_=f===S,O,j,B,V=l.fontSize/this.CACHE_FONT_SIZE,H;if(r&&b[r]!==void 0&&(B=b[r]),b[n]!==void 0&&(H=O=b[n]),_&&b[E]!==void 0&&(j=b[E],H=j-B),O===void 0||B===void 0||j===void 0){var Y=this.getMeasuringContext();this._setTextStyles(Y,l,!0)}return O===void 0&&(H=O=Y.measureText(n).width,b[n]=O),B===void 0&&_&&r&&(B=Y.measureText(r).width,b[r]=B),_&&j===void 0&&(j=Y.measureText(E).width,b[E]=j,H=j-B),{width:O*V,kernedWidth:H*V}},getHeightOfChar:function(n,l){return this.getValueOfPropertyAt(n,l,"fontSize")},measureLine:function(n){var l=this._measureLine(n);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(n){var l=0,r,h,b=this._textLines[n],f,S,E=0,_=new Array(b.length),O=0,j,B,V=this.path,H=this.pathSide==="right";for(this.__charBounds[n]=_,r=0;r<b.length;r++)h=b[r],S=this._getGraphemeBox(h,n,r,f),_[r]=S,l+=S.kernedWidth,f=h;if(_[r]={left:S?S.left+S.width:0,width:0,kernedWidth:0,height:this.fontSize},V){switch(B=V.segmentsInfo[V.segmentsInfo.length-1].length,j=s.util.getPointOnPath(V.path,0,V.segmentsInfo),j.x+=V.pathOffset.x,j.y+=V.pathOffset.y,this.textAlign){case"left":O=H?B-l:0;break;case"center":O=(B-l)/2;break;case"right":O=H?0:B-l;break}for(O+=this.pathStartOffset*(H?-1:1),r=H?b.length-1:0;H?r>=0:r<b.length;H?r--:r++)S=_[r],O>B?O%=B:O<0&&(O+=B),this._setGraphemeOnPath(O,S,j),O+=S.kernedWidth}return{width:l,numOfSpaces:E}},_setGraphemeOnPath:function(n,l,r){var h=n+l.kernedWidth/2,b=this.path,f=s.util.getPointOnPath(b.path,h,b.segmentsInfo);l.renderLeft=f.x-r.x,l.renderTop=f.y-r.y,l.angle=f.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(n,l,r,h,b){var f=this.getCompleteStyleDeclaration(l,r),S=h?this.getCompleteStyleDeclaration(l,r-1):{},E=this._measureChar(n,f,h,S),_=E.kernedWidth,O=E.width,j;this.charSpacing!==0&&(j=this._getWidthOfCharSpacing(),O+=j,_+=j);var B={width:O,left:0,height:f.fontSize,kernedWidth:_,deltaY:f.deltaY};if(r>0&&!b){var V=this.__charBounds[l][r-1];B.left=V.left+V.width+E.kernedWidth-E.width}return B},getHeightOfLine:function(n){if(this.__lineHeights[n])return this.__lineHeights[n];for(var l=this._textLines[n],r=this.getHeightOfChar(n,0),h=1,b=l.length;h<b;h++)r=Math.max(this.getHeightOfChar(n,h),r);return this.__lineHeights[n]=r*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var n,l=0,r=0,h=this._textLines.length;r<h;r++)n=this.getHeightOfLine(r),l+=r===h-1?n/this.lineHeight:n;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(n,l){n.save();for(var r=0,h=this._getLeftOffset(),b=this._getTopOffset(),f=0,S=this._textLines.length;f<S;f++){var E=this.getHeightOfLine(f),_=E/this.lineHeight,O=this._getLineLeftOffset(f);this._renderTextLine(l,n,this._textLines[f],h+O,b+r+_,f),r+=E}n.restore()},_renderTextFill:function(n){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(n,"fillText")},_renderTextStroke:function(n){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(n),n.save(),this._setLineDash(n,this.strokeDashArray),n.beginPath(),this._renderTextCommon(n,"strokeText"),n.closePath(),n.restore())},_renderChars:function(n,l,r,h,b,f){var S=this.getHeightOfLine(f),E=this.textAlign.indexOf("justify")!==-1,_,O,j="",B,V=0,H,Y=this.path,se=!E&&this.charSpacing===0&&this.isEmptyStyles(f)&&!Y,ne=this.direction==="ltr",be=this.direction==="ltr"?1:-1,K;if(l.save(),b-=S*this._fontSizeFraction/this.lineHeight,se){l.canvas.setAttribute("dir",ne?"ltr":"rtl"),l.direction=ne?"ltr":"rtl",l.textAlign=ne?"left":"right",this._renderChar(n,l,f,0,r.join(""),h,b,S),l.restore();return}for(var Ce=0,W=r.length-1;Ce<=W;Ce++)H=Ce===W||this.charSpacing||Y,j+=r[Ce],B=this.__charBounds[f][Ce],V===0?(h+=be*(B.kernedWidth-B.width),V+=B.width):V+=B.kernedWidth,E&&!H&&this._reSpaceAndTab.test(r[Ce])&&(H=!0),H||(_=_||this.getCompleteStyleDeclaration(f,Ce),O=this.getCompleteStyleDeclaration(f,Ce+1),H=this._hasStyleChanged(_,O)),H&&(Y?(l.save(),l.translate(B.renderLeft,B.renderTop),l.rotate(B.angle),this._renderChar(n,l,f,Ce,j,-V/2,0,S),l.restore()):(K=h,l.canvas.setAttribute("dir",ne?"ltr":"rtl"),l.direction=ne?"ltr":"rtl",l.textAlign=ne?"left":"right",this._renderChar(n,l,f,Ce,j,K,b,S)),j="",_=O,h+=be*V,V=0);l.restore()},_applyPatternGradientTransformText:function(n){var l=s.util.createCanvasElement(),r,h=this.width+this.strokeWidth,b=this.height+this.strokeWidth;return l.width=h,l.height=b,r=l.getContext("2d"),r.beginPath(),r.moveTo(0,0),r.lineTo(h,0),r.lineTo(h,b),r.lineTo(0,b),r.closePath(),r.translate(h/2,b/2),r.fillStyle=n.toLive(r),this._applyPatternGradientTransform(r,n),r.fill(),r.createPattern(l,"no-repeat")},handleFiller:function(n,l,r){var h,b;return r.toLive?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(h=-this.width/2,b=-this.height/2,n.translate(h,b),n[l]=this._applyPatternGradientTransformText(r),{offsetX:h,offsetY:b}):(n[l]=r.toLive(n,this),this._applyPatternGradientTransform(n,r)):(n[l]=r,{offsetX:0,offsetY:0})},_setStrokeStyles:function(n,l){return n.lineWidth=l.strokeWidth,n.lineCap=this.strokeLineCap,n.lineDashOffset=this.strokeDashOffset,n.lineJoin=this.strokeLineJoin,n.miterLimit=this.strokeMiterLimit,this.handleFiller(n,"strokeStyle",l.stroke)},_setFillStyles:function(n,l){return this.handleFiller(n,"fillStyle",l.fill)},_renderChar:function(n,l,r,h,b,f,S){var E=this._getStyleDeclaration(r,h),_=this.getCompleteStyleDeclaration(r,h),O=n==="fillText"&&_.fill,j=n==="strokeText"&&_.stroke&&_.strokeWidth,B,V;!j&&!O||(l.save(),O&&(B=this._setFillStyles(l,_)),j&&(V=this._setStrokeStyles(l,_)),l.font=this._getFontDeclaration(_),E&&E.textBackgroundColor&&this._removeShadow(l),E&&E.deltaY&&(S+=E.deltaY),O&&l.fillText(b,f-B.offsetX,S-B.offsetY),j&&l.strokeText(b,f-V.offsetX,S-V.offsetY),l.restore())},setSuperscript:function(n,l){return this._setScript(n,l,this.superscript)},setSubscript:function(n,l){return this._setScript(n,l,this.subscript)},_setScript:function(n,l,r){var h=this.get2DCursorLocation(n,!0),b=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize"),f=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"deltaY"),S={fontSize:b*r.size,deltaY:f+b*r.baseline};return this.setSelectionStyles(S,n,l),this},_hasStyleChanged:function(n,l){return n.fill!==l.fill||n.stroke!==l.stroke||n.strokeWidth!==l.strokeWidth||n.fontSize!==l.fontSize||n.fontFamily!==l.fontFamily||n.fontWeight!==l.fontWeight||n.fontStyle!==l.fontStyle||n.deltaY!==l.deltaY},_hasStyleChangedForSvg:function(n,l){return this._hasStyleChanged(n,l)||n.overline!==l.overline||n.underline!==l.underline||n.linethrough!==l.linethrough},_getLineLeftOffset:function(n){var l=this.getLineWidth(n),r=this.width-l,h=this.textAlign,b=this.direction,S,f=0,S=this.isEndOfWrapping(n);return h==="justify"||h==="justify-center"&&!S||h==="justify-right"&&!S||h==="justify-left"&&!S?0:(h==="center"&&(f=r/2),h==="right"&&(f=r),h==="justify-center"&&(f=r/2),h==="justify-right"&&(f=r),b==="rtl"&&(f-=r),f)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var n=this._forceClearCache;return n||(n=this.hasStateChanged("_dimensionAffectingProps")),n&&(this.dirty=!0,this._forceClearCache=!1),n},getLineWidth:function(n){if(this.__lineWidths[n])return this.__lineWidths[n];var l,r=this._textLines[n],h;return r===""?l=0:(h=this.measureLine(n),l=h.width),this.__lineWidths[n]=l,l},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(n,l,r){var h=this._getStyleDeclaration(n,l);return h&&typeof h[r]<"u"?h[r]:this[r]},_renderTextDecoration:function(n,l){if(!(!this[l]&&!this.styleHas(l))){for(var r,h,b,f,S,E,_,O,j=this._getLeftOffset(),B=this._getTopOffset(),V,H,Y,se,ne,be,K,Ce,W=this.path,Be=this._getWidthOfCharSpacing(),Ie=this.offsets[l],ze=0,te=this._textLines.length;ze<te;ze++){if(r=this.getHeightOfLine(ze),!this[l]&&!this.styleHas(l,ze)){B+=r;continue}_=this._textLines[ze],be=r/this.lineHeight,f=this._getLineLeftOffset(ze),H=0,Y=0,O=this.getValueOfPropertyAt(ze,0,l),Ce=this.getValueOfPropertyAt(ze,0,"fill"),V=B+be*(1-this._fontSizeFraction),h=this.getHeightOfChar(ze,0),S=this.getValueOfPropertyAt(ze,0,"deltaY");for(var le=0,q=_.length;le<q;le++)if(se=this.__charBounds[ze][le],ne=this.getValueOfPropertyAt(ze,le,l),K=this.getValueOfPropertyAt(ze,le,"fill"),b=this.getHeightOfChar(ze,le),E=this.getValueOfPropertyAt(ze,le,"deltaY"),W&&ne&&K)n.save(),n.fillStyle=Ce,n.translate(se.renderLeft,se.renderTop),n.rotate(se.angle),n.fillRect(-se.kernedWidth/2,Ie*b+E,se.kernedWidth,this.fontSize/15),n.restore();else if((ne!==O||K!==Ce||b!==h||E!==S)&&Y>0){var Z=j+f+H;this.direction==="rtl"&&(Z=this.width-Z-Y),O&&Ce&&(n.fillStyle=Ce,n.fillRect(Z,V+Ie*h+S,Y,this.fontSize/15)),H=se.left,Y=se.width,O=ne,Ce=K,h=b,S=E}else Y+=se.kernedWidth;var Z=j+f+H;this.direction==="rtl"&&(Z=this.width-Z-Y),n.fillStyle=K,ne&&K&&n.fillRect(Z,V+Ie*h+S,Y-Be,this.fontSize/15),B+=r}this._removeShadow(n)}},_getFontDeclaration:function(n,l){var r=n||this,h=this.fontFamily,b=s.Text.genericFonts.indexOf(h.toLowerCase())>-1,f=h===void 0||h.indexOf("'")>-1||h.indexOf(",")>-1||h.indexOf('"')>-1||b?r.fontFamily:'"'+r.fontFamily+'"';return[s.isLikelyNode?r.fontWeight:r.fontStyle,s.isLikelyNode?r.fontStyle:r.fontWeight,l?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",f].join(" ")},render:function(n){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",n)))},_splitTextIntoLines:function(n){for(var l=n.split(this._reNewline),r=new Array(l.length),h=[`
`],b=[],f=0;f<l.length;f++)r[f]=s.util.string.graphemeSplit(l[f]),b=b.concat(r[f],h);return b.pop(),{_unwrappedLines:r,lines:l,graphemeText:b,graphemeLines:r}},toObject:function(n){var l=v.concat(n),r=this.callSuper("toObject",l);return r.styles=m(this.styles,!0),r.path&&(r.path=this.path.toObject()),r},set:function(n,l){this.callSuper("set",n,l);var r=!1,h=!1;if(typeof n=="object")for(var b in n)b==="path"&&this.setPathInfo(),r=r||this._dimensionAffectingProps.indexOf(b)!==-1,h=h||b==="path";else r=this._dimensionAffectingProps.indexOf(n)!==-1,h=n==="path";return h&&this.setPathInfo(),r&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(n,l,r){if(!n)return l(null);var h=s.parseAttributes(n,s.Text.ATTRIBUTE_NAMES),b=h.textAnchor||"left";if(r=s.util.object.extend(r?m(r):{},h),r.top=r.top||0,r.left=r.left||0,h.textDecoration){var f=h.textDecoration;f.indexOf("underline")!==-1&&(r.underline=!0),f.indexOf("overline")!==-1&&(r.overline=!0),f.indexOf("line-through")!==-1&&(r.linethrough=!0),delete r.textDecoration}"dx"in h&&(r.left+=h.dx),"dy"in h&&(r.top+=h.dy),"fontSize"in r||(r.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var S="";"textContent"in n?S=n.textContent:"firstChild"in n&&n.firstChild!==null&&"data"in n.firstChild&&n.firstChild.data!==null&&(S=n.firstChild.data),S=S.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var E=r.strokeWidth;r.strokeWidth=0;var _=new s.Text(S,r),O=_.getScaledHeight()/_.height,j=(_.height+_.strokeWidth)*_.lineHeight-_.height,B=j*O,V=_.getScaledHeight()+B,H=0;b==="center"&&(H=_.getScaledWidth()/2),b==="right"&&(H=_.getScaledWidth()),_.set({left:_.left-H,top:_.top-(V-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof E<"u"?E:1}),l(_)},s.Text.fromObject=function(n,l){var r=m(n),h=n.path;return delete r.path,s.Object._fromObject("Text",r,function(b){h?s.Object._fromObject("Path",h,function(f){b.set("path",f),l(b)},"path"):l(b)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(x),function(){u.util.object.extend(u.Text.prototype,{isEmptyStyles:function(C){if(!this.styles||typeof C<"u"&&!this.styles[C])return!0;var s=typeof C>"u"?this.styles:{line:this.styles[C]};for(var m in s)for(var v in s[m])for(var n in s[m][v])return!1;return!0},styleHas:function(C,s){if(!this.styles||!C||C===""||typeof s<"u"&&!this.styles[s])return!1;var m=typeof s>"u"?this.styles:{0:this.styles[s]};for(var v in m)for(var n in m[v])if(typeof m[v][n][C]<"u")return!0;return!1},cleanStyle:function(C){if(!this.styles||!C||C==="")return!1;var s=this.styles,m=0,v,n,l=!0,r=0,h;for(var b in s){v=0;for(var f in s[b]){var h=s[b][f],S=h.hasOwnProperty(C);m++,S?(n?h[C]!==n&&(l=!1):n=h[C],h[C]===this[C]&&delete h[C]):l=!1,Object.keys(h).length!==0?v++:delete s[b][f]}v===0&&delete s[b]}for(var E=0;E<this._textLines.length;E++)r+=this._textLines[E].length;l&&m===r&&(this[C]=n,this.removeStyle(C))},removeStyle:function(C){if(!(!this.styles||!C||C==="")){var s=this.styles,m,v,n;for(v in s){m=s[v];for(n in m)delete m[n][C],Object.keys(m[n]).length===0&&delete m[n];Object.keys(m).length===0&&delete s[v]}}},_extendStyles:function(C,s){var m=this.get2DCursorLocation(C);this._getLineStyle(m.lineIndex)||this._setLineStyle(m.lineIndex),this._getStyleDeclaration(m.lineIndex,m.charIndex)||this._setStyleDeclaration(m.lineIndex,m.charIndex,{}),u.util.object.extend(this._getStyleDeclaration(m.lineIndex,m.charIndex),s)},get2DCursorLocation:function(C,s){typeof C>"u"&&(C=this.selectionStart);for(var m=s?this._unwrappedTextLines:this._textLines,v=m.length,n=0;n<v;n++){if(C<=m[n].length)return{lineIndex:n,charIndex:C};C-=m[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:m[n-1].length<C?m[n-1].length:C}},getSelectionStyles:function(C,s,m){typeof C>"u"&&(C=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||C);for(var v=[],n=C;n<s;n++)v.push(this.getStyleAtPosition(n,m));return v},getStyleAtPosition:function(C,s){var m=this.get2DCursorLocation(C),v=s?this.getCompleteStyleDeclaration(m.lineIndex,m.charIndex):this._getStyleDeclaration(m.lineIndex,m.charIndex);return v||{}},setSelectionStyles:function(C,s,m){typeof s>"u"&&(s=this.selectionStart||0),typeof m>"u"&&(m=this.selectionEnd||s);for(var v=s;v<m;v++)this._extendStyles(v,C);return this._forceClearCache=!0,this},_getStyleDeclaration:function(C,s){var m=this.styles&&this.styles[C];return m?m[s]:null},getCompleteStyleDeclaration:function(C,s){for(var m=this._getStyleDeclaration(C,s)||{},v={},n,l=0;l<this._styleProperties.length;l++)n=this._styleProperties[l],v[n]=typeof m[n]>"u"?this[n]:m[n];return v},_setStyleDeclaration:function(C,s,m){this.styles[C][s]=m},_deleteStyleDeclaration:function(C,s){delete this.styles[C][s]},_getLineStyle:function(C){return!!this.styles[C]},_setLineStyle:function(C){this.styles[C]={}},_deleteLineStyle:function(C){delete this.styles[C]}})}(),function(){function C(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}u.IText=u.util.createClass(u.Text,u.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,m){this.callSuper("initialize",s,m),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,m){this[s]!==m&&(this._fireSelectionChanged(),this[s]=m),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var m=this.canvas.contextTop,v=this.canvas.viewportTransform;m.save(),m.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this.transform(m),this._clearTextArea(m),s||m.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),m=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,m):this.renderSelection(s,m),m.restore()}},_clearTextArea:function(s){var m=this.width+4,v=this.height+4;s.clearRect(-m/2,-v/2,m,v)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var m=this._getLeftOffset(),v=this._getTopOffset(),n=this._getCursorBoundariesOffsets(s);return{left:m,top:v,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var m,v,n,l=0,r=0,h,b=this.get2DCursorLocation(s);n=b.charIndex,v=b.lineIndex;for(var f=0;f<v;f++)l+=this.getHeightOfLine(f);m=this._getLineLeftOffset(v);var S=this.__charBounds[v][n];return S&&(r=S.left),this.charSpacing!==0&&n===this._textLines[v].length&&(r-=this._getWidthOfCharSpacing()),h={top:l,left:m+(r>0?r:0)},this.direction==="rtl"&&(h.left*=-1),this.cursorOffsetCache=h,this.cursorOffsetCache},renderCursor:function(s,m){var v=this.get2DCursorLocation(),n=v.lineIndex,l=v.charIndex>0?v.charIndex-1:0,r=this.getValueOfPropertyAt(n,l,"fontSize"),h=this.scaleX*this.canvas.getZoom(),b=this.cursorWidth/h,f=s.topOffset,S=this.getValueOfPropertyAt(n,l,"deltaY");f+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-r*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,m),m.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,l,"fill"),m.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,m.fillRect(s.left+s.leftOffset-b/2,f+s.top+S,b,r)},renderSelection:function(s,m){for(var v=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,r=this.get2DCursorLocation(v),h=this.get2DCursorLocation(n),b=r.lineIndex,f=h.lineIndex,S=r.charIndex<0?0:r.charIndex,E=h.charIndex<0?0:h.charIndex,_=b;_<=f;_++){var O=this._getLineLeftOffset(_)||0,j=this.getHeightOfLine(_),B=0,V=0,H=0;if(_===b&&(V=this.__charBounds[b][S].left),_>=b&&_<f)H=l&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===f)if(E===0)H=this.__charBounds[f][E].left;else{var Y=this._getWidthOfCharSpacing();H=this.__charBounds[f][E-1].left+this.__charBounds[f][E-1].width-Y}B=j,(this.lineHeight<1||_===f&&this.lineHeight>1)&&(j/=this.lineHeight);var se=s.left+O+V,ne=H-V,be=j,K=0;this.inCompositionMode?(m.fillStyle=this.compositionColor||"black",be=1,K=j):m.fillStyle=this.selectionColor,this.direction==="rtl"&&(se=this.width-se-ne),m.fillRect(se,s.top+s.topOffset+K,ne,be),s.topOffset+=B}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),m=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c:m}}}),u.IText.fromObject=function(s,m){if(C(s),s.styles)for(var v in s.styles)for(var n in s.styles[v])C(s.styles[v][n]);u.Object._fromObject("IText",s,m,"text")}}(),function(){var C=u.util.object.clone;u.util.object.extend(u.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var m=s.canvas;m&&(m._hasITextHandlers||(m._hasITextHandlers=!0,s._initCanvasHandlers(m)),m._iTextInstances=m._iTextInstances||[],m._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var m=s.canvas;m&&(m._iTextInstances=m._iTextInstances||[],u.util.removeFromArray(m._iTextInstances,s),m._iTextInstances.length===0&&(m._hasITextHandlers=!1,s._removeCanvasHandlers(m)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(m){m.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,m,v,n){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",m,{duration:v,onComplete:function(){l.isAborted||s[n]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var m=this,v=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){m._tick()},v)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,m=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&m&&m.clearContext(m.contextTop||m.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var m=0,v=s-1;if(this._reSpace.test(this._text[v]))for(;this._reSpace.test(this._text[v]);)m++,v--;for(;/\S/.test(this._text[v])&&v>-1;)m++,v--;return s-m},findWordBoundaryRight:function(s){var m=0,v=s;if(this._reSpace.test(this._text[v]))for(;this._reSpace.test(this._text[v]);)m++,v++;for(;/\S/.test(this._text[v])&&v<this._text.length;)m++,v++;return s+m},findLineBoundaryLeft:function(s){for(var m=0,v=s-1;!/\n/.test(this._text[v])&&v>-1;)m++,v--;return s-m},findLineBoundaryRight:function(s){for(var m=0,v=s;!/\n/.test(this._text[v])&&v<this._text.length;)m++,v++;return s+m},searchWordBoundary:function(s,m){for(var v=this._text,n=this._reSpace.test(v[s])?s-1:s,l=v[n],r=u.reNonWord;!r.test(l)&&n>0&&n<v.length;)n+=m,l=v[n];return r.test(l)&&(n+=m===1?0:1),n},selectWord:function(s){s=s||this.selectionStart;var m=this.searchWordBoundary(s,-1),v=this.searchWordBoundary(s,1);this.selectionStart=m,this.selectionEnd=v,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var m=this.findLineBoundaryLeft(s),v=this.findLineBoundaryRight(s);return this.selectionStart=m,this.selectionEnd=v,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(m){m.selected=!1,m.isEditing&&m.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){var m=this.getSelectionStartFromPointer(s.e),v=this.selectionStart,n=this.selectionEnd;(m!==this.__selectionStartOnMouseDown||v===n)&&(v===m||n===m)||(m>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=m):(this.selectionStart=m,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==v||this.selectionEnd!==n)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,m,v){var n=v.slice(0,s),l=u.util.string.graphemeSplit(n).length;if(s===m)return{selectionStart:l,selectionEnd:l};var r=v.slice(s,m),h=u.util.string.graphemeSplit(r).length;return{selectionStart:l,selectionEnd:l+h}},fromGraphemeToStringSelection:function(s,m,v){var n=v.slice(0,s),l=n.join("").length;if(s===m)return{selectionStart:l,selectionEnd:l};var r=v.slice(s,m),h=r.join("").length;return{selectionStart:l,selectionEnd:l+h}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,m=this._getCursorBoundaries(s),v=this.get2DCursorLocation(s),n=v.lineIndex,l=v.charIndex,r=this.getValueOfPropertyAt(n,l,"fontSize")*this.lineHeight,h=m.leftOffset,b=this.calcTransformMatrix(),f={x:m.left+h,y:m.top+m.topOffset+r},S=this.canvas.getRetinaScaling(),E=this.canvas.upperCanvasEl,_=E.width/S,O=E.height/S,j=_-r,B=O-r,V=E.clientWidth/_,H=E.clientHeight/O;return f=u.util.transformPoint(f,b),f=u.util.transformPoint(f,this.canvas.viewportTransform),f.x*=V,f.y*=H,f.x<0&&(f.x=0),f.x>j&&(f.x=j),f.y<0&&(f.y=0),f.y>B&&(f.y=B),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:f.x+"px",top:f.y+"px",fontSize:r+"px",charHeight:r}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,m=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,m&&(m.blur&&m.blur(),m.parentNode&&m.parentNode.removeChild(m)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,m){var v=this.get2DCursorLocation(s,!0),n=this.get2DCursorLocation(m,!0),l=v.lineIndex,r=v.charIndex,h=n.lineIndex,b=n.charIndex,f,S;if(l!==h){if(this.styles[l])for(f=r;f<this._unwrappedTextLines[l].length;f++)delete this.styles[l][f];if(this.styles[h])for(f=b;f<this._unwrappedTextLines[h].length;f++)S=this.styles[h][f],S&&(this.styles[l]||(this.styles[l]={}),this.styles[l][r+f-b]=S);for(f=l+1;f<=h;f++)delete this.styles[f];this.shiftLineStyles(h,l-h)}else if(this.styles[l]){S=this.styles[l];var E=b-r,_,O;for(f=r;f<b;f++)delete S[f];for(O in this.styles[l])_=parseInt(O,10),_>=b&&(S[_-E]=S[O],delete S[O])}},shiftLineStyles:function(s,m){var v=C(this.styles);for(var n in this.styles){var l=parseInt(n,10);l>s&&(this.styles[l+m]=v[l],v[l-m]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,m,v,n){var l,r={},h=!1,b=this._unwrappedTextLines[s].length===m;v||(v=1),this.shiftLineStyles(s,v),this.styles[s]&&(l=this.styles[s][m===0?m:m-1]);for(var f in this.styles[s]){var S=parseInt(f,10);S>=m&&(h=!0,r[S-m]=this.styles[s][f],b&&m===0||delete this.styles[s][f])}var E=!1;for(h&&!b&&(this.styles[s+v]=r,E=!0),E&&v--;v>0;)n&&n[v-1]?this.styles[s+v]={0:C(n[v-1])}:l?this.styles[s+v]={0:C(l)}:delete this.styles[s+v],v--;this._forceClearCache=!0},insertCharStyleObject:function(s,m,v,n){this.styles||(this.styles={});var l=this.styles[s],r=l?C(l):{};v||(v=1);for(var h in r){var b=parseInt(h,10);b>=m&&(l[b+v]=r[b],r[b-v]||delete l[b])}if(this._forceClearCache=!0,n){for(;v--;)Object.keys(n[v]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][m+v]=C(n[v]));return}if(l)for(var f=l[m?m-1:1];f&&v--;)this.styles[s][m+v]=C(f)},insertNewStyleBlock:function(s,m,v){for(var n=this.get2DCursorLocation(m,!0),l=[0],r=0,h=0;h<s.length;h++)s[h]===`
`?(r++,l[r]=0):l[r]++;l[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,l[0],v),v=v&&v.slice(l[0]+1)),r&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+l[0],r);for(var h=1;h<r;h++)l[h]>0?this.insertCharStyleObject(n.lineIndex+h,0,l[h],v):v&&(this.styles[n.lineIndex+h][0]=v[0]),v=v&&v.slice(l[h]+1);l[h]>0&&this.insertCharStyleObject(n.lineIndex+h,0,l[h],v)},setSelectionStartEndWithShift:function(s,m,v){v<=s?(m===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=v):v>s&&v<m?this._selectionDirection==="right"?this.selectionEnd=v:this.selectionStart=v:(m===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=m),this.selectionEnd=v)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),u.util.object.extend(u.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(C){if(this.canvas){this.__newClickTime=+new Date;var s=C.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",C),this._stopEvent(C.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(C){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===C.x&&this.__lastPointer.y===C.y},_stopEvent:function(C){C.preventDefault&&C.preventDefault(),C.stopPropagation&&C.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(C){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(C.e))},tripleClickHandler:function(C){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(C.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(C){!this.canvas||!this.editable||C.e.button&&C.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(C.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(C){!this.canvas||!this.editable||C.e.button&&C.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(C){if(this.__isMousedown=!1,!(!this.editable||this.group||C.transform&&C.transform.actionPerformed||C.e.button&&C.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(C.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(C){var s=this.getSelectionStartFromPointer(C),m=this.selectionStart,v=this.selectionEnd;C.shiftKey?this.setSelectionStartEndWithShift(m,v,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(C){for(var s=this.getLocalPointer(C),m=0,v=0,n=0,l=0,r=0,h,b,f=0,S=this._textLines.length;f<S&&n<=s.y;f++)n+=this.getHeightOfLine(f)*this.scaleY,r=f,f>0&&(l+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));h=this._getLineLeftOffset(r),v=h*this.scaleX,b=this._textLines[r],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+v);for(var E=0,_=b.length;E<_&&(m=v,v+=this.__charBounds[r][E].kernedWidth*this.scaleX,v<=s.x);E++)l++;return this._getNewSelectionStartFromOffset(s,m,v,l,_)},_getNewSelectionStartFromOffset:function(C,s,m,v,n){var l=C.x-s,r=m-C.x,h=r>l||r<0?0:1,b=v+h;return this.flipX&&(b=n-b),b>this._text.length&&(b=this._text.length),b}}),u.util.object.extend(u.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=u.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var C=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+C.top+"; left: "+C.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+C.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):u.document.body.appendChild(this.hiddenTextarea),u.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),u.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),u.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),u.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),u.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),u.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),u.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),u.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),u.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(u.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(C){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(C.keyCode in s)this[s[C.keyCode]](C);else if(C.keyCode in this.ctrlKeysMapDown&&(C.ctrlKey||C.metaKey))this[this.ctrlKeysMapDown[C.keyCode]](C);else return;C.stopImmediatePropagation(),C.preventDefault(),C.keyCode>=33&&C.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(C){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(C.keyCode in this.ctrlKeysMapUp&&(C.ctrlKey||C.metaKey))this[this.ctrlKeysMapUp[C.keyCode]](C);else return;C.stopImmediatePropagation(),C.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(C){var s=this.fromPaste;if(this.fromPaste=!1,C&&C.stopPropagation(),!!this.isEditing){var m=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,v=this._text.length,n=m.length,l,r,h=n-v,b=this.selectionStart,f=this.selectionEnd,S=b!==f,E,_,O;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var j=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),B=b>j.selectionStart;S?(l=this._text.slice(b,f),h+=f-b):n<v&&(B?l=this._text.slice(f+h,f):l=this._text.slice(b,b-h)),r=m.slice(j.selectionEnd-h,j.selectionEnd),l&&l.length&&(r.length&&(E=this.getSelectionStyles(b,b+1,!1),E=r.map(function(){return E[0]})),S?(_=b,O=f):B?(_=f-l.length,O=f):(_=f,O=f+l.length),this.removeStyleFromTo(_,O)),r.length&&(s&&r.join("")===u.copiedText&&!u.disableStyleCopyPaste&&(E=u.copiedTextStyle),this.insertNewStyleBlock(r,b,E)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(C){this.compositionStart=C.target.selectionStart,this.compositionEnd=C.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(u.copiedText=this.getSelectedText(),u.disableStyleCopyPaste?u.copiedTextStyle=null:u.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(C){return C&&C.clipboardData||u.window.clipboardData},_getWidthBeforeCursor:function(C,s){var m=this._getLineLeftOffset(C),v;return s>0&&(v=this.__charBounds[C][s-1],m+=v.left+v.width),m},getDownCursorOffset:function(C,s){var m=this._getSelectionForOffset(C,s),v=this.get2DCursorLocation(m),n=v.lineIndex;if(n===this._textLines.length-1||C.metaKey||C.keyCode===34)return this._text.length-m;var l=v.charIndex,r=this._getWidthBeforeCursor(n,l),h=this._getIndexOnLine(n+1,r),b=this._textLines[n].slice(l);return b.length+h+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(C,s){return C.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(C,s){var m=this._getSelectionForOffset(C,s),v=this.get2DCursorLocation(m),n=v.lineIndex;if(n===0||C.metaKey||C.keyCode===33)return-m;var l=v.charIndex,r=this._getWidthBeforeCursor(n,l),h=this._getIndexOnLine(n-1,r),b=this._textLines[n].slice(0,l),f=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+h-b.length+(1-f)},_getIndexOnLine:function(C,s){for(var m=this._textLines[C],v=this._getLineLeftOffset(C),n=v,l=0,r,h,b=0,f=m.length;b<f;b++)if(r=this.__charBounds[C][b].width,n+=r,n>s){h=!0;var S=n-r,E=n,_=Math.abs(S-s),O=Math.abs(E-s);l=O<_?b:b-1;break}return h||(l=m.length-1),l},moveCursorDown:function(C){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",C)},moveCursorUp:function(C){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",C)},_moveCursorUpOrDown:function(C,s){var m="get"+C+"CursorOffset",v=this[m](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(v):this.moveCursorWithoutShift(v),v!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(C){var s=this._selectionDirection==="left"?this.selectionStart+C:this.selectionEnd+C;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),C!==0},moveCursorWithoutShift:function(C){return C<0?(this.selectionStart+=C,this.selectionEnd=this.selectionStart):(this.selectionEnd+=C,this.selectionStart=this.selectionEnd),C!==0},moveCursorLeft:function(C){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",C)},_move:function(C,s,m){var v;if(C.altKey)v=this["findWordBoundary"+m](this[s]);else if(C.metaKey||C.keyCode===35||C.keyCode===36)v=this["findLineBoundary"+m](this[s]);else return this[s]+=m==="Left"?-1:1,!0;if(typeof v!==void 0&&this[s]!==v)return this[s]=v,!0},_moveLeft:function(C,s){return this._move(C,s,"Left")},_moveRight:function(C,s){return this._move(C,s,"Right")},moveCursorLeftWithoutShift:function(C){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(C,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(C){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(C,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(C,"selectionStart")},moveCursorRight:function(C){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",C)},_moveCursorLeftOrRight:function(C,s){var m="moveCursor"+C+"With";this._currentCursorOpacity=1,s.shiftKey?m+="Shift":m+="outShift",this[m](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(C){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(C,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(C,"selectionEnd")},moveCursorRightWithoutShift:function(C){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(C,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(C,s){typeof s>"u"&&(s=C+1),this.removeStyleFromTo(C,s),this._text.splice(C,s-C),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(C,s,m,v){typeof v>"u"&&(v=m),v>m&&this.removeStyleFromTo(m,v);var n=u.util.string.graphemeSplit(C);this.insertNewStyleBlock(n,m,s),this._text=[].concat(this._text.slice(0,m),n,this._text.slice(v)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var C=u.util.toFixed,s=/  +/g;u.util.object.extend(u.Text.prototype,{_toSVG:function(){var m=this._getSVGLeftTopOffsets(),v=this._getSVGTextAndBg(m.textTop,m.textLeft);return this._wrapSVGTextAndBg(v)},toSVG:function(m){return this._createBaseSVGMarkup(this._toSVG(),{reviver:m,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(m){var v=!0,n=this.getSvgTextDecoration(this);return[m.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(v),'"',this.addPaintOrder()," >",m.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(m,v){var n=[],l=[],r=m,h;this._setSVGBg(l);for(var b=0,f=this._textLines.length;b<f;b++)h=this._getLineLeftOffset(b),(this.textBackgroundColor||this.styleHas("textBackgroundColor",b))&&this._setSVGTextLineBg(l,b,v+h,r),this._setSVGTextLineText(n,b,v+h,r),r+=this.getHeightOfLine(b);return{textSpans:n,textBgRects:l}},_createTextCharSpan:function(m,v,n,l){var r=m!==m.trim()||m.match(s),h=this.getSvgSpanStyles(v,r),b=h?'style="'+h+'"':"",f=v.deltaY,S="",E=u.Object.NUM_FRACTION_DIGITS;return f&&(S=' dy="'+C(f,E)+'" '),['<tspan x="',C(n,E),'" y="',C(l,E),'" ',S,b,">",u.util.string.escapeXml(m),"</tspan>"].join("")},_setSVGTextLineText:function(m,v,n,l){var r=this.getHeightOfLine(v),h=this.textAlign.indexOf("justify")!==-1,b,f,S="",E,_,O=0,j=this._textLines[v],B;l+=r*(1-this._fontSizeFraction)/this.lineHeight;for(var V=0,H=j.length-1;V<=H;V++)B=V===H||this.charSpacing,S+=j[V],E=this.__charBounds[v][V],O===0?(n+=E.kernedWidth-E.width,O+=E.width):O+=E.kernedWidth,h&&!B&&this._reSpaceAndTab.test(j[V])&&(B=!0),B||(b=b||this.getCompleteStyleDeclaration(v,V),f=this.getCompleteStyleDeclaration(v,V+1),B=this._hasStyleChangedForSvg(b,f)),B&&(_=this._getStyleDeclaration(v,V)||{},m.push(this._createTextCharSpan(S,_,n,l)),S="",b=f,n+=O,O=0)},_pushTextBgRect:function(m,v,n,l,r,h){var b=u.Object.NUM_FRACTION_DIGITS;m.push("		<rect ",this._getFillAttributes(v),' x="',C(n,b),'" y="',C(l,b),'" width="',C(r,b),'" height="',C(h,b),`"></rect>
`)},_setSVGTextLineBg:function(m,v,n,l){for(var r=this._textLines[v],h=this.getHeightOfLine(v)/this.lineHeight,b=0,f=0,S,E,_=this.getValueOfPropertyAt(v,0,"textBackgroundColor"),O=0,j=r.length;O<j;O++)S=this.__charBounds[v][O],E=this.getValueOfPropertyAt(v,O,"textBackgroundColor"),E!==_?(_&&this._pushTextBgRect(m,_,n+f,l,b,h),f=S.left,b=S.width,_=E):b+=S.kernedWidth;E&&this._pushTextBgRect(m,E,n+f,l,b,h)},_getFillAttributes:function(m){var v=m&&typeof m=="string"?new u.Color(m):"";return!v||!v.getSource()||v.getAlpha()===1?'fill="'+m+'"':'opacity="'+v.getAlpha()+'" fill="'+v.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(m){for(var v=0,n=0,l=0;l<m;l++)v+=this.getHeightOfLine(l);return n=this.getHeightOfLine(l),{lineTop:v,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(m){var v=u.Object.prototype.getSvgStyles.call(this,m);return v+" white-space: pre;"}})}(),function(C){"use strict";var s=C.fabric||(C.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(m){for(var v=0,n=0,l=0,r={},h=0;h<m.graphemeLines.length;h++)m.graphemeText[l]===`
`&&h>0?(n=0,l++,v++):!this.splitByGrapheme&&this._reSpaceAndTab.test(m.graphemeText[l])&&h>0&&(n++,l++),r[h]={line:v,offset:n},l+=m.graphemeLines[h].length,n+=m.graphemeLines[h].length;return r},styleHas:function(m,v){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[v];n&&(v=n.line)}return s.Text.prototype.styleHas.call(this,m,v)},isEmptyStyles:function(m){if(!this.styles)return!0;var v=0,n=m+1,l,r,h=!1,b=this._styleMap[m],f=this._styleMap[m+1];b&&(m=b.line,v=b.offset),f&&(n=f.line,h=n===m,l=f.offset),r=typeof m>"u"?this.styles:{line:this.styles[m]};for(var S in r)for(var E in r[S])if(E>=v&&(!h||E<l))for(var _ in r[S][E])return!1;return!0},_getStyleDeclaration:function(m,v){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[m];if(!n)return null;m=n.line,v=n.offset+v}return this.callSuper("_getStyleDeclaration",m,v)},_setStyleDeclaration:function(m,v,n){var l=this._styleMap[m];m=l.line,v=l.offset+v,this.styles[m][v]=n},_deleteStyleDeclaration:function(m,v){var n=this._styleMap[m];m=n.line,v=n.offset+v,delete this.styles[m][v]},_getLineStyle:function(m){var v=this._styleMap[m];return!!this.styles[v.line]},_setLineStyle:function(m){var v=this._styleMap[m];this.styles[v.line]={}},_wrapText:function(m,v){var n=[],l;for(this.isWrapping=!0,l=0;l<m.length;l++)n=n.concat(this._wrapLine(m[l],l,v));return this.isWrapping=!1,n},_measureWord:function(m,v,n){var l=0,r,h=!0;n=n||0;for(var b=0,f=m.length;b<f;b++){var S=this._getGraphemeBox(m[b],v,b+n,r,h);l+=S.kernedWidth,r=m[b]}return l},_wrapLine:function(m,v,n,se){var r=0,h=this.splitByGrapheme,b=[],f=[],S=h?s.util.string.graphemeSplit(m):m.split(this._wordJoiners),E="",_=0,O=h?"":" ",j=0,B=0,V=0,H=!0,Y=this._getWidthOfCharSpacing(),se=se||0;S.length===0&&S.push([]),n-=se;for(var ne=0;ne<S.length;ne++)E=h?S[ne]:s.util.string.graphemeSplit(S[ne]),j=this._measureWord(E,v,_),_+=E.length,r+=B+j-Y,r>n&&!H?(b.push(f),f=[],r=j,H=!0):r+=Y,!H&&!h&&f.push(O),f=f.concat(E),B=h?0:this._measureWord([O],v,_),_++,H=!1,j>V&&(V=j);return ne&&b.push(f),V+se>this.dynamicMinWidth&&(this.dynamicMinWidth=V-Y+se),b},isEndOfWrapping:function(m){return!this._styleMap[m+1]||this._styleMap[m+1].line!==this._styleMap[m].line},missingNewlineOffset:function(m){return this.splitByGrapheme?this.isEndOfWrapping(m)?1:0:1},_splitTextIntoLines:function(m){for(var v=s.Text.prototype._splitTextIntoLines.call(this,m),n=this._wrapText(v.lines,this.width),l=new Array(n.length),r=0;r<n.length;r++)l[r]=n[r].join("");return v.lines=l,v.graphemeLines=n,v},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var m={};for(var v in this._styleMap)this._textLines[v]&&(m[this._styleMap[v].line]=1);for(var v in this.styles)m[v]||delete this.styles[v]},toObject:function(m){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(m))}}),s.Textbox.fromObject=function(m,v){return s.Object._fromObject("Textbox",m,v,"text")}}(x),function(){var C=u.controlsUtils,s=C.scaleSkewCursorStyleHandler,m=C.scaleCursorStyleHandler,v=C.scalingEqually,n=C.scalingYOrSkewingX,l=C.scalingXOrSkewingY,r=C.scaleOrSkewActionName,h=u.Object.prototype.controls;if(h.ml=new u.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:l,getActionName:r}),h.mr=new u.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:l,getActionName:r}),h.mb=new u.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:n,getActionName:r}),h.mt=new u.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:n,getActionName:r}),h.tl=new u.Control({x:-.5,y:-.5,cursorStyleHandler:m,actionHandler:v}),h.tr=new u.Control({x:.5,y:-.5,cursorStyleHandler:m,actionHandler:v}),h.bl=new u.Control({x:-.5,y:.5,cursorStyleHandler:m,actionHandler:v}),h.br=new u.Control({x:.5,y:.5,cursorStyleHandler:m,actionHandler:v}),h.mtr=new u.Control({x:0,y:-.5,actionHandler:C.rotationWithSnapping,cursorStyleHandler:C.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),u.Textbox){var b=u.Textbox.prototype.controls={};b.mtr=h.mtr,b.tr=h.tr,b.br=h.br,b.tl=h.tl,b.bl=h.bl,b.mt=h.mt,b.mb=h.mb,b.mr=new u.Control({x:.5,y:0,actionHandler:C.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),b.ml=new u.Control({x:-.5,y:0,actionHandler:C.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()},3053:function(y,x,c){"use strict";var u=c(602);function w(N,L,F){var R,C;if(F=F||0,!u(L))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(L,N,F);for(C=L.length,R=F;F>=0&&R<C;R+=1)if(L[R]===N)return R;return-1}y.exports=w},8592:function(y,x,c){"use strict";var u=c(602),w=c(6092),N=c(5573);function L(F,R,C){u(F)?w(F,R,C):N(F,R,C)}y.exports=L},6092:function(y){"use strict";function x(c,u,w){var N=0,L=c.length;for(w=w||null;N<L&&u.call(w,c[N],N,c)!==!1;N+=1);}y.exports=x},5573:function(y){"use strict";function x(c,u,w){var N;w=w||null;for(N in c)if(c.hasOwnProperty(N)&&u.call(w,c[N],N,c)===!1)break}y.exports=x},9052:function(y,x,c){"use strict";var u=c(961),w=c(9886),N=c(2560),L=c(5393),F=c(602),R=c(5183),C=c(8592),s=/\s+/g;function m(){this.events=null,this.contexts=null}m.mixin=function(v){u(v.prototype,m.prototype)},m.prototype._getHandlerItem=function(v,n){var l={handler:v};return n&&(l.context=n),l},m.prototype._safeEvent=function(v){var n=this.events,l;return n||(n=this.events={}),v&&(l=n[v],l||(l=[],n[v]=l),n=l),n},m.prototype._safeContext=function(){var v=this.contexts;return v||(v=this.contexts=[]),v},m.prototype._indexOfContext=function(v){for(var n=this._safeContext(),l=0;n[l];){if(v===n[l][0])return l;l+=1}return-1},m.prototype._memorizeContext=function(v){var n,l;w(v)&&(n=this._safeContext(),l=this._indexOfContext(v),l>-1?n[l][1]+=1:n.push([v,1]))},m.prototype._forgetContext=function(v){var n,l;w(v)&&(n=this._safeContext(),l=this._indexOfContext(v),l>-1&&(n[l][1]-=1,n[l][1]<=0&&n.splice(l,1)))},m.prototype._bindEvent=function(v,n,l){var r=this._safeEvent(v);this._memorizeContext(l),r.push(this._getHandlerItem(n,l))},m.prototype.on=function(v,n,l){var r=this;N(v)?(v=v.split(s),C(v,function(h){r._bindEvent(h,n,l)})):L(v)&&(l=n,C(v,function(h,b){r.on(b,h,l)}))},m.prototype.once=function(v,n,l){var r=this;if(L(v)){l=n,C(v,function(b,f){r.once(f,b,l)});return}function h(){n.apply(l,arguments),r.off(v,h,l)}this.on(v,h,l)},m.prototype._spliceMatches=function(v,n){var l=0,r;if(F(v))for(r=v.length;l<r;l+=1)n(v[l])===!0&&(v.splice(l,1),r-=1,l-=1)},m.prototype._matchHandler=function(v){var n=this;return function(l){var r=v===l.handler;return r&&n._forgetContext(l.context),r}},m.prototype._matchContext=function(v){var n=this;return function(l){var r=v===l.context;return r&&n._forgetContext(l.context),r}},m.prototype._matchHandlerAndContext=function(v,n){var l=this;return function(r){var h=v===r.handler,b=n===r.context,f=h&&b;return f&&l._forgetContext(r.context),f}},m.prototype._offByEventName=function(v,n){var l=this,r=R(n),h=l._matchHandler(n);v=v.split(s),C(v,function(b){var f=l._safeEvent(b);r?l._spliceMatches(f,h):(C(f,function(S){l._forgetContext(S.context)}),l.events[b]=[])})},m.prototype._offByHandler=function(v){var n=this,l=this._matchHandler(v);C(this._safeEvent(),function(r){n._spliceMatches(r,l)})},m.prototype._offByObject=function(v,n){var l=this,r;this._indexOfContext(v)<0?C(v,function(h,b){l.off(b,h)}):N(n)?(r=this._matchContext(v),l._spliceMatches(this._safeEvent(n),r)):R(n)?(r=this._matchHandlerAndContext(n,v),C(this._safeEvent(),function(h){l._spliceMatches(h,r)})):(r=this._matchContext(v),C(this._safeEvent(),function(h){l._spliceMatches(h,r)}))},m.prototype.off=function(v,n){N(v)?this._offByEventName(v,n):arguments.length?R(v)?this._offByHandler(v):L(v)&&this._offByObject(v,n):(this.events={},this.contexts=[])},m.prototype.fire=function(v){this.invoke.apply(this,arguments)},m.prototype.invoke=function(v){var n,l,r,h;if(!this.hasListener(v))return!0;for(n=this._safeEvent(v),l=Array.prototype.slice.call(arguments,1),r=0;n[r];){if(h=n[r],h.handler.apply(h.context,l)===!1)return!1;r+=1}return!0},m.prototype.hasListener=function(v){return this.getListenerLength(v)>0},m.prototype.getListenerLength=function(v){var n=this._safeEvent(v);return n.length},y.exports=m},961:function(y){"use strict";function x(c,u){var w=Object.prototype.hasOwnProperty,N,L,F,R;for(F=1,R=arguments.length;F<R;F+=1){N=arguments[F];for(L in N)w.call(N,L)&&(c[L]=N[L])}return c}y.exports=x},1610:function(y,x,c){"use strict";var u=c(5695),w=c(3778);function N(L,F){for(var R=arguments,C=R[0],s=1,m=R.length;s<m;s+=1){if(u(C)||w(C))return;C=C[R[s]]}return C}y.exports=N},4564:function(y,x,c){"use strict";var u=c(5573);function w(N,L){var F=document.createElement("img"),R="";return u(L,function(C,s){R+="&"+s+"="+C}),R=R.substring(1),F.src=N+"?"+R,F.style.display="none",document.body.appendChild(F),document.body.removeChild(F),F}y.exports=w},4729:function(y,x,c){"use strict";var u=c(5695),w=c(4564),N=7*24*60*60*1e3;function L(R){var C=new Date().getTime();return C-R>N}function F(R,C){var s="https://www.google-analytics.com/collect",m=location.hostname,v="event",n="use",l="TOAST UI "+R+" for "+m+": Statistics",r=window.localStorage.getItem(l);!u(window.tui)&&window.tui.usageStatistics===!1||r&&!L(r)||(window.localStorage.setItem(l,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&w(s,{v:1,t:v,tid:C,cid:m,dp:m,dh:R,el:R,ec:n})},1e3))}y.exports=F},602:function(y){"use strict";function x(c){return c instanceof Array}y.exports=x},9886:function(y,x,c){"use strict";var u=c(5695),w=c(3778);function N(L){return!u(L)&&!w(L)}y.exports=N},5183:function(y){"use strict";function x(c){return c instanceof Function}y.exports=x},3778:function(y){"use strict";function x(c){return c===null}y.exports=x},5393:function(y){"use strict";function x(c){return c===Object(c)}y.exports=x},2560:function(y){"use strict";function x(c){return typeof c=="string"||c instanceof String}y.exports=x},5695:function(y){"use strict";function x(c){return c===void 0}y.exports=x},4426:function(y,x,c){y.exports=c(4486)},9406:function(y,x,c){y.exports=c(4877)},789:function(y,x,c){y.exports=c(7178)},381:function(y,x,c){y.exports=c(5603)},7636:function(y,x,c){y.exports=c(1206)},1899:function(y,x,c){y.exports=c(6174)},899:function(y,x,c){y.exports=c(57)},8005:function(y,x,c){y.exports=c(4741)},6562:function(y,x,c){y.exports=c(8368)},9131:function(y,x,c){y.exports=c(3739)},4383:function(y,x,c){y.exports=c(172)},6065:function(y,x,c){y.exports=c(4963)},1734:function(y,x,c){y.exports=c(7820)},2461:function(y,x,c){y.exports=c(5636)},5214:function(y,x,c){y.exports=c(5059)},6397:function(y,x,c){y.exports=c(3969)},8189:function(y,x,c){y.exports=c(6618)},9146:function(y,x,c){y.exports=c(5279)},4496:function(y,x,c){y.exports=c(9562)},3972:function(y,x,c){y.exports=c(652)},7172:function(y,x,c){y.exports=c(2813)},1845:function(y,x,c){y.exports=c(8664)},662:function(y,x,c){y.exports=c(1457)},711:function(y,x,c){y.exports=c(2937)},6623:function(y,x,c){y.exports=c(9297)},7077:function(y,x,c){y.exports=c(8026)},9856:function(y,x,c){y.exports=c(2044)},4230:function(y,x,c){y.exports=c(2214)},184:function(y,x,c){y.exports=c(9256)},3742:function(y,x,c){y.exports=c(5659)},1801:function(y){var x={rect:1,circle:2,triangle:1},c={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function u(s){var m=s.originX,v=s.originY,n=m.substring(0,1)+v.substring(0,1);s.startPoint=s.origins[n]}function w(s,m,v){var n=s.x,l=s.y,r=m.x,h=m.y,b=v*Math.PI/180,f=(r-n)*Math.cos(b)-(h-l)*Math.sin(b)+n,S=(r-n)*Math.sin(b)+(h-l)*Math.cos(b)+l;return{originX:n>f?"right":"left",originY:l>S?"bottom":"top"}}function N(s){return s.originX==="center"&&s.originY==="center"}function L(s,m){var v=m.getPointByOrigin("center","center"),n=-m.angle,l=w(v,s,n),r=l.originX,h=l.originY,b=m.getPointByOrigin(r,h),f=m.left-(v.x-b.x),S=m.top-(v.y-b.y);m.set({originX:r,originY:h,left:f,top:S}),m.setCoords()}function F(s,m){var v=m.startPoint,n=-m.angle,l=w(v,s,n),r=l.originX,h=l.originY;m.setPositionByOrigin(v,r,h),m.setCoords()}function R(s){var m=s.type,v=s.scaleX,n=s.scaleY,l=c[m],r=s[l.w]*v,h=s[l.h]*n;if(s.isRegular){var b=Math.max(v,n);r=s[l.w]*b,h=s[l.h]*b}var f={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};f[l.w]=r,f[l.h]=h,s.set(f)}function C(s,m){var v=m.type,n=m.strokeWidth,l=m.startPoint,r=x[v],h=c[v],b=m.type==="triangle",f={},S=Math.abs(l.x-s.x)/r,E=Math.abs(l.y-s.y)/r;S>n&&(S-=n/r),E>n&&(E-=n/r),m.isRegular&&(S=E=Math.max(S,E),b&&(E=Math.sqrt(3)/2*S)),f[h.w]=S,f[h.h]=E,m.set(f)}y.exports={setOrigins:function(m){var v=m.getPointByOrigin("left","top"),n=m.getPointByOrigin("right","top"),l=m.getPointByOrigin("right","bottom"),r=m.getPointByOrigin("left","bottom");m.origins={lt:v,rt:n,rb:l,lb:r}},resize:function(m,v,n){N(m)&&(L(v,m),u(m)),n?R(m,v):C(v,m),F(v,m)},adjustOriginToCenter:function(m){var v=m.getPointByOrigin("center","center"),n=m.originX,l=m.originY,r=m.getPointByOrigin(n,l),h=m.left+(v.x-r.x),b=m.top+(v.y-r.y);m.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:h,top:b}),m.setCoords()}}},2221:function(y,x,c){c(5454),c(9173);var u=c(7545);y.exports=u.Array.from},5078:function(y,x,c){c(8118);var u=c(7545);y.exports=u.Array.isArray},6135:function(y,x,c){c(9106);var u=c(5607);y.exports=u("Array").concat},9510:function(y,x,c){c(1710);var u=c(5607);y.exports=u("Array").fill},3971:function(y,x,c){c(3436);var u=c(5607);y.exports=u("Array").filter},98:function(y,x,c){c(9823);var u=c(5607);y.exports=u("Array").forEach},2089:function(y,x,c){c(2276);var u=c(5607);y.exports=u("Array").indexOf},6209:function(y,x,c){c(3838);var u=c(5607);y.exports=u("Array").map},2671:function(y,x,c){c(5818);var u=c(5607);y.exports=u("Array").slice},1375:function(y,x,c){c(2178);var u=c(5607);y.exports=u("Array").splice},3528:function(y,x,c){c(665);var u=c(5607);y.exports=u("Function").bind},5739:function(y,x,c){c(8939),c(5454);var u=c(8703);y.exports=u},278:function(y,x,c){var u=c(3528),w=Function.prototype;y.exports=function(N){var L=N.bind;return N===w||N instanceof Function&&L===w.bind?u:L}},1484:function(y,x,c){var u=c(6135),w=Array.prototype;y.exports=function(N){var L=N.concat;return N===w||N instanceof Array&&L===w.concat?u:L}},7731:function(y,x,c){var u=c(9510),w=Array.prototype;y.exports=function(N){var L=N.fill;return N===w||N instanceof Array&&L===w.fill?u:L}},3669:function(y,x,c){var u=c(3971),w=Array.prototype;y.exports=function(N){var L=N.filter;return N===w||N instanceof Array&&L===w.filter?u:L}},2604:function(y,x,c){var u=c(2089),w=Array.prototype;y.exports=function(N){var L=N.indexOf;return N===w||N instanceof Array&&L===w.indexOf?u:L}},263:function(y,x,c){var u=c(6209),w=Array.prototype;y.exports=function(N){var L=N.map;return N===w||N instanceof Array&&L===w.map?u:L}},7663:function(y,x,c){var u=c(2671),w=Array.prototype;y.exports=function(N){var L=N.slice;return N===w||N instanceof Array&&L===w.slice?u:L}},5063:function(y,x,c){var u=c(1375),w=Array.prototype;y.exports=function(N){var L=N.splice;return N===w||N instanceof Array&&L===w.splice?u:L}},6813:function(y,x,c){var u=c(3842),w=String.prototype;y.exports=function(N){var L=N.trim;return typeof N=="string"||N===w||N instanceof String&&L===w.trim?u:L}},6285:function(y,x,c){c(2666);var u=c(7545);y.exports=u.Number.parseInt},3213:function(y,x,c){c(3113);var u=c(7545),w=u.Object;y.exports=function(L,F){return w.create(L,F)}},3512:function(y,x,c){c(297);var u=c(7545),w=u.Object,N=y.exports=function(F,R,C){return w.defineProperty(F,R,C)};w.defineProperty.sham&&(N.sham=!0)},8168:function(y,x,c){c(9234);var u=c(7545);y.exports=u.Object.getPrototypeOf},8651:function(y,x,c){c(2647);var u=c(7545);y.exports=u.Object.keys},3083:function(y,x,c){c(3222);var u=c(7545);y.exports=u.Object.setPrototypeOf},2987:function(y,x,c){c(4859);var u=c(7545);y.exports=u.parseFloat},2239:function(y,x,c){c(5706);var u=c(7545);y.exports=u.parseInt},3154:function(y,x,c){c(4242),c(8939),c(6663),c(9021),c(7884),c(8885),c(1868),c(5454);var u=c(7545);y.exports=u.Promise},6577:function(y,x,c){c(5397);var u=c(7545);y.exports=u.Reflect.construct},3842:function(y,x,c){c(957);var u=c(5607);y.exports=u("String").trim},5008:function(y,x,c){c(9106),c(6663),c(6187),c(9781),c(492),c(6681),c(9594),c(3665),c(9017),c(1250),c(9786),c(503),c(6565),c(9322),c(3610),c(6886),c(3514),c(8671),c(8556),c(1367);var u=c(7545);y.exports=u.Symbol},994:function(y,x,c){c(8939),c(6663),c(5454),c(3665);var u=c(9207);y.exports=u.f("iterator")},2813:function(y,x,c){var u=c(3822);y.exports=u},8664:function(y,x,c){var u=c(1434);y.exports=u},1457:function(y,x,c){var u=c(7710);y.exports=u},2937:function(y,x,c){var u=c(4741);y.exports=u},9297:function(y,x,c){var u=c(4963);y.exports=u},8026:function(y,x,c){var u=c(7820);y.exports=u},2044:function(y,x,c){var u=c(8980);y.exports=u},2214:function(y,x,c){var u=c(6672);y.exports=u},9256:function(y,x,c){var u=c(2285);c(177),c(9031),c(6658),c(1875),c(8658),c(4592),c(6680),y.exports=u},5659:function(y,x,c){var u=c(8535);y.exports=u},6235:function(y,x,c){var u=c(6447),w=c(9288);y.exports=function(N){if(u(N))return N;throw TypeError(w(N)+" is not a function")}},1404:function(y,x,c){var u=c(2091),w=c(9288);y.exports=function(N){if(u(N))return N;throw TypeError(w(N)+" is not a constructor")}},7757:function(y,x,c){var u=c(6447);y.exports=function(w){if(typeof w=="object"||u(w))return w;throw TypeError("Can't set "+String(w)+" as a prototype")}},7423:function(y){y.exports=function(){}},6961:function(y){y.exports=function(x,c,u){if(x instanceof c)return x;throw TypeError("Incorrect "+(u?u+" ":"")+"invocation")}},1138:function(y,x,c){var u=c(5744);y.exports=function(w){if(u(w))return w;throw TypeError(String(w)+" is not an object")}},2724:function(y,x,c){"use strict";var u=c(1795),w=c(7739),N=c(4104);y.exports=function(F){for(var R=u(this),C=N(R),s=arguments.length,m=w(s>1?arguments[1]:void 0,C),v=s>2?arguments[2]:void 0,n=v===void 0?C:w(v,C);n>m;)R[m++]=F;return R}},7397:function(y,x,c){"use strict";var u=c(454).forEach,w=c(424),N=w("forEach");y.exports=N?[].forEach:function(F){return u(this,F,arguments.length>1?arguments[1]:void 0)}},841:function(y,x,c){"use strict";var u=c(8043),w=c(1795),N=c(1635),L=c(6109),F=c(2091),R=c(4104),C=c(9361),s=c(1669),m=c(8703);y.exports=function(n){var l=w(n),r=F(this),h=arguments.length,b=h>1?arguments[1]:void 0,f=b!==void 0;f&&(b=u(b,h>2?arguments[2]:void 0,2));var S=m(l),E=0,_,O,j,B,V,H;if(S&&!(this==Array&&L(S)))for(B=s(l,S),V=B.next,O=r?new this:[];!(j=V.call(B)).done;E++)H=f?N(B,b,[j.value,E],!0):j.value,C(O,E,H);else for(_=R(l),O=r?new this(_):Array(_);_>E;E++)H=f?b(l[E],E):l[E],C(O,E,H);return O.length=E,O}},8180:function(y,x,c){var u=c(101),w=c(7739),N=c(4104),L=function(F){return function(R,C,s){var m=u(R),v=N(m),n=w(s,v),l;if(F&&C!=C){for(;v>n;)if(l=m[n++],l!=l)return!0}else for(;v>n;n++)if((F||n in m)&&m[n]===C)return F||n||0;return!F&&-1}};y.exports={includes:L(!0),indexOf:L(!1)}},454:function(y,x,c){var u=c(8043),w=c(2202),N=c(1795),L=c(4104),F=c(1321),R=[].push,C=function(s){var m=s==1,v=s==2,n=s==3,l=s==4,r=s==6,h=s==7,b=s==5||r;return function(f,S,E,_){for(var O=N(f),j=w(O),B=u(S,E,3),V=L(j),H=0,Y=_||F,se=m?Y(f,V):v||h?Y(f,0):void 0,ne,be;V>H;H++)if((b||H in j)&&(ne=j[H],be=B(ne,H,O),s))if(m)se[H]=be;else if(be)switch(s){case 3:return!0;case 5:return ne;case 6:return H;case 2:R.call(se,ne)}else switch(s){case 4:return!1;case 7:R.call(se,ne)}return r?-1:n||l?l:se}};y.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6),filterReject:C(7)}},242:function(y,x,c){var u=c(6192),w=c(8182),N=c(4218),L=w("species");y.exports=function(F){return N>=51||!u(function(){var R=[],C=R.constructor={};return C[L]=function(){return{foo:1}},R[F](Boolean).foo!==1})}},424:function(y,x,c){"use strict";var u=c(6192);y.exports=function(w,N){var L=[][w];return!!L&&u(function(){L.call(null,N||function(){throw 1},1)})}},3712:function(y,x,c){var u=c(4770),w=c(2091),N=c(5744),L=c(8182),F=L("species");y.exports=function(R){var C;return u(R)&&(C=R.constructor,w(C)&&(C===Array||u(C.prototype))?C=void 0:N(C)&&(C=C[F],C===null&&(C=void 0))),C===void 0?Array:C}},1321:function(y,x,c){var u=c(3712);y.exports=function(w,N){return new(u(w))(N===0?0:N)}},1635:function(y,x,c){var u=c(1138),w=c(6639);y.exports=function(N,L,F,R){try{return R?L(u(F)[0],F[1]):L(F)}catch(C){w(N,"throw",C)}}},9770:function(y,x,c){var u=c(8182),w=u("iterator"),N=!1;try{var L=0,F={next:function(){return{done:!!L++}},return:function(){N=!0}};F[w]=function(){return this},Array.from(F,function(){throw 2})}catch{}y.exports=function(R,C){if(!C&&!N)return!1;var s=!1;try{var m={};m[w]=function(){return{next:function(){return{done:s=!0}}}},R(m)}catch{}return s}},9272:function(y){var x={}.toString;y.exports=function(c){return x.call(c).slice(8,-1)}},4696:function(y,x,c){var u=c(3471),w=c(6447),N=c(9272),L=c(8182),F=L("toStringTag"),R=N(function(){return arguments}())=="Arguments",C=function(s,m){try{return s[m]}catch{}};y.exports=u?N:function(s){var m,v,n;return s===void 0?"Undefined":s===null?"Null":typeof(v=C(m=Object(s),F))=="string"?v:R?N(m):(n=N(m))=="Object"&&w(m.callee)?"Arguments":n}},4635:function(y,x,c){var u=c(6192);y.exports=!u(function(){function w(){}return w.prototype.constructor=null,Object.getPrototypeOf(new w)!==w.prototype})},5148:function(y,x,c){"use strict";var u=c(4413).IteratorPrototype,w=c(2853),N=c(774),L=c(1284),F=c(7771),R=function(){return this};y.exports=function(C,s,m){var v=s+" Iterator";return C.prototype=w(u,{next:N(1,m)}),L(C,v,!1,!0),F[v]=R,C}},8711:function(y,x,c){var u=c(69),w=c(2760),N=c(774);y.exports=u?function(L,F,R){return w.f(L,F,N(1,R))}:function(L,F,R){return L[F]=R,L}},774:function(y){y.exports=function(x,c){return{enumerable:!(x&1),configurable:!(x&2),writable:!(x&4),value:c}}},9361:function(y,x,c){"use strict";var u=c(77),w=c(2760),N=c(774);y.exports=function(L,F,R){var C=u(F);C in L?w.f(L,C,N(0,R)):L[C]=R}},7218:function(y,x,c){"use strict";var u=c(3085),w=c(5546),N=c(2282),L=c(6447),F=c(5148),R=c(9341),C=c(4469),s=c(1284),m=c(8711),v=c(9482),n=c(8182),l=c(7771),r=c(4413),h=N.PROPER,b=N.CONFIGURABLE,f=r.IteratorPrototype,S=r.BUGGY_SAFARI_ITERATORS,E=n("iterator"),_="keys",O="values",j="entries",B=function(){return this};y.exports=function(V,H,Y,se,ne,be,K){F(Y,H,se);var Ce=function(G){if(G===ne&&te)return te;if(!S&&G in Ie)return Ie[G];switch(G){case _:return function(){return new Y(this,G)};case O:return function(){return new Y(this,G)};case j:return function(){return new Y(this,G)}}return function(){return new Y(this)}},W=H+" Iterator",Be=!1,Ie=V.prototype,ze=Ie[E]||Ie["@@iterator"]||ne&&Ie[ne],te=!S&&ze||Ce(ne),le=H=="Array"&&Ie.entries||ze,q,Z,fe;if(le&&(q=R(le.call(new V)),q!==Object.prototype&&q.next&&(!w&&R(q)!==f&&(C?C(q,f):L(q[E])||v(q,E,B)),s(q,W,!0,!0),w&&(l[W]=B))),h&&ne==O&&ze&&ze.name!==O&&(!w&&b?m(Ie,"name",O):(Be=!0,te=function(){return ze.call(this)})),ne)if(Z={values:Ce(O),keys:be?te:Ce(_),entries:Ce(j)},K)for(fe in Z)(S||Be||!(fe in Ie))&&v(Ie,fe,Z[fe]);else u({target:H,proto:!0,forced:S||Be},Z);return(!w||K)&&Ie[E]!==te&&v(Ie,E,te,{name:ne}),l[H]=te,Z}},1488:function(y,x,c){var u=c(7545),w=c(4500),N=c(9207),L=c(2760).f;y.exports=function(F){var R=u.Symbol||(u.Symbol={});w(R,F)||L(R,F,{value:N.f(F)})}},69:function(y,x,c){var u=c(6192);y.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(y,x,c){var u=c(8576),w=c(5744),N=u.document,L=w(N)&&w(N.createElement);y.exports=function(F){return L?N.createElement(F):{}}},7365:function(y){y.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(y){y.exports=typeof window=="object"},9347:function(y,x,c){var u=c(8989),w=c(8576);y.exports=/ipad|iphone|ipod/i.test(u)&&w.Pebble!==void 0},9536:function(y,x,c){var u=c(8989);y.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(u)},224:function(y,x,c){var u=c(9272),w=c(8576);y.exports=u(w.process)=="process"},5914:function(y,x,c){var u=c(8989);y.exports=/web0s(?!.*chrome)/i.test(u)},8989:function(y,x,c){var u=c(150);y.exports=u("navigator","userAgent")||""},4218:function(y,x,c){var u=c(8576),w=c(8989),N=u.process,L=u.Deno,F=N&&N.versions||L&&L.version,R=F&&F.v8,C,s;R?(C=R.split("."),s=C[0]<4?1:C[0]+C[1]):w&&(C=w.match(/Edge\/(\d+)/),(!C||C[1]>=74)&&(C=w.match(/Chrome\/(\d+)/),C&&(s=C[1]))),y.exports=s&&+s},5607:function(y,x,c){var u=c(7545);y.exports=function(w){return u[w+"Prototype"]}},2952:function(y){y.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(y,x,c){"use strict";var u=c(8576),w=c(6447),N=c(5141).f,L=c(9245),F=c(7545),R=c(8043),C=c(8711),s=c(4500),m=function(v){var n=function(l,r,h){if(this instanceof v){switch(arguments.length){case 0:return new v;case 1:return new v(l);case 2:return new v(l,r)}return new v(l,r,h)}return v.apply(this,arguments)};return n.prototype=v.prototype,n};y.exports=function(v,n){var l=v.target,r=v.global,h=v.stat,b=v.proto,f=r?u:h?u[l]:(u[l]||{}).prototype,S=r?F:F[l]||C(F,l,{})[l],E=S.prototype,_,O,j,B,V,H,Y,se,ne;for(B in n)_=L(r?B:l+(h?".":"#")+B,v.forced),O=!_&&f&&s(f,B),H=S[B],O&&(v.noTargetGet?(ne=N(f,B),Y=ne&&ne.value):Y=f[B]),V=O&&Y?Y:n[B],!(O&&typeof H==typeof V)&&(v.bind&&O?se=R(V,u):v.wrap&&O?se=m(V):b&&w(V)?se=R(Function.call,V):se=V,(v.sham||V&&V.sham||H&&H.sham)&&C(se,"sham",!0),C(S,B,se),b&&(j=l+"Prototype",s(F,j)||C(F,j,{}),C(F[j],B,V),v.real&&E&&!E[B]&&C(E,B,V)))}},6192:function(y){y.exports=function(x){try{return!!x()}catch{return!0}}},8043:function(y,x,c){var u=c(6235);y.exports=function(w,N,L){if(u(w),N===void 0)return w;switch(L){case 0:return function(){return w.call(N)};case 1:return function(F){return w.call(N,F)};case 2:return function(F,R){return w.call(N,F,R)};case 3:return function(F,R,C){return w.call(N,F,R,C)}}return function(){return w.apply(N,arguments)}}},6782:function(y,x,c){"use strict";var u=c(6235),w=c(5744),N=[].slice,L={},F=function(R,C,s){if(!(C in L)){for(var m=[],v=0;v<C;v++)m[v]="a["+v+"]";L[C]=Function("C,a","return new C("+m.join(",")+")")}return L[C](R,s)};y.exports=Function.bind||function(C){var s=u(this),m=N.call(arguments,1),v=function(){var l=m.concat(N.call(arguments));return this instanceof v?F(s,l.length,l):s.apply(C,l)};return w(s.prototype)&&(v.prototype=s.prototype),v}},2282:function(y,x,c){var u=c(69),w=c(4500),N=Function.prototype,L=u&&Object.getOwnPropertyDescriptor,F=w(N,"name"),R=F&&(function(){}).name==="something",C=F&&(!u||u&&L(N,"name").configurable);y.exports={EXISTS:F,PROPER:R,CONFIGURABLE:C}},150:function(y,x,c){var u=c(7545),w=c(8576),N=c(6447),L=function(F){return N(F)?F:void 0};y.exports=function(F,R){return arguments.length<2?L(u[F])||L(w[F]):u[F]&&u[F][R]||w[F]&&w[F][R]}},8703:function(y,x,c){var u=c(4696),w=c(5037),N=c(7771),L=c(8182),F=L("iterator");y.exports=function(R){if(R!=null)return w(R,F)||w(R,"@@iterator")||N[u(R)]}},1669:function(y,x,c){var u=c(6235),w=c(1138),N=c(8703);y.exports=function(L,F){var R=arguments.length<2?N(L):F;if(u(R))return w(R.call(L));throw TypeError(String(L)+" is not iterable")}},5037:function(y,x,c){var u=c(6235);y.exports=function(w,N){var L=w[N];return L==null?void 0:u(L)}},8576:function(y,x,c){var u=function(w){return w&&w.Math==Math&&w};y.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof c.g=="object"&&c.g)||function(){return this}()||Function("return this")()},4500:function(y,x,c){var u=c(1795),w={}.hasOwnProperty;y.exports=Object.hasOwn||function(L,F){return w.call(u(L),F)}},4535:function(y){y.exports={}},3681:function(y,x,c){var u=c(8576);y.exports=function(w,N){var L=u.console;L&&L.error&&(arguments.length===1?L.error(w):L.error(w,N))}},7403:function(y,x,c){var u=c(150);y.exports=u("document","documentElement")},188:function(y,x,c){var u=c(69),w=c(6192),N=c(7449);y.exports=!u&&!w(function(){return Object.defineProperty(N("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(y,x,c){var u=c(6192),w=c(9272),N="".split;y.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(L){return w(L)=="String"?N.call(L,""):Object(L)}:Object},9516:function(y,x,c){var u=c(6447),w=c(6434),N=Function.toString;u(w.inspectSource)||(w.inspectSource=function(L){return N.call(L)}),y.exports=w.inspectSource},273:function(y,x,c){var u=c(5744),w=c(8711);y.exports=function(N,L){u(L)&&"cause"in L&&w(N,"cause",N.cause)}},3326:function(y,x,c){var u=c(8921),w=c(8576),N=c(5744),L=c(8711),F=c(4500),R=c(6434),C=c(9766),s=c(4535),m="Object already initialized",v=w.WeakMap,n,l,r,h=function(j){return r(j)?l(j):n(j,{})},b=function(j){return function(B){var V;if(!N(B)||(V=l(B)).type!==j)throw TypeError("Incompatible receiver, "+j+" required");return V}};if(u||R.state){var f=R.state||(R.state=new v),S=f.get,E=f.has,_=f.set;n=function(j,B){if(E.call(f,j))throw new TypeError(m);return B.facade=j,_.call(f,j,B),B},l=function(j){return S.call(f,j)||{}},r=function(j){return E.call(f,j)}}else{var O=C("state");s[O]=!0,n=function(j,B){if(F(j,O))throw new TypeError(m);return B.facade=j,L(j,O,B),B},l=function(j){return F(j,O)?j[O]:{}},r=function(j){return F(j,O)}}y.exports={set:n,get:l,has:r,enforce:h,getterFor:b}},6109:function(y,x,c){var u=c(8182),w=c(7771),N=u("iterator"),L=Array.prototype;y.exports=function(F){return F!==void 0&&(w.Array===F||L[N]===F)}},4770:function(y,x,c){var u=c(9272);y.exports=Array.isArray||function(N){return u(N)=="Array"}},6447:function(y){y.exports=function(x){return typeof x=="function"}},2091:function(y,x,c){var u=c(6192),w=c(6447),N=c(4696),L=c(150),F=c(9516),R=[],C=L("Reflect","construct"),s=/^\s*(?:class|function)\b/,m=s.exec,v=!s.exec(function(){}),n=function(r){if(!w(r))return!1;try{return C(Object,R,r),!0}catch{return!1}},l=function(r){if(!w(r))return!1;switch(N(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return v||!!m.call(s,F(r))};y.exports=!C||u(function(){var r;return n(n.call)||!n(Object)||!n(function(){r=!0})||r})?l:n},9245:function(y,x,c){var u=c(6192),w=c(6447),N=/#|\.prototype\./,L=function(m,v){var n=R[F(m)];return n==s?!0:n==C?!1:w(v)?u(v):!!v},F=L.normalize=function(m){return String(m).replace(N,".").toLowerCase()},R=L.data={},C=L.NATIVE="N",s=L.POLYFILL="P";y.exports=L},5744:function(y,x,c){var u=c(6447);y.exports=function(w){return typeof w=="object"?w!==null:u(w)}},5546:function(y){y.exports=!0},3236:function(y,x,c){var u=c(6447),w=c(150),N=c(615);y.exports=N?function(L){return typeof L=="symbol"}:function(L){var F=w("Symbol");return u(F)&&Object(L)instanceof F}},3442:function(y,x,c){var u=c(1138),w=c(6109),N=c(4104),L=c(8043),F=c(1669),R=c(8703),C=c(6639),s=function(m,v){this.stopped=m,this.result=v};y.exports=function(m,v,n){var l=n&&n.that,r=!!(n&&n.AS_ENTRIES),h=!!(n&&n.IS_ITERATOR),b=!!(n&&n.INTERRUPTED),f=L(v,l,1+r+b),S,E,_,O,j,B,V,H=function(se){return S&&C(S,"normal",se),new s(!0,se)},Y=function(se){return r?(u(se),b?f(se[0],se[1],H):f(se[0],se[1])):b?f(se,H):f(se)};if(h)S=m;else{if(E=R(m),!E)throw TypeError(String(m)+" is not iterable");if(w(E)){for(_=0,O=N(m);O>_;_++)if(j=Y(m[_]),j&&j instanceof s)return j;return new s(!1)}S=F(m,E)}for(B=S.next;!(V=B.call(S)).done;){try{j=Y(V.value)}catch(se){C(S,"throw",se)}if(typeof j=="object"&&j&&j instanceof s)return j}return new s(!1)}},6639:function(y,x,c){var u=c(1138),w=c(5037);y.exports=function(N,L,F){var R,C;u(N);try{if(R=w(N,"return"),!R){if(L==="throw")throw F;return F}R=R.call(N)}catch(s){C=!0,R=s}if(L==="throw")throw F;if(C)throw R;return u(R),F}},4413:function(y,x,c){"use strict";var u=c(6192),w=c(6447),N=c(2853),L=c(9341),F=c(9482),R=c(8182),C=c(5546),s=R("iterator"),m=!1,v,n,l;[].keys&&(l=[].keys(),"next"in l?(n=L(L(l)),n!==Object.prototype&&(v=n)):m=!0);var r=v==null||u(function(){var h={};return v[s].call(h)!==h});r?v={}:C&&(v=N(v)),w(v[s])||F(v,s,function(){return this}),y.exports={IteratorPrototype:v,BUGGY_SAFARI_ITERATORS:m}},7771:function(y){y.exports={}},4104:function(y,x,c){var u=c(8445);y.exports=function(w){return u(w.length)}},2950:function(y,x,c){var u=c(8576),w=c(5141).f,N=c(7160).set,L=c(9536),F=c(9347),R=c(5914),C=c(224),s=u.MutationObserver||u.WebKitMutationObserver,m=u.document,v=u.process,n=u.Promise,l=w(u,"queueMicrotask"),r=l&&l.value,h,b,f,S,E,_,O,j;r||(h=function(){var B,V;for(C&&(B=v.domain)&&B.exit();b;){V=b.fn,b=b.next;try{V()}catch(H){throw b?S():f=void 0,H}}f=void 0,B&&B.enter()},!L&&!C&&!R&&s&&m?(E=!0,_=m.createTextNode(""),new s(h).observe(_,{characterData:!0}),S=function(){_.data=E=!E}):!F&&n&&n.resolve?(O=n.resolve(void 0),O.constructor=n,j=O.then,S=function(){j.call(O,h)}):C?S=function(){v.nextTick(h)}:S=function(){N.call(u,h)}),y.exports=r||function(B){var V={fn:B,next:void 0};f&&(f.next=V),b||(b=V,S()),f=V}},4471:function(y,x,c){var u=c(8576);y.exports=u.Promise},3045:function(y,x,c){var u=c(4218),w=c(6192);y.exports=!!Object.getOwnPropertySymbols&&!w(function(){var N=Symbol();return!String(N)||!(Object(N)instanceof Symbol)||!Symbol.sham&&u&&u<41})},4551:function(y,x,c){var u=c(6192),w=c(8182),N=c(5546),L=w("iterator");y.exports=!u(function(){var F=new URL("b?a=1&b=2&c=3","http://a"),R=F.searchParams,C="";return F.pathname="c%20d",R.forEach(function(s,m){R.delete("b"),C+=m+s}),N&&!F.toJSON||!R.sort||F.href!=="http://a/c%20d?a=1&c=3"||R.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!R[L]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||C!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8921:function(y,x,c){var u=c(8576),w=c(6447),N=c(9516),L=u.WeakMap;y.exports=w(L)&&/native code/.test(N(L))},9438:function(y,x,c){"use strict";var u=c(6235),w=function(N){var L,F;this.promise=new N(function(R,C){if(L!==void 0||F!==void 0)throw TypeError("Bad Promise constructor");L=R,F=C}),this.resolve=u(L),this.reject=u(F)};y.exports.f=function(N){return new w(N)}},15:function(y,x,c){var u=c(8576),w=c(6192),N=c(4845),L=c(4277).trim,F=c(1450),R=u.parseFloat,C=u.Symbol,s=C&&C.iterator,m=1/R(F+"-0")!==-1/0||s&&!w(function(){R(Object(s))});y.exports=m?function(n){var l=L(N(n)),r=R(l);return r===0&&l.charAt(0)=="-"?-0:r}:R},2558:function(y,x,c){var u=c(8576),w=c(6192),N=c(4845),L=c(4277).trim,F=c(1450),R=u.parseInt,C=u.Symbol,s=C&&C.iterator,m=/^[+-]?0[Xx]/,v=R(F+"08")!==8||R(F+"0x16")!==22||s&&!w(function(){R(Object(s))});y.exports=v?function(l,r){var h=L(N(l));return R(h,r>>>0||(m.test(h)?16:10))}:R},2503:function(y,x,c){"use strict";var u=c(69),w=c(6192),N=c(7653),L=c(4750),F=c(6007),R=c(1795),C=c(2202),s=Object.assign,m=Object.defineProperty;y.exports=!s||w(function(){if(u&&s({b:1},s(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var v={},n={},l=Symbol(),r="abcdefghijklmnopqrst";return v[l]=7,r.split("").forEach(function(h){n[h]=h}),s({},v)[l]!=7||N(s({},n)).join("")!=r})?function(n,l){for(var r=R(n),h=arguments.length,b=1,f=L.f,S=F.f;h>b;)for(var E=C(arguments[b++]),_=f?N(E).concat(f(E)):N(E),O=_.length,j=0,B;O>j;)B=_[j++],(!u||S.call(E,B))&&(r[B]=E[B]);return r}:s},2853:function(y,x,c){var u=c(1138),w=c(1187),N=c(2952),L=c(4535),F=c(7403),R=c(7449),C=c(9766),s=">",m="<",v="prototype",n="script",l=C("IE_PROTO"),r=function(){},h=function(_){return m+n+s+_+m+"/"+n+s},b=function(_){_.write(h("")),_.close();var O=_.parentWindow.Object;return _=null,O},f=function(){var _=R("iframe"),O="java"+n+":",j;return _.style.display="none",F.appendChild(_),_.src=String(O),j=_.contentWindow.document,j.open(),j.write(h("document.F=Object")),j.close(),j.F},S,E=function(){try{S=new ActiveXObject("htmlfile")}catch{}E=typeof document<"u"?document.domain&&S?b(S):f():b(S);for(var _=N.length;_--;)delete E[v][N[_]];return E()};L[l]=!0,y.exports=Object.create||function(O,j){var B;return O!==null?(r[v]=u(O),B=new r,r[v]=null,B[l]=O):B=E(),j===void 0?B:w(B,j)}},1187:function(y,x,c){var u=c(69),w=c(2760),N=c(1138),L=c(7653);y.exports=u?Object.defineProperties:function(R,C){N(R);for(var s=L(C),m=s.length,v=0,n;m>v;)w.f(R,n=s[v++],C[n]);return R}},2760:function(y,x,c){var u=c(69),w=c(188),N=c(1138),L=c(77),F=Object.defineProperty;x.f=u?F:function(C,s,m){if(N(C),s=L(s),N(m),w)try{return F(C,s,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(C[s]=m.value),C}},5141:function(y,x,c){var u=c(69),w=c(6007),N=c(774),L=c(101),F=c(77),R=c(4500),C=c(188),s=Object.getOwnPropertyDescriptor;x.f=u?s:function(v,n){if(v=L(v),n=F(n),C)try{return s(v,n)}catch{}if(R(v,n))return N(!w.f.call(v,n),v[n])}},4052:function(y,x,c){var u=c(101),w=c(2092).f,N={}.toString,L=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],F=function(R){try{return w(R)}catch{return L.slice()}};y.exports.f=function(C){return L&&N.call(C)=="[object Window]"?F(C):w(u(C))}},2092:function(y,x,c){var u=c(7934),w=c(2952),N=w.concat("length","prototype");x.f=Object.getOwnPropertyNames||function(F){return u(F,N)}},4750:function(y,x){x.f=Object.getOwnPropertySymbols},9341:function(y,x,c){var u=c(4500),w=c(6447),N=c(1795),L=c(9766),F=c(4635),R=L("IE_PROTO"),C=Object.prototype;y.exports=F?Object.getPrototypeOf:function(s){var m=N(s);if(u(m,R))return m[R];var v=m.constructor;return w(v)&&m instanceof v?v.prototype:m instanceof Object?C:null}},7934:function(y,x,c){var u=c(4500),w=c(101),N=c(8180).indexOf,L=c(4535);y.exports=function(F,R){var C=w(F),s=0,m=[],v;for(v in C)!u(L,v)&&u(C,v)&&m.push(v);for(;R.length>s;)u(C,v=R[s++])&&(~N(m,v)||m.push(v));return m}},7653:function(y,x,c){var u=c(7934),w=c(2952);y.exports=Object.keys||function(L){return u(L,w)}},6007:function(y,x){"use strict";var c={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,w=u&&!c.call({1:2},1);x.f=w?function(L){var F=u(this,L);return!!F&&F.enumerable}:c},4469:function(y,x,c){var u=c(1138),w=c(7757);y.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var N=!1,L={},F;try{F=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,F.call(L,[]),N=L instanceof Array}catch{}return function(C,s){return u(C),w(s),N?F.call(C,s):C.__proto__=s,C}}():void 0)},158:function(y,x,c){"use strict";var u=c(3471),w=c(4696);y.exports=u?{}.toString:function(){return"[object "+w(this)+"]"}},380:function(y,x,c){var u=c(6447),w=c(5744);y.exports=function(N,L){var F,R;if(L==="string"&&u(F=N.toString)&&!w(R=F.call(N))||u(F=N.valueOf)&&!w(R=F.call(N))||L!=="string"&&u(F=N.toString)&&!w(R=F.call(N)))return R;throw TypeError("Can't convert object to primitive value")}},7545:function(y){y.exports={}},892:function(y){y.exports=function(x){try{return{error:!1,value:x()}}catch(c){return{error:!0,value:c}}}},9126:function(y,x,c){var u=c(1138),w=c(5744),N=c(9438);y.exports=function(L,F){if(u(L),w(F)&&F.constructor===L)return F;var R=N.f(L),C=R.resolve;return C(F),R.promise}},533:function(y,x,c){var u=c(9482);y.exports=function(w,N,L){for(var F in N)L&&L.unsafe&&w[F]?w[F]=N[F]:u(w,F,N[F],L);return w}},9482:function(y,x,c){var u=c(8711);y.exports=function(w,N,L,F){F&&F.enumerable?w[N]=L:u(w,N,L)}},3209:function(y){y.exports=function(x){if(x==null)throw TypeError("Can't call method on "+x);return x}},7613:function(y,x,c){var u=c(8576);y.exports=function(w,N){try{Object.defineProperty(u,w,{value:N,configurable:!0,writable:!0})}catch{u[w]=N}return N}},3656:function(y,x,c){"use strict";var u=c(150),w=c(2760),N=c(8182),L=c(69),F=N("species");y.exports=function(R){var C=u(R),s=w.f;L&&C&&!C[F]&&s(C,F,{configurable:!0,get:function(){return this}})}},1284:function(y,x,c){var u=c(3471),w=c(2760).f,N=c(8711),L=c(4500),F=c(158),R=c(8182),C=R("toStringTag");y.exports=function(s,m,v,n){if(s){var l=v?s:s.prototype;L(l,C)||w(l,C,{configurable:!0,value:m}),n&&!u&&N(l,"toString",F)}}},9766:function(y,x,c){var u=c(8717),w=c(2759),N=u("keys");y.exports=function(L){return N[L]||(N[L]=w(L))}},6434:function(y,x,c){var u=c(8576),w=c(7613),N="__core-js_shared__",L=u[N]||w(N,{});y.exports=L},8717:function(y,x,c){var u=c(5546),w=c(6434);(y.exports=function(N,L){return w[N]||(w[N]=L!==void 0?L:{})})("versions",[]).push({version:"3.18.2",mode:u?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(y,x,c){var u=c(1138),w=c(1404),N=c(8182),L=N("species");y.exports=function(F,R){var C=u(F).constructor,s;return C===void 0||(s=u(C)[L])==null?R:w(s)}},863:function(y,x,c){var u=c(1941),w=c(4845),N=c(3209),L=function(F){return function(R,C){var s=w(N(R)),m=u(C),v=s.length,n,l;return m<0||m>=v?F?"":void 0:(n=s.charCodeAt(m),n<55296||n>56319||m+1===v||(l=s.charCodeAt(m+1))<56320||l>57343?F?s.charAt(m):n:F?s.slice(m,m+2):(n-55296<<10)+(l-56320)+65536)}};y.exports={codeAt:L(!1),charAt:L(!0)}},7977:function(y){"use strict";var x=2147483647,c=36,u=1,w=26,N=38,L=700,F=72,R=128,C="-",s=/[^\0-\u007E]/,m=/[.\u3002\uFF0E\uFF61]/g,v="Overflow: input needs wider integers to process",n=c-u,l=Math.floor,r=String.fromCharCode,h=function(E){for(var _=[],O=0,j=E.length;O<j;){var B=E.charCodeAt(O++);if(B>=55296&&B<=56319&&O<j){var V=E.charCodeAt(O++);(V&64512)==56320?_.push(((B&1023)<<10)+(V&1023)+65536):(_.push(B),O--)}else _.push(B)}return _},b=function(E){return E+22+75*(E<26)},f=function(E,_,O){var j=0;for(E=O?l(E/L):E>>1,E+=l(E/_);E>n*w>>1;j+=c)E=l(E/n);return l(j+(n+1)*E/(E+N))},S=function(E){var _=[];E=h(E);var O=E.length,j=R,B=0,V=F,H,Y;for(H=0;H<E.length;H++)Y=E[H],Y<128&&_.push(r(Y));var se=_.length,ne=se;for(se&&_.push(C);ne<O;){var be=x;for(H=0;H<E.length;H++)Y=E[H],Y>=j&&Y<be&&(be=Y);var K=ne+1;if(be-j>l((x-B)/K))throw RangeError(v);for(B+=(be-j)*K,j=be,H=0;H<E.length;H++){if(Y=E[H],Y<j&&++B>x)throw RangeError(v);if(Y==j){for(var Ce=B,W=c;;W+=c){var Be=W<=V?u:W>=V+w?w:W-V;if(Ce<Be)break;var Ie=Ce-Be,ze=c-Be;_.push(r(b(Be+Ie%ze))),Ce=l(Ie/ze)}_.push(r(b(Ce))),V=f(B,K,ne==se),B=0,++ne}}++B,++j}return _.join("")};y.exports=function(E){var _=[],O=E.toLowerCase().replace(m,".").split("."),j,B;for(j=0;j<O.length;j++)B=O[j],_.push(s.test(B)?"xn--"+S(B):B);return _.join(".")}},6815:function(y,x,c){var u=c(2282).PROPER,w=c(6192),N=c(1450),L="\u200B\x85\u180E";y.exports=function(F){return w(function(){return!!N[F]()||L[F]()!==L||u&&N[F].name!==F})}},4277:function(y,x,c){var u=c(3209),w=c(4845),N=c(1450),L="["+N+"]",F=RegExp("^"+L+L+"*"),R=RegExp(L+L+"*$"),C=function(s){return function(m){var v=w(u(m));return s&1&&(v=v.replace(F,"")),s&2&&(v=v.replace(R,"")),v}};y.exports={start:C(1),end:C(2),trim:C(3)}},7160:function(y,x,c){var u=c(8576),w=c(6447),N=c(6192),L=c(8043),F=c(7403),R=c(7449),C=c(9536),s=c(224),m=u.setImmediate,v=u.clearImmediate,n=u.process,l=u.MessageChannel,r=u.Dispatch,h=0,b={},f="onreadystatechange",S,E,_,O;try{S=u.location}catch{}var j=function(Y){if(b.hasOwnProperty(Y)){var se=b[Y];delete b[Y],se()}},B=function(Y){return function(){j(Y)}},V=function(Y){j(Y.data)},H=function(Y){u.postMessage(String(Y),S.protocol+"//"+S.host)};(!m||!v)&&(m=function(se){for(var ne=[],be=arguments.length,K=1;be>K;)ne.push(arguments[K++]);return b[++h]=function(){(w(se)?se:Function(se)).apply(void 0,ne)},E(h),h},v=function(se){delete b[se]},s?E=function(Y){n.nextTick(B(Y))}:r&&r.now?E=function(Y){r.now(B(Y))}:l&&!C?(_=new l,O=_.port2,_.port1.onmessage=V,E=L(O.postMessage,O,1)):u.addEventListener&&w(u.postMessage)&&!u.importScripts&&S&&S.protocol!=="file:"&&!N(H)?(E=H,u.addEventListener("message",V,!1)):f in R("script")?E=function(Y){F.appendChild(R("script"))[f]=function(){F.removeChild(this),j(Y)}}:E=function(Y){setTimeout(B(Y),0)}),y.exports={set:m,clear:v}},7739:function(y,x,c){var u=c(1941),w=Math.max,N=Math.min;y.exports=function(L,F){var R=u(L);return R<0?w(R+F,0):N(R,F)}},101:function(y,x,c){var u=c(2202),w=c(3209);y.exports=function(N){return u(w(N))}},1941:function(y){var x=Math.ceil,c=Math.floor;y.exports=function(u){var w=+u;return w!==w||w===0?0:(w>0?c:x)(w)}},8445:function(y,x,c){var u=c(1941),w=Math.min;y.exports=function(N){return N>0?w(u(N),9007199254740991):0}},1795:function(y,x,c){var u=c(3209);y.exports=function(w){return Object(u(w))}},7888:function(y,x,c){var u=c(5744),w=c(3236),N=c(5037),L=c(380),F=c(8182),R=F("toPrimitive");y.exports=function(C,s){if(!u(C)||w(C))return C;var m=N(C,R),v;if(m){if(s===void 0&&(s="default"),v=m.call(C,s),!u(v)||w(v))return v;throw TypeError("Can't convert object to primitive value")}return s===void 0&&(s="number"),L(C,s)}},77:function(y,x,c){var u=c(7888),w=c(3236);y.exports=function(N){var L=u(N,"string");return w(L)?L:String(L)}},3471:function(y,x,c){var u=c(8182),w=u("toStringTag"),N={};N[w]="z",y.exports=String(N)==="[object z]"},4845:function(y,x,c){var u=c(4696);y.exports=function(w){if(u(w)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(w)}},9288:function(y){y.exports=function(x){try{return String(x)}catch{return"Object"}}},2759:function(y){var x=0,c=Math.random();y.exports=function(u){return"Symbol("+String(u===void 0?"":u)+")_"+(++x+c).toString(36)}},615:function(y,x,c){var u=c(3045);y.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(y,x,c){var u=c(8182);x.f=u},8182:function(y,x,c){var u=c(8576),w=c(8717),N=c(4500),L=c(2759),F=c(3045),R=c(615),C=w("wks"),s=u.Symbol,m=R?s:s&&s.withoutSetter||L;y.exports=function(v){return(!N(C,v)||!(F||typeof C[v]=="string"))&&(F&&N(s,v)?C[v]=s[v]:C[v]=m("Symbol."+v)),C[v]}},1450:function(y){y.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},4242:function(y,x,c){"use strict";var u=c(3085),w=c(9341),N=c(4469),L=c(2853),F=c(8711),R=c(774),C=c(273),s=c(3442),m=c(4845),v=function(l,r){var h=this,b=arguments.length>2?arguments[2]:void 0;if(!(h instanceof v))return new v(l,r,b);N&&(h=N(new Error(void 0),w(h))),r!==void 0&&F(h,"message",m(r)),C(h,b);var f=[];return s(l,f.push,{that:f}),F(h,"errors",f),h};v.prototype=L(Error.prototype,{constructor:R(5,v),message:R(5,""),name:R(5,"AggregateError")}),u({global:!0},{AggregateError:v})},9106:function(y,x,c){"use strict";var u=c(3085),w=c(6192),N=c(4770),L=c(5744),F=c(1795),R=c(4104),C=c(9361),s=c(1321),m=c(242),v=c(8182),n=c(4218),l=v("isConcatSpreadable"),r=9007199254740991,h="Maximum allowed index exceeded",b=n>=51||!w(function(){var _=[];return _[l]=!1,_.concat()[0]!==_}),f=m("concat"),S=function(_){if(!L(_))return!1;var O=_[l];return O!==void 0?!!O:N(_)},E=!b||!f;u({target:"Array",proto:!0,forced:E},{concat:function(O){var j=F(this),B=s(j,0),V=0,H,Y,se,ne,be;for(H=-1,se=arguments.length;H<se;H++)if(be=H===-1?j:arguments[H],S(be)){if(ne=R(be),V+ne>r)throw TypeError(h);for(Y=0;Y<ne;Y++,V++)Y in be&&C(B,V,be[Y])}else{if(V>=r)throw TypeError(h);C(B,V++,be)}return B.length=V,B}})},1710:function(y,x,c){var u=c(3085),w=c(2724),N=c(7423);u({target:"Array",proto:!0},{fill:w}),N("fill")},3436:function(y,x,c){"use strict";var u=c(3085),w=c(454).filter,N=c(242),L=N("filter");u({target:"Array",proto:!0,forced:!L},{filter:function(R){return w(this,R,arguments.length>1?arguments[1]:void 0)}})},9823:function(y,x,c){"use strict";var u=c(3085),w=c(7397);u({target:"Array",proto:!0,forced:[].forEach!=w},{forEach:w})},9173:function(y,x,c){var u=c(3085),w=c(841),N=c(9770),L=!N(function(F){Array.from(F)});u({target:"Array",stat:!0,forced:L},{from:w})},2276:function(y,x,c){"use strict";var u=c(3085),w=c(8180).indexOf,N=c(424),L=[].indexOf,F=!!L&&1/[1].indexOf(1,-0)<0,R=N("indexOf");u({target:"Array",proto:!0,forced:F||!R},{indexOf:function(s){return F?L.apply(this,arguments)||0:w(this,s,arguments.length>1?arguments[1]:void 0)}})},8118:function(y,x,c){var u=c(3085),w=c(4770);u({target:"Array",stat:!0},{isArray:w})},8939:function(y,x,c){"use strict";var u=c(101),w=c(7423),N=c(7771),L=c(3326),F=c(7218),R="Array Iterator",C=L.set,s=L.getterFor(R);y.exports=F(Array,"Array",function(m,v){C(this,{type:R,target:u(m),index:0,kind:v})},function(){var m=s(this),v=m.target,n=m.kind,l=m.index++;return!v||l>=v.length?(m.target=void 0,{value:void 0,done:!0}):n=="keys"?{value:l,done:!1}:n=="values"?{value:v[l],done:!1}:{value:[l,v[l]],done:!1}},"values"),N.Arguments=N.Array,w("keys"),w("values"),w("entries")},3838:function(y,x,c){"use strict";var u=c(3085),w=c(454).map,N=c(242),L=N("map");u({target:"Array",proto:!0,forced:!L},{map:function(R){return w(this,R,arguments.length>1?arguments[1]:void 0)}})},5818:function(y,x,c){"use strict";var u=c(3085),w=c(4770),N=c(2091),L=c(5744),F=c(7739),R=c(4104),C=c(101),s=c(9361),m=c(8182),v=c(242),n=v("slice"),l=m("species"),r=[].slice,h=Math.max;u({target:"Array",proto:!0,forced:!n},{slice:function(f,S){var E=C(this),_=R(E),O=F(f,_),j=F(S===void 0?_:S,_),B,V,H;if(w(E)&&(B=E.constructor,N(B)&&(B===Array||w(B.prototype))?B=void 0:L(B)&&(B=B[l],B===null&&(B=void 0)),B===Array||B===void 0))return r.call(E,O,j);for(V=new(B===void 0?Array:B)(h(j-O,0)),H=0;O<j;O++,H++)O in E&&s(V,H,E[O]);return V.length=H,V}})},2178:function(y,x,c){"use strict";var u=c(3085),w=c(7739),N=c(1941),L=c(4104),F=c(1795),R=c(1321),C=c(9361),s=c(242),m=s("splice"),v=Math.max,n=Math.min,l=9007199254740991,r="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!m},{splice:function(b,f){var S=F(this),E=L(S),_=w(b,E),O=arguments.length,j,B,V,H,Y,se;if(O===0?j=B=0:O===1?(j=0,B=E-_):(j=O-2,B=n(v(N(f),0),E-_)),E+j-B>l)throw TypeError(r);for(V=R(S,B),H=0;H<B;H++)Y=_+H,Y in S&&C(V,H,S[Y]);if(V.length=B,j<B){for(H=_;H<E-B;H++)Y=H+B,se=H+j,Y in S?S[se]=S[Y]:delete S[se];for(H=E;H>E-B+j;H--)delete S[H-1]}else if(j>B)for(H=E-B;H>_;H--)Y=H+B-1,se=H+j-1,Y in S?S[se]=S[Y]:delete S[se];for(H=0;H<j;H++)S[H+_]=arguments[H+2];return S.length=E-B+j,V}})},665:function(y,x,c){var u=c(3085),w=c(6782);u({target:"Function",proto:!0},{bind:w})},8671:function(y,x,c){var u=c(8576),w=c(1284);w(u.JSON,"JSON",!0)},8556:function(){},2666:function(y,x,c){var u=c(3085),w=c(2558);u({target:"Number",stat:!0,forced:Number.parseInt!=w},{parseInt:w})},3113:function(y,x,c){var u=c(3085),w=c(69),N=c(2853);u({target:"Object",stat:!0,sham:!w},{create:N})},297:function(y,x,c){var u=c(3085),w=c(69),N=c(2760);u({target:"Object",stat:!0,forced:!w,sham:!w},{defineProperty:N.f})},9234:function(y,x,c){var u=c(3085),w=c(6192),N=c(1795),L=c(9341),F=c(4635),R=w(function(){L(1)});u({target:"Object",stat:!0,forced:R,sham:!F},{getPrototypeOf:function(s){return L(N(s))}})},2647:function(y,x,c){var u=c(3085),w=c(1795),N=c(7653),L=c(6192),F=L(function(){N(1)});u({target:"Object",stat:!0,forced:F},{keys:function(C){return N(w(C))}})},3222:function(y,x,c){var u=c(3085),w=c(4469);u({target:"Object",stat:!0},{setPrototypeOf:w})},6663:function(){},4859:function(y,x,c){var u=c(3085),w=c(15);u({global:!0,forced:parseFloat!=w},{parseFloat:w})},5706:function(y,x,c){var u=c(3085),w=c(2558);u({global:!0,forced:parseInt!=w},{parseInt:w})},7884:function(y,x,c){"use strict";var u=c(3085),w=c(6235),N=c(9438),L=c(892),F=c(3442);u({target:"Promise",stat:!0},{allSettled:function(C){var s=this,m=N.f(s),v=m.resolve,n=m.reject,l=L(function(){var r=w(s.resolve),h=[],b=0,f=1;F(C,function(S){var E=b++,_=!1;h.push(void 0),f++,r.call(s,S).then(function(O){_||(_=!0,h[E]={status:"fulfilled",value:O},--f||v(h))},function(O){_||(_=!0,h[E]={status:"rejected",reason:O},--f||v(h))})}),--f||v(h)});return l.error&&n(l.value),m.promise}})},8885:function(y,x,c){"use strict";var u=c(3085),w=c(6235),N=c(150),L=c(9438),F=c(892),R=c(3442),C="No one promise resolved";u({target:"Promise",stat:!0},{any:function(m){var v=this,n=L.f(v),l=n.resolve,r=n.reject,h=F(function(){var b=w(v.resolve),f=[],S=0,E=1,_=!1;R(m,function(O){var j=S++,B=!1;f.push(void 0),E++,b.call(v,O).then(function(V){B||_||(_=!0,l(V))},function(V){B||_||(B=!0,f[j]=V,--E||r(new(N("AggregateError"))(f,C)))})}),--E||r(new(N("AggregateError"))(f,C))});return h.error&&r(h.value),n.promise}})},1868:function(y,x,c){"use strict";var u=c(3085),w=c(5546),N=c(4471),L=c(6192),F=c(150),R=c(6447),C=c(4743),s=c(9126),m=c(9482),v=!!N&&L(function(){N.prototype.finally.call({then:function(){}},function(){})});if(u({target:"Promise",proto:!0,real:!0,forced:v},{finally:function(l){var r=C(this,F("Promise")),h=R(l);return this.then(h?function(b){return s(r,l()).then(function(){return b})}:l,h?function(b){return s(r,l()).then(function(){throw b})}:l)}}),!w&&R(N)){var n=F("Promise").prototype.finally;N.prototype.finally!==n&&m(N.prototype,"finally",n,{unsafe:!0})}},9021:function(y,x,c){"use strict";var u=c(3085),w=c(5546),N=c(8576),L=c(150),F=c(4471),R=c(9482),C=c(533),s=c(4469),m=c(1284),v=c(3656),n=c(6235),l=c(6447),r=c(5744),h=c(6961),b=c(9516),f=c(3442),S=c(9770),E=c(4743),_=c(7160).set,O=c(2950),j=c(9126),B=c(3681),V=c(9438),H=c(892),Y=c(3326),se=c(9245),ne=c(8182),be=c(2957),K=c(224),Ce=c(4218),W=ne("species"),Be="Promise",Ie=Y.get,ze=Y.set,te=Y.getterFor(Be),le=F&&F.prototype,q=F,Z=le,fe=N.TypeError,G=N.document,X=N.process,J=V.f,Q=J,ve=!!(G&&G.createEvent&&N.dispatchEvent),he=l(N.PromiseRejectionEvent),Se="unhandledrejection",xe="rejectionhandled",De=0,ae=1,ee=2,ie=1,ce=2,de=!1,me,Ne,Ve,He,ye=se(Be,function(){var we=b(q),Ae=we!==String(q);if(!Ae&&Ce===66||w&&!Z.finally)return!0;if(Ce>=51&&/native code/.test(we))return!1;var Fe=new q(function(Le){Le(1)}),Ue=function(Le){Le(function(){},function(){})},Ye=Fe.constructor={};return Ye[W]=Ue,de=Fe.then(function(){})instanceof Ue,de?!Ae&&be&&!he:!0}),We=ye||!S(function(we){q.all(we).catch(function(){})}),Xe=function(we){var Ae;return r(we)&&l(Ae=we.then)?Ae:!1},qe=function(we,Ae){if(!we.notified){we.notified=!0;var Fe=we.reactions;O(function(){for(var Ue=we.value,Ye=we.state==ae,Le=0;Fe.length>Le;){var kt=Fe[Le++],Pt=Ye?kt.ok:kt.fail,Ge=kt.resolve,Ee=kt.reject,Dt=kt.domain,lt,ft,Jt;try{Pt?(Ye||(we.rejection===ce&&rt(we),we.rejection=ie),Pt===!0?lt=Ue:(Dt&&Dt.enter(),lt=Pt(Ue),Dt&&(Dt.exit(),Jt=!0)),lt===kt.promise?Ee(fe("Promise-chain cycle")):(ft=Xe(lt))?ft.call(lt,Ge,Ee):Ge(lt)):Ee(Ue)}catch(Xt){Dt&&!Jt&&Dt.exit(),Ee(Xt)}}we.reactions=[],we.notified=!1,Ae&&!we.rejection&&ut(we)})}},Et=function(we,Ae,Fe){var Ue,Ye;ve?(Ue=G.createEvent("Event"),Ue.promise=Ae,Ue.reason=Fe,Ue.initEvent(we,!1,!0),N.dispatchEvent(Ue)):Ue={promise:Ae,reason:Fe},!he&&(Ye=N["on"+we])?Ye(Ue):we===Se&&B("Unhandled promise rejection",Fe)},ut=function(we){_.call(N,function(){var Ae=we.facade,Fe=we.value,Ue=pt(we),Ye;if(Ue&&(Ye=H(function(){K?X.emit("unhandledRejection",Fe,Ae):Et(Se,Ae,Fe)}),we.rejection=K||pt(we)?ce:ie,Ye.error))throw Ye.value})},pt=function(we){return we.rejection!==ie&&!we.parent},rt=function(we){_.call(N,function(){var Ae=we.facade;K?X.emit("rejectionHandled",Ae):Et(xe,Ae,we.value)})},vt=function(we,Ae,Fe){return function(Ue){we(Ae,Ue,Fe)}},Nt=function(we,Ae,Fe){we.done||(we.done=!0,Fe&&(we=Fe),we.value=Ae,we.state=ee,qe(we,!0))},Ht=function(we,Ae,Fe){if(!we.done){we.done=!0,Fe&&(we=Fe);try{if(we.facade===Ae)throw fe("Promise can't be resolved itself");var Ue=Xe(Ae);Ue?O(function(){var Ye={done:!1};try{Ue.call(Ae,vt(Ht,Ye,we),vt(Nt,Ye,we))}catch(Le){Nt(Ye,Le,we)}}):(we.value=Ae,we.state=ae,qe(we,!1))}catch(Ye){Nt({done:!1},Ye,we)}}};if(ye&&(q=function(Ae){h(this,q,Be),n(Ae),me.call(this);var Fe=Ie(this);try{Ae(vt(Ht,Fe),vt(Nt,Fe))}catch(Ue){Nt(Fe,Ue)}},Z=q.prototype,me=function(Ae){ze(this,{type:Be,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:De,value:void 0})},me.prototype=C(Z,{then:function(Ae,Fe){var Ue=te(this),Ye=J(E(this,q));return Ye.ok=l(Ae)?Ae:!0,Ye.fail=l(Fe)&&Fe,Ye.domain=K?X.domain:void 0,Ue.parent=!0,Ue.reactions.push(Ye),Ue.state!=De&&qe(Ue,!1),Ye.promise},catch:function(we){return this.then(void 0,we)}}),Ne=function(){var we=new me,Ae=Ie(we);this.promise=we,this.resolve=vt(Ht,Ae),this.reject=vt(Nt,Ae)},V.f=J=function(we){return we===q||we===Ve?new Ne(we):Q(we)},!w&&l(F)&&le!==Object.prototype)){He=le.then,de||(R(le,"then",function(Ae,Fe){var Ue=this;return new q(function(Ye,Le){He.call(Ue,Ye,Le)}).then(Ae,Fe)},{unsafe:!0}),R(le,"catch",Z.catch,{unsafe:!0}));try{delete le.constructor}catch{}s&&s(le,Z)}u({global:!0,wrap:!0,forced:ye},{Promise:q}),m(q,Be,!1,!0),v(Be),Ve=L(Be),u({target:Be,stat:!0,forced:ye},{reject:function(Ae){var Fe=J(this);return Fe.reject.call(void 0,Ae),Fe.promise}}),u({target:Be,stat:!0,forced:w||ye},{resolve:function(Ae){return j(w&&this===Ve?q:this,Ae)}}),u({target:Be,stat:!0,forced:We},{all:function(Ae){var Fe=this,Ue=J(Fe),Ye=Ue.resolve,Le=Ue.reject,kt=H(function(){var Pt=n(Fe.resolve),Ge=[],Ee=0,Dt=1;f(Ae,function(lt){var ft=Ee++,Jt=!1;Ge.push(void 0),Dt++,Pt.call(Fe,lt).then(function(Xt){Jt||(Jt=!0,Ge[ft]=Xt,--Dt||Ye(Ge))},Le)}),--Dt||Ye(Ge)});return kt.error&&Le(kt.value),Ue.promise},race:function(Ae){var Fe=this,Ue=J(Fe),Ye=Ue.reject,Le=H(function(){var kt=n(Fe.resolve);f(Ae,function(Pt){kt.call(Fe,Pt).then(Ue.resolve,Ye)})});return Le.error&&Ye(Le.value),Ue.promise}})},5397:function(y,x,c){var u=c(3085),w=c(150),N=c(1404),L=c(1138),F=c(5744),R=c(2853),C=c(6782),s=c(6192),m=w("Reflect","construct"),v=s(function(){function r(){}return!(m(function(){},[],r)instanceof r)}),n=!s(function(){m(function(){})}),l=v||n;u({target:"Reflect",stat:!0,forced:l,sham:l},{construct:function(h,b){N(h),L(b);var f=arguments.length<3?h:N(arguments[2]);if(n&&!v)return m(h,b,f);if(h==f){switch(b.length){case 0:return new h;case 1:return new h(b[0]);case 2:return new h(b[0],b[1]);case 3:return new h(b[0],b[1],b[2]);case 4:return new h(b[0],b[1],b[2],b[3])}var S=[null];return S.push.apply(S,b),new(C.apply(h,S))}var E=f.prototype,_=R(F(E)?E:Object.prototype),O=Function.apply.call(h,_,b);return F(O)?O:_}})},1367:function(){},5454:function(y,x,c){"use strict";var u=c(863).charAt,w=c(4845),N=c(3326),L=c(7218),F="String Iterator",R=N.set,C=N.getterFor(F);L(String,"String",function(s){R(this,{type:F,string:w(s),index:0})},function(){var m=C(this),v=m.string,n=m.index,l;return n>=v.length?{value:void 0,done:!0}:(l=u(v,n),m.index+=l.length,{value:l,done:!1})})},957:function(y,x,c){"use strict";var u=c(3085),w=c(4277).trim,N=c(6815);u({target:"String",proto:!0,forced:N("trim")},{trim:function(){return w(this)}})},9781:function(y,x,c){var u=c(1488);u("asyncIterator")},492:function(){},6681:function(y,x,c){var u=c(1488);u("hasInstance")},9594:function(y,x,c){var u=c(1488);u("isConcatSpreadable")},3665:function(y,x,c){var u=c(1488);u("iterator")},6187:function(y,x,c){"use strict";var u=c(3085),w=c(8576),N=c(150),L=c(5546),F=c(69),R=c(3045),C=c(6192),s=c(4500),m=c(4770),v=c(6447),n=c(5744),l=c(3236),r=c(1138),h=c(1795),b=c(101),f=c(77),S=c(4845),E=c(774),_=c(2853),O=c(7653),j=c(2092),B=c(4052),V=c(4750),H=c(5141),Y=c(2760),se=c(6007),ne=c(9482),be=c(8717),K=c(9766),Ce=c(4535),W=c(2759),Be=c(8182),Ie=c(9207),ze=c(1488),te=c(1284),le=c(3326),q=c(454).forEach,Z=K("hidden"),fe="Symbol",G="prototype",X=Be("toPrimitive"),J=le.set,Q=le.getterFor(fe),ve=Object[G],he=w.Symbol,Se=N("JSON","stringify"),xe=H.f,De=Y.f,ae=B.f,ee=se.f,ie=be("symbols"),ce=be("op-symbols"),de=be("string-to-symbol-registry"),me=be("symbol-to-string-registry"),Ne=be("wks"),Ve=w.QObject,He=!Ve||!Ve[G]||!Ve[G].findChild,ye=F&&C(function(){return _(De({},"a",{get:function(){return De(this,"a",{value:7}).a}})).a!=7})?function(we,Ae,Fe){var Ue=xe(ve,Ae);Ue&&delete ve[Ae],De(we,Ae,Fe),Ue&&we!==ve&&De(ve,Ae,Ue)}:De,We=function(we,Ae){var Fe=ie[we]=_(he[G]);return J(Fe,{type:fe,tag:we,description:Ae}),F||(Fe.description=Ae),Fe},Xe=function(Ae,Fe,Ue){Ae===ve&&Xe(ce,Fe,Ue),r(Ae);var Ye=f(Fe);return r(Ue),s(ie,Ye)?(Ue.enumerable?(s(Ae,Z)&&Ae[Z][Ye]&&(Ae[Z][Ye]=!1),Ue=_(Ue,{enumerable:E(0,!1)})):(s(Ae,Z)||De(Ae,Z,E(1,{})),Ae[Z][Ye]=!0),ye(Ae,Ye,Ue)):De(Ae,Ye,Ue)},qe=function(Ae,Fe){r(Ae);var Ue=b(Fe),Ye=O(Ue).concat(vt(Ue));return q(Ye,function(Le){(!F||ut.call(Ue,Le))&&Xe(Ae,Le,Ue[Le])}),Ae},Et=function(Ae,Fe){return Fe===void 0?_(Ae):qe(_(Ae),Fe)},ut=function(Ae){var Fe=f(Ae),Ue=ee.call(this,Fe);return this===ve&&s(ie,Fe)&&!s(ce,Fe)?!1:Ue||!s(this,Fe)||!s(ie,Fe)||s(this,Z)&&this[Z][Fe]?Ue:!0},pt=function(Ae,Fe){var Ue=b(Ae),Ye=f(Fe);if(!(Ue===ve&&s(ie,Ye)&&!s(ce,Ye))){var Le=xe(Ue,Ye);return Le&&s(ie,Ye)&&!(s(Ue,Z)&&Ue[Z][Ye])&&(Le.enumerable=!0),Le}},rt=function(Ae){var Fe=ae(b(Ae)),Ue=[];return q(Fe,function(Ye){!s(ie,Ye)&&!s(Ce,Ye)&&Ue.push(Ye)}),Ue},vt=function(Ae){var Fe=Ae===ve,Ue=ae(Fe?ce:b(Ae)),Ye=[];return q(Ue,function(Le){s(ie,Le)&&(!Fe||s(ve,Le))&&Ye.push(ie[Le])}),Ye};if(R||(he=function(){if(this instanceof he)throw TypeError("Symbol is not a constructor");var Ae=!arguments.length||arguments[0]===void 0?void 0:S(arguments[0]),Fe=W(Ae),Ue=function(Ye){this===ve&&Ue.call(ce,Ye),s(this,Z)&&s(this[Z],Fe)&&(this[Z][Fe]=!1),ye(this,Fe,E(1,Ye))};return F&&He&&ye(ve,Fe,{configurable:!0,set:Ue}),We(Fe,Ae)},ne(he[G],"toString",function(){return Q(this).tag}),ne(he,"withoutSetter",function(we){return We(W(we),we)}),se.f=ut,Y.f=Xe,H.f=pt,j.f=B.f=rt,V.f=vt,Ie.f=function(we){return We(Be(we),we)},F&&(De(he[G],"description",{configurable:!0,get:function(){return Q(this).description}}),L||ne(ve,"propertyIsEnumerable",ut,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!R,sham:!R},{Symbol:he}),q(O(Ne),function(we){ze(we)}),u({target:fe,stat:!0,forced:!R},{for:function(we){var Ae=S(we);if(s(de,Ae))return de[Ae];var Fe=he(Ae);return de[Ae]=Fe,me[Fe]=Ae,Fe},keyFor:function(Ae){if(!l(Ae))throw TypeError(Ae+" is not a symbol");if(s(me,Ae))return me[Ae]},useSetter:function(){He=!0},useSimple:function(){He=!1}}),u({target:"Object",stat:!0,forced:!R,sham:!F},{create:Et,defineProperty:Xe,defineProperties:qe,getOwnPropertyDescriptor:pt}),u({target:"Object",stat:!0,forced:!R},{getOwnPropertyNames:rt,getOwnPropertySymbols:vt}),u({target:"Object",stat:!0,forced:C(function(){V.f(1)})},{getOwnPropertySymbols:function(Ae){return V.f(h(Ae))}}),Se){var Nt=!R||C(function(){var we=he();return Se([we])!="[null]"||Se({a:we})!="{}"||Se(Object(we))!="{}"});u({target:"JSON",stat:!0,forced:Nt},{stringify:function(Ae,Fe,Ue){for(var Ye=[Ae],Le=1,kt;arguments.length>Le;)Ye.push(arguments[Le++]);if(kt=Fe,!(!n(Fe)&&Ae===void 0||l(Ae)))return m(Fe)||(Fe=function(Pt,Ge){if(v(kt)&&(Ge=kt.call(this,Pt,Ge)),!l(Ge))return Ge}),Ye[1]=Fe,Se.apply(null,Ye)}})}if(!he[G][X]){var Ht=he[G].valueOf;ne(he[G],X,function(){return Ht.apply(this,arguments)})}te(he,fe),Ce[Z]=!0},1250:function(y,x,c){var u=c(1488);u("matchAll")},9017:function(y,x,c){var u=c(1488);u("match")},9786:function(y,x,c){var u=c(1488);u("replace")},503:function(y,x,c){var u=c(1488);u("search")},6565:function(y,x,c){var u=c(1488);u("species")},9322:function(y,x,c){var u=c(1488);u("split")},3610:function(y,x,c){var u=c(1488);u("toPrimitive")},6886:function(y,x,c){var u=c(1488);u("toStringTag")},3514:function(y,x,c){var u=c(1488);u("unscopables")},177:function(y,x,c){var u=c(1488);u("asyncDispose")},9031:function(y,x,c){var u=c(1488);u("dispose")},6658:function(y,x,c){var u=c(1488);u("matcher")},1875:function(y,x,c){var u=c(1488);u("metadata")},8658:function(y,x,c){var u=c(1488);u("observable")},4592:function(y,x,c){var u=c(1488);u("patternMatch")},6680:function(y,x,c){var u=c(1488);u("replaceAll")},162:function(y,x,c){c(8939);var u=c(7365),w=c(8576),N=c(4696),L=c(8711),F=c(7771),R=c(8182),C=R("toStringTag");for(var s in u){var m=w[s],v=m&&m.prototype;v&&N(v)!==C&&L(v,C,s),F[s]=F.Array}},2906:function(y,x,c){var u=c(3085),w=c(8576),N=c(6447),L=c(8989),F=[].slice,R=/MSIE .\./.test(L),C=function(s){return function(m,v){var n=arguments.length>2,l=n?F.call(arguments,2):void 0;return s(n?function(){(N(m)?m:Function(m)).apply(this,l)}:m,v)}};u({global:!0,bind:!0,forced:R},{setTimeout:C(w.setTimeout),setInterval:C(w.setInterval)})},9336:function(y,x,c){"use strict";c(8939);var u=c(3085),w=c(150),N=c(4551),L=c(9482),F=c(533),R=c(1284),C=c(5148),s=c(3326),m=c(6961),v=c(6447),n=c(4500),l=c(8043),r=c(4696),h=c(1138),b=c(5744),f=c(4845),S=c(2853),E=c(774),_=c(1669),O=c(8703),j=c(8182),B=w("fetch"),V=w("Request"),H=V&&V.prototype,Y=w("Headers"),se=j("iterator"),ne="URLSearchParams",be=ne+"Iterator",K=s.set,Ce=s.getterFor(ne),W=s.getterFor(be),Be=/\+/g,Ie=Array(4),ze=function(ae){return Ie[ae-1]||(Ie[ae-1]=RegExp("((?:%[\\da-f]{2}){"+ae+"})","gi"))},te=function(ae){try{return decodeURIComponent(ae)}catch{return ae}},le=function(ae){var ee=ae.replace(Be," "),ie=4;try{return decodeURIComponent(ee)}catch{for(;ie;)ee=ee.replace(ze(ie--),te);return ee}},q=/[!'()~]|%20/g,Z={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},fe=function(ae){return Z[ae]},G=function(ae){return encodeURIComponent(ae).replace(q,fe)},X=function(ae,ee){if(ee)for(var ie=ee.split("&"),ce=0,de,me;ce<ie.length;)de=ie[ce++],de.length&&(me=de.split("="),ae.push({key:le(me.shift()),value:le(me.join("="))}))},J=function(ae){this.entries.length=0,X(this.entries,ae)},Q=function(ae,ee){if(ae<ee)throw TypeError("Not enough arguments")},ve=C(function(ee,ie){K(this,{type:be,iterator:_(Ce(ee).entries),kind:ie})},"Iterator",function(){var ee=W(this),ie=ee.kind,ce=ee.iterator.next(),de=ce.value;return ce.done||(ce.value=ie==="keys"?de.key:ie==="values"?de.value:[de.key,de.value]),ce}),he=function(){m(this,he,ne);var ee=arguments.length>0?arguments[0]:void 0,ie=this,ce=[],de,me,Ne,Ve,He,ye,We,Xe,qe;if(K(ie,{type:ne,entries:ce,updateURL:function(){},updateSearchParams:J}),ee!==void 0)if(b(ee))if(de=O(ee),de)for(me=_(ee,de),Ne=me.next;!(Ve=Ne.call(me)).done;){if(He=_(h(Ve.value)),ye=He.next,(We=ye.call(He)).done||(Xe=ye.call(He)).done||!ye.call(He).done)throw TypeError("Expected sequence with length 2");ce.push({key:f(We.value),value:f(Xe.value)})}else for(qe in ee)n(ee,qe)&&ce.push({key:qe,value:f(ee[qe])});else X(ce,typeof ee=="string"?ee.charAt(0)==="?"?ee.slice(1):ee:f(ee))},Se=he.prototype;if(F(Se,{append:function(ee,ie){Q(arguments.length,2);var ce=Ce(this);ce.entries.push({key:f(ee),value:f(ie)}),ce.updateURL()},delete:function(ae){Q(arguments.length,1);for(var ee=Ce(this),ie=ee.entries,ce=f(ae),de=0;de<ie.length;)ie[de].key===ce?ie.splice(de,1):de++;ee.updateURL()},get:function(ee){Q(arguments.length,1);for(var ie=Ce(this).entries,ce=f(ee),de=0;de<ie.length;de++)if(ie[de].key===ce)return ie[de].value;return null},getAll:function(ee){Q(arguments.length,1);for(var ie=Ce(this).entries,ce=f(ee),de=[],me=0;me<ie.length;me++)ie[me].key===ce&&de.push(ie[me].value);return de},has:function(ee){Q(arguments.length,1);for(var ie=Ce(this).entries,ce=f(ee),de=0;de<ie.length;)if(ie[de++].key===ce)return!0;return!1},set:function(ee,ie){Q(arguments.length,1);for(var ce=Ce(this),de=ce.entries,me=!1,Ne=f(ee),Ve=f(ie),He=0,ye;He<de.length;He++)ye=de[He],ye.key===Ne&&(me?de.splice(He--,1):(me=!0,ye.value=Ve));me||de.push({key:Ne,value:Ve}),ce.updateURL()},sort:function(){var ee=Ce(this),ie=ee.entries,ce=ie.slice(),de,me,Ne;for(ie.length=0,Ne=0;Ne<ce.length;Ne++){for(de=ce[Ne],me=0;me<Ne;me++)if(ie[me].key>de.key){ie.splice(me,0,de);break}me===Ne&&ie.push(de)}ee.updateURL()},forEach:function(ee){for(var ie=Ce(this).entries,ce=l(ee,arguments.length>1?arguments[1]:void 0,3),de=0,me;de<ie.length;)me=ie[de++],ce(me.value,me.key,this)},keys:function(){return new ve(this,"keys")},values:function(){return new ve(this,"values")},entries:function(){return new ve(this,"entries")}},{enumerable:!0}),L(Se,se,Se.entries,{name:"entries"}),L(Se,"toString",function(){for(var ee=Ce(this).entries,ie=[],ce=0,de;ce<ee.length;)de=ee[ce++],ie.push(G(de.key)+"="+G(de.value));return ie.join("&")},{enumerable:!0}),R(he,ne),u({global:!0,forced:!N},{URLSearchParams:he}),!N&&v(Y)){var xe=function(ae){if(b(ae)){var ee=ae.body,ie;if(r(ee)===ne)return ie=ae.headers?new Y(ae.headers):new Y,ie.has("content-type")||ie.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(ae,{body:E(0,String(ee)),headers:E(0,ie)})}return ae};if(v(B)&&u({global:!0,enumerable:!0,forced:!0},{fetch:function(ee){return B(ee,arguments.length>1?xe(arguments[1]):{})}}),v(V)){var De=function(ee){return m(this,De,"Request"),new V(ee,arguments.length>1?xe(arguments[1]):{})};H.constructor=De,De.prototype=H,u({global:!0,forced:!0},{Request:De})}}y.exports={URLSearchParams:he,getState:Ce}},4948:function(y,x,c){"use strict";c(5454);var u=c(3085),w=c(69),N=c(4551),L=c(8576),F=c(1187),R=c(9482),C=c(6961),s=c(4500),m=c(2503),v=c(841),n=c(863).codeAt,l=c(7977),r=c(4845),h=c(1284),b=c(9336),f=c(3326),S=L.URL,E=b.URLSearchParams,_=b.getState,O=f.set,j=f.getterFor("URL"),B=Math.floor,V=Math.pow,H="Invalid authority",Y="Invalid scheme",se="Invalid host",ne="Invalid port",be=/[A-Za-z]/,K=/[\d+-.A-Za-z]/,Ce=/\d/,W=/^0x/i,Be=/^[0-7]+$/,Ie=/^\d+$/,ze=/^[\dA-Fa-f]+$/,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,le=/[\0\t\n\r #/:<>?@[\\\]^|]/,q=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Z=/[\t\n\r]/g,fe,G=function($,Te){var Me,Pe,je;if(Te.charAt(0)=="["){if(Te.charAt(Te.length-1)!="]"||(Me=J(Te.slice(1,-1)),!Me))return se;$.host=Me}else if(ie($)){if(Te=l(Te),te.test(Te)||(Me=X(Te),Me===null))return se;$.host=Me}else{if(le.test(Te))return se;for(Me="",Pe=v(Te),je=0;je<Pe.length;je++)Me+=ae(Pe[je],he);$.host=Me}},X=function($){var Te=$.split("."),Me,Pe,je,it,Ze,et,_t;if(Te.length&&Te[Te.length-1]==""&&Te.pop(),Me=Te.length,Me>4)return $;for(Pe=[],je=0;je<Me;je++){if(it=Te[je],it=="")return $;if(Ze=10,it.length>1&&it.charAt(0)=="0"&&(Ze=W.test(it)?16:8,it=it.slice(Ze==8?1:2)),it==="")et=0;else{if(!(Ze==10?Ie:Ze==8?Be:ze).test(it))return $;et=parseInt(it,Ze)}Pe.push(et)}for(je=0;je<Me;je++)if(et=Pe[je],je==Me-1){if(et>=V(256,5-Me))return null}else if(et>255)return null;for(_t=Pe.pop(),je=0;je<Pe.length;je++)_t+=Pe[je]*V(256,3-je);return _t},J=function($){var Te=[0,0,0,0,0,0,0,0],Me=0,Pe=null,je=0,it,Ze,et,_t,Bt,Qt,ke,zt=function(){return $.charAt(je)};if(zt()==":"){if($.charAt(1)!=":")return;je+=2,Me++,Pe=Me}for(;zt();){if(Me==8)return;if(zt()==":"){if(Pe!==null)return;je++,Me++,Pe=Me;continue}for(it=Ze=0;Ze<4&&ze.test(zt());)it=it*16+parseInt(zt(),16),je++,Ze++;if(zt()=="."){if(Ze==0||(je-=Ze,Me>6))return;for(et=0;zt();){if(_t=null,et>0)if(zt()=="."&&et<4)je++;else return;if(!Ce.test(zt()))return;for(;Ce.test(zt());){if(Bt=parseInt(zt(),10),_t===null)_t=Bt;else{if(_t==0)return;_t=_t*10+Bt}if(_t>255)return;je++}Te[Me]=Te[Me]*256+_t,et++,(et==2||et==4)&&Me++}if(et!=4)return;break}else if(zt()==":"){if(je++,!zt())return}else if(zt())return;Te[Me++]=it}if(Pe!==null)for(Qt=Me-Pe,Me=7;Me!=0&&Qt>0;)ke=Te[Me],Te[Me--]=Te[Pe+Qt-1],Te[Pe+--Qt]=ke;else if(Me!=8)return;return Te},Q=function($){for(var Te=null,Me=1,Pe=null,je=0,it=0;it<8;it++)$[it]!==0?(je>Me&&(Te=Pe,Me=je),Pe=null,je=0):(Pe===null&&(Pe=it),++je);return je>Me&&(Te=Pe,Me=je),Te},ve=function($){var Te,Me,Pe,je;if(typeof $=="number"){for(Te=[],Me=0;Me<4;Me++)Te.unshift($%256),$=B($/256);return Te.join(".")}else if(typeof $=="object"){for(Te="",Pe=Q($),Me=0;Me<8;Me++)je&&$[Me]===0||(je&&(je=!1),Pe===Me?(Te+=Me?":":"::",je=!0):(Te+=$[Me].toString(16),Me<7&&(Te+=":")));return"["+Te+"]"}return $},he={},Se=m({},he,{" ":1,'"':1,"<":1,">":1,"`":1}),xe=m({},Se,{"#":1,"?":1,"{":1,"}":1}),De=m({},xe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ae=function($,Te){var Me=n($,0);return Me>32&&Me<127&&!s(Te,$)?$:encodeURIComponent($)},ee={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ie=function($){return s(ee,$.scheme)},ce=function($){return $.username!=""||$.password!=""},de=function($){return!$.host||$.cannotBeABaseURL||$.scheme=="file"},me=function($,Te){var Me;return $.length==2&&be.test($.charAt(0))&&((Me=$.charAt(1))==":"||!Te&&Me=="|")},Ne=function($){var Te;return $.length>1&&me($.slice(0,2))&&($.length==2||(Te=$.charAt(2))==="/"||Te==="\\"||Te==="?"||Te==="#")},Ve=function($){var Te=$.path,Me=Te.length;Me&&($.scheme!="file"||Me!=1||!me(Te[0],!0))&&Te.pop()},He=function($){return $==="."||$.toLowerCase()==="%2e"},ye=function($){return $=$.toLowerCase(),$===".."||$==="%2e."||$===".%2e"||$==="%2e%2e"},We={},Xe={},qe={},Et={},ut={},pt={},rt={},vt={},Nt={},Ht={},we={},Ae={},Fe={},Ue={},Ye={},Le={},kt={},Pt={},Ge={},Ee={},Dt={},lt=function($,Te,Me,Pe){var je=Me||We,it=0,Ze="",et=!1,_t=!1,Bt=!1,Qt,ke,zt,qt;for(Me||($.scheme="",$.username="",$.password="",$.host=null,$.port=null,$.path=[],$.query=null,$.fragment=null,$.cannotBeABaseURL=!1,Te=Te.replace(q,"")),Te=Te.replace(Z,""),Qt=v(Te);it<=Qt.length;){switch(ke=Qt[it],je){case We:if(ke&&be.test(ke))Ze+=ke.toLowerCase(),je=Xe;else{if(Me)return Y;je=qe;continue}break;case Xe:if(ke&&(K.test(ke)||ke=="+"||ke=="-"||ke=="."))Ze+=ke.toLowerCase();else if(ke==":"){if(Me&&(ie($)!=s(ee,Ze)||Ze=="file"&&(ce($)||$.port!==null)||$.scheme=="file"&&!$.host))return;if($.scheme=Ze,Me){ie($)&&ee[$.scheme]==$.port&&($.port=null);return}Ze="",$.scheme=="file"?je=Ue:ie($)&&Pe&&Pe.scheme==$.scheme?je=Et:ie($)?je=vt:Qt[it+1]=="/"?(je=ut,it++):($.cannotBeABaseURL=!0,$.path.push(""),je=Ge)}else{if(Me)return Y;Ze="",je=qe,it=0;continue}break;case qe:if(!Pe||Pe.cannotBeABaseURL&&ke!="#")return Y;if(Pe.cannotBeABaseURL&&ke=="#"){$.scheme=Pe.scheme,$.path=Pe.path.slice(),$.query=Pe.query,$.fragment="",$.cannotBeABaseURL=!0,je=Dt;break}je=Pe.scheme=="file"?Ue:pt;continue;case Et:if(ke=="/"&&Qt[it+1]=="/")je=Nt,it++;else{je=pt;continue}break;case ut:if(ke=="/"){je=Ht;break}else{je=Pt;continue}case pt:if($.scheme=Pe.scheme,ke==fe)$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,$.path=Pe.path.slice(),$.query=Pe.query;else if(ke=="/"||ke=="\\"&&ie($))je=rt;else if(ke=="?")$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,$.path=Pe.path.slice(),$.query="",je=Ee;else if(ke=="#")$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,$.path=Pe.path.slice(),$.query=Pe.query,$.fragment="",je=Dt;else{$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,$.path=Pe.path.slice(),$.path.pop(),je=Pt;continue}break;case rt:if(ie($)&&(ke=="/"||ke=="\\"))je=Nt;else if(ke=="/")je=Ht;else{$.username=Pe.username,$.password=Pe.password,$.host=Pe.host,$.port=Pe.port,je=Pt;continue}break;case vt:if(je=Nt,ke!="/"||Ze.charAt(it+1)!="/")continue;it++;break;case Nt:if(ke!="/"&&ke!="\\"){je=Ht;continue}break;case Ht:if(ke=="@"){et&&(Ze="%40"+Ze),et=!0,zt=v(Ze);for(var hr=0;hr<zt.length;hr++){var $r=zt[hr];if($r==":"&&!Bt){Bt=!0;continue}var Jr=ae($r,De);Bt?$.password+=Jr:$.username+=Jr}Ze=""}else if(ke==fe||ke=="/"||ke=="?"||ke=="#"||ke=="\\"&&ie($)){if(et&&Ze=="")return H;it-=v(Ze).length+1,Ze="",je=we}else Ze+=ke;break;case we:case Ae:if(Me&&$.scheme=="file"){je=Le;continue}else if(ke==":"&&!_t){if(Ze=="")return se;if(qt=G($,Ze),qt)return qt;if(Ze="",je=Fe,Me==Ae)return}else if(ke==fe||ke=="/"||ke=="?"||ke=="#"||ke=="\\"&&ie($)){if(ie($)&&Ze=="")return se;if(Me&&Ze==""&&(ce($)||$.port!==null))return;if(qt=G($,Ze),qt)return qt;if(Ze="",je=kt,Me)return;continue}else ke=="["?_t=!0:ke=="]"&&(_t=!1),Ze+=ke;break;case Fe:if(Ce.test(ke))Ze+=ke;else if(ke==fe||ke=="/"||ke=="?"||ke=="#"||ke=="\\"&&ie($)||Me){if(Ze!=""){var gr=parseInt(Ze,10);if(gr>65535)return ne;$.port=ie($)&&gr===ee[$.scheme]?null:gr,Ze=""}if(Me)return;je=kt;continue}else return ne;break;case Ue:if($.scheme="file",ke=="/"||ke=="\\")je=Ye;else if(Pe&&Pe.scheme=="file")if(ke==fe)$.host=Pe.host,$.path=Pe.path.slice(),$.query=Pe.query;else if(ke=="?")$.host=Pe.host,$.path=Pe.path.slice(),$.query="",je=Ee;else if(ke=="#")$.host=Pe.host,$.path=Pe.path.slice(),$.query=Pe.query,$.fragment="",je=Dt;else{Ne(Qt.slice(it).join(""))||($.host=Pe.host,$.path=Pe.path.slice(),Ve($)),je=Pt;continue}else{je=Pt;continue}break;case Ye:if(ke=="/"||ke=="\\"){je=Le;break}Pe&&Pe.scheme=="file"&&!Ne(Qt.slice(it).join(""))&&(me(Pe.path[0],!0)?$.path.push(Pe.path[0]):$.host=Pe.host),je=Pt;continue;case Le:if(ke==fe||ke=="/"||ke=="\\"||ke=="?"||ke=="#"){if(!Me&&me(Ze))je=Pt;else if(Ze==""){if($.host="",Me)return;je=kt}else{if(qt=G($,Ze),qt)return qt;if($.host=="localhost"&&($.host=""),Me)return;Ze="",je=kt}continue}else Ze+=ke;break;case kt:if(ie($)){if(je=Pt,ke!="/"&&ke!="\\")continue}else if(!Me&&ke=="?")$.query="",je=Ee;else if(!Me&&ke=="#")$.fragment="",je=Dt;else if(ke!=fe&&(je=Pt,ke!="/"))continue;break;case Pt:if(ke==fe||ke=="/"||ke=="\\"&&ie($)||!Me&&(ke=="?"||ke=="#")){if(ye(Ze)?(Ve($),ke!="/"&&!(ke=="\\"&&ie($))&&$.path.push("")):He(Ze)?ke!="/"&&!(ke=="\\"&&ie($))&&$.path.push(""):($.scheme=="file"&&!$.path.length&&me(Ze)&&($.host&&($.host=""),Ze=Ze.charAt(0)+":"),$.path.push(Ze)),Ze="",$.scheme=="file"&&(ke==fe||ke=="?"||ke=="#"))for(;$.path.length>1&&$.path[0]==="";)$.path.shift();ke=="?"?($.query="",je=Ee):ke=="#"&&($.fragment="",je=Dt)}else Ze+=ae(ke,xe);break;case Ge:ke=="?"?($.query="",je=Ee):ke=="#"?($.fragment="",je=Dt):ke!=fe&&($.path[0]+=ae(ke,he));break;case Ee:!Me&&ke=="#"?($.fragment="",je=Dt):ke!=fe&&(ke=="'"&&ie($)?$.query+="%27":ke=="#"?$.query+="%23":$.query+=ae(ke,he));break;case Dt:ke!=fe&&($.fragment+=ae(ke,Se));break}it++}},ft=function(Te){var Me=C(this,ft,"URL"),Pe=arguments.length>1?arguments[1]:void 0,je=r(Te),it=O(Me,{type:"URL"}),Ze,et;if(Pe!==void 0){if(Pe instanceof ft)Ze=j(Pe);else if(et=lt(Ze={},r(Pe)),et)throw TypeError(et)}if(et=lt(it,je,null,Ze),et)throw TypeError(et);var _t=it.searchParams=new E,Bt=_(_t);Bt.updateSearchParams(it.query),Bt.updateURL=function(){it.query=String(_t)||null},w||(Me.href=Xt.call(Me),Me.origin=Tt.call(Me),Me.protocol=gn.call(Me),Me.username=mt.call(Me),Me.password=Wr.call(Me),Me.host=Gr.call(Me),Me.hostname=Yr.call(Me),Me.port=fr.call(Me),Me.pathname=Xr.call(Me),Me.search=_n.call(Me),Me.searchParams=ui.call(Me),Me.hash=Fn.call(Me))},Jt=ft.prototype,Xt=function(){var $=j(this),Te=$.scheme,Me=$.username,Pe=$.password,je=$.host,it=$.port,Ze=$.path,et=$.query,_t=$.fragment,Bt=Te+":";return je!==null?(Bt+="//",ce($)&&(Bt+=Me+(Pe?":"+Pe:"")+"@"),Bt+=ve(je),it!==null&&(Bt+=":"+it)):Te=="file"&&(Bt+="//"),Bt+=$.cannotBeABaseURL?Ze[0]:Ze.length?"/"+Ze.join("/"):"",et!==null&&(Bt+="?"+et),_t!==null&&(Bt+="#"+_t),Bt},Tt=function(){var $=j(this),Te=$.scheme,Me=$.port;if(Te=="blob")try{return new ft(Te.path[0]).origin}catch{return"null"}return Te=="file"||!ie($)?"null":Te+"://"+ve($.host)+(Me!==null?":"+Me:"")},gn=function(){return j(this).scheme+":"},mt=function(){return j(this).username},Wr=function(){return j(this).password},Gr=function(){var $=j(this),Te=$.host,Me=$.port;return Te===null?"":Me===null?ve(Te):ve(Te)+":"+Me},Yr=function(){var $=j(this).host;return $===null?"":ve($)},fr=function(){var $=j(this).port;return $===null?"":String($)},Xr=function(){var $=j(this),Te=$.path;return $.cannotBeABaseURL?Te[0]:Te.length?"/"+Te.join("/"):""},_n=function(){var $=j(this).query;return $?"?"+$:""},ui=function(){return j(this).searchParams},Fn=function(){var $=j(this).fragment;return $?"#"+$:""},Kt=function($,Te){return{get:$,set:Te,configurable:!0,enumerable:!0}};if(w&&F(Jt,{href:Kt(Xt,function($){var Te=j(this),Me=r($),Pe=lt(Te,Me);if(Pe)throw TypeError(Pe);_(Te.searchParams).updateSearchParams(Te.query)}),origin:Kt(Tt),protocol:Kt(gn,function($){var Te=j(this);lt(Te,r($)+":",We)}),username:Kt(mt,function($){var Te=j(this),Me=v(r($));if(!de(Te)){Te.username="";for(var Pe=0;Pe<Me.length;Pe++)Te.username+=ae(Me[Pe],De)}}),password:Kt(Wr,function($){var Te=j(this),Me=v(r($));if(!de(Te)){Te.password="";for(var Pe=0;Pe<Me.length;Pe++)Te.password+=ae(Me[Pe],De)}}),host:Kt(Gr,function($){var Te=j(this);Te.cannotBeABaseURL||lt(Te,r($),we)}),hostname:Kt(Yr,function($){var Te=j(this);Te.cannotBeABaseURL||lt(Te,r($),Ae)}),port:Kt(fr,function($){var Te=j(this);de(Te)||($=r($),$==""?Te.port=null:lt(Te,$,Fe))}),pathname:Kt(Xr,function($){var Te=j(this);Te.cannotBeABaseURL||(Te.path=[],lt(Te,r($),kt))}),search:Kt(_n,function($){var Te=j(this);$=r($),$==""?Te.query=null:($.charAt(0)=="?"&&($=$.slice(1)),Te.query="",lt(Te,$,Ee)),_(Te.searchParams).updateSearchParams(Te.query)}),searchParams:Kt(ui),hash:Kt(Fn,function($){var Te=j(this);if($=r($),$==""){Te.fragment=null;return}$.charAt(0)=="#"&&($=$.slice(1)),Te.fragment="",lt(Te,$,Dt)})}),R(Jt,"toJSON",function(){return Xt.call(this)},{enumerable:!0}),R(Jt,"toString",function(){return Xt.call(this)},{enumerable:!0}),S){var dr=S.createObjectURL,Zr=S.revokeObjectURL;dr&&R(ft,"createObjectURL",function(Te){return dr.apply(S,arguments)}),Zr&&R(ft,"revokeObjectURL",function(Te){return Zr.apply(S,arguments)})}h(ft,"URL"),u({global:!0,forced:!N,sham:!w},{URL:ft})},9801:function(){},3822:function(y,x,c){var u=c(2221);y.exports=u},1434:function(y,x,c){var u=c(5078);y.exports=u},6899:function(y,x,c){var u=c(98);y.exports=u},7710:function(y,x,c){var u=c(5739);c(162),y.exports=u},4486:function(y,x,c){var u=c(278);y.exports=u},4877:function(y,x,c){var u=c(1484);y.exports=u},7178:function(y,x,c){var u=c(7731);y.exports=u},5603:function(y,x,c){var u=c(3669);y.exports=u},1206:function(y,x,c){c(162);var u=c(6899),w=c(4696),N=Array.prototype,L={DOMTokenList:!0,NodeList:!0};y.exports=function(F){var R=F.forEach;return F===N||F instanceof Array&&R===N.forEach||L.hasOwnProperty(w(F))?u:R}},6174:function(y,x,c){var u=c(2604);y.exports=u},57:function(y,x,c){var u=c(263);y.exports=u},4741:function(y,x,c){var u=c(7663);y.exports=u},8368:function(y,x,c){var u=c(5063);y.exports=u},3739:function(y,x,c){var u=c(6813);y.exports=u},172:function(y,x,c){var u=c(6285);y.exports=u},4963:function(y,x,c){var u=c(3213);y.exports=u},7820:function(y,x,c){var u=c(3512);y.exports=u},8980:function(y,x,c){var u=c(8168);y.exports=u},5636:function(y,x,c){var u=c(8651);y.exports=u},6672:function(y,x,c){var u=c(3083);y.exports=u},5059:function(y,x,c){var u=c(2987);y.exports=u},3969:function(y,x,c){var u=c(2239);y.exports=u},6618:function(y,x,c){var u=c(3154);c(162),y.exports=u},5279:function(y,x,c){var u=c(6577);y.exports=u},9562:function(y,x,c){c(2906);var u=c(7545);y.exports=u.setTimeout},2285:function(y,x,c){var u=c(5008);c(162),y.exports=u},8535:function(y,x,c){var u=c(994);c(162),y.exports=u},652:function(y,x,c){var u=c(5668);y.exports=u},5668:function(y,x,c){c(4948),c(9801),c(9336);var u=c(7545);y.exports=u.URL},2534:function(y){"use strict";y.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(y){"use strict";y.exports=e},4960:function(){},6759:function(){},6272:function(){}},a={};function d(y){var x=a[y];if(x!==void 0)return x.exports;var c=a[y]={exports:{}};return t[y](c,c.exports,d),c.exports}(function(){d.n=function(y){var x=y&&y.__esModule?function(){return y.default}:function(){return y};return d.d(x,{a:x}),x}})(),function(){d.d=function(y,x){for(var c in x)d.o(x,c)&&!d.o(y,c)&&Object.defineProperty(y,c,{enumerable:!0,get:x[c]})}}(),function(){d.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){d.o=function(y,x){return Object.prototype.hasOwnProperty.call(y,x)}}();var D={};return function(){"use strict";d.d(D,{default:function(){return gI}});var y=d(9131),x=d.n(y),c=d(1899),u=d.n(c),w=d(6562),N=d.n(w),L=d(1734),F=d.n(L),R=d(8005),C=d.n(R),s=d(6065),m=d.n(s),v=d(4496),n=d.n(v);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(A){var I=this;do{if(Element.prototype.matches.call(I,A))return I;I=I.parentElement||I.parentNode}while(I!==null&&I.nodeType===1);return null});"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(A){"use strict";if("Element"in A){var I="classList",o="prototype",g=A.Element[o],i=Object,p=x()(String[o])||function(){return this.replace(/^\s+|\s+$/g,"")},M=u()(Array[o])||function(oe){for(var pe=0,ue=this.length;pe<ue;pe++)if(pe in this&&this[pe]===oe)return pe;return-1},T=function(pe,ue){this.name=pe,this.code=DOMException[pe],this.message=ue},P=function(pe,ue){if(ue==="")throw new T("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(ue))throw new T("INVALID_CHARACTER_ERR","The token must not contain space characters.");return M.call(pe,ue)},k=function(pe){for(var ue=p.call(pe.getAttribute("class")||""),ge=ue?ue.split(/\s+/):[],Oe=0,Je=ge.length;Oe<Je;Oe++)this.push(ge[Oe]);this._updateClassName=function(){pe.setAttribute("class",this.toString())}},z=k[o]=[],U=function(){return new k(this)};if(T[o]=Error[o],z.item=function(oe){return this[oe]||null},z.contains=function(oe){return~P(this,oe+"")},z.add=function(){var oe=arguments,pe=0,ue=oe.length,ge,Oe=!1;do ge=oe[pe]+"",~P(this,ge)||(this.push(ge),Oe=!0);while(++pe<ue);Oe&&this._updateClassName()},z.remove=function(){var oe=arguments,pe=0,ue=oe.length,ge,Oe=!1,Je;do for(ge=oe[pe]+"",Je=P(this,ge);~Je;){var Qe;N()(Qe=this).call(Qe,Je,1),Oe=!0,Je=P(this,ge)}while(++pe<ue);Oe&&this._updateClassName()},z.toggle=function(oe,pe){var ue=this.contains(oe),ge=ue?pe!==!0&&"remove":pe!==!1&&"add";return ge&&this[ge](oe),pe===!0||pe===!1?pe:!ue},z.replace=function(oe,pe){var ue=P(oe+"");if(~ue){var ge;N()(ge=this).call(ge,ue,1,pe),this._updateClassName()}},z.toString=function(){return this.join(" ")},F()){var re={get:U,enumerable:!0,configurable:!0};try{F()(g,I,re)}catch(oe){(oe.number===void 0||oe.number===-2146823252)&&(re.enumerable=!1,F()(g,I,re))}}else i[o].__defineGetter__&&g.__defineGetter__(I,U)}}(self),function(){"use strict";var A=document.createElement("_");if(A.classList.add("c1","c2"),!A.classList.contains("c2")){var I=function(i){var p=DOMTokenList.prototype[i];DOMTokenList.prototype[i]=function(M){var T,P=arguments.length;for(T=0;T<P;T++)M=arguments[T],p.call(this,M)}};I("add"),I("remove")}if(A.classList.toggle("c3",!1),A.classList.contains("c3")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(g,i){return 1 in arguments&&!this.contains(g)==!i?i:o.call(this,g)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(g,i){var p=this.toString().split(" "),M=u()(p).call(p,g+"");~M&&(p=C()(p).call(p,M),this.remove.apply(this,p),this.add(i),this.add.apply(this,C()(p).call(p,1)))}),A=null}());(function(){"use strict";if(typeof window<"u"&&window.addEventListener){var A=m()(null),I,o,g=function(){clearTimeout(o),o=n()(I,100)},i=function(){},p=function(){var z;window.addEventListener("resize",g,!1),window.addEventListener("orientationchange",g,!1),window.MutationObserver?(z=new MutationObserver(g),z.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),i=function(){try{z.disconnect(),window.removeEventListener("resize",g,!1),window.removeEventListener("orientationchange",g,!1)}catch{}}):(document.documentElement.addEventListener("DOMSubtreeModified",g,!1),i=function(){document.documentElement.removeEventListener("DOMSubtreeModified",g,!1),window.removeEventListener("resize",g,!1),window.removeEventListener("orientationchange",g,!1)})},M=function(z){function U(ue){var ge;return ue.protocol!==void 0?ge=ue:(ge=document.createElement("a"),ge.href=ue),ge.protocol.replace(/:/g,"")+ge.host}var re,oe,pe;return window.XMLHttpRequest&&(re=new XMLHttpRequest,oe=U(location),pe=U(z),re.withCredentials===void 0&&pe!==""&&pe!==oe?re=XDomainRequest||void 0:re=XMLHttpRequest),re},T="http://www.w3.org/1999/xlink";I=function(){var z,U,re="",oe,pe,ue,ge=0,Oe,Je,Qe,Ke,Re;function dt(){ge-=1,ge===0&&(i(),p())}function Gt(Lt){return function(){A[Lt.base]!==!0&&(Lt.useEl.setAttributeNS(T,"xlink:href","#"+Lt.hash),Lt.useEl.hasAttribute("href")&&Lt.useEl.setAttribute("href","#"+Lt.hash))}}function nn(Lt){return function(){var ti=document.body,ni=document.createElement("x"),en;Lt.onload=null,ni.innerHTML=Lt.responseText,en=ni.getElementsByTagName("svg")[0],en&&(en.setAttribute("aria-hidden","true"),en.style.position="absolute",en.style.width=0,en.style.height=0,en.style.overflow="hidden",ti.insertBefore(en,ti.firstChild)),dt()}}function pn(Lt){return function(){Lt.onerror=null,Lt.ontimeout=null,dt()}}for(i(),Ke=document.getElementsByTagName("use"),ue=0;ue<Ke.length;ue+=1){try{U=Ke[ue].getBoundingClientRect()}catch{U=!1}pe=Ke[ue].getAttribute("href")||Ke[ue].getAttributeNS(T,"href")||Ke[ue].getAttribute("xlink:href"),pe&&pe.split?Qe=pe.split("#"):Qe=["",""],z=Qe[0],oe=Qe[1],Oe=U&&U.left===0&&U.right===0&&U.top===0&&U.bottom===0,U&&U.width===0&&U.height===0&&!Oe?(re&&!z.length&&oe&&!document.getElementById(oe)&&(z=re),Ke[ue].hasAttribute("href")&&Ke[ue].setAttributeNS(T,"xlink:href",pe),z.length&&(Re=A[z],Re!==!0&&n()(Gt({useEl:Ke[ue],base:z,hash:oe}),0),Re===void 0&&(Je=M(z),Je!==void 0&&(Re=new Je,A[z]=Re,Re.onload=nn(Re),Re.onerror=pn(Re),Re.ontimeout=pn(Re),Re.open("GET",z),Re.send(),ge+=1)))):Oe?z.length&&A[z]&&n()(Gt({useEl:Ke[ue],base:z,hash:oe}),0):A[z]===void 0?A[z]=!0:A[z].onload&&(A[z].abort(),delete A[z].onload,A[z]=!0)}Ke="",ge+=1,dt()};var P;P=function(){window.removeEventListener("load",P,!1),o=n()(I,0)},document.readyState!=="complete"?window.addEventListener("load",P,!1):P()}})();var l=d(1845);function r(A,I){(I==null||I>A.length)&&(I=A.length);for(var o=0,g=new Array(I);o<I;o++)g[o]=A[o];return g}function h(A){if(l(A))return r(A)}var b=d(184),f=d(662),S=d(7172);function E(A){if(typeof b<"u"&&f(A)!=null||A["@@iterator"]!=null)return S(A)}var _=d(711);function O(A,I){var o;if(A){if(typeof A=="string")return r(A,I);var g=_(o=Object.prototype.toString.call(A)).call(o,8,-1);if(g==="Object"&&A.constructor&&(g=A.constructor.name),g==="Map"||g==="Set")return S(A);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return r(A,I)}}function j(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B(A){return h(A)||E(A)||O(A)||j()}var V=d(7077);function H(A,I,o){return I in A?V(A,I,{value:o,enumerable:!0,configurable:!0,writable:!0}):A[I]=o,A}function Y(A,I){if(!(A instanceof I))throw new TypeError("Cannot call a class as a function")}function se(A,I){for(var o=0;o<I.length;o++){var g=I[o];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),V(A,g.key,g)}}function ne(A,I,o){return I&&se(A.prototype,I),o&&se(A,o),A}var be=d(4426),K=d.n(be),Ce=d(9406),W=d.n(Ce),Be=d(8189),Ie=d.n(Be),ze=d(3972),te=d.n(ze),le=d(2777),q=d(961),Z=d.n(q),fe=d(5695),G=d.n(fe),X=d(8592),J=d.n(X),Q=d(9052),ve=d.n(Q),he=d(2560),Se=d.n(he),xe=d(2461),De=d.n(xe);function ae(A){if(l(A))return A}function ee(A,I){var o=A==null?null:typeof b<"u"&&f(A)||A["@@iterator"];if(o!=null){var g=[],i=!0,p=!1,M,T;try{for(o=o.call(A);!(i=(M=o.next()).done)&&(g.push(M.value),!(I&&g.length===I));i=!0);}catch(P){p=!0,T=P}finally{try{!i&&o.return!=null&&o.return()}finally{if(p)throw T}}return g}}function ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(A,I){return ae(A)||ee(A,I)||O(A,I)||ie()}var de=d(6397),me=d.n(de),Ne=d(7636),Ve=d.n(Ne),He=d(789),ye=d.n(He),We=d(4729),Xe=d.n(We),qe=d(1610),Et=d.n(qe),ut=d(3053),pt=d.n(ut),rt,vt=["zoomIn","zoomOut","hand"],Nt=["history","undo","redo","reset"],Ht=["delete","deleteAll"],we=W()(rt=[]).call(rt,vt,Nt,Ht),Ae={FILTER:"filter",COLOR:"color"},Fe=["rect","circle","triangle"],Ue={CROPZONE:"cropzone"},Ye={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},Le=_t("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),kt={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},Pt={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Ge={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},Ee={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_CREATED:"objectCreated",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur",IMAGE_RESIZED:"imageResized"},Dt={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},lt={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},ft=_t("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Jt={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},Xt={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},Tt={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},gn={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},mt={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidDrawingMode:"This operation is not supported in the drawing mode.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noActiveObject:"There is no active object.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",rotation:"The current angle is same the old angle.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},Wr={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},Gr={realTimeEvent:!0,min:-360,max:360,value:0},Yr={min:5,max:30,value:12},fr={realTimeEvent:!0,min:2,max:300,value:3},Xr={realTimeEvent:!0,min:10,max:100,value:50},_n={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},ui={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},Fn={realTimeEvent:!0,min:32,max:4088,value:800},Kt=2,dr="tui-image-editor-",Zr=Math.min,$=Math.max,Te=!1,Me=0;function Pe(A){return A.__fe_id||(Me+=1,A.__fe_id=Me),A.__fe_id}function je(A){return!it(A?.__fe_id)}function it(A){return isUndefined(A)||A===null}function Ze(A){return typeof A=="function"}function et(A,I,o){if(I>o){var g=[o,I];I=g[0],o=g[1]}return $(I,Zr(A,o))}function _t(){for(var A={},I=arguments.length,o=new Array(I),g=0;g<I;g++)o[g]=arguments[g];return J()(o,function(i){A[i]=i}),A}function Bt(A){var I="";return forEach(A,function(o,g){var i;I+=_concatInstanceProperty(i="".concat(g,": ")).call(i,o,";")}),I}function Qt(A,I){var o={},g=I.length,i=0,p;for(i=0;i<g;i+=1)p=I[i],o[p]=A[p];return o}function ke(A){return me()(A,10)}function zt(A){return A.replace(/-([a-z])/g,function(I,o){return o.toUpperCase()})}function qt(){return!!(window.File&&window.FileList&&window.FileReader)}function hr(A,I){var o,g,i;if(A.length===4){var p;A=W()(p="".concat(A)).call(p,C()(A).call(A,1,4))}var M=me()(C()(A).call(A,1,3),16),T=me()(C()(A).call(A,3,5),16),P=me()(C()(A).call(A,5,7),16),k=I||1;return W()(o=W()(g=W()(i="rgba(".concat(M,", ")).call(i,T,", ")).call(g,P,", ")).call(o,k,")")}function $r(){Te||(Te=!0,Xe()("image-editor","UA-129999381-1"))}function Jr(A,I){var o=document.getElementsByTagName("head"),g=ce(o,1),i=g[0],p=document.createElement("link"),M=encodeURIComponent(A);I&&(p.id=I),p.setAttribute("rel","stylesheet"),p.setAttribute("type","text/css"),p.setAttribute("href","data:text/css;charset=UTF-8,".concat(M)),i.appendChild(p)}function gr(A){return function(I){return A.querySelector(I)}}function Gg(A){var I=/data:(image\/.+);base64,/,o="",g,i,p;g=A.replace(I,function(T,P){return o=P,""}),g=atob(g);var M=g.length;for(i=new Uint8Array(M),p=0;p<M;p+=1)i[p]=g.charCodeAt(p);return new Blob([i],{type:o})}function Yg(A){return Number(A.toFixed(Kt))}function an(A){J()(A,function(I,o){A[o]=null})}function Qr(){var A,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(I.charAt(0)==="."){var g;return W()(g=".".concat(dr).concat(o)).call(g,C()(I).call(I,1))}return W()(A="".concat(dr).concat(o)).call(A,I)}function Xg(A,I){var o=I.originX,g=I.originY,i=A.getPointByOrigin(o,g),p=i.x,M=i.y;A.set({left:p,top:M,originX:o,originY:g}),A.setCoords()}function Zg(A){var I,o={};return Ve()(I=De()(A)).call(I,function(g){o[A[g]]=g}),o}function Vs(A,I){A.customProps=A.customProps||{},Z()(A.customProps,I)}function pr(A,I){var o={};return Se()(I)&&(I=[I]),J()(I,function(g){o[g]=A.customProps[g]}),o}function $g(A){return A.charAt(0).toUpperCase()+C()(A).call(A,1)}function Kr(A,I){return u()(A).call(A,I)>=0}function Ic(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Et()(A,"type")||Ae.COLOR}function Ws(A){var I=ye()(A),o=I===void 0?{}:I;return o.source?Ae.FILTER:Ae.COLOR}function bc(A){return pt()(A.get("type"),Fe)>=0}function Gs(A){if(Kr(Fe,A))return"Shape";switch(A){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return Sc(A)}}function Jg(A){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=I.useAlpha,g=o===void 0?!0:o,i=I.mode,p=Ye.VINTAGE,M=Ye.REMOVE_COLOR,T=Ye.BLEND_COLOR,P=Ye.SEPIA2,k=Ye.COLOR_FILTER,z=Ye.REMOVE_WHITE,U=Ye.BLEND,re;switch(A){case p:re=P;break;case M:re=g?k:z;break;case T:re=i==="add"?U:i;break;default:re=A}return Sc(re)}function Qg(A){var I=Ge.LOAD_IMAGE;return typeof A=="string"?I===A:I===A.name}function Kg(A){var I,o,g=Ge.FLIP_IMAGE,i=Ge.ROTATE_IMAGE,p=Ge.ADD_TEXT,M=Ge.APPLY_FILTER,T=Ge.REMOVE_FILTER,P=Ge.CHANGE_SHAPE,k=Ge.CHANGE_ICON_COLOR,z=Ge.CHANGE_TEXT_STYLE,U=Ge.CLEAR_OBJECTS,re=Ge.ADD_IMAGE_OBJECT,oe=Ge.REMOVE_OBJECT,pe=Ge.RESIZE_IMAGE,ue=A.name,ge=A.args,Oe;switch(ue){case g:Oe={name:ue,detail:ge[1]==="reset"?ge[1]:C()(I=ge[1]).call(I,4)};break;case i:Oe={name:ue,detail:ge[2]};break;case M:Oe={name:lt.APPLY_FILTER,detail:Jg(ge[1],ge[2])};break;case T:Oe={name:lt.REMOVE_FILTER,detail:"Remove"};break;case P:Oe={name:lt.CHANGE_SHAPE,detail:"Change"};break;case k:Oe={name:lt.CHANGE_ICON_COLOR,detail:"Change"};break;case z:Oe={name:lt.CHANGE_TEXT_STYLE,detail:"Change"};break;case oe:Oe={name:lt.REMOVE_OBJECT,detail:ge[2]};break;case U:Oe={name:lt.CLEAR_OBJECTS,detail:"All"};break;case re:Oe={name:lt.ADD_IMAGE_OBJECT,detail:"Add"};break;case p:Oe={name:lt.ADD_TEXT};break;case pe:Oe={name:lt.RESIZE,detail:W()(o="".concat(~~ge[1].width,"x")).call(o,~~ge[1].height)};break;default:Oe={name:ue};break}return ge[1]==="mask"&&(Oe={name:lt.LOAD_MASK_IMAGE,detail:"Apply"}),Oe}function qg(A){return A==="top"?"bottom":A==="left"?"right":A==="right"?"left":"top"}function Sc(A){return A.replace(/[a-z]/,function(I){return I.toUpperCase()})}function ep(A){var I=A.left,o=A.top,g=A.width,i=A.height,p=ui.LEFT,M=ui.TOP,T=ui.WIDTH,P=ui.HEIGHT;return I===p&&o===M&&g===T&&i===P}var tp=_t("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),Dc={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},np={UN_IMPLEMENTATION:function(I){return Dc.UN_IMPLEMENTATION+I},NO_COMPONENT_NAME:function(){return Dc.NO_COMPONENT_NAME}},qr={types:Z()({},tp),create:function(I){I=I.toLowerCase();for(var o=np[I],g=arguments.length,i=new Array(g>1?g-1:0),p=1;p<g;p++)i[p-1]=arguments[p];return o.apply(void 0,i)}},xc=qr.create,Ec=qr.types,ip=function(){function A(I,o){Y(this,A),this.name=I.name,this.args=o,this.execute=I.execute,this.undo=I.undo,this.executeCallback=I.executeCallback||null,this.undoCallback=I.undoCallback||null,this.undoData={}}return ne(A,[{key:"execute",value:function(){throw new Error(xc(Ec.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(xc(Ec.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return De()(this.undoData).length>0}},{key:"setUndoData",value:function(o,g,i){return g&&(o=g),i?g||(g=o):(Z()(this.undoData,o),g=null),g}},{key:"setExecuteCallback",value:function(o){return this.executeCallback=o,this}},{key:"setUndoCallback",value:function(o){return this.undoCallback=o,this}}]),A}(),rp=ip,Mc={};function op(A){var I=Mc[A];if(I){for(var o=arguments.length,g=new Array(o>1?o-1:0),i=1;i<o;i++)g[i-1]=arguments[i];return new rp(I,g)}return null}function sp(A){Mc[A.name]=A}var At={create:op,register:sp},_c=function(){function A(){Y(this,A),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return ne(A,[{key:"_invokeExecution",value:function(o){var g=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var p=o.args;return p||(p=[]),o.execute.apply(o,B(p)).then(function(M){return g._isSilent||(g.pushUndoStack(o),g.fire(i?Ee.AFTER_REDO:Ee.EXECUTE_COMMAND,o)),g.unlock(),Ze(o.executeCallback)&&o.executeCallback(M),M}).catch(function(M){return g.unlock(),Ie().reject(M)})}},{key:"_invokeUndo",value:function(o){var g=this;this.lock();var i=o.args;return i||(i=[]),o.undo.apply(o,B(i)).then(function(p){return g.pushRedoStack(o),g.fire(Ee.AFTER_UNDO,o),g.unlock(),Ze(o.undoCallback)&&o.undoCallback(p),p}).catch(function(p){return g.unlock(),Ie().reject(p)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(Ee.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(Ee.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var o=this;this._isSilent=!0;for(var g=arguments.length,i=new Array(g),p=0;p<g;p++)i[p]=arguments[p];return this.execute.apply(this,W()(i).call(i,[this._isSilent])).then(function(){o._isSilent=!1})}},{key:"execute",value:function(){var o=this;if(this._isLocked)return Ie().reject(mt.isLock);for(var g=arguments.length,i=new Array(g),p=0;p<g;p++)i[p]=arguments[p];var M=i[0];return Se()(M)&&(M=At.create.apply(At,i)),this._invokeExecution(M).then(function(T){return o.clearRedoStack(),T})}},{key:"undo",value:function(){var o=this._undoStack.pop(),g,i="";if(o&&this._isLocked&&(this.pushUndoStack(o,!0),o=null),o)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),g=this._invokeUndo(o);else{if(i=mt.undo,this._isLocked){var p;i=W()(p="".concat(i," Because ")).call(p,mt.isLock)}g=Ie().reject(i)}return g}},{key:"redo",value:function(){var o=this._redoStack.pop(),g,i="";if(o&&this._isLocked&&(this.pushRedoStack(o,!0),o=null),o)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),g=this._invokeExecution(o,!0);else{if(i=mt.redo,this._isLocked){var p;i=W()(p="".concat(i," Because ")).call(p,mt.isLock)}g=Ie().reject(i)}return g}},{key:"pushUndoStack",value:function(o,g){this._undoStack.push(o),g||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(o,g){this._redoStack.push(o),g||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),A}();ve().mixin(_c);var ap=_c,lp=d(5214),Kn=d.n(lp),cp=function(A){var I,o,g,i,p,M,T,P=A.locale,k=A.biImage,z=A.commonStyle,U=A.headerStyle,re=A.loadButtonStyle,oe=A.downloadButtonStyle,pe=A.submenuStyle;return W()(I=W()(o=W()(g=W()(i=W()(p=W()(M=W()(T=`
    <div class="tui-image-editor-main-container" style="`.concat(z,`">
        <div class="tui-image-editor-header" style="`)).call(T,U,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(M,k,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(p,re,`">
                    `)).call(i,P.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(g,oe,`">
                    `)).call(o,P.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(I,pe,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)},up=function(A){var I,o,g,i,p,M=A.locale,T=A.biImage,P=A.loadButtonStyle,k=A.downloadButtonStyle,z=A.menuBarPosition;return W()(I=W()(o=W()(g=W()(i=W()(p=`
    <ul class="tui-image-editor-help-menu `.concat(qg(z),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(p,T,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(i,P,`">
                `)).call(g,M.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(o,k,`">
                `)).call(I,M.localize("Download"),`
            </button>
        </div>
    </div>
`)},fp=d(899),wn=d.n(fp),dp=function(A){var I,o,g,i,p,M,T,P,k,z,U,re,oe,pe,ue,ge,Oe,Je,Qe,Ke,Re,dt,Gt,nn,pn,Lt,ti,ni,en,ao=A.subMenuLabelActive,lo=A.subMenuLabelNormal,co=A.subMenuRangeTitle,uo=A.submenuPartitionVertical,fo=A.submenuPartitionHorizontal,ho=A.submenuCheckbox,go=A.submenuRangePointer,po=A.submenuRangeValue,vo=A.submenuColorpickerTitle,mo=A.submenuColorpickerButton,yo=A.submenuRangeBar,Co=A.submenuRangeSubbar,Io=A.submenuDisabledRangePointer,bo=A.submenuDisabledRangeBar,So=A.submenuDisabledRangeSubbar,Do=A.submenuIconSize,xo=A.menuIconSize,Eo=A.biSize,vn=A.menuIconStyle,fi=A.submenuIconStyle;return W()(I=W()(o=W()(g=W()(i=W()(p=W()(M=W()(T=W()(P=W()(k=W()(z=W()(U=W()(re=W()(oe=W()(pe=W()(ue=W()(ge=W()(Oe=W()(Je=W()(Qe=W()(Ke=W()(Re=W()(dt=W()(Gt=W()(nn=W()(pn=W()(Lt=W()(ti=W()(ni=W()(en=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(ao,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(en,lo,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call(ni,co,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(ti,uo,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(Lt,fo,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(pn,ho,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(nn,go,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(Gt,yo,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(dt,Co,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(Re,Io,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(Ke,So,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(Qe,bo,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call(Je,po,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call(Oe,vo,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(ge,mo,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(ue,xo,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(pe,Do,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(oe,Eo,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(re,vn.normal.color,`;
        stroke: `)).call(U,vn.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(z,vn.active.color,`;
        stroke: `)).call(k,vn.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(P,vn.hover.color,`;
        stroke: `)).call(T,vn.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(M,vn.disabled.color,`;
        stroke: `)).call(p,vn.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(i,fi.normal.color,`;
        stroke: `)).call(g,fi.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(o,fi.active.color,`;
        stroke: `)).call(I,fi.active.color,`;
    }
`)},hp={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},gp=d(2534),pp=function(){function A(I){Y(this,A),this.styles=this._changeToObject(Z()({},hp,I)),Jr(this._styleMaker()),this._loadDefaultSvgIcon()}return ne(A,[{key:"getStyle",value:function(o){var g=null,i=o.replace(/\..+$/,""),p=this.styles[o];switch(o){case"common.bi":g=this.styles[o].image;break;case"menu.icon":g={active:this.styles["".concat(i,".activeIcon")],normal:this.styles["".concat(i,".normalIcon")],hover:this.styles["".concat(i,".hoverIcon")],disabled:this.styles["".concat(i,".disabledIcon")]};break;case"submenu.icon":g={active:this.styles["".concat(i,".activeIcon")],normal:this.styles["".concat(i,".normalIcon")]};break;case"submenu.label":g={active:this._makeCssText(this.styles["".concat(i,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(i,".normalLabel")])};break;case"submenu.partition":g={vertical:this._makeCssText(Z()({},p,{borderLeft:"1px solid ".concat(p.color)})),horizontal:this._makeCssText(Z()({},p,{borderBottom:"1px solid ".concat(p.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":p.backgroundColor=p.color,g=this._makeCssText(p);break;default:g=this._makeCssText(p);break}return g}},{key:"_styleMaker",value:function(){var o=this.getStyle("submenu.label"),g=this.getStyle("submenu.partition");return dp({subMenuLabelActive:o.active,subMenuLabelNormal:o.normal,submenuPartitionVertical:g.vertical,submenuPartitionHorizontal:g.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(o){var g={};return J()(o,function(i,p){var M=p.match(/^(.+)\.([a-z]+)$/i),T=ce(M,3),P=T[1],k=T[2];g[P]||(g[P]={}),g[P][k]=i}),g}},{key:"_makeCssText",value:function(o){var g=this,i=[];return J()(o,function(p,M){var T,P;u()(T=["backgroundImage"]).call(T,M)>-1&&p!=="none"&&(p="url(".concat(p,")")),i.push(W()(P="".concat(g._toUnderScore(M),": ")).call(P,p))}),i.join(";")}},{key:"_toUnderScore",value:function(o){return o.replace(/([A-Z])/g,function(g,i){return"-".concat(i.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var o=new DOMParser,g=gp.replace(/data:image\/svg\+xml;base64,/,""),i=o.parseFromString(atob(g),"text/xml");document.body.appendChild(i.documentElement)}}},{key:"_makeIconClassName",value:function(o,g){var i=g?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),p=i[o],M=p.path,T=p.name;return M&&T?o:"".concat(o," use-default")}},{key:"_makeSvgIconPrefix",value:function(o,g){var i,p=g?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),M=p[o],T=M.path,P=M.name;return T&&P?W()(i="".concat(T,"#")).call(i,P,"-"):"#"}},{key:"_makeSvgItem",value:function(o,g,i){var p=this;return wn()(o).call(o,function(M){var T,P,k=p._makeSvgIconPrefix(M,i),z=p._toUnderScore(g),U=p._makeIconClassName(M,i);return W()(T=W()(P='<use xlink:href="'.concat(k,"ic-")).call(P,z,'" class="')).call(T,U,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(o,g){var i,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return W()(i='<svg class="svg_ic-'.concat(p?"submenu":"menu",'">')).call(i,this._makeSvgItem(o,g,p),"</svg>")}}]),A}(),vp=pp,mp=d(9146),_e=d.n(mp),yp=d(6623),wc=d(4230);function Ys(A,I){return Ys=wc||function(g,i){return g.__proto__=i,g},Ys(A,I)}function yt(A,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=yp(I&&I.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),I&&Ys(A,I)}var Cp=d(3742);function eo(A){"@babel/helpers - typeof";return typeof b=="function"&&typeof Cp=="symbol"?eo=function(o){return typeof o}:eo=function(o){return o&&typeof b=="function"&&o.constructor===b&&o!==b.prototype?"symbol":typeof o},eo(A)}function ct(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function Ct(A,I){if(I&&(eo(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ct(A)}var Tc=d(9856);function $e(A){return $e=wc?Tc:function(o){return o.__proto__||Tc(o)},$e(A)}var Ip=d(6092),vr=d.n(Ip),bp=d(4858),Sp=d.n(bp),Dp=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],Ac=function(){function A(I,o){var g=o.defaultColor,i=g===void 0?"#7e7e7e":g,p=o.toggleDirection,M=p===void 0?"up":p,T=o.usageStatistics;Y(this,A),this.colorpickerElement=I,this.usageStatistics=T,this._show=!1,this._colorpickerElement=I,this._toggleDirection=M,this._makePickerButtonElement(i),this._makePickerLayerElement(I,I.getAttribute("title")),this._color=i,this.picker=Sp().create({container:this.pickerElement,preset:Dp,color:i,usageStatistics:this.usageStatistics}),this._addEvent()}return ne(A,[{key:"destroy",value:function(){var o=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",J()(this,function(g,i){o[i]=null})}},{key:"color",get:function(){return this._color},set:function(o){this._color=o,this._changeColorElement(o)}},{key:"_changeColorElement",value:function(o){o?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=o):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(o){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",o?this.colorElement.style.backgroundColor=o:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(o,g){var i=document.createElement("label"),p=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",i.innerHTML=g,p.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(p),o.appendChild(this.pickerControl),o.appendChild(this.colorElement),o.appendChild(i)}},{key:"_addEvent",value:function(){var o=this,g;this.picker.on("selectColor",function(i){o._changeColorElement(i.color),o._color=i.color,o.fire("change",i.color)}),this.eventHandler={pickerToggle:K()(g=this._pickerToggleEventHandler).call(g,this),pickerHide:function(){return o.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(o){var g=o.target,i=g&&this._isElementInColorPickerControl(g);(!i||i&&this._isPaletteButton(g))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),o.stopPropagation()}},{key:"_isPaletteButton",value:function(o){return o.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(o){for(var g=o;g!==document.body&&g;){if(g===this.pickerControl)return!0;g=g.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var o=this.pickerControl.style,g=this._colorpickerElement.clientWidth/2+2,i=this.pickerControl.offsetWidth/2-g,p=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(p=30),o.top="".concat(p,"px"),o.left="-".concat(i,"px")}}]),A}();ve().mixin(Ac);var qn=Ac,xp=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,Oc=function(){function A(I){var o,g,i,p,M,T,P,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y(this,A),this._value=k.value||0,this.rangeElement=I.slider,this.rangeInputElement=I.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=k.min||0,this._max=k.max||100,this._useDecimal=k.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=k.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:K()(o=this._startChangingSlide).call(o,this),stopChangingSlide:K()(g=this._stopChangingSlide).call(g,this),changeSlide:K()(i=this._changeSlide).call(i,this),changeSlideFinally:K()(p=this._changeSlideFinally).call(p,this),changeInput:K()(M=this._changeInput).call(M,this),changeInputFinally:K()(T=this._changeValueWithInput).call(T,this,!0),changeInputWithArrow:K()(P=this._changeValueWithInputKeyEvent).call(P,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=k.value,this.trigger("change")}return ne(A,[{key:"destroy",value:function(){var o=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",J()(this,function(g,i){o[i]=null})}},{key:"max",get:function(){return this._max},set:function(o){this._max=o,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(o){this._min=o,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(o){o=this._useDecimal?o:ke(o);var g=o-this._min,i=g*this.rangeWidth/this._absMax;this.rangeWidth<i&&(i=this.rangeWidth),this.pointer.style.left="".concat(i,"px"),this.subbar.style.right="".concat(this.rangeWidth-i,"px"),this._value=o,this.rangeInputElement&&(this.rangeInputElement.value=o)}},{key:"trigger",value:function(o){this.fire(o,this._value)}},{key:"_getRangeWidth",value:function(){var o=function(i){return ke(window.getComputedStyle(i,null).width)};return o(this.rangeElement)-o(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(o){var g,i=o.keyCode,p=o.target;if(!(u()(g=[Tt.ARROW_UP,Tt.ARROW_DOWN]).call(g,i)<0)){var M=Number(p.value);M=this._valueUpDownForKeyEvent(M,i);var T=M<this._min||M>this._max;if(!T){var P=et(M,this._min,this.max);this.value=P,this.fire("change",P,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(o,g){var i=this._useDecimal?.1:1;return g===Tt.ARROW_UP?o+=i:g===Tt.ARROW_DOWN&&(o-=i),o}},{key:"_changeInput",value:function(o){var g=this;clearTimeout(this._userInputTimer);var i=o.keyCode;if(i<Tt.DIGIT_0||i>Tt.DIGIT_9){o.preventDefault();return}this._userInputTimer=n()(function(){g._inputSetValue(o.target.value)},350)}},{key:"_inputSetValue",value:function(o){var g=this._useDecimal?Number(o):ke(o);g=et(g,this._min,this.max),this.value=g,this.fire("change",g,!0)}},{key:"_changeValueWithInput",value:function(o,g){var i,p=g.keyCode,M=g.target;if(!(u()(i=[Tt.ARROW_UP,Tt.ARROW_DOWN]).call(i,p)>=0)){var T=this._filterForInputText(M.value),P=!T||isNaN(T);M.value=T,P||this._inputSetValue(T)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(o){var g=o.screenX,i=g-this.firstPosition,p=this.firstLeft+i;p=p>this.rangeWidth?this.rangeWidth:p,p=p<0?0:p,this.pointer.style.left="".concat(p,"px"),this.subbar.style.right="".concat(this.rangeWidth-p,"px");var M=p/this.rangeWidth,T=this._absMax*M+this._min,P=this._useDecimal?T:ke(T),k=this.value!==P;k&&(this.value=P,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(o){if(o.stopPropagation(),o.target.className==="tui-image-editor-range"){var g=o.offsetX,i=g/this.rangeWidth,p=this._absMax*i+this._min;this.pointer.style.left="".concat(i*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-i)*this.rangeWidth,"px"),this.value=p,this.fire("change",p,!0)}}},{key:"_startChangingSlide",value:function(o){this.firstPosition=o.screenX,this.firstLeft=ke(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(o){return o.replace(xp,"$1$2$3")}}]),A}();ve().mixin(Oc);var ln=Oc,Nc=function(){function A(I,o){var g=o.locale,i=o.name,p=o.makeSvgIcon,M=o.menuBarPosition,T=o.templateHtml,P=o.usageStatistics;Y(this,A),this.subMenuElement=I,this.menuBarPosition=M,this.toggleDirection=M==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=P,this.eventHandler={},this._makeSubMenuElement({locale:g,name:i,makeSvgIcon:p,templateHtml:T})}return ne(A,[{key:"selector",value:function(o){return this.subMenuElement.querySelector(o)}},{key:"colorPickerChangeShow",value:function(o){var g;Ve()(g=this.colorPickerControls).call(g,function(i){o!==i&&i.hide()})}},{key:"getButtonType",value:function(o,g){return o.className.match(RegExp("(".concat(g.join("|"),")")))[0]}},{key:"changeClass",value:function(o,g,i){o.classList.remove(g),o.classList.add(i)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(o){var g=o.locale,i=o.name,p=o.iconStyle,M=o.makeSvgIcon,T=o.templateHtml,P=document.createElement("div");P.className="tui-image-editor-menu-".concat(i),P.innerHTML=T({locale:g,iconStyle:p,makeSvgIcon:M}),this.subMenuElement.appendChild(P)}},{key:"_onStartEditingInputBox",value:function(){this.fire(Ee.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(Ee.INPUT_BOX_EDITING_STOPPED)}}]),A}();ve().mixin(Nc);var Tn=Nc,Ep=function(A){var I,o,g,i,p,M,T,P,k=A.locale,z=A.makeSvgIcon;return W()(I=W()(o=W()(g=W()(i=W()(p=W()(M=W()(T=W()(P=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(z(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(P,k.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(T,z(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(M,k.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(p,z(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(i,k.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(g,k.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(o,k.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(I,k.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function Mp(A){var I=_p();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function _p(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var wp={stroke:"#ffbb3b",fill:"",strokeWidth:3},Tp=function(A){yt(o,A);var I=Mp(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"shape",makeSvgIcon:T,menuBarPosition:P,templateHtml:Ep,usageStatistics:k}),p.type=null,p.options=wp,p._els={shapeSelectButton:p.selector(".tie-shape-button"),shapeColorButton:p.selector(".tie-shape-color-button"),strokeRange:new ln({slider:p.selector(".tie-stroke-range"),input:p.selector(".tie-stroke-range-value")},fr),fillColorpicker:new qn(p.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics}),strokeColorpicker:new qn(p.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics})},p.colorPickerControls.push(p._els.fillColorpicker),p.colorPickerControls.push(p._els.strokeColorpicker),p.colorPickerInputBoxes=[],p.colorPickerInputBoxes.push(p._els.fillColorpicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX)),p.colorPickerInputBoxes.push(p._els.strokeColorpicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX)),p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),an(this)}},{key:"addEvent",value:function(i){var p,M,T,P,k,z,U=this;this.eventHandler.shapeTypeSelected=K()(p=this._changeShapeHandler).call(p,this),this.actions=i,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",K()(M=this._changeStrokeRangeHandler).call(M,this)),this._els.fillColorpicker.on("change",K()(T=this._changeFillColorHandler).call(T,this)),this._els.strokeColorpicker.on("change",K()(P=this._changeStrokeColorHandler).call(P,this)),this._els.fillColorpicker.on("changeShow",K()(k=this.colorPickerChangeShow).call(k,this)),this._els.strokeColorpicker.on("changeShow",K()(z=this.colorPickerChangeShow).call(z,this)),vr()(this.colorPickerInputBoxes,function(re){var oe,pe;re.addEventListener(Ee.FOCUS,K()(oe=U._onStartEditingInputBox).call(oe,U)),re.addEventListener(Ee.BLUR,K()(pe=U._onStopEditingInputBox).call(pe,U))},this)}},{key:"_removeEvent",value:function(){var i=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),vr()(this.colorPickerInputBoxes,function(p){var M,T;p.removeEventListener(Ee.FOCUS,K()(M=i._onStartEditingInputBox).call(M,i)),p.removeEventListener(Ee.BLUR,K()(T=i._onStopEditingInputBox).call(T,i))},this)}},{key:"setShapeStatus",value:function(i){var p=i.strokeWidth,M=i.strokeColor,T=i.fillColor;this._els.strokeRange.value=p,this._els.strokeColorpicker.color=M,this._els.fillColorpicker.color=T,this.options.stroke=M,this.options.fill=T,this.options.strokeWidth=p,this.actions.setDrawingShape(this.type,{strokeWidth:p})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(i){var p=i;p<=0&&(p=fr.max),this._els.strokeRange.max=p}},{key:"setStrokeValue",value:function(i){this._els.strokeRange.value=i,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(i){var p=i.target.closest(".tui-image-editor-button");if(p){this.actions.stopDrawingMode(),this.actions.discardSelection();var M=this.getButtonType(p,["circle","triangle","rect"]);if(this.type===M){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=M,i.currentTarget.classList.add(M),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(i,p){this.options.strokeWidth=ke(i),this.actions.changeShape({strokeWidth:i},!p),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(i){i=i||"transparent",this.options.fill=i,this.actions.changeShape({fill:i})}},{key:"_changeStrokeColorHandler",value:function(i){i=i||"transparent",this.options.stroke=i,this.actions.changeShape({stroke:i})}}]),o}(Tn),Ap=Tp,Op=function(A){var I,o,g,i,p,M,T,P,k,z,U,re,oe,pe,ue,ge,Oe,Je=A.locale,Qe=A.makeSvgIcon;return W()(I=W()(o=W()(g=W()(i=W()(p=W()(M=W()(T=W()(P=W()(k=W()(z=W()(U=W()(re=W()(oe=W()(pe=W()(ue=W()(ge=W()(Oe=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(Qe(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(Oe,Je.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(ge,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(ue,Je.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(pe,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(oe,Je.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call(re,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(U,Je.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(z,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(k,Je.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(P,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(T,Je.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(M,Qe(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(p,Je.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(i,Qe(["normal","active"],"apply"),`
                <label>
                    `)).call(g,Je.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(o,Qe(["normal","active"],"cancel"),`
                <label>
                    `)).call(I,Je.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Np(A){var I=kp();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function kp(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Pp=function(A){yt(o,A);var I=Np(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"crop",makeSvgIcon:T,menuBarPosition:P,templateHtml:Op,usageStatistics:k}),p.status="active",p._els={apply:p.selector(".tie-crop-button .apply"),cancel:p.selector(".tie-crop-button .cancel"),preset:p.selector(".tie-crop-preset-button")},p.defaultPresetButton=p._els.preset.querySelector(".preset-none"),p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),an(this)}},{key:"addEvent",value:function(i){var p,M,T,P=K()(p=this._applyEventHandler).call(p,this),k=K()(M=this._cancelEventHandler).call(M,this),z=K()(T=this._cropzonePresetEventHandler).call(T,this);this.eventHandler={apply:P,cancel:k,cropzonePreset:z},this.actions=i,this._els.apply.addEventListener("click",P),this._els.cancel.addEventListener("click",k),this._els.preset.addEventListener("click",z)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(i){var p=i.target.closest(".tui-image-editor-button.preset");if(p){var M=p.className.match(/preset-[^\s]+/),T=ce(M,1),P=T[0];this._setPresetButtonActive(p),this.actions.preset(P)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(i){i?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;J()(this._els.preset.querySelectorAll(".preset"),function(p){p.classList.remove("active")}),i&&i.classList.add("active")}}]),o}(Tn),Lp=Pp,Rp=function(A){var I,o,g,i,p,M,T=A.locale,P=A.makeSvgIcon;return W()(I=W()(o=W()(g=W()(i=W()(p=W()(M=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(T.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(M,T.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(p,T.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(i,P(["normal","active"],"apply"),`
                <label>
                    `)).call(g,T.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(o,P(["normal","active"],"cancel"),`
                <label>
                    `)).call(I,T.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function jp(A){var I=Fp();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Fp(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Bp=function(A){yt(o,A);var I=jp(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"resize",makeSvgIcon:T,menuBarPosition:P,templateHtml:Rp,usageStatistics:k}),p.status="active",p._lockState=!1,p._originalDimensions=null,p._els={widthRange:new ln({slider:p.selector(".tie-width-range"),input:p.selector(".tie-width-range-value")},Fn),heightRange:new ln({slider:p.selector(".tie-height-range"),input:p.selector(".tie-height-range-value")},Fn),lockAspectRatio:p.selector(".tie-lock-aspect-ratio"),apply:p.selector(".tie-resize-button .apply"),cancel:p.selector(".tie-resize-button .cancel")},p}return ne(o,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var i=this.actions.getCurrentDimensions();this._originalDimensions=i,this.setWidthValue(i.width),this.setHeightValue(i.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(i){this._els.widthRange.min=this.calcMinValue(i.minWidth),this._els.heightRange.min=this.calcMinValue(i.minHeight),this._els.widthRange.max=this.calcMaxValue(i.maxWidth),this._els.heightRange.max=this.calcMaxValue(i.maxHeight)}},{key:"calcMaxValue",value:function(i){return i<=0&&(i=Fn.max),i}},{key:"calcMinValue",value:function(i){return i<=0&&(i=Fn.min),i}},{key:"setWidthValue",value:function(i){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=i,p&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(i){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=i,p&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),an(this)}},{key:"addEvent",value:function(i){var p,M,T,P,k;this._els.widthRange.on("change",K()(p=this._changeWidthRangeHandler).call(p,this)),this._els.heightRange.on("change",K()(M=this._changeHeightRangeHandler).call(M,this)),this._els.lockAspectRatio.addEventListener("change",K()(T=this._changeLockAspectRatio).call(T,this));var z=K()(P=this._applyEventHandler).call(P,this),U=K()(k=this._cancelEventHandler).call(k,this);this.eventHandler={apply:z,cancel:U},this.actions=i,this._els.apply.addEventListener("click",z),this._els.cancel.addEventListener("click",U)}},{key:"_changeWidthRangeHandler",value:function(i){this.actions.preview("width",ke(i),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(i){this.actions.preview("height",ke(i),this._lockState)}},{key:"_changeLockAspectRatio",value:function(i){this._lockState=i.target.checked,this.actions.lockAspectRatio(this._lockState,Fn.min,Fn.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(i){i?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),o}(Tn),zp=Bp,Hp=function(A){var I,o,g,i,p,M=A.locale,T=A.makeSvgIcon;return W()(I=W()(o=W()(g=W()(i=W()(p=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(T(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(p,M.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(i,T(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(g,M.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(o,T(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(I,M.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Up(A){var I=Vp();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Vp(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Wp=function(A){yt(o,A);var I=Up(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"flip",makeSvgIcon:T,menuBarPosition:P,templateHtml:Hp,usageStatistics:k}),p.flipStatus=!1,p._els={flipButton:p.selector(".tie-flip-button")},p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),an(this)}},{key:"addEvent",value:function(i){var p;this.eventHandler.changeFlip=K()(p=this._changeFlip).call(p,this),this._actions=i,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(i){var p=this,M=i.target.closest(".tui-image-editor-button");if(M){var T=this.getButtonType(M,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&T==="resetFlip")return;this._actions.flip(T).then(function(P){var k=p._els.flipButton.classList;p.flipStatus=!1,k.remove("resetFlip"),J()(["flipX","flipY"],function(z){k.remove(z),P[z]&&(k.add(z),k.add("resetFlip"),p.flipStatus=!0)})})}}}]),o}(Tn),Gp=Wp,Yp=function(A){var I,o,g=A.locale,i=A.makeSvgIcon;return W()(I=W()(o=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(i(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(o,i(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(I,g.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function Xp(A){var I=Zp();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Zp(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var $p=30,Jp=-30,Qp=function(A){yt(o,A);var I=Xp(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"rotate",makeSvgIcon:T,menuBarPosition:P,templateHtml:Yp,usageStatistics:k}),p._value=0,p._els={rotateButton:p.selector(".tie-rotate-button"),rotateRange:new ln({slider:p.selector(".tie-rotate-range"),input:p.selector(".tie-rotate-range-value")},Gr)},p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),an(this)}},{key:"setRangeBarAngle",value:function(i,p){var M=p;i==="rotate"&&(M=me()(this._els.rotateRange.value,10)+p),this._setRangeBarRatio(M)}},{key:"_setRangeBarRatio",value:function(i){this._els.rotateRange.value=i}},{key:"addEvent",value:function(i){var p,M;this.eventHandler.rotationAngleChanged=K()(p=this._changeRotateForButton).call(p,this),this.actions=i,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",K()(M=this._changeRotateForRange).call(M,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(i,p){var M=ke(i);this.actions.setAngle(M,!p),this._value=M}},{key:"_changeRotateForButton",value:function(i){var p=i.target.closest(".tui-image-editor-button"),M=this._els.rotateRange.value;if(p){var T=this.getButtonType(p,["counterclockwise","clockwise"]),P={clockwise:$p,counterclockwise:Jp}[T],k=me()(M,10)+P,z=k>=-360&&k<=360;z&&this.actions.rotate(P)}}}]),o}(Tn),Kp=Qp,qp=function(A){var I,o,g,i,p,M,T,P,k,z,U,re,oe,pe=A.locale,ue=A.makeSvgIcon;return W()(I=W()(o=W()(g=W()(i=W()(p=W()(M=W()(T=W()(P=W()(k=W()(z=W()(U=W()(re=W()(oe=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(ue(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(oe,pe.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call(re,ue(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(U,pe.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(z,ue(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(k,pe.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(P,ue(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(T,pe.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(M,ue(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(p,pe.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(i,ue(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(g,pe.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(o,pe.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(I,pe.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function ev(A){var I=tv();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function tv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var nv=function(A){yt(o,A);var I=ev(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"text",makeSvgIcon:T,menuBarPosition:P,templateHtml:qp,usageStatistics:k}),p.effect={bold:!1,italic:!1,underline:!1},p.align="tie-text-align-left",p._els={textEffectButton:p.selector(".tie-text-effect-button"),textAlignButton:p.selector(".tie-text-align-button"),textColorpicker:new qn(p.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics}),textRange:new ln({slider:p.selector(".tie-text-range"),input:p.selector(".tie-text-range-value")},Xr)},p.colorPickerInputBox=p._els.textColorpicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX),p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),an(this)}},{key:"addEvent",value:function(i){var p,M,T,P,k,z,U=K()(p=this._setTextEffectHandler).call(p,this),re=K()(M=this._setTextAlignHandler).call(M,this);this.eventHandler={setTextEffect:U,setTextAlign:re},this.actions=i,this._els.textEffectButton.addEventListener("click",U),this._els.textAlignButton.addEventListener("click",re),this._els.textRange.on("change",K()(T=this._changeTextRnageHandler).call(T,this)),this._els.textColorpicker.on("change",K()(P=this._changeColorHandler).call(P,this)),this.colorPickerInputBox.addEventListener(Ee.FOCUS,K()(k=this._onStartEditingInputBox).call(k,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,K()(z=this._onStopEditingInputBox).call(z,this))}},{key:"_removeEvent",value:function(){var i,p,M=this.eventHandler,T=M.setTextEffect,P=M.setTextAlign;this._els.textEffectButton.removeEventListener("click",T),this._els.textAlignButton.removeEventListener("click",P),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,K()(i=this._onStartEditingInputBox).call(i,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,K()(p=this._onStopEditingInputBox).call(p,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(i){this._els.textColorpicker.color=i}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(i){this._els.textRange.value=i}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=ye()(i),M=i.fontSize,T=i.fontStyle,P=i.fontWeight,k=i.textDecoration,z=i.textAlign;this.textColor=p,this.fontSize=M,this.setEffectState("italic",T),this.setEffectState("bold",P),this.setEffectState("underline",k),this.setAlignState("tie-text-align-".concat(z))}},{key:"setEffectState",value:function(i,p){var M=p==="italic"||p==="bold"||p==="underline",T=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(i));this.effect[i]=M,T.classList[M?"add":"remove"]("active")}},{key:"setAlignState",value:function(i){var p=this._els.textAlignButton;p.classList.remove(this.align),p.classList.add(i),this.align=i}},{key:"_setTextEffectHandler",value:function(i){var p=i.target.closest(".tui-image-editor-button");if(p){var M=p.className.match(/(bold|italic|underline)/),T=ce(M,1),P=T[0],k={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[P];this.effect[P]=!this.effect[P],p.classList.toggle("active"),this.actions.changeTextStyle(k)}}},{key:"_setTextAlignHandler",value:function(i){var p=i.target.closest(".tui-image-editor-button");if(p){var M=this.getButtonType(p,["left","center","right"]),T="tie-text-align-".concat(M);i.currentTarget.classList.remove(this.align),this.align!==T&&i.currentTarget.classList.add(T),this.actions.changeTextStyle({textAlign:M}),this.align=T}}},{key:"_changeTextRnageHandler",value:function(i,p){this.actions.changeTextStyle({fontSize:i},!p)}},{key:"_changeColorHandler",value:function(i){i=i||"transparent",this.actions.changeTextStyle({fill:i})}}]),o}(Tn),iv=nv,rv=function(A){var I,o,g,i=A.locale,p=A.makeSvgIcon;return W()(I=W()(o=W()(g=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(p(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(g,i.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(o,p(["normal","active"],"apply"),`
                <label>
                    `)).call(I,i.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)};function ov(A){var I=sv();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function sv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var av=function(A){yt(o,A);var I=ov(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"mask",makeSvgIcon:T,menuBarPosition:P,templateHtml:rv,usageStatistics:k}),p._els={applyButton:p.selector(".tie-mask-apply"),maskImageButton:p.selector(".tie-mask-image-file")},p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),an(this)}},{key:"addEvent",value:function(i){var p,M,T=K()(p=this._loadMaskFile).call(p,this),P=K()(M=this._applyMask).call(M,this);this.eventHandler={loadMaskFile:T,applyMask:P},this.actions=i,this._els.maskImageButton.addEventListener("change",T),this._els.applyButton.addEventListener("click",P)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(i){var p;qt()||alert("This browser does not support file-api");var M=ce(i.target.files,1),T=M[0];T&&(p=te().createObjectURL(T),this.actions.loadImageFromURL(p,T),this._els.applyButton.classList.add("active"))}}]),o}(Tn),lv=av,cv=function(A){var I,o,g,i,p,M,T,P,k,z,U,re,oe,pe,ue,ge,Oe,Je,Qe,Ke,Re=A.locale,dt=A.makeSvgIcon;return W()(I=W()(o=W()(g=W()(i=W()(p=W()(M=W()(T=W()(P=W()(k=W()(z=W()(U=W()(re=W()(oe=W()(pe=W()(ue=W()(ge=W()(Oe=W()(Je=W()(Qe=W()(Ke=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(dt(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(Ke,Re.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(Qe,dt(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call(Je,Re.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call(Oe,dt(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(ge,Re.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(ue,dt(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(pe,Re.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(oe,dt(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call(re,Re.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(U,dt(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(z,Re.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(k,dt(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(P,Re.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(T,dt(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(M,Re.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(p,dt(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(i,Re.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(g,dt(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(o,Re.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(I,Re.localize("Color"),`"></div>
        </li>
    </ul>
`)};function uv(A){var I=fv();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function fv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var dv=function(A){yt(o,A);var I=uv(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"icon",makeSvgIcon:T,menuBarPosition:P,templateHtml:cv,usageStatistics:k}),p.iconType=null,p._iconMap={},p._els={registerIconButton:p.selector(".tie-icon-image-file"),addIconButton:p.selector(".tie-icon-add-button"),iconColorpicker:new qn(p.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics})},p.colorPickerInputBox=p._els.iconColorpicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX),p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),an(this)}},{key:"addEvent",value:function(i){var p,M,T,P,k,z=K()(p=this._registerIconHandler).call(p,this),U=K()(M=this._addIconHandler).call(M,this);this.eventHandler={registerIcon:z,addIcon:U},this.actions=i,this._els.iconColorpicker.on("change",K()(T=this._changeColorHandler).call(T,this)),this._els.registerIconButton.addEventListener("change",z),this._els.addIconButton.addEventListener("click",U),this.colorPickerInputBox.addEventListener(Ee.FOCUS,K()(P=this._onStartEditingInputBox).call(P,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,K()(k=this._onStopEditingInputBox).call(k,this))}},{key:"_removeEvent",value:function(){var i,p;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,K()(i=this._onStartEditingInputBox).call(i,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,K()(p=this._onStopEditingInputBox).call(p,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var i=this;J()(Wr,function(p,M){i.actions.registerDefaultIcons(M,p)})}},{key:"setIconPickerColor",value:function(i){this._els.iconColorpicker.color=i}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(i){i=i||"transparent",this.actions.changeColor(i)}},{key:"_addIconHandler",value:function(i){var p=i.target.closest(".tui-image-editor-button");if(p){var M=p.getAttribute("data-icontype"),T=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(M),this.iconType===M?this.changeStandbyMode():(this.actions.addIcon(M,T),this.iconType=M)}}},{key:"_registerIconHandler",value:function(i){var p;qt||alert("This browser does not support file-api");var M=ce(i.target.files,1),T=M[0];T&&(p=te().createObjectURL(T),this.actions.registerCustomIcon(p,T))}}]),o}(Tn),hv=dv,gv=function(A){var I,o,g,i,p,M=A.locale,T=A.makeSvgIcon;return W()(I=W()(o=W()(g=W()(i=W()(p=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(T(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(p,M.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(i,T(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(g,M.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(o,M.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(I,M.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function pv(A){var I=vv();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function vv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var mv=.7,yv=function(A){yt(o,A);var I=pv(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon,P=i.menuBarPosition,k=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"draw",makeSvgIcon:T,menuBarPosition:P,templateHtml:gv,usageStatistics:k}),p._els={lineSelectButton:p.selector(".tie-draw-line-select-button"),drawColorPicker:new qn(p.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:p.toggleDirection,usageStatistics:p.usageStatistics}),drawRange:new ln({slider:p.selector(".tie-draw-range"),input:p.selector(".tie-draw-range-value")},Yr)},p.type=null,p.color=p._els.drawColorPicker.color,p.width=p._els.drawRange.value,p.colorPickerInputBox=p._els.drawColorPicker.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX),p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),an(this)}},{key:"addEvent",value:function(i){var p,M,T,P,k;this.eventHandler.changeDrawType=K()(p=this._changeDrawType).call(p,this),this.actions=i,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",K()(M=this._changeDrawColor).call(M,this)),this._els.drawRange.on("change",K()(T=this._changeDrawRange).call(T,this)),this.colorPickerInputBox.addEventListener(Ee.FOCUS,K()(P=this._onStartEditingInputBox).call(P,this)),this.colorPickerInputBox.addEventListener(Ee.BLUR,K()(k=this._onStopEditingInputBox).call(k,this))}},{key:"_removeEvent",value:function(){var i,p;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(Ee.FOCUS,K()(i=this._onStartEditingInputBox).call(i,this)),this.colorPickerInputBox.removeEventListener(Ee.BLUR,K()(p=this._onStopEditingInputBox).call(p,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:hr(this.color,mv)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(i){var p=i.target.closest(".tui-image-editor-button");if(p){var M=this.getButtonType(p,["free","line"]);if(this.actions.discardSelection(),this.type===M){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=M,this._els.lineSelectButton.classList.add(M),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(i){this.color=i||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(i){this.width=i,this.type?this.setDrawMode():this.changeStartMode()}}]),o}(Tn),Cv=yv,Iv=d(9886),kc=d.n(Iv),bv=function(A){var I,o,g,i,p,M,T,P,k,z,U,re,oe,pe,ue,ge,Oe=A.locale;return W()(I=W()(o=W()(g=W()(i=W()(p=W()(M=W()(T=W()(P=W()(k=W()(z=W()(U=W()(re=W()(oe=W()(pe=W()(ue=W()(ge=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat(Oe.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(ge,Oe.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(ue,Oe.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(pe,Oe.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(oe,Oe.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call(re,Oe.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(U,Oe.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(z,Oe.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(k,Oe.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(P,Oe.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(T,Oe.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(M,Oe.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(p,Oe.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(i,Oe.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(g,Oe.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(o,Oe.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(I,Oe.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)};function Sv(A){var I=Dv();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Dv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Pc="130px",xv=["add","diff","subtract","multiply","screen","lighten","darken"],Lc=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],Ev={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},Rc=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],jc=["filterBlendColor","filterMultiplyColor","filterTintColor"],Mv=function(A){yt(o,A);var I=Sv(o);function o(g,i){var p,M=i.locale,T=i.menuBarPosition,P=i.usageStatistics;return Y(this,o),p=I.call(this,g,{locale:M,name:"filter",menuBarPosition:T,templateHtml:bv,usageStatistics:P}),p.selectBoxShow=!1,p.checkedMap={},p._makeControlElement(),p}return ne(o,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),an(this)}},{key:"_removeEvent",value:function(){var i=this,p;J()(Lc,function(M){var T=i.selector(".tie-".concat(M)),P=zt(M);T.removeEventListener("change",i.eventHandler[P])}),J()(W()(p=[]).call(p,Rc,jc),function(M){i._els[M].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),vr()(this.colorPickerInputBoxes,function(M){var T,P;M.removeEventListener(Ee.FOCUS,K()(T=i._onStartEditingInputBox).call(T,i)),M.removeEventListener(Ee.BLUR,K()(P=i._onStopEditingInputBox).call(P,i))},this)}},{key:"_destroyToolInstance",value:function(){var i,p=this;J()(W()(i=[]).call(i,Rc,jc),function(M){p._els[M].destroy()})}},{key:"addEvent",value:function(i){var p=this,M,T,P,k=i.applyFilter,z=function(oe){var pe;return K()(pe=p._changeFilterState).call(pe,p,k,oe)},U=function(oe){return function(pe,ue){return p._changeFilterState(k,oe,ue)}};this.eventHandler={changeBlendFilter:z("blend"),blandTypeClick:function(oe){return oe.stopPropagation()}},J()(Lc,function(re){var oe=p.selector(".tie-".concat(re)),pe=zt(re);p.checkedMap[pe]=oe,p.eventHandler[pe]=z(pe),oe.addEventListener("change",p.eventHandler[pe])}),this._els.removewhiteDistanceRange.on("change",U("removeWhite")),this._els.colorfilterThresholdRange.on("change",U("colorFilter")),this._els.pixelateRange.on("change",U("pixelate")),this._els.noiseRange.on("change",U("noise")),this._els.brightnessRange.on("change",U("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",z("multiply")),this._els.filterTintColor.on("change",z("tint")),this._els.tintOpacity.on("change",U("tint")),this._els.filterMultiplyColor.on("changeShow",K()(M=this.colorPickerChangeShow).call(M,this)),this._els.filterTintColor.on("changeShow",K()(T=this.colorPickerChangeShow).call(T,this)),this._els.filterBlendColor.on("changeShow",K()(P=this.colorPickerChangeShow).call(P,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),vr()(this.colorPickerInputBoxes,function(re){var oe,pe;re.addEventListener(Ee.FOCUS,K()(oe=p._onStartEditingInputBox).call(oe,p)),re.addEventListener(Ee.BLUR,K()(pe=p._onStopEditingInputBox).call(pe,p))},this)}},{key:"setFilterState",value:function(i){var p=i.type,M=i.options,T=i.action,P=this._getFilterNameFromOptions(p,M),k=T==="remove";k||this._setFilterState(P,M),this.checkedMap[P].checked=!k}},{key:"initFilterCheckBoxState",value:function(){J()(this.checkedMap,function(i){i.checked=!1},this)}},{key:"_setFilterState",value:function(i,p){i==="colorFilter"?this._els.colorfilterThresholdRange.value=p.distance:i==="removeWhite"?this._els.removewhiteDistanceRange.value=p.distance:i==="pixelate"?this._els.pixelateRange.value=p.blocksize:i==="brightness"?this._els.brightnessRange.value=p.brightness:i==="noise"?this._els.noiseRange.value=p.noise:i==="tint"?(this._els.tintOpacity.value=p.alpha,this._els.filterTintColor.color=p.color):i==="blend"?this._els.filterBlendColor.color=p.color:i==="multiply"&&(this._els.filterMultiplyColor.color=p.color)}},{key:"_getFilterNameFromOptions",value:function(i,p){var M=i;return i==="removeColor"?M=kc()(p.useAlpha)?"removeWhite":"colorFilter":i==="blendColor"&&(M={add:"blend",multiply:"multiply",tint:"tint"}[p.mode]),M}},{key:"_changeFilterState",value:function(i,p){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,T=this.checkedMap[p].checked,P=Ev[p],k=this.checkedMap[p].closest(".tui-image-editor-checkbox-group");k&&(T?k.classList.remove("tui-image-editor-disabled"):k.classList.add("tui-image-editor-disabled")),i(T,P,this._getFilterOption(p),!M)}},{key:"_getFilterOption",value:function(i){var p={};switch(i){case"removeWhite":p.color="#FFFFFF",p.useAlpha=!1,p.distance=Kn()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":p.color="#FFFFFF",p.distance=Kn()(this._els.colorfilterThresholdRange.value);break;case"pixelate":p.blocksize=ke(this._els.pixelateRange.value);break;case"noise":p.noise=ke(this._els.noiseRange.value);break;case"brightness":p.brightness=Kn()(this._els.brightnessRange.value);break;case"blend":p.mode="add",p.color=this._els.filterBlendColor.color,p.mode=this._els.blendType.value;break;case"multiply":p.mode="multiply",p.color=this._els.filterMultiplyColor.color;break;case"tint":p.mode="tint",p.color=this._els.filterTintColor.color,p.alpha=this._els.tintOpacity.value;break;case"blur":p.blur=this._els.blurRange.value;break;default:break}return p}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new ln({slider:this.selector(".tie-removewhite-distance-range")},_n.removewhiteDistanceRange),brightnessRange:new ln({slider:this.selector(".tie-brightness-range")},_n.brightnessRange),noiseRange:new ln({slider:this.selector(".tie-noise-range")},_n.noiseRange),pixelateRange:new ln({slider:this.selector(".tie-pixelate-range")},_n.pixelateRange),colorfilterThresholdRange:new ln({slider:this.selector(".tie-colorfilter-threshold-range")},_n.colorfilterThresholdRange),filterTintColor:new qn(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new qn(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new qn(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:_n.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(Dt.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(i){var p=document.createElement("div"),M=document.createElement("label"),T=document.createElement("div");return T.id="tie-filter-tint-opacity",M.innerHTML="Opacity",p.appendChild(M),p.appendChild(T),i.appendChild(p),i.style.height=Pc,new ln({slider:T},_n.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(i){var p=document.createElement("div"),M=document.createElement("select"),T=document.createElement("ul");return p.className="tui-image-editor-selectlist-wrap",T.className="tui-image-editor-selectlist",p.appendChild(M),p.appendChild(T),this._makeSelectOptionList(M),i.appendChild(p),i.style.height=Pc,this._drawSelectOptionList(M,T),this._pickerWithSelectboxForAddEvent(M,T),M}},{key:"_drawSelectOptionList",value:function(i,p){var M=i.querySelectorAll("option");J()(M,function(T){var P=document.createElement("li");P.innerHTML=T.innerHTML,P.setAttribute("data-item",T.value),p.appendChild(P)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(i,p){var M=this;p.addEventListener("click",function(T){var P=T.target.getAttribute("data-item"),k=document.createEvent("HTMLEvents");i.querySelector('[value="'.concat(P,'"]')).selected=!0,k.initEvent("change",!0,!0),i.dispatchEvent(k),M.selectBoxShow=!1,p.style.display="none"}),i.addEventListener("mousedown",function(T){T.preventDefault(),M.selectBoxShow=!M.selectBoxShow,p.style.display=M.selectBoxShow?"block":"none",p.setAttribute("data-selectitem",i.value),p.querySelector("[data-item='".concat(i.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(i){J()(xv,function(p){var M=document.createElement("option");M.setAttribute("value",p),M.innerHTML=p.replace(/^[a-z]/,function(T){return T.toUpperCase()}),i.appendChild(M)})}}]),o}(Tn),_v=Mv,wv=d(4383),Tv=d.n(wv),Av=function(){function A(I,o){var g=o.name;Y(this,A),this.name=g,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),I.appendChild(this.panelElement)}return ne(A,[{key:"_makePanelElement",value:function(){var o=document.createElement("div");return o.className="tie-panel-".concat(this.name),o}},{key:"_makeListElement",value:function(){var o=document.createElement("ol");return o.className="".concat(this.name,"-list"),o}},{key:"makeListItemElement",value:function(o){var g=document.createElement("li");return g.innerHTML=o,g.className="".concat(this.name,"-item"),g.setAttribute("data-index",this.items.length),g}},{key:"pushListItemElement",value:function(o){this.listElement.appendChild(o),this.listElement.scrollTop+=o.offsetHeight,this.items.push(o)}},{key:"deleteListItemElement",value:function(o,g){for(var i=this.items,p=o;p<g;p+=1)this.listElement.removeChild(i[p]);N()(i).call(i,o,g-o+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(o,g){this.items[o]&&this.items[o].classList.add(g)}},{key:"removeClass",value:function(o,g){this.items[o]&&this.items[o].classList.remove(g)}},{key:"toggleClass",value:function(o,g){this.items[o]&&this.items[o].classList.toggle(g)}}]),A}(),Ov=Av,Nv=function(A){var I,o,g,i=A.locale,p=A.makeSvgIcon,M=A.name,T=A.detail;return W()(I=W()(o=W()(g=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(p(["normal","active"],"history-".concat(M.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(g,i.localize(M),`
            `)).call(o,T?"(".concat(i.localize(T),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(I,p(["normal"],"history-check",!0),`
        </div>
    </div>
`)};function kv(A){var I=Pv();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Pv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Lv="history-item",Fc="selected-item",Bc="disabled-item",Rv=function(A){yt(o,A);var I=kv(o);function o(g,i){var p,M=i.locale,T=i.makeSvgIcon;return Y(this,o),p=I.call(this,g,{name:"history"}),g.classList.add("enabled"),p.locale=M,p.makeSvgIcon=T,p._eventHandler={},p._historyIndex=p.getListLength(),p}return ne(o,[{key:"add",value:function(i){var p=i.name,M=i.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var T=Nv({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:p,detail:M}),P=this.makeListItemElement(T);this.pushListItemElement(P),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var i=this;this._eventHandler.history=function(p){return i._clickHistoryItem(p)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(i){var p=i.target,M=p.closest(".".concat(Lv));if(M){var T=Tv()(M.getAttribute("data-index"),10);if(T!==this._historyIndex){var P=Math.abs(T-this._historyIndex);T<this._historyIndex?this._actions.undo(P):this._actions.redo(P)}}}},{key:"_selectItem",value:function(i){for(var p=0;p<this.getListLength();p+=1)this.removeClass(p,Fc),this.removeClass(p,Bc),p>i&&this.addClass(p,Bc);this.addClass(i,Fc)}},{key:"destroy",value:function(){this.removeEvent(),an(this)}},{key:"addEvent",value:function(i){this._actions=i,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),o}(Ov),jv=Rv,Fv=function(){function A(I){Y(this,A),this._locale=I}return ne(A,[{key:"localize",value:function(o){return this._locale[o]||o}}]),A}(),Bv=Fv,zv={Shape:Ap,Crop:Lp,Resize:zp,Flip:Gp,Rotate:Kp,Text:iv,Mask:lv,Icon:hv,Draw:Cv,Filter:_v},Hv="1300",zc="history",Uv="tie-panel-history",mr="on",yr={ZOOM_IN:"zoomIn",HAND:"hand"},Hc=function(){function A(I,o,g){Y(this,A),this.options=this._initializeOption(o),this._actions=g,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new Bv(this.options.locale),this.theme=new vp(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(I),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return ne(A,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",an(this)}},{key:"setUiDefaultSelectionStyle",value:function(o){return Z()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},o)}},{key:"resizeEditor",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=o.uiSize,i=o.imageSize,p=i===void 0?this.imageSize:i;p!==this.imageSize&&(this.imageSize=p),g&&this._setUiSize(g);var M=this._getCanvasMaxDimension(),T=M.width,P=M.height,k=this._editorElement.style,z=this.options.menuBarPosition;k.height="".concat(P,"px"),k.width="".concat(T,"px"),this._setEditorPosition(z),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var U=this._selectedElement.classList;z==="top"&&this._selectedElement.offsetWidth<Hv?U.add("tui-image-editor-top-optimization"):U.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(o){var g=this._buttonElements[o].classList;g.toggle(mr),o===yr.ZOOM_IN?this._buttonElements[yr.HAND].classList.remove(mr):this._buttonElements[yr.ZOOM_IN].classList.remove(mr)}},{key:"offZoomInButtonStatus",value:function(){var o=this._buttonElements[yr.ZOOM_IN].classList;o.remove(mr)}},{key:"changeHandButtonStatus",value:function(o){var g=this._buttonElements[yr.HAND].classList;g[o?"add":"remove"](mr)}},{key:"changeHelpButtonEnabled",value:function(o,g){var i=this._buttonElements[o].classList;i[g?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(o){return Z()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},o)}},{key:"_setUiSize",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,g=this._selectedElement.style;g.width=o.width,g.height=o.height}},{key:"_makeSubMenu",value:function(){var o=this;J()(this.options.menu,function(g){var i,p=zv[g.replace(/^[a-z]/,function(M){return M.toUpperCase()})];o._makeMenuElement(g),o._buttonElements[g]=o._menuBarElement.querySelector(".tie-btn-".concat(g)),o[g]=new p(o._subMenuElement,{locale:o._locale,makeSvgIcon:K()(i=o.theme.makeMenSvgIconSet).call(i,o.theme),menuBarPosition:o.options.menuBarPosition,usageStatistics:o.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var o,g,i;this.on(Ee.EXECUTE_COMMAND,K()(o=this._addHistory).call(o,this)),this.on(Ee.AFTER_UNDO,K()(g=this._selectPrevHistory).call(g,this)),this.on(Ee.AFTER_REDO,K()(i=this._selectNextHistory).call(i,this))}},{key:"_attachZoomEvent",value:function(){var o=this;this.on(Ee.HAND_STARTED,function(){o.offZoomInButtonStatus(),o.changeHandButtonStatus(!0)}),this.on(Ee.HAND_STOPPED,function(){return o.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(o){var g,i;o.nodeType?i=o:i=document.querySelector(o);var p=gr(i);i.classList.add("tui-image-editor-container"),i.innerHTML=up({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+cp({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=i,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=p(".tui-image-editor-main"),this._editorElementWrap=p(".tui-image-editor-wrap"),this._editorElement=p(".tui-image-editor"),this._helpMenuBarElement=p(".tui-image-editor-help-menu"),this._menuBarElement=p(".tui-image-editor-menu"),this._subMenuElement=p(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new jv(this._buttonElements[zc],{locale:this._locale,makeSvgIcon:K()(g=this.theme.makeMenSvgIconSet).call(g,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var o=this;J()(vt,function(g){o.changeHelpButtonEnabled(g,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var o;return W()(o=[]).call(o,B(vt),[""],B(Nt),[""],B(Ht))}},{key:"_addHelpMenus",value:function(){var o=this,g=this._makeHelpMenuWithPartition();J()(g,function(i){i?(o._makeMenuElement(i,["normal","disabled","hover"],"help"),o._buttonElements[i]=o._helpMenuBarElement.querySelector(".tie-btn-".concat(i))):o._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var o=document.createElement("li"),g=document.createElement("div");o.className=Qr("item"),g.className=Qr("icpartition"),o.appendChild(g),this._helpMenuBarElement.appendChild(o)}},{key:"_makeMenuElement",value:function(o){var g,i,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",T=document.createElement("li"),P=this.theme.makeMenSvgIconSet(p,o);this._addTooltipAttribute(T,o),T.className=W()(g=W()(i="tie-btn-".concat(o," ")).call(i,Qr("item")," ")).call(g,M),T.innerHTML=P,M==="normal"?this._menuBarElement.appendChild(T):this._helpMenuBarElement.appendChild(T)}},{key:"_addHelpActionEvent",value:function(){var o=this;J()(we,function(g){o.eventHandler[g]=function(i){return o._actions.main[g](i)},o._buttonElements[g].addEventListener("click",o.eventHandler[g])})}},{key:"_removeHelpActionEvent",value:function(){var o=this;J()(we,function(g){o._buttonElements[g].removeEventListener("click",o.eventHandler[g])})}},{key:"_addHistory",value:function(o){if(!Qg(o)){var g=typeof o=="string"?{name:o}:Kg(o);this._historyMenu.add(g)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(o){var g=o.target,i=g.closest(".".concat(Uv));if(!i){var p=this._buttonElements[zc].classList;p.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(o,g){o.setAttribute("tooltip-content",this._locale.localize(g.replace(/^[a-z]/g,function(i){return i.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var o=this;this.eventHandler.download=function(){return o._actions.main.download()},J()(this._buttonElements.download,function(g){g.addEventListener("click",o.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var o=this;J()(this._buttonElements.download,function(g){g.removeEventListener("click",o.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var o=this;this.eventHandler.loadImage=function(g){return o._actions.main.load(g.target.files[0])},J()(this._buttonElements.load,function(g){g.addEventListener("change",o.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var o=this;J()(this._buttonElements.load,function(g){g.removeEventListener("change",o.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(o){var g=this;this.eventHandler[o]=function(){return g.changeMenu(o)},this._buttonElements[o].addEventListener("click",this.eventHandler[o])}},{key:"_addSubMenuEvent",value:function(o){var g=this;this[o].addEvent(this._actions[o]),this[o].on(Ee.INPUT_BOX_EDITING_STARTED,function(){return g.fire(Ee.INPUT_BOX_EDITING_STARTED)}),this[o].on(Ee.INPUT_BOX_EDITING_STOPPED,function(){return g.fire(Ee.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var o=this;J()(this.options.menu,function(g){o._addMainMenuEvent(g),o._addSubMenuEvent(g)})}},{key:"_removeMainMenuEvent",value:function(){var o=this;J()(this.options.menu,function(g){o._buttonElements[g].removeEventListener("click",o.eventHandler[g]),o[g].off(Ee.INPUT_BOX_EDITING_STARTED),o[g].off(Ee.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var o=this;J()(this.options.menu,function(g){o[g].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var o=this,g=this._getLoadImage();g.path&&this._actions.main.initLoadImage(g.path,g.name).then(function(){o.activeMenuEvent()}),this._addLoadEvent();var i=document.createElement("div");i.className=Qr("grid-visual");var p=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;i.innerHTML=p,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(i)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(o){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(o,g,i),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(o,g,i){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),i&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===o&&g?this.submenu=null:(this._buttonElements[o].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(o)),this.submenu=o,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(o)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var o=this._editorContainerElement.style,g=o.maxWidth,i=o.maxHeight,p=Kn()(g),M=Kn()(i);return{width:p,height:M}}},{key:"_setEditorPosition",value:function(o){var g=this._getCanvasMaxDimension(),i=g.width,p=g.height,M=this._editorElement.style,T=0,P=0;this.submenu&&(o==="bottom"?p>this._editorElementWrap.scrollHeight-150?T=(p-this._editorElementWrap.scrollHeight)/2:T=150/2*-1:o==="top"?p>this._editorElementWrap.offsetHeight-150?T=150/2-(p-(this._editorElementWrap.offsetHeight-150))/2:T=150/2:o==="left"?i>this._editorElementWrap.offsetWidth-248?P=248/2-(i-(this._editorElementWrap.offsetWidth-248))/2:P=248/2:o==="right"&&(i>this._editorElementWrap.scrollWidth-248?P=(i-this._editorElementWrap.scrollWidth)/2:P=248/2*-1)),M.top="".concat(T,"px"),M.left="".concat(P,"px")}}]),A}();ve().mixin(Hc);var Vv=Hc,Wv=d(381),Pi=d.n(Wv),Uc=function(){function A(){Y(this,A),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return ne(A,[{key:"imageToSVG",value:function(o,g,i){var p=this;i=this.checkoptions(i),this.loadImage(o,function(M){g(p.imagedataToSVG(p.getImgdata(M),i))},i)}},{key:"imagedataToSVG",value:function(o,g){g=this.checkoptions(g);var i=this.imagedataToTracedata(o,g);return this.getsvgstring(i,g)}},{key:"imageToTracedata",value:function(o,g,i){var p=this;i=this.checkoptions(i),this.loadImage(o,function(M){g(p.imagedataToTracedata(p.getImgdata(M),i))},i)}},{key:"imagedataToTracedata",value:function(o,g){g=this.checkoptions(g);var i=this.colorquantization(o,g),p;if(g.layering===0){p={layers:[],palette:i.palette,width:i.array[0].length-2,height:i.array.length-2};for(var M=0;M<i.palette.length;M+=1){var T=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(i,M),g.pathomit),g),g.ltres,g.qtres);p.layers.push(T)}}else{var P=this.layering(i);g.layercontainerid&&this.drawLayers(P,this.specpalette,g.scale,g.layercontainerid);var k=this.batchpathscan(P,g.pathomit),z=this.batchinternodes(k,g);p={layers:this.batchtracelayers(z,g.ltres,g.qtres),palette:i.palette,width:o.width,height:o.height}}return p}},{key:"checkoptions",value:function(o){o=o||{},typeof o=="string"&&(o=o.toLowerCase(),this.optionpresets[o]?o=this.optionpresets[o]:o={});for(var g=De()(this.optionpresets.default),i=0;i<g.length;i+=1)o.hasOwnProperty(g[i])||(o[g[i]]=this.optionpresets.default[g[i]]);return o}},{key:"colorquantization",value:function(o,g){var i=[],p=0,M,T,P,k=[],z=o.width*o.height,U,re,oe,pe,ue;for(re=0;re<o.height+2;re+=1)for(i[re]=[],U=0;U<o.width+2;U+=1)i[re][U]=-1;for(g.pal?ue=g.pal:g.colorsampling===0?ue=this.generatepalette(g.numberofcolors):g.colorsampling===1?ue=this.samplepalette(g.numberofcolors,o):ue=this.samplepalette2(g.numberofcolors,o),g.blurradius>0&&(o=this.blur(o,g.blurradius,g.blurdelta)),pe=0;pe<g.colorquantcycles;pe+=1){if(pe>0)for(oe=0;oe<ue.length;oe+=1)k[oe].n>0&&(ue[oe]={r:Math.floor(k[oe].r/k[oe].n),g:Math.floor(k[oe].g/k[oe].n),b:Math.floor(k[oe].b/k[oe].n),a:Math.floor(k[oe].a/k[oe].n)}),k[oe].n/z<g.mincolorratio&&pe<g.colorquantcycles-1&&(ue[oe]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(U=0;U<ue.length;U+=1)k[U]={r:0,g:0,b:0,a:0,n:0};for(re=0;re<o.height;re+=1)for(U=0;U<o.width;U+=1){for(p=(re*o.width+U)*4,P=0,T=1024,oe=0;oe<ue.length;oe+=1)M=Math.abs(ue[oe].r-o.data[p])+Math.abs(ue[oe].g-o.data[p+1])+Math.abs(ue[oe].b-o.data[p+2])+Math.abs(ue[oe].a-o.data[p+3]),M<T&&(T=M,P=oe);k[P].r+=o.data[p],k[P].g+=o.data[p+1],k[P].b+=o.data[p+2],k[P].a+=o.data[p+3],k[P].n+=1,i[re+1][U+1]=P}}return{array:i,palette:ue}}},{key:"samplepalette",value:function(o,g){for(var i,p=[],M=0;M<o;M+=1)i=Math.floor(Math.random()*g.data.length/4)*4,p.push({r:g.data[i],g:g.data[i+1],b:g.data[i+2],a:g.data[i+3]});return p}},{key:"samplepalette2",value:function(o,g){for(var i,p=[],M=Math.ceil(Math.sqrt(o)),T=Math.ceil(o/M),P=g.width/(M+1),k=g.height/(T+1),z=0;z<T;z+=1)for(var U=0;U<M&&p.length!==o;U+=1)i=Math.floor((z+1)*k*g.width+(U+1)*P)*4,p.push({r:g.data[i],g:g.data[i+1],b:g.data[i+2],a:g.data[i+3]});return p}},{key:"generatepalette",value:function(o){var g=[],i,p,M;if(o<8)for(var T=Math.floor(255/(o-1)),P=0;P<o;P+=1)g.push({r:P*T,g:P*T,b:P*T,a:255});else{var k=Math.floor(Math.pow(o,.3333333333333333)),z=Math.floor(255/(k-1)),U=o-k*k*k;for(i=0;i<k;i+=1)for(p=0;p<k;p+=1)for(M=0;M<k;M+=1)g.push({r:i*z,g:p*z,b:M*z,a:255});for(i=0;i<U;i+=1)g.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return g}},{key:"layering",value:function(o){var g=[],i=0,p=o.array.length,M=o.array[0].length,T,P,k,z,U,re,oe,pe,ue,ge,Oe;for(Oe=0;Oe<o.palette.length;Oe+=1)for(g[Oe]=[],ge=0;ge<p;ge+=1)for(g[Oe][ge]=[],ue=0;ue<M;ue+=1)g[Oe][ge][ue]=0;for(ge=1;ge<p-1;ge+=1)for(ue=1;ue<M-1;ue+=1)i=o.array[ge][ue],T=o.array[ge-1][ue-1]===i?1:0,P=o.array[ge-1][ue]===i?1:0,k=o.array[ge-1][ue+1]===i?1:0,z=o.array[ge][ue-1]===i?1:0,U=o.array[ge][ue+1]===i?1:0,re=o.array[ge+1][ue-1]===i?1:0,oe=o.array[ge+1][ue]===i?1:0,pe=o.array[ge+1][ue+1]===i?1:0,g[i][ge+1][ue+1]=1+U*2+pe*4+oe*8,z||(g[i][ge+1][ue]=2+oe*4+re*8),P||(g[i][ge][ue+1]=0+k*2+U*4+8),T||(g[i][ge][ue]=0+P*2+4+z*8);return g}},{key:"layeringstep",value:function(o,g){var i=[],p=o.array.length,M=o.array[0].length,T,P;for(P=0;P<p;P+=1)for(i[P]=[],T=0;T<M;T+=1)i[P][T]=0;for(P=1;P<p;P+=1)for(T=1;T<M;T+=1)i[P][T]=(o.array[P-1][T-1]===g?1:0)+(o.array[P-1][T]===g?2:0)+(o.array[P][T-1]===g?8:0)+(o.array[P][T]===g?4:0);return i}},{key:"pathscan",value:function(o,g){for(var i=[],p=0,M=0,T=0,P=0,k=o[0].length,z=o.length,U=0,re=!0,oe=!1,pe,ue=0;ue<z;ue+=1)for(var ge=0;ge<k;ge+=1)if(o[ue][ge]===4||o[ue][ge]===11)for(T=ge,P=ue,i[p]={},i[p].points=[],i[p].boundingbox=[T,P,T,P],i[p].holechildren=[],re=!1,M=0,oe=o[ue][ge]===11,U=1;!re;){if(i[p].points[M]={},i[p].points[M].x=T-1,i[p].points[M].y=P-1,i[p].points[M].t=o[P][T],T-1<i[p].boundingbox[0]&&(i[p].boundingbox[0]=T-1),T-1>i[p].boundingbox[2]&&(i[p].boundingbox[2]=T-1),P-1<i[p].boundingbox[1]&&(i[p].boundingbox[1]=P-1),P-1>i[p].boundingbox[3]&&(i[p].boundingbox[3]=P-1),pe=this.pathscan_combined_lookup[o[P][T]][U],o[P][T]=pe[0],U=pe[1],T+=pe[2],P+=pe[3],T-1===i[p].points[0].x&&P-1===i[p].points[0].y)if(re=!0,i[p].points.length<g)i.pop();else{if(i[p].isholepath=!!oe,oe){for(var Oe=0,Je=[-1,-1,k+1,z+1],Qe=0;Qe<p;Qe++)!i[Qe].isholepath&&this.boundingboxincludes(i[Qe].boundingbox,i[p].boundingbox)&&this.boundingboxincludes(Je,i[Qe].boundingbox)&&(Oe=Qe,Je=i[Qe].boundingbox);i[Oe].holechildren.push(p)}p+=1}M+=1}return i}},{key:"boundingboxincludes",value:function(o,g){return o[0]<g[0]&&o[1]<g[1]&&o[2]>g[2]&&o[3]>g[3]}},{key:"batchpathscan",value:function(o,g){var i=[];for(var p in o)o.hasOwnProperty(p)&&(i[p]=this.pathscan(o[p],g));return i}},{key:"internodes",value:function(o,g){var i=[],p=0,M=0,T=0,P=0,k=0,z,U;for(z=0;z<o.length;z+=1)for(i[z]={},i[z].points=[],i[z].boundingbox=o[z].boundingbox,i[z].holechildren=o[z].holechildren,i[z].isholepath=o[z].isholepath,p=o[z].points.length,U=0;U<p;U+=1)M=(U+1)%p,T=(U+2)%p,P=(U-1+p)%p,k=(U-2+p)%p,g.rightangleenhance&&this.testrightangle(o[z],k,P,U,M,T)&&(i[z].points.length>0&&(i[z].points[i[z].points.length-1].linesegment=this.getdirection(i[z].points[i[z].points.length-1].x,i[z].points[i[z].points.length-1].y,o[z].points[U].x,o[z].points[U].y)),i[z].points.push({x:o[z].points[U].x,y:o[z].points[U].y,linesegment:this.getdirection(o[z].points[U].x,o[z].points[U].y,(o[z].points[U].x+o[z].points[M].x)/2,(o[z].points[U].y+o[z].points[M].y)/2)})),i[z].points.push({x:(o[z].points[U].x+o[z].points[M].x)/2,y:(o[z].points[U].y+o[z].points[M].y)/2,linesegment:this.getdirection((o[z].points[U].x+o[z].points[M].x)/2,(o[z].points[U].y+o[z].points[M].y)/2,(o[z].points[M].x+o[z].points[T].x)/2,(o[z].points[M].y+o[z].points[T].y)/2)});return i}},{key:"testrightangle",value:function(o,g,i,p,M,T){return o.points[p].x===o.points[g].x&&o.points[p].x===o.points[i].x&&o.points[p].y===o.points[M].y&&o.points[p].y===o.points[T].y||o.points[p].y===o.points[g].y&&o.points[p].y===o.points[i].y&&o.points[p].x===o.points[M].x&&o.points[p].x===o.points[T].x}},{key:"getdirection",value:function(o,g,i,p){var M=8;return o<i?g<p?M=1:g>p?M=7:M=0:o>i?g<p?M=3:g>p?M=5:M=4:g<p?M=2:g>p?M=6:M=8,M}},{key:"batchinternodes",value:function(o,g){var i=[];for(var p in o)o.hasOwnProperty(p)&&(i[p]=this.internodes(o[p],g));return i}},{key:"tracepath",value:function(o,g,i){var p=0,M,T,P,k={};for(k.segments=[],k.boundingbox=o.boundingbox,k.holechildren=o.holechildren,k.isholepath=o.isholepath;p<o.points.length;){var z;for(M=o.points[p].linesegment,T=-1,P=p+1;(o.points[P].linesegment===M||o.points[P].linesegment===T||T===-1)&&P<o.points.length-1;)o.points[P].linesegment!==M&&T===-1&&(T=o.points[P].linesegment),P+=1;P===o.points.length-1&&(P=0),k.segments=W()(z=k.segments).call(z,this.fitseq(o,g,i,p,P)),P>0?p=P:p=o.points.length}return k}},{key:"fitseq",value:function(o,g,i,p,M){var T;if(M>o.points.length||M<0)return[];var P=p,k=0,z=!0,U,re,oe,pe=M-p;pe<0&&(pe+=o.points.length);for(var ue=(o.points[M].x-o.points[p].x)/pe,ge=(o.points[M].y-o.points[p].y)/pe,Oe=(p+1)%o.points.length,Je;Oe!=M;)Je=Oe-p,Je<0&&(Je+=o.points.length),U=o.points[p].x+ue*Je,re=o.points[p].y+ge*Je,oe=(o.points[Oe].x-U)*(o.points[Oe].x-U)+(o.points[Oe].y-re)*(o.points[Oe].y-re),oe>g&&(z=!1),oe>k&&(P=Oe,k=oe),Oe=(Oe+1)%o.points.length;if(z)return[{type:"L",x1:o.points[p].x,y1:o.points[p].y,x2:o.points[M].x,y2:o.points[M].y}];var Qe=P;z=!0,k=0;var Ke=(Qe-p)/pe,Re=(1-Ke)*(1-Ke),dt=2*(1-Ke)*Ke,Gt=Ke*Ke,nn=(Re*o.points[p].x+Gt*o.points[M].x-o.points[Qe].x)/-dt,pn=(Re*o.points[p].y+Gt*o.points[M].y-o.points[Qe].y)/-dt;for(Oe=p+1;Oe!=M;)Ke=(Oe-p)/pe,Re=(1-Ke)*(1-Ke),dt=2*(1-Ke)*Ke,Gt=Ke*Ke,U=Re*o.points[p].x+dt*nn+Gt*o.points[M].x,re=Re*o.points[p].y+dt*pn+Gt*o.points[M].y,oe=(o.points[Oe].x-U)*(o.points[Oe].x-U)+(o.points[Oe].y-re)*(o.points[Oe].y-re),oe>i&&(z=!1),oe>k&&(P=Oe,k=oe),Oe=(Oe+1)%o.points.length;if(z)return[{type:"Q",x1:o.points[p].x,y1:o.points[p].y,x2:nn,y2:pn,x3:o.points[M].x,y3:o.points[M].y}];var Lt=Qe;return W()(T=this.fitseq(o,g,i,p,Lt)).call(T,this.fitseq(o,g,i,Lt,M))}},{key:"batchtracepaths",value:function(o,g,i){var p=[];for(var M in o)o.hasOwnProperty(M)&&p.push(this.tracepath(o[M],g,i));return p}},{key:"batchtracelayers",value:function(o,g,i){var p=[];for(var M in o)o.hasOwnProperty(M)&&(p[M]=this.batchtracepaths(o[M],g,i));return p}},{key:"roundtodec",value:function(o,g){return Number(o.toFixed(g))}},{key:"svgpathstring",value:function(o,g,i,p){var M,T,P=o.layers[g],k=P[i],z="",U;if(p.linefilter&&k.segments.length<3)return z;if(z=W()(M="<path ".concat(p.desc?W()(T='desc="l '.concat(g," p ")).call(T,i,'" '):"")).call(M,this.tosvgcolorstr(o.palette[g],p),'d="'),p.roundcoords===-1){var re;for(z+=W()(re="M ".concat(k.segments[0].x1*p.scale," ")).call(re,k.segments[0].y1*p.scale," "),U=0;U<k.segments.length;U++){var oe,pe;if(z+=W()(oe=W()(pe="".concat(k.segments[U].type," ")).call(pe,k.segments[U].x2*p.scale," ")).call(oe,k.segments[U].y2*p.scale," "),k.segments[U].hasOwnProperty("x3")){var ue;z+=W()(ue="".concat(k.segments[U].x3*p.scale," ")).call(ue,k.segments[U].y3*p.scale," ")}}z+="Z "}else{var ge;for(z+=W()(ge="M ".concat(this.roundtodec(k.segments[0].x1*p.scale,p.roundcoords)," ")).call(ge,this.roundtodec(k.segments[0].y1*p.scale,p.roundcoords)," "),U=0;U<k.segments.length;U++){var Oe,Je;if(z+=W()(Oe=W()(Je="".concat(k.segments[U].type," ")).call(Je,this.roundtodec(k.segments[U].x2*p.scale,p.roundcoords)," ")).call(Oe,this.roundtodec(k.segments[U].y2*p.scale,p.roundcoords)," "),k.segments[U].hasOwnProperty("x3")){var Qe;z+=W()(Qe="".concat(this.roundtodec(k.segments[U].x3*p.scale,p.roundcoords)," ")).call(Qe,this.roundtodec(k.segments[U].y3*p.scale,p.roundcoords)," ")}}z+="Z "}for(var Ke=0;Ke<k.holechildren.length;Ke++){var Re=P[k.holechildren[Ke]];if(p.roundcoords===-1){if(Re.segments[Re.segments.length-1].hasOwnProperty("x3")){var dt;z+=W()(dt="M ".concat(Re.segments[Re.segments.length-1].x3*p.scale," ")).call(dt,Re.segments[Re.segments.length-1].y3*p.scale," ")}else{var Gt;z+=W()(Gt="M ".concat(Re.segments[Re.segments.length-1].x2*p.scale," ")).call(Gt,Re.segments[Re.segments.length-1].y2*p.scale," ")}for(U=Re.segments.length-1;U>=0;U--){var nn;if(z+="".concat(Re.segments[U].type," "),Re.segments[U].hasOwnProperty("x3")){var pn;z+=W()(pn="".concat(Re.segments[U].x2*p.scale," ")).call(pn,Re.segments[U].y2*p.scale," ")}z+=W()(nn="".concat(Re.segments[U].x1*p.scale," ")).call(nn,Re.segments[U].y1*p.scale," ")}}else{if(Re.segments[Re.segments.length-1].hasOwnProperty("x3")){var Lt;z+=W()(Lt="M ".concat(this.roundtodec(Re.segments[Re.segments.length-1].x3*p.scale)," ")).call(Lt,this.roundtodec(Re.segments[Re.segments.length-1].y3*p.scale)," ")}else{var ti;z+=W()(ti="M ".concat(this.roundtodec(Re.segments[Re.segments.length-1].x2*p.scale)," ")).call(ti,this.roundtodec(Re.segments[Re.segments.length-1].y2*p.scale)," ")}for(U=Re.segments.length-1;U>=0;U--){var ni;if(z+="".concat(Re.segments[U].type," "),Re.segments[U].hasOwnProperty("x3")){var en;z+=W()(en="".concat(this.roundtodec(Re.segments[U].x2*p.scale)," ")).call(en,this.roundtodec(Re.segments[U].y2*p.scale)," ")}z+=W()(ni="".concat(this.roundtodec(Re.segments[U].x1*p.scale)," ")).call(ni,this.roundtodec(Re.segments[U].y1*p.scale)," ")}}z+="Z "}if(z+='" />',p.lcpr||p.qcpr){for(U=0;U<k.segments.length;U++){if(k.segments[U].hasOwnProperty("x3")&&p.qcpr){var ao,lo,co,uo,fo,ho,go,po,vo,mo,yo,Co,Io,bo;z+=W()(ao=W()(lo=W()(co='<circle cx="'.concat(k.segments[U].x2*p.scale,'" cy="')).call(co,k.segments[U].y2*p.scale,'" r="')).call(lo,p.qcpr,'" fill="cyan" stroke-width="')).call(ao,p.qcpr*.2,'" stroke="black" />'),z+=W()(uo=W()(fo=W()(ho='<circle cx="'.concat(k.segments[U].x3*p.scale,'" cy="')).call(ho,k.segments[U].y3*p.scale,'" r="')).call(fo,p.qcpr,'" fill="white" stroke-width="')).call(uo,p.qcpr*.2,'" stroke="black" />'),z+=W()(go=W()(po=W()(vo=W()(mo='<line x1="'.concat(k.segments[U].x1*p.scale,'" y1="')).call(mo,k.segments[U].y1*p.scale,'" x2="')).call(vo,k.segments[U].x2*p.scale,'" y2="')).call(po,k.segments[U].y2*p.scale,'" stroke-width="')).call(go,p.qcpr*.2,'" stroke="cyan" />'),z+=W()(yo=W()(Co=W()(Io=W()(bo='<line x1="'.concat(k.segments[U].x2*p.scale,'" y1="')).call(bo,k.segments[U].y2*p.scale,'" x2="')).call(Io,k.segments[U].x3*p.scale,'" y2="')).call(Co,k.segments[U].y3*p.scale,'" stroke-width="')).call(yo,p.qcpr*.2,'" stroke="cyan" />')}if(!k.segments[U].hasOwnProperty("x3")&&p.lcpr){var So,Do,xo;z+=W()(So=W()(Do=W()(xo='<circle cx="'.concat(k.segments[U].x2*p.scale,'" cy="')).call(xo,k.segments[U].y2*p.scale,'" r="')).call(Do,p.lcpr,'" fill="white" stroke-width="')).call(So,p.lcpr*.2,'" stroke="black" />')}}for(var Ke=0;Ke<k.holechildren.length;Ke++){var Re=P[k.holechildren[Ke]];for(U=0;U<Re.segments.length;U++){if(Re.segments[U].hasOwnProperty("x3")&&p.qcpr){var Eo,vn,fi,Mu,_u,wu,Tu,Au,Ou,Nu,ku,Pu,Lu,Ru;z+=W()(Eo=W()(vn=W()(fi='<circle cx="'.concat(Re.segments[U].x2*p.scale,'" cy="')).call(fi,Re.segments[U].y2*p.scale,'" r="')).call(vn,p.qcpr,'" fill="cyan" stroke-width="')).call(Eo,p.qcpr*.2,'" stroke="black" />'),z+=W()(Mu=W()(_u=W()(wu='<circle cx="'.concat(Re.segments[U].x3*p.scale,'" cy="')).call(wu,Re.segments[U].y3*p.scale,'" r="')).call(_u,p.qcpr,'" fill="white" stroke-width="')).call(Mu,p.qcpr*.2,'" stroke="black" />'),z+=W()(Tu=W()(Au=W()(Ou=W()(Nu='<line x1="'.concat(Re.segments[U].x1*p.scale,'" y1="')).call(Nu,Re.segments[U].y1*p.scale,'" x2="')).call(Ou,Re.segments[U].x2*p.scale,'" y2="')).call(Au,Re.segments[U].y2*p.scale,'" stroke-width="')).call(Tu,p.qcpr*.2,'" stroke="cyan" />'),z+=W()(ku=W()(Pu=W()(Lu=W()(Ru='<line x1="'.concat(Re.segments[U].x2*p.scale,'" y1="')).call(Ru,Re.segments[U].y2*p.scale,'" x2="')).call(Lu,Re.segments[U].x3*p.scale,'" y2="')).call(Pu,Re.segments[U].y3*p.scale,'" stroke-width="')).call(ku,p.qcpr*.2,'" stroke="cyan" />')}if(!Re.segments[U].hasOwnProperty("x3")&&p.lcpr){var ju,Fu,Bu;z+=W()(ju=W()(Fu=W()(Bu='<circle cx="'.concat(Re.segments[U].x2*p.scale,'" cy="')).call(Bu,Re.segments[U].y2*p.scale,'" r="')).call(Fu,p.lcpr,'" fill="white" stroke-width="')).call(ju,p.lcpr*.2,'" stroke="black" />')}}}}return z}},{key:"getsvgstring",value:function(o,g){var i,p,M;g=this.checkoptions(g);for(var T=o.width*g.scale,P=o.height*g.scale,k=W()(i="<svg ".concat(g.viewbox?W()(p='viewBox="0 0 '.concat(T," ")).call(p,P,'" '):W()(M='width="'.concat(T,'" height="')).call(M,P,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(i,this.versionnumber,'" >'),z=0;z<o.layers.length;z+=1)for(var U=0;U<o.layers[z].length;U+=1)o.layers[z][U].isholepath||(k+=this.svgpathstring(o,z,U,g));return k+="</svg>",k}},{key:"compareNumbers",value:function(o,g){return o-g}},{key:"torgbastr",value:function(o){var g,i,p;return W()(g=W()(i=W()(p="rgba(".concat(o.r,",")).call(p,o.g,",")).call(i,o.b,",")).call(g,o.a,")")}},{key:"tosvgcolorstr",value:function(o,g){var i,p,M,T,P,k,z;return W()(i=W()(p=W()(M=W()(T=W()(P=W()(k=W()(z='fill="rgb('.concat(o.r,",")).call(z,o.g,",")).call(k,o.b,')" stroke="rgb(')).call(P,o.r,",")).call(T,o.g,",")).call(M,o.b,')" stroke-width="')).call(p,g.strokewidth,'" opacity="')).call(i,o.a/255,'" ')}},{key:"appendSVGString",value:function(o,g){var i;g?(i=document.getElementById(g),i||(i=document.createElement("div"),i.id=g,document.body.appendChild(i))):(i=document.createElement("div"),document.body.appendChild(i)),i.innerHTML+=o}},{key:"blur",value:function(o,g,i){var p,M,T,P,k,z,U,re,oe,pe,ue={width:o.width,height:o.height,data:[]};if(g=Math.floor(g),g<1)return o;g>5&&(g=5),i=Math.abs(i),i>1024&&(i=1024);var ge=this.gks[g-1];for(M=0;M<o.height;M++)for(p=0;p<o.width;p++){for(z=0,U=0,re=0,oe=0,pe=0,T=-g;T<g+1;T++)p+T>0&&p+T<o.width&&(k=(M*o.width+p+T)*4,z+=o.data[k]*ge[T+g],U+=o.data[k+1]*ge[T+g],re+=o.data[k+2]*ge[T+g],oe+=o.data[k+3]*ge[T+g],pe+=ge[T+g]);k=(M*o.width+p)*4,ue.data[k]=Math.floor(z/pe),ue.data[k+1]=Math.floor(U/pe),ue.data[k+2]=Math.floor(re/pe),ue.data[k+3]=Math.floor(oe/pe)}var Oe=new Uint8ClampedArray(ue.data);for(M=0;M<o.height;M++)for(p=0;p<o.width;p++){for(z=0,U=0,re=0,oe=0,pe=0,T=-g;T<g+1;T++)M+T>0&&M+T<o.height&&(k=((M+T)*o.width+p)*4,z+=Oe[k]*ge[T+g],U+=Oe[k+1]*ge[T+g],re+=Oe[k+2]*ge[T+g],oe+=Oe[k+3]*ge[T+g],pe+=ge[T+g]);k=(M*o.width+p)*4,ue.data[k]=Math.floor(z/pe),ue.data[k+1]=Math.floor(U/pe),ue.data[k+2]=Math.floor(re/pe),ue.data[k+3]=Math.floor(oe/pe)}for(M=0;M<o.height;M++)for(p=0;p<o.width;p++)k=(M*o.width+p)*4,P=Math.abs(ue.data[k]-o.data[k])+Math.abs(ue.data[k+1]-o.data[k+1])+Math.abs(ue.data[k+2]-o.data[k+2])+Math.abs(ue.data[k+3]-o.data[k+3]),P>i&&(ue.data[k]=o.data[k],ue.data[k+1]=o.data[k+1],ue.data[k+2]=o.data[k+2],ue.data[k+3]=o.data[k+3]);return ue}},{key:"loadImage",value:function(o,g,i){var p=new Image;i&&i.corsenabled&&(p.crossOrigin="Anonymous"),p.src=o,p.onload=function(){var M=document.createElement("canvas");M.width=p.width,M.height=p.height;var T=M.getContext("2d");T.drawImage(p,0,0),g(M)}}},{key:"getImgdata",value:function(o){var g=o.getContext("2d");return g.getImageData(0,0,o.width,o.height)}},{key:"drawLayers",value:function(o,g,i,p){i=i||1;var M,T,P,k,z,U;p?(U=document.getElementById(p),U||(U=document.createElement("div"),U.id=p,document.body.appendChild(U))):(U=document.createElement("div"),document.body.appendChild(U));for(z in o)if(o.hasOwnProperty(z)){M=o[z][0].length,T=o[z].length;var re=document.createElement("canvas");re.width=M*i,re.height=T*i;var oe=re.getContext("2d");for(k=0;k<T;k+=1)for(P=0;P<M;P+=1)oe.fillStyle=this.torgbastr(g[o[z][k][P]%g.length]),oe.fillRect(P*i,k*i,i,i);U.appendChild(re)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),A}(),Gv={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var I=this,o=function(){I.ui.submenu==="crop"&&(I.stopDrawingMode(),I.ui.changeMenu("crop"))},g=function(z){I.ui.submenu==="rotate"&&I.ui.rotate.setRangeBarAngle("setAngle",z)},i=function(z){I.ui.submenu==="filter"&&Pi()(I.ui).setFilterState(z)},p=function(z){return g(z),i(z),z},M=function(){var z=I._graphics.getZoomMode();I.stopDrawingMode(),z!==Xt.ZOOM?(I.startDrawingMode(ft.ZOOM),I._graphics.startZoomInMode()):I._graphics.endZoomInMode()},T=function(){var z=I._graphics.getZoomMode();I.stopDrawingMode(),z!==Xt.HAND?(I.startDrawingMode(ft.ZOOM),I._graphics.startHandMode()):I._graphics.endHandMode()},P=function(){Pi()(I.ui)&&Pi()(I.ui).initFilterCheckBoxState()};return Z()({initLoadImage:function(z,U){return I.loadImageFromURL(z,U).then(function(re){o(),I.ui.initializeImgUrl=z,I.ui.resizeEditor({imageSize:re}),I.clearUndoStack(),I._invoker.fire(Ee.EXECUTE_COMMAND,lt.LOAD_IMAGE)})},undo:function(){I.isEmptyUndoStack()||(o(),I.deactivateAll(),I.undo().then(p))},redo:function(){I.isEmptyRedoStack()||(o(),I.deactivateAll(),I.redo().then(p))},reset:function(){o(),I.loadImageFromURL(I.ui.initializeImgUrl,"resetImage").then(function(z){o(),P(),I.ui.resizeEditor({imageSize:z}),I.clearUndoStack(),I._initHistory()})},delete:function(){I.ui.changeHelpButtonEnabled("delete",!1),o(),I.removeActiveObject(),I.activeObjectId=null},deleteAll:function(){o(),I.clearObjects(),I.ui.changeHelpButtonEnabled("delete",!1),I.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(z){qt()||alert("This browser does not support file-api"),I.ui.initializeImgUrl=te().createObjectURL(z),I.loadImageFromFile(z).then(function(U){o(),P(),I.clearUndoStack(),I.ui.activeMenuEvent(),I.ui.resizeEditor({imageSize:U}),I._clearHistory(),I._invoker.fire(Ee.EXECUTE_COMMAND,lt.LOAD_IMAGE)}).catch(function(U){return Ie().reject(U)})},download:function(){var z=I.toDataURL(),U=I.getImageName(),re,oe,pe;qt()&&window.saveAs?(re=Gg(z),oe=re.type.split("/")[1],U.split(".").pop()!==oe&&(U+=".".concat(oe)),saveAs(re,U)):(pe=window.open(),pe.document.body.innerHTML="<img src='".concat(z,"'>"))},history:function(z){I.ui.toggleHistoryMenu(z)},zoomIn:function(){I.ui.toggleZoomButtonStatus("zoomIn"),I.deactivateAll(),M()},zoomOut:function(){I._graphics.zoomOut()},hand:function(){I.ui.offZoomInButtonStatus(),I.ui.toggleZoomButtonStatus("hand"),I.deactivateAll(),T()}},this._commonAction())},_iconAction:function(){var I=this;return Z()({changeColor:function(g){I.activeObjectId&&I.changeIconColor(I.activeObjectId,g)},addIcon:function(g,i){I.startDrawingMode("ICON"),I.setDrawingIcon(g,i)},cancelAddIcon:function(){I.ui.icon.clearIconType(),I.changeSelectableAll(!0),I.changeCursor("default"),I.stopDrawingMode()},registerDefaultIcons:function(g,i){var p={};p[g]=i,I.registerIcons(p)},registerCustomIcon:function(g,i){var p=new Uc;p.imageToSVG(g,function(M){var T=M.match(/path[^>]*d="([^"]*)"/),P=ce(T,2),k=P[1],z={};z[i.name]=k,I.registerIcons(z),I.addIcon(i.name,{left:100,top:100})},Uc.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var I=this;return Z()({setDrawMode:function(g,i){I.stopDrawingMode(),g==="free"?I.startDrawingMode("FREE_DRAWING",i):I.startDrawingMode("LINE_DRAWING",i)},setColor:function(g){I.setBrush({color:g})}},this._commonAction())},_maskAction:function(){var I=this;return Z()({loadImageFromURL:function(g,i){return I.loadImageFromURL(I.toDataURL(),"FilterImage").then(function(){I.addImageObject(g).then(function(){te().revokeObjectURL(i)}),I._invoker.fire(Ee.EXECUTE_COMMAND,lt.LOAD_MASK_IMAGE)})},applyFilter:function(){I.applyFilter("mask",{maskObjId:I.activeObjectId})}},this._commonAction())},_textAction:function(){var I=this;return Z()({changeTextStyle:function(g,i){I.activeObjectId&&I.changeTextStyle(I.activeObjectId,g,i)}},this._commonAction())},_rotateAction:function(){var I=this;return Z()({rotate:function(g,i){I.rotate(g,i),I.ui.resizeEditor(),I.ui.rotate.setRangeBarAngle("rotate",g)},setAngle:function(g,i){I.setAngle(g,i),I.ui.resizeEditor(),I.ui.rotate.setRangeBarAngle("setAngle",g)}},this._commonAction())},_shapeAction:function(){var I=this;return Z()({changeShape:function(g,i){I.activeObjectId&&I.changeShape(I.activeObjectId,g,i)},setDrawingShape:function(g){I.setDrawingShape(g)}},this._commonAction())},_cropAction:function(){var I=this;return Z()({crop:function(){var g=I.getCropzoneRect();g&&!ep(g)&&I.crop(g).then(function(){I.stopDrawingMode(),I.ui.resizeEditor(),I.ui.changeMenu("crop"),I._invoker.fire(Ee.EXECUTE_COMMAND,lt.CROP)}).catch(function(i){return Ie().reject(i)})},cancel:function(){I.stopDrawingMode(),I.ui.changeMenu("crop")},preset:function(g){switch(g){case"preset-square":I.setCropzoneRect(1/1);break;case"preset-3-2":I.setCropzoneRect(3/2);break;case"preset-4-3":I.setCropzoneRect(4/3);break;case"preset-5-4":I.setCropzoneRect(5/4);break;case"preset-7-5":I.setCropzoneRect(7/5);break;case"preset-16-9":I.setCropzoneRect(16/9);break;default:I.setCropzoneRect(),I.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var I=this;return Z()({getCurrentDimensions:function(){return I._graphics.getCurrentDimensions()},preview:function(g,i,p){var M=I._graphics.getCurrentDimensions(),T=function(){return M.width/M.height},P={};switch(g){case"width":P.width=i,p?P.height=i/T():P.height=M.height;break;case"height":P.height=i,p?P.width=i*T():P.width=M.width;break;default:P=M}I._graphics.resize(P).then(function(){I.ui.resizeEditor()}),p&&(I.ui.resize.setWidthValue(P.width),I.ui.resize.setHeightValue(P.height))},lockAspectRatio:function(g,i,p){var M=I._graphics.getCurrentDimensions(),T=M.width,P=M.height,k=T/P;if(g)if(T>P){var z=p/k,U=i*k;I.ui.resize.setLimit({minWidth:U>i?U:i,minHeight:i,maxWidth:p,maxHeight:z<p?z:p})}else{var re=p*k,oe=i/k;I.ui.resize.setLimit({minWidth:i,minHeight:oe>i?oe:i,maxWidth:re<p?re:p,maxHeight:p})}else I.ui.resize.setLimit({minWidth:i,minHeight:i,maxWidth:p,maxHeight:p})},resize:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;g||(g=I._graphics.getCurrentDimensions()),I.resize(g).then(function(){I._graphics.setOriginalDimensions(g),I.stopDrawingMode(),I.ui.resizeEditor(),I.ui.changeMenu("resize")}).catch(function(i){return Ie().reject(i)})},reset:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=I._graphics.getOriginalDimensions();I.ui.resize.setWidthValue(i.width,!0),I.ui.resize.setHeightValue(i.height,!0),I._graphics.resize(i).then(function(){g||(I.stopDrawingMode(),I.ui.resizeEditor(),I.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var I=this;return Z()({flip:function(g){return I[g]()}},this._commonAction())},_filterAction:function(){var I=this;return Z()({applyFilter:function(g,i,p,M){g?I.applyFilter(i,p,M):I.hasFilter(i)&&I.removeFilter(i)}},this._commonAction())},setReAction:function(){var I=this;this.on({undoStackChanged:function(g){g?(I.ui.changeHelpButtonEnabled("undo",!0),I.ui.changeHelpButtonEnabled("reset",!0)):(I.ui.changeHelpButtonEnabled("undo",!1),I.ui.changeHelpButtonEnabled("reset",!1)),I.ui.resizeEditor()},redoStackChanged:function(g){g?I.ui.changeHelpButtonEnabled("redo",!0):I.ui.changeHelpButtonEnabled("redo",!1),I.ui.resizeEditor()},objectActivated:function(g){var i,p;I.activeObjectId=g.id,I.ui.changeHelpButtonEnabled("delete",!0),I.ui.changeHelpButtonEnabled("deleteAll",!0),g.type==="cropzone"?I.ui.crop.changeApplyButtonStatus(!0):u()(i=["rect","circle","triangle"]).call(i,g.type)>-1?(I.stopDrawingMode(),I.ui.submenu!=="shape"&&I.ui.changeMenu("shape",!1,!1),I.ui.shape.setShapeStatus({strokeColor:g.stroke,strokeWidth:g.strokeWidth,fillColor:ye()(g)}),I.ui.shape.setMaxStrokeValue(Math.min(g.width,g.height))):g.type==="path"||g.type==="line"?I.ui.submenu!=="draw"&&(I.ui.changeMenu("draw",!1,!1),I.ui.draw.changeStandbyMode()):u()(p=["i-text","text"]).call(p,g.type)>-1?(I.ui.submenu!=="text"&&I.ui.changeMenu("text",!1,!1),I.ui.text.setTextStyleStateOnAction(g)):g.type==="icon"&&(I.stopDrawingMode(),I.ui.submenu!=="icon"&&I.ui.changeMenu("icon",!1,!1),I.ui.icon.setIconPickerColor(ye()(g)))},addText:function(g){var i=I.ui.text,p=i.textColor,M=i.fontSize,T=i.fontStyle,P=i.fontWeight,k=i.underline,z="Noto Sans";I.addText("Double Click",{position:g.originPosition,styles:{fill:p,fontSize:M,fontFamily:z,fontStyle:T,fontWeight:P,underline:k}}).then(function(){I.changeCursor("default")})},addObjectAfter:function(g){var i;g.type==="icon"?I.ui.icon.changeStandbyMode():u()(i=["rect","circle","triangle"]).call(i,g.type)>-1&&(I.ui.shape.setMaxStrokeValue(Math.min(g.width,g.height)),I.ui.shape.changeStandbyMode())},objectScaled:function(g){var i,p;if(u()(i=["i-text","text"]).call(i,g.type)>-1)I.ui.text.fontSize=ke(g.fontSize);else if(u()(p=["rect","circle","triangle"]).call(p,g.type)>=0){var M=g.width,T=g.height,P=I.ui.shape.getStrokeValue();M<P&&I.ui.shape.setStrokeValue(M),T<P&&I.ui.shape.setStrokeValue(T)}},selectionCleared:function(){I.activeObjectId=null,I.ui.submenu==="text"?I.changeCursor("text"):Kr(["draw","crop","resize"],I.ui.submenu)||I.stopDrawingMode()}})},_historyAction:function(){var I=this;return{undo:function(g){return I.undo(g)},redo:function(g){return I.redo(g)}}},_commonAction:function(){var I=this,o,g,i,p,M=ft.TEXT,T=ft.CROPPER,P=ft.SHAPE,k=ft.ZOOM,z=ft.RESIZE;return{modeChange:function(re){switch(re){case Jt.TEXT:I._changeActivateMode(M);break;case Jt.CROP:I.startDrawingMode(T);break;case Jt.SHAPE:I._changeActivateMode(P),I.setDrawingShape(I.ui.shape.type,I.ui.shape.options);break;case Jt.ZOOM:I.startDrawingMode(k);break;case Jt.RESIZE:I.startDrawingMode(z);break;default:break}},deactivateAll:K()(o=this.deactivateAll).call(o,this),changeSelectableAll:K()(g=this.changeSelectableAll).call(g,this),discardSelection:K()(i=this.discardSelection).call(i,this),stopDrawingMode:K()(p=this.stopDrawingMode).call(p,this)}},mixin:function(I){Z()(I.prototype,this)}},Yv=d(602),Vc=d.n(Yv),Xv=d(5573),to=d.n(Xv),Zv=function(){function A(I,o){Y(this,A),this.name=I,this.graphics=o}return ne(A,[{key:"fire",value:function(){for(var o=this.graphics,g=arguments.length,i=new Array(g),p=0;p<g;p++)i[p]=arguments[p];return this.graphics.fire.apply(o,i)}},{key:"setCanvasImage",value:function(o,g){this.graphics.setCanvasImage(o,g)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(o,g){this.graphics.setImageProperties(o,g)}},{key:"setCanvasCssDimension",value:function(o){this.graphics.setCanvasCssDimension(o)}},{key:"setCanvasBackstoreDimension",value:function(o){this.graphics.setCanvasBackstoreDimension(o)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),A}(),cn=Zv;function $v(A){var I=Jv();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Jv(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Qv={padding:0,crossOrigin:"Anonymous"},Kv=function(A){yt(o,A);var I=$v(o);function o(g){return Y(this,o),I.call(this,Le.IMAGE_LOADER,g)}return ne(o,[{key:"load",value:function(i,p){var M=this,T;if(!i&&!p){var P=this.getCanvas();P.backgroundImage=null,P.renderAll(),T=new(Ie())(function(k){M.setCanvasImage("",null),k()})}else T=this._setBackgroundImage(p).then(function(k){return M.setCanvasImage(i,k),M.adjustCanvasDimension(),k});return T}},{key:"_setBackgroundImage",value:function(i){var p=this;return i?new(Ie())(function(M,T){var P=p.getCanvas();P.setBackgroundImage(i,function(){var k=P.backgroundImage;k&&k.getElement()?M(k):T(mt.loadingImageFailed)},Qv)}):Ie().reject(mt.loadImage)}}]),o}(cn),qv=Kv,em="tl",tm="tr",nm="mt",im="ml",rm="mr",om="mb",sm="bl",am="br",Wc=[em,tm,nm,im,rm,om,sm,am],Xs=function(){};function lm(A){return u()(Wc).call(Wc,A)>=0}function no(A,I){return A>I?"width":"height"}var cm=le.fabric.util.createClass(le.fabric.Rect,{initialize:function(I,o,g){o=Z()(o,g),o.type="cropzone",this.callSuper("initialize",o),this._addEventHandler(),this.canvas=I,this.options=o},canvasEventDelegation:function(I){var o,g="unregistered",i=this.canvasEventTrigger[I]!==Xs;return i?g="registered":u()(o=[Ee.OBJECT_MOVED,Ee.OBJECT_SCALED]).call(o,I)<0&&(g="none"),g},canvasEventRegister:function(I,o){this.canvasEventTrigger[I]=o},_addEventHandler:function(){var I,o,g,i,p;this.canvasEventTrigger=(I={},H(I,Ee.OBJECT_MOVED,Xs),H(I,Ee.OBJECT_SCALED,Xs),I),this.on({moving:K()(o=this._onMoving).call(o,this),scaling:K()(g=this._onScaling).call(g,this)}),le.fabric.util.addListener(document,"keydown",K()(i=this._onKeyDown).call(i,this)),le.fabric.util.addListener(document,"keyup",K()(p=this._onKeyUp).call(p,this))},_renderCropzone:function(I){var o=7,g=7,i=this.flipX?-1:1,p=this.flipY?-1:1,M=i/this.scaleX,T=p/this.scaleY;I.scale(M,T),this._fillOuterRect(I,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(I),this._strokeBorder(I,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(I,"rgb(0, 0, 0)",{lineDashWidth:o}),this._strokeBorder(I,"rgb(255, 255, 255)",{lineDashWidth:o,lineDashOffset:g})),I.scale(1/M,1/T)},_render:function(I){this.callSuper("_render",I),this._renderCropzone(I)},_fillOuterRect:function(I,o){var g=this._getCoordinates(),i=g.x,p=g.y;I.save(),I.fillStyle=o,I.beginPath(),I.moveTo(i[0]-1,p[0]-1),I.lineTo(i[3]+1,p[0]-1),I.lineTo(i[3]+1,p[3]+1),I.lineTo(i[0]-1,p[3]+1),I.lineTo(i[0]-1,p[0]-1),I.closePath(),I.moveTo(i[1],p[1]),I.lineTo(i[1],p[2]),I.lineTo(i[2],p[2]),I.lineTo(i[2],p[1]),I.lineTo(i[1],p[1]),I.closePath(),ye()(I).call(I),I.restore()},_fillInnerRect:function(I){var o=this._getCoordinates(),g=o.x,i=o.y,p=this._caculateInnerPosition(g,(g[2]-g[1])/3),M=this._caculateInnerPosition(i,(i[2]-i[1])/3);I.save(),I.strokeStyle="rgba(255, 255, 255, 0.7)",I.lineWidth=this.options.lineWidth,I.beginPath(),I.moveTo(p[0],M[1]),I.lineTo(p[3],M[1]),I.moveTo(p[0],M[2]),I.lineTo(p[3],M[2]),I.moveTo(p[1],M[0]),I.lineTo(p[1],M[3]),I.moveTo(p[2],M[0]),I.lineTo(p[2],M[3]),I.stroke(),I.closePath(),I.restore()},_caculateInnerPosition:function(I,o){var g=[];return g[0]=I[1],g[1]=I[1]+o,g[2]=I[1]+o*2,g[3]=I[2],g},_getCoordinates:function(){var I,o,g=this.canvas,i=this.width,p=this.height,M=this.left,T=this.top,P=i/2,k=p/2,z=g.getHeight(),U=g.getWidth();return{x:wn()(I=[-(P+M),-P,P,P+(U-M-i)]).call(I,Math.ceil),y:wn()(o=[-(k+T),-k,k,k+(z-T-p)]).call(o,Math.ceil)}},_strokeBorder:function(I,o,g){var i=g.lineDashWidth,p=g.lineDashOffset,M=g.lineWidth,T=this.width/2,P=this.height/2;I.save(),I.strokeStyle=o,I.setLineDash&&I.setLineDash([i,i]),p&&(I.lineDashOffset=p),M&&(I.lineWidth=M),I.beginPath(),I.moveTo(-T,-P),I.lineTo(T,-P),I.lineTo(T,P),I.lineTo(-T,P),I.lineTo(-T,-P),I.stroke(),I.restore()},_onMoving:function(){var I=this.height,o=this.width,g=this.left,i=this.top,p=this.canvas.getWidth()-o,M=this.canvas.getHeight()-I;this.left=et(g,0,p),this.top=et(i,0,M),this.canvasEventTrigger[Ee.OBJECT_MOVED](this)},_onScaling:function(I){var o=I.transform.corner,g=this.canvas.getPointer(I.e),i=this._calcScalingSizeFromPointer(g,o);this.scale(1).set(i),this.canvasEventTrigger[Ee.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(I,o){var g=lm(o);return g&&this._resizeCropZone(I,o)},adjustRatioCropzoneSize:function(I){var o=I.width,g=I.height,i=I.leftMaker,p=I.topMaker,M=I.maxWidth,T=I.maxHeight,P=I.scaleTo;if(o=M?et(o,1,M):o,g=T?et(g,1,T):g,!this.presetRatio)return this._withShiftKey&&(o>g?g=o:g>o&&(o=g)),{width:o,height:g,left:i(o),top:p(g)};P==="width"?g=o/this.presetRatio:o=g*this.presetRatio;var k=Math.min(M/o,T/g);if(k<=1){var z,U=wn()(z=[o,g]).call(z,function(oe){return oe*k}),re=ce(U,2);o=re[0],g=re[1]}return{width:o,height:g,left:i(o),top:p(g)}},_getCropzoneRectInfo:function(){var I=this.canvas,o=I.width,g=I.height,i=this.getBoundingRect(!1,!0),p=i.top,M=i.left,T=i.width,P=i.height;return{rectTop:p,rectLeft:M,rectWidth:T,rectHeight:P,rectRight:M+T,rectBottom:p+P,canvasWidth:o,canvasHeight:g}},_resizeCropZone:function(I,o){var g=I.x,i=I.y,p=this._getCropzoneRectInfo(),M=p.rectWidth,T=p.rectHeight,P=p.rectTop,k=p.rectLeft,z=p.rectBottom,U=p.rectRight,re=p.canvasWidth,oe=p.canvasHeight,pe={tl:{width:U-g,height:z-i,leftMaker:function(ge){return U-ge},topMaker:function(ge){return z-ge},maxWidth:U,maxHeight:z,scaleTo:no(k-g,P-i)},tr:{width:g-k,height:z-i,leftMaker:function(){return k},topMaker:function(ge){return z-ge},maxWidth:re-k,maxHeight:z,scaleTo:no(g-U,P-i)},mt:{width:M,height:z-i,leftMaker:function(){return k},topMaker:function(ge){return z-ge},maxWidth:re-k,maxHeight:z,scaleTo:"height"},ml:{width:U-g,height:T,leftMaker:function(ge){return U-ge},topMaker:function(){return P},maxWidth:U,maxHeight:oe-P,scaleTo:"width"},mr:{width:g-k,height:T,leftMaker:function(){return k},topMaker:function(){return P},maxWidth:re-k,maxHeight:oe-P,scaleTo:"width"},mb:{width:M,height:i-P,leftMaker:function(){return k},topMaker:function(){return P},maxWidth:re-k,maxHeight:oe-P,scaleTo:"height"},bl:{width:U-g,height:i-P,leftMaker:function(ge){return U-ge},topMaker:function(){return P},maxWidth:U,maxHeight:oe-P,scaleTo:no(k-g,i-z)},br:{width:g-k,height:i-P,leftMaker:function(){return k},topMaker:function(){return P},maxWidth:re-k,maxHeight:oe-P,scaleTo:no(g-U,i-z)}};return this.adjustRatioCropzoneSize(pe[o])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(I){var o=I.keyCode;o===Tt.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(I){var o=I.keyCode;o===Tt.SHIFT&&(this._withShiftKey=!1)}}),um=cm;function fm(A){var I=dm();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function dm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var hm=10,gm={presetRatio:null,top:-10,left:-10,height:1,width:1},pm=function(A){yt(o,A);var I=fm(o);function o(g){var i,p,M,T,P,k;return Y(this,o),k=I.call(this,Le.CROPPER,g),k._cropzone=null,k._startX=null,k._startY=null,k._withShiftKey=!1,k._listeners={keydown:K()(i=k._onKeyDown).call(i,ct(k)),keyup:K()(p=k._onKeyUp).call(p,ct(k)),mousedown:K()(M=k._onFabricMouseDown).call(M,ct(k)),mousemove:K()(T=k._onFabricMouseMove).call(T,ct(k)),mouseup:K()(P=k._onFabricMouseUp).call(P,ct(k))},k}return ne(o,[{key:"start",value:function(){if(!this._cropzone){var i=this.getCanvas();i.forEachObject(function(p){p.evented=!1}),this._cropzone=new um(i,Z()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},Pt,this.graphics.cropSelectionStyle)),i.discardActiveObject(),i.add(this._cropzone),i.on("mouse:down",this._listeners.mousedown),i.selection=!1,i.defaultCursor="crosshair",le.fabric.util.addListener(document,"keydown",this._listeners.keydown),le.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var i=this.getCanvas(),p=this._cropzone;p&&(i.remove(p),i.selection=!0,i.defaultCursor="default",i.off("mouse:down",this._listeners.mousedown),i.forEachObject(function(M){M.evented=!0}),this._cropzone=null,le.fabric.util.removeListener(document,"keydown",this._listeners.keydown),le.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(i){this._cropzone&&this._cropzone.set({visible:i})}},{key:"_onFabricMouseDown",value:function(i){var p=this.getCanvas();if(!i.target){p.selection=!1;var M=p.getPointer(i.e);this._startX=M.x,this._startY=M.y,p.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(i){var p=this.getCanvas(),M=p.getPointer(i.e),T=M.x,P=M.y,k=this._cropzone;Math.abs(T-this._startX)+Math.abs(P-this._startY)>hm&&(p.remove(k),k.set(this._calcRectDimensionFromPoint(T,P,k.presetRatio)),p.add(k),p.setActiveObject(k))}},{key:"_calcRectDimensionFromPoint",value:function(i,p){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,T=this.getCanvas(),P=T.getWidth(),k=T.getHeight(),z=this._startX,U=this._startY,re=et(i,0,z),oe=et(p,0,U),pe=et(i,z,P)-re,ue=et(p,U,k)-oe;return this._withShiftKey&&!M?(pe>ue?ue=pe:ue>pe&&(pe=ue),z>=i&&(re=z-pe),U>=p&&(oe=U-ue)):M&&(ue=pe/M,z>=i&&(re=et(z-pe,0,P)),U>=p&&(oe=et(U-ue,0,k)),oe+ue>k&&(ue=k-oe,pe=ue*M,z>=i&&(re=et(z-pe,0,P)),U>=p&&(oe=et(U-ue,0,k)))),{left:re,top:oe,width:pe,height:ue}}},{key:"_onFabricMouseUp",value:function(){var i=this._cropzone,p=this._listeners,M=this.getCanvas();M.setActiveObject(i),M.off({"mouse:move":p.mousemove,"mouse:up":p.mouseup})}},{key:"getCroppedImageData",value:function(i){var p=this.getCanvas(),M=p.contains(this._cropzone);if(!i)return null;M&&p.remove(this._cropzone);var T={imageName:this.getImageName(),url:p.toDataURL(i)};return M&&p.add(this._cropzone),T}},{key:"getCropzoneRect",value:function(){var i=this._cropzone;return i.isValid()?{left:i.left,top:i.top,width:i.width,height:i.height}:null}},{key:"setCropzoneRect",value:function(i){var p=this.getCanvas(),M=this._cropzone;p.discardActiveObject(),p.selection=!1,p.remove(M),M.set(i?this._getPresetPropertiesForCropSize(i):gm),p.add(M),p.selection=!0,i&&p.setActiveObject(M)}},{key:"_getPresetPropertiesForCropSize",value:function(i){var p,M,T=this.getCanvas(),P=T.getWidth(),k=T.getHeight(),z=P>=k?P:k,U=function(Re,dt){return Re>dt?dt/Re:1},re=z*i,oe=z,pe=U(re,P),ue=wn()(p=[re,oe]).call(p,function(Ke){return Ke*pe}),ge=ce(ue,2);re=ge[0],oe=ge[1];var Oe=U(oe,k),Je=wn()(M=[re,oe]).call(M,function(Ke){return Yg(Ke*Oe)}),Qe=ce(Je,2);return re=Qe[0],oe=Qe[1],{presetRatio:i,top:(k-oe)/2,left:(P-re)/2,width:re,height:oe}}},{key:"_onKeyDown",value:function(i){i.keyCode===Tt.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(i){i.keyCode===Tt.SHIFT&&(this._withShiftKey=!1)}}]),o}(cn),vm=pm;function mm(A){var I=ym();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function ym(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Cm=function(A){yt(o,A);var I=mm(o);function o(g){return Y(this,o),I.call(this,Le.FLIP,g)}return ne(o,[{key:"getCurrentSetting",value:function(){var i=this.getCanvasImage();return{flipX:i.flipX,flipY:i.flipY}}},{key:"set",value:function(i){var p=this.getCurrentSetting(),M=p.flipX!==i.flipX,T=p.flipY!==i.flipY;return!M&&!T?Ie().reject(mt.flip):(Z()(p,i),this.setImageProperties(p,!0),this._invertAngle(M,T),this._flipObjects(M,T),Ie().resolve({flipX:p.flipX,flipY:p.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(i,p){var M=this.getCanvasImage(),T=M.angle;i&&(T*=-1),p&&(T*=-1),M.rotate(Kn()(T)).setCoords()}},{key:"_flipObjects",value:function(i,p){var M=this.getCanvas();i&&M.forEachObject(function(T){T.set({angle:Kn()(T.angle*-1),flipX:!T.flipX,left:M.width-T.left}).setCoords()}),p&&M.forEachObject(function(T){T.set({angle:Kn()(T.angle*-1),flipY:!T.flipY,top:M.height-T.top}).setCoords()}),M.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var i=this.getCurrentSetting();return this.set({flipX:!i.flipX,flipY:i.flipY})}},{key:"flipY",value:function(){var i=this.getCurrentSetting();return this.set({flipX:i.flipX,flipY:!i.flipY})}}]),o}(cn),Im=Cm;function bm(A){var I=Sm();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Sm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Dm=function(A){yt(o,A);var I=bm(o);function o(g){return Y(this,o),I.call(this,Le.ROTATION,g)}return ne(o,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(i){var p=this.getCurrentAngle()%360;i%=360;var M=this.getCanvasImage(),T=M.getCenterPoint();M.set({angle:i}).setCoords(),this.adjustCanvasDimension();var P=M.getCenterPoint();return this._rotateForEachObject(T,P,i-p),Ie().resolve(i)}},{key:"_rotateForEachObject",value:function(i,p,M){var T=this.getCanvas(),P={x:i.x-p.x,y:i.y-p.y};T.forEachObject(function(k){var z=k.getCenterPoint(),U=le.fabric.util.degreesToRadians(M),re=le.fabric.util.rotatePoint(z,i,U);k.set({left:re.x-P.x,top:re.y-P.y,angle:(k.angle+M)%360}),k.setCoords()}),T.renderAll()}},{key:"rotate",value:function(i){var p=this.getCurrentAngle();return this.setAngle(p+i)}}]),o}(cn),xm=Dm;function Em(A){var I=Mm();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Mm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var _m=function(A){yt(o,A);var I=Em(o);function o(g){var i;return Y(this,o),i=I.call(this,Le.FREE_DRAWING,g),i.width=12,i.oColor=new le.fabric.Color("rgba(0, 0, 0, 0.5)"),i}return ne(o,[{key:"start",value:function(i){var p=this.getCanvas();p.isDrawingMode=!0,this.setBrush(i)}},{key:"setBrush",value:function(i){var p=this.getCanvas().freeDrawingBrush;i=i||{},this.width=i.width||this.width,i.color&&(this.oColor=new le.fabric.Color(i.color)),p.width=this.width,p.color=this.oColor.toRgba()}},{key:"end",value:function(){var i=this.getCanvas();i.isDrawingMode=!1}}]),o}(cn),wm=_m,Gc=30,Tm=2.7,Am=1.7,Yc=180,Om=le.fabric.util.createClass(le.fabric.Line,{type:"line",initialize:function(I){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",I,o),this.arrowType=o.arrowType},_render:function(I){var o=this.calcLinePoints(),g=o.x1,i=o.y1,p=o.x2,M=o.y2,T={fromX:g,fromY:i,toX:p,toY:M};this.ctx=I,I.lineWidth=this.strokeWidth,this._renderBasicLinePath(T),this._drawDecoratorPath(T),this._renderStroke(I)},_renderBasicLinePath:function(I){var o=I.fromX,g=I.fromY,i=I.toX,p=I.toY;this.ctx.beginPath(),this.ctx.moveTo(o,g),this.ctx.lineTo(i,p)},_drawDecoratorPath:function(I){this._drawDecoratorPathType("head",I),this._drawDecoratorPathType("tail",I)},_drawDecoratorPathType:function(I,o){switch(this.arrowType[I]){case"triangle":this._drawTrianglePath(I,o);break;case"chevron":this._drawChevronPath(I,o);break;default:break}},_drawTrianglePath:function(I,o){var g=this.ctx.lineWidth*Am;this._drawChevronPath(I,o,g),this.ctx.closePath()},_drawChevronPath:function(I,o,g){var i=this,p=o.fromX,M=o.fromY,T=o.toX,P=o.toY,k=this.ctx;g||(g=this.ctx.lineWidth*Tm);var z=I==="head"?[p,M]:[T,P],U=ce(z,2),re=U[0],oe=U[1],pe=I==="head"?[T,P]:[p,M],ue=ce(pe,2),ge=ue[0],Oe=ue[1],Je=Math.atan2(Oe-oe,ge-re)*Yc/Math.PI,Qe=function(Re){return i.getRotatePosition(g,Re,{x:re,y:oe})};k.moveTo.apply(k,B(Qe(Je+Gc))),k.lineTo(re,oe),k.lineTo.apply(k,B(Qe(Je-Gc)))},getRotatePosition:function(I,o,g){var i=o*Math.PI/Yc,p=g.x,M=g.y;return[I*Math.cos(i)+p,I*Math.sin(i)+M]}}),Nm=Om;function km(A){var I=Pm();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Pm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Lm=function(A){yt(o,A);var I=km(o);function o(g){var i,p,M,T;return Y(this,o),T=I.call(this,Le.LINE,g),T._width=12,T._oColor=new le.fabric.Color("rgba(0, 0, 0, 0.5)"),T._listeners={mousedown:K()(i=T._onFabricMouseDown).call(i,ct(T)),mousemove:K()(p=T._onFabricMouseMove).call(p,ct(T)),mouseup:K()(M=T._onFabricMouseUp).call(M,ct(T))},T}return ne(o,[{key:"setHeadOption",value:function(i){var p=i.arrowType,M=p===void 0?{head:null,tail:null}:p;this._arrowType=M}},{key:"start",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this.getCanvas();p.defaultCursor="crosshair",p.selection=!1,this.setHeadOption(i),this.setBrush(i),p.forEachObject(function(M){M.set({evented:!1})}),p.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(i){var p=this.getCanvas().freeDrawingBrush;i=i||{},this._width=i.width||this._width,i.color&&(this._oColor=new le.fabric.Color(i.color)),p.width=this._width,p.color=this._oColor.toRgba()}},{key:"end",value:function(){var i=this.getCanvas();i.defaultCursor="default",i.selection=!0,i.forEachObject(function(p){p.set({evented:!0})}),i.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(i){var p=this.getCanvas(),M=p.getPointer(i.e),T=M.x,P=M.y,k=[T,P,T,P];this._line=new Nm(k,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(gn.SELECTION_STYLE),p.add(this._line),p.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(Ee.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(i){var p=this.getCanvas(),M=p.getPointer(i.e);this._line.set({x2:M.x,y2:M.y}),this._line.setCoords(),p.renderAll()}},{key:"_onFabricMouseUp",value:function(){var i=this.getCanvas();this.fire(Ee.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,i.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var i=this.graphics.createObjectProperties(this._line),p=this._line,M=p.x1,T=p.x2,P=p.y1,k=p.y2;return Z()({},i,{startPosition:{x:M,y:P},endPosition:{x:T,y:k}})}}]),o}(cn),Rm=Lm;function jm(A){var I=Fm();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Fm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Bm={fill:"#000000",left:0,top:0},zm={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},Hm=500,Um=function(A){yt(o,A);var I=jm(o);function o(g){var i,p,M,T,P,k;return Y(this,o),k=I.call(this,Le.TEXT,g),k._defaultStyles=Bm,k._isSelected=!1,k._selectedObj={},k._editingObj={},k._listeners={mousedown:K()(i=k._onFabricMouseDown).call(i,ct(k)),select:K()(p=k._onFabricSelect).call(p,ct(k)),selectClear:K()(M=k._onFabricSelectClear).call(M,ct(k)),scaling:K()(T=k._onFabricScaling).call(T,ct(k)),textChanged:K()(P=k._onFabricTextChanged).call(P,ct(k))},k._textarea=null,k._ratio=1,k._lastClickTime=new Date().getTime(),k._editingObjInfos={},k.isPrevEditing=!1,k}return ne(o,[{key:"start",value:function(){var i=this,p=this.getCanvas();p.selection=!1,p.defaultCursor="text",p.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),p.forEachObject(function(M){M.type==="i-text"&&i.adjustOriginPosition(M,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var i=this,p=this.getCanvas();p.selection=!0,p.defaultCursor="default",p.forEachObject(function(M){M.type==="i-text"&&(M.text===""?p.remove(M):i.adjustOriginPosition(M,"end"))}),p.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(i,p){var M="center",T="center";p==="start"&&(M="left",T="top");var P=i.getPointByOrigin(M,T),k=P.x,z=P.y;i.set({left:k,top:z,originX:M,originY:T}),i.setCoords()}},{key:"add",value:function(i,p){var M=this;return new(Ie())(function(T){var P,k=M.getCanvas(),z=null,U=gn.SELECTION_STYLE,re=M._defaultStyles;M._setInitPos(p.position),p.styles&&(re=Z()(re,p.styles)),kc()(p.autofocus)||(p.autofocus=!0),z=new le.fabric.IText(i,re),U=Z()({},U,{originX:"left",originY:"top"}),z.set(U),z.on({mouseup:K()(P=M._onFabricMouseUp).call(P,M)}),k.add(z),p.autofocus&&(z.enterEditing(),z.selectAll()),k.getActiveObject()||k.setActiveObject(z),M.isPrevEditing=!0,T(M.graphics.createObjectProperties(z))})}},{key:"change",value:function(i,p){var M=this;return new(Ie())(function(T){i.set("text",p),M.getCanvas().renderAll(),T()})}},{key:"setStyle",value:function(i,p){var M=this;return new(Ie())(function(T){J()(p,function(P,k){i[k]===P&&k!=="fontSize"&&(p[k]=zm[k]||"")},M),"textDecoration"in p&&Z()(p,M._getTextDecorationAdaptObject(p.textDecoration)),i.set(p),M.getCanvas().renderAll(),T()})}},{key:"getText",value:function(i){return i.text}},{key:"setSelectedInfo",value:function(i,p){this._selectedObj=i,this._isSelected=p}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var i=this.getCanvasElement(),p=me()(i.style.maxWidth,10),M=i.width;this._ratio=M/p}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(i){return{underline:i==="underline",linethrough:i==="line-through",overline:i==="overline"}}},{key:"_setInitPos",value:function(i){i=i||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=i.x,this._defaultStyles.top=i.y}},{key:"_onInput",value:function(){var i=this.getCanvasRatio(),p=this._editingObj,M=this._textarea.style;M.width="".concat(Math.ceil(p.width/i),"px"),M.height="".concat(Math.ceil(p.height/i),"px")}},{key:"_onKeyDown",value:function(){var i=this,p=this.getCanvasRatio(),M=this._editingObj,T=this._textarea.style;n()(function(){M.text(i._textarea.value),T.width="".concat(Math.ceil(M.width/p),"px"),T.height="".concat(Math.ceil(M.height/p),"px")},0)}},{key:"_onBlur",value:function(){var i=this.getCanvasRatio(),p=this._editingObj,M=this._editingObjInfos,T=this._textarea.value,P=p.width/i-M.width/i,k=p.height/i-M.height/i;if(i===1&&(P/=2,k/=2),this._textarea.style.display="none",p.set({left:M.left+P,top:M.top+k}),T.length){this.getCanvas().add(p);var z={id:Pe(p),type:p.type,text:T};this.fire(Ee.TEXT_CHANGED,z)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(i){var p=i.target;p.fontSize=p.fontSize*p.scaleY,p.scaleX=1,p.scaleY=1}},{key:"_onFabricTextChanged",value:function(i){this.fire(Ee.TEXT_CHANGED,i.target)}},{key:"_onFabricSelectClear",value:function(i){var p=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(i.target,!1),p&&p.text===""&&this.getCanvas().remove(p)}},{key:"_onFabricSelect",value:function(i){this.isPrevEditing=!0,this.setSelectedInfo(i.target,!0)}},{key:"_onFabricMouseDown",value:function(i){var p=i.target;if(!(p&&!p.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(i)}}},{key:"_fireAddText",value:function(i){var p=i.target,M=i.e||{},T=this.getCanvas().getPointer(M);p||this.fire(Ee.ADD_TEXT,{originPosition:{x:T.x,y:T.y},clientPosition:{x:M.clientX||0,y:M.clientY||0}})}},{key:"_onFabricMouseUp",value:function(i){var p=i.target,M=new Date().getTime();this._isDoubleClick(M)&&!p.isEditing&&p.enterEditing(),p.isEditing&&this.fire(Ee.TEXT_EDITING),this._lastClickTime=M}},{key:"_isDoubleClick",value:function(i){return i-this._lastClickTime<Hm}}]),o}(cn),Vm=Um;function Wm(A){var I=Gm();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Gm(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Ym={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},Xm=function(A){yt(o,A);var I=Wm(o);function o(g){var i,p,M,T;return Y(this,o),T=I.call(this,Le.ICON,g),T._oColor="#000000",T._pathMap=Ym,T._type=null,T._iconColor=null,T._handlers={mousedown:K()(i=T._onFabricMouseDown).call(i,ct(T)),mousemove:K()(p=T._onFabricMouseMove).call(p,ct(T)),mouseup:K()(M=T._onFabricMouseUp).call(M,ct(T))},T}return ne(o,[{key:"setStates",value:function(i,p){this._type=i,this._iconColor=p}},{key:"start",value:function(){var i=this.getCanvas();i.selection=!1,i.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var i=this.getCanvas();i.selection=!0,i.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(i,p){var M=this;return new(Ie())(function(T,P){var k=M.getCanvas(),z=M._pathMap[i],U=gn.SELECTION_STYLE,re=z?M._createIcon(z):null;M._icon=re,re||P(mt.invalidParameters),re.set(Z()({type:"icon",fill:M._oColor},U,p,M.graphics.controlStyle)),k.add(re).setActiveObject(re),T(M.graphics.createObjectProperties(re))})}},{key:"registerPaths",value:function(i){var p=this;J()(i,function(M,T){p._pathMap[T]=M},this)}},{key:"setColor",value:function(i,p){this._oColor=i,p&&p.get("type")==="icon"&&(p.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(i){return ye()(i)}},{key:"_createIcon",value:function(i){return new le.fabric.Path(i)}},{key:"_onFabricMouseDown",value:function(i){var p=this,M=this.getCanvas();this._startPoint=M.getPointer(i.e);var T=this._startPoint,P=T.x,k=T.y;this.add(this._type,{left:P,top:k,fill:this._iconColor}).then(function(){p.fire(Ee.ADD_OBJECT,p.graphics.createObjectProperties(p._icon)),M.on("mouse:move",p._handlers.mousemove),M.on("mouse:up",p._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(i){var p=this.getCanvas();if(this._icon){var M=p.getPointer(i.e),T=(M.x-this._startPoint.x)/this._icon.width,P=(M.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(T*2),scaleY:Math.abs(P*2)}),this._icon.setCoords(),p.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var i=this.getCanvas();this.fire(Ee.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,i.off("mouse:down",this._handlers.mousedown),i.off("mouse:move",this._handlers.mousemove),i.off("mouse:up",this._handlers.mouseup)}}]),o}(cn),Zm=Xm,$m=le.fabric.util.createClass(le.fabric.Image.filters.BlendImage,{applyTo:function(I){if(this.mask){var o=I.canvasEl,g=o.width,i=o.height,p=this._createCanvasOfMask(g,i),M=o.getContext("2d"),T=p.getContext("2d"),P=M.getImageData(0,0,g,i);this._drawMask(T,o,M),this._mapData(T,P,g,i),I.imageData=P}},_createCanvasOfMask:function(I,o){var g=le.fabric.util.createCanvasElement();return g.width=I,g.height=o,g},_drawMask:function(I){var o=this.mask,g=o.getElement(),i=o.angle,p=o.left,M=o.scaleX,T=o.scaleY,P=o.top;I.save(),I.translate(p,P),I.rotate(i*Math.PI/180),I.scale(M,T),I.drawImage(g,-g.width/2,-g.height/2),I.restore()},_mapData:function(I,o,g,i){for(var p=o.data,M=o.height,T=o.width,P=p,k=T*M*4,z=I.getImageData(0,0,g,i).data,U=0;U<k;U+=4)P[U+3]=z[U]}}),Jm=$m,Qm=le.fabric.util.createClass(le.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),Km=Qm,qm=le.fabric.util.createClass(le.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),ey=qm,ty=le.fabric.util.createClass(le.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(I){I||(I={}),this.color=I.color||"#FFFFFF",this.threshold=I.threshold||45,this.x=I.x||null,this.y=I.y||null},applyTo:function(I){var o=I.canvasEl,g=o.getContext("2d"),i=g.getImageData(0,0,o.width,o.height),p=i.data,M=this.threshold,T=le.fabric.Color.sourceFromHex(this.color),P,k;for(this.x&&this.y&&(T=this._getColor(i,this.x,this.y)),P=0,k=p.length;P<k;P+=4)this._isOutsideThreshold(p[P],T[0],M)||this._isOutsideThreshold(p[P+1],T[1],M)||this._isOutsideThreshold(p[P+2],T[2],M)||(p[P]=p[P+1]=p[P+2]=p[P+3]=0);g.putImageData(i,0,0)},_isOutsideThreshold:function(I,o,g){var i=I-o;return Math.abs(i)>g},_getColor:function(I,o,g){var i=[0,0,0,0],p=I.data,M=I.width,T=4,P=(M*g+o)*T;return i[0]=p[P],i[1]=p[P+1],i[2]=p[P+2],i[3]=p[P+3],i}}),ny=ty;function iy(A){var I=ry();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function ry(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var io=le.fabric.Image.filters;io.Mask=Jm,io.Sharpen=Km,io.Emboss=ey,io.ColorFilter=ny;var oy=function(A){yt(o,A);var I=iy(o);function o(g){return Y(this,o),I.call(this,Le.FILTER,g)}return ne(o,[{key:"add",value:function(i,p){var M=this;return new(Ie())(function(T,P){var k=M._getSourceImage(),z=M.getCanvas(),U=M._getFilter(k,i);U||(U=M._createFilter(k,i,p)),U||P(mt.invalidParameters),M._changeFilterValues(U,p),M._apply(k,function(){z.renderAll(),T({type:i,action:"add",options:p})})})}},{key:"remove",value:function(i){var p=this;return new(Ie())(function(M,T){var P=p._getSourceImage(),k=p.getCanvas(),z=p.getOptions(i);P.filters.length||T(mt.unsupportedOperation),p._removeFilter(P,i),p._apply(P,function(){k.renderAll(),M({type:i,action:"remove",options:z})})})}},{key:"hasFilter",value:function(i){return!!this._getFilter(this._getSourceImage(),i)}},{key:"getOptions",value:function(i){var p=this._getSourceImage(),M=this._getFilter(p,i);return M?Z()({},M.options):null}},{key:"_changeFilterValues",value:function(i,p){J()(p,function(M,T){G()(i[T])||(i[T]=M)}),J()(i.options,function(M,T){G()(p[T])||(i.options[T]=p[T])})}},{key:"_apply",value:function(i,p){i.filters.push();var M=i.applyFilters();M&&p()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(i,p,M){var T,P=this._getFabricFilterType(p),k=le.fabric.Image.filters[P];return k&&(T=new k(M),T.options=M,i.filters.push(T)),T}},{key:"_getFilter",value:function(i,p){var M=null;if(i){var T=this._getFabricFilterType(p),P=i.filters.length,k,z;for(z=0;z<P;z+=1)if(k=i.filters[z],k.type===T){M=k;break}}return M}},{key:"_removeFilter",value:function(i,p){var M,T=this._getFabricFilterType(p);i.filters=Pi()(M=i.filters).call(M,function(P){return P.type!==T})}},{key:"_getFabricFilterType",value:function(i){return i.charAt(0).toUpperCase()+C()(i).call(i,1)}}]),o}(cn),sy=oy,ay=d(1801),Bn=d.n(ay),Xc={pixelate:"blocksize",blur:"blur"},Zs={x:"width",y:"height"},ly=Zg(Xc),Cr=null;function ro(A){var I=pr(A,"patternSourceCanvas"),o=I.patternSourceCanvas,g=o.getObjects(),i=ce(g,1),p=i[0];return p}function cy(A){var I=A.angle,o=A.flipX,g=A.flipY,i=ro(A),p=by(A),M=p.right,T=p.bottom,P=p.width,k=p.height,z=(P-A.width)/2,U=(k-A.height)/2,re=A.left-A.width/2-z,oe=A.top-A.height/2-U,pe=P/2-z,ue=k/2-U,ge=Math.max(P,k)+Math.max(z,U),Oe=uy({shapeObj:A,left:pe,top:ue,width:P,height:k,cropX:re,cropY:oe,flipX:o,flipY:g,right:M,bottom:T}),Je=ce(Oe,4);pe=Je[0],ue=Je[1],P=Je[2],k=Je[3],i.set({angle:o===g?-I:I,left:pe,top:ue,width:P,height:k,cropX:re,cropY:oe,flipX:o,flipY:g}),Vs(i,{fillImageMaxSize:ge})}function $s(A){var I;return wn()(I=A.filters).call(I,function(o){var g=De()(o),i=ce(g,1),p=i[0];return H({},ly[p],o[p])})}function uy(A){var I=A.shapeObj,o=A.left,g=A.top,i=A.width,p=A.height,M=A.cropX,T=A.cropY,P=A.flipX,k=A.flipY,z=A.right,U=A.bottom,re=function(Ke,Re,dt,Gt){return py({type:Ke,outDistance:Re,shapeObj:I,flipX:P,flipY:k,left:dt,top:Gt})},oe=i,pe=p,ue=dy(re,{left:o,top:g,width:i,height:p,cropX:M,cropY:T}),ge=ce(ue,4);o=ge[0],g=ge[1],i=ge[2],p=ge[3];var Oe=fy(re,{left:o,top:g,insideCanvasRealImageWidth:i,insideCanvasRealImageHeight:p,right:z,bottom:U,cropX:M,cropY:T,originalWidth:oe,originalHeight:pe}),Je=ce(Oe,4);return o=Je[0],g=Je[1],i=Je[2],p=Je[3],[o,g,i,p]}function fy(A,I){var o=I.left,g=I.top,i=I.insideCanvasRealImageWidth,p=I.insideCanvasRealImageHeight,M=I.right,T=I.bottom,P=I.cropX,k=I.cropY,z=I.originalWidth,U=I.originalHeight,re=i,oe=p,pe=Cr,ue=pe.width,ge=pe.height;M>ue&&P>0&&(re=z-Math.abs(M-ue)),T>ge&&k>0&&(oe=U-Math.abs(T-ge));var Oe={x:(i-re)/2,y:(p-oe)/2};return J()(["x","y"],function(Je){var Qe=Oe[Je];if(Qe>0){var Ke=A(Je,Qe,o,g),Re=ce(Ke,2);o=Re[0],g=Re[1]}}),[o,g,re,oe]}function dy(A,I){var o=I.left,g=I.top,i=I.width,p=I.height,M=I.cropX,T=I.cropY,P={width:i,height:p};return J()(["x","y"],function(k){var z=k==="x"?M:T,U=P[Zs[k]],re=Cr[Zs[k]];if(U>re){var oe=(U-re)/2;P[Zs[k]]=re;var pe=A(k,oe,o,g),ue=ce(pe,2);o=ue[0],g=ue[1]}if(z<0){var ge=A(k,z,o,g),Oe=ce(ge,2);o=Oe[0],g=Oe[1]}}),[o,g,P.width,P.height]}function Zc(A,I,o){var g=$c(A),i=Qc(g,A.angle,I);o.add(i);var p={fill:new le.fabric.Pattern({source:o.getElement(),repeat:"no-repeat"})};return Vs(p,{patternSourceCanvas:o}),p}function hy(A){var I=A.getObjects(),o=ce(I,1),g=o[0],i=pr(g,"fillImageMaxSize"),p=i.fillImageMaxSize;p=Math.max(1,p),A.setDimensions({width:p,height:p}),A.renderAll()}function gy(A,I){var o=pr(A,"patternSourceCanvas"),g=o.patternSourceCanvas,i=g.getObjects(),p=ce(i,1),M=p[0],T=$s(M);g.remove(M);var P=$c(I,!0),k=Qc(P,I.angle,T);g.add(k)}function $c(A){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!Cr||I)&&(Cr=A.toCanvasElement()),Cr}function py(A){var I=A.type,o=A.shapeObj,g=A.outDistance,i=A.left,p=A.top,M=A.flipX,T=A.flipY,P=Jc(o),k=[[1,2],[0,3],[0,3],[1,2]],z=my(I,P,k),U=yy(I,P,z),re=z.startPointIndex,oe=vy({outDistance:g,startPointIndex:re,flipX:M,flipY:T,reatAngles:U});return[i+oe.left,p+oe.top]}function vy(A){var I=A.outDistance,o=A.startPointIndex,g=A.flipX,i=A.flipY,p=A.reatAngles,M=I*Math.cos(p[0]*Math.PI/180),T=I*Math.cos(p[1]*Math.PI/180),P=o===2||o===3,k={top:P?M:T,left:P?T:M};return Cy(o,g,i)&&(k.left=k.left*-1),Iy(o,g,i)&&(k.top=k.top*-1),k}function my(A,I,o){var g=0,i=0;J()(I,function(P,k){P[A]<g&&(g=P[A],i=k)});var p=ce(o[i],2),M=p[0],T=p[1];return{startPointIndex:i,endPointIndex1:M,endPointIndex2:T}}function yy(A,I,o){var g,i=o.startPointIndex,p=o.endPointIndex1,M=o.endPointIndex2,T=A==="x"?180:270;return wn()(g=[p,M]).call(g,function(P){var k=I[i],z=I[P],U=k.y-z.y,re=k.x-z.x;return Math.atan2(U,re)*180/Math.PI-T})}function Cy(A,I,o){return(!I&&o||!I&&!o)&&A===0||(I&&o||I&&!o)&&A===1||(!I&&!o||!I&&o)&&A===2||(I&&!o||I&&o)&&A===3}function Iy(A,I,o){return(I&&!o||!I&&!o)&&A===0||(!I&&!o||I&&!o)&&A===1||(I&&o||!I&&o)&&A===2||(!I&&o||I&&o)&&A===3}function Jc(A){return[A.getPointByOrigin("left","top"),A.getPointByOrigin("right","top"),A.getPointByOrigin("left","bottom"),A.getPointByOrigin("right","bottom")]}function by(A){var I=Jc(A),o=ce(I,4),g=o[0],i=g.x,p=g.y,M=o[1],T=M.x,P=M.y,k=o[2],z=k.x,U=k.y,re=o[3],oe=re.x,pe=re.y,ue=Math.min(i,T,z,oe),ge=Math.min(p,P,U,pe),Oe=Math.max(i,T,z,oe),Je=Math.max(p,P,U,pe);return{left:ue,top:ge,right:Oe,bottom:Je,width:Oe-ue,height:Je-ge}}function Qc(A,I,o){var g,i=new le.fabric.Image(A);return J()(Z().apply(void 0,W()(g=[{}]).call(g,B(o))),function(p,M){var T=$g(M),P=new le.fabric.Image.filters[T](H({},Xc[M],p));i.filters.push(P)}),i.applyFilters(),Vs(i,{originalAngle:I,fillImageMaxSize:Math.max(i.width,i.height)}),Bn().adjustOriginToCenter(i),i}function Sy(A){var I=Dy();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Dy(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Kc=Z()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},kt),xy="rect",Ey=20,My=20;function qc(A,I,o){var g=ye()(A),i=Ic(ye()(A)),p=g;g.color&&(p=g.color);var M=null;if(i==="filter"){var T=o();M=Zc(I,Pi()(g),T)}else M={fill:p};return Z()({},A,M)}var _y=function(A){yt(o,A);var I=Sy(o);function o(g){var i,p,M,T,P,k;return Y(this,o),k=I.call(this,Le.SHAPE,g),k._shapeObj=null,k._type=xy,k._options=Z()({},Kc),k._isSelected=!1,k._startPoint={},k._withShiftKey=!1,k._handlers={mousedown:K()(i=k._onFabricMouseDown).call(i,ct(k)),mousemove:K()(p=k._onFabricMouseMove).call(p,ct(k)),mouseup:K()(M=k._onFabricMouseUp).call(M,ct(k)),keydown:K()(T=k._onKeyDown).call(T,ct(k)),keyup:K()(P=k._onKeyUp).call(P,ct(k))},k}return ne(o,[{key:"start",value:function(){var i=this.getCanvas();this._isSelected=!1,i.defaultCursor="crosshair",i.selection=!1,i.uniformScaling=!0,i.on({"mouse:down":this._handlers.mousedown}),le.fabric.util.addListener(document,"keydown",this._handlers.keydown),le.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var i=this.getCanvas();this._isSelected=!1,i.defaultCursor="default",i.selection=!0,i.uniformScaling=!1,i.off({"mouse:down":this._handlers.mousedown}),le.fabric.util.removeListener(document,"keydown",this._handlers.keydown),le.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(i,p){this._type=i,p&&(this._options=Z()(this._options,p))}},{key:"add",value:function(i,p){var M=this;return new(Ie())(function(T){var P=M.getCanvas(),k=M._extendOptions(p),z=M._createInstance(i,k),U=M.graphics.createObjectProperties(z);M._bindEventOnShape(z),P.add(z).setActiveObject(z),M._resetPositionFillFilter(z),T(U)})}},{key:"change",value:function(i,p){var M=this;return new(Ie())(function(T,P){bc(i)||P(mt.unsupportedType);var k=Ic(ye()(p))==="filter",z=M.graphics,U=z.canvasImage,re=z.createStaticCanvas;i.set(k?qc(p,U,re):p),k&&M._resetPositionFillFilter(i),M.getCanvas().renderAll(),T()})}},{key:"makeFillPropertyForUserEvent",value:function(i){var p=Ws(i),M={};if(p===Ae.FILTER){var T=ro(i),P=$s(T);M.type=p,M.filter=P}else M.type=Ae.COLOR,M.color=ye()(i)||"transparent";return M}},{key:"processForCopiedObject",value:function(i,p){if(this._bindEventOnShape(i),Ws(i)==="filter"){var M=ro(p),T=$s(M),P=this.graphics.createStaticCanvas();i.set(Zc(this.graphics.canvasImage,T,P)),this._resetPositionFillFilter(i)}}},{key:"_createInstance",value:function(i,p){var M;switch(i){case"rect":M=new le.fabric.Rect(p);break;case"circle":M=new le.fabric.Ellipse(Z()({type:"circle"},p));break;case"triangle":M=new le.fabric.Triangle(p);break;default:M={}}return M}},{key:"_extendOptions",value:function(i){var p=gn.SELECTION_STYLE,M=this.graphics,T=M.canvasImage,P=M.createStaticCanvas;return i=Z()({},Kc,this._options,p,i),qc(i,T,P)}},{key:"_bindEventOnShape",value:function(i){var p=this,M=this.getCanvas();i.on({added:function(){p._shapeObj=this,Bn().setOrigins(p._shapeObj)},selected:function(){p._isSelected=!0,p._shapeObj=this,M.uniformScaling=!0,M.defaultCursor="default",Bn().setOrigins(p._shapeObj)},deselected:function(){p._isSelected=!1,p._shapeObj=null,M.defaultCursor="crosshair",M.uniformScaling=!1},modified:function(){var P=p._shapeObj;Bn().adjustOriginToCenter(P),Bn().setOrigins(P)},modifiedInGroup:function(P){p._fillFilterRePositionInGroupSelection(i,P)},moving:function(){p._resetPositionFillFilter(this)},rotating:function(){p._resetPositionFillFilter(this)},scaling:function(P){var k=M.getPointer(P.e),z=p._shapeObj;M.setCursor("crosshair"),Bn().resize(z,k,!0),p._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(i){if(i.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var p=this.getCanvas();this._startPoint=p.getPointer(i.e),p.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(i){var p=this,M=this.getCanvas(),T=M.getPointer(i.e),P=this._startPoint.x,k=this._startPoint.y,z=P-T.x,U=k-T.y,re=this._shapeObj;re?(this._shapeObj.set({isRegular:this._withShiftKey}),Bn().resize(re,T),M.renderAll(),this._resetPositionFillFilter(re)):this.add(this._type,{left:P,top:k,width:z,height:U}).then(function(oe){p.fire(Ee.ADD_OBJECT,oe)})}},{key:"_onFabricMouseUp",value:function(){var i=this,p=this.getCanvas(),M=this._startPoint.x,T=this._startPoint.y,P=this._shapeObj;P?P&&(Bn().adjustOriginToCenter(P),this.fire(Ee.OBJECT_ADDED,this.graphics.createObjectProperties(P))):this.add(this._type,{left:M,top:T,width:Ey,height:My}).then(function(k){i.fire(Ee.ADD_OBJECT,k)}),p.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(i){i.keyCode===Tt.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(i){i.keyCode===Tt.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(i){if(Ws(i)==="filter"){var p=pr(i,"patternSourceCanvas"),M=p.patternSourceCanvas,T=ro(i),P=pr(T,"originalAngle"),k=P.originalAngle;this.graphics.canvasImage.angle!==k&&gy(i,this.graphics.canvasImage);var z=i.originX,U=i.originY;Bn().adjustOriginToCenter(i),i.width*=i.scaleX,i.height*=i.scaleY,i.rx*=i.scaleX,i.ry*=i.scaleY,i.scaleX=1,i.scaleY=1,cy(i),Xg(i,{originX:z,originY:U}),hy(M)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(i,p){(p.scaleX!==1||p.scaleY!==1)&&p.addWithUpdate();var M=i.angle,T=i.left,P=i.top;le.fabric.util.addTransformToObject(i,p.calcTransformMatrix()),this._resetPositionFillFilter(i),i.set({angle:M,left:T,top:P})}}]),o}(cn);function wy(A){var I=Ty();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Ty(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Js=10,eu={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},Qs={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},Ks={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},oo=1,tu=Ee.ZOOM_CHANGED,Ay=Ee.ADD_TEXT,Oy=Ee.TEXT_EDITING,Ny=Ee.OBJECT_MODIFIED,nu=Ee.KEY_DOWN,iu=Ee.KEY_UP,ky=Ee.HAND_STARTED,Py=Ee.HAND_STOPPED,Ly=function(A){yt(o,A);var I=wy(o);function o(g){var i,p,M,T,P,k,z,U,re,oe,pe,ue,ge;Y(this,o),ge=I.call(this,Le.ZOOM,g),ge.zoomArea=null,ge._startPoint=null,ge._centerPoints=[],ge.zoomLevel=oo,ge.zoomMode=Xt.DEFAULT,ge._listeners={startZoom:K()(i=ge._onMouseDownWithZoomMode).call(i,ct(ge)),moveZoom:K()(p=ge._onMouseMoveWithZoomMode).call(p,ct(ge)),stopZoom:K()(M=ge._onMouseUpWithZoomMode).call(M,ct(ge)),startHand:K()(T=ge._onMouseDownWithHandMode).call(T,ct(ge)),moveHand:K()(P=ge._onMouseMoveWithHandMode).call(P,ct(ge)),stopHand:K()(k=ge._onMouseUpWithHandMode).call(k,ct(ge)),zoomChanged:K()(z=ge._changeScrollState).call(z,ct(ge)),keydown:K()(U=ge._startHandModeWithSpaceBar).call(U,ct(ge)),keyup:K()(re=ge._endHandModeWithSpaceBar).call(re,ct(ge))};var Oe=ge.getCanvas();return ge.aspectRatio=Oe.width/Oe.height,ge._verticalScroll=new le.fabric.Rect(eu),ge._horizontalScroll=new le.fabric.Rect(eu),Oe.on(tu,ge._listeners.zoomChanged),ge.graphics.on(Ay,K()(oe=ge._startTextEditingHandler).call(oe,ct(ge))),ge.graphics.on(Oy,K()(pe=ge._startTextEditingHandler).call(pe,ct(ge))),ge.graphics.on(Ny,K()(ue=ge._stopTextEditingHandler).call(ue,ct(ge))),ge}return ne(o,[{key:"attachKeyboardZoomEvents",value:function(){le.fabric.util.addListener(document,nu,this._listeners.keydown),le.fabric.util.addListener(document,iu,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){le.fabric.util.removeListener(document,nu,this._listeners.keydown),le.fabric.util.removeListener(document,iu,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(i){this.withSpace||this.isTextEditing||i.keyCode===Tt.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(i){i.keyCode===Tt.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=Xt.ZOOM;var i=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new le.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),i.discardActiveObject(),i.add(this.zoomArea),i.on("mouse:down",this._listeners.startZoom),i.selection=!1,i.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=Xt.DEFAULT;var i=this.getCanvas(),p=this._listeners,M=p.startZoom,T=p.moveZoom,P=p.stopZoom;i.selection=!0,i.defaultCursor="auto",i.off({"mouse:down":M,"mouse:move":T,"mouse:up":P}),this._changeObjectsEventedState(!0),i.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=Xt.HAND;var i=this.getCanvas();this._changeObjectsEventedState(!1),i.discardActiveObject(),i.off("mouse:down",this._listeners.startHand),i.on("mouse:down",this._listeners.startHand),i.selection=!1,i.defaultCursor="grab",i.fire(ky)}},{key:"endHandMode",value:function(){this.zoomMode=Xt.DEFAULT;var i=this.getCanvas();this._changeObjectsEventedState(!0),i.off("mouse:down",this._listeners.startHand),i.selection=!0,i.defaultCursor="auto",this._startHandPoint=null,i.fire(Py)}},{key:"_onMouseDownWithZoomMode",value:function(i){var p=i.target,M=i.e;if(!p){var T=this.getCanvas();T.selection=!1,this._startPoint=T.getPointer(M),this.zoomArea.set({width:0,height:0});var P=this._listeners,k=P.moveZoom,z=P.stopZoom;T.on({"mouse:move":k,"mouse:up":z})}}},{key:"_onMouseMoveWithZoomMode",value:function(i){var p=i.e,M=this.getCanvas(),T=M.getPointer(p),P=T.x,k=T.y,z=this.zoomArea,U=this._startPoint,re=Math.abs(P-U.x),oe=Math.abs(k-U.y);re+oe>Js&&(M.remove(z),z.set(this._calcRectDimensionFromPoint(P,k)),M.add(z))}},{key:"_calcRectDimensionFromPoint",value:function(i,p){var M=this.getCanvas(),T=M.getWidth(),P=M.getHeight(),k=this._startPoint,z=k.x,U=k.y,re=Math.min,oe=re(z,i),pe=re(U,p),ue=et(i,z,T)-oe,ge=et(p,U,P)-pe;return{left:oe,top:pe,width:ue,height:ge}}},{key:"_onMouseUpWithZoomMode",value:function(){var i=this.zoomLevel,p=this.zoomArea,M=this._listeners,T=M.moveZoom,P=M.stopZoom,k=this.getCanvas(),z=this._getCenterPoint(),U=z.x,re=z.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:U,y:re,prevZoomLevel:i,zoomLevel:i+1}),i+=1,k.zoomToPoint({x:U,y:re},i),this._fireZoomChanged(k,i),this.zoomLevel=i),k.off({"mouse:move":T,"mouse:up":P}),k.remove(p),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var i=this.zoomArea,p=i.left,M=i.top,T=i.width,P=i.height,k=this._startPoint,z=k.x,U=k.y,re=this.aspectRatio;return T<Js&&P<Js?{x:z,y:U}:T>P?{x:p+re*P/2,y:M+P/2}:{x:p+T/2,y:M+T/re/2}}},{key:"zoom",value:function(i){for(var p=i.x,M=i.y,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,P=this.getCanvas(),k=this._centerPoints,z=k.length-1;z>=0&&!(k[z].zoomLevel<T);z-=1){var U=k.pop(),re=U.x,oe=U.y,pe=U.prevZoomLevel;P.zoomToPoint({x:re,y:oe},pe),this.zoomLevel=pe}P.zoomToPoint({x:p,y:M},T),this._isDefaultZoomLevel(T)||this._centerPoints.push({x:p,y:M,zoomLevel:T,prevZoomLevel:this.zoomLevel}),this.zoomLevel=T,this._fireZoomChanged(P,T)}},{key:"zoomOut",value:function(){var i=this._centerPoints;if(i.length){var p=this.getCanvas(),M=i.pop(),T=M.x,P=M.y,k=M.prevZoomLevel;this._isDefaultZoomLevel(k)?p.setViewportTransform([1,0,0,1,0,0]):p.zoomToPoint({x:T,y:P},k),this.zoomLevel=k,this._fireZoomChanged(p,this.zoomLevel)}}},{key:"resetZoom",value:function(){var i=this.getCanvas();i.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=oo,this._centerPoints=[],this._fireZoomChanged(i,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(i){var p=i.x,M=i.y,T=this._centerPoints;if(T.length){var P=this.getCanvas(),k=this.zoomLevel,z=T.pop(),U=z.x,re=z.y,oe=z.prevZoomLevel,pe=U-p,ue=re-M;P.zoomToPoint({x:U,y:re},oe),P.zoomToPoint({x:pe,y:ue},k),T.push({x:pe,y:ue,prevZoomLevel:oe,zoomLevel:k}),this._fireZoomChanged(P,k)}}},{key:"_onMouseDownWithHandMode",value:function(i){var p=i.target,M=i.e;if(!p){var T=this.getCanvas();if(!(this.zoomLevel<=oo)){T.selection=!1,this._startHandPoint=T.getPointer(M);var P=this._listeners,k=P.moveHand,z=P.stopHand;T.on({"mouse:move":k,"mouse:up":z})}}}},{key:"_onMouseMoveWithHandMode",value:function(i){var p=i.e,M=this.getCanvas(),T=M.getPointer(p),P=T.x,k=T.y,z=P-this._startHandPoint.x,U=k-this._startHandPoint.y;this._movePointOfZoom({x:z,y:U})}},{key:"_onMouseUpWithHandMode",value:function(){var i=this.getCanvas(),p=this._listeners,M=p.moveHand,T=p.stopHand;i.off({"mouse:move":M,"mouse:up":T}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(i){var p=i.viewport,M=i.zoomLevel,T=this.getCanvas();if(T.remove(this._verticalScroll),T.remove(this._horizontalScroll),!this._isDefaultZoomLevel(M)){var P=T.width,k=T.height,z=p.tl,U=p.tr,re=p.bl,oe=U.x-z.x,pe=re.y-z.y,ue=oe*oe/P,ge=pe*Ks.SIZE,Oe=et(z.x+z.x/P*oe,z.x,U.x-ue),Je=pe*Ks.MARGIN,Qe=pe*Ks.BORDER_RADIUS;this._horizontalScroll.set({left:Oe,top:re.y-ge-Je,width:ue,height:ge,rx:Qe,ry:Qe});var Ke=oe*Qs.SIZE,Re=pe*pe/k,dt=et(z.y+z.y/k*pe,U.y,re.y-Re),Gt=oe*Qs.MARGIN,nn=oe*Qs.BORDER_RADIUS;this._verticalScroll.set({left:U.x-Ke-Gt,top:dt,width:Ke,height:Re,rx:nn,ry:nn}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=this.getCanvas();p.forEachObject(function(M){M.evented=i})}},{key:"_addScrollBar",value:function(){var i=this,p=this.getCanvas();p.add(this._horizontalScroll),p.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=n()(function(){p.remove(i._horizontalScroll),p.remove(i._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(i){return i===oo}},{key:"_fireZoomChanged",value:function(i,p){i.fire(tu,{viewport:i.calcViewportBoundaries(),zoomLevel:p})}},{key:"mode",get:function(){return this.zoomMode}}]),o}(cn),Ry=Ly,ru=qr.create,ou=qr.types,jy=function(){function A(I){Y(this,A),this.name=I}return ne(A,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(ru(ou.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(ru(ou.UN_IMPLEMENTATION,"stop"))}}]),A}(),ei=jy;function Fy(A){var I=By();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function By(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var zy=function(A){yt(o,A);var I=Fy(o);function o(){return Y(this,o),I.call(this,ft.CROPPER)}return ne(o,[{key:"start",value:function(i){var p=i.getComponent(Le.CROPPER);p.start()}},{key:"end",value:function(i){var p=i.getComponent(Le.CROPPER);p.end()}}]),o}(ei),Hy=zy;function Uy(A){var I=Vy();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Vy(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Wy=function(A){yt(o,A);var I=Uy(o);function o(){return Y(this,o),I.call(this,ft.FREE_DRAWING)}return ne(o,[{key:"start",value:function(i,p){var M=i.getComponent(Le.FREE_DRAWING);M.start(p)}},{key:"end",value:function(i){var p=i.getComponent(Le.FREE_DRAWING);p.end()}}]),o}(ei),Gy=Wy;function Yy(A){var I=Xy();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Xy(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Zy=function(A){yt(o,A);var I=Yy(o);function o(){return Y(this,o),I.call(this,ft.LINE_DRAWING)}return ne(o,[{key:"start",value:function(i,p){var M=i.getComponent(Le.LINE);M.start(p)}},{key:"end",value:function(i){var p=i.getComponent(Le.LINE);p.end()}}]),o}(ei),$y=Zy;function Jy(A){var I=Qy();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function Qy(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var Ky=function(A){yt(o,A);var I=Jy(o);function o(){return Y(this,o),I.call(this,ft.SHAPE)}return ne(o,[{key:"start",value:function(i){var p=i.getComponent(Le.SHAPE);p.start()}},{key:"end",value:function(i){var p=i.getComponent(Le.SHAPE);p.end()}}]),o}(ei),qy=Ky;function eC(A){var I=tC();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function tC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var nC=function(A){yt(o,A);var I=eC(o);function o(){return Y(this,o),I.call(this,ft.TEXT)}return ne(o,[{key:"start",value:function(i){var p=i.getComponent(Le.TEXT);p.start()}},{key:"end",value:function(i){var p=i.getComponent(Le.TEXT);p.end()}}]),o}(ei),iC=nC;function rC(A){var I=oC();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function oC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var sC=function(A){yt(o,A);var I=rC(o);function o(){return Y(this,o),I.call(this,ft.ICON)}return ne(o,[{key:"start",value:function(i){var p=i.getComponent(Le.ICON);p.start()}},{key:"end",value:function(i){var p=i.getComponent(Le.ICON);p.end()}}]),o}(ei),aC=sC;function lC(A){var I=cC();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function cC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var uC=function(A){yt(o,A);var I=lC(o);function o(){return Y(this,o),I.call(this,ft.ZOOM)}return ne(o,[{key:"start",value:function(i){var p=i.getComponent(Le.ZOOM);p.start()}},{key:"end",value:function(i){var p=i.getComponent(Le.ZOOM);p.end()}}]),o}(ei),fC=uC,su=null;function au(A){su=A}function dC(){return su}function qs(A,I){var o;if(A.type==="activeSelection"){var g;o=wn()(g=A.getObjects()).call(g,function(i){var p=i.angle,M=i.left,T=i.top,P=i.scaleX,k=i.scaleY,z=i.width,U=i.height;le.fabric.util.addTransformToObject(i,A.calcTransformMatrix());var re=I(i);return i.set({angle:p,left:M,top:T,width:z,height:U,scaleX:P,scaleY:k}),re})}else o=[I(A)];return o}function ea(A,I,o){return o?{id:A,width:I.width,height:I.height,top:I.top,left:I.left,angle:I.angle,scaleX:I.scaleX,scaleY:I.scaleY}:Z()({id:A},I)}function hC(A){var I=gC();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function gC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var pC=function(A){yt(o,A);var I=hC(o);function o(g){var i;return Y(this,o),i=I.call(this,Le.RESIZE,g),i._dimensions=null,i._originalDimensions=null,i}return ne(o,[{key:"getCurrentDimensions",value:function(){var i=this.getCanvasImage();if(!this._dimensions&&i){var p=i.width,M=i.height;this._dimensions={width:p,height:M}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(i){this._originalDimensions=i}},{key:"resize",value:function(i){var p=this.getCanvasImage(),M=p.width,T=p.height,P=p.scaleX,k=p.scaleY,z=i.width,U=i.height,re={scaleX:z?z/M:P,scaleY:U?U/T:k};return(P!==re.scaleX||k!==re.scaleY)&&(p.set(re).setCoords(),this._dimensions={width:p.width*p.scaleX,height:p.height*p.scaleY}),this.adjustCanvasDimensionBase(),Ie().resolve()}},{key:"start",value:function(){var i=this.getCurrentDimensions();this.setOriginalDimensions(i)}},{key:"end",value:function(){}}]),o}(cn),vC=pC;function mC(A){var I=yC();return function(){var g=$e(A),i;if(I){var p=$e(this).constructor;i=_e()(g,arguments,p)}else i=g.apply(this,arguments);return Ct(this,i)}}function yC(){if(typeof Reflect>"u"||!_e()||_e().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(_e()(Boolean,[],function(){})),!0}catch{return!1}}var CC=function(A){yt(o,A);var I=mC(o);function o(){return Y(this,o),I.call(this,ft.RESIZE)}return ne(o,[{key:"start",value:function(i){var p=i.getComponent(Le.RESIZE);p.start()}},{key:"end",value:function(i){var p=i.getComponent(Le.RESIZE);p.end()}}]),o}(ei),IC=CC,bC=1e3,SC=800,so=10,DC={cssOnly:!0},xC={backstoreOnly:!0},lu=function(){function A(I){var o,g,i,p,M,T,P,k,z,U,re,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=oe.cssMaxWidth,ue=oe.cssMaxHeight;Y(this,A),this.canvasImage=null,this.cssMaxWidth=pe||bC,this.cssMaxHeight=ue||SC,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=ft.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:K()(o=this._onMouseDown).call(o,this),onObjectAdded:K()(g=this._onObjectAdded).call(g,this),onObjectRemoved:K()(i=this._onObjectRemoved).call(i,this),onObjectMoved:K()(p=this._onObjectMoved).call(p,this),onObjectScaled:K()(M=this._onObjectScaled).call(M,this),onObjectModified:K()(T=this._onObjectModified).call(T,this),onObjectRotated:K()(P=this._onObjectRotated).call(P,this),onObjectSelected:K()(k=this._onObjectSelected).call(k,this),onPathCreated:K()(z=this._onPathCreated).call(z,this),onSelectionCleared:K()(U=this._onSelectionCleared).call(U,this),onSelectionCreated:K()(re=this._onSelectionCreated).call(re,this)},this._setObjectCachingToFalse(),this._setCanvasElement(I),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return ne(A,[{key:"destroy",value:function(){var o=this._canvas.wrapperEl;this._canvas.clear(),o.parentNode.removeChild(o),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var o=this.getComponent(Le.ZOOM);o.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var o=this.getComponent(Le.ZOOM);o.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(o){var g,i=[];Vc()(o)?i=o:i.push(o),(g=this._canvas).add.apply(g,B(i))}},{key:"contains",value:function(o){return this._canvas.contains(o)}},{key:"getObjects",value:function(){var o;return C()(o=this._canvas.getObjects()).call(o)}},{key:"getObject",value:function(o){return this._objects[o]}},{key:"remove",value:function(o){this._canvas.remove(o)}},{key:"removeAll",value:function(o){var g,i=this._canvas,p=C()(g=i.getObjects()).call(g);return i.remove.apply(i,B(this._canvas.getObjects())),o&&i.clear(),p}},{key:"removeObjectById",value:function(o){var g=[],i=this._canvas,p=this.getObject(o),M=p&&p.isType("group")&&!p.isEmpty();return M?(i.discardActiveObject(),p.forEachObject(function(T){g.push(T),i.remove(T)})):i.contains(p)&&(g.push(p),i.remove(p)),g}},{key:"getObjectId",value:function(o){var g=null;for(g in this._objects)if(this._objects.hasOwnProperty(g)&&o===this._objects[g])return g;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var o=this.getActiveObject(),g=o.type,i=o.left,p=o.top,M=g==="activeSelection";if(M){var T=new le.fabric.Group(B(o.getObjects()),{left:i,top:p});return this._addFabricObject(T)}return this.getObjectId(o)}},{key:"isReadyRemoveObject",value:function(){var o=this.getActiveObject();return o&&!o.isEditing}},{key:"getActiveObjects",value:function(){var o=this._canvas._activeObject;return o&&o.type==="activeSelection"?o:null}},{key:"getActiveSelectionFromObjects",value:function(o){var g=this.getCanvas();return new le.fabric.ActiveSelection(o,{canvas:g})}},{key:"setActiveObject",value:function(o){this._canvas.setActiveObject(o)}},{key:"setCropSelectionStyle",value:function(o){this.cropSelectionStyle=o}},{key:"getComponent",value:function(o){return this._componentMap[o]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(o,g){if(this._isSameDrawingMode(o))return!0;this.stopDrawingMode();var i=this._getDrawingModeInstance(o);return i&&i.start&&(i.start(this,g),this._drawingMode=o),!!i}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(ft.NORMAL)){var o=this._getDrawingModeInstance(this.getDrawingMode());o&&o.end&&o.end(this),this._drawingMode=ft.NORMAL}}},{key:"zoom",value:function(o,g){var i=o.x,p=o.y,M=this.getComponent(Le.ZOOM);M.zoom({x:i,y:p},g)}},{key:"getZoomMode",value:function(){var o=this.getComponent(Le.ZOOM);return o.mode}},{key:"startZoomInMode",value:function(){var o=this.getComponent(Le.ZOOM);o.startZoomInMode()}},{key:"endZoomInMode",value:function(){var o=this.getComponent(Le.ZOOM);o.endZoomInMode()}},{key:"zoomOut",value:function(){var o=this.getComponent(Le.ZOOM);o.zoomOut()}},{key:"startHandMode",value:function(){var o=this.getComponent(Le.ZOOM);o.startHandMode()}},{key:"endHandMode",value:function(){var o=this.getComponent(Le.ZOOM);o.endHandMode()}},{key:"resetZoom",value:function(){var o=this.getComponent(Le.ZOOM);o.resetZoom()}},{key:"toDataURL",value:function(o){var g=this.getComponent(Le.CROPPER);g.changeVisibility(!1);var i=this._canvas&&this._canvas.toDataURL(o);return g.changeVisibility(!0),i}},{key:"setCanvasImage",value:function(o,g){g&&Pe(g),this.imageName=o,this.canvasImage=g}},{key:"setCssMaxDimension",value:function(o){this.cssMaxWidth=o.width||this.cssMaxWidth,this.cssMaxHeight=o.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;o||(o=this.canvasImage);var g=o.getBoundingRect(),i=g.width,p=g.height,M=this._calcMaxDimension(i,p);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(M.width,"px"),"max-height":"".concat(M.height,"px")}),this.setCanvasBackstoreDimension({width:i,height:p}),this._canvas.centerObject(o)}},{key:"setCanvasCssDimension",value:function(o){this._canvas.setDimensions(o,DC)}},{key:"setCanvasBackstoreDimension",value:function(o){this._canvas.setDimensions(o,xC)}},{key:"setImageProperties",value:function(o,g){var i=this.canvasImage;i&&(i.set(o).setCoords(),g&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(o){var g,i=this,p=K()(g=this._callbackAfterLoadingImageObject).call(g,this);return new(Ie())(function(M){le.fabric.Image.fromURL(o,function(T){p(T),M(i.createObjectProperties(T))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(Le.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(o){this.getComponent(Le.CROPPER).setCropzoneRect(o)}},{key:"getCroppedImageData",value:function(o){return this.getComponent(Le.CROPPER).getCroppedImageData(o)}},{key:"setBrush",value:function(o){var g=this._drawingMode,i=Le.FREE_DRAWING;g===ft.LINE_DRAWING&&(i=Le.LINE),this.getComponent(i).setBrush(o)}},{key:"setDrawingShape",value:function(o,g){this.getComponent(Le.SHAPE).setStates(o,g)}},{key:"setIconStyle",value:function(o,g){this.getComponent(Le.ICON).setStates(o,g)}},{key:"registerPaths",value:function(o){this.getComponent(Le.ICON).registerPaths(o)}},{key:"changeCursor",value:function(o){var g=this.getCanvas();g.defaultCursor=o,g.renderAll()}},{key:"hasFilter",value:function(o){return this.getComponent(Le.FILTER).hasFilter(o)}},{key:"setSelectionStyle",value:function(o){Z()(gn.SELECTION_STYLE,o)}},{key:"setObjectProperties",value:function(o,g){var i=this.getObject(o),p=Z()({},g);return i.set(p),i.setCoords(),this.getCanvas().renderAll(),p}},{key:"getObjectProperties",value:function(o,g){var i=this.getObject(o),p={};return Se()(g)?p[g]=i[g]:Vc()(g)?vr()(g,function(M){p[M]=i[M]}):to()(g,function(M,T){p[T]=i[T]}),p}},{key:"getObjectPosition",value:function(o,g,i){var p=this.getObject(o);return p?p.getPointByOrigin(g,i):null}},{key:"setObjectPosition",value:function(o,g){var i=this.getObject(o),p=g.x,M=g.y,T=g.originX,P=g.originY;if(!i)return!1;var k=i.getPointByOrigin(T,P),z=i.getPointByOrigin("center","center"),U=z.x-k.x,re=z.y-k.y;return i.set({left:p+U,top:M+re}),i.setCoords(),!0}},{key:"getCanvasSize",value:function(){var o=this.getCanvasImage();return{width:o?o.width:0,height:o?o.height:0}}},{key:"createStaticCanvas",value:function(){var o=new le.fabric.StaticCanvas;return o.set({enableRetinaScaling:!1}),o}},{key:"_getDrawingModeInstance",value:function(o){return this._drawingModeMap[o]}},{key:"_setObjectCachingToFalse",value:function(){le.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(o){var g,i;o.nodeType?g=o:g=document.querySelector(o),g.nodeName.toUpperCase()!=="CANVAS"&&(i=document.createElement("canvas"),g.appendChild(i)),this._canvas=new le.fabric.Canvas(i,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new Hy),this._register(this._drawingModeMap,new Gy),this._register(this._drawingModeMap,new $y),this._register(this._drawingModeMap,new qy),this._register(this._drawingModeMap,new iC),this._register(this._drawingModeMap,new aC),this._register(this._drawingModeMap,new fC),this._register(this._drawingModeMap,new IC)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new qv(this)),this._register(this._componentMap,new vm(this)),this._register(this._componentMap,new Im(this)),this._register(this._componentMap,new xm(this)),this._register(this._componentMap,new wm(this)),this._register(this._componentMap,new Rm(this)),this._register(this._componentMap,new Vm(this)),this._register(this._componentMap,new Zm(this)),this._register(this._componentMap,new sy(this)),this._register(this._componentMap,new _y(this)),this._register(this._componentMap,new Ry(this)),this._register(this._componentMap,new vC(this))}},{key:"_register",value:function(o,g){o[g.getName()]=g}},{key:"_isSameDrawingMode",value:function(o){return this.getDrawingMode()===o}},{key:"_calcMaxDimension",value:function(o,g){var i=this.cssMaxWidth/o,p=this.cssMaxHeight/g,M=Math.min(o,this.cssMaxWidth),T=Math.min(g,this.cssMaxHeight);return i<1&&i<p?(M=o*i,T=g*i):p<1&&p<i&&(M=o*p,T=g*p),{width:Math.floor(M),height:Math.floor(T)}}},{key:"_callbackAfterLoadingImageObject",value:function(o){var g=this.getCanvasImage().getCenterPoint();o.set(gn.SELECTION_STYLE),o.set({left:g.x,top:g.y,crossOrigin:"Anonymous"}),this.getCanvas().add(o).setActiveObject(o)}},{key:"_attachCanvasEvents",value:function(){var o=this._canvas,g=this._handler;o.on({"mouse:down":g.onMouseDown,"object:added":g.onObjectAdded,"object:removed":g.onObjectRemoved,"object:moving":g.onObjectMoved,"object:scaling":g.onObjectScaled,"object:modified":g.onObjectModified,"object:rotating":g.onObjectRotated,"path:created":g.onPathCreated,"selection:cleared":g.onSelectionCleared,"selection:created":g.onSelectionCreated,"selection:updated":g.onObjectSelected})}},{key:"_onMouseDown",value:function(o){var g=this,i=o.e,p=o.target,M=this._canvas.getPointer(i);if(p){var T=p.type,P=qs(p,function(k){return ea(g.getObjectId(k),k,T==="activeSelection")});au(P)}this.fire(Ee.MOUSE_DOWN,i,M)}},{key:"_onObjectAdded",value:function(o){var g=o.target;g.isType("cropzone")||this._addFabricObject(g)}},{key:"_onObjectRemoved",value:function(o){var g=o.target;this._removeFabricObject(Pe(g))}},{key:"_onObjectMoved",value:function(o){var g=this;this._lazyFire(Ee.OBJECT_MOVED,function(i){return g.createObjectProperties(i)},o.target)}},{key:"_onObjectScaled",value:function(o){var g=this;this._lazyFire(Ee.OBJECT_SCALED,function(i){return g.createObjectProperties(i)},o.target)}},{key:"_onObjectModified",value:function(o){var g=o.target;if(g.type==="activeSelection"){var i=g.getObjects();Ve()(i).call(i,function(p){return p.fire("modifiedInGroup",g)})}this.fire(Ee.OBJECT_MODIFIED,g,this.getObjectId(g))}},{key:"_onObjectRotated",value:function(o){var g=this;this._lazyFire(Ee.OBJECT_ROTATED,function(i){return g.createObjectProperties(i)},o.target)}},{key:"_lazyFire",value:function(o,g,i){var p=this,M=i&&i.canvasEventDelegation,T=M?i.canvasEventDelegation(o):"none";T==="unregistered"&&i.canvasEventRegister(o,function(P){p.fire(o,g(P))}),T==="none"&&this.fire(o,g(i))}},{key:"_onObjectSelected",value:function(o){var g=o.target,i=this.createObjectProperties(g);this.fire(Ee.OBJECT_ACTIVATED,i)}},{key:"_onPathCreated",value:function(o){var g=o.path.getCenterPoint(),i=g.x,p=g.y;o.path.set(Z()({left:i,top:p},gn.SELECTION_STYLE));var M=this.createObjectProperties(o.path);this.fire(Ee.ADD_OBJECT,M)}},{key:"_onSelectionCleared",value:function(){this.fire(Ee.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(o){var g=o.target,i=this.createObjectProperties(g);this.fire(Ee.OBJECT_ACTIVATED,i),this.fire(Ee.SELECTION_CREATED,o.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(o){this._canvas.forEachObject(function(g){g.selectable=o,g.hoverCursor=o?"move":"crosshair"})}},{key:"createObjectProperties",value:function(o){var g=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],i={id:Pe(o),type:o.type};if(Z()(i,Qt(o,g)),Kr(["i-text","text"],o.type))Z()(i,this._createTextProperties(o,i));else if(Kr(["rect","triangle","circle"],o.type)){var p=this.getComponent(Le.SHAPE);Z()(i,{fill:p.makeFillPropertyForUserEvent(o)})}return i}},{key:"_createTextProperties",value:function(o){var g=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],i={};return Z()(i,Qt(o,g)),i}},{key:"_addFabricObject",value:function(o){var g=Pe(o);return this._objects[g]=o,g}},{key:"_removeFabricObject",value:function(o){delete this._objects[o]}},{key:"resetTargetObjectForCopyPaste",value:function(){var o=this.getActiveObject();o&&(this.targetObjectForCopyPaste=o)}},{key:"pasteObject",value:function(){var o=this;if(!this.targetObjectForCopyPaste)return Ie().resolve([]);var g=this.targetObjectForCopyPaste,i=g.type==="activeSelection",p=i?g.getObjects():[g],M=null;return this.discardSelection(),this._cloneObject(p).then(function(T){if(T.length>1)M=o.getActiveSelectionFromObjects(T);else{var P=ce(T,1);M=P[0]}o.targetObjectForCopyPaste=M,o.setActiveObject(M)})}},{key:"_cloneObject",value:function(o){var g=this,i=wn()(o).call(o,function(p){return g._cloneObjectItem(p)});return Ie().all(i)}},{key:"_cloneObjectItem",value:function(o){var g=this;return this._copyFabricObjectForPaste(o).then(function(i){var p=g.createObjectProperties(i);return g.add(i),g.fire(Ee.ADD_OBJECT,p),i})}},{key:"_copyFabricObjectForPaste",value:function(o){var g=this,i=function(M,T){return T?M-so:M+so};return this._copyFabricObject(o).then(function(p){var M=p.left,T=p.top,P=p.width,k=p.height,z=g.getCanvasSize(),U=z.width,re=z.height,oe=M+P/2,pe=T+k/2;return p.set(Z()({left:i(M,oe+so>U),top:i(T,pe+so>re)},gn.SELECTION_STYLE)),p})}},{key:"_copyFabricObject",value:function(o){var g=this;return new(Ie())(function(i){o.clone(function(p){var M=g.getComponent(Le.SHAPE);bc(p)&&M.processForCopiedObject(p,o),i(p)})})}},{key:"getCurrentDimensions",value:function(){var o=this.getComponent(Le.RESIZE);return o.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var o=this.getComponent(Le.RESIZE);return o.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(o){var g=this.getComponent(Le.RESIZE);g.setOriginalDimensions(o)}},{key:"resize",value:function(o){var g=this.getComponent(Le.RESIZE);return g.resize(o)}}]),A}();ve().mixin(lu);var EC=lu,MC=Ee.MOUSE_DOWN,_C=Ee.OBJECT_MOVED,wC=Ee.OBJECT_SCALED,TC=Ee.OBJECT_ACTIVATED,AC=Ee.OBJECT_ROTATED,cu=Ee.OBJECT_ADDED,OC=Ee.OBJECT_MODIFIED,NC=Ee.ADD_TEXT,kC=Ee.ADD_OBJECT,PC=Ee.TEXT_EDITING,LC=Ee.TEXT_CHANGED,RC=Ee.ICON_CREATE_RESIZE,jC=Ee.ICON_CREATE_END,uu=Ee.SELECTION_CLEARED,fu=Ee.SELECTION_CREATED,FC=Ee.ADD_OBJECT_AFTER,ta=function(){function A(I,o){var g,i,p,M,T,P,k,z,U,re,oe,pe,ue,ge,Oe,Je;if(Y(this,A),o=Z()({includeUI:!1,usageStatistics:!0},o),this.mode=null,this.activeObjectId=null,o.includeUI){var Qe=o.includeUI;Qe.usageStatistics=o.usageStatistics,this.ui=new Vv(I,Qe,this.getActions()),o=this.ui.setUiDefaultSelectionStyle(o)}this._invoker=new ap,this._graphics=new EC(this.ui?this.ui.getEditorArea():I,{cssMaxWidth:o.cssMaxWidth,cssMaxHeight:o.cssMaxHeight}),this._handlers={keydown:K()(g=this._onKeyDown).call(g,this),mousedown:K()(i=this._onMouseDown).call(i,this),objectActivated:K()(p=this._onObjectActivated).call(p,this),objectMoved:K()(M=this._onObjectMoved).call(M,this),objectScaled:K()(T=this._onObjectScaled).call(T,this),objectRotated:K()(P=this._onObjectRotated).call(P,this),objectAdded:K()(k=this._onObjectAdded).call(k,this),objectModified:K()(z=this._onObjectModified).call(z,this),createdPath:this._onCreatedPath,addText:K()(U=this._onAddText).call(U,this),addObject:K()(re=this._onAddObject).call(re,this),textEditing:K()(oe=this._onTextEditing).call(oe,this),textChanged:K()(pe=this._onTextChanged).call(pe,this),iconCreateResize:K()(ue=this._onIconCreateResize).call(ue,this),iconCreateEnd:K()(ge=this._onIconCreateEnd).call(ge,this),selectionCleared:K()(Oe=this._selectionCleared).call(Oe,this),selectionCreated:K()(Je=this._selectionCreated).call(Je,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(o.selectionStyle,{applyCropSelectionStyle:o.applyCropSelectionStyle,applyGroupSelectionStyle:o.applyGroupSelectionStyle}),o.usageStatistics&&$r(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),le.fabric.enableGLFiltering=!1}return ne(A,[{key:"_attachColorPickerInputBoxEvents",value:function(){var o=this;this.ui.on(Ee.INPUT_BOX_EDITING_STARTED,function(){o.isColorPickerInputBoxEditing=!0}),this.ui.on(Ee.INPUT_BOX_EDITING_STOPPED,function(){o.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(Ee.INPUT_BOX_EDITING_STARTED),this.ui.off(Ee.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(o,g){var i=g.applyCropSelectionStyle,p=g.applyGroupSelectionStyle;o&&this._graphics.setSelectionStyle(o),i&&this._graphics.setCropSelectionStyle(o),p&&this.on("selectionCreated",function(M){M.type==="activeSelection"&&M.set(o)})}},{key:"_attachInvokerEvents",value:function(){var o,g,i=this,p=Ee.UNDO_STACK_CHANGED,M=Ee.REDO_STACK_CHANGED,T=Ee.EXECUTE_COMMAND,P=Ee.AFTER_UNDO,k=Ee.AFTER_REDO,z=Ee.HAND_STARTED,U=Ee.HAND_STOPPED;if(this._invoker.on(p,K()(o=this.fire).call(o,this,p)),this._invoker.on(M,K()(g=this.fire).call(g,this,M)),this.ui){var re=this._graphics.getCanvas();this._invoker.on(T,function(oe){return i.ui.fire(T,oe)}),this._invoker.on(P,function(oe){return i.ui.fire(P,oe)}),this._invoker.on(k,function(oe){return i.ui.fire(k,oe)}),re.on(z,function(){return i.ui.fire(z)}),re.on(U,function(){return i.ui.fire(U)})}}},{key:"_attachGraphicsEvents",value:function(){var o;this._graphics.on((o={},H(o,MC,this._handlers.mousedown),H(o,_C,this._handlers.objectMoved),H(o,wC,this._handlers.objectScaled),H(o,AC,this._handlers.objectRotated),H(o,TC,this._handlers.objectActivated),H(o,cu,this._handlers.objectAdded),H(o,OC,this._handlers.objectModified),H(o,NC,this._handlers.addText),H(o,kC,this._handlers.addObject),H(o,PC,this._handlers.textEditing),H(o,LC,this._handlers.textChanged),H(o,RC,this._handlers.iconCreateResize),H(o,jC,this._handlers.iconCreateEnd),H(o,uu,this._handlers.selectionCleared),H(o,fu,this._handlers.selectionCreated),o))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(o){var g=o.ctrlKey,i=o.keyCode,p=o.metaKey,M=g||p;M&&(i===Tt.C?this._graphics.resetTargetObjectForCopyPaste():i===Tt.V?(this._graphics.pasteObject(),this.clearRedoStack()):i===Tt.Z?this.undo().catch(function(){}):i===Tt.Y&&this.redo().catch(function(){}));var T=i===Tt.BACKSPACE||i===Tt.DEL,P=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&P&&T&&(o.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var o=this._graphics.getActiveObjectIdForRemove();this.removeObject(o)}},{key:"_onMouseDown",value:function(o,g){this.fire(Ee.MOUSE_DOWN,o,g)}},{key:"_pushAddObjectCommand",value:function(o){var g=At.create(Ge.ADD_OBJECT,this._graphics,o);this._invoker.pushUndoStack(g)}},{key:"_pushModifyObjectCommand",value:function(o){var g=this,i=o.type,p=qs(o,function(T){return ea(g._graphics.getObjectId(T),T,i==="activeSelection")}),M=At.create(Ge.CHANGE_SELECTION,this._graphics,p);M.execute(this._graphics,p),this._invoker.pushUndoStack(M)}},{key:"_onObjectActivated",value:function(o){this.fire(Ee.OBJECT_ACTIVATED,o)}},{key:"_onObjectMoved",value:function(o){this.fire(Ee.OBJECT_MOVED,o)}},{key:"_onObjectScaled",value:function(o){this.fire(Ee.OBJECT_SCALED,o)}},{key:"_onObjectRotated",value:function(o){this.fire(Ee.OBJECT_ROTATED,o)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Ge.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(o){this._graphics.changeSelectableAll(o)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(o){for(var g,i,p,M=arguments.length,T=new Array(M>1?M-1:0),P=1;P<M;P++)T[P-1]=arguments[P];var k=W()(g=[this._graphics]).call(g,T);return(i=this._invoker).execute.apply(i,W()(p=[o]).call(p,B(k)))}},{key:"executeSilent",value:function(o){for(var g,i,p,M=arguments.length,T=new Array(M>1?M-1:0),P=1;P<M;P++)T[P-1]=arguments[P];var k=W()(g=[this._graphics]).call(g,T);return(i=this._invoker).executeSilent.apply(i,W()(p=[o]).call(p,B(k)))}},{key:"undo",value:function(){for(var o=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=Ie().resolve(),p=0;p<g;p+=1)i=i.then(function(){return o._invoker.undo()});return i}},{key:"redo",value:function(){for(var o=this,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=Ie().resolve(),p=0;p<g;p+=1)i=i.then(function(){return o._invoker.redo()});return i}},{key:"zoom",value:function(o){var g=o.x,i=o.y,p=o.zoomLevel;this._graphics.zoom({x:g,y:i},p)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(o,g){if(!o)return Ie().reject(mt.invalidParameters);var i=te().createObjectURL(o);return g=g||o.name,this.loadImageFromURL(i,g).then(function(p){return te().revokeObjectURL(o),p})}},{key:"loadImageFromURL",value:function(o,g){return!g||!o?Ie().reject(mt.invalidParameters):this.execute(Ge.LOAD_IMAGE,g,o)}},{key:"addImageObject",value:function(o){return o?this.execute(Ge.ADD_IMAGE_OBJECT,o):Ie().reject(mt.invalidParameters)}},{key:"startDrawingMode",value:function(o,g){return this._graphics.startDrawingMode(o,g)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(o){var g=this._graphics.getCroppedImageData(o);return g?this.loadImageFromURL(g.url,g.imageName):Ie().reject(mt.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(o){this._graphics.setCropzoneRect(o)}},{key:"_flip",value:function(o){return this.execute(Ge.FLIP_IMAGE,o)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(o,g,i){var p=null;return i?p=this.executeSilent(Ge.ROTATE_IMAGE,o,g):p=this.execute(Ge.ROTATE_IMAGE,o,g),p}},{key:"rotate",value:function(o,g){return this._rotate("rotate",o,g)}},{key:"setAngle",value:function(o,g){return this._rotate("setAngle",o,g)}},{key:"setBrush",value:function(o){this._graphics.setBrush(o)}},{key:"setDrawingShape",value:function(o,g){this._graphics.setDrawingShape(o,g)}},{key:"setDrawingIcon",value:function(o,g){this._graphics.setIconStyle(o,g)}},{key:"addShape",value:function(o,g){return g=g||{},this._setPositions(g),this.execute(Ge.ADD_SHAPE,o,g)}},{key:"changeShape",value:function(o,g,i){var p=i?"executeSilent":"execute";return this[p](Ge.CHANGE_SHAPE,o,g)}},{key:"addText",value:function(o,g){return o=o||"",g=g||{},this.execute(Ge.ADD_TEXT,o,g)}},{key:"changeText",value:function(o,g){return g=g||"",this.execute(Ge.CHANGE_TEXT,o,g)}},{key:"changeTextStyle",value:function(o,g,i){var p=i?"executeSilent":"execute";return this[p](Ge.CHANGE_TEXT_STYLE,o,g)}},{key:"_changeActivateMode",value:function(o){o!=="ICON"&&this.getDrawingMode()!==o&&this.startDrawingMode(o)}},{key:"_onTextChanged",value:function(o){this.fire(Ee.TEXT_CHANGED,o)}},{key:"_onIconCreateResize",value:function(o){this.fire(Ee.ICON_CREATE_RESIZE,o)}},{key:"_onIconCreateEnd",value:function(o){this.fire(Ee.ICON_CREATE_END,o)}},{key:"_onTextEditing",value:function(){this.fire(Ee.TEXT_EDITING)}},{key:"_onAddText",value:function(o){this.fire(Ee.ADD_TEXT,{originPosition:o.originPosition,clientPosition:o.clientPosition})}},{key:"_onAddObject",value:function(o){var g=this._graphics.getObject(o.id);this._invoker.fire(Ee.EXECUTE_COMMAND,Gs(g.type)),this._pushAddObjectCommand(g)}},{key:"_onObjectAdded",value:function(o){this.fire(cu,o),this.fire(FC,o)}},{key:"_onObjectModified",value:function(o){o.type!==Ue.CROPZONE&&(this._invoker.fire(Ee.EXECUTE_COMMAND,Gs(o.type)),this._pushModifyObjectCommand(o))}},{key:"_selectionCleared",value:function(){this.fire(uu)}},{key:"_selectionCreated",value:function(o){this.fire(fu,o)}},{key:"registerIcons",value:function(o){this._graphics.registerPaths(o)}},{key:"changeCursor",value:function(o){this._graphics.changeCursor(o)}},{key:"addIcon",value:function(o,g){return g=g||{},this._setPositions(g),this.execute(Ge.ADD_ICON,o,g)}},{key:"changeIconColor",value:function(o,g){return this.execute(Ge.CHANGE_ICON_COLOR,o,g)}},{key:"removeObject",value:function(o){var g=this._graphics.getObject(o),i=g.type;return this.execute(Ge.REMOVE_OBJECT,o,Gs(i))}},{key:"hasFilter",value:function(o){return this._graphics.hasFilter(o)}},{key:"removeFilter",value:function(o){return this.execute(Ge.REMOVE_FILTER,o)}},{key:"applyFilter",value:function(o,g,i){var p=i?"executeSilent":"execute";return this[p](Ge.APPLY_FILTER,o,g)}},{key:"toDataURL",value:function(o){return this._graphics.toDataURL(o)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(o){return o?this.execute(Ge.RESIZE_CANVAS_DIMENSION,o):Ie().reject(mt.invalidParameters)}},{key:"destroy",value:function(){var o=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),J()(this,function(g,i){o[i]=null},this)}},{key:"_setPositions",value:function(o){var g=this._graphics.getCenter();G()(o.left)&&(o.left=g.left),G()(o.top)&&(o.top=g.top)}},{key:"setObjectProperties",value:function(o,g){return this.execute(Ge.SET_OBJECT_PROPERTIES,o,g)}},{key:"setObjectPropertiesQuietly",value:function(o,g){this._graphics.setObjectProperties(o,g)}},{key:"getObjectProperties",value:function(o,g){var i=this._graphics.getObject(o);return i?this._graphics.getObjectProperties(o,g):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(o,g,i){return this._graphics.getObjectPosition(o,g,i)}},{key:"setObjectPosition",value:function(o,g){return this.execute(Ge.SET_OBJECT_POSITION,o,g)}},{key:"resize",value:function(o){return this.execute(Ge.RESIZE_IMAGE,o)}}]),A}();Gv.mixin(ta),ve().mixin(ta);var BC=ta,zC=Le.ICON,HC={name:Ge.ADD_ICON,execute:function(I,o,g){var i=this,p=I.getComponent(zC);return p.add(o,g).then(function(M){return i.undoData.object=I.getObject(M.id),M})},undo:function(I){return I.remove(this.undoData.object),Ie().resolve()}};At.register(HC);var fE=null,UC={name:Ge.ADD_IMAGE_OBJECT,execute:function(I,o){var g=this;return I.addImageObject(o).then(function(i){return g.undoData.object=I.getObject(i.id),i})},undo:function(I){return I.remove(this.undoData.object),Ie().resolve()}};At.register(UC);var dE=null,VC={name:Ge.ADD_OBJECT,execute:function(I,o){return new(Ie())(function(g,i){I.contains(o)?i(mt.addedObject):(I.add(o),g(o))})},undo:function(I,o){return new(Ie())(function(g,i){I.contains(o)?(I.remove(o),g(o)):i(mt.noObject)})}};At.register(VC);var hE=null,WC=Le.SHAPE,GC={name:Ge.ADD_SHAPE,execute:function(I,o,g){var i=this,p=I.getComponent(WC);return p.add(o,g).then(function(M){var T=M.id;return i.undoData.object=I.getObject(T),M})},undo:function(I){return I.remove(this.undoData.object),Ie().resolve()}};At.register(GC);var gE=null,YC=Le.TEXT,XC={name:Ge.ADD_TEXT,execute:function(I,o,g){var i=this,p=I.getComponent(YC);if(this.undoData.object){var M=this.undoData.object;return new(Ie())(function(T,P){I.contains(M)?P(mt.redo):(I.add(M),T(M))})}return p.add(o,g).then(function(T){var P=T.id,k=I.getObject(P);return i.undoData.object=k,au(qs(k,function(){return ea(P,k,!1)})),T})},undo:function(I){return I.remove(this.undoData.object),Ie().resolve()}};At.register(XC);var pE=null,du=Le.FILTER,hu=null;function ZC(A,I,o){var g={};return A==="mask"&&(g.object=o.mask),g.options=I,g}var $C={name:Ge.APPLY_FILTER,execute:function(I,o,g,i){var p=I.getComponent(du);if(o==="mask"){var M=I.getObject(g.maskObjId);if(!(M&&M.isType("image")))return Ie().reject(mt.invalidParameters);Z()(g,{mask:M}),I.remove(g.mask)}if(!this.isRedo){var T=p.getOptions(o),P=ZC(o,T,g);hu=this.setUndoData(P,hu,i)}return p.add(o,g)},undo:function(I,o){var g=I.getComponent(du);if(o==="mask"){var i=this.undoData.object;return I.add(i),I.setActiveObject(i),g.remove(o)}return this.undoData.options?g.add(o,this.undoData.options):g.remove(o)}};At.register($C);var vE=null,gu=Le.ICON,JC={name:Ge.CHANGE_ICON_COLOR,execute:function(I,o,g){var i=this;return new(Ie())(function(p,M){var T=I.getComponent(gu),P=I.getObject(o);P||M(mt.noObject),i.undoData.object=P,i.undoData.color=T.getColor(P),T.setColor(g,P),p()})},undo:function(I){var o=I.getComponent(gu),g=this.undoData,i=g.object,p=g.color;return o.setColor(p,i),Ie().resolve()}};At.register(JC);var mE=null,pu=Le.SHAPE,vu=null;function QC(A,I){var o={object:I,options:{}};return to()(A,function(g,i){o.options[i]=I[i]}),o}var KC={name:Ge.CHANGE_SHAPE,execute:function(I,o,g,i){var p=I.getComponent(pu),M=I.getObject(o);if(!M)return Ie().reject(mt.noObject);if(!this.isRedo){var T=QC(g,M);vu=this.setUndoData(T,vu,i)}return p.change(M,g)},undo:function(I){var o=I.getComponent(pu),g=this.undoData,i=g.object,p=g.options;return o.change(i,p)}};At.register(KC);var yE=null,mu=Le.TEXT,qC={name:Ge.CHANGE_TEXT,execute:function(I,o,g){var i=I.getComponent(mu),p=I.getObject(o);return p?(this.undoData.object=p,this.undoData.text=i.getText(p),i.change(p,g)):Ie().reject(mt.noObject)},undo:function(I){var o=I.getComponent(mu),g=this.undoData,i=g.object,p=g.text;return o.change(i,p)}};At.register(qC);var CE=null,yu=Le.TEXT,Cu=null;function eI(A,I){var o={object:I,styles:{}};return to()(A,function(g,i){var p=I[i];o.styles[i]=p}),o}var tI={name:Ge.CHANGE_TEXT_STYLE,execute:function(I,o,g,i){var p=I.getComponent(yu),M=I.getObject(o);if(!M)return Ie().reject(mt.noObject);if(!this.isRedo){var T=eI(g,M);Cu=this.setUndoData(T,Cu,i)}return p.setStyle(M,g)},undo:function(I){var o=I.getComponent(yu),g=this.undoData,i=g.object,p=g.styles;return o.setStyle(i,p)}};At.register(tI);var IE=null,nI={name:Ge.CLEAR_OBJECTS,execute:function(I){var o=this;return new(Ie())(function(g){o.undoData.objects=I.removeAll(),g()})},undo:function(I){return I.add(this.undoData.objects),Ie().resolve()}};At.register(nI);var bE=null,Iu=Le.FLIP,iI={name:Ge.FLIP_IMAGE,execute:function(I,o){var g=I.getComponent(Iu);return this.undoData.setting=g.getCurrentSetting(),g[o]()},undo:function(I){var o=I.getComponent(Iu);return o.set(this.undoData.setting)}};At.register(iI);var SE=null,bu=Le.IMAGE_LOADER,rI={name:Ge.LOAD_IMAGE,execute:function(I,o,g){var i,p=I.getComponent(bu),M=p.getCanvasImage(),T=M?M.width:0,P=M?M.height:0,k=Pi()(i=I.removeAll(!0)).call(i,function(z){return z.type!=="cropzone"});return Ve()(k).call(k,function(z){z.evented=!0}),this.undoData={name:p.getImageName(),image:M,objects:k},p.load(o,g).then(function(z){return{oldWidth:T,oldHeight:P,newWidth:z.width,newHeight:z.height}})},undo:function(I){var o=I.getComponent(bu),g=this.undoData,i=g.objects,p=g.name,M=g.image;return I.removeAll(!0),I.add(i),o.load(p,M)}};At.register(rI);var DE=null,Su=Le.FILTER,oI={name:Ge.REMOVE_FILTER,execute:function(I,o){var g=I.getComponent(Su);return this.undoData.options=g.getOptions(o),g.remove(o)},undo:function(I,o){var g=I.getComponent(Su),i=this.undoData.options;return g.add(o,i)}};At.register(oI);var xE=null,sI={name:Ge.REMOVE_OBJECT,execute:function(I,o){var g=this;return new(Ie())(function(i,p){g.undoData.objects=I.removeObjectById(o),g.undoData.objects.length?i():p(mt.noObject)})},undo:function(I){return I.add(this.undoData.objects),Ie().resolve()}};At.register(sI);var EE=null,aI={name:Ge.RESIZE_CANVAS_DIMENSION,execute:function(I,o){var g=this;return new(Ie())(function(i){g.undoData.size={width:I.cssMaxWidth,height:I.cssMaxHeight},I.setCssMaxDimension(o),I.adjustCanvasDimension(),i()})},undo:function(I){return I.setCssMaxDimension(this.undoData.size),I.adjustCanvasDimension(),Ie().resolve()}};At.register(aI);var ME=null,Du=Le.ROTATION,xu=null;function lI(A){return{angle:A.getCurrentAngle()}}var cI={name:Ge.ROTATE_IMAGE,execute:function(I,o,g,i){var p=I.getComponent(Du);if(!this.isRedo){var M=lI(p);xu=this.setUndoData(M,xu,i)}return p[o](g)},undo:function(I){var o=I.getComponent(Du),g=ce(this.args,3),i=g[1],p=g[2];return i==="setAngle"?o[i](this.undoData.angle):o.rotate(-p)}};At.register(cI);var _E=null,uI={name:Ge.SET_OBJECT_PROPERTIES,execute:function(I,o,g){var i=this,p=I.getObject(o);return p?(this.undoData.props={},to()(g,function(M,T){i.undoData.props[T]=p[T]}),I.setObjectProperties(o,g),Ie().resolve()):Ie().reject(mt.noObject)},undo:function(I,o){var g=this.undoData.props;return I.setObjectProperties(o,g),Ie().resolve()}};At.register(uI);var wE=null,fI={name:Ge.SET_OBJECT_POSITION,execute:function(I,o,g){var i=I.getObject(o);return i?(this.undoData.objectId=o,this.undoData.props=I.getObjectProperties(o,["left","top"]),I.setObjectPosition(o,g),I.renderAll(),Ie().resolve()):Ie().reject(mt.noObject)},undo:function(I){var o=this.undoData,g=o.objectId,i=o.props;return I.setObjectProperties(g,i),I.renderAll(),Ie().resolve()}};At.register(fI);var TE=null,dI={name:Ge.CHANGE_SELECTION,execute:function(I,o){return this.isRedo?Ve()(o).call(o,function(g){I.setObjectProperties(g.id,g)}):this.undoData=dC(),Ie().resolve()},undo:function(I){var o;return Ve()(o=this.undoData).call(o,function(g){I.setObjectProperties(g.id,g)}),Ie().resolve()}};At.register(dI);var AE=null,Eu=Le.RESIZE,hI={name:Ge.RESIZE_IMAGE,execute:function(I,o){var g=I.getComponent(Eu),i=g.getOriginalDimensions();return i||(i=g.getCurrentDimensions()),this.undoData.dimensions=i,g.resize(o)},undo:function(I){var o=I.getComponent(Eu);return o.resize(this.undoData.dimensions)}};At.register(hI);var OE=null,gI=BC}(),D=D.default,D}()})});var oa=null;var ra=1,Wu=Symbol("SIGNAL");function It(e){let t=oa;return oa=e,t}function Gu(){return oa}var sa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xI(e){if(!(fa(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ra)){if(!e.producerMustRecompute(e)&&!la(e)){e.dirty=!1,e.lastCleanEpoch=ra;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ra}}function aa(e){return e&&(e.nextProducerIndex=0),It(e)}function Yu(e,t){if(It(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(fa(e))for(let a=e.nextProducerIndex;a<e.producerNode.length;a++)ua(e.producerNode[a],e.producerIndexOfThis[a]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function la(e){da(e);for(let t=0;t<e.producerNode.length;t++){let a=e.producerNode[t],d=e.producerLastReadVersion[t];if(d!==a.version||(xI(a),d!==a.version))return!0}return!1}function ca(e){if(da(e),fa(e))for(let t=0;t<e.producerNode.length;t++)ua(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function ua(e,t){if(EI(e),e.liveConsumerNode.length===1&&MI(e))for(let d=0;d<e.producerNode.length;d++)ua(e.producerNode[d],e.producerIndexOfThis[d]);let a=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[a],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[a],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let d=e.liveConsumerIndexOfThis[t],D=e.liveConsumerNode[t];da(D),D.producerIndexOfThis[d]=t}}function fa(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function da(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function EI(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function MI(e){return e.producerNode!==void 0}function _I(){throw new Error}var wI=_I;function Xu(e){wI=e}function tt(e){return typeof e=="function"}function Mo(e){let a=e(d=>{Error.call(d),d.stack=new Error().stack});return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}var _o=Mo(e=>function(a){e(this),this.message=a?`${a.length} errors occurred during unsubscription:
${a.map((d,D)=>`${D+1}) ${d.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=a});function di(e,t){if(e){let a=e.indexOf(t);0<=a&&e.splice(a,1)}}var Ut=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:a}=this;if(a)if(this._parentage=null,Array.isArray(a))for(let y of a)y.remove(this);else a.remove(this);let{initialTeardown:d}=this;if(tt(d))try{d()}catch(y){t=y instanceof _o?y.errors:[y]}let{_finalizers:D}=this;if(D){this._finalizers=null;for(let y of D)try{Zu(y)}catch(x){t=t??[],x instanceof _o?t=[...t,...x.errors]:t.push(x)}}if(t)throw new _o(t)}}add(t){var a;if(t&&t!==this)if(this.closed)Zu(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(a=this._finalizers)!==null&&a!==void 0?a:[]).push(t)}}_hasParent(t){let{_parentage:a}=this;return a===t||Array.isArray(a)&&a.includes(t)}_addParent(t){let{_parentage:a}=this;this._parentage=Array.isArray(a)?(a.push(t),a):a?[a,t]:t}_removeParent(t){let{_parentage:a}=this;a===t?this._parentage=null:Array.isArray(a)&&di(a,t)}remove(t){let{_finalizers:a}=this;a&&di(a,t),t instanceof e&&t._removeParent(this)}};Ut.EMPTY=(()=>{let e=new Ut;return e.closed=!0,e})();var ha=Ut.EMPTY;function wo(e){return e instanceof Ut||e&&"closed"in e&&tt(e.remove)&&tt(e.add)&&tt(e.unsubscribe)}function Zu(e){tt(e)?e():e.unsubscribe()}var yn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Li={setTimeout(e,t,...a){let{delegate:d}=Li;return d?.setTimeout?d.setTimeout(e,t,...a):setTimeout(e,t,...a)},clearTimeout(e){let{delegate:t}=Li;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function To(e){Li.setTimeout(()=>{let{onUnhandledError:t}=yn;if(t)t(e);else throw e})}function hi(){}var $u=ga("C",void 0,void 0);function Ju(e){return ga("E",void 0,e)}function Qu(e){return ga("N",e,void 0)}function ga(e,t,a){return{kind:e,value:t,error:a}}var gi=null;function Ri(e){if(yn.useDeprecatedSynchronousErrorHandling){let t=!gi;if(t&&(gi={errorThrown:!1,error:null}),e(),t){let{errorThrown:a,error:d}=gi;if(gi=null,a)throw d}}else e()}function Ku(e){yn.useDeprecatedSynchronousErrorHandling&&gi&&(gi.errorThrown=!0,gi.error=e)}var pi=class extends Ut{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,wo(t)&&t.add(this)):this.destination=OI}static create(t,a,d){return new ji(t,a,d)}next(t){this.isStopped?va(Qu(t),this):this._next(t)}error(t){this.isStopped?va(Ju(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?va($u,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},TI=Function.prototype.bind;function pa(e,t){return TI.call(e,t)}var ma=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:a}=this;if(a.next)try{a.next(t)}catch(d){Ao(d)}}error(t){let{partialObserver:a}=this;if(a.error)try{a.error(t)}catch(d){Ao(d)}else Ao(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(a){Ao(a)}}},ji=class extends pi{constructor(t,a,d){super();let D;if(tt(t)||!t)D={next:t??void 0,error:a??void 0,complete:d??void 0};else{let y;this&&yn.useDeprecatedNextContext?(y=Object.create(t),y.unsubscribe=()=>this.unsubscribe(),D={next:t.next&&pa(t.next,y),error:t.error&&pa(t.error,y),complete:t.complete&&pa(t.complete,y)}):D=t}this.destination=new ma(D)}};function Ao(e){yn.useDeprecatedSynchronousErrorHandling?Ku(e):To(e)}function AI(e){throw e}function va(e,t){let{onStoppedNotification:a}=yn;a&&Li.setTimeout(()=>a(e,t))}var OI={closed:!0,next:hi,error:AI,complete:hi};var Fi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Bi(e){return e}function qu(e){return e.length===0?Bi:e.length===1?e[0]:function(a){return e.reduce((d,D)=>D(d),a)}}var gt=(()=>{class e{constructor(a){a&&(this._subscribe=a)}lift(a){let d=new e;return d.source=this,d.operator=a,d}subscribe(a,d,D){let y=kI(a)?a:new ji(a,d,D);return Ri(()=>{let{operator:x,source:c}=this;y.add(x?x.call(y,c):c?this._subscribe(y):this._trySubscribe(y))}),y}_trySubscribe(a){try{return this._subscribe(a)}catch(d){a.error(d)}}forEach(a,d){return d=ef(d),new d((D,y)=>{let x=new ji({next:c=>{try{a(c)}catch(u){y(u),x.unsubscribe()}},error:y,complete:D});this.subscribe(x)})}_subscribe(a){var d;return(d=this.source)===null||d===void 0?void 0:d.subscribe(a)}[Fi](){return this}pipe(...a){return qu(a)(this)}toPromise(a){return a=ef(a),new a((d,D)=>{let y;this.subscribe(x=>y=x,x=>D(x),()=>d(y))})}}return e.create=t=>new e(t),e})();function ef(e){var t;return(t=e??yn.Promise)!==null&&t!==void 0?t:Promise}function NI(e){return e&&tt(e.next)&&tt(e.error)&&tt(e.complete)}function kI(e){return e&&e instanceof pi||NI(e)&&wo(e)}function ya(e){return tt(e?.lift)}function Rt(e){return t=>{if(ya(t))return t.lift(function(a){try{return e(a,this)}catch(d){this.error(d)}});throw new TypeError("Unable to lift unknown Observable type")}}function jt(e,t,a,d,D){return new Ca(e,t,a,d,D)}var Ca=class extends pi{constructor(t,a,d,D,y,x){super(t),this.onFinalize=y,this.shouldUnsubscribe=x,this._next=a?function(c){try{a(c)}catch(u){t.error(u)}}:super._next,this._error=D?function(c){try{D(c)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=d?function(){try{d()}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:a}=this;super.unsubscribe(),!a&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function tf(){return Rt((e,t)=>{let a=null;e._refCount++;let d=jt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){a=null;return}let D=e._connection,y=a;a=null,D&&(!y||D===y)&&D.unsubscribe(),t.unsubscribe()});e.subscribe(d),d.closed||(a=e.connect())})}var Oo=class extends gt{constructor(t,a){super(),this.source=t,this.subjectFactory=a,this._subject=null,this._refCount=0,this._connection=null,ya(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ut;let a=this.getSubject();t.add(this.source.subscribe(jt(a,void 0,()=>{this._teardown(),a.complete()},d=>{this._teardown(),a.error(d)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ut.EMPTY)}return t}refCount(){return tf()(this)}};var nf=Mo(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tn=(()=>{class e extends gt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(a){let d=new No(this,this);return d.operator=a,d}_throwIfClosed(){if(this.closed)throw new nf}next(a){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let d of this.currentObservers)d.next(a)}})}error(a){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=a;let{observers:d}=this;for(;d.length;)d.shift().error(a)}})}complete(){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:a}=this;for(;a.length;)a.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var a;return((a=this.observers)===null||a===void 0?void 0:a.length)>0}_trySubscribe(a){return this._throwIfClosed(),super._trySubscribe(a)}_subscribe(a){return this._throwIfClosed(),this._checkFinalizedStatuses(a),this._innerSubscribe(a)}_innerSubscribe(a){let{hasError:d,isStopped:D,observers:y}=this;return d||D?ha:(this.currentObservers=null,y.push(a),new Ut(()=>{this.currentObservers=null,di(y,a)}))}_checkFinalizedStatuses(a){let{hasError:d,thrownError:D,isStopped:y}=this;d?a.error(D):y&&a.complete()}asObservable(){let a=new gt;return a.source=this,a}}return e.create=(t,a)=>new No(t,a),e})(),No=class extends tn{constructor(t,a){super(),this.destination=t,this.source=a}next(t){var a,d;(d=(a=this.destination)===null||a===void 0?void 0:a.next)===null||d===void 0||d.call(a,t)}error(t){var a,d;(d=(a=this.destination)===null||a===void 0?void 0:a.error)===null||d===void 0||d.call(a,t)}complete(){var t,a;(a=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||a===void 0||a.call(t)}_subscribe(t){var a,d;return(d=(a=this.source)===null||a===void 0?void 0:a.subscribe(t))!==null&&d!==void 0?d:ha}};var Ir=class extends tn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let a=super._subscribe(t);return!a.closed&&t.next(this._value),a}getValue(){let{hasError:t,thrownError:a,_value:d}=this;if(t)throw a;return this._throwIfClosed(),d}next(t){super.next(this._value=t)}};var Ia={now(){return(Ia.delegate||Date).now()},delegate:void 0};var ko=class extends Ut{constructor(t,a){super()}schedule(t,a=0){return this}};var br={setInterval(e,t,...a){let{delegate:d}=br;return d?.setInterval?d.setInterval(e,t,...a):setInterval(e,t,...a)},clearInterval(e){let{delegate:t}=br;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Po=class extends ko{constructor(t,a){super(t,a),this.scheduler=t,this.work=a,this.pending=!1}schedule(t,a=0){var d;if(this.closed)return this;this.state=t;let D=this.id,y=this.scheduler;return D!=null&&(this.id=this.recycleAsyncId(y,D,a)),this.pending=!0,this.delay=a,this.id=(d=this.id)!==null&&d!==void 0?d:this.requestAsyncId(y,this.id,a),this}requestAsyncId(t,a,d=0){return br.setInterval(t.flush.bind(t,this),d)}recycleAsyncId(t,a,d=0){if(d!=null&&this.delay===d&&this.pending===!1)return a;a!=null&&br.clearInterval(a)}execute(t,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let d=this._execute(t,a);if(d)return d;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,a){let d=!1,D;try{this.work(t)}catch(y){d=!0,D=y||new Error("Scheduled action threw falsy error")}if(d)return this.unsubscribe(),D}unsubscribe(){if(!this.closed){let{id:t,scheduler:a}=this,{actions:d}=a;this.work=this.state=this.scheduler=null,this.pending=!1,di(d,this),t!=null&&(this.id=this.recycleAsyncId(a,t,null)),this.delay=null,super.unsubscribe()}}};var zi=class e{constructor(t,a=e.now){this.schedulerActionCtor=t,this.now=a}schedule(t,a=0,d){return new this.schedulerActionCtor(this,t).schedule(d,a)}};zi.now=Ia.now;var Lo=class extends zi{constructor(t,a=zi.now){super(t,a),this.actions=[],this._active=!1}flush(t){let{actions:a}=this;if(this._active){a.push(t);return}let d;this._active=!0;do if(d=t.execute(t.state,t.delay))break;while(t=a.shift());if(this._active=!1,d){for(;t=a.shift();)t.unsubscribe();throw d}}};var ba=new Lo(Po),rf=ba;var Ro=new gt(e=>e.complete());function jo(e){return e&&tt(e.schedule)}function of(e){return e[e.length-1]}function Hi(e){return jo(of(e))?e.pop():void 0}function sf(e,t){return typeof of(e)=="number"?e.pop():t}function lf(e,t,a,d){function D(y){return y instanceof a?y:new a(function(x){x(y)})}return new(a||(a=Promise))(function(y,x){function c(N){try{w(d.next(N))}catch(L){x(L)}}function u(N){try{w(d.throw(N))}catch(L){x(L)}}function w(N){N.done?y(N.value):D(N.value).then(c,u)}w((d=d.apply(e,t||[])).next())})}function af(e){var t=typeof Symbol=="function"&&Symbol.iterator,a=t&&e[t],d=0;if(a)return a.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&d>=e.length&&(e=void 0),{value:e&&e[d++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vi(e){return this instanceof vi?(this.v=e,this):new vi(e)}function cf(e,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=a.apply(e,t||[]),D,y=[];return D={},c("next"),c("throw"),c("return",x),D[Symbol.asyncIterator]=function(){return this},D;function x(R){return function(C){return Promise.resolve(C).then(R,L)}}function c(R,C){d[R]&&(D[R]=function(s){return new Promise(function(m,v){y.push([R,s,m,v])>1||u(R,s)})},C&&(D[R]=C(D[R])))}function u(R,C){try{w(d[R](C))}catch(s){F(y[0][3],s)}}function w(R){R.value instanceof vi?Promise.resolve(R.value.v).then(N,L):F(y[0][2],R)}function N(R){u("next",R)}function L(R){u("throw",R)}function F(R,C){R(C),y.shift(),y.length&&u(y[0][0],y[0][1])}}function uf(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],a;return t?t.call(e):(e=typeof af=="function"?af(e):e[Symbol.iterator](),a={},d("next"),d("throw"),d("return"),a[Symbol.asyncIterator]=function(){return this},a);function d(y){a[y]=e[y]&&function(x){return new Promise(function(c,u){x=e[y](x),D(c,u,x.done,x.value)})}}function D(y,x,c,u){Promise.resolve(u).then(function(w){y({value:w,done:c})},x)}}var Ui=e=>e&&typeof e.length=="number"&&typeof e!="function";function Fo(e){return tt(e?.then)}function Bo(e){return tt(e[Fi])}function zo(e){return Symbol.asyncIterator&&tt(e?.[Symbol.asyncIterator])}function Ho(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Uo=PI();function Vo(e){return tt(e?.[Uo])}function Wo(e){return cf(this,arguments,function*(){let a=e.getReader();try{for(;;){let{value:d,done:D}=yield vi(a.read());if(D)return yield vi(void 0);yield yield vi(d)}}finally{a.releaseLock()}})}function Go(e){return tt(e?.getReader)}function Ft(e){if(e instanceof gt)return e;if(e!=null){if(Bo(e))return LI(e);if(Ui(e))return RI(e);if(Fo(e))return jI(e);if(zo(e))return ff(e);if(Vo(e))return FI(e);if(Go(e))return BI(e)}throw Ho(e)}function LI(e){return new gt(t=>{let a=e[Fi]();if(tt(a.subscribe))return a.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function RI(e){return new gt(t=>{for(let a=0;a<e.length&&!t.closed;a++)t.next(e[a]);t.complete()})}function jI(e){return new gt(t=>{e.then(a=>{t.closed||(t.next(a),t.complete())},a=>t.error(a)).then(null,To)})}function FI(e){return new gt(t=>{for(let a of e)if(t.next(a),t.closed)return;t.complete()})}function ff(e){return new gt(t=>{zI(e,t).catch(a=>t.error(a))})}function BI(e){return ff(Wo(e))}function zI(e,t){var a,d,D,y;return lf(this,void 0,void 0,function*(){try{for(a=uf(e);d=yield a.next(),!d.done;){let x=d.value;if(t.next(x),t.closed)return}}catch(x){D={error:x}}finally{try{d&&!d.done&&(y=a.return)&&(yield y.call(a))}finally{if(D)throw D.error}}t.complete()})}function un(e,t,a,d=0,D=!1){let y=t.schedule(function(){a(),D?e.add(this.schedule(null,d)):this.unsubscribe()},d);if(e.add(y),!D)return y}function Yo(e,t=0){return Rt((a,d)=>{a.subscribe(jt(d,D=>un(d,e,()=>d.next(D),t),()=>un(d,e,()=>d.complete(),t),D=>un(d,e,()=>d.error(D),t)))})}function Xo(e,t=0){return Rt((a,d)=>{d.add(e.schedule(()=>a.subscribe(d),t))})}function df(e,t){return Ft(e).pipe(Xo(t),Yo(t))}function hf(e,t){return Ft(e).pipe(Xo(t),Yo(t))}function gf(e,t){return new gt(a=>{let d=0;return t.schedule(function(){d===e.length?a.complete():(a.next(e[d++]),a.closed||this.schedule())})})}function pf(e,t){return new gt(a=>{let d;return un(a,t,()=>{d=e[Uo](),un(a,t,()=>{let D,y;try{({value:D,done:y}=d.next())}catch(x){a.error(x);return}y?a.complete():a.next(D)},0,!0)}),()=>tt(d?.return)&&d.return()})}function Zo(e,t){if(!e)throw new Error("Iterable cannot be null");return new gt(a=>{un(a,t,()=>{let d=e[Symbol.asyncIterator]();un(a,t,()=>{d.next().then(D=>{D.done?a.complete():a.next(D.value)})},0,!0)})})}function vf(e,t){return Zo(Wo(e),t)}function mf(e,t){if(e!=null){if(Bo(e))return df(e,t);if(Ui(e))return gf(e,t);if(Fo(e))return hf(e,t);if(zo(e))return Zo(e,t);if(Vo(e))return pf(e,t);if(Go(e))return vf(e,t)}throw Ho(e)}function Vi(e,t){return t?mf(e,t):Ft(e)}function Sr(...e){let t=Hi(e);return Vi(e,t)}function Sa(e,t){let a=tt(e)?e:()=>e,d=D=>D.error(a());return new gt(t?D=>t.schedule(d,0,D):d)}function yf(e){return e instanceof Date&&!isNaN(e)}function Zt(e,t){return Rt((a,d)=>{let D=0;a.subscribe(jt(d,y=>{d.next(e.call(t,y,D++))}))})}var{isArray:HI}=Array;function UI(e,t){return HI(t)?e(...t):e(t)}function Cf(e){return Zt(t=>UI(e,t))}function If(e,t,a,d,D,y,x,c){let u=[],w=0,N=0,L=!1,F=()=>{L&&!u.length&&!w&&t.complete()},R=s=>w<d?C(s):u.push(s),C=s=>{y&&t.next(s),w++;let m=!1;Ft(a(s,N++)).subscribe(jt(t,v=>{D?.(v),y?R(v):t.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(w--;u.length&&w<d;){let v=u.shift();x?un(t,x,()=>C(v)):C(v)}F()}catch(v){t.error(v)}}))};return e.subscribe(jt(t,R,()=>{L=!0,F()})),()=>{c?.()}}function mi(e,t,a=1/0){return tt(t)?mi((d,D)=>Zt((y,x)=>t(d,y,D,x))(Ft(e(d,D))),a):(typeof t=="number"&&(a=t),Rt((d,D)=>If(d,D,e,a)))}function $o(e=1/0){return mi(Bi,e)}function bf(){return $o(1)}function Dr(...e){return bf()(Vi(e,Hi(e)))}function Jo(e){return new gt(t=>{Ft(e()).subscribe(t)})}var VI=["addListener","removeListener"],WI=["addEventListener","removeEventListener"],GI=["on","off"];function Wi(e,t,a,d){if(tt(a)&&(d=a,a=void 0),d)return Wi(e,t,a).pipe(Cf(d));let[D,y]=ZI(e)?WI.map(x=>c=>e[x](t,c,a)):YI(e)?VI.map(Sf(e,t)):XI(e)?GI.map(Sf(e,t)):[];if(!D&&Ui(e))return mi(x=>Wi(x,t,a))(Ft(e));if(!D)throw new TypeError("Invalid event target");return new gt(x=>{let c=(...u)=>x.next(1<u.length?u:u[0]);return D(c),()=>y(c)})}function Sf(e,t){return a=>d=>e[a](t,d)}function YI(e){return tt(e.addListener)&&tt(e.removeListener)}function XI(e){return tt(e.on)&&tt(e.off)}function ZI(e){return tt(e.addEventListener)&&tt(e.removeEventListener)}function Df(e=0,t,a=rf){let d=-1;return t!=null&&(jo(t)?a=t:d=t),new gt(D=>{let y=yf(e)?+e-a.now():e;y<0&&(y=0);let x=0;return a.schedule(function(){D.closed||(D.next(x++),0<=d?this.schedule(void 0,d):D.complete())},y)})}function Qo(...e){let t=Hi(e),a=sf(e,1/0),d=e;return d.length?d.length===1?Ft(d[0]):$o(a)(Vi(d,t)):Ro}var yi=new gt(hi);function Ci(e,t){return Rt((a,d)=>{let D=0;a.subscribe(jt(d,y=>e.call(t,y,D++)&&d.next(y)))})}function xf(e){return new gt(t=>e.subscribe(t))}var $I={connector:()=>new tn};function Ko(e,t=$I){let{connector:a}=t;return Rt((d,D)=>{let y=a();Ft(e(xf(y))).subscribe(D),D.add(d.subscribe(y))})}function Cn(e){return e<=0?()=>Ro:Rt((t,a)=>{let d=0;t.subscribe(jt(a,D=>{++d<=e&&(a.next(D),e<=d&&a.complete())}))})}function Ef(){return Rt((e,t)=>{e.subscribe(jt(t,hi))})}function Mf(e){return Zt(()=>e)}function Da(e,t){return t?a=>Dr(t.pipe(Cn(1),Ef()),a.pipe(Da(e))):mi((a,d)=>Ft(e(a,d)).pipe(Cn(1),Mf(a)))}function xa(e,t=ba){let a=Df(e,t);return Da(()=>a)}function _f(e,t){let a=tt(e)?e:()=>e;return tt(t)?Ko(t,{connector:a}):d=>new Oo(d,a)}function Ea(e){return e?t=>Ko(e)(t):t=>_f(new tn)(t)}function Gi(e,t){return Rt((a,d)=>{let D=null,y=0,x=!1,c=()=>x&&!D&&d.complete();a.subscribe(jt(d,u=>{D?.unsubscribe();let w=0,N=y++;Ft(e(u,N)).subscribe(D=jt(d,L=>d.next(t?t(u,L,N,w++):L),()=>{D=null,c()}))},()=>{x=!0,c()}))})}function Ma(e,t,a){let d=tt(e)||t||a?{next:e,error:t,complete:a}:e;return d?Rt((D,y)=>{var x;(x=d.subscribe)===null||x===void 0||x.call(d);let c=!0;D.subscribe(jt(y,u=>{var w;(w=d.next)===null||w===void 0||w.call(d,u),y.next(u)},()=>{var u;c=!1,(u=d.complete)===null||u===void 0||u.call(d),y.complete()},u=>{var w;c=!1,(w=d.error)===null||w===void 0||w.call(d,u),y.error(u)},()=>{var u,w;c&&((u=d.unsubscribe)===null||u===void 0||u.call(d)),(w=d.finalize)===null||w===void 0||w.call(d)}))}):Bi}var ud="https://g.co/ng/security#xss",bt=class extends Error{constructor(t,a){super(yl(t,a)),this.code=t}};function yl(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function fd(e){return{toString:e}.toString()}var Ra=globalThis;function Ot(e){for(let t in e)if(e[t]===Ot)return t;throw Error("Could not find renamed property on target object.")}function fn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(fn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let a=t.indexOf(`
`);return a===-1?t:t.substring(0,a)}function wf(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var JI=Ot({__forward_ref__:Ot});function dd(e){return e.__forward_ref__=dd,e.toString=function(){return fn(this())},e}function bn(e){return QI(e)?e():e}function QI(e){return typeof e=="function"&&e.hasOwnProperty(JI)&&e.__forward_ref__===dd}function xt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Cl(e){return Tf(e,hd)||Tf(e,gd)}function Tf(e,t){return e.hasOwnProperty(t)?e[t]:null}function KI(e){let t=e&&(e[hd]||e[gd]);return t||null}function Af(e){return e&&(e.hasOwnProperty(Of)||e.hasOwnProperty(qI))?e[Of]:null}var hd=Ot({\u0275prov:Ot}),Of=Ot({\u0275inj:Ot}),gd=Ot({ngInjectableDef:Ot}),qI=Ot({ngInjectorDef:Ot}),St=class{constructor(t,a){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof a=="number"?this.__NG_ELEMENT_ID__=a:a!==void 0&&(this.\u0275prov=xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pd(e){return e&&!!e.\u0275providers}var e0=Ot({\u0275cmp:Ot}),t0=Ot({\u0275dir:Ot}),n0=Ot({\u0275pipe:Ot});var Nf=Ot({\u0275fac:Ot}),xr=Ot({__NG_ELEMENT_ID__:Ot}),kf=Ot({__NG_ENV_ID__:Ot});function vd(e){return typeof e=="string"?e:e==null?"":String(e)}function i0(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():vd(e)}function r0(e,t){let a=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new bt(-200,e)}function Il(e,t){throw new bt(-201,!1)}var st=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(st||{}),ja;function md(){return ja}function An(e){let t=ja;return ja=e,t}function yd(e,t,a){let d=Cl(e);if(d&&d.providedIn=="root")return d.value===void 0?d.value=d.factory():d.value;if(a&st.Optional)return null;if(t!==void 0)return t;Il(e,"Injector")}var o0={},Er=o0,s0="__NG_DI_FLAG__",os="ngTempTokenPath",a0="ngTokenPath",l0=/\n/gm,c0="\u0275",Pf="__source",Ji;function u0(){return Ji}function Yi(e){let t=Ji;return Ji=e,t}function f0(e,t=st.Default){if(Ji===void 0)throw new bt(-203,!1);return Ji===null?yd(e,void 0,t):Ji.get(e,t&st.Optional?null:void 0,t)}function ht(e,t=st.Default){return(md()||f0)(bn(e),t)}function Mt(e,t=st.Default){return ht(e,Ds(t))}function Ds(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Fa(e){let t=[];for(let a=0;a<e.length;a++){let d=bn(e[a]);if(Array.isArray(d)){if(d.length===0)throw new bt(900,!1);let D,y=st.Default;for(let x=0;x<d.length;x++){let c=d[x],u=d0(c);typeof u=="number"?u===-1?D=c.token:y|=u:D=c}t.push(ht(D,y))}else t.push(ht(d))}return t}function d0(e){return e[s0]}function h0(e,t,a,d){let D=e[os];throw t[Pf]&&D.unshift(t[Pf]),e.message=g0(`
`+e.message,D,a,d),e[a0]=D,e[os]=null,e}function g0(e,t,a,d=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==c0?e.slice(2):e;let D=fn(t);if(Array.isArray(t))D=t.map(fn).join(" -> ");else if(typeof t=="object"){let y=[];for(let x in t)if(t.hasOwnProperty(x)){let c=t[x];y.push(x+":"+(typeof c=="string"?JSON.stringify(c):fn(c)))}D=`{${y.join(", ")}}`}return`${a}${d?"("+d+")":""}[${D}]: ${e.replace(l0,`
  `)}`}function Mr(e,t){let a=e.hasOwnProperty(Nf);return a?e[Nf]:null}function p0(e,t,a){if(e.length!==t.length)return!1;for(let d=0;d<e.length;d++){let D=e[d],y=t[d];if(a&&(D=a(D),y=a(y)),y!==D)return!1}return!0}function v0(e){return e.flat(Number.POSITIVE_INFINITY)}function bl(e,t){e.forEach(a=>Array.isArray(a)?bl(a,t):t(a))}function Cd(e,t,a){t>=e.length?e.push(a):e.splice(t,0,a)}function ss(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var _r={},Ki=[],wr=new St(""),Id=new St("",-1),bd=new St(""),as=class{get(t,a=Er){if(a===Er){let d=new Error(`NullInjectorError: No provider for ${fn(t)}!`);throw d.name="NullInjectorError",d}return a}},Sd=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Sd||{}),Pn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Pn||{}),oi=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(oi||{});function m0(e,t,a){let d=e.length;for(;;){let D=e.indexOf(t,a);if(D===-1)return D;if(D===0||e.charCodeAt(D-1)<=32){let y=t.length;if(D+y===d||e.charCodeAt(D+y)<=32)return D}a=D+1}}function Ba(e,t,a){let d=0;for(;d<a.length;){let D=a[d];if(typeof D=="number"){if(D!==0)break;d++;let y=a[d++],x=a[d++],c=a[d++];e.setAttribute(t,x,c,y)}else{let y=D,x=a[++d];C0(y)?e.setProperty(t,y,x):e.setAttribute(t,y,x),d++}}return d}function y0(e){return e===3||e===4||e===6}function C0(e){return e.charCodeAt(0)===64}function Sl(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let a=-1;for(let d=0;d<t.length;d++){let D=t[d];typeof D=="number"?a=D:a===0||(a===-1||a===2?Lf(e,a,D,null,t[++d]):Lf(e,a,D,null,null))}}return e}function Lf(e,t,a,d,D){let y=0,x=e.length;if(t===-1)x=-1;else for(;y<e.length;){let c=e[y++];if(typeof c=="number"){if(c===t){x=-1;break}else if(c>t){x=y-1;break}}}for(;y<e.length;){let c=e[y];if(typeof c=="number")break;if(c===a){if(d===null){D!==null&&(e[y+1]=D);return}else if(d===e[y+1]){e[y+2]=D;return}}y++,d!==null&&y++,D!==null&&y++}x!==-1&&(e.splice(x,0,t),y=x+1),e.splice(y++,0,a),d!==null&&e.splice(y++,0,d),D!==null&&e.splice(y++,0,D)}var Dd="ng-template";function I0(e,t,a,d){let D=0;if(d){for(;D<t.length&&typeof t[D]=="string";D+=2)if(t[D]==="class"&&m0(t[D+1].toLowerCase(),a,0)!==-1)return!0}else if(Dl(e))return!1;if(D=t.indexOf(1,D),D>-1){let y;for(;++D<t.length&&typeof(y=t[D])=="string";)if(y.toLowerCase()===a)return!0}return!1}function Dl(e){return e.type===4&&e.value!==Dd}function b0(e,t,a){let d=e.type===4&&!a?Dd:e.value;return t===d}function S0(e,t,a){let d=4,D=e.attrs,y=D!==null?E0(D):0,x=!1;for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="number"){if(!x&&!In(d)&&!In(u))return!1;if(x&&In(u))continue;x=!1,d=u|d&1;continue}if(!x)if(d&4){if(d=2|d&1,u!==""&&!b0(e,u,a)||u===""&&t.length===1){if(In(d))return!1;x=!0}}else if(d&8){if(D===null||!I0(e,D,u,a)){if(In(d))return!1;x=!0}}else{let w=t[++c],N=D0(u,D,Dl(e),a);if(N===-1){if(In(d))return!1;x=!0;continue}if(w!==""){let L;if(N>y?L="":L=D[N+1].toLowerCase(),d&2&&w!==L){if(In(d))return!1;x=!0}}}}return In(d)||x}function In(e){return(e&1)===0}function D0(e,t,a,d){if(t===null)return-1;let D=0;if(d||!a){let y=!1;for(;D<t.length;){let x=t[D];if(x===e)return D;if(x===3||x===6)y=!0;else if(x===1||x===2){let c=t[++D];for(;typeof c=="string";)c=t[++D];continue}else{if(x===4)break;if(x===0){D+=4;continue}}D+=y?1:2}return-1}else return M0(t,e)}function x0(e,t,a=!1){for(let d=0;d<t.length;d++)if(S0(e,t[d],a))return!0;return!1}function E0(e){for(let t=0;t<e.length;t++){let a=e[t];if(y0(a))return t}return e.length}function M0(e,t){let a=e.indexOf(4);if(a>-1)for(a++;a<e.length;){let d=e[a];if(typeof d=="number")return-1;if(d===t)return a;a++}return-1}function Rf(e,t){return e?":not("+t.trim()+")":t}function _0(e){let t=e[0],a=1,d=2,D="",y=!1;for(;a<e.length;){let x=e[a];if(typeof x=="string")if(d&2){let c=e[++a];D+="["+x+(c.length>0?'="'+c+'"':"")+"]"}else d&8?D+="."+x:d&4&&(D+=" "+x);else D!==""&&!In(x)&&(t+=Rf(y,D),D=""),d=x,y=y||!In(d);a++}return D!==""&&(t+=Rf(y,D)),t}function w0(e){return e.map(_0).join(",")}function T0(e){let t=[],a=[],d=1,D=2;for(;d<e.length;){let y=e[d];if(typeof y=="string")D===2?y!==""&&t.push(y,e[++d]):D===8&&a.push(y);else{if(!In(D))break;D=y}d++}return{attrs:t,classes:a}}function xs(e){return fd(()=>{let t=_d(e),a=ii(mn({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Sd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Pn.Emulated,styles:e.styles||Ki,_:null,schemas:e.schemas||null,tView:null,id:""});wd(a);let d=e.dependencies;return a.directiveDefs=Ff(d,!1),a.pipeDefs=Ff(d,!0),a.id=k0(a),a})}function A0(e){return qi(e)||Ed(e)}function O0(e){return e!==null}function jf(e,t){if(e==null)return _r;let a={};for(let d in e)if(e.hasOwnProperty(d)){let D=e[d],y,x,c=oi.None;Array.isArray(D)?(c=D[0],y=D[1],x=D[2]??y):(y=D,x=D),t?(a[y]=c!==oi.None?[d,c]:d,t[y]=x):a[y]=d}return a}function xd(e){return fd(()=>{let t=_d(e);return wd(t),t})}function qi(e){return e[e0]||null}function Ed(e){return e[t0]||null}function Md(e){return e[n0]||null}function N0(e){let t=qi(e)||Ed(e)||Md(e);return t!==null?t.standalone:!1}function _d(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||_r,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Ki,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jf(e.inputs,t),outputs:jf(e.outputs),debugInfo:null}}function wd(e){e.features?.forEach(t=>t(e))}function Ff(e,t){if(!e)return null;let a=t?Md:A0;return()=>(typeof e=="function"?e():e).map(d=>a(d)).filter(O0)}function k0(e){let t=0,a=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let D of a)t=Math.imul(31,t)+D.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function xl(e){return{\u0275providers:e}}function P0(...e){return{\u0275providers:Td(!0,e),\u0275fromNgModule:!0}}function Td(e,...t){let a=[],d=new Set,D,y=x=>{a.push(x)};return bl(t,x=>{let c=x;za(c,y,[],d)&&(D||=[],D.push(c))}),D!==void 0&&Ad(D,y),a}function Ad(e,t){for(let a=0;a<e.length;a++){let{ngModule:d,providers:D}=e[a];El(D,y=>{t(y,d)})}}function za(e,t,a,d){if(e=bn(e),!e)return!1;let D=null,y=Af(e),x=!y&&qi(e);if(!y&&!x){let u=e.ngModule;if(y=Af(u),y)D=u;else return!1}else{if(x&&!x.standalone)return!1;D=e}let c=d.has(D);if(x){if(c)return!1;if(d.add(D),x.dependencies){let u=typeof x.dependencies=="function"?x.dependencies():x.dependencies;for(let w of u)za(w,t,a,d)}}else if(y){if(y.imports!=null&&!c){d.add(D);let w;try{bl(y.imports,N=>{za(N,t,a,d)&&(w||=[],w.push(N))})}finally{}w!==void 0&&Ad(w,t)}if(!c){let w=Mr(D)||(()=>new D);t({provide:D,useFactory:w,deps:Ki},D),t({provide:bd,useValue:D,multi:!0},D),t({provide:wr,useValue:()=>ht(D),multi:!0},D)}let u=y.providers;if(u!=null&&!c){let w=e;El(u,N=>{t(N,w)})}}else return!1;return D!==e&&e.providers!==void 0}function El(e,t){for(let a of e)pd(a)&&(a=a.\u0275providers),Array.isArray(a)?El(a,t):t(a)}var L0=Ot({provide:String,useValue:Ot});function Od(e){return e!==null&&typeof e=="object"&&L0 in e}function R0(e){return!!(e&&e.useExisting)}function j0(e){return!!(e&&e.useFactory)}function Ha(e){return typeof e=="function"}var Es=new St(""),qo={},F0={},_a;function Ml(){return _a===void 0&&(_a=new as),_a}var si=class{},ls=class extends si{get destroyed(){return this._destroyed}constructor(t,a,d,D){super(),this.parent=a,this.source=d,this.scopes=D,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Va(t,x=>this.processProvider(x)),this.records.set(Id,Xi(void 0,this)),D.has("environment")&&this.records.set(si,Xi(void 0,this));let y=this.records.get(Es);y!=null&&typeof y.value=="string"&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(bd,Ki,st.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=It(null);try{for(let d of this._ngOnDestroyHooks)d.ngOnDestroy();let a=this._onDestroyHooks;this._onDestroyHooks=[];for(let d of a)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),It(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let a=Yi(this),d=An(void 0),D;try{return t()}finally{Yi(a),An(d)}}get(t,a=Er,d=st.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(kf))return t[kf](this);d=Ds(d);let D,y=Yi(this),x=An(void 0);try{if(!(d&st.SkipSelf)){let u=this.records.get(t);if(u===void 0){let w=W0(t)&&Cl(t);w&&this.injectableDefInScope(w)?u=Xi(Ua(t),qo):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u)}let c=d&st.Self?Ml():this.parent;return a=d&st.Optional&&a===Er?null:a,c.get(t,a)}catch(c){if(c.name==="NullInjectorError"){if((c[os]=c[os]||[]).unshift(fn(t)),y)throw c;return h0(c,t,"R3InjectorError",this.source)}else throw c}finally{An(x),Yi(y)}}resolveInjectorInitializers(){let t=It(null),a=Yi(this),d=An(void 0),D;try{let y=this.get(wr,Ki,st.Self);for(let x of y)x()}finally{Yi(a),An(d),It(t)}}toString(){let t=[],a=this.records;for(let d of a.keys())t.push(fn(d));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new bt(205,!1)}processProvider(t){t=bn(t);let a=Ha(t)?t:bn(t&&t.provide),d=z0(t);if(!Ha(t)&&t.multi===!0){let D=this.records.get(a);D||(D=Xi(void 0,qo,!0),D.factory=()=>Fa(D.multi),this.records.set(a,D)),a=t,D.multi.push(t)}this.records.set(a,d)}hydrate(t,a){let d=It(null);try{return a.value===qo&&(a.value=F0,a.value=a.factory()),typeof a.value=="object"&&a.value&&V0(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}finally{It(d)}}injectableDefInScope(t){if(!t.providedIn)return!1;let a=bn(t.providedIn);return typeof a=="string"?a==="any"||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(t){let a=this._onDestroyHooks.indexOf(t);a!==-1&&this._onDestroyHooks.splice(a,1)}};function Ua(e){let t=Cl(e),a=t!==null?t.factory:Mr(e);if(a!==null)return a;if(e instanceof St)throw new bt(204,!1);if(e instanceof Function)return B0(e);throw new bt(204,!1)}function B0(e){if(e.length>0)throw new bt(204,!1);let a=KI(e);return a!==null?()=>a.factory(e):()=>new e}function z0(e){if(Od(e))return Xi(void 0,e.useValue);{let t=H0(e);return Xi(t,qo)}}function H0(e,t,a){let d;if(Ha(e)){let D=bn(e);return Mr(D)||Ua(D)}else if(Od(e))d=()=>bn(e.useValue);else if(j0(e))d=()=>e.useFactory(...Fa(e.deps||[]));else if(R0(e))d=()=>ht(bn(e.useExisting));else{let D=bn(e&&(e.useClass||e.provide));if(U0(e))d=()=>new D(...Fa(e.deps));else return Mr(D)||Ua(D)}return d}function Xi(e,t,a=!1){return{factory:e,value:t,multi:a?[]:void 0}}function U0(e){return!!e.deps}function V0(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function W0(e){return typeof e=="function"||typeof e=="object"&&e instanceof St}function Va(e,t){for(let a of e)Array.isArray(a)?Va(a,t):a&&pd(a)?Va(a.\u0275providers,t):t(a)}function G0(){return md()!==void 0||u0()!=null}function Y0(e){return typeof e=="function"}var Wn=0,ot=1,nt=2,$t=3,Sn=4,xn=5,cs=6,us=7,Dn=8,er=9,Ln=10,on=11,Tr=12,Bf=13,sr=14,zn=15,Di=16,Zi=17,Hn=18,Ms=19,Nd=20,ri=21,wa=22,dn=23,ai=25,kd=1;var xi=7,fs=8,tr=9,rn=10,ds=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(ds||{});function bi(e){return Array.isArray(e)&&typeof e[kd]=="object"}function Gn(e){return Array.isArray(e)&&e[kd]===!0}function Pd(e){return(e.flags&4)!==0}function _l(e){return e.componentOffset>-1}function wl(e){return(e.flags&1)===1}function Lr(e){return!!e.template}function Wa(e){return(e[nt]&512)!==0}var Ga=class{constructor(t,a,d){this.previousValue=t,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}};function Ld(e,t,a,d){t!==null?t.applyValueToInputSignal(t,d):e[a]=d}function Rd(){return jd}function jd(e){return e.type.prototype.ngOnChanges&&(e.setInput=Z0),X0}Rd.ngInherit=!0;function X0(){let e=Bd(this),t=e?.current;if(t){let a=e.previous;if(a===_r)e.previous=t;else for(let d in t)a[d]=t[d];e.current=null,this.ngOnChanges(t)}}function Z0(e,t,a,d,D){let y=this.declaredInputs[d],x=Bd(e)||$0(e,{previous:_r,current:null}),c=x.current||(x.current={}),u=x.previous,w=u[y];c[y]=new Ga(w&&w.currentValue,a,u===_r),Ld(e,t,D,a)}var Fd="__ngSimpleChanges__";function Bd(e){return e[Fd]||null}function $0(e,t){return e[Fd]=t}var zf=null;var On=function(e,t,a){zf?.(e,t,a)},zd="svg",J0="math";function Un(e){for(;Array.isArray(e);)e=e[Wn];return e}function En(e,t){return Un(t[e.index])}function Hd(e,t){return e.data[t]}function ar(e,t){let a=t[e];return bi(a)?a:a[Wn]}function Q0(e){return(e[nt]&4)===4}function Tl(e){return(e[nt]&128)===128}function K0(e){return Gn(e[$t])}function hs(e,t){return t==null?null:e[t]}function Ud(e){e[Zi]=0}function Vd(e){e[nt]&1024||(e[nt]|=1024,Tl(e)&&_s(e))}function q0(e,t){for(;e>0;)t=t[sr],e--;return t}function Ar(e){return!!(e[nt]&9216||e[dn]?.dirty)}function Ya(e){e[Ln].changeDetectionScheduler?.notify(7),e[nt]&64&&(e[nt]|=1024),Ar(e)&&_s(e)}function _s(e){e[Ln].changeDetectionScheduler?.notify(0);let t=Ei(e);for(;t!==null&&!(t[nt]&8192||(t[nt]|=8192,!Tl(t)));)t=Ei(t)}function Wd(e,t){if((e[nt]&256)===256)throw new bt(911,!1);e[ri]===null&&(e[ri]=[]),e[ri].push(t)}function eb(e,t){if(e[ri]===null)return;let a=e[ri].indexOf(t);a!==-1&&e[ri].splice(a,1)}function Ei(e){let t=e[$t];return Gn(t)?t[$t]:t}var at={lFrame:qd(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Gd=!1;function tb(){return at.lFrame.elementDepthCount}function nb(){at.lFrame.elementDepthCount++}function ib(){at.lFrame.elementDepthCount--}function Yd(){return at.bindingsEnabled}function rb(){return at.skipHydrationRootTNode!==null}function ob(e){return at.skipHydrationRootTNode===e}function sb(){at.skipHydrationRootTNode=null}function Wt(){return at.lFrame.lView}function Yn(){return at.lFrame.tView}function Xn(e){return at.lFrame.contextLView=e,e[Dn]}function Zn(e){return at.lFrame.contextLView=null,e}function Rn(){let e=Xd();for(;e!==null&&e.type===64;)e=e.parent;return e}function Xd(){return at.lFrame.currentTNode}function ab(){let e=at.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Rr(e,t){let a=at.lFrame;a.currentTNode=e,a.isParent=t}function Zd(){return at.lFrame.isParent}function lb(){at.lFrame.isParent=!1}function $d(){return Gd}function Hf(e){Gd=e}function cb(e){return at.lFrame.bindingIndex=e}function ub(){return at.lFrame.bindingIndex++}function fb(){return at.lFrame.inI18n}function db(e,t){let a=at.lFrame;a.bindingIndex=a.bindingRootIndex=e,Xa(t)}function hb(){return at.lFrame.currentDirectiveIndex}function Xa(e){at.lFrame.currentDirectiveIndex=e}function Jd(){return at.lFrame.currentQueryIndex}function Al(e){at.lFrame.currentQueryIndex=e}function gb(e){let t=e[ot];return t.type===2?t.declTNode:t.type===1?e[xn]:null}function Qd(e,t,a){if(a&st.SkipSelf){let D=t,y=e;for(;D=D.parent,D===null&&!(a&st.Host);)if(D=gb(y),D===null||(y=y[sr],D.type&10))break;if(D===null)return!1;t=D,e=y}let d=at.lFrame=Kd();return d.currentTNode=t,d.lView=e,!0}function Ol(e){let t=Kd(),a=e[ot];at.lFrame=t,t.currentTNode=a.firstChild,t.lView=e,t.tView=a,t.contextLView=e,t.bindingIndex=a.bindingStartIndex,t.inI18n=!1}function Kd(){let e=at.lFrame,t=e===null?null:e.child;return t===null?qd(e):t}function qd(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function eh(){let e=at.lFrame;return at.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var th=eh;function Nl(){let e=eh();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function pb(e){return(at.lFrame.contextLView=q0(e,at.lFrame.contextLView))[Dn]}function nh(){return at.lFrame.selectedIndex}function Mi(e){at.lFrame.selectedIndex=e}function vb(){let e=at.lFrame;return Hd(e.tView,e.selectedIndex)}function ih(){at.lFrame.currentNamespace=zd}function mb(){return at.lFrame.currentNamespace}var rh=!0;function kl(){return rh}function Pl(e){rh=e}function yb(e,t,a){let{ngOnChanges:d,ngOnInit:D,ngDoCheck:y}=t.type.prototype;if(d){let x=jd(t);(a.preOrderHooks??=[]).push(e,x),(a.preOrderCheckHooks??=[]).push(e,x)}D&&(a.preOrderHooks??=[]).push(0-e,D),y&&((a.preOrderHooks??=[]).push(e,y),(a.preOrderCheckHooks??=[]).push(e,y))}function Ll(e,t){for(let a=t.directiveStart,d=t.directiveEnd;a<d;a++){let y=e.data[a].type.prototype,{ngAfterContentInit:x,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:w,ngOnDestroy:N}=y;x&&(e.contentHooks??=[]).push(-a,x),c&&((e.contentHooks??=[]).push(a,c),(e.contentCheckHooks??=[]).push(a,c)),u&&(e.viewHooks??=[]).push(-a,u),w&&((e.viewHooks??=[]).push(a,w),(e.viewCheckHooks??=[]).push(a,w)),N!=null&&(e.destroyHooks??=[]).push(a,N)}}function es(e,t,a){oh(e,t,3,a)}function ts(e,t,a,d){(e[nt]&3)===a&&oh(e,t,a,d)}function Ta(e,t){let a=e[nt];(a&3)===t&&(a&=16383,a+=1,e[nt]=a)}function oh(e,t,a,d){let D=d!==void 0?e[Zi]&65535:0,y=d??-1,x=t.length-1,c=0;for(let u=D;u<x;u++)if(typeof t[u+1]=="number"){if(c=t[u],d!=null&&c>=d)break}else t[u]<0&&(e[Zi]+=65536),(c<y||y==-1)&&(Cb(e,a,t,u),e[Zi]=(e[Zi]&4294901760)+u+2),u++}function Uf(e,t){On(4,e,t);let a=It(null);try{t.call(e)}finally{It(a),On(5,e,t)}}function Cb(e,t,a,d){let D=a[d]<0,y=a[d+1],x=D?-a[d]:a[d],c=e[x];D?e[nt]>>14<e[Zi]>>16&&(e[nt]&3)===t&&(e[nt]+=16384,Uf(c,y)):Uf(c,y)}var Qi=-1,Or=class{constructor(t,a,d){this.factory=t,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}};function Ib(e){return e instanceof Or}function bb(e){return(e.flags&8)!==0}function Sb(e){return(e.flags&16)!==0}var Aa={},Za=class{constructor(t,a){this.injector=t,this.parentInjector=a}get(t,a,d){d=Ds(d);let D=this.injector.get(t,Aa,d);return D!==Aa||a===Aa?D:this.parentInjector.get(t,a,d)}};function sh(e){return e!==Qi}function gs(e){return e&32767}function Db(e){return e>>16}function ps(e,t){let a=Db(e),d=t;for(;a>0;)d=d[sr],a--;return d}var $a=!0;function Vf(e){let t=$a;return $a=e,t}var xb=256,ah=xb-1,lh=5,Eb=0,Nn={};function Mb(e,t,a){let d;typeof a=="string"?d=a.charCodeAt(0)||0:a.hasOwnProperty(xr)&&(d=a[xr]),d==null&&(d=a[xr]=Eb++);let D=d&ah,y=1<<D;t.data[e+(D>>lh)]|=y}function ch(e,t){let a=uh(e,t);if(a!==-1)return a;let d=t[ot];d.firstCreatePass&&(e.injectorIndex=t.length,Oa(d.data,e),Oa(t,null),Oa(d.blueprint,null));let D=Rl(e,t),y=e.injectorIndex;if(sh(D)){let x=gs(D),c=ps(D,t),u=c[ot].data;for(let w=0;w<8;w++)t[y+w]=c[x+w]|u[x+w]}return t[y+8]=D,y}function Oa(e,t){e.push(0,0,0,0,0,0,0,0,t)}function uh(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Rl(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let a=0,d=null,D=t;for(;D!==null;){if(d=ph(D),d===null)return Qi;if(a++,D=D[sr],d.injectorIndex!==-1)return d.injectorIndex|a<<16}return Qi}function _b(e,t,a){Mb(e,t,a)}function fh(e,t,a){if(a&st.Optional||e!==void 0)return e;Il(t,"NodeInjector")}function dh(e,t,a,d){if(a&st.Optional&&d===void 0&&(d=null),!(a&(st.Self|st.Host))){let D=e[er],y=An(void 0);try{return D?D.get(t,d,a&st.Optional):yd(t,d,a&st.Optional)}finally{An(y)}}return fh(d,t,a)}function hh(e,t,a,d=st.Default,D){if(e!==null){if(t[nt]&2048&&!(d&st.Self)){let x=Ob(e,t,a,d,Nn);if(x!==Nn)return x}let y=gh(e,t,a,d,Nn);if(y!==Nn)return y}return dh(t,a,d,D)}function gh(e,t,a,d,D){let y=Tb(a);if(typeof y=="function"){if(!Qd(t,e,d))return d&st.Host?fh(D,a,d):dh(t,a,d,D);try{let x;if(x=y(d),x==null&&!(d&st.Optional))Il(a);else return x}finally{th()}}else if(typeof y=="number"){let x=null,c=uh(e,t),u=Qi,w=d&st.Host?t[zn][xn]:null;for((c===-1||d&st.SkipSelf)&&(u=c===-1?Rl(e,t):t[c+8],u===Qi||!Gf(d,!1)?c=-1:(x=t[ot],c=gs(u),t=ps(u,t)));c!==-1;){let N=t[ot];if(Wf(y,c,N.data)){let L=wb(c,t,a,x,d,w);if(L!==Nn)return L}u=t[c+8],u!==Qi&&Gf(d,t[ot].data[c+8]===w)&&Wf(y,c,t)?(x=N,c=gs(u),t=ps(u,t)):c=-1}}return D}function wb(e,t,a,d,D,y){let x=t[ot],c=x.data[e+8],u=d==null?_l(c)&&$a:d!=x&&(c.type&3)!==0,w=D&st.Host&&y===c,N=ns(c,x,a,u,w);return N!==null?nr(t,x,N,c):Nn}function ns(e,t,a,d,D){let y=e.providerIndexes,x=t.data,c=y&1048575,u=e.directiveStart,w=e.directiveEnd,N=y>>20,L=d?c:c+N,F=D?c+N:w;for(let R=L;R<F;R++){let C=x[R];if(R<u&&a===C||R>=u&&C.type===a)return R}if(D){let R=x[u];if(R&&Lr(R)&&R.type===a)return u}return null}function nr(e,t,a,d){let D=e[a],y=t.data;if(Ib(D)){let x=D;x.resolving&&r0(i0(y[a]));let c=Vf(x.canSeeViewProviders);x.resolving=!0;let u,w=x.injectImpl?An(x.injectImpl):null,N=Qd(e,d,st.Default);try{D=e[a]=x.factory(void 0,y,e,d),t.firstCreatePass&&a>=d.directiveStart&&yb(a,y[a],t)}finally{w!==null&&An(w),Vf(c),x.resolving=!1,th()}}return D}function Tb(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(xr)?e[xr]:void 0;return typeof t=="number"?t>=0?t&ah:Ab:t}function Wf(e,t,a){let d=1<<e;return!!(a[t+(e>>lh)]&d)}function Gf(e,t){return!(e&st.Self)&&!(e&st.Host&&t)}var Si=class{constructor(t,a){this._tNode=t,this._lView=a}get(t,a,d){return hh(this._tNode,this._lView,t,Ds(d),a)}};function Ab(){return new Si(Rn(),Wt())}function Ob(e,t,a,d,D){let y=e,x=t;for(;y!==null&&x!==null&&x[nt]&2048&&!(x[nt]&512);){let c=gh(y,x,a,d|st.Self,Nn);if(c!==Nn)return c;let u=y.parent;if(!u){let w=x[Nd];if(w){let N=w.get(a,Nn,d);if(N!==Nn)return N}u=ph(x),x=x[sr]}y=u}return D}function ph(e){let t=e[ot],a=t.type;return a===2?t.declTNode:a===1?e[xn]:null}function Yf(e,t=null,a=null,d){let D=Nb(e,t,a,d);return D.resolveInjectorInitializers(),D}function Nb(e,t=null,a=null,d,D=new Set){let y=[a||Ki,P0(e)];return d=d||(typeof e=="object"?void 0:fn(e)),new ls(y,t||Ml(),d||null,D)}var Ii=class Ii{static create(t,a){if(Array.isArray(t))return Yf({name:""},a,t,"");{let d=t.name??"";return Yf({name:d},t.parent,t.providers,d)}}};Ii.THROW_IF_NOT_FOUND=Er,Ii.NULL=new as,Ii.\u0275prov=xt({token:Ii,providedIn:"any",factory:()=>ht(Id)}),Ii.__NG_ELEMENT_ID__=-1;var _i=Ii;var kb=new St("");kb.__NG_ELEMENT_ID__=e=>{let t=Rn();if(t===null)throw new bt(204,!1);if(t.type&2)return t.value;if(e&st.Optional)return null;throw new bt(204,!1)};var Pb="ngOriginalError";function Na(e){return e[Pb]}var Vn=class{constructor(){this._console=console}handleError(t){let a=this._findOriginalError(t);this._console.error("ERROR",t),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(t){let a=t&&Na(t);for(;a&&Na(a);)a=Na(a);return a||null}},vh=new St("",{providedIn:"root",factory:()=>Mt(Vn).handleError.bind(void 0)}),mh=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Lb,t.__NG_ENV_ID__=d=>d;let e=t;return e})(),Ja=class extends mh{constructor(t){super(),this._lView=t}onDestroy(t){return Wd(this._lView,t),()=>eb(this._lView,t)}};function Lb(){return new Ja(Wt())}function Rb(){return lr(Rn(),Wt())}function lr(e,t){return new cr(En(e,t))}var cr=(()=>{let t=class t{constructor(d){this.nativeElement=d}};t.__NG_ELEMENT_ID__=Rb;let e=t;return e})();function jb(e){return e instanceof cr?e.nativeElement:e}var ws=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ir(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let d=this.taskId++;return this.pendingTasks.add(d),d}remove(d){this.pendingTasks.delete(d),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275prov=xt({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();var Qa=class extends tn{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,G0()&&(this.destroyRef=Mt(mh,{optional:!0})??void 0,this.pendingTasks=Mt(ws,{optional:!0})??void 0)}emit(t){let a=It(null);try{super.next(t)}finally{It(a)}}subscribe(t,a,d){let D=t,y=a||(()=>null),x=d;if(t&&typeof t=="object"){let u=t;D=u.next?.bind(u),y=u.error?.bind(u),x=u.complete?.bind(u)}this.__isAsync&&(y=this.wrapInTimeout(y),D&&(D=this.wrapInTimeout(D)),x&&(x=this.wrapInTimeout(x)));let c=super.subscribe({next:D,error:y,complete:x});return t instanceof Ut&&t.add(c),c}wrapInTimeout(t){return a=>{let d=this.pendingTasks?.add();setTimeout(()=>{t(a),d!==void 0&&this.pendingTasks?.remove(d)})}}},kn=Qa;function Fb(){return this._results[Symbol.iterator]()}var Ka=class e{get changes(){return this._changes??=new kn}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let a=e.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Fb)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,a){return this._results.reduce(t,a)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,a){this.dirty=!1;let d=v0(t);(this._changesDetected=!p0(this._results,d,a))&&(this._results=d,this.length=d.length,this.last=d[this.length-1],this.first=d[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function yh(e){return(e.flags&128)===128}var Ch=new Map,Bb=0;function zb(){return Bb++}function Hb(e){Ch.set(e[Ms],e)}function Ub(e){Ch.delete(e[Ms])}var Xf="__ngContext__";function wi(e,t){bi(t)?(e[Xf]=t[Ms],Hb(t)):e[Xf]=t}function Ih(e){return Sh(e[Tr])}function bh(e){return Sh(e[Sn])}function Sh(e){for(;e!==null&&!Gn(e);)e=e[Sn];return e}var qa;function Dh(e){qa=e}function Vb(){if(qa!==void 0)return qa;if(typeof document<"u")return document;throw new bt(210,!1)}var jl=new St("",{providedIn:"root",factory:()=>Wb}),Wb="ng",Fl=new St(""),$n=new St("",{providedIn:"platform",factory:()=>"unknown"});var Bl=new St("",{providedIn:"root",factory:()=>Vb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Gb="h",Yb="b";var Xb=()=>null;function zl(e,t,a=!1){return Xb(e,t,a)}var xh=!1,Zb=new St("",{providedIn:"root",factory:()=>xh});var vs=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ud})`}};function Hl(e){return e instanceof vs?e.changingThisBreaksApplicationSecurity:e}function Eh(e,t){let a=$b(e);if(a!=null&&a!==t){if(a==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${a} (see ${ud})`)}return a===t}function $b(e){return e instanceof vs&&e.getTypeName()||null}var Jb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Mh(e){return e=String(e),e.match(Jb)?e:"unsafe:"+e}var Ul=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Ul||{});function _h(e){let t=Qb();return t?t.sanitize(Ul.URL,e)||"":Eh(e,"URL")?Hl(e):Mh(vd(e))}function Qb(){let e=Wt();return e&&e[Ln].sanitizer}var Ti=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Ti||{}),Kb;function Vl(e,t){return Kb(e,t)}function $i(e,t,a,d,D){if(d!=null){let y,x=!1;Gn(d)?y=d:bi(d)&&(x=!0,d=d[Wn]);let c=Un(d);e===0&&a!==null?D==null?Nh(t,a,c):ms(t,a,c,D||null,!0):e===1&&a!==null?ms(t,a,c,D||null,!0):e===2?hS(t,c,x):e===3&&t.destroyNode(c),y!=null&&pS(t,e,y,a,D)}}function qb(e,t){return e.createText(t)}function wh(e,t,a){return e.createElement(t,a)}function eS(e,t){Th(e,t),t[Wn]=null,t[xn]=null}function tS(e,t,a,d,D,y){d[Wn]=D,d[xn]=t,Ts(e,d,a,1,D,y)}function Th(e,t){t[Ln].changeDetectionScheduler?.notify(8),Ts(e,t,t[on],2,null,null)}function nS(e){let t=e[Tr];if(!t)return ka(e[ot],e);for(;t;){let a=null;if(bi(t))a=t[Tr];else{let d=t[rn];d&&(a=d)}if(!a){for(;t&&!t[Sn]&&t!==e;)bi(t)&&ka(t[ot],t),t=t[$t];t===null&&(t=e),bi(t)&&ka(t[ot],t),a=t&&t[Sn]}t=a}}function iS(e,t,a,d){let D=rn+d,y=a.length;d>0&&(a[D-1][Sn]=t),d<y-rn?(t[Sn]=a[D],Cd(a,rn+d,t)):(a.push(t),t[Sn]=null),t[$t]=a;let x=t[Di];x!==null&&a!==x&&Ah(x,t);let c=t[Hn];c!==null&&c.insertView(e),Ya(t),t[nt]|=128}function Ah(e,t){let a=e[tr],d=t[$t];if(bi(d))e[nt]|=ds.HasTransplantedViews;else{let D=d[$t][zn];t[zn]!==D&&(e[nt]|=ds.HasTransplantedViews)}a===null?e[tr]=[t]:a.push(t)}function Wl(e,t){let a=e[tr],d=a.indexOf(t);a.splice(d,1)}function el(e,t){if(e.length<=rn)return;let a=rn+t,d=e[a];if(d){let D=d[Di];D!==null&&D!==e&&Wl(D,d),t>0&&(e[a-1][Sn]=d[Sn]);let y=ss(e,rn+t);eS(d[ot],d);let x=y[Hn];x!==null&&x.detachView(y[ot]),d[$t]=null,d[Sn]=null,d[nt]&=-129}return d}function Oh(e,t){if(!(t[nt]&256)){let a=t[on];a.destroyNode&&Ts(e,t,a,3,null,null),nS(t)}}function ka(e,t){if(t[nt]&256)return;let a=It(null);try{t[nt]&=-129,t[nt]|=256,t[dn]&&ca(t[dn]),oS(e,t),rS(e,t),t[ot].type===1&&t[on].destroy();let d=t[Di];if(d!==null&&Gn(t[$t])){d!==t[$t]&&Wl(d,t);let D=t[Hn];D!==null&&D.detachView(e)}Ub(t)}finally{It(a)}}function rS(e,t){let a=e.cleanup,d=t[us];if(a!==null)for(let y=0;y<a.length-1;y+=2)if(typeof a[y]=="string"){let x=a[y+3];x>=0?d[x]():d[-x].unsubscribe(),y+=2}else{let x=d[a[y+1]];a[y].call(x)}d!==null&&(t[us]=null);let D=t[ri];if(D!==null){t[ri]=null;for(let y=0;y<D.length;y++){let x=D[y];x()}}}function oS(e,t){let a;if(e!=null&&(a=e.destroyHooks)!=null)for(let d=0;d<a.length;d+=2){let D=t[a[d]];if(!(D instanceof Or)){let y=a[d+1];if(Array.isArray(y))for(let x=0;x<y.length;x+=2){let c=D[y[x]],u=y[x+1];On(4,c,u);try{u.call(c)}finally{On(5,c,u)}}else{On(4,D,y);try{y.call(D)}finally{On(5,D,y)}}}}}function sS(e,t,a){return aS(e,t.parent,a)}function aS(e,t,a){let d=t;for(;d!==null&&d.type&168;)t=d,d=t.parent;if(d===null)return a[Wn];{let{componentOffset:D}=d;if(D>-1){let{encapsulation:y}=e.data[d.directiveStart+D];if(y===Pn.None||y===Pn.Emulated)return null}return En(d,a)}}function ms(e,t,a,d,D){e.insertBefore(t,a,d,D)}function Nh(e,t,a){e.appendChild(t,a)}function Zf(e,t,a,d,D){d!==null?ms(e,t,a,d,D):Nh(e,t,a)}function lS(e,t,a,d){e.removeChild(t,a,d)}function Gl(e,t){return e.parentNode(t)}function cS(e,t){return e.nextSibling(t)}function uS(e,t,a){return dS(e,t,a)}function fS(e,t,a){return e.type&40?En(e,a):null}var dS=fS,$f;function Yl(e,t,a,d){let D=sS(e,d,t),y=t[on],x=d.parent||t[xn],c=uS(x,d,t);if(D!=null)if(Array.isArray(a))for(let u=0;u<a.length;u++)Zf(y,D,a[u],c,!1);else Zf(y,D,a,c,!1);$f!==void 0&&$f(y,d,t,a,D)}function is(e,t){if(t!==null){let a=t.type;if(a&3)return En(t,e);if(a&4)return tl(-1,e[t.index]);if(a&8){let d=t.child;if(d!==null)return is(e,d);{let D=e[t.index];return Gn(D)?tl(-1,D):Un(D)}}else{if(a&32)return Vl(t,e)()||Un(e[t.index]);{let d=kh(e,t);if(d!==null){if(Array.isArray(d))return d[0];let D=Ei(e[zn]);return is(D,d)}else return is(e,t.next)}}}return null}function kh(e,t){if(t!==null){let d=e[zn][xn],D=t.projection;return d.projection[D]}return null}function tl(e,t){let a=rn+e+1;if(a<t.length){let d=t[a],D=d[ot].firstChild;if(D!==null)return is(d,D)}return t[xi]}function hS(e,t,a){let d=Gl(e,t);d&&lS(e,d,t,a)}function Xl(e,t,a,d,D,y,x){for(;a!=null;){if(a.type===128){a=a.next;continue}let c=d[a.index],u=a.type;if(x&&t===0&&(c&&wi(Un(c),d),a.flags|=2),(a.flags&32)!==32)if(u&8)Xl(e,t,a.child,d,D,y,!1),$i(t,e,D,c,y);else if(u&32){let w=Vl(a,d),N;for(;N=w();)$i(t,e,D,N,y);$i(t,e,D,c,y)}else u&16?gS(e,t,d,a,D,y):$i(t,e,D,c,y);a=x?a.projectionNext:a.next}}function Ts(e,t,a,d,D,y){Xl(a,d,e.firstChild,t,D,y,!1)}function gS(e,t,a,d,D,y){let x=a[zn],u=x[xn].projection[d.projection];if(Array.isArray(u))for(let w=0;w<u.length;w++){let N=u[w];$i(t,e,D,N,y)}else{let w=u,N=x[$t];yh(d)&&(w.flags|=128),Xl(e,t,w,N,D,y,!0)}}function pS(e,t,a,d,D){let y=a[xi],x=Un(a);y!==x&&$i(t,e,d,y,D);for(let c=rn;c<a.length;c++){let u=a[c];Ts(u[ot],u,e,t,d,y)}}function vS(e,t,a){e.setAttribute(t,"style",a)}function Ph(e,t,a){a===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",a)}function Lh(e,t,a){let{mergedAttrs:d,classes:D,styles:y}=a;d!==null&&Ba(e,t,d),D!==null&&Ph(e,t,D),y!==null&&vS(e,t,y)}var Rh={};function Mn(e=1){jh(Yn(),Wt(),nh()+e,!1)}function jh(e,t,a,d){if(!d)if((t[nt]&3)===3){let y=e.preOrderCheckHooks;y!==null&&es(t,y,a)}else{let y=e.preOrderHooks;y!==null&&ts(t,y,0,a)}Mi(a)}function Ai(e,t=st.Default){let a=Wt();if(a===null)return ht(e,t);let d=Rn();return hh(d,a,bn(e),t)}function Fh(e,t,a,d,D,y){let x=It(null);try{let c=null;D&oi.SignalBased&&(c=t[d][Wu]),c!==null&&c.transformFn!==void 0&&(y=c.transformFn(y)),D&oi.HasDecoratorInputTransform&&(y=e.inputTransforms[d].call(t,y)),e.setInput!==null?e.setInput(t,c,y,a,d):Ld(t,c,d,y)}finally{It(x)}}function mS(e,t){let a=e.hostBindingOpCodes;if(a!==null)try{for(let d=0;d<a.length;d++){let D=a[d];if(D<0)Mi(~D);else{let y=D,x=a[++d],c=a[++d];db(x,y);let u=t[y];c(2,u)}}}finally{Mi(-1)}}function As(e,t,a,d,D,y,x,c,u,w,N){let L=t.blueprint.slice();return L[Wn]=D,L[nt]=d|4|128|8|64,(w!==null||e&&e[nt]&2048)&&(L[nt]|=2048),Ud(L),L[$t]=L[sr]=e,L[Dn]=a,L[Ln]=x||e&&e[Ln],L[on]=c||e&&e[on],L[er]=u||e&&e[er]||null,L[xn]=y,L[Ms]=zb(),L[cs]=N,L[Nd]=w,L[zn]=t.type==2?e[zn]:L,L}function Os(e,t,a,d,D){let y=e.data[t];if(y===null)y=yS(e,t,a,d,D),fb()&&(y.flags|=32);else if(y.type&64){y.type=a,y.value=d,y.attrs=D;let x=ab();y.injectorIndex=x===null?-1:x.injectorIndex}return Rr(y,!0),y}function yS(e,t,a,d,D){let y=Xd(),x=Zd(),c=x?y:y&&y.parent,u=e.data[t]=xS(e,c,a,t,d,D);return e.firstChild===null&&(e.firstChild=u),y!==null&&(x?y.child==null&&u.parent!==null&&(y.child=u):y.next===null&&(y.next=u,u.prev=y)),u}function Bh(e,t,a,d){if(a===0)return-1;let D=t.length;for(let y=0;y<a;y++)t.push(d),e.blueprint.push(d),e.data.push(null);return D}function zh(e,t,a,d,D){let y=nh(),x=d&2;try{Mi(-1),x&&t.length>ai&&jh(e,t,ai,!1),On(x?2:0,D),a(d,D)}finally{Mi(y),On(x?3:1,D)}}function Hh(e,t,a){if(Pd(t)){let d=It(null);try{let D=t.directiveStart,y=t.directiveEnd;for(let x=D;x<y;x++){let c=e.data[x];if(c.contentQueries){let u=a[x];c.contentQueries(1,u,x)}}}finally{It(d)}}}function Uh(e,t,a){Yd()&&(OS(e,t,a,En(a,t)),(a.flags&64)===64&&Xh(e,t,a))}function Vh(e,t,a=En){let d=t.localNames;if(d!==null){let D=t.index+1;for(let y=0;y<d.length;y+=2){let x=d[y+1],c=x===-1?a(t,e):e[x];e[D++]=c}}}function Wh(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Zl(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Zl(e,t,a,d,D,y,x,c,u,w,N){let L=ai+d,F=L+D,R=CS(L,F),C=typeof w=="function"?w():w;return R[ot]={type:e,blueprint:R,template:a,queries:null,viewQuery:c,declTNode:t,data:R.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof y=="function"?y():y,pipeRegistry:typeof x=="function"?x():x,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:N}}function CS(e,t){let a=[];for(let d=0;d<t;d++)a.push(d<e?null:Rh);return a}function IS(e,t,a,d){let y=d.get(Zb,xh)||a===Pn.ShadowDom,x=e.selectRootElement(t,y);return bS(x),x}function bS(e){SS(e)}var SS=()=>null;function DS(e,t,a,d){let D=Jh(t);D.push(a),e.firstCreatePass&&Qh(e).push(d,D.length-1)}function xS(e,t,a,d,D,y){let x=t?t.injectorIndex:-1,c=0;return rb()&&(c|=128),{type:a,index:d,insertBeforeIndex:null,injectorIndex:x,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:D,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Jf(e,t,a,d,D){for(let y in t){if(!t.hasOwnProperty(y))continue;let x=t[y];if(x===void 0)continue;d??={};let c,u=oi.None;Array.isArray(x)?(c=x[0],u=x[1]):c=x;let w=y;if(D!==null){if(!D.hasOwnProperty(y))continue;w=D[y]}e===0?Qf(d,a,w,c,u):Qf(d,a,w,c)}return d}function Qf(e,t,a,d,D){let y;e.hasOwnProperty(a)?(y=e[a]).push(t,d):y=e[a]=[t,d],D!==void 0&&y.push(D)}function ES(e,t,a){let d=t.directiveStart,D=t.directiveEnd,y=e.data,x=t.attrs,c=[],u=null,w=null;for(let N=d;N<D;N++){let L=y[N],F=a?a.get(L):null,R=F?F.inputs:null,C=F?F.outputs:null;u=Jf(0,L.inputs,N,u,R),w=Jf(1,L.outputs,N,w,C);let s=u!==null&&x!==null&&!Dl(t)?zS(u,N,x):null;c.push(s)}u!==null&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=c,t.inputs=u,t.outputs=w}function MS(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function _S(e,t,a,d,D,y,x,c){let u=En(t,a),w=t.inputs,N;!c&&w!=null&&(N=w[d])?($l(e,a,N,d,D),_l(t)&&wS(a,t.index)):t.type&3?(d=MS(d),D=x!=null?x(D,t.value||"",d):D,y.setProperty(u,d,D)):t.type&12}function wS(e,t){let a=ar(t,e);a[nt]&16||(a[nt]|=64)}function Gh(e,t,a,d){if(Yd()){let D=d===null?null:{"":-1},y=kS(e,a),x,c;y===null?x=c=null:[x,c]=y,x!==null&&Yh(e,t,a,x,D,c),D&&PS(a,d,D)}a.mergedAttrs=Sl(a.mergedAttrs,a.attrs)}function Yh(e,t,a,d,D,y){for(let w=0;w<d.length;w++)_b(ch(a,t),e,d[w].type);RS(a,e.data.length,d.length);for(let w=0;w<d.length;w++){let N=d[w];N.providersResolver&&N.providersResolver(N)}let x=!1,c=!1,u=Bh(e,t,d.length,null);for(let w=0;w<d.length;w++){let N=d[w];a.mergedAttrs=Sl(a.mergedAttrs,N.hostAttrs),jS(e,a,t,u,N),LS(u,N,D),N.contentQueries!==null&&(a.flags|=4),(N.hostBindings!==null||N.hostAttrs!==null||N.hostVars!==0)&&(a.flags|=64);let L=N.type.prototype;!x&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((e.preOrderHooks??=[]).push(a.index),x=!0),!c&&(L.ngOnChanges||L.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(a.index),c=!0),u++}ES(e,a,y)}function TS(e,t,a,d,D){let y=D.hostBindings;if(y){let x=e.hostBindingOpCodes;x===null&&(x=e.hostBindingOpCodes=[]);let c=~t.index;AS(x)!=c&&x.push(c),x.push(a,d,y)}}function AS(e){let t=e.length;for(;t>0;){let a=e[--t];if(typeof a=="number"&&a<0)return a}return 0}function OS(e,t,a,d){let D=a.directiveStart,y=a.directiveEnd;_l(a)&&FS(t,a,e.data[D+a.componentOffset]),e.firstCreatePass||ch(a,t),wi(d,t);let x=a.initialInputs;for(let c=D;c<y;c++){let u=e.data[c],w=nr(t,e,c,a);if(wi(w,t),x!==null&&BS(t,c-D,w,u,a,x),Lr(u)){let N=ar(a.index,t);N[Dn]=nr(t,e,c,a)}}}function Xh(e,t,a){let d=a.directiveStart,D=a.directiveEnd,y=a.index,x=hb();try{Mi(y);for(let c=d;c<D;c++){let u=e.data[c],w=t[c];Xa(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&NS(u,w)}}finally{Mi(-1),Xa(x)}}function NS(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function kS(e,t){let a=e.directiveRegistry,d=null,D=null;if(a)for(let y=0;y<a.length;y++){let x=a[y];if(x0(t,x.selectors,!1))if(d||(d=[]),Lr(x))if(x.findHostDirectiveDefs!==null){let c=[];D=D||new Map,x.findHostDirectiveDefs(x,c,D),d.unshift(...c,x);let u=c.length;nl(e,t,u)}else d.unshift(x),nl(e,t,0);else D=D||new Map,x.findHostDirectiveDefs?.(x,d,D),d.push(x)}return d===null?null:[d,D]}function nl(e,t,a){t.componentOffset=a,(e.components??=[]).push(t.index)}function PS(e,t,a){if(t){let d=e.localNames=[];for(let D=0;D<t.length;D+=2){let y=a[t[D+1]];if(y==null)throw new bt(-301,!1);d.push(t[D],y)}}}function LS(e,t,a){if(a){if(t.exportAs)for(let d=0;d<t.exportAs.length;d++)a[t.exportAs[d]]=e;Lr(t)&&(a[""]=e)}}function RS(e,t,a){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+a,e.providerIndexes=t}function jS(e,t,a,d,D){e.data[d]=D;let y=D.factory||(D.factory=Mr(D.type,!0)),x=new Or(y,Lr(D),Ai);e.blueprint[d]=x,a[d]=x,TS(e,t,d,Bh(e,a,D.hostVars,Rh),D)}function FS(e,t,a){let d=En(t,e),D=Wh(a),y=e[Ln].rendererFactory,x=16;a.signals?x=4096:a.onPush&&(x=64);let c=Ns(e,As(e,D,null,x,d,t,null,y.createRenderer(d,a),null,null,null));e[t.index]=c}function BS(e,t,a,d,D,y){let x=y[t];if(x!==null)for(let c=0;c<x.length;){let u=x[c++],w=x[c++],N=x[c++],L=x[c++];Fh(d,a,u,w,N,L)}}function zS(e,t,a){let d=null,D=0;for(;D<a.length;){let y=a[D];if(y===0){D+=4;continue}else if(y===5){D+=2;continue}if(typeof y=="number")break;if(e.hasOwnProperty(y)){d===null&&(d=[]);let x=e[y];for(let c=0;c<x.length;c+=3)if(x[c]===t){d.push(y,x[c+1],x[c+2],a[D+1]);break}}D+=2}return d}function Zh(e,t,a,d){return[e,!0,0,t,null,d,null,a,null,null]}function $h(e,t){let a=e.contentQueries;if(a!==null){let d=It(null);try{for(let D=0;D<a.length;D+=2){let y=a[D],x=a[D+1];if(x!==-1){let c=e.data[x];Al(y),c.contentQueries(2,t[x],x)}}}finally{It(d)}}}function Ns(e,t){return e[Tr]?e[Bf][Sn]=t:e[Tr]=t,e[Bf]=t,t}function il(e,t,a){Al(0);let d=It(null);try{t(e,a)}finally{It(d)}}function Jh(e){return e[us]??=[]}function Qh(e){return e.cleanup??=[]}function Kh(e,t){let a=e[er],d=a?a.get(Vn,null):null;d&&d.handleError(t)}function $l(e,t,a,d,D){for(let y=0;y<a.length;){let x=a[y++],c=a[y++],u=a[y++],w=t[x],N=e.data[x];Fh(N,w,d,c,u,D)}}function HS(e,t){let a=ar(t,e),d=a[ot];US(d,a);let D=a[Wn];D!==null&&a[cs]===null&&(a[cs]=zl(D,a[er])),Jl(d,a,a[Dn])}function US(e,t){for(let a=t.length;a<e.blueprint.length;a++)t.push(e.blueprint[a])}function Jl(e,t,a){Ol(t);try{let d=e.viewQuery;d!==null&&il(1,d,a);let D=e.template;D!==null&&zh(e,t,D,1,a),e.firstCreatePass&&(e.firstCreatePass=!1),t[Hn]?.finishViewCreation(e),e.staticContentQueries&&$h(e,t),e.staticViewQueries&&il(2,e.viewQuery,a);let y=e.components;y!==null&&VS(t,y)}catch(d){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),d}finally{t[nt]&=-5,Nl()}}function VS(e,t){for(let a=0;a<t.length;a++)HS(e,t[a])}function WS(e,t,a,d){let D=It(null);try{let y=t.tView,c=e[nt]&4096?4096:16,u=As(e,y,a,c,null,t,null,null,d?.injector??null,d?.embeddedViewInjector??null,d?.dehydratedView??null),w=e[t.index];u[Di]=w;let N=e[Hn];return N!==null&&(u[Hn]=N.createEmbeddedView(y)),Jl(y,u,a),u}finally{It(D)}}function Kf(e,t){return!t||t.firstChild===null||yh(e)}function GS(e,t,a,d=!0){let D=t[ot];if(iS(D,t,e,a),d){let x=tl(a,e),c=t[on],u=Gl(c,e[xi]);u!==null&&tS(D,e[xn],c,t,u,x)}let y=t[cs];y!==null&&y.firstChild!==null&&(y.firstChild=null)}function ys(e,t,a,d,D=!1){for(;a!==null;){if(a.type===128){a=D?a.projectionNext:a.next;continue}let y=t[a.index];y!==null&&d.push(Un(y)),Gn(y)&&YS(y,d);let x=a.type;if(x&8)ys(e,t,a.child,d);else if(x&32){let c=Vl(a,t),u;for(;u=c();)d.push(u)}else if(x&16){let c=kh(t,a);if(Array.isArray(c))d.push(...c);else{let u=Ei(t[zn]);ys(u[ot],u,c,d,!0)}}a=D?a.projectionNext:a.next}return d}function YS(e,t){for(let a=rn;a<e.length;a++){let d=e[a],D=d[ot].firstChild;D!==null&&ys(d[ot],d,D,t)}e[xi]!==e[Wn]&&t.push(e[xi])}var qh=[];function XS(e){return e[dn]??ZS(e)}function ZS(e){let t=qh.pop()??Object.create(JS);return t.lView=e,t}function $S(e){e.lView[dn]!==e&&(e.lView=null,qh.push(e))}var JS=ii(mn({},sa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{_s(e.lView)},consumerOnSignalRead(){this.lView[dn]=this}});function QS(e){let t=e[dn]??Object.create(KS);return t.lView=e,t}var KS=ii(mn({},sa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Ei(e.lView);for(;t&&!eg(t[ot]);)t=Ei(t);t&&Vd(t)},consumerOnSignalRead(){this.lView[dn]=this}});function eg(e){return e.type!==2}var qS=100;function tg(e,t=!0,a=0){let d=e[Ln],D=d.rendererFactory,y=!1;y||D.begin?.();try{eD(e,a)}catch(x){throw t&&Kh(e,x),x}finally{y||(D.end?.(),d.inlineEffectRunner?.flush())}}function eD(e,t){let a=$d();try{Hf(!0),rl(e,t);let d=0;for(;Ar(e);){if(d===qS)throw new bt(103,!1);d++,rl(e,1)}}finally{Hf(a)}}function tD(e,t,a,d){let D=t[nt];if((D&256)===256)return;let y=!1,x=!1;!y&&t[Ln].inlineEffectRunner?.flush(),Ol(t);let c=!0,u=null,w=null;y||(eg(e)?(w=XS(t),u=aa(w)):Gu()===null?(c=!1,w=QS(t),u=aa(w)):t[dn]&&(ca(t[dn]),t[dn]=null));try{Ud(t),cb(e.bindingStartIndex),a!==null&&zh(e,t,a,2,d);let N=(D&3)===3;if(!y)if(N){let R=e.preOrderCheckHooks;R!==null&&es(t,R,null)}else{let R=e.preOrderHooks;R!==null&&ts(t,R,0,null),Ta(t,0)}if(x||nD(t),ng(t,0),e.contentQueries!==null&&$h(e,t),!y)if(N){let R=e.contentCheckHooks;R!==null&&es(t,R)}else{let R=e.contentHooks;R!==null&&ts(t,R,1),Ta(t,1)}mS(e,t);let L=e.components;L!==null&&rg(t,L,0);let F=e.viewQuery;if(F!==null&&il(2,F,d),!y)if(N){let R=e.viewCheckHooks;R!==null&&es(t,R)}else{let R=e.viewHooks;R!==null&&ts(t,R,2),Ta(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[wa]){for(let R of t[wa])R();t[wa]=null}y||(t[nt]&=-73)}catch(N){throw y||_s(t),N}finally{w!==null&&(Yu(w,u),c&&$S(w)),Nl()}}function ng(e,t){for(let a=Ih(e);a!==null;a=bh(a))for(let d=rn;d<a.length;d++){let D=a[d];ig(D,t)}}function nD(e){for(let t=Ih(e);t!==null;t=bh(t)){if(!(t[nt]&ds.HasTransplantedViews))continue;let a=t[tr];for(let d=0;d<a.length;d++){let D=a[d];Vd(D)}}}function iD(e,t,a){let d=ar(t,e);ig(d,a)}function ig(e,t){Tl(e)&&rl(e,t)}function rl(e,t){let d=e[ot],D=e[nt],y=e[dn],x=!!(t===0&&D&16);if(x||=!!(D&64&&t===0),x||=!!(D&1024),x||=!!(y?.dirty&&la(y)),x||=!1,y&&(y.dirty=!1),e[nt]&=-9217,x)tD(d,e,d.template,e[Dn]);else if(D&8192){ng(e,1);let c=d.components;c!==null&&rg(e,c,1)}}function rg(e,t,a){for(let d=0;d<t.length;d++)iD(e,t[d],a)}function Ql(e,t){let a=$d()?64:1088;for(e[Ln].changeDetectionScheduler?.notify(t);e;){e[nt]|=a;let d=Ei(e);if(Wa(e)&&!d)return e;e=d}return null}var Nr=class{get rootNodes(){let t=this._lView,a=t[ot];return ys(a,t,a.firstChild,[])}constructor(t,a,d=!0){this._lView=t,this._cdRefInjectingView=a,this.notifyErrorHandler=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(t){this._lView[Dn]=t}get destroyed(){return(this._lView[nt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[$t];if(Gn(t)){let a=t[fs],d=a?a.indexOf(this):-1;d>-1&&(el(t,d),ss(a,d))}this._attachedToViewContainer=!1}Oh(this._lView[ot],this._lView)}onDestroy(t){Wd(this._lView,t)}markForCheck(){Ql(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[nt]&=-129}reattach(){Ya(this._lView),this._lView[nt]|=128}detectChanges(){this._lView[nt]|=1024,tg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new bt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Wa(this._lView),a=this._lView[Di];a!==null&&!t&&Wl(a,this._lView),Th(this._lView[ot],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new bt(902,!1);this._appRef=t;let a=Wa(this._lView),d=this._lView[Di];d!==null&&!a&&Ah(d,this._lView),Ya(this._lView)}},ir=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=sD;let e=t;return e})(),rD=ir,oD=class extends rD{constructor(t,a,d){super(),this._declarationLView=t,this._declarationTContainer=a,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,a){return this.createEmbeddedViewImpl(t,a)}createEmbeddedViewImpl(t,a,d){let D=WS(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:a,dehydratedView:d});return new Nr(D)}};function sD(){return Kl(Rn(),Wt())}function Kl(e,t){return e.type&4?new oD(t,e,lr(e,t)):null}var r1=new RegExp(`^(\\d+)*(${Yb}|${Gb})*(.*)`);var aD=()=>null;function qf(e,t){return aD(e,t)}var kr=class{},og=new St("",{providedIn:"root",factory:()=>!1});var sg=new St(""),ol=class{},Cs=class{};function lD(e){let t=Error(`No component factory found for ${fn(e)}.`);return t[cD]=e,t}var cD="ngComponent";var sl=class{resolveComponentFactory(t){throw lD(t)}},rc=class rc{};rc.NULL=new sl;var Pr=rc,rr=class{};var uD=(()=>{let t=class t{};t.\u0275prov=xt({token:t,providedIn:"root",factory:()=>null});let e=t;return e})();var ed=new Set;function ag(e){ed.has(e)||(ed.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function lg(e){let t=!0;return setTimeout(()=>{t&&(t=!1,e())}),typeof Ra.requestAnimationFrame=="function"&&Ra.requestAnimationFrame(()=>{t&&(t=!1,e())}),()=>{t=!1}}function td(e){let t=!0;return queueMicrotask(()=>{t&&e()}),()=>{t=!1}}function nd(...e){}var Vt=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kn(!1),this.onMicrotaskEmpty=new kn(!1),this.onStable=new kn(!1),this.onError=new kn(!1),typeof Zone>"u")throw new bt(908,!1);Zone.assertZonePatched();let D=this;D._nesting=0,D._outer=D._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(D._inner=D._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(D._inner=D._inner.fork(Zone.longStackTraceZoneSpec)),D.shouldCoalesceEventChangeDetection=!d&&a,D.shouldCoalesceRunChangeDetection=d,D.callbackScheduled=!1,hD(D)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new bt(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new bt(909,!1)}run(t,a,d){return this._inner.run(t,a,d)}runTask(t,a,d,D){let y=this._inner,x=y.scheduleEventTask("NgZoneEvent: "+D,t,fD,nd,nd);try{return y.runTask(x,a,d)}finally{y.cancelTask(x)}}runGuarded(t,a,d){return this._inner.runGuarded(t,a,d)}runOutsideAngular(t){return this._outer.run(t)}},fD={};function ql(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function dD(e){e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,Zone.root.run(()=>{lg(()=>{e.callbackScheduled=!1,al(e),e.isCheckStableRunning=!0,ql(e),e.isCheckStableRunning=!1})}),al(e))}function hD(e){let t=()=>{dD(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,D,y,x,c)=>{if(gD(c))return a.invokeTask(D,y,x,c);try{return id(e),a.invokeTask(D,y,x,c)}finally{(e.shouldCoalesceEventChangeDetection&&y.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),rd(e)}},onInvoke:(a,d,D,y,x,c,u)=>{try{return id(e),a.invoke(D,y,x,c,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!pD(c)&&t(),rd(e)}},onHasTask:(a,d,D,y)=>{a.hasTask(D,y),d===D&&(y.change=="microTask"?(e._hasPendingMicrotasks=y.microTask,al(e),ql(e)):y.change=="macroTask"&&(e.hasPendingMacrotasks=y.macroTask))},onHandleError:(a,d,D,y)=>(a.handleError(D,y),e.runOutsideAngular(()=>e.onError.emit(y)),!1)})}function al(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function id(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function rd(e){e._nesting--,ql(e)}var ll=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kn,this.onMicrotaskEmpty=new kn,this.onStable=new kn,this.onError=new kn}run(t,a,d){return t.apply(a,d)}runGuarded(t,a,d){return t.apply(a,d)}runOutsideAngular(t){return t()}runTask(t,a,d,D){return t.apply(a,d)}};function gD(e){return cg(e,"__ignore_ng_zone__")}function pD(e){return cg(e,"__scheduler_tick__")}function cg(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var ug=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let d=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let D of d)D()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=xt({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function cl(e,t,a){let d=a?e.styles:null,D=a?e.classes:null,y=0;if(t!==null)for(let x=0;x<t.length;x++){let c=t[x];if(typeof c=="number")y=c;else if(y==1)D=wf(D,c);else if(y==2){let u=c,w=t[++x];d=wf(d,u+": "+w+";")}}a?e.styles=d:e.stylesWithoutHost=d,a?e.classes=D:e.classesWithoutHost=D}var ul=class extends Pr{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let a=qi(t);return new Is(a,this.ngModule)}};function od(e,t){let a=[];for(let d in e){if(!e.hasOwnProperty(d))continue;let D=e[d];if(D===void 0)continue;let y=Array.isArray(D),x=y?D[0]:D,c=y?D[1]:oi.None;t?a.push({propName:x,templateName:d,isSignal:(c&oi.SignalBased)!==0}):a.push({propName:x,templateName:d})}return a}function vD(e){let t=e.toLowerCase();return t==="svg"?zd:t==="math"?J0:null}var Is=class extends Cs{get inputs(){let t=this.componentDef,a=t.inputTransforms,d=od(t.inputs,!0);if(a!==null)for(let D of d)a.hasOwnProperty(D.propName)&&(D.transform=a[D.propName]);return d}get outputs(){return od(this.componentDef.outputs,!1)}constructor(t,a){super(),this.componentDef=t,this.ngModule=a,this.componentType=t.type,this.selector=w0(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!a}create(t,a,d,D){let y=It(null);try{D=D||this.ngModule;let x=D instanceof si?D:D?.injector;x&&this.componentDef.getStandaloneInjector!==null&&(x=this.componentDef.getStandaloneInjector(x)||x);let c=x?new Za(t,x):t,u=c.get(rr,null);if(u===null)throw new bt(407,!1);let w=c.get(uD,null),N=c.get(ug,null),L=c.get(kr,null),F={rendererFactory:u,sanitizer:w,inlineEffectRunner:null,afterRenderEventManager:N,changeDetectionScheduler:L},R=u.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",s=d?IS(R,d,this.componentDef.encapsulation,c):wh(R,C,vD(C)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let v=null;s!==null&&(v=zl(s,c,!0));let n=Zl(0,null,null,1,0,null,null,null,null,null,null),l=As(null,n,null,m,null,null,F,R,c,null,v);Ol(l);let r,h;try{let b=this.componentDef,f,S=null;b.findHostDirectiveDefs?(f=[],S=new Map,b.findHostDirectiveDefs(b,f,S),f.push(b)):f=[b];let E=mD(l,s),_=yD(E,s,b,f,l,F,R);h=Hd(n,ai),s&&bD(R,b,s,d),a!==void 0&&SD(h,this.ngContentSelectors,a),r=ID(_,b,f,S,l,[DD]),Jl(n,l,null)}finally{Nl()}return new fl(this.componentType,r,lr(h,l),l,h)}finally{It(y)}}},fl=class extends ol{constructor(t,a,d,D,y){super(),this.location=d,this._rootLView=D,this._tNode=y,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new Nr(D,void 0,!1),this.componentType=t}setInput(t,a){let d=this._tNode.inputs,D;if(d!==null&&(D=d[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),a))return;let y=this._rootLView;$l(y[ot],y,D,t,a),this.previousInputValues.set(t,a);let x=ar(this._tNode.index,y);Ql(x,1)}}get injector(){return new Si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function mD(e,t){let a=e[ot],d=ai;return e[d]=t,Os(a,d,2,"#host",null)}function yD(e,t,a,d,D,y,x){let c=D[ot];CD(d,e,t,x);let u=null;t!==null&&(u=zl(t,D[er]));let w=y.rendererFactory.createRenderer(t,a),N=16;a.signals?N=4096:a.onPush&&(N=64);let L=As(D,Wh(a),null,N,D[e.index],e,y,w,null,null,u);return c.firstCreatePass&&nl(c,e,d.length-1),Ns(D,L),D[e.index]=L}function CD(e,t,a,d){for(let D of e)t.mergedAttrs=Sl(t.mergedAttrs,D.hostAttrs);t.mergedAttrs!==null&&(cl(t,t.mergedAttrs,!0),a!==null&&Lh(d,a,t))}function ID(e,t,a,d,D,y){let x=Rn(),c=D[ot],u=En(x,D);Yh(c,D,x,a,null,d);for(let N=0;N<a.length;N++){let L=x.directiveStart+N,F=nr(D,c,L,x);wi(F,D)}Xh(c,D,x),u&&wi(u,D);let w=nr(D,c,x.directiveStart+x.componentOffset,x);if(e[Dn]=D[Dn]=w,y!==null)for(let N of y)N(w,t);return Hh(c,x,D),w}function bD(e,t,a,d){if(d)Ba(e,a,["ng-version","18.1.2"]);else{let{attrs:D,classes:y}=T0(t.selectors[0]);D&&Ba(e,a,D),y&&y.length>0&&Ph(e,a,y.join(" "))}}function SD(e,t,a){let d=e.projection=[];for(let D=0;D<t.length;D++){let y=a[D];d.push(y!=null?Array.from(y):null)}}function DD(){let e=Rn();Ll(Wt()[ot],e)}var jr=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=xD;let e=t;return e})();function xD(){let e=Rn();return dg(e,Wt())}var ED=jr,fg=class extends ED{constructor(t,a,d){super(),this._lContainer=t,this._hostTNode=a,this._hostLView=d}get element(){return lr(this._hostTNode,this._hostLView)}get injector(){return new Si(this._hostTNode,this._hostLView)}get parentInjector(){let t=Rl(this._hostTNode,this._hostLView);if(sh(t)){let a=ps(t,this._hostLView),d=gs(t),D=a[ot].data[d+8];return new Si(D,a)}else return new Si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let a=sd(this._lContainer);return a!==null&&a[t]||null}get length(){return this._lContainer.length-rn}createEmbeddedView(t,a,d){let D,y;typeof d=="number"?D=d:d!=null&&(D=d.index,y=d.injector);let x=qf(this._lContainer,t.ssrId),c=t.createEmbeddedViewImpl(a||{},y,x);return this.insertImpl(c,D,Kf(this._hostTNode,x)),c}createComponent(t,a,d,D,y){let x=t&&!Y0(t),c;if(x)c=a;else{let C=a||{};c=C.index,d=C.injector,D=C.projectableNodes,y=C.environmentInjector||C.ngModuleRef}let u=x?t:new Is(qi(t)),w=d||this.parentInjector;if(!y&&u.ngModule==null){let s=(x?w:this.parentInjector).get(si,null);s&&(y=s)}let N=qi(u.componentType??{}),L=qf(this._lContainer,N?.id??null),F=L?.firstChild??null,R=u.create(w,D,F,y);return this.insertImpl(R.hostView,c,Kf(this._hostTNode,L)),R}insert(t,a){return this.insertImpl(t,a,!0)}insertImpl(t,a,d){let D=t._lView;if(K0(D)){let c=this.indexOf(t);if(c!==-1)this.detach(c);else{let u=D[$t],w=new fg(u,u[xn],u[$t]);w.detach(w.indexOf(t))}}let y=this._adjustIndex(a),x=this._lContainer;return GS(x,D,y,d),t.attachToViewContainerRef(),Cd(Pa(x),y,t),t}move(t,a){return this.insert(t,a)}indexOf(t){let a=sd(this._lContainer);return a!==null?a.indexOf(t):-1}remove(t){let a=this._adjustIndex(t,-1),d=el(this._lContainer,a);d&&(ss(Pa(this._lContainer),a),Oh(d[ot],d))}detach(t){let a=this._adjustIndex(t,-1),d=el(this._lContainer,a);return d&&ss(Pa(this._lContainer),a)!=null?new Nr(d):null}_adjustIndex(t,a=0){return t??this.length+a}};function sd(e){return e[fs]}function Pa(e){return e[fs]||(e[fs]=[])}function dg(e,t){let a,d=t[e.index];return Gn(d)?a=d:(a=Zh(d,t,null,e),t[e.index]=a,Ns(t,a)),_D(a,t,e,d),new fg(a,e,t)}function MD(e,t){let a=e[on],d=a.createComment(""),D=En(t,e),y=Gl(a,D);return ms(a,y,d,cS(a,D),!1),d}var _D=AD,wD=()=>!1;function TD(e,t,a){return wD(e,t,a)}function AD(e,t,a,d){if(e[xi])return;let D;a.type&8?D=Un(d):D=MD(t,a),e[xi]=D}var dl=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},hl=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let a=t.queries;if(a!==null){let d=t.contentQueries!==null?t.contentQueries[0]:a.length,D=[];for(let y=0;y<d;y++){let x=a.getByIndex(y),c=this.queries[x.indexInDeclarationView];D.push(c.clone())}return new e(D)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let a=0;a<this.queries.length;a++)ec(t,a).matches!==null&&this.queries[a].setDirty()}},gl=class{constructor(t,a,d=null){this.flags=a,this.read=d,typeof t=="string"?this.predicate=FD(t):this.predicate=t}},pl=class e{constructor(t=[]){this.queries=t}elementStart(t,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(t,a)}elementEnd(t){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(t)}embeddedTView(t){let a=null;for(let d=0;d<this.length;d++){let D=a!==null?a.length:0,y=this.getByIndex(d).embeddedTView(t,D);y&&(y.indexInDeclarationView=d,a!==null?a.push(y):a=[y])}return a!==null?new e(a):null}template(t,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(t,a)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},vl=class e{constructor(t,a=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(t,a){this.isApplyingToNode(a)&&this.matchTNode(t,a)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,a){this.elementStart(t,a)}embeddedTView(t,a){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,a),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let a=this._declarationNodeIndex,d=t.parent;for(;d!==null&&d.type&8&&d.index!==a;)d=d.parent;return a===(d!==null?d.index:-1)}return this._appliesToNextNode}matchTNode(t,a){let d=this.metadata.predicate;if(Array.isArray(d))for(let D=0;D<d.length;D++){let y=d[D];this.matchTNodeWithReadOption(t,a,OD(a,y)),this.matchTNodeWithReadOption(t,a,ns(a,t,y,!1,!1))}else d===ir?a.type&4&&this.matchTNodeWithReadOption(t,a,-1):this.matchTNodeWithReadOption(t,a,ns(a,t,d,!1,!1))}matchTNodeWithReadOption(t,a,d){if(d!==null){let D=this.metadata.read;if(D!==null)if(D===cr||D===jr||D===ir&&a.type&4)this.addMatch(a.index,-2);else{let y=ns(a,t,D,!1,!1);y!==null&&this.addMatch(a.index,y)}else this.addMatch(a.index,d)}}addMatch(t,a){this.matches===null?this.matches=[t,a]:this.matches.push(t,a)}};function OD(e,t){let a=e.localNames;if(a!==null){for(let d=0;d<a.length;d+=2)if(a[d]===t)return a[d+1]}return null}function ND(e,t){return e.type&11?lr(e,t):e.type&4?Kl(e,t):null}function kD(e,t,a,d){return a===-1?ND(t,e):a===-2?PD(e,t,d):nr(e,e[ot],a,t)}function PD(e,t,a){if(a===cr)return lr(t,e);if(a===ir)return Kl(t,e);if(a===jr)return dg(t,e)}function hg(e,t,a,d){let D=t[Hn].queries[d];if(D.matches===null){let y=e.data,x=a.matches,c=[];for(let u=0;x!==null&&u<x.length;u+=2){let w=x[u];if(w<0)c.push(null);else{let N=y[w];c.push(kD(t,N,x[u+1],a.metadata.read))}}D.matches=c}return D.matches}function ml(e,t,a,d){let D=e.queries.getByIndex(a),y=D.matches;if(y!==null){let x=hg(e,t,D,a);for(let c=0;c<y.length;c+=2){let u=y[c];if(u>0)d.push(x[c/2]);else{let w=y[c+1],N=t[-u];for(let L=rn;L<N.length;L++){let F=N[L];F[Di]===F[$t]&&ml(F[ot],F,w,d)}if(N[tr]!==null){let L=N[tr];for(let F=0;F<L.length;F++){let R=L[F];ml(R[ot],R,w,d)}}}}}return d}function LD(e,t){return e[Hn].queries[t].queryList}function RD(e,t,a){let d=new Ka((a&4)===4);return DS(e,t,d,d.destroy),(t[Hn]??=new hl).queries.push(new dl(d))-1}function jD(e,t,a){let d=Yn();return d.firstCreatePass&&(BD(d,new gl(e,t,a),-1),(t&2)===2&&(d.staticViewQueries=!0)),RD(d,Wt(),t)}function FD(e){return e.split(",").map(t=>t.trim())}function BD(e,t,a){e.queries===null&&(e.queries=new pl),e.queries.track(new vl(t,a))}function ec(e,t){return e.queries.getByIndex(t)}function zD(e,t){let a=e[ot],d=ec(a,t);return d.crossesNgTemplate?ml(a,e,t,[]):hg(a,e,d,t)}var or=class{};var bs=class extends or{constructor(t){super(),this.componentFactoryResolver=new ul(this),this.instance=null;let a=new ls([...t.providers,{provide:or,useValue:this},{provide:Pr,useValue:this.componentFactoryResolver}],t.parent||Ml(),t.debugName,new Set(["environment"]));this.injector=a,t.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function HD(e,t,a=null){return new bs({providers:e,parent:t,debugName:a,runEnvironmentInitializers:!0}).injector}function UD(e,t,a){let d=e[t];return Object.is(d,a)?!1:(e[t]=a,!0)}function VD(e){return(e.flags&32)===32}function WD(e,t,a,d,D,y,x,c,u){let w=t.consts,N=Os(t,e,4,x||null,c||null);Gh(t,a,N,hs(w,u)),Ll(t,N);let L=N.tView=Zl(2,N,d,D,y,t.directiveRegistry,t.pipeRegistry,null,t.schemas,w,null);return t.queries!==null&&(t.queries.template(t,N),L.queries=t.queries.embeddedTView(N)),N}function GD(e,t,a,d,D,y,x,c,u,w){let N=a+ai,L=t.firstCreatePass?WD(N,t,e,d,D,y,x,c,u):t.data[N];Rr(L,!1);let F=YD(t,e,L,a);kl()&&Yl(t,e,F,L),wi(F,e);let R=Zh(F,e,F,L);return e[N]=R,Ns(e,R),TD(R,L,e),wl(L)&&Uh(t,e,L),u!=null&&Vh(e,L,w),L}function Oi(e,t,a,d,D,y,x,c){let u=Wt(),w=Yn(),N=hs(w.consts,y);return GD(u,w,e,t,a,d,D,N,x,c),Oi}var YD=XD;function XD(e,t,a,d){return Pl(!0),t[on].createComment("")}function sn(e,t,a){let d=Wt(),D=ub();if(UD(d,D,t)){let y=Yn(),x=vb();_S(y,x,d,e,t,d[on],a,!1)}return sn}function ad(e,t,a,d,D){let y=t.inputs,x=D?"class":"style";$l(e,a,y[x],x,d)}function ZD(e,t,a,d,D,y){let x=t.consts,c=hs(x,D),u=Os(t,e,2,d,c);return Gh(t,a,u,hs(x,y)),u.attrs!==null&&cl(u,u.attrs,!1),u.mergedAttrs!==null&&cl(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function wt(e,t,a,d){let D=Wt(),y=Yn(),x=ai+e,c=D[on],u=y.firstCreatePass?ZD(x,y,D,t,a,d):y.data[x],w=$D(y,D,u,c,t,e);D[x]=w;let N=wl(u);return Rr(u,!0),Lh(c,w,u),!VD(u)&&kl()&&Yl(y,D,w,u),tb()===0&&wi(w,D),nb(),N&&(Uh(y,D,u),Hh(y,u,D)),d!==null&&Vh(D,u),wt}function Yt(){let e=Rn();Zd()?lb():(e=e.parent,Rr(e,!1));let t=e;ob(t)&&sb(),ib();let a=Yn();return a.firstCreatePass&&(Ll(a,e),Pd(e)&&a.queries.elementEnd(e)),t.classesWithoutHost!=null&&bb(t)&&ad(a,t,Wt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Sb(t)&&ad(a,t,Wt(),t.stylesWithoutHost,!1),Yt}function li(e,t,a,d){return wt(e,t,a,d),Yt(),li}var $D=(e,t,a,d,D,y)=>(Pl(!0),wh(d,D,mb()));function ci(){return Wt()}var Ss="en-US";var JD=Ss;function QD(e){typeof e=="string"&&(JD=e.toLowerCase().replace(/_/g,"-"))}var KD=(e,t,a)=>{};function jn(e,t,a,d){let D=Wt(),y=Yn(),x=Rn();return ex(y,D,D[on],x,e,t,d),jn}function qD(e,t,a,d){let D=e.cleanup;if(D!=null)for(let y=0;y<D.length-1;y+=2){let x=D[y];if(x===a&&D[y+1]===d){let c=t[us],u=D[y+2];return c.length>u?c[u]:null}typeof x=="string"&&(y+=2)}return null}function ex(e,t,a,d,D,y,x){let c=wl(d),w=e.firstCreatePass&&Qh(e),N=t[Dn],L=Jh(t),F=!0;if(d.type&3||x){let s=En(d,t),m=x?x(s):s,v=L.length,n=x?r=>x(Un(r[d.index])):d.index,l=null;if(!x&&c&&(l=qD(e,t,D,d.index)),l!==null){let r=l.__ngLastListenerFn__||l;r.__ngNextListenerFn__=y,l.__ngLastListenerFn__=y,F=!1}else{y=cd(d,t,N,y),KD(s,D,y);let r=a.listen(m,D,y);L.push(y,r),w&&w.push(D,n,v,v+1)}}else y=cd(d,t,N,y);let R=d.outputs,C;if(F&&R!==null&&(C=R[D])){let s=C.length;if(s)for(let m=0;m<s;m+=2){let v=C[m],n=C[m+1],h=t[v][n].subscribe(y),b=L.length;L.push(y,h),w&&w.push(D,d.index,b,-(b+1))}}}function ld(e,t,a,d){let D=It(null);try{return On(6,t,a),a(d)!==!1}catch(y){return Kh(e,y),!1}finally{On(7,t,a),It(D)}}function cd(e,t,a,d){return function D(y){if(y===Function)return d;let x=e.componentOffset>-1?ar(e.index,t):t;Ql(x,5);let c=ld(t,a,d,y),u=D.__ngNextListenerFn__;for(;u;)c=ld(t,a,u,y)&&c,u=u.__ngNextListenerFn__;return c}}function hn(e=1){return pb(e)}function ks(e,t,a){jD(e,t,a)}function Ps(e){let t=Wt(),a=Yn(),d=Jd();Al(d+1);let D=ec(a,d);if(e.dirty&&Q0(t)===((D.metadata.flags&2)===2)){if(D.matches===null)e.reset([]);else{let y=zD(t,d);e.reset(y,jb),e.notifyOnChanges()}return!0}return!1}function Ls(){return LD(Wt(),Jd())}function Jn(e,t=""){let a=Wt(),d=Yn(),D=e+ai,y=d.firstCreatePass?Os(d,D,1,t,null):d.data[D],x=tx(d,a,y,t,e);a[D]=x,kl()&&Yl(d,a,x,y),Rr(y,!1)}var tx=(e,t,a,d,D)=>(Pl(!0),qb(t[on],d));var nx=(()=>{let t=class t{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d)){let D=Td(!1,d.type),y=D.length>0?HD([D],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d,y)}return this.cachedInjectors.get(d)}ngOnDestroy(){try{for(let d of this.cachedInjectors.values())d!==null&&d.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=xt({token:t,providedIn:"environment",factory:()=>new t(ht(si))});let e=t;return e})();function Rs(e){ag("NgStandalone"),e.getStandaloneInjector=t=>t.get(nx).getOrCreateStandaloneInjector(e)}var gg=new St("");function tc(e){return!!e&&typeof e.then=="function"}function pg(e){return!!e&&typeof e.subscribe=="function"}var nc=new St(""),vg=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,D)=>{this.resolve=d,this.reject=D}),this.appInits=Mt(nc,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let d=[];for(let y of this.appInits){let x=y();if(tc(x))d.push(x);else if(pg(x)){let c=new Promise((u,w)=>{x.subscribe({complete:u,error:w})});d.push(c)}}let D=()=>{this.done=!0,this.resolve()};Promise.all(d).then(()=>{D()}).catch(y=>{this.reject(y)}),d.length===0&&D(),this.initialized=!0}};t.\u0275fac=function(D){return new(D||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ix=new St("");function rx(){Xu(()=>{throw new bt(600,!1)})}function ox(e){return e.isBoundToModule}var sx=10;function ax(e,t,a){try{let d=a();return tc(d)?d.catch(D=>{throw t.runOutsideAngular(()=>e.handleError(D)),D}):d}catch(d){throw t.runOutsideAngular(()=>e.handleError(d)),d}}var Ni=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Mt(vh),this.afterRenderEffectManager=Mt(ug),this.zonelessEnabled=Mt(og),this.externalTestViews=new Set,this.beforeRender=new tn,this.afterTick=new tn,this.componentTypes=[],this.components=[],this.isStable=Mt(ws).hasPendingTasks.pipe(Zt(d=>!d)),this._injector=Mt(si)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(d,D){let y=d instanceof Cs;if(!this._injector.get(vg).done){let R=!y&&N0(d),C=!1;throw new bt(405,C)}let c;y?c=d:c=this._injector.get(Pr).resolveComponentFactory(d),this.componentTypes.push(c.componentType);let u=ox(c)?void 0:this._injector.get(or),w=D||c.selector,N=c.create(_i.NULL,[],w,u),L=N.location.nativeElement,F=N.injector.get(gg,null);return F?.registerApplication(L),N.onDestroy(()=>{this.detachView(N.hostView),La(this.components,N),F?.unregisterApplication(L)}),this._loadComponent(N),N}tick(){this._tick(!0)}_tick(d){if(this._runningTick)throw new bt(101,!1);let D=It(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(d)}catch(y){this.internalErrorHandler(y)}finally{this._runningTick=!1,It(D),this.afterTick.next()}}detectChangesInAttachedViews(d){let D=null;this._injector.destroyed||(D=this._injector.get(rr,null,{optional:!0}));let y=0,x=this.afterRenderEffectManager;for(;y<sx;){let c=y===0;if(d||!c){this.beforeRender.next(c);for(let{_lView:u,notifyErrorHandler:w}of this._views)lx(u,w,c,this.zonelessEnabled)}else D?.begin?.(),D?.end?.();if(y++,x.executeInternalCallbacks(),!this.allViews.some(({_lView:u})=>Ar(u))&&(x.execute(),!this.allViews.some(({_lView:u})=>Ar(u))))break}}attachView(d){let D=d;this._views.push(D),D.attachToAppRef(this)}detachView(d){let D=d;La(this._views,D),D.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);let D=this._injector.get(ix,[]);[...this._bootstrapListeners,...D].forEach(y=>y(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>La(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new bt(406,!1);let d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(D){return new(D||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function La(e,t){let a=e.indexOf(t);a>-1&&e.splice(a,1)}function lx(e,t,a,d){if(!a&&!Ar(e))return;tg(e,t,a&&!d?0:1)}var cx=(()=>{let t=class t{constructor(){this.zone=Mt(Vt),this.changeDetectionScheduler=Mt(kr),this.applicationRef=Mt(Ni)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(D){return new(D||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ux({ngZoneFactory:e,ignoreChangesOutsideZone:t}){return e??=()=>new Vt(dx()),[{provide:Vt,useFactory:e},{provide:wr,multi:!0,useFactory:()=>{let a=Mt(cx,{optional:!0});return()=>a.initialize()}},{provide:wr,multi:!0,useFactory:()=>{let a=Mt(hx);return()=>{a.initialize()}}},{provide:vh,useFactory:fx},t===!0?{provide:sg,useValue:!0}:[]]}function fx(){let e=Mt(Vt),t=Mt(Vn);return a=>e.runOutsideAngular(()=>t.handleError(a))}function dx(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var hx=(()=>{let t=class t{constructor(){this.subscription=new Ut,this.initialized=!1,this.zone=Mt(Vt),this.pendingTasks=Mt(ws)}initialize(){if(this.initialized)return;this.initialized=!0;let d=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(d=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{d!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(d),d=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Vt.assertInAngularZone(),d??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(D){return new(D||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var gx=(()=>{let t=class t{constructor(){this.appRef=Mt(Ni),this.taskService=Mt(ws),this.ngZone=Mt(Vt),this.zonelessEnabled=Mt(og),this.disableScheduling=Mt(sg,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ut,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ll||!this.zoneIsDefined)}notify(d){if(!this.zonelessEnabled&&d===5)return;switch(d){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let D=this.useMicrotaskScheduler?td:lg;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=D(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=D(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Vt.isInAngularZone())}tick(d){if(this.runningTick||this.appRef.destroyed)return;let D=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(d)},void 0,this.schedulerTickApplyArgs)}catch(y){throw this.taskService.remove(D),y}finally{this.cleanup()}this.useMicrotaskScheduler=!0,td(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(D)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let d=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(d)}}};t.\u0275fac=function(D){return new(D||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function px(){return typeof $localize<"u"&&$localize.locale||Ss}var ic=new St("",{providedIn:"root",factory:()=>Mt(ic,st.Optional|st.SkipSelf)||px()});var mg=new St("");var rs=null;function vx(e=[],t){return _i.create({name:t,providers:[{provide:Es,useValue:"platform"},{provide:mg,useValue:new Set([()=>rs=null])},...e]})}function mx(e=[]){if(rs)return rs;let t=vx(e);return rs=t,rx(),yx(t),t}function yx(e){e.get(Fl,null)?.forEach(a=>a())}function yg(e){try{let{rootComponent:t,appProviders:a,platformProviders:d}=e,D=mx(d),y=[ux({}),{provide:kr,useExisting:gx},...a||[]],c=new bs({providers:y,parent:D,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(Vt);return u.run(()=>{c.resolveInjectorInitializers();let w=c.get(Vn,null),N;u.runOutsideAngular(()=>{N=u.onError.subscribe({next:R=>{w.handleError(R)}})});let L=()=>c.destroy(),F=D.get(mg);return F.add(L),c.onDestroy(()=>{N.unsubscribe(),F.delete(L)}),ax(w,u,()=>{let R=c.get(vg);return R.runInitializers(),R.donePromise.then(()=>{let C=c.get(ic,Ss);QD(C||Ss);let s=c.get(Ni);return t!==void 0&&s.bootstrap(t),s})})})}catch(t){return Promise.reject(t)}}var Cg=new St("");var Dg=null;function sc(){return Dg}function xg(e){Dg??=e}var js=class{};var Qn=new St("");function Eg(e,t){t=encodeURIComponent(t);for(let a of e.split(";")){let d=a.indexOf("="),[D,y]=d==-1?[a,""]:[a.slice(0,d),a.slice(d+1)];if(D.trim()===t)return decodeURIComponent(y)}return null}var Mg=(()=>{let t=class t{constructor(d,D){this._viewContainer=d,this._context=new oc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=D}set ngIf(d){this._context.$implicit=this._context.ngIf=d,this._updateView()}set ngIfThen(d){Ig("ngIfThen",d),this._thenTemplateRef=d,this._thenViewRef=null,this._updateView()}set ngIfElse(d){Ig("ngIfElse",d),this._elseTemplateRef=d,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(d,D){return!0}};t.\u0275fac=function(D){return new(D||t)(Ai(jr),Ai(ir))},t.\u0275dir=xd({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),oc=class{constructor(){this.$implicit=null,this.ngIf=null}};function Ig(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${fn(t)}'.`)}var ac="browser",Sx="server";function lc(e){return e===ac}function cc(e){return e===Sx}var Fs=class{};var dc=class extends js{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hc=class e extends dc{static makeCurrent(){xg(new e)}onAndCancel(t,a,d){return t.addEventListener(a,d),()=>{t.removeEventListener(a,d)}}dispatchEvent(t,a){t.dispatchEvent(a)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,a){return a=a||this.getDefaultDocument(),a.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,a){return a==="window"?window:a==="document"?t:a==="body"?t.body:null}getBaseHref(t){let a=xx();return a==null?null:Ex(a)}resetBaseElement(){Fr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Eg(document.cookie,t)}},Fr=null;function xx(){return Fr=Fr||document.querySelector("base"),Fr?Fr.getAttribute("href"):null}function Ex(e){return new URL(e,document.baseURI).pathname}var Mx=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(D){return new(D||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),Bs=new St(""),Ag=(()=>{let t=class t{constructor(d,D){this._zone=D,this._eventNameToPlugin=new Map,d.forEach(y=>{y.manager=this}),this._plugins=d.slice().reverse()}addEventListener(d,D,y){return this._findPluginFor(D).addEventListener(d,D,y)}getZone(){return this._zone}_findPluginFor(d){let D=this._eventNameToPlugin.get(d);if(D)return D;if(D=this._plugins.find(x=>x.supports(d)),!D)throw new bt(5101,!1);return this._eventNameToPlugin.set(d,D),D}};t.\u0275fac=function(D){return new(D||t)(ht(Bs),ht(Vt))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),Br=class{constructor(t){this._doc=t}},uc="ng-app-id",Og=(()=>{let t=class t{constructor(d,D,y,x={}){this.doc=d,this.appId=D,this.nonce=y,this.platformId=x,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=cc(x),this.resetHostNodes()}addStyles(d){for(let D of d)this.changeUsageCount(D,1)===1&&this.onStyleAdded(D)}removeStyles(d){for(let D of d)this.changeUsageCount(D,-1)<=0&&this.onStyleRemoved(D)}ngOnDestroy(){let d=this.styleNodesInDOM;d&&(d.forEach(D=>D.remove()),d.clear());for(let D of this.getAllStyles())this.onStyleRemoved(D);this.resetHostNodes()}addHost(d){this.hostNodes.add(d);for(let D of this.getAllStyles())this.addStyleToHost(d,D)}removeHost(d){this.hostNodes.delete(d)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(d){for(let D of this.hostNodes)this.addStyleToHost(D,d)}onStyleRemoved(d){let D=this.styleRef;D.get(d)?.elements?.forEach(y=>y.remove()),D.delete(d)}collectServerRenderedStyles(){let d=this.doc.head?.querySelectorAll(`style[${uc}="${this.appId}"]`);if(d?.length){let D=new Map;return d.forEach(y=>{y.textContent!=null&&D.set(y.textContent,y)}),D}return null}changeUsageCount(d,D){let y=this.styleRef;if(y.has(d)){let x=y.get(d);return x.usage+=D,x.usage}return y.set(d,{usage:D,elements:[]}),D}getStyleElement(d,D){let y=this.styleNodesInDOM,x=y?.get(D);if(x?.parentNode===d)return y.delete(D),x.removeAttribute(uc),x;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=D,this.platformIsServer&&c.setAttribute(uc,this.appId),d.appendChild(c),c}}addStyleToHost(d,D){let y=this.getStyleElement(d,D),x=this.styleRef,c=x.get(D)?.elements;c?c.push(y):x.set(D,{elements:[y],usage:1})}resetHostNodes(){let d=this.hostNodes;d.clear(),d.add(this.doc.head)}};t.\u0275fac=function(D){return new(D||t)(ht(Qn),ht(jl),ht(Bl,8),ht($n))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),fc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pc=/%COMP%/g,Ng="%COMP%",_x=`_nghost-${Ng}`,wx=`_ngcontent-${Ng}`,Tx=!0,Ax=new St("",{providedIn:"root",factory:()=>Tx});function Ox(e){return wx.replace(pc,e)}function Nx(e){return _x.replace(pc,e)}function kg(e,t){return t.map(a=>a.replace(pc,e))}var _g=(()=>{let t=class t{constructor(d,D,y,x,c,u,w,N=null){this.eventManager=d,this.sharedStylesHost=D,this.appId=y,this.removeStylesOnCompDestroy=x,this.doc=c,this.platformId=u,this.ngZone=w,this.nonce=N,this.rendererByCompId=new Map,this.platformIsServer=cc(u),this.defaultRenderer=new zr(d,c,w,this.platformIsServer)}createRenderer(d,D){if(!d||!D)return this.defaultRenderer;this.platformIsServer&&D.encapsulation===Pn.ShadowDom&&(D=ii(mn({},D),{encapsulation:Pn.Emulated}));let y=this.getOrCreateRenderer(d,D);return y instanceof zs?y.applyToHost(d):y instanceof Hr&&y.applyStyles(),y}getOrCreateRenderer(d,D){let y=this.rendererByCompId,x=y.get(D.id);if(!x){let c=this.doc,u=this.ngZone,w=this.eventManager,N=this.sharedStylesHost,L=this.removeStylesOnCompDestroy,F=this.platformIsServer;switch(D.encapsulation){case Pn.Emulated:x=new zs(w,N,D,this.appId,L,c,u,F);break;case Pn.ShadowDom:return new gc(w,N,d,D,c,u,this.nonce,F);default:x=new Hr(w,N,D,L,c,u,F);break}y.set(D.id,x)}return x}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(D){return new(D||t)(ht(Ag),ht(Og),ht(jl),ht(Ax),ht(Qn),ht($n),ht(Vt),ht(Bl))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),zr=class{constructor(t,a,d,D){this.eventManager=t,this.doc=a,this.ngZone=d,this.platformIsServer=D,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,a){return a?this.doc.createElementNS(fc[a]||a,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,a){(wg(t)?t.content:t).appendChild(a)}insertBefore(t,a,d){t&&(wg(t)?t.content:t).insertBefore(a,d)}removeChild(t,a){t&&t.removeChild(a)}selectRootElement(t,a){let d=typeof t=="string"?this.doc.querySelector(t):t;if(!d)throw new bt(-5104,!1);return a||(d.textContent=""),d}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,a,d,D){if(D){a=D+":"+a;let y=fc[D];y?t.setAttributeNS(y,a,d):t.setAttribute(a,d)}else t.setAttribute(a,d)}removeAttribute(t,a,d){if(d){let D=fc[d];D?t.removeAttributeNS(D,a):t.removeAttribute(`${d}:${a}`)}else t.removeAttribute(a)}addClass(t,a){t.classList.add(a)}removeClass(t,a){t.classList.remove(a)}setStyle(t,a,d,D){D&(Ti.DashCase|Ti.Important)?t.style.setProperty(a,d,D&Ti.Important?"important":""):t.style[a]=d}removeStyle(t,a,d){d&Ti.DashCase?t.style.removeProperty(a):t.style[a]=""}setProperty(t,a,d){t!=null&&(t[a]=d)}setValue(t,a){t.nodeValue=a}listen(t,a,d){if(typeof t=="string"&&(t=sc().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${a}`);return this.eventManager.addEventListener(t,a,this.decoratePreventDefault(d))}decoratePreventDefault(t){return a=>{if(a==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(a)):t(a))===!1&&a.preventDefault()}}};function wg(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var gc=class extends zr{constructor(t,a,d,D,y,x,c,u){super(t,y,x,u),this.sharedStylesHost=a,this.hostEl=d,this.shadowRoot=d.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let w=kg(D.id,D.styles);for(let N of w){let L=document.createElement("style");c&&L.setAttribute("nonce",c),L.textContent=N,this.shadowRoot.appendChild(L)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,a){return super.appendChild(this.nodeOrShadowRoot(t),a)}insertBefore(t,a,d){return super.insertBefore(this.nodeOrShadowRoot(t),a,d)}removeChild(t,a){return super.removeChild(this.nodeOrShadowRoot(t),a)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Hr=class extends zr{constructor(t,a,d,D,y,x,c,u){super(t,y,x,c),this.sharedStylesHost=a,this.removeStylesOnCompDestroy=D,this.styles=u?kg(u,d.styles):d.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},zs=class extends Hr{constructor(t,a,d,D,y,x,c,u){let w=D+"-"+d.id;super(t,a,d,y,x,c,u,w),this.contentAttr=Ox(w),this.hostAttr=Nx(w)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,a){let d=super.createElement(t,a);return super.setAttribute(d,this.contentAttr,""),d}},kx=(()=>{let t=class t extends Br{constructor(d){super(d)}supports(d){return!0}addEventListener(d,D,y){return d.addEventListener(D,y,!1),()=>this.removeEventListener(d,D,y)}removeEventListener(d,D,y){return d.removeEventListener(D,y)}};t.\u0275fac=function(D){return new(D||t)(ht(Qn))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),Px=(()=>{let t=class t extends Br{constructor(d){super(d),this.delegate=Mt(Cg,{optional:!0})}supports(d){return this.delegate?this.delegate.supports(d):!1}addEventListener(d,D,y){return this.delegate.addEventListener(d,D,y)}removeEventListener(d,D,y){return this.delegate.removeEventListener(d,D,y)}};t.\u0275fac=function(D){return new(D||t)(ht(Qn))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),Tg=["alt","control","meta","shift"],Lx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rx={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},jx=(()=>{let t=class t extends Br{constructor(d){super(d)}supports(d){return t.parseEventName(d)!=null}addEventListener(d,D,y){let x=t.parseEventName(D),c=t.eventCallback(x.fullKey,y,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sc().onAndCancel(d,x.domEventName,c))}static parseEventName(d){let D=d.toLowerCase().split("."),y=D.shift();if(D.length===0||!(y==="keydown"||y==="keyup"))return null;let x=t._normalizeKey(D.pop()),c="",u=D.indexOf("code");if(u>-1&&(D.splice(u,1),c="code."),Tg.forEach(N=>{let L=D.indexOf(N);L>-1&&(D.splice(L,1),c+=N+".")}),c+=x,D.length!=0||x.length===0)return null;let w={};return w.domEventName=y,w.fullKey=c,w}static matchEventFullKeyCode(d,D){let y=Lx[d.key]||d.key,x="";return D.indexOf("code.")>-1&&(y=d.code,x="code."),y==null||!y?!1:(y=y.toLowerCase(),y===" "?y="space":y==="."&&(y="dot"),Tg.forEach(c=>{if(c!==y){let u=Rx[c];u(d)&&(x+=c+".")}}),x+=y,x===D)}static eventCallback(d,D,y){return x=>{t.matchEventFullKeyCode(x,d)&&y.runGuarded(()=>D(x))}}static _normalizeKey(d){return d==="esc"?"escape":d}};t.\u0275fac=function(D){return new(D||t)(ht(Qn))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})();function Pg(e,t){return yg(mn({rootComponent:e},Fx(t)))}function Fx(e){return{appProviders:[...Vx,...e?.providers??[]],platformProviders:Ux}}function Bx(){hc.makeCurrent()}function zx(){return new Vn}function Hx(){return Dh(document),document}var Ux=[{provide:$n,useValue:ac},{provide:Fl,useValue:Bx,multi:!0},{provide:Qn,useFactory:Hx,deps:[]}];var Vx=[{provide:Es,useValue:"root"},{provide:Vn,useFactory:zx,deps:[]},{provide:Bs,useClass:kx,multi:!0,deps:[Qn,Vt,$n]},{provide:Bs,useClass:jx,multi:!0,deps:[Qn]},{provide:Bs,useClass:Px,multi:!0},_g,Og,Ag,{provide:rr,useExisting:_g},{provide:Fs,useClass:Mx,deps:[]},[]];var Vr="Service workers are disabled or not supported by this browser";function Wx(e){return Jo(()=>Sa(new Error(e)))}var ur=class{constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=Wx(Vr);else{let d=Wi(t,"controllerchange").pipe(Zt(()=>t.controller)),D=Jo(()=>Sr(t.controller)),y=Dr(D,d);this.worker=y.pipe(Ci(N=>!!N)),this.registration=this.worker.pipe(Gi(()=>t.getRegistration()));let w=Wi(t,"message").pipe(Zt(N=>N.data)).pipe(Ci(N=>N&&N.type)).pipe(Ea());w.connect(),this.events=w}}postMessage(t,a){return this.worker.pipe(Cn(1),Ma(d=>{d.postMessage(mn({action:t},a))})).toPromise().then(()=>{})}postMessageWithOperation(t,a,d){let D=this.waitForOperationCompleted(d),y=this.postMessage(t,a);return Promise.all([y,D]).then(([,x])=>x)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let a;return typeof t=="string"?a=d=>d.type===t:a=d=>t.includes(d.type),this.events.pipe(Ci(a))}nextEventOfType(t){return this.eventsOfType(t).pipe(Cn(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Ci(a=>a.nonce===t),Cn(1),Zt(a=>{if(a.result!==void 0)return a.result;throw new Error(a.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},vc=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(d){if(this.sw=d,this.pushManager=null,this.subscriptionChanges=new tn,!d.isEnabled){this.messages=yi,this.notificationClicks=yi,this.subscription=yi;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Zt(y=>y.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Zt(y=>y.data)),this.pushManager=this.sw.registration.pipe(Zt(y=>y.pushManager));let D=this.pushManager.pipe(Gi(y=>y.getSubscription()));this.subscription=Qo(D,this.subscriptionChanges)}requestSubscription(d){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Vr));let D={userVisibleOnly:!0},y=this.decodeBase64(d.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),x=new Uint8Array(new ArrayBuffer(y.length));for(let c=0;c<y.length;c++)x[c]=y.charCodeAt(c);return D.applicationServerKey=x,this.pushManager.pipe(Gi(c=>c.subscribe(D)),Cn(1)).toPromise().then(c=>(this.subscriptionChanges.next(c),c))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Vr));let d=D=>{if(D===null)throw new Error("Not subscribed to push notifications.");return D.unsubscribe().then(y=>{if(!y)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(Cn(1),Gi(d)).toPromise()}decodeBase64(d){return atob(d)}};t.\u0275fac=function(D){return new(D||t)(ht(ur))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})(),Gx=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(d){if(this.sw=d,!d.isEnabled){this.versionUpdates=yi,this.unrecoverable=yi;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Vr));let d=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:d},d)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Vr));let d=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:d},d)}};t.\u0275fac=function(D){return new(D||t)(ht(ur))},t.\u0275prov=xt({token:t,factory:t.\u0275fac});let e=t;return e})();var Lg=new St("");function Yx(e,t,a,d){return()=>{if(!(lc(d)&&"serviceWorker"in navigator&&a.enabled!==!1))return;let D=e.get(Vt),y=e.get(Ni);D.runOutsideAngular(()=>{let c=navigator.serviceWorker,u=()=>c.controller?.postMessage({action:"INITIALIZE"});c.addEventListener("controllerchange",u),y.onDestroy(()=>{c.removeEventListener("controllerchange",u)})});let x;if(typeof a.registrationStrategy=="function")x=a.registrationStrategy();else{let[c,...u]=(a.registrationStrategy||"registerWhenStable:30000").split(":");switch(c){case"registerImmediately":x=Sr(null);break;case"registerWithDelay":x=Rg(+u[0]||0);break;case"registerWhenStable":x=u[0]?Qo(jg(e),Rg(+u[0])):jg(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${a.registrationStrategy}`)}}D.runOutsideAngular(()=>x.pipe(Cn(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:a.scope}).catch(c=>console.error("Service worker registration failed with:",c))))}}function Rg(e){return Sr(null).pipe(xa(e))}function jg(e){return e.get(Ni).isStable.pipe(Ci(a=>a))}function Xx(e,t){return new ur(lc(t)&&e.enabled!==!1?navigator.serviceWorker:void 0)}var Ur=class{};function Fg(e,t={}){return xl([vc,Gx,{provide:Lg,useValue:e},{provide:Ur,useValue:t},{provide:ur,useFactory:Xx,deps:[Ur,$n]},{provide:nc,useFactory:Yx,deps:[_i,Lg,Ur,$n],multi:!0}])}var Bg=(()=>{class e{static \u0275fac=function(d){return new(d||e)};static \u0275cmp=xs({type:e,selectors:[["app-camera-icon"]],standalone:!0,features:[Rs],decls:5,vars:0,consts:[[1,"icon"],["fill","#F4B389","height","30px","width","30px","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 487 487",0,"xml","space","preserve"],["d",`M308.1,277.95c0,35.7-28.9,64.6-64.6,64.6s-64.6-28.9-64.6-64.6s28.9-64.6,64.6-64.6S308.1,242.25,308.1,277.95z
                 M440.3,116.05c25.8,0,46.7,20.9,46.7,46.7v122.4v103.8c0,27.5-22.3,49.8-49.8,49.8H49.8c-27.5,0-49.8-22.3-49.8-49.8v-103.9
                v-122.3l0,0c0-25.8,20.9-46.7,46.7-46.7h93.4l4.4-18.6c6.7-28.8,32.4-49.2,62-49.2h74.1c29.6,0,55.3,20.4,62,49.2l4.3,18.6H440.3z
                 M97.4,183.45c0-12.9-10.5-23.4-23.4-23.4c-13,0-23.5,10.5-23.5,23.4s10.5,23.4,23.4,23.4C86.9,206.95,97.4,196.45,97.4,183.45z
                 M358.7,277.95c0-63.6-51.6-115.2-115.2-115.2s-115.2,51.6-115.2,115.2s51.6,115.2,115.2,115.2S358.7,341.55,358.7,277.95z`]],template:function(d,D){d&1&&(wt(0,"div",0),ih(),wt(1,"svg",1)(2,"g")(3,"g"),li(4,"path",2),Yt()()()())},styles:[".icon[_ngcontent-%COMP%]{width:fit-content;height:fit-content}"]})}return e})();var Vg=DI(zg());var Hg=(()=>{class e{constructor(){}requestPermission(){"Notification"in window&&Notification.requestPermission().then(a=>{console.log(a==="granted"?"Permission granted":"Permission denied")})}showNotification(a,d){"Notification"in window&&Notification.permission==="granted"&&new Notification(a,d)}static \u0275fac=function(d){return new(d||e)};static \u0275prov=xt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ug=(()=>{class e{swPush;VAPID_PUBLIC_KEY="BGVAZbJWakz0omywUpcDqLHYRETFOM4_W4X5ZZsoTD6Wc45fpOs7t-JFLy2_NnVYS0_-t4noUQ_xk9u_Wit8_eg";constructor(a){this.swPush=a}subscribeToNotifications(){this.swPush.requestSubscription({serverPublicKey:this.VAPID_PUBLIC_KEY}).then(a=>{console.log("Subscription received: ",a)}).catch(a=>console.error("Could not subscribe to notifications",a))}listenForNotifications(){this.swPush.messages.subscribe(a=>{console.log("Received message: ",a)}),this.swPush.notificationClicks.subscribe(({action:a,notification:d})=>{console.log("Action: ",a),console.log("Notification: ",d)})}static \u0275fac=function(d){return new(d||e)(ht(vc))};static \u0275prov=xt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Qx=["videoElement"],Kx=["canvas"],qx=["tuiRef"];function eE(e,t){if(e&1){let a=ci();wt(0,"div",11),jn("click",function(){Xn(a);let D=hn(2);return Zn(D.startCamera())}),wt(1,"span"),Jn(2,"Start Camera"),Yt()()}}function tE(e,t){if(e&1){let a=ci();wt(0,"div",11),jn("click",function(){Xn(a);let D=hn(2);return Zn(D.stopCamera())}),wt(1,"span"),Jn(2,"Stop Camera"),Yt()()}}function nE(e,t){if(e&1){let a=ci();wt(0,"div",18),jn("click",function(){Xn(a);let D=hn(3);return Zn(D.startCamera())}),li(1,"app-camera-icon"),Yt()}}function iE(e,t){if(e&1&&(wt(0,"div",14),Oi(1,nE,2,0,"div",15),li(2,"video",16,1)(4,"canvas",17,2),Yt()),e&2){let a=hn(2);Mn(),sn("ngIf",!a.currentStream)}}function rE(e,t){if(e&1){let a=ci();wt(0,"div",10)(1,"div",11),jn("click",function(){Xn(a);let D=hn(2);return Zn(D.takePicture())}),wt(2,"span"),Jn(3,"Take Picture"),Yt()()()}}function oE(e,t){if(e&1&&(wt(0,"div",10),li(1,"img",19),Yt()),e&2){let a=hn(2);Mn(),sn("src",a.image,_h)}}function sE(e,t){if(e&1){let a=ci();wt(0,"div",11),jn("click",function(){Xn(a);let D=hn(2);return Zn(D.onEdit())}),wt(1,"span"),Jn(2,"Edit"),Yt()()}}function aE(e,t){if(e&1){let a=ci();wt(0,"div",7)(1,"div",8)(2,"span"),Jn(3,"Demo app Angular + PWA"),Yt()(),wt(4,"div",9)(5,"div",10)(6,"div",11),jn("click",function(){Xn(a);let D=hn();return Zn(D.notify())}),wt(7,"span"),Jn(8,"Send Notification"),Yt()()(),wt(9,"div",10),Oi(10,eE,3,0,"div",4)(11,tE,3,0,"div",4),wt(12,"div",11),jn("click",function(){Xn(a);let D=hn();return Zn(D.switchCamera())}),wt(13,"span"),Jn(14,"Switch Camera"),Yt()()(),Oi(15,iE,6,1,"div",12)(16,rE,4,0,"div",13)(17,oE,2,1,"div",13)(18,sE,3,0,"div",4),Yt()()}if(e&2){let a=hn();Mn(10),sn("ngIf",!a.currentStream),Mn(),sn("ngIf",a.currentStream),Mn(4),sn("ngIf",a.image.length===0),Mn(),sn("ngIf",a.currentStream),Mn(),sn("ngIf",a.image.length),Mn(),sn("ngIf",a.image.length)}}function lE(e,t){if(e&1){let a=ci();wt(0,"div",11),jn("click",function(){Xn(a);let D=hn();return Zn(D.onBack())}),wt(1,"span"),Jn(2,"Back"),Yt()()}}function cE(e,t){e&1&&li(0,"canvas")}var Wg=(()=>{class e{notificationService;pushService;constructor(a,d){this.notificationService=a,this.pushService=d}_tuiImageEditor;image="";title="test-pwa";deferredPrompt;showInstallButton=!1;currentStream=null;isFrontCamera=!0;isEdit=!1;videoElement;canvas;_tuiRef;ngOnInit(){this.notificationService.requestPermission(),this.pushService.subscribeToNotifications(),this.pushService.listenForNotifications()}ngAfterViewInit(){}_createImageEditor(){this._tuiImageEditor=new Vg.default(this._tuiRef.nativeElement,{includeUI:{loadImage:{path:this.image,name:"SampleImage"},initMenu:"filter",menuBarPosition:"bottom"},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}),this._tuiImageEditor.loadImageFromURL("","My example picture")}notify(){this.notificationService.showNotification("Notificare PWA",{body:"Bommmba !!!!!!"})}installPWA(){this.showInstallButton=!1,this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(a=>{a.outcome==="accepted"?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),this.deferredPrompt=null})}startCamera(){return ia(this,null,function*(){this.image="",this.stopCamera();let a={video:{facingMode:this.isFrontCamera?"user":"environment"}};try{this.currentStream=yield navigator.mediaDevices.getUserMedia(a),this.videoElement.nativeElement.srcObject=this.currentStream,this.videoElement.nativeElement.play()}catch(d){console.error("Error accessing camera:",d)}})}switchCamera(){this.isFrontCamera=!this.isFrontCamera,this.startCamera()}stopCamera(){this.currentStream&&(this.currentStream.getTracks().forEach(a=>a.stop()),this.currentStream=null,this.videoElement.nativeElement.srcObject=null)}takePicture(){let a=this.videoElement.nativeElement,d=this.canvas.nativeElement,D=d.getContext("2d");D&&(d.width=a.videoWidth,d.height=a.videoHeight,D.drawImage(a,0,0,d.width,d.height),this.image=d.toDataURL("image/png"),this.stopCamera())}downloadImage(a){let d=document.createElement("a");d.href=a,d.download="picture.png",d.click()}onBack(){location.reload()}onEdit(){this.isEdit=!0,this._createImageEditor()}static \u0275fac=function(d){return new(d||e)(Ai(Hg),Ai(Ug))};static \u0275cmp=xs({type:e,selectors:[["app-root"]],viewQuery:function(d,D){if(d&1&&(ks(Qx,5),ks(Kx,5),ks(qx,5)),d&2){let y;Ps(y=Ls())&&(D.videoElement=y.first),Ps(y=Ls())&&(D.canvas=y.first),Ps(y=Ls())&&(D._tuiRef=y.first)}},standalone:!0,features:[Rs],decls:5,vars:3,consts:[["tuiRef",""],["videoElement",""],["canvas",""],["class","demo-app",4,"ngIf"],["class","button",3,"click",4,"ngIf"],[2,"height","1000px !important"],[4,"ngIf"],[1,"demo-app"],[1,"demo-app__title"],[1,"demo-app__content"],[1,"demo-app__content__item"],[1,"button",3,"click"],["class","demo-app__content__item demo-app__content__item--camera",4,"ngIf"],["class","demo-app__content__item",4,"ngIf"],[1,"demo-app__content__item","demo-app__content__item--camera"],["class","camera-icon",3,"click",4,"ngIf"],["autoplay",""],[2,"display","none"],[1,"camera-icon",3,"click"],["alt","",3,"src"]],template:function(d,D){d&1&&(Oi(0,aE,19,6,"div",3)(1,lE,3,0,"div",4),wt(2,"div",5,0),Oi(4,cE,1,0,"canvas",6),Yt()),d&2&&(sn("ngIf",!D.isEdit),Mn(),sn("ngIf",D.isEdit),Mn(3),sn("ngIf",D.isEdit))},dependencies:[Mg,Bg],styles:[".demo-app[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin:0 auto;width:100%;max-width:400px}.demo-app__title[_ngcontent-%COMP%]{margin-top:30px;font-weight:700;font-size:24px;text-align:center}.demo-app__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.demo-app__content__item[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px}.demo-app__content__item[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;background-color:#282828}.demo-app__content__item--camera[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;cursor:pointer}.demo-app__content__item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.button[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;width:calc(100% - 40px);background:#282828;padding:20px;border-radius:20px;cursor:pointer}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto}.button[_ngcontent-%COMP%]:hover{background-color:#f4b389;color:#000}.camera-icon[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:1}.tui-image-editor-container[_ngcontent-%COMP%]{height:1000px!important}"]})}return e})();function uE(){let e="en";document.documentElement.lang=e}uE();Pg(Wg,{providers:[Fg("ngsw-worker.js",{registrationStrategy:"registerWhenStable:30000"})]}).catch(e=>console.error(e));
